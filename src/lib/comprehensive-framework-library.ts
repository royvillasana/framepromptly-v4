/**
 * @fileoverview Comprehensive Framework Library
 * Complete set of research-backed UX frameworks with comprehensive instructions
 */

import { EnhancedUXFramework, EnhancedUXTool, ResearchBacking } from './research-backed-frameworks';

/**
 * Enhanced Double Diamond Framework
 */
export const ENHANCED_DOUBLE_DIAMOND: EnhancedUXFramework = {
  id: 'double-diamond-enhanced',
  name: 'Double Diamond (Research-Backed)',
  description: 'Systematic design process with comprehensive research foundation and accessibility integration',
  color: '#10B981',
  characteristics: {
    focus: 'Structured problem-solving with inclusive discovery and delivery',
    timeline: '3-8 months with accessibility checkpoints',
    complexity: 'Medium (enhanced with research rigor)',
    teamSize: '4-10 people including accessibility experts',
    outcome: 'Systematically validated, accessible solutions'
  },
  stages: [], // Will be populated
  researchBacking: {
    methodology: {
      foundationalTheory: [
        'Design Council\'s Double Diamond model (2005)',
        'Divergent-Convergent Thinking Theory (Guilford, 1967)',
        'Systems Thinking in Design (Checkland, 1981)',
        'Inclusive Innovation Framework (Clayton Christensen Institute)',
        'Accessibility-First Design Methodology (WebAIM, 2019)'
      ],
      researchEvidence: [
        'Design Council\'s 15-year study on design process effectiveness',
        'British Design Council ROI studies showing 4:1 return',
        'Government Digital Service accessibility improvements',
        '200+ case studies from inclusive design implementations',
        'Academic research on structured design process outcomes'
      ],
      industryStandards: [
        'ISO 9241-210:2019 Human-centred design processes',
        'BS 7000-6:2005 Design management systems',
        'WCAG 2.1 accessibility integration requirements',
        'Government Digital Service Design Principles',
        'European Accessibility Act compliance standards'
      ],
      academicSources: [
        'Design Issues Journal - Process methodology research',
        'CoDesign Journal - Participatory design methods',
        'Design Studies - Systematic design research',
        'Universal Access in the Information Society',
        'Journal of Accessibility and Design for All'
      ]
    },
    bestPractices: {
      preparation: [
        'Define accessibility requirements in project charter',
        'Establish diverse stakeholder advisory group',
        'Set up inclusive research and testing environments',
        'Create accessibility competency development plan',
        'Define measurable inclusion and accessibility KPIs'
      ],
      execution: [
        'Use structured divergent-convergent cycles with accessibility checkpoints',
        'Include accessibility experts in all diamond phases',
        'Document accessibility decisions and rationale throughout',
        'Regular validation with diverse user groups',
        'Maintain accessibility artifact repository'
      ],
      analysis: [
        'Apply systematic evaluation criteria including accessibility',
        'Use evidence-based decision making frameworks',
        'Document trade-offs and accessibility impact assessments',
        'Validate solutions across different user scenarios',
        'Measure against predefined accessibility success criteria'
      ],
      deliverables: [
        'Comprehensive accessibility specifications integrated',
        'Evidence-based design decisions documented',
        'Inclusive testing results and validation reports',
        'Accessibility compliance certification',
        'Implementation guides with accessibility requirements'
      ]
    },
    accessibilityProtocols: {
      inclusiveDesign: [
        'Apply Inclusive Design Principles throughout all diamond phases',
        'Use progressive disclosure and flexible interaction patterns',
        'Design for cognitive accessibility from the start',
        'Consider assistive technology compatibility in all solutions',
        'Implement universal design principles systematically'
      ],
      accessibilityGuidelines: [
        'WCAG 2.1 AA minimum compliance with AAA aspirational goals',
        'Section 508 compliance for government projects',
        'Platform-specific accessibility guidelines integration',
        'International accessibility standards consideration',
        'Emerging technology accessibility requirements'
      ],
      diversityConsiderations: [
        'Include intersectional perspective in all research phases',
        'Consider global accessibility needs and cultural differences',
        'Account for varying technological access and literacy',
        'Include economic accessibility in solution design',
        'Address language and communication diversity'
      ],
      ethicalGuidelines: [
        'Apply ethical design framework throughout process',
        'Consider long-term accessibility maintenance responsibilities',
        'Ensure equitable access to solution benefits',
        'Document ethical decision-making rationale',
        'Include community benefit assessment'
      ]
    },
    qualityAssurance: {
      validationCriteria: [
        'Solution tested across four diamond phases with accessibility validation',
        'Systematic evidence collection and analysis completed',
        'Accessibility compliance verified through multiple testing methods',
        'Stakeholder validation including disability community representatives',
        'Business case includes accessibility and inclusion ROI'
      ],
      successMetrics: [
        'Process completion rate meeting timeline with accessibility milestones',
        'Accessibility compliance score ≥95% across all deliverables',
        'Stakeholder satisfaction ≥4.5/5.0 across diverse groups',
        'Solution effectiveness verified through systematic testing',
        'Cost-benefit analysis positive including accessibility investments'
      ],
      commonPitfalls: [
        'Rushing through discovery phases without adequate accessibility research',
        'Treating accessibility as separate track rather than integrated approach',
        'Not allocating sufficient time for inclusive design iterations',
        'Over-relying on automated testing without human accessibility validation',
        'Failing to maintain accessibility standards through delivery phases'
      ],
      qualityChecklist: [
        '✓ All diamond phases include accessibility checkpoints',
        '✓ Diverse user representation in discovery and validation',
        '✓ Evidence-based decision making documented',
        '✓ Accessibility compliance verified at each convergence point',
        '✓ Systematic testing completed with assistive technologies',
        '✓ Implementation includes accessibility maintenance plan',
        '✓ Team accessibility competency verified'
      ]
    }
  },
  comprehensiveInstructions: {
    overview: 'The Double Diamond is a systematic design process that maps the design journey from problem to solution through four distinct phases: Discover, Define, Develop, and Deliver. This enhanced version integrates comprehensive accessibility protocols and evidence-based methodologies to ensure systematic, inclusive design outcomes.',
    whenToUse: [
      'Complex problems requiring systematic exploration and validation',
      'Projects where both problem and solution space are unclear',
      'Situations requiring evidence-based design decisions',
      'Large-scale projects with multiple stakeholders and accessibility requirements',
      'Innovation projects where systematic risk management is important',
      'Government or regulated industry projects requiring compliance'
    ],
    whenNotToUse: [
      'Simple problems with well-defined solutions',
      'Emergency or crisis response situations',
      'Projects with extremely limited budgets for systematic research',
      'Teams unwilling to follow structured process methodology',
      'Situations where speed is more important than systematic validation'
    ],
    prerequisites: [
      'Leadership commitment to systematic design process',
      'Budget allocation for all four diamond phases including accessibility',
      'Team with diverse skills including accessibility expertise',
      'Access to real users throughout process including people with disabilities',
      'Organizational readiness for evidence-based decision making',
      'Time allocation for iterative validation and refinement'
    ],
    expectedOutcomes: [
      'Systematically validated problem definition with accessibility considerations',
      'Evidence-based solution design with comprehensive accessibility features',
      'Clear documentation of design decisions and accessibility rationale',
      'Validated solution ready for implementation with accessibility specifications',
      'Team capability development in systematic accessible design',
      'Measurable business outcomes with inclusion and accessibility metrics'
    ],
    timeInvestment: '3-8 months depending on complexity, with structured phases and accessibility validation milestones',
    teamComposition: [
      'Project Lead with systematic design process experience',
      'UX Researchers skilled in inclusive research methods',
      'Accessibility Specialist integrated throughout process',
      'Service/Product Designer with accessibility design expertise',
      'Business Analyst with inclusive business model experience',
      'Technical Lead familiar with accessible implementation',
      'Community Representatives from affected user groups'
    ]
  }
};

/**
 * Enhanced Google Design Sprint with accessibility integration
 */
export const ENHANCED_DESIGN_SPRINT: EnhancedUXFramework = {
  id: 'design-sprint-enhanced',
  name: 'Design Sprint (Accessible)',
  description: 'Rapid prototyping and validation with integrated accessibility protocols',
  color: '#EF4444',
  characteristics: {
    focus: 'Rapid validation with accessibility from day one',
    timeline: '5 days with accessibility validation',
    complexity: 'Medium (intensive with accessibility integration)',
    teamSize: '5-7 people including accessibility expert',
    outcome: 'Validated prototype with accessibility baseline'
  },
  stages: [], // Will be populated
  researchBacking: {
    methodology: {
      foundationalTheory: [
        'Google Ventures Sprint Methodology (Knapp, Zeratsky, Kowitz, 2016)',
        'Rapid Prototyping Theory (Brown, 1991)',
        'Time-boxed Innovation Framework',
        'Lean Startup Methodology with Accessibility (Ries, 2011)',
        'Accessible Design Sprint Methodology (Microsoft, 2019)'
      ],
      researchEvidence: [
        'Google Ventures 1000+ sprint case studies',
        'ADP accessibility-first sprint ROI documentation',
        'Microsoft inclusive design sprint effectiveness data',
        'Salesforce accessibility sprint success metrics',
        'Academic research on rapid accessible prototyping'
      ],
      industryStandards: [
        'Agile accessibility integration standards',
        'WCAG 2.1 rapid compliance testing protocols',
        'ISO/IEC 40500:2012 accessibility testing in sprints',
        'Accessible prototyping tool standards',
        'Sprint accessibility checkpoint frameworks'
      ],
      academicSources: [
        'ACM CHI Conference - Rapid accessible design papers',
        'Design Issues - Sprint methodology research',
        'International Journal of Human-Computer Studies',
        'Universal Access in the Information Society',
        'ACM Transactions on Accessible Computing'
      ]
    },
    bestPractices: {
      preparation: [
        'Include accessibility expert as core sprint team member',
        'Pre-sprint accessibility constraint definition',
        'Set up accessible prototyping tools and environments',
        'Define accessibility success criteria for sprint',
        'Recruit diverse user testing participants in advance'
      ],
      execution: [
        'Daily accessibility checkpoint reviews',
        'Prototype with accessibility features from day one',
        'Use accessible design components and patterns',
        'Include assistive technology testing in daily validation',
        'Document accessibility decisions in real-time'
      ],
      analysis: [
        'Validate prototype with diverse users including disability community',
        'Test with multiple assistive technologies',
        'Analyze accessibility alongside usability metrics',
        'Document accessibility insights and improvements needed',
        'Plan post-sprint accessibility iteration cycles'
      ],
      deliverables: [
        'Accessible prototype with WCAG 2.1 baseline compliance',
        'Accessibility testing report with user feedback',
        'Design system components with accessibility specifications',
        'Implementation roadmap including accessibility requirements',
        'Sprint retrospective including accessibility learnings'
      ]
    },
    accessibilityProtocols: {
      inclusiveDesign: [
        'Design for keyboard navigation from wireframe stage',
        'Include screen reader compatibility in all design decisions',
        'Consider cognitive accessibility in all user flow designs',
        'Apply inclusive color and contrast standards throughout',
        'Design mobile-first with accessibility considerations'
      ],
      accessibilityGuidelines: [
        'WCAG 2.1 A compliance minimum for sprint prototype',
        'Platform accessibility guidelines adherence',
        'Assistive technology compatibility verification',
        'Color blindness and low vision accommodation',
        'Motor accessibility considerations for all interactions'
      ],
      diversityConsiderations: [
        'Include diverse sprint team members from different backgrounds',
        'Consider cultural differences in interaction patterns',
        'Test with users across age, ability, and technology familiarity',
        'Account for different device capabilities and internet speeds',
        'Include non-English speaking users in testing when relevant'
      ],
      ethicalGuidelines: [
        'Ensure rapid decisions don\'t compromise accessibility standards',
        'Include accessibility cost-benefit in all sprint decisions',
        'Consider long-term accessibility maintenance in sprint outcomes',
        'Respect participant accessibility needs in user testing',
        'Document ethical accessibility decision-making process'
      ]
    },
    qualityAssurance: {
      validationCriteria: [
        'Prototype tested with assistive technologies',
        'User testing includes diverse ability representation',
        'Accessibility features validated through multiple testing methods',
        'Sprint outcomes meet predefined accessibility criteria',
        'Solution demonstrates clear accessibility improvement potential'
      ],
      successMetrics: [
        'Sprint completion within 5 days with accessibility milestones',
        'Prototype achieves WCAG 2.1 A compliance minimum',
        'User testing satisfaction ≥4.0/5.0 across diverse participants',
        'Accessibility feature validation rate ≥90%',
        'Team accessibility competency increase measurable post-sprint'
      ],
      commonPitfalls: [
        'Treating accessibility as post-sprint addition',
        'Not including accessibility expert in core sprint team',
        'Using inaccessible prototyping tools that limit final outcome',
        'Rushing user testing without proper accessibility accommodations',
        'Not planning for post-sprint accessibility iteration'
      ],
      qualityChecklist: [
        '✓ Accessibility expert included in sprint team from day one',
        '✓ Accessible prototyping tools and methods used throughout',
        '✓ Daily accessibility validation completed',
        '✓ Diverse user testing participants recruited and accommodated',
        '✓ Prototype demonstrates baseline accessibility compliance',
        '✓ Post-sprint accessibility roadmap defined',
        '✓ Sprint learnings include accessibility insights'
      ]
    }
  },
  comprehensiveInstructions: {
    overview: 'Design Sprint is a rapid 5-day process for answering critical business questions through design, prototyping, and user testing. This enhanced version integrates accessibility expertise and inclusive design practices to ensure rapid innovation doesn\'t compromise accessibility standards.',
    whenToUse: [
      'Urgent business questions requiring rapid accessible solution validation',
      'New product or feature concepts needing accessibility baseline',
      'Team alignment needed on accessible design approach',
      'Limited time available but accessibility cannot be compromised',
      'Innovation challenges where inclusive design is competitive advantage',
      'Proof-of-concept development with accessibility requirements'
    ],
    whenNotToUse: [
      'Problems requiring extensive user research before solution development',
      'Highly technical implementation with complex accessibility requirements',
      'Situations where team cannot commit to full 5-day intensive process',
      'Projects where accessibility expertise is not available',
      'Complex enterprise solutions requiring extensive stakeholder alignment'
    ],
    prerequisites: [
      'Leadership support for rapid accessible innovation',
      'Accessibility expert available for full sprint duration',
      'Diverse user testing participants pre-recruited',
      'Accessible prototyping tools and environments ready',
      'Clear business question focused on accessible solution',
      'Team commitment to intensive 5-day process with accessibility focus'
    ],
    expectedOutcomes: [
      'Validated accessible prototype with user feedback',
      'Clear direction on accessible solution feasibility',
      'Team alignment on accessible design approach',
      'Rapid learning about user needs including accessibility requirements',
      'Foundation for accessible implementation roadmap',
      'Demonstrated organizational capability for accessible rapid innovation'
    ],
    timeInvestment: '5 intensive days with accessibility validation integrated throughout',
    teamComposition: [
      'Sprint Facilitator experienced in accessible design sprints',
      'Product/Business Decision Maker committed to accessibility',
      'Accessibility Expert as core team member',
      'Designer with accessible design system expertise',
      'Developer familiar with accessible implementation',
      'User Researcher skilled in accessible testing methods',
      'Subject Matter Expert with inclusive domain knowledge'
    ]
  }
};

/**
 * Comprehensive Framework Library Export
 */
export const COMPREHENSIVE_FRAMEWORK_LIBRARY = {
  'double-diamond-enhanced': ENHANCED_DOUBLE_DIAMOND,
  'design-sprint-enhanced': ENHANCED_DESIGN_SPRINT,
  // Additional frameworks can be added here
};

/**
 * Helper functions for framework management
 */
export function getAllEnhancedFrameworks(): EnhancedUXFramework[] {
  return Object.values(COMPREHENSIVE_FRAMEWORK_LIBRARY);
}

export function getEnhancedFrameworkById(id: string): EnhancedUXFramework | null {
  return COMPREHENSIVE_FRAMEWORK_LIBRARY[id as keyof typeof COMPREHENSIVE_FRAMEWORK_LIBRARY] || null;
}

/**
 * Framework recommendation engine based on project requirements
 */
export interface ProjectRequirements {
  timeline: 'urgent' | 'short' | 'medium' | 'long';
  complexity: 'low' | 'medium' | 'high';
  teamSize: 'small' | 'medium' | 'large';
  accessibilityPriority: 'essential' | 'important' | 'nice-to-have';
  problemDefinition: 'clear' | 'unclear' | 'unknown';
  stakeholderAlignment: 'high' | 'medium' | 'low';
}

export function recommendFrameworks(requirements: ProjectRequirements): EnhancedUXFramework[] {
  const frameworks = getAllEnhancedFrameworks();
  const recommendations: { framework: EnhancedUXFramework; score: number }[] = [];

  frameworks.forEach(framework => {
    let score = 0;

    // Timeline scoring
    if (requirements.timeline === 'urgent' && framework.id.includes('sprint')) score += 3;
    if (requirements.timeline === 'medium' && framework.id.includes('diamond')) score += 2;
    if (requirements.timeline === 'long' && framework.id.includes('thinking')) score += 3;

    // Complexity scoring
    if (requirements.complexity === 'high' && framework.characteristics.complexity.includes('High')) score += 2;
    if (requirements.complexity === 'medium' && framework.characteristics.complexity.includes('Medium')) score += 2;

    // Accessibility priority scoring
    if (requirements.accessibilityPriority === 'essential') score += 3; // All enhanced frameworks have accessibility
    if (requirements.accessibilityPriority === 'important') score += 2;

    // Problem definition scoring
    if (requirements.problemDefinition === 'unclear' && framework.id.includes('diamond')) score += 2;
    if (requirements.problemDefinition === 'clear' && framework.id.includes('sprint')) score += 2;

    recommendations.push({ framework, score });
  });

  return recommendations
    .sort((a, b) => b.score - a.score)
    .slice(0, 3)
    .map(rec => rec.framework);
}