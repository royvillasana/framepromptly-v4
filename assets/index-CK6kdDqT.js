var Tae=Object.defineProperty;var nD=e=>{throw TypeError(e)};var Fae=(e,t,n)=>t in e?Tae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Je=(e,t,n)=>Fae(e,typeof t!="symbol"?t+"":t,n),lN=(e,t,n)=>t.has(e)||nD("Cannot "+n);var Ge=(e,t,n)=>(lN(e,t,"read from private field"),n?n.call(e):t.get(e)),fr=(e,t,n)=>t.has(e)?nD("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Sn=(e,t,n,r)=>(lN(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Zi=(e,t,n)=>(lN(e,t,"access private method"),n);var Bb=(e,t,n,r)=>({set _(s){Sn(e,t,s,n)},get _(){return Ge(e,t,r)}});function Dae(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Oi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tj(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Uae(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var C8={exports:{}},Fj={},j8={exports:{}},Kn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cw=Symbol.for("react.element"),Lae=Symbol.for("react.portal"),Mae=Symbol.for("react.fragment"),Rae=Symbol.for("react.strict_mode"),Oae=Symbol.for("react.profiler"),Qae=Symbol.for("react.provider"),Hae=Symbol.for("react.context"),$ae=Symbol.for("react.forward_ref"),zae=Symbol.for("react.suspense"),Vae=Symbol.for("react.memo"),qae=Symbol.for("react.lazy"),rD=Symbol.iterator;function Kae(e){return e===null||typeof e!="object"?null:(e=rD&&e[rD]||e["@@iterator"],typeof e=="function"?e:null)}var k8={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S8=Object.assign,N8={};function Fv(e,t,n){this.props=e,this.context=t,this.refs=N8,this.updater=n||k8}Fv.prototype.isReactComponent={};Fv.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Fv.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function B8(){}B8.prototype=Fv.prototype;function JI(e,t,n){this.props=e,this.context=t,this.refs=N8,this.updater=n||k8}var ZI=JI.prototype=new B8;ZI.constructor=JI;S8(ZI,Fv.prototype);ZI.isPureReactComponent=!0;var sD=Array.isArray,E8=Object.prototype.hasOwnProperty,eP={current:null},_8={key:!0,ref:!0,__self:!0,__source:!0};function I8(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)E8.call(t,r)&&!_8.hasOwnProperty(r)&&(s[r]=t[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var l=Array(c),d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}if(e&&e.defaultProps)for(r in c=e.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:cw,type:e,key:i,ref:o,props:s,_owner:eP.current}}function Wae(e,t){return{$$typeof:cw,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function tP(e){return typeof e=="object"&&e!==null&&e.$$typeof===cw}function Gae(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var iD=/\/+/g;function dN(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Gae(""+e.key):t.toString(36)}function l2(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case cw:case Lae:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+dN(o,0):r,sD(s)?(n="",e!=null&&(n=e.replace(iD,"$&/")+"/"),l2(s,t,n,"",function(d){return d})):s!=null&&(tP(s)&&(s=Wae(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(iD,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",sD(e))for(var c=0;c<e.length;c++){i=e[c];var l=r+dN(i,c);o+=l2(i,t,n,l,s)}else if(l=Kae(e),typeof l=="function")for(e=l.call(e),c=0;!(i=e.next()).done;)i=i.value,l=r+dN(i,c++),o+=l2(i,t,n,l,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Eb(e,t,n){if(e==null)return e;var r=[],s=0;return l2(e,r,"","",function(i){return t.call(n,i,s++)}),r}function Yae(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Wa={current:null},d2={transition:null},Xae={ReactCurrentDispatcher:Wa,ReactCurrentBatchConfig:d2,ReactCurrentOwner:eP};function P8(){throw Error("act(...) is not supported in production builds of React.")}Kn.Children={map:Eb,forEach:function(e,t,n){Eb(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Eb(e,function(){t++}),t},toArray:function(e){return Eb(e,function(t){return t})||[]},only:function(e){if(!tP(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Kn.Component=Fv;Kn.Fragment=Mae;Kn.Profiler=Oae;Kn.PureComponent=JI;Kn.StrictMode=Rae;Kn.Suspense=zae;Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xae;Kn.act=P8;Kn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=S8({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=eP.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)E8.call(t,l)&&!_8.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&c!==void 0?c[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){c=Array(l);for(var d=0;d<l;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:cw,type:e.type,key:s,ref:i,props:r,_owner:o}};Kn.createContext=function(e){return e={$$typeof:Hae,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Qae,_context:e},e.Consumer=e};Kn.createElement=I8;Kn.createFactory=function(e){var t=I8.bind(null,e);return t.type=e,t};Kn.createRef=function(){return{current:null}};Kn.forwardRef=function(e){return{$$typeof:$ae,render:e}};Kn.isValidElement=tP;Kn.lazy=function(e){return{$$typeof:qae,_payload:{_status:-1,_result:e},_init:Yae}};Kn.memo=function(e,t){return{$$typeof:Vae,type:e,compare:t===void 0?null:t}};Kn.startTransition=function(e){var t=d2.transition;d2.transition={};try{e()}finally{d2.transition=t}};Kn.unstable_act=P8;Kn.useCallback=function(e,t){return Wa.current.useCallback(e,t)};Kn.useContext=function(e){return Wa.current.useContext(e)};Kn.useDebugValue=function(){};Kn.useDeferredValue=function(e){return Wa.current.useDeferredValue(e)};Kn.useEffect=function(e,t){return Wa.current.useEffect(e,t)};Kn.useId=function(){return Wa.current.useId()};Kn.useImperativeHandle=function(e,t,n){return Wa.current.useImperativeHandle(e,t,n)};Kn.useInsertionEffect=function(e,t){return Wa.current.useInsertionEffect(e,t)};Kn.useLayoutEffect=function(e,t){return Wa.current.useLayoutEffect(e,t)};Kn.useMemo=function(e,t){return Wa.current.useMemo(e,t)};Kn.useReducer=function(e,t,n){return Wa.current.useReducer(e,t,n)};Kn.useRef=function(e){return Wa.current.useRef(e)};Kn.useState=function(e){return Wa.current.useState(e)};Kn.useSyncExternalStore=function(e,t,n){return Wa.current.useSyncExternalStore(e,t,n)};Kn.useTransition=function(){return Wa.current.useTransition()};Kn.version="18.3.1";j8.exports=Kn;var w=j8.exports;const nt=Tj(w),nP=Dae({__proto__:null,default:nt},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jae=w,Zae=Symbol.for("react.element"),eoe=Symbol.for("react.fragment"),toe=Object.prototype.hasOwnProperty,noe=Jae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,roe={key:!0,ref:!0,__self:!0,__source:!0};function T8(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)toe.call(t,r)&&!roe.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Zae,type:e,key:i,ref:o,props:s,_owner:noe.current}}Fj.Fragment=eoe;Fj.jsx=T8;Fj.jsxs=T8;C8.exports=Fj;var a=C8.exports,F8={exports:{}},ec={},D8={exports:{}},U8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,R){var Y=$.length;$.push(R);e:for(;0<Y;){var X=Y-1>>>1,q=$[X];if(0<s(q,R))$[X]=R,$[Y]=q,Y=X;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var R=$[0],Y=$.pop();if(Y!==R){$[0]=Y;e:for(var X=0,q=$.length,K=q>>>1;X<K;){var J=2*(X+1)-1,W=$[J],ne=J+1,ae=$[ne];if(0>s(W,Y))ne<q&&0>s(ae,W)?($[X]=ae,$[ne]=Y,X=ne):($[X]=W,$[J]=Y,X=J);else if(ne<q&&0>s(ae,Y))$[X]=ae,$[ne]=Y,X=ne;else break e}}return R}function s($,R){var Y=$.sortIndex-R.sortIndex;return Y!==0?Y:$.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var l=[],d=[],u=1,h=null,A=3,f=!1,m=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x($){for(var R=n(d);R!==null;){if(R.callback===null)r(d);else if(R.startTime<=$)r(d),R.sortIndex=R.expirationTime,t(l,R);else break;R=n(d)}}function C($){if(g=!1,x($),!m)if(n(l)!==null)m=!0,U(S);else{var R=n(d);R!==null&&H(C,R.startTime-$)}}function S($,R){m=!1,g&&(g=!1,y(L),L=-1),f=!0;var Y=A;try{for(x(R),h=n(l);h!==null&&(!(h.expirationTime>R)||$&&!I());){var X=h.callback;if(typeof X=="function"){h.callback=null,A=h.priorityLevel;var q=X(h.expirationTime<=R);R=e.unstable_now(),typeof q=="function"?h.callback=q:h===n(l)&&r(l),x(R)}else r(l);h=n(l)}if(h!==null)var K=!0;else{var J=n(d);J!==null&&H(C,J.startTime-R),K=!1}return K}finally{h=null,A=Y,f=!1}}var _=!1,N=null,L=-1,P=5,F=-1;function I(){return!(e.unstable_now()-F<P)}function T(){if(N!==null){var $=e.unstable_now();F=$;var R=!0;try{R=N(!0,$)}finally{R?Q():(_=!1,N=null)}}else _=!1}var Q;if(typeof j=="function")Q=function(){j(T)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,M=D.port2;D.port1.onmessage=T,Q=function(){M.postMessage(null)}}else Q=function(){b(T,0)};function U($){N=$,_||(_=!0,Q())}function H($,R){L=b(function(){$(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){m||f||(m=!0,U(S))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return A},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function($){switch(A){case 1:case 2:case 3:var R=3;break;default:R=A}var Y=A;A=R;try{return $()}finally{A=Y}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,R){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Y=A;A=$;try{return R()}finally{A=Y}},e.unstable_scheduleCallback=function($,R,Y){var X=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?X+Y:X):Y=X,$){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=Y+q,$={id:u++,callback:R,priorityLevel:$,startTime:Y,expirationTime:q,sortIndex:-1},Y>X?($.sortIndex=Y,t(d,$),n(l)===null&&$===n(d)&&(g?(y(L),L=-1):g=!0,H(C,Y-X))):($.sortIndex=q,t(l,$),m||f||(m=!0,U(S))),$},e.unstable_shouldYield=I,e.unstable_wrapCallback=function($){var R=A;return function(){var Y=A;A=R;try{return $.apply(this,arguments)}finally{A=Y}}}})(U8);D8.exports=U8;var soe=D8.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ioe=w,Yo=soe;function ut(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var L8=new Set,nx={};function dm(e,t){ov(e,t),ov(e+"Capture",t)}function ov(e,t){for(nx[e]=t,e=0;e<t.length;e++)L8.add(t[e])}var Vu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),LE=Object.prototype.hasOwnProperty,aoe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,aD={},oD={};function ooe(e){return LE.call(oD,e)?!0:LE.call(aD,e)?!1:aoe.test(e)?oD[e]=!0:(aD[e]=!0,!1)}function coe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function loe(e,t,n,r){if(t===null||typeof t>"u"||coe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ga(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var zi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){zi[e]=new Ga(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];zi[t]=new Ga(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){zi[e]=new Ga(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){zi[e]=new Ga(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){zi[e]=new Ga(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){zi[e]=new Ga(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){zi[e]=new Ga(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){zi[e]=new Ga(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){zi[e]=new Ga(e,5,!1,e.toLowerCase(),null,!1,!1)});var rP=/[\-:]([a-z])/g;function sP(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(rP,sP);zi[t]=new Ga(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(rP,sP);zi[t]=new Ga(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(rP,sP);zi[t]=new Ga(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){zi[e]=new Ga(e,1,!1,e.toLowerCase(),null,!1,!1)});zi.xlinkHref=new Ga("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){zi[e]=new Ga(e,1,!1,e.toLowerCase(),null,!0,!0)});function iP(e,t,n,r){var s=zi.hasOwnProperty(t)?zi[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(loe(t,n,s,r)&&(n=null),r||s===null?ooe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var sh=ioe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_b=Symbol.for("react.element"),ug=Symbol.for("react.portal"),hg=Symbol.for("react.fragment"),aP=Symbol.for("react.strict_mode"),ME=Symbol.for("react.profiler"),M8=Symbol.for("react.provider"),R8=Symbol.for("react.context"),oP=Symbol.for("react.forward_ref"),RE=Symbol.for("react.suspense"),OE=Symbol.for("react.suspense_list"),cP=Symbol.for("react.memo"),oA=Symbol.for("react.lazy"),O8=Symbol.for("react.offscreen"),cD=Symbol.iterator;function Iy(e){return e===null||typeof e!="object"?null:(e=cD&&e[cD]||e["@@iterator"],typeof e=="function"?e:null)}var ws=Object.assign,uN;function e0(e){if(uN===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);uN=t&&t[1]||""}return`
`+uN+e}var hN=!1;function AN(e,t){if(!e||hN)return"";hN=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var l=`
`+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=c);break}}}finally{hN=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?e0(e):""}function doe(e){switch(e.tag){case 5:return e0(e.type);case 16:return e0("Lazy");case 13:return e0("Suspense");case 19:return e0("SuspenseList");case 0:case 2:case 15:return e=AN(e.type,!1),e;case 11:return e=AN(e.type.render,!1),e;case 1:return e=AN(e.type,!0),e;default:return""}}function QE(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case hg:return"Fragment";case ug:return"Portal";case ME:return"Profiler";case aP:return"StrictMode";case RE:return"Suspense";case OE:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case R8:return(e.displayName||"Context")+".Consumer";case M8:return(e._context.displayName||"Context")+".Provider";case oP:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case cP:return t=e.displayName||null,t!==null?t:QE(e.type)||"Memo";case oA:t=e._payload,e=e._init;try{return QE(e(t))}catch{}}return null}function uoe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return QE(t);case 8:return t===aP?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function KA(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Q8(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function hoe(e){var t=Q8(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ib(e){e._valueTracker||(e._valueTracker=hoe(e))}function H8(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Q8(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function rC(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function HE(e,t){var n=t.checked;return ws({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function lD(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=KA(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function $8(e,t){t=t.checked,t!=null&&iP(e,"checked",t,!1)}function $E(e,t){$8(e,t);var n=KA(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?zE(e,t.type,n):t.hasOwnProperty("defaultValue")&&zE(e,t.type,KA(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function dD(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function zE(e,t,n){(t!=="number"||rC(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var t0=Array.isArray;function Tg(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+KA(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function VE(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ut(91));return ws({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function uD(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ut(92));if(t0(n)){if(1<n.length)throw Error(ut(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:KA(n)}}function z8(e,t){var n=KA(t.value),r=KA(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function hD(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function V8(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qE(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?V8(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Pb,q8=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Pb=Pb||document.createElement("div"),Pb.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Pb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function rx(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var j0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Aoe=["Webkit","ms","Moz","O"];Object.keys(j0).forEach(function(e){Aoe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),j0[t]=j0[e]})});function K8(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||j0.hasOwnProperty(e)&&j0[e]?(""+t).trim():t+"px"}function W8(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=K8(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var foe=ws({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function KE(e,t){if(t){if(foe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ut(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ut(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ut(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ut(62))}}function WE(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var GE=null;function lP(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var YE=null,Fg=null,Dg=null;function AD(e){if(e=uw(e)){if(typeof YE!="function")throw Error(ut(280));var t=e.stateNode;t&&(t=Rj(t),YE(e.stateNode,e.type,t))}}function G8(e){Fg?Dg?Dg.push(e):Dg=[e]:Fg=e}function Y8(){if(Fg){var e=Fg,t=Dg;if(Dg=Fg=null,AD(e),t)for(e=0;e<t.length;e++)AD(t[e])}}function X8(e,t){return e(t)}function J8(){}var fN=!1;function Z8(e,t,n){if(fN)return e(t,n);fN=!0;try{return X8(e,t,n)}finally{fN=!1,(Fg!==null||Dg!==null)&&(J8(),Y8())}}function sx(e,t){var n=e.stateNode;if(n===null)return null;var r=Rj(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ut(231,t,typeof n));return n}var XE=!1;if(Vu)try{var Py={};Object.defineProperty(Py,"passive",{get:function(){XE=!0}}),window.addEventListener("test",Py,Py),window.removeEventListener("test",Py,Py)}catch{XE=!1}function poe(e,t,n,r,s,i,o,c,l){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(u){this.onError(u)}}var k0=!1,sC=null,iC=!1,JE=null,moe={onError:function(e){k0=!0,sC=e}};function goe(e,t,n,r,s,i,o,c,l){k0=!1,sC=null,poe.apply(moe,arguments)}function voe(e,t,n,r,s,i,o,c,l){if(goe.apply(this,arguments),k0){if(k0){var d=sC;k0=!1,sC=null}else throw Error(ut(198));iC||(iC=!0,JE=d)}}function um(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function eH(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fD(e){if(um(e)!==e)throw Error(ut(188))}function yoe(e){var t=e.alternate;if(!t){if(t=um(e),t===null)throw Error(ut(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return fD(s),e;if(i===r)return fD(s),t;i=i.sibling}throw Error(ut(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(ut(189))}}if(n.alternate!==r)throw Error(ut(190))}if(n.tag!==3)throw Error(ut(188));return n.stateNode.current===n?e:t}function tH(e){return e=yoe(e),e!==null?nH(e):null}function nH(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=nH(e);if(t!==null)return t;e=e.sibling}return null}var rH=Yo.unstable_scheduleCallback,pD=Yo.unstable_cancelCallback,xoe=Yo.unstable_shouldYield,woe=Yo.unstable_requestPaint,Vs=Yo.unstable_now,boe=Yo.unstable_getCurrentPriorityLevel,dP=Yo.unstable_ImmediatePriority,sH=Yo.unstable_UserBlockingPriority,aC=Yo.unstable_NormalPriority,Coe=Yo.unstable_LowPriority,iH=Yo.unstable_IdlePriority,Dj=null,_d=null;function joe(e){if(_d&&typeof _d.onCommitFiberRoot=="function")try{_d.onCommitFiberRoot(Dj,e,void 0,(e.current.flags&128)===128)}catch{}}var Cl=Math.clz32?Math.clz32:Noe,koe=Math.log,Soe=Math.LN2;function Noe(e){return e>>>=0,e===0?32:31-(koe(e)/Soe|0)|0}var Tb=64,Fb=4194304;function n0(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function oC(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=n0(c):(i&=o,i!==0&&(r=n0(i)))}else o=n&~s,o!==0?r=n0(o):i!==0&&(r=n0(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Cl(t),s=1<<n,r|=e[n],t&=~s;return r}function Boe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Eoe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Cl(i),c=1<<o,l=s[o];l===-1?(!(c&n)||c&r)&&(s[o]=Boe(c,t)):l<=t&&(e.expiredLanes|=c),i&=~c}}function ZE(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function aH(){var e=Tb;return Tb<<=1,!(Tb&4194240)&&(Tb=64),e}function pN(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function lw(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Cl(t),e[t]=n}function _oe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Cl(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function uP(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Cl(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Br=0;function oH(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var cH,hP,lH,dH,uH,e5=!1,Db=[],IA=null,PA=null,TA=null,ix=new Map,ax=new Map,uA=[],Ioe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mD(e,t){switch(e){case"focusin":case"focusout":IA=null;break;case"dragenter":case"dragleave":PA=null;break;case"mouseover":case"mouseout":TA=null;break;case"pointerover":case"pointerout":ix.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ax.delete(t.pointerId)}}function Ty(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=uw(t),t!==null&&hP(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Poe(e,t,n,r,s){switch(t){case"focusin":return IA=Ty(IA,e,t,n,r,s),!0;case"dragenter":return PA=Ty(PA,e,t,n,r,s),!0;case"mouseover":return TA=Ty(TA,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return ix.set(i,Ty(ix.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ax.set(i,Ty(ax.get(i)||null,e,t,n,r,s)),!0}return!1}function hH(e){var t=cp(e.target);if(t!==null){var n=um(t);if(n!==null){if(t=n.tag,t===13){if(t=eH(n),t!==null){e.blockedOn=t,uH(e.priority,function(){lH(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function u2(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=t5(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);GE=r,n.target.dispatchEvent(r),GE=null}else return t=uw(n),t!==null&&hP(t),e.blockedOn=n,!1;t.shift()}return!0}function gD(e,t,n){u2(e)&&n.delete(t)}function Toe(){e5=!1,IA!==null&&u2(IA)&&(IA=null),PA!==null&&u2(PA)&&(PA=null),TA!==null&&u2(TA)&&(TA=null),ix.forEach(gD),ax.forEach(gD)}function Fy(e,t){e.blockedOn===t&&(e.blockedOn=null,e5||(e5=!0,Yo.unstable_scheduleCallback(Yo.unstable_NormalPriority,Toe)))}function ox(e){function t(s){return Fy(s,e)}if(0<Db.length){Fy(Db[0],e);for(var n=1;n<Db.length;n++){var r=Db[n];r.blockedOn===e&&(r.blockedOn=null)}}for(IA!==null&&Fy(IA,e),PA!==null&&Fy(PA,e),TA!==null&&Fy(TA,e),ix.forEach(t),ax.forEach(t),n=0;n<uA.length;n++)r=uA[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<uA.length&&(n=uA[0],n.blockedOn===null);)hH(n),n.blockedOn===null&&uA.shift()}var Ug=sh.ReactCurrentBatchConfig,cC=!0;function Foe(e,t,n,r){var s=Br,i=Ug.transition;Ug.transition=null;try{Br=1,AP(e,t,n,r)}finally{Br=s,Ug.transition=i}}function Doe(e,t,n,r){var s=Br,i=Ug.transition;Ug.transition=null;try{Br=4,AP(e,t,n,r)}finally{Br=s,Ug.transition=i}}function AP(e,t,n,r){if(cC){var s=t5(e,t,n,r);if(s===null)kN(e,t,r,lC,n),mD(e,r);else if(Poe(s,e,t,n,r))r.stopPropagation();else if(mD(e,r),t&4&&-1<Ioe.indexOf(e)){for(;s!==null;){var i=uw(s);if(i!==null&&cH(i),i=t5(e,t,n,r),i===null&&kN(e,t,r,lC,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else kN(e,t,r,null,n)}}var lC=null;function t5(e,t,n,r){if(lC=null,e=lP(r),e=cp(e),e!==null)if(t=um(e),t===null)e=null;else if(n=t.tag,n===13){if(e=eH(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return lC=e,null}function AH(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(boe()){case dP:return 1;case sH:return 4;case aC:case Coe:return 16;case iH:return 536870912;default:return 16}default:return 16}}var wA=null,fP=null,h2=null;function fH(){if(h2)return h2;var e,t=fP,n=t.length,r,s="value"in wA?wA.value:wA.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return h2=s.slice(e,1<r?1-r:void 0)}function A2(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ub(){return!0}function vD(){return!1}function tc(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ub:vD,this.isPropagationStopped=vD,this}return ws(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ub)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ub)},persist:function(){},isPersistent:Ub}),t}var Dv={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pP=tc(Dv),dw=ws({},Dv,{view:0,detail:0}),Uoe=tc(dw),mN,gN,Dy,Uj=ws({},dw,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mP,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Dy&&(Dy&&e.type==="mousemove"?(mN=e.screenX-Dy.screenX,gN=e.screenY-Dy.screenY):gN=mN=0,Dy=e),mN)},movementY:function(e){return"movementY"in e?e.movementY:gN}}),yD=tc(Uj),Loe=ws({},Uj,{dataTransfer:0}),Moe=tc(Loe),Roe=ws({},dw,{relatedTarget:0}),vN=tc(Roe),Ooe=ws({},Dv,{animationName:0,elapsedTime:0,pseudoElement:0}),Qoe=tc(Ooe),Hoe=ws({},Dv,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$oe=tc(Hoe),zoe=ws({},Dv,{data:0}),xD=tc(zoe),Voe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qoe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Koe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Woe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Koe[e])?!!t[e]:!1}function mP(){return Woe}var Goe=ws({},dw,{key:function(e){if(e.key){var t=Voe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=A2(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?qoe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mP,charCode:function(e){return e.type==="keypress"?A2(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?A2(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yoe=tc(Goe),Xoe=ws({},Uj,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wD=tc(Xoe),Joe=ws({},dw,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mP}),Zoe=tc(Joe),ece=ws({},Dv,{propertyName:0,elapsedTime:0,pseudoElement:0}),tce=tc(ece),nce=ws({},Uj,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),rce=tc(nce),sce=[9,13,27,32],gP=Vu&&"CompositionEvent"in window,S0=null;Vu&&"documentMode"in document&&(S0=document.documentMode);var ice=Vu&&"TextEvent"in window&&!S0,pH=Vu&&(!gP||S0&&8<S0&&11>=S0),bD=" ",CD=!1;function mH(e,t){switch(e){case"keyup":return sce.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gH(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ag=!1;function ace(e,t){switch(e){case"compositionend":return gH(t);case"keypress":return t.which!==32?null:(CD=!0,bD);case"textInput":return e=t.data,e===bD&&CD?null:e;default:return null}}function oce(e,t){if(Ag)return e==="compositionend"||!gP&&mH(e,t)?(e=fH(),h2=fP=wA=null,Ag=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return pH&&t.locale!=="ko"?null:t.data;default:return null}}var cce={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jD(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!cce[e.type]:t==="textarea"}function vH(e,t,n,r){G8(r),t=dC(t,"onChange"),0<t.length&&(n=new pP("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var N0=null,cx=null;function lce(e){EH(e,0)}function Lj(e){var t=mg(e);if(H8(t))return e}function dce(e,t){if(e==="change")return t}var yH=!1;if(Vu){var yN;if(Vu){var xN="oninput"in document;if(!xN){var kD=document.createElement("div");kD.setAttribute("oninput","return;"),xN=typeof kD.oninput=="function"}yN=xN}else yN=!1;yH=yN&&(!document.documentMode||9<document.documentMode)}function SD(){N0&&(N0.detachEvent("onpropertychange",xH),cx=N0=null)}function xH(e){if(e.propertyName==="value"&&Lj(cx)){var t=[];vH(t,cx,e,lP(e)),Z8(lce,t)}}function uce(e,t,n){e==="focusin"?(SD(),N0=t,cx=n,N0.attachEvent("onpropertychange",xH)):e==="focusout"&&SD()}function hce(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Lj(cx)}function Ace(e,t){if(e==="click")return Lj(t)}function fce(e,t){if(e==="input"||e==="change")return Lj(t)}function pce(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Nl=typeof Object.is=="function"?Object.is:pce;function lx(e,t){if(Nl(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!LE.call(t,s)||!Nl(e[s],t[s]))return!1}return!0}function ND(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function BD(e,t){var n=ND(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ND(n)}}function wH(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wH(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function bH(){for(var e=window,t=rC();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=rC(e.document)}return t}function vP(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function mce(e){var t=bH(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&wH(n.ownerDocument.documentElement,n)){if(r!==null&&vP(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=BD(n,i);var o=BD(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gce=Vu&&"documentMode"in document&&11>=document.documentMode,fg=null,n5=null,B0=null,r5=!1;function ED(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;r5||fg==null||fg!==rC(r)||(r=fg,"selectionStart"in r&&vP(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),B0&&lx(B0,r)||(B0=r,r=dC(n5,"onSelect"),0<r.length&&(t=new pP("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=fg)))}function Lb(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var pg={animationend:Lb("Animation","AnimationEnd"),animationiteration:Lb("Animation","AnimationIteration"),animationstart:Lb("Animation","AnimationStart"),transitionend:Lb("Transition","TransitionEnd")},wN={},CH={};Vu&&(CH=document.createElement("div").style,"AnimationEvent"in window||(delete pg.animationend.animation,delete pg.animationiteration.animation,delete pg.animationstart.animation),"TransitionEvent"in window||delete pg.transitionend.transition);function Mj(e){if(wN[e])return wN[e];if(!pg[e])return e;var t=pg[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in CH)return wN[e]=t[n];return e}var jH=Mj("animationend"),kH=Mj("animationiteration"),SH=Mj("animationstart"),NH=Mj("transitionend"),BH=new Map,_D="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rf(e,t){BH.set(e,t),dm(t,[e])}for(var bN=0;bN<_D.length;bN++){var CN=_D[bN],vce=CN.toLowerCase(),yce=CN[0].toUpperCase()+CN.slice(1);rf(vce,"on"+yce)}rf(jH,"onAnimationEnd");rf(kH,"onAnimationIteration");rf(SH,"onAnimationStart");rf("dblclick","onDoubleClick");rf("focusin","onFocus");rf("focusout","onBlur");rf(NH,"onTransitionEnd");ov("onMouseEnter",["mouseout","mouseover"]);ov("onMouseLeave",["mouseout","mouseover"]);ov("onPointerEnter",["pointerout","pointerover"]);ov("onPointerLeave",["pointerout","pointerover"]);dm("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));dm("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));dm("onBeforeInput",["compositionend","keypress","textInput","paste"]);dm("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));dm("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));dm("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var r0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xce=new Set("cancel close invalid load scroll toggle".split(" ").concat(r0));function ID(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,voe(r,t,void 0,e),e.currentTarget=null}function EH(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var c=r[o],l=c.instance,d=c.currentTarget;if(c=c.listener,l!==i&&s.isPropagationStopped())break e;ID(s,c,d),i=l}else for(o=0;o<r.length;o++){if(c=r[o],l=c.instance,d=c.currentTarget,c=c.listener,l!==i&&s.isPropagationStopped())break e;ID(s,c,d),i=l}}}if(iC)throw e=JE,iC=!1,JE=null,e}function Jr(e,t){var n=t[c5];n===void 0&&(n=t[c5]=new Set);var r=e+"__bubble";n.has(r)||(_H(t,e,2,!1),n.add(r))}function jN(e,t,n){var r=0;t&&(r|=4),_H(n,e,r,t)}var Mb="_reactListening"+Math.random().toString(36).slice(2);function dx(e){if(!e[Mb]){e[Mb]=!0,L8.forEach(function(n){n!=="selectionchange"&&(xce.has(n)||jN(n,!1,e),jN(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Mb]||(t[Mb]=!0,jN("selectionchange",!1,t))}}function _H(e,t,n,r){switch(AH(t)){case 1:var s=Foe;break;case 4:s=Doe;break;default:s=AP}n=s.bind(null,t,n,e),s=void 0,!XE||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function kN(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;c!==null;){if(o=cp(c),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}c=c.parentNode}}r=r.return}Z8(function(){var d=i,u=lP(n),h=[];e:{var A=BH.get(e);if(A!==void 0){var f=pP,m=e;switch(e){case"keypress":if(A2(n)===0)break e;case"keydown":case"keyup":f=Yoe;break;case"focusin":m="focus",f=vN;break;case"focusout":m="blur",f=vN;break;case"beforeblur":case"afterblur":f=vN;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=yD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Moe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Zoe;break;case jH:case kH:case SH:f=Qoe;break;case NH:f=tce;break;case"scroll":f=Uoe;break;case"wheel":f=rce;break;case"copy":case"cut":case"paste":f=$oe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=wD}var g=(t&4)!==0,b=!g&&e==="scroll",y=g?A!==null?A+"Capture":null:A;g=[];for(var j=d,x;j!==null;){x=j;var C=x.stateNode;if(x.tag===5&&C!==null&&(x=C,y!==null&&(C=sx(j,y),C!=null&&g.push(ux(j,C,x)))),b)break;j=j.return}0<g.length&&(A=new f(A,m,null,n,u),h.push({event:A,listeners:g}))}}if(!(t&7)){e:{if(A=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",A&&n!==GE&&(m=n.relatedTarget||n.fromElement)&&(cp(m)||m[qu]))break e;if((f||A)&&(A=u.window===u?u:(A=u.ownerDocument)?A.defaultView||A.parentWindow:window,f?(m=n.relatedTarget||n.toElement,f=d,m=m?cp(m):null,m!==null&&(b=um(m),m!==b||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=d),f!==m)){if(g=yD,C="onMouseLeave",y="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(g=wD,C="onPointerLeave",y="onPointerEnter",j="pointer"),b=f==null?A:mg(f),x=m==null?A:mg(m),A=new g(C,j+"leave",f,n,u),A.target=b,A.relatedTarget=x,C=null,cp(u)===d&&(g=new g(y,j+"enter",m,n,u),g.target=x,g.relatedTarget=b,C=g),b=C,f&&m)t:{for(g=f,y=m,j=0,x=g;x;x=Lm(x))j++;for(x=0,C=y;C;C=Lm(C))x++;for(;0<j-x;)g=Lm(g),j--;for(;0<x-j;)y=Lm(y),x--;for(;j--;){if(g===y||y!==null&&g===y.alternate)break t;g=Lm(g),y=Lm(y)}g=null}else g=null;f!==null&&PD(h,A,f,g,!1),m!==null&&b!==null&&PD(h,b,m,g,!0)}}e:{if(A=d?mg(d):window,f=A.nodeName&&A.nodeName.toLowerCase(),f==="select"||f==="input"&&A.type==="file")var S=dce;else if(jD(A))if(yH)S=fce;else{S=hce;var _=uce}else(f=A.nodeName)&&f.toLowerCase()==="input"&&(A.type==="checkbox"||A.type==="radio")&&(S=Ace);if(S&&(S=S(e,d))){vH(h,S,n,u);break e}_&&_(e,A,d),e==="focusout"&&(_=A._wrapperState)&&_.controlled&&A.type==="number"&&zE(A,"number",A.value)}switch(_=d?mg(d):window,e){case"focusin":(jD(_)||_.contentEditable==="true")&&(fg=_,n5=d,B0=null);break;case"focusout":B0=n5=fg=null;break;case"mousedown":r5=!0;break;case"contextmenu":case"mouseup":case"dragend":r5=!1,ED(h,n,u);break;case"selectionchange":if(gce)break;case"keydown":case"keyup":ED(h,n,u)}var N;if(gP)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Ag?mH(e,n)&&(L="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(pH&&n.locale!=="ko"&&(Ag||L!=="onCompositionStart"?L==="onCompositionEnd"&&Ag&&(N=fH()):(wA=u,fP="value"in wA?wA.value:wA.textContent,Ag=!0)),_=dC(d,L),0<_.length&&(L=new xD(L,e,null,n,u),h.push({event:L,listeners:_}),N?L.data=N:(N=gH(n),N!==null&&(L.data=N)))),(N=ice?ace(e,n):oce(e,n))&&(d=dC(d,"onBeforeInput"),0<d.length&&(u=new xD("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:d}),u.data=N))}EH(h,t)})}function ux(e,t,n){return{instance:e,listener:t,currentTarget:n}}function dC(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=sx(e,n),i!=null&&r.unshift(ux(e,i,s)),i=sx(e,t),i!=null&&r.push(ux(e,i,s))),e=e.return}return r}function Lm(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function PD(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var c=n,l=c.alternate,d=c.stateNode;if(l!==null&&l===r)break;c.tag===5&&d!==null&&(c=d,s?(l=sx(n,i),l!=null&&o.unshift(ux(n,l,c))):s||(l=sx(n,i),l!=null&&o.push(ux(n,l,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var wce=/\r\n?/g,bce=/\u0000|\uFFFD/g;function TD(e){return(typeof e=="string"?e:""+e).replace(wce,`
`).replace(bce,"")}function Rb(e,t,n){if(t=TD(t),TD(e)!==t&&n)throw Error(ut(425))}function uC(){}var s5=null,i5=null;function a5(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var o5=typeof setTimeout=="function"?setTimeout:void 0,Cce=typeof clearTimeout=="function"?clearTimeout:void 0,FD=typeof Promise=="function"?Promise:void 0,jce=typeof queueMicrotask=="function"?queueMicrotask:typeof FD<"u"?function(e){return FD.resolve(null).then(e).catch(kce)}:o5;function kce(e){setTimeout(function(){throw e})}function SN(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),ox(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ox(t)}function FA(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function DD(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Uv=Math.random().toString(36).slice(2),bd="__reactFiber$"+Uv,hx="__reactProps$"+Uv,qu="__reactContainer$"+Uv,c5="__reactEvents$"+Uv,Sce="__reactListeners$"+Uv,Nce="__reactHandles$"+Uv;function cp(e){var t=e[bd];if(t)return t;for(var n=e.parentNode;n;){if(t=n[qu]||n[bd]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=DD(e);e!==null;){if(n=e[bd])return n;e=DD(e)}return t}e=n,n=e.parentNode}return null}function uw(e){return e=e[bd]||e[qu],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function mg(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ut(33))}function Rj(e){return e[hx]||null}var l5=[],gg=-1;function sf(e){return{current:e}}function es(e){0>gg||(e.current=l5[gg],l5[gg]=null,gg--)}function $r(e,t){gg++,l5[gg]=e.current,e.current=t}var WA={},Aa=sf(WA),mo=sf(!1),Op=WA;function cv(e,t){var n=e.type.contextTypes;if(!n)return WA;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function go(e){return e=e.childContextTypes,e!=null}function hC(){es(mo),es(Aa)}function UD(e,t,n){if(Aa.current!==WA)throw Error(ut(168));$r(Aa,t),$r(mo,n)}function IH(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(ut(108,uoe(e)||"Unknown",s));return ws({},n,r)}function AC(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||WA,Op=Aa.current,$r(Aa,e),$r(mo,mo.current),!0}function LD(e,t,n){var r=e.stateNode;if(!r)throw Error(ut(169));n?(e=IH(e,t,Op),r.__reactInternalMemoizedMergedChildContext=e,es(mo),es(Aa),$r(Aa,e)):es(mo),$r(mo,n)}var Tu=null,Oj=!1,NN=!1;function PH(e){Tu===null?Tu=[e]:Tu.push(e)}function Bce(e){Oj=!0,PH(e)}function af(){if(!NN&&Tu!==null){NN=!0;var e=0,t=Br;try{var n=Tu;for(Br=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Tu=null,Oj=!1}catch(s){throw Tu!==null&&(Tu=Tu.slice(e+1)),rH(dP,af),s}finally{Br=t,NN=!1}}return null}var vg=[],yg=0,fC=null,pC=0,vc=[],yc=0,Qp=null,Mu=1,Ru="";function Jf(e,t){vg[yg++]=pC,vg[yg++]=fC,fC=e,pC=t}function TH(e,t,n){vc[yc++]=Mu,vc[yc++]=Ru,vc[yc++]=Qp,Qp=e;var r=Mu;e=Ru;var s=32-Cl(r)-1;r&=~(1<<s),n+=1;var i=32-Cl(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Mu=1<<32-Cl(t)+s|n<<s|r,Ru=i+e}else Mu=1<<i|n<<s|r,Ru=e}function yP(e){e.return!==null&&(Jf(e,1),TH(e,1,0))}function xP(e){for(;e===fC;)fC=vg[--yg],vg[yg]=null,pC=vg[--yg],vg[yg]=null;for(;e===Qp;)Qp=vc[--yc],vc[yc]=null,Ru=vc[--yc],vc[yc]=null,Mu=vc[--yc],vc[yc]=null}var Wo=null,Vo=null,ls=!1,gl=null;function FH(e,t){var n=bc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function MD(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Wo=e,Vo=FA(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Wo=e,Vo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Qp!==null?{id:Mu,overflow:Ru}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=bc(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Wo=e,Vo=null,!0):!1;default:return!1}}function d5(e){return(e.mode&1)!==0&&(e.flags&128)===0}function u5(e){if(ls){var t=Vo;if(t){var n=t;if(!MD(e,t)){if(d5(e))throw Error(ut(418));t=FA(n.nextSibling);var r=Wo;t&&MD(e,t)?FH(r,n):(e.flags=e.flags&-4097|2,ls=!1,Wo=e)}}else{if(d5(e))throw Error(ut(418));e.flags=e.flags&-4097|2,ls=!1,Wo=e}}}function RD(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Wo=e}function Ob(e){if(e!==Wo)return!1;if(!ls)return RD(e),ls=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!a5(e.type,e.memoizedProps)),t&&(t=Vo)){if(d5(e))throw DH(),Error(ut(418));for(;t;)FH(e,t),t=FA(t.nextSibling)}if(RD(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ut(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Vo=FA(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Vo=null}}else Vo=Wo?FA(e.stateNode.nextSibling):null;return!0}function DH(){for(var e=Vo;e;)e=FA(e.nextSibling)}function lv(){Vo=Wo=null,ls=!1}function wP(e){gl===null?gl=[e]:gl.push(e)}var Ece=sh.ReactCurrentBatchConfig;function Uy(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ut(309));var r=n.stateNode}if(!r)throw Error(ut(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(ut(284));if(!n._owner)throw Error(ut(290,e))}return e}function Qb(e,t){throw e=Object.prototype.toString.call(t),Error(ut(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function OD(e){var t=e._init;return t(e._payload)}function UH(e){function t(y,j){if(e){var x=y.deletions;x===null?(y.deletions=[j],y.flags|=16):x.push(j)}}function n(y,j){if(!e)return null;for(;j!==null;)t(y,j),j=j.sibling;return null}function r(y,j){for(y=new Map;j!==null;)j.key!==null?y.set(j.key,j):y.set(j.index,j),j=j.sibling;return y}function s(y,j){return y=MA(y,j),y.index=0,y.sibling=null,y}function i(y,j,x){return y.index=x,e?(x=y.alternate,x!==null?(x=x.index,x<j?(y.flags|=2,j):x):(y.flags|=2,j)):(y.flags|=1048576,j)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function c(y,j,x,C){return j===null||j.tag!==6?(j=FN(x,y.mode,C),j.return=y,j):(j=s(j,x),j.return=y,j)}function l(y,j,x,C){var S=x.type;return S===hg?u(y,j,x.props.children,C,x.key):j!==null&&(j.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===oA&&OD(S)===j.type)?(C=s(j,x.props),C.ref=Uy(y,j,x),C.return=y,C):(C=x2(x.type,x.key,x.props,null,y.mode,C),C.ref=Uy(y,j,x),C.return=y,C)}function d(y,j,x,C){return j===null||j.tag!==4||j.stateNode.containerInfo!==x.containerInfo||j.stateNode.implementation!==x.implementation?(j=DN(x,y.mode,C),j.return=y,j):(j=s(j,x.children||[]),j.return=y,j)}function u(y,j,x,C,S){return j===null||j.tag!==7?(j=Bp(x,y.mode,C,S),j.return=y,j):(j=s(j,x),j.return=y,j)}function h(y,j,x){if(typeof j=="string"&&j!==""||typeof j=="number")return j=FN(""+j,y.mode,x),j.return=y,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case _b:return x=x2(j.type,j.key,j.props,null,y.mode,x),x.ref=Uy(y,null,j),x.return=y,x;case ug:return j=DN(j,y.mode,x),j.return=y,j;case oA:var C=j._init;return h(y,C(j._payload),x)}if(t0(j)||Iy(j))return j=Bp(j,y.mode,x,null),j.return=y,j;Qb(y,j)}return null}function A(y,j,x,C){var S=j!==null?j.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return S!==null?null:c(y,j,""+x,C);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case _b:return x.key===S?l(y,j,x,C):null;case ug:return x.key===S?d(y,j,x,C):null;case oA:return S=x._init,A(y,j,S(x._payload),C)}if(t0(x)||Iy(x))return S!==null?null:u(y,j,x,C,null);Qb(y,x)}return null}function f(y,j,x,C,S){if(typeof C=="string"&&C!==""||typeof C=="number")return y=y.get(x)||null,c(j,y,""+C,S);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case _b:return y=y.get(C.key===null?x:C.key)||null,l(j,y,C,S);case ug:return y=y.get(C.key===null?x:C.key)||null,d(j,y,C,S);case oA:var _=C._init;return f(y,j,x,_(C._payload),S)}if(t0(C)||Iy(C))return y=y.get(x)||null,u(j,y,C,S,null);Qb(j,C)}return null}function m(y,j,x,C){for(var S=null,_=null,N=j,L=j=0,P=null;N!==null&&L<x.length;L++){N.index>L?(P=N,N=null):P=N.sibling;var F=A(y,N,x[L],C);if(F===null){N===null&&(N=P);break}e&&N&&F.alternate===null&&t(y,N),j=i(F,j,L),_===null?S=F:_.sibling=F,_=F,N=P}if(L===x.length)return n(y,N),ls&&Jf(y,L),S;if(N===null){for(;L<x.length;L++)N=h(y,x[L],C),N!==null&&(j=i(N,j,L),_===null?S=N:_.sibling=N,_=N);return ls&&Jf(y,L),S}for(N=r(y,N);L<x.length;L++)P=f(N,y,L,x[L],C),P!==null&&(e&&P.alternate!==null&&N.delete(P.key===null?L:P.key),j=i(P,j,L),_===null?S=P:_.sibling=P,_=P);return e&&N.forEach(function(I){return t(y,I)}),ls&&Jf(y,L),S}function g(y,j,x,C){var S=Iy(x);if(typeof S!="function")throw Error(ut(150));if(x=S.call(x),x==null)throw Error(ut(151));for(var _=S=null,N=j,L=j=0,P=null,F=x.next();N!==null&&!F.done;L++,F=x.next()){N.index>L?(P=N,N=null):P=N.sibling;var I=A(y,N,F.value,C);if(I===null){N===null&&(N=P);break}e&&N&&I.alternate===null&&t(y,N),j=i(I,j,L),_===null?S=I:_.sibling=I,_=I,N=P}if(F.done)return n(y,N),ls&&Jf(y,L),S;if(N===null){for(;!F.done;L++,F=x.next())F=h(y,F.value,C),F!==null&&(j=i(F,j,L),_===null?S=F:_.sibling=F,_=F);return ls&&Jf(y,L),S}for(N=r(y,N);!F.done;L++,F=x.next())F=f(N,y,L,F.value,C),F!==null&&(e&&F.alternate!==null&&N.delete(F.key===null?L:F.key),j=i(F,j,L),_===null?S=F:_.sibling=F,_=F);return e&&N.forEach(function(T){return t(y,T)}),ls&&Jf(y,L),S}function b(y,j,x,C){if(typeof x=="object"&&x!==null&&x.type===hg&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case _b:e:{for(var S=x.key,_=j;_!==null;){if(_.key===S){if(S=x.type,S===hg){if(_.tag===7){n(y,_.sibling),j=s(_,x.props.children),j.return=y,y=j;break e}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===oA&&OD(S)===_.type){n(y,_.sibling),j=s(_,x.props),j.ref=Uy(y,_,x),j.return=y,y=j;break e}n(y,_);break}else t(y,_);_=_.sibling}x.type===hg?(j=Bp(x.props.children,y.mode,C,x.key),j.return=y,y=j):(C=x2(x.type,x.key,x.props,null,y.mode,C),C.ref=Uy(y,j,x),C.return=y,y=C)}return o(y);case ug:e:{for(_=x.key;j!==null;){if(j.key===_)if(j.tag===4&&j.stateNode.containerInfo===x.containerInfo&&j.stateNode.implementation===x.implementation){n(y,j.sibling),j=s(j,x.children||[]),j.return=y,y=j;break e}else{n(y,j);break}else t(y,j);j=j.sibling}j=DN(x,y.mode,C),j.return=y,y=j}return o(y);case oA:return _=x._init,b(y,j,_(x._payload),C)}if(t0(x))return m(y,j,x,C);if(Iy(x))return g(y,j,x,C);Qb(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,j!==null&&j.tag===6?(n(y,j.sibling),j=s(j,x),j.return=y,y=j):(n(y,j),j=FN(x,y.mode,C),j.return=y,y=j),o(y)):n(y,j)}return b}var dv=UH(!0),LH=UH(!1),mC=sf(null),gC=null,xg=null,bP=null;function CP(){bP=xg=gC=null}function jP(e){var t=mC.current;es(mC),e._currentValue=t}function h5(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Lg(e,t){gC=e,bP=xg=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(uo=!0),e.firstContext=null)}function Ec(e){var t=e._currentValue;if(bP!==e)if(e={context:e,memoizedValue:t,next:null},xg===null){if(gC===null)throw Error(ut(308));xg=e,gC.dependencies={lanes:0,firstContext:e}}else xg=xg.next=e;return t}var lp=null;function kP(e){lp===null?lp=[e]:lp.push(e)}function MH(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,kP(t)):(n.next=s.next,s.next=n),t.interleaved=n,Ku(e,r)}function Ku(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var cA=!1;function SP(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function RH(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qu(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function DA(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,dr&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Ku(e,n)}return s=r.interleaved,s===null?(t.next=t,kP(r)):(t.next=s.next,s.next=t),r.interleaved=t,Ku(e,n)}function f2(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,uP(e,n)}}function QD(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function vC(e,t,n,r){var s=e.updateQueue;cA=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var l=c,d=l.next;l.next=null,o===null?i=d:o.next=d,o=l;var u=e.alternate;u!==null&&(u=u.updateQueue,c=u.lastBaseUpdate,c!==o&&(c===null?u.firstBaseUpdate=d:c.next=d,u.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,u=d=l=null,c=i;do{var A=c.lane,f=c.eventTime;if((r&A)===A){u!==null&&(u=u.next={eventTime:f,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var m=e,g=c;switch(A=t,f=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){h=m.call(f,h,A);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,A=typeof m=="function"?m.call(f,h,A):m,A==null)break e;h=ws({},h,A);break e;case 2:cA=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,A=s.effects,A===null?s.effects=[c]:A.push(c))}else f={eventTime:f,lane:A,tag:c.tag,payload:c.payload,callback:c.callback,next:null},u===null?(d=u=f,l=h):u=u.next=f,o|=A;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;A=c,c=A.next,A.next=null,s.lastBaseUpdate=A,s.shared.pending=null}}while(!0);if(u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=d,s.lastBaseUpdate=u,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);$p|=o,e.lanes=o,e.memoizedState=h}}function HD(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ut(191,s));s.call(r)}}}var hw={},Id=sf(hw),Ax=sf(hw),fx=sf(hw);function dp(e){if(e===hw)throw Error(ut(174));return e}function NP(e,t){switch($r(fx,t),$r(Ax,e),$r(Id,hw),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:qE(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=qE(t,e)}es(Id),$r(Id,t)}function uv(){es(Id),es(Ax),es(fx)}function OH(e){dp(fx.current);var t=dp(Id.current),n=qE(t,e.type);t!==n&&($r(Ax,e),$r(Id,n))}function BP(e){Ax.current===e&&(es(Id),es(Ax))}var vs=sf(0);function yC(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var BN=[];function EP(){for(var e=0;e<BN.length;e++)BN[e]._workInProgressVersionPrimary=null;BN.length=0}var p2=sh.ReactCurrentDispatcher,EN=sh.ReactCurrentBatchConfig,Hp=0,xs=null,mi=null,Ni=null,xC=!1,E0=!1,px=0,_ce=0;function ea(){throw Error(ut(321))}function _P(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Nl(e[n],t[n]))return!1;return!0}function IP(e,t,n,r,s,i){if(Hp=i,xs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,p2.current=e===null||e.memoizedState===null?Fce:Dce,e=n(r,s),E0){i=0;do{if(E0=!1,px=0,25<=i)throw Error(ut(301));i+=1,Ni=mi=null,t.updateQueue=null,p2.current=Uce,e=n(r,s)}while(E0)}if(p2.current=wC,t=mi!==null&&mi.next!==null,Hp=0,Ni=mi=xs=null,xC=!1,t)throw Error(ut(300));return e}function PP(){var e=px!==0;return px=0,e}function pd(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ni===null?xs.memoizedState=Ni=e:Ni=Ni.next=e,Ni}function _c(){if(mi===null){var e=xs.alternate;e=e!==null?e.memoizedState:null}else e=mi.next;var t=Ni===null?xs.memoizedState:Ni.next;if(t!==null)Ni=t,mi=e;else{if(e===null)throw Error(ut(310));mi=e,e={memoizedState:mi.memoizedState,baseState:mi.baseState,baseQueue:mi.baseQueue,queue:mi.queue,next:null},Ni===null?xs.memoizedState=Ni=e:Ni=Ni.next=e}return Ni}function mx(e,t){return typeof t=="function"?t(e):t}function _N(e){var t=_c(),n=t.queue;if(n===null)throw Error(ut(311));n.lastRenderedReducer=e;var r=mi,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,l=null,d=i;do{var u=d.lane;if((Hp&u)===u)l!==null&&(l=l.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};l===null?(c=l=h,o=r):l=l.next=h,xs.lanes|=u,$p|=u}d=d.next}while(d!==null&&d!==i);l===null?o=r:l.next=c,Nl(r,t.memoizedState)||(uo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,xs.lanes|=i,$p|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function IN(e){var t=_c(),n=t.queue;if(n===null)throw Error(ut(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Nl(i,t.memoizedState)||(uo=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function QH(){}function HH(e,t){var n=xs,r=_c(),s=t(),i=!Nl(r.memoizedState,s);if(i&&(r.memoizedState=s,uo=!0),r=r.queue,TP(VH.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ni!==null&&Ni.memoizedState.tag&1){if(n.flags|=2048,gx(9,zH.bind(null,n,r,s,t),void 0,null),Ei===null)throw Error(ut(349));Hp&30||$H(n,t,s)}return s}function $H(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=xs.updateQueue,t===null?(t={lastEffect:null,stores:null},xs.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function zH(e,t,n,r){t.value=n,t.getSnapshot=r,qH(t)&&KH(e)}function VH(e,t,n){return n(function(){qH(t)&&KH(e)})}function qH(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Nl(e,n)}catch{return!0}}function KH(e){var t=Ku(e,1);t!==null&&jl(t,e,1,-1)}function $D(e){var t=pd();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mx,lastRenderedState:e},t.queue=e,e=e.dispatch=Tce.bind(null,xs,e),[t.memoizedState,e]}function gx(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=xs.updateQueue,t===null?(t={lastEffect:null,stores:null},xs.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function WH(){return _c().memoizedState}function m2(e,t,n,r){var s=pd();xs.flags|=e,s.memoizedState=gx(1|t,n,void 0,r===void 0?null:r)}function Qj(e,t,n,r){var s=_c();r=r===void 0?null:r;var i=void 0;if(mi!==null){var o=mi.memoizedState;if(i=o.destroy,r!==null&&_P(r,o.deps)){s.memoizedState=gx(t,n,i,r);return}}xs.flags|=e,s.memoizedState=gx(1|t,n,i,r)}function zD(e,t){return m2(8390656,8,e,t)}function TP(e,t){return Qj(2048,8,e,t)}function GH(e,t){return Qj(4,2,e,t)}function YH(e,t){return Qj(4,4,e,t)}function XH(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function JH(e,t,n){return n=n!=null?n.concat([e]):null,Qj(4,4,XH.bind(null,t,e),n)}function FP(){}function ZH(e,t){var n=_c();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&_P(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function e$(e,t){var n=_c();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&_P(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function t$(e,t,n){return Hp&21?(Nl(n,t)||(n=aH(),xs.lanes|=n,$p|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,uo=!0),e.memoizedState=n)}function Ice(e,t){var n=Br;Br=n!==0&&4>n?n:4,e(!0);var r=EN.transition;EN.transition={};try{e(!1),t()}finally{Br=n,EN.transition=r}}function n$(){return _c().memoizedState}function Pce(e,t,n){var r=LA(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},r$(e))s$(t,n);else if(n=MH(e,t,n,r),n!==null){var s=Ha();jl(n,e,r,s),i$(n,t,r)}}function Tce(e,t,n){var r=LA(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(r$(e))s$(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,Nl(c,o)){var l=t.interleaved;l===null?(s.next=s,kP(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}n=MH(e,t,s,r),n!==null&&(s=Ha(),jl(n,e,r,s),i$(n,t,r))}}function r$(e){var t=e.alternate;return e===xs||t!==null&&t===xs}function s$(e,t){E0=xC=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function i$(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,uP(e,n)}}var wC={readContext:Ec,useCallback:ea,useContext:ea,useEffect:ea,useImperativeHandle:ea,useInsertionEffect:ea,useLayoutEffect:ea,useMemo:ea,useReducer:ea,useRef:ea,useState:ea,useDebugValue:ea,useDeferredValue:ea,useTransition:ea,useMutableSource:ea,useSyncExternalStore:ea,useId:ea,unstable_isNewReconciler:!1},Fce={readContext:Ec,useCallback:function(e,t){return pd().memoizedState=[e,t===void 0?null:t],e},useContext:Ec,useEffect:zD,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,m2(4194308,4,XH.bind(null,t,e),n)},useLayoutEffect:function(e,t){return m2(4194308,4,e,t)},useInsertionEffect:function(e,t){return m2(4,2,e,t)},useMemo:function(e,t){var n=pd();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=pd();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Pce.bind(null,xs,e),[r.memoizedState,e]},useRef:function(e){var t=pd();return e={current:e},t.memoizedState=e},useState:$D,useDebugValue:FP,useDeferredValue:function(e){return pd().memoizedState=e},useTransition:function(){var e=$D(!1),t=e[0];return e=Ice.bind(null,e[1]),pd().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=xs,s=pd();if(ls){if(n===void 0)throw Error(ut(407));n=n()}else{if(n=t(),Ei===null)throw Error(ut(349));Hp&30||$H(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,zD(VH.bind(null,r,i,e),[e]),r.flags|=2048,gx(9,zH.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=pd(),t=Ei.identifierPrefix;if(ls){var n=Ru,r=Mu;n=(r&~(1<<32-Cl(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=px++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=_ce++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Dce={readContext:Ec,useCallback:ZH,useContext:Ec,useEffect:TP,useImperativeHandle:JH,useInsertionEffect:GH,useLayoutEffect:YH,useMemo:e$,useReducer:_N,useRef:WH,useState:function(){return _N(mx)},useDebugValue:FP,useDeferredValue:function(e){var t=_c();return t$(t,mi.memoizedState,e)},useTransition:function(){var e=_N(mx)[0],t=_c().memoizedState;return[e,t]},useMutableSource:QH,useSyncExternalStore:HH,useId:n$,unstable_isNewReconciler:!1},Uce={readContext:Ec,useCallback:ZH,useContext:Ec,useEffect:TP,useImperativeHandle:JH,useInsertionEffect:GH,useLayoutEffect:YH,useMemo:e$,useReducer:IN,useRef:WH,useState:function(){return IN(mx)},useDebugValue:FP,useDeferredValue:function(e){var t=_c();return mi===null?t.memoizedState=e:t$(t,mi.memoizedState,e)},useTransition:function(){var e=IN(mx)[0],t=_c().memoizedState;return[e,t]},useMutableSource:QH,useSyncExternalStore:HH,useId:n$,unstable_isNewReconciler:!1};function dl(e,t){if(e&&e.defaultProps){t=ws({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function A5(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ws({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Hj={isMounted:function(e){return(e=e._reactInternals)?um(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ha(),s=LA(e),i=Qu(r,s);i.payload=t,n!=null&&(i.callback=n),t=DA(e,i,s),t!==null&&(jl(t,e,s,r),f2(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ha(),s=LA(e),i=Qu(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=DA(e,i,s),t!==null&&(jl(t,e,s,r),f2(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ha(),r=LA(e),s=Qu(n,r);s.tag=2,t!=null&&(s.callback=t),t=DA(e,s,r),t!==null&&(jl(t,e,r,n),f2(t,e,r))}};function VD(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!lx(n,r)||!lx(s,i):!0}function a$(e,t,n){var r=!1,s=WA,i=t.contextType;return typeof i=="object"&&i!==null?i=Ec(i):(s=go(t)?Op:Aa.current,r=t.contextTypes,i=(r=r!=null)?cv(e,s):WA),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Hj,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function qD(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Hj.enqueueReplaceState(t,t.state,null)}function f5(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},SP(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Ec(i):(i=go(t)?Op:Aa.current,s.context=cv(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(A5(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Hj.enqueueReplaceState(s,s.state,null),vC(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function hv(e,t){try{var n="",r=t;do n+=doe(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function PN(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function p5(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Lce=typeof WeakMap=="function"?WeakMap:Map;function o$(e,t,n){n=Qu(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){CC||(CC=!0,k5=r),p5(e,t)},n}function c$(e,t,n){n=Qu(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){p5(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){p5(e,t),typeof r!="function"&&(UA===null?UA=new Set([this]):UA.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function KD(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Lce;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Xce.bind(null,e,t,n),t.then(e,e))}function WD(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function GD(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Qu(-1,1),t.tag=2,DA(n,t,1))),n.lanes|=1),e)}var Mce=sh.ReactCurrentOwner,uo=!1;function Ua(e,t,n,r){t.child=e===null?LH(t,null,n,r):dv(t,e.child,n,r)}function YD(e,t,n,r,s){n=n.render;var i=t.ref;return Lg(t,s),r=IP(e,t,n,r,i,s),n=PP(),e!==null&&!uo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wu(e,t,s)):(ls&&n&&yP(t),t.flags|=1,Ua(e,t,r,s),t.child)}function XD(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!HP(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,l$(e,t,i,r,s)):(e=x2(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:lx,n(o,r)&&e.ref===t.ref)return Wu(e,t,s)}return t.flags|=1,e=MA(i,r),e.ref=t.ref,e.return=t,t.child=e}function l$(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(lx(i,r)&&e.ref===t.ref)if(uo=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(uo=!0);else return t.lanes=e.lanes,Wu(e,t,s)}return m5(e,t,n,r,s)}function d$(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},$r(bg,Ho),Ho|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,$r(bg,Ho),Ho|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,$r(bg,Ho),Ho|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,$r(bg,Ho),Ho|=r;return Ua(e,t,s,n),t.child}function u$(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function m5(e,t,n,r,s){var i=go(n)?Op:Aa.current;return i=cv(t,i),Lg(t,s),n=IP(e,t,n,r,i,s),r=PP(),e!==null&&!uo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wu(e,t,s)):(ls&&r&&yP(t),t.flags|=1,Ua(e,t,n,s),t.child)}function JD(e,t,n,r,s){if(go(n)){var i=!0;AC(t)}else i=!1;if(Lg(t,s),t.stateNode===null)g2(e,t),a$(t,n,r),f5(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,c=t.memoizedProps;o.props=c;var l=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Ec(d):(d=go(n)?Op:Aa.current,d=cv(t,d));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||l!==d)&&qD(t,o,r,d),cA=!1;var A=t.memoizedState;o.state=A,vC(t,r,o,s),l=t.memoizedState,c!==r||A!==l||mo.current||cA?(typeof u=="function"&&(A5(t,n,u,r),l=t.memoizedState),(c=cA||VD(t,n,c,r,A,l,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,RH(e,t),c=t.memoizedProps,d=t.type===t.elementType?c:dl(t.type,c),o.props=d,h=t.pendingProps,A=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ec(l):(l=go(n)?Op:Aa.current,l=cv(t,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==h||A!==l)&&qD(t,o,r,l),cA=!1,A=t.memoizedState,o.state=A,vC(t,r,o,s);var m=t.memoizedState;c!==h||A!==m||mo.current||cA?(typeof f=="function"&&(A5(t,n,f,r),m=t.memoizedState),(d=cA||VD(t,n,d,r,A,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),o.props=r,o.state=m,o.context=l,r=d):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),r=!1)}return g5(e,t,n,r,i,s)}function g5(e,t,n,r,s,i){u$(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&LD(t,n,!1),Wu(e,t,i);r=t.stateNode,Mce.current=t;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=dv(t,e.child,null,i),t.child=dv(t,null,c,i)):Ua(e,t,c,i),t.memoizedState=r.state,s&&LD(t,n,!0),t.child}function h$(e){var t=e.stateNode;t.pendingContext?UD(e,t.pendingContext,t.pendingContext!==t.context):t.context&&UD(e,t.context,!1),NP(e,t.containerInfo)}function ZD(e,t,n,r,s){return lv(),wP(s),t.flags|=256,Ua(e,t,n,r),t.child}var v5={dehydrated:null,treeContext:null,retryLane:0};function y5(e){return{baseLanes:e,cachePool:null,transitions:null}}function A$(e,t,n){var r=t.pendingProps,s=vs.current,i=!1,o=(t.flags&128)!==0,c;if((c=o)||(c=e!==null&&e.memoizedState===null?!1:(s&2)!==0),c?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),$r(vs,s&1),e===null)return u5(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Vj(o,r,0,null),e=Bp(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=y5(n),t.memoizedState=v5,e):DP(t,o));if(s=e.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return Rce(e,t,o,r,c,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,c=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=MA(s,l),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=MA(c,i):(i=Bp(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?y5(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=v5,r}return i=e.child,e=i.sibling,r=MA(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function DP(e,t){return t=Vj({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Hb(e,t,n,r){return r!==null&&wP(r),dv(t,e.child,null,n),e=DP(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Rce(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=PN(Error(ut(422))),Hb(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Vj({mode:"visible",children:r.children},s,0,null),i=Bp(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&dv(t,e.child,null,o),t.child.memoizedState=y5(o),t.memoizedState=v5,i);if(!(t.mode&1))return Hb(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(ut(419)),r=PN(i,r,void 0),Hb(e,t,o,r)}if(c=(o&e.childLanes)!==0,uo||c){if(r=Ei,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ku(e,s),jl(r,e,s,-1))}return QP(),r=PN(Error(ut(421))),Hb(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Jce.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Vo=FA(s.nextSibling),Wo=t,ls=!0,gl=null,e!==null&&(vc[yc++]=Mu,vc[yc++]=Ru,vc[yc++]=Qp,Mu=e.id,Ru=e.overflow,Qp=t),t=DP(t,r.children),t.flags|=4096,t)}function eU(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),h5(e.return,t,n)}function TN(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function f$(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Ua(e,t,r.children,n),r=vs.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&eU(e,n,t);else if(e.tag===19)eU(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if($r(vs,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&yC(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),TN(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&yC(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}TN(t,!0,n,null,i);break;case"together":TN(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function g2(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wu(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),$p|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ut(153));if(t.child!==null){for(e=t.child,n=MA(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=MA(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Oce(e,t,n){switch(t.tag){case 3:h$(t),lv();break;case 5:OH(t);break;case 1:go(t.type)&&AC(t);break;case 4:NP(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;$r(mC,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?($r(vs,vs.current&1),t.flags|=128,null):n&t.child.childLanes?A$(e,t,n):($r(vs,vs.current&1),e=Wu(e,t,n),e!==null?e.sibling:null);$r(vs,vs.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return f$(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$r(vs,vs.current),r)break;return null;case 22:case 23:return t.lanes=0,d$(e,t,n)}return Wu(e,t,n)}var p$,x5,m$,g$;p$=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};x5=function(){};m$=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,dp(Id.current);var i=null;switch(n){case"input":s=HE(e,s),r=HE(e,r),i=[];break;case"select":s=ws({},s,{value:void 0}),r=ws({},r,{value:void 0}),i=[];break;case"textarea":s=VE(e,s),r=VE(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=uC)}KE(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(nx.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var l=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&l!==c&&(l!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(d,n)),n=l;else d==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,c=c?c.__html:void 0,l!=null&&c!==l&&(i=i||[]).push(d,l)):d==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(d,""+l):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(nx.hasOwnProperty(d)?(l!=null&&d==="onScroll"&&Jr("scroll",e),i||c===l||(i=[])):(i=i||[]).push(d,l))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};g$=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ly(e,t){if(!ls)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ta(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qce(e,t,n){var r=t.pendingProps;switch(xP(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ta(t),null;case 1:return go(t.type)&&hC(),ta(t),null;case 3:return r=t.stateNode,uv(),es(mo),es(Aa),EP(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ob(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,gl!==null&&(B5(gl),gl=null))),x5(e,t),ta(t),null;case 5:BP(t);var s=dp(fx.current);if(n=t.type,e!==null&&t.stateNode!=null)m$(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ut(166));return ta(t),null}if(e=dp(Id.current),Ob(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[bd]=t,r[hx]=i,e=(t.mode&1)!==0,n){case"dialog":Jr("cancel",r),Jr("close",r);break;case"iframe":case"object":case"embed":Jr("load",r);break;case"video":case"audio":for(s=0;s<r0.length;s++)Jr(r0[s],r);break;case"source":Jr("error",r);break;case"img":case"image":case"link":Jr("error",r),Jr("load",r);break;case"details":Jr("toggle",r);break;case"input":lD(r,i),Jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Jr("invalid",r);break;case"textarea":uD(r,i),Jr("invalid",r)}KE(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Rb(r.textContent,c,e),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Rb(r.textContent,c,e),s=["children",""+c]):nx.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Jr("scroll",r)}switch(n){case"input":Ib(r),dD(r,i,!0);break;case"textarea":Ib(r),hD(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=uC)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=V8(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[bd]=t,e[hx]=r,p$(e,t,!1,!1),t.stateNode=e;e:{switch(o=WE(n,r),n){case"dialog":Jr("cancel",e),Jr("close",e),s=r;break;case"iframe":case"object":case"embed":Jr("load",e),s=r;break;case"video":case"audio":for(s=0;s<r0.length;s++)Jr(r0[s],e);s=r;break;case"source":Jr("error",e),s=r;break;case"img":case"image":case"link":Jr("error",e),Jr("load",e),s=r;break;case"details":Jr("toggle",e),s=r;break;case"input":lD(e,r),s=HE(e,r),Jr("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=ws({},r,{value:void 0}),Jr("invalid",e);break;case"textarea":uD(e,r),s=VE(e,r),Jr("invalid",e);break;default:s=r}KE(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var l=c[i];i==="style"?W8(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&q8(e,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&rx(e,l):typeof l=="number"&&rx(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(nx.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Jr("scroll",e):l!=null&&iP(e,i,l,o))}switch(n){case"input":Ib(e),dD(e,r,!1);break;case"textarea":Ib(e),hD(e);break;case"option":r.value!=null&&e.setAttribute("value",""+KA(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Tg(e,!!r.multiple,i,!1):r.defaultValue!=null&&Tg(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=uC)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ta(t),null;case 6:if(e&&t.stateNode!=null)g$(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ut(166));if(n=dp(fx.current),dp(Id.current),Ob(t)){if(r=t.stateNode,n=t.memoizedProps,r[bd]=t,(i=r.nodeValue!==n)&&(e=Wo,e!==null))switch(e.tag){case 3:Rb(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Rb(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[bd]=t,t.stateNode=r}return ta(t),null;case 13:if(es(vs),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ls&&Vo!==null&&t.mode&1&&!(t.flags&128))DH(),lv(),t.flags|=98560,i=!1;else if(i=Ob(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(ut(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ut(317));i[bd]=t}else lv(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ta(t),i=!1}else gl!==null&&(B5(gl),gl=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||vs.current&1?vi===0&&(vi=3):QP())),t.updateQueue!==null&&(t.flags|=4),ta(t),null);case 4:return uv(),x5(e,t),e===null&&dx(t.stateNode.containerInfo),ta(t),null;case 10:return jP(t.type._context),ta(t),null;case 17:return go(t.type)&&hC(),ta(t),null;case 19:if(es(vs),i=t.memoizedState,i===null)return ta(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Ly(i,!1);else{if(vi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=yC(e),o!==null){for(t.flags|=128,Ly(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return $r(vs,vs.current&1|2),t.child}e=e.sibling}i.tail!==null&&Vs()>Av&&(t.flags|=128,r=!0,Ly(i,!1),t.lanes=4194304)}else{if(!r)if(e=yC(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ly(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ls)return ta(t),null}else 2*Vs()-i.renderingStartTime>Av&&n!==1073741824&&(t.flags|=128,r=!0,Ly(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Vs(),t.sibling=null,n=vs.current,$r(vs,r?n&1|2:n&1),t):(ta(t),null);case 22:case 23:return OP(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ho&1073741824&&(ta(t),t.subtreeFlags&6&&(t.flags|=8192)):ta(t),null;case 24:return null;case 25:return null}throw Error(ut(156,t.tag))}function Hce(e,t){switch(xP(t),t.tag){case 1:return go(t.type)&&hC(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return uv(),es(mo),es(Aa),EP(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return BP(t),null;case 13:if(es(vs),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ut(340));lv()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return es(vs),null;case 4:return uv(),null;case 10:return jP(t.type._context),null;case 22:case 23:return OP(),null;case 24:return null;default:return null}}var $b=!1,la=!1,$ce=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function wg(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fs(e,t,r)}else n.current=null}function w5(e,t,n){try{n()}catch(r){Fs(e,t,r)}}var tU=!1;function zce(e,t){if(s5=cC,e=bH(),vP(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,l=-1,d=0,u=0,h=e,A=null;t:for(;;){for(var f;h!==n||s!==0&&h.nodeType!==3||(c=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)A=h,h=f;for(;;){if(h===e)break t;if(A===n&&++d===s&&(c=o),A===i&&++u===r&&(l=o),(f=h.nextSibling)!==null)break;h=A,A=h.parentNode}h=f}n=c===-1||l===-1?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(i5={focusedElem:e,selectionRange:n},cC=!1,Ot=t;Ot!==null;)if(t=Ot,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ot=e;else for(;Ot!==null;){t=Ot;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,b=m.memoizedState,y=t.stateNode,j=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:dl(t.type,g),b);y.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ut(163))}}catch(C){Fs(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,Ot=e;break}Ot=t.return}return m=tU,tU=!1,m}function _0(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&w5(t,n,i)}s=s.next}while(s!==r)}}function $j(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function b5(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function v$(e){var t=e.alternate;t!==null&&(e.alternate=null,v$(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[bd],delete t[hx],delete t[c5],delete t[Sce],delete t[Nce])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function y$(e){return e.tag===5||e.tag===3||e.tag===4}function nU(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||y$(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function C5(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=uC));else if(r!==4&&(e=e.child,e!==null))for(C5(e,t,n),e=e.sibling;e!==null;)C5(e,t,n),e=e.sibling}function j5(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(j5(e,t,n),e=e.sibling;e!==null;)j5(e,t,n),e=e.sibling}var Ui=null,fl=!1;function Kh(e,t,n){for(n=n.child;n!==null;)x$(e,t,n),n=n.sibling}function x$(e,t,n){if(_d&&typeof _d.onCommitFiberUnmount=="function")try{_d.onCommitFiberUnmount(Dj,n)}catch{}switch(n.tag){case 5:la||wg(n,t);case 6:var r=Ui,s=fl;Ui=null,Kh(e,t,n),Ui=r,fl=s,Ui!==null&&(fl?(e=Ui,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ui.removeChild(n.stateNode));break;case 18:Ui!==null&&(fl?(e=Ui,n=n.stateNode,e.nodeType===8?SN(e.parentNode,n):e.nodeType===1&&SN(e,n),ox(e)):SN(Ui,n.stateNode));break;case 4:r=Ui,s=fl,Ui=n.stateNode.containerInfo,fl=!0,Kh(e,t,n),Ui=r,fl=s;break;case 0:case 11:case 14:case 15:if(!la&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&w5(n,t,o),s=s.next}while(s!==r)}Kh(e,t,n);break;case 1:if(!la&&(wg(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Fs(n,t,c)}Kh(e,t,n);break;case 21:Kh(e,t,n);break;case 22:n.mode&1?(la=(r=la)||n.memoizedState!==null,Kh(e,t,n),la=r):Kh(e,t,n);break;default:Kh(e,t,n)}}function rU(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new $ce),t.forEach(function(r){var s=Zce.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function rl(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,c=o;e:for(;c!==null;){switch(c.tag){case 5:Ui=c.stateNode,fl=!1;break e;case 3:Ui=c.stateNode.containerInfo,fl=!0;break e;case 4:Ui=c.stateNode.containerInfo,fl=!0;break e}c=c.return}if(Ui===null)throw Error(ut(160));x$(i,o,s),Ui=null,fl=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(d){Fs(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)w$(t,e),t=t.sibling}function w$(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(rl(t,e),dd(e),r&4){try{_0(3,e,e.return),$j(3,e)}catch(g){Fs(e,e.return,g)}try{_0(5,e,e.return)}catch(g){Fs(e,e.return,g)}}break;case 1:rl(t,e),dd(e),r&512&&n!==null&&wg(n,n.return);break;case 5:if(rl(t,e),dd(e),r&512&&n!==null&&wg(n,n.return),e.flags&32){var s=e.stateNode;try{rx(s,"")}catch(g){Fs(e,e.return,g)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,c=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&$8(s,i),WE(c,o);var d=WE(c,i);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?W8(s,h):u==="dangerouslySetInnerHTML"?q8(s,h):u==="children"?rx(s,h):iP(s,u,h,d)}switch(c){case"input":$E(s,i);break;case"textarea":z8(s,i);break;case"select":var A=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Tg(s,!!i.multiple,f,!1):A!==!!i.multiple&&(i.defaultValue!=null?Tg(s,!!i.multiple,i.defaultValue,!0):Tg(s,!!i.multiple,i.multiple?[]:"",!1))}s[hx]=i}catch(g){Fs(e,e.return,g)}}break;case 6:if(rl(t,e),dd(e),r&4){if(e.stateNode===null)throw Error(ut(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(g){Fs(e,e.return,g)}}break;case 3:if(rl(t,e),dd(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ox(t.containerInfo)}catch(g){Fs(e,e.return,g)}break;case 4:rl(t,e),dd(e);break;case 13:rl(t,e),dd(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(MP=Vs())),r&4&&rU(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(la=(d=la)||u,rl(t,e),la=d):rl(t,e),dd(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(Ot=e,u=e.child;u!==null;){for(h=Ot=u;Ot!==null;){switch(A=Ot,f=A.child,A.tag){case 0:case 11:case 14:case 15:_0(4,A,A.return);break;case 1:wg(A,A.return);var m=A.stateNode;if(typeof m.componentWillUnmount=="function"){r=A,n=A.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Fs(r,n,g)}}break;case 5:wg(A,A.return);break;case 22:if(A.memoizedState!==null){iU(h);continue}}f!==null?(f.return=A,Ot=f):iU(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,c.style.display=K8("display",o))}catch(g){Fs(e,e.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){Fs(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:rl(t,e),dd(e),r&4&&rU(e);break;case 21:break;default:rl(t,e),dd(e)}}function dd(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(y$(n)){var r=n;break e}n=n.return}throw Error(ut(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(rx(s,""),r.flags&=-33);var i=nU(e);j5(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=nU(e);C5(e,c,o);break;default:throw Error(ut(161))}}catch(l){Fs(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Vce(e,t,n){Ot=e,b$(e)}function b$(e,t,n){for(var r=(e.mode&1)!==0;Ot!==null;){var s=Ot,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||$b;if(!o){var c=s.alternate,l=c!==null&&c.memoizedState!==null||la;c=$b;var d=la;if($b=o,(la=l)&&!d)for(Ot=s;Ot!==null;)o=Ot,l=o.child,o.tag===22&&o.memoizedState!==null?aU(s):l!==null?(l.return=o,Ot=l):aU(s);for(;i!==null;)Ot=i,b$(i),i=i.sibling;Ot=s,$b=c,la=d}sU(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ot=i):sU(e)}}function sU(e){for(;Ot!==null;){var t=Ot;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:la||$j(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!la)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:dl(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&HD(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}HD(t,o,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&ox(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ut(163))}la||t.flags&512&&b5(t)}catch(A){Fs(t,t.return,A)}}if(t===e){Ot=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ot=n;break}Ot=t.return}}function iU(e){for(;Ot!==null;){var t=Ot;if(t===e){Ot=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ot=n;break}Ot=t.return}}function aU(e){for(;Ot!==null;){var t=Ot;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{$j(4,t)}catch(l){Fs(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(l){Fs(t,s,l)}}var i=t.return;try{b5(t)}catch(l){Fs(t,i,l)}break;case 5:var o=t.return;try{b5(t)}catch(l){Fs(t,o,l)}}}catch(l){Fs(t,t.return,l)}if(t===e){Ot=null;break}var c=t.sibling;if(c!==null){c.return=t.return,Ot=c;break}Ot=t.return}}var qce=Math.ceil,bC=sh.ReactCurrentDispatcher,UP=sh.ReactCurrentOwner,Sc=sh.ReactCurrentBatchConfig,dr=0,Ei=null,ri=null,$i=0,Ho=0,bg=sf(0),vi=0,vx=null,$p=0,zj=0,LP=0,I0=null,co=null,MP=0,Av=1/0,_u=null,CC=!1,k5=null,UA=null,zb=!1,bA=null,jC=0,P0=0,S5=null,v2=-1,y2=0;function Ha(){return dr&6?Vs():v2!==-1?v2:v2=Vs()}function LA(e){return e.mode&1?dr&2&&$i!==0?$i&-$i:Ece.transition!==null?(y2===0&&(y2=aH()),y2):(e=Br,e!==0||(e=window.event,e=e===void 0?16:AH(e.type)),e):1}function jl(e,t,n,r){if(50<P0)throw P0=0,S5=null,Error(ut(185));lw(e,n,r),(!(dr&2)||e!==Ei)&&(e===Ei&&(!(dr&2)&&(zj|=n),vi===4&&hA(e,$i)),vo(e,r),n===1&&dr===0&&!(t.mode&1)&&(Av=Vs()+500,Oj&&af()))}function vo(e,t){var n=e.callbackNode;Eoe(e,t);var r=oC(e,e===Ei?$i:0);if(r===0)n!==null&&pD(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&pD(n),t===1)e.tag===0?Bce(oU.bind(null,e)):PH(oU.bind(null,e)),jce(function(){!(dr&6)&&af()}),n=null;else{switch(oH(r)){case 1:n=dP;break;case 4:n=sH;break;case 16:n=aC;break;case 536870912:n=iH;break;default:n=aC}n=_$(n,C$.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function C$(e,t){if(v2=-1,y2=0,dr&6)throw Error(ut(327));var n=e.callbackNode;if(Mg()&&e.callbackNode!==n)return null;var r=oC(e,e===Ei?$i:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=kC(e,r);else{t=r;var s=dr;dr|=2;var i=k$();(Ei!==e||$i!==t)&&(_u=null,Av=Vs()+500,Np(e,t));do try{Gce();break}catch(c){j$(e,c)}while(!0);CP(),bC.current=i,dr=s,ri!==null?t=0:(Ei=null,$i=0,t=vi)}if(t!==0){if(t===2&&(s=ZE(e),s!==0&&(r=s,t=N5(e,s))),t===1)throw n=vx,Np(e,0),hA(e,r),vo(e,Vs()),n;if(t===6)hA(e,r);else{if(s=e.current.alternate,!(r&30)&&!Kce(s)&&(t=kC(e,r),t===2&&(i=ZE(e),i!==0&&(r=i,t=N5(e,i))),t===1))throw n=vx,Np(e,0),hA(e,r),vo(e,Vs()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(ut(345));case 2:Zf(e,co,_u);break;case 3:if(hA(e,r),(r&130023424)===r&&(t=MP+500-Vs(),10<t)){if(oC(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Ha(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=o5(Zf.bind(null,e,co,_u),t);break}Zf(e,co,_u);break;case 4:if(hA(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Cl(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=Vs()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*qce(r/1960))-r,10<r){e.timeoutHandle=o5(Zf.bind(null,e,co,_u),r);break}Zf(e,co,_u);break;case 5:Zf(e,co,_u);break;default:throw Error(ut(329))}}}return vo(e,Vs()),e.callbackNode===n?C$.bind(null,e):null}function N5(e,t){var n=I0;return e.current.memoizedState.isDehydrated&&(Np(e,t).flags|=256),e=kC(e,t),e!==2&&(t=co,co=n,t!==null&&B5(t)),e}function B5(e){co===null?co=e:co.push.apply(co,e)}function Kce(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Nl(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function hA(e,t){for(t&=~LP,t&=~zj,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Cl(t),r=1<<n;e[n]=-1,t&=~r}}function oU(e){if(dr&6)throw Error(ut(327));Mg();var t=oC(e,0);if(!(t&1))return vo(e,Vs()),null;var n=kC(e,t);if(e.tag!==0&&n===2){var r=ZE(e);r!==0&&(t=r,n=N5(e,r))}if(n===1)throw n=vx,Np(e,0),hA(e,t),vo(e,Vs()),n;if(n===6)throw Error(ut(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Zf(e,co,_u),vo(e,Vs()),null}function RP(e,t){var n=dr;dr|=1;try{return e(t)}finally{dr=n,dr===0&&(Av=Vs()+500,Oj&&af())}}function zp(e){bA!==null&&bA.tag===0&&!(dr&6)&&Mg();var t=dr;dr|=1;var n=Sc.transition,r=Br;try{if(Sc.transition=null,Br=1,e)return e()}finally{Br=r,Sc.transition=n,dr=t,!(dr&6)&&af()}}function OP(){Ho=bg.current,es(bg)}function Np(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Cce(n)),ri!==null)for(n=ri.return;n!==null;){var r=n;switch(xP(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&hC();break;case 3:uv(),es(mo),es(Aa),EP();break;case 5:BP(r);break;case 4:uv();break;case 13:es(vs);break;case 19:es(vs);break;case 10:jP(r.type._context);break;case 22:case 23:OP()}n=n.return}if(Ei=e,ri=e=MA(e.current,null),$i=Ho=t,vi=0,vx=null,LP=zj=$p=0,co=I0=null,lp!==null){for(t=0;t<lp.length;t++)if(n=lp[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}lp=null}return e}function j$(e,t){do{var n=ri;try{if(CP(),p2.current=wC,xC){for(var r=xs.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}xC=!1}if(Hp=0,Ni=mi=xs=null,E0=!1,px=0,UP.current=null,n===null||n.return===null){vi=1,vx=t,ri=null;break}e:{var i=e,o=n.return,c=n,l=t;if(t=$i,c.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var d=l,u=c,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var A=u.alternate;A?(u.updateQueue=A.updateQueue,u.memoizedState=A.memoizedState,u.lanes=A.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=WD(o);if(f!==null){f.flags&=-257,GD(f,o,c,i,t),f.mode&1&&KD(i,d,t),t=f,l=d;var m=t.updateQueue;if(m===null){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}else{if(!(t&1)){KD(i,d,t),QP();break e}l=Error(ut(426))}}else if(ls&&c.mode&1){var b=WD(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),GD(b,o,c,i,t),wP(hv(l,c));break e}}i=l=hv(l,c),vi!==4&&(vi=2),I0===null?I0=[i]:I0.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=o$(i,l,t);QD(i,y);break e;case 1:c=l;var j=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof j.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(UA===null||!UA.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t;var C=c$(i,c,t);QD(i,C);break e}}i=i.return}while(i!==null)}N$(n)}catch(S){t=S,ri===n&&n!==null&&(ri=n=n.return);continue}break}while(!0)}function k$(){var e=bC.current;return bC.current=wC,e===null?wC:e}function QP(){(vi===0||vi===3||vi===2)&&(vi=4),Ei===null||!($p&268435455)&&!(zj&268435455)||hA(Ei,$i)}function kC(e,t){var n=dr;dr|=2;var r=k$();(Ei!==e||$i!==t)&&(_u=null,Np(e,t));do try{Wce();break}catch(s){j$(e,s)}while(!0);if(CP(),dr=n,bC.current=r,ri!==null)throw Error(ut(261));return Ei=null,$i=0,vi}function Wce(){for(;ri!==null;)S$(ri)}function Gce(){for(;ri!==null&&!xoe();)S$(ri)}function S$(e){var t=E$(e.alternate,e,Ho);e.memoizedProps=e.pendingProps,t===null?N$(e):ri=t,UP.current=null}function N$(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Hce(n,t),n!==null){n.flags&=32767,ri=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{vi=6,ri=null;return}}else if(n=Qce(n,t,Ho),n!==null){ri=n;return}if(t=t.sibling,t!==null){ri=t;return}ri=t=e}while(t!==null);vi===0&&(vi=5)}function Zf(e,t,n){var r=Br,s=Sc.transition;try{Sc.transition=null,Br=1,Yce(e,t,n,r)}finally{Sc.transition=s,Br=r}return null}function Yce(e,t,n,r){do Mg();while(bA!==null);if(dr&6)throw Error(ut(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ut(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(_oe(e,i),e===Ei&&(ri=Ei=null,$i=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zb||(zb=!0,_$(aC,function(){return Mg(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Sc.transition,Sc.transition=null;var o=Br;Br=1;var c=dr;dr|=4,UP.current=null,zce(e,n),w$(n,e),mce(i5),cC=!!s5,i5=s5=null,e.current=n,Vce(n),woe(),dr=c,Br=o,Sc.transition=i}else e.current=n;if(zb&&(zb=!1,bA=e,jC=s),i=e.pendingLanes,i===0&&(UA=null),joe(n.stateNode),vo(e,Vs()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(CC)throw CC=!1,e=k5,k5=null,e;return jC&1&&e.tag!==0&&Mg(),i=e.pendingLanes,i&1?e===S5?P0++:(P0=0,S5=e):P0=0,af(),null}function Mg(){if(bA!==null){var e=oH(jC),t=Sc.transition,n=Br;try{if(Sc.transition=null,Br=16>e?16:e,bA===null)var r=!1;else{if(e=bA,bA=null,jC=0,dr&6)throw Error(ut(331));var s=dr;for(dr|=4,Ot=e.current;Ot!==null;){var i=Ot,o=i.child;if(Ot.flags&16){var c=i.deletions;if(c!==null){for(var l=0;l<c.length;l++){var d=c[l];for(Ot=d;Ot!==null;){var u=Ot;switch(u.tag){case 0:case 11:case 15:_0(8,u,i)}var h=u.child;if(h!==null)h.return=u,Ot=h;else for(;Ot!==null;){u=Ot;var A=u.sibling,f=u.return;if(v$(u),u===d){Ot=null;break}if(A!==null){A.return=f,Ot=A;break}Ot=f}}}var m=i.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}Ot=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ot=o;else e:for(;Ot!==null;){if(i=Ot,i.flags&2048)switch(i.tag){case 0:case 11:case 15:_0(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Ot=y;break e}Ot=i.return}}var j=e.current;for(Ot=j;Ot!==null;){o=Ot;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Ot=x;else e:for(o=j;Ot!==null;){if(c=Ot,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:$j(9,c)}}catch(S){Fs(c,c.return,S)}if(c===o){Ot=null;break e}var C=c.sibling;if(C!==null){C.return=c.return,Ot=C;break e}Ot=c.return}}if(dr=s,af(),_d&&typeof _d.onPostCommitFiberRoot=="function")try{_d.onPostCommitFiberRoot(Dj,e)}catch{}r=!0}return r}finally{Br=n,Sc.transition=t}}return!1}function cU(e,t,n){t=hv(n,t),t=o$(e,t,1),e=DA(e,t,1),t=Ha(),e!==null&&(lw(e,1,t),vo(e,t))}function Fs(e,t,n){if(e.tag===3)cU(e,e,n);else for(;t!==null;){if(t.tag===3){cU(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(UA===null||!UA.has(r))){e=hv(n,e),e=c$(t,e,1),t=DA(t,e,1),e=Ha(),t!==null&&(lw(t,1,e),vo(t,e));break}}t=t.return}}function Xce(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ha(),e.pingedLanes|=e.suspendedLanes&n,Ei===e&&($i&n)===n&&(vi===4||vi===3&&($i&130023424)===$i&&500>Vs()-MP?Np(e,0):LP|=n),vo(e,t)}function B$(e,t){t===0&&(e.mode&1?(t=Fb,Fb<<=1,!(Fb&130023424)&&(Fb=4194304)):t=1);var n=Ha();e=Ku(e,t),e!==null&&(lw(e,t,n),vo(e,n))}function Jce(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),B$(e,n)}function Zce(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ut(314))}r!==null&&r.delete(t),B$(e,n)}var E$;E$=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||mo.current)uo=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return uo=!1,Oce(e,t,n);uo=!!(e.flags&131072)}else uo=!1,ls&&t.flags&1048576&&TH(t,pC,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;g2(e,t),e=t.pendingProps;var s=cv(t,Aa.current);Lg(t,n),s=IP(null,t,r,e,s,n);var i=PP();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,go(r)?(i=!0,AC(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,SP(t),s.updater=Hj,t.stateNode=s,s._reactInternals=t,f5(t,r,e,n),t=g5(null,t,r,!0,i,n)):(t.tag=0,ls&&i&&yP(t),Ua(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(g2(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=tle(r),e=dl(r,e),s){case 0:t=m5(null,t,r,e,n);break e;case 1:t=JD(null,t,r,e,n);break e;case 11:t=YD(null,t,r,e,n);break e;case 14:t=XD(null,t,r,dl(r.type,e),n);break e}throw Error(ut(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:dl(r,s),m5(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:dl(r,s),JD(e,t,r,s,n);case 3:e:{if(h$(t),e===null)throw Error(ut(387));r=t.pendingProps,i=t.memoizedState,s=i.element,RH(e,t),vC(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=hv(Error(ut(423)),t),t=ZD(e,t,r,n,s);break e}else if(r!==s){s=hv(Error(ut(424)),t),t=ZD(e,t,r,n,s);break e}else for(Vo=FA(t.stateNode.containerInfo.firstChild),Wo=t,ls=!0,gl=null,n=LH(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(lv(),r===s){t=Wu(e,t,n);break e}Ua(e,t,r,n)}t=t.child}return t;case 5:return OH(t),e===null&&u5(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,a5(r,s)?o=null:i!==null&&a5(r,i)&&(t.flags|=32),u$(e,t),Ua(e,t,o,n),t.child;case 6:return e===null&&u5(t),null;case 13:return A$(e,t,n);case 4:return NP(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=dv(t,null,r,n):Ua(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:dl(r,s),YD(e,t,r,s,n);case 7:return Ua(e,t,t.pendingProps,n),t.child;case 8:return Ua(e,t,t.pendingProps.children,n),t.child;case 12:return Ua(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,$r(mC,r._currentValue),r._currentValue=o,i!==null)if(Nl(i.value,o)){if(i.children===s.children&&!mo.current){t=Wu(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var l=c.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Qu(-1,n&-n),l.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?l.next=l:(l.next=u.next,u.next=l),d.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),h5(i.return,n,t),c.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ut(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),h5(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ua(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Lg(t,n),s=Ec(s),r=r(s),t.flags|=1,Ua(e,t,r,n),t.child;case 14:return r=t.type,s=dl(r,t.pendingProps),s=dl(r.type,s),XD(e,t,r,s,n);case 15:return l$(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:dl(r,s),g2(e,t),t.tag=1,go(r)?(e=!0,AC(t)):e=!1,Lg(t,n),a$(t,r,s),f5(t,r,s,n),g5(null,t,r,!0,e,n);case 19:return f$(e,t,n);case 22:return d$(e,t,n)}throw Error(ut(156,t.tag))};function _$(e,t){return rH(e,t)}function ele(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bc(e,t,n,r){return new ele(e,t,n,r)}function HP(e){return e=e.prototype,!(!e||!e.isReactComponent)}function tle(e){if(typeof e=="function")return HP(e)?1:0;if(e!=null){if(e=e.$$typeof,e===oP)return 11;if(e===cP)return 14}return 2}function MA(e,t){var n=e.alternate;return n===null?(n=bc(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function x2(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")HP(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case hg:return Bp(n.children,s,i,t);case aP:o=8,s|=8;break;case ME:return e=bc(12,n,t,s|2),e.elementType=ME,e.lanes=i,e;case RE:return e=bc(13,n,t,s),e.elementType=RE,e.lanes=i,e;case OE:return e=bc(19,n,t,s),e.elementType=OE,e.lanes=i,e;case O8:return Vj(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M8:o=10;break e;case R8:o=9;break e;case oP:o=11;break e;case cP:o=14;break e;case oA:o=16,r=null;break e}throw Error(ut(130,e==null?e:typeof e,""))}return t=bc(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Bp(e,t,n,r){return e=bc(7,e,r,t),e.lanes=n,e}function Vj(e,t,n,r){return e=bc(22,e,r,t),e.elementType=O8,e.lanes=n,e.stateNode={isHidden:!1},e}function FN(e,t,n){return e=bc(6,e,null,t),e.lanes=n,e}function DN(e,t,n){return t=bc(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function nle(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pN(0),this.expirationTimes=pN(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pN(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function $P(e,t,n,r,s,i,o,c,l){return e=new nle(e,t,n,c,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=bc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},SP(i),e}function rle(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ug,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function I$(e){if(!e)return WA;e=e._reactInternals;e:{if(um(e)!==e||e.tag!==1)throw Error(ut(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(go(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ut(171))}if(e.tag===1){var n=e.type;if(go(n))return IH(e,n,t)}return t}function P$(e,t,n,r,s,i,o,c,l){return e=$P(n,r,!0,e,s,i,o,c,l),e.context=I$(null),n=e.current,r=Ha(),s=LA(n),i=Qu(r,s),i.callback=t??null,DA(n,i,s),e.current.lanes=s,lw(e,s,r),vo(e,r),e}function qj(e,t,n,r){var s=t.current,i=Ha(),o=LA(s);return n=I$(n),t.context===null?t.context=n:t.pendingContext=n,t=Qu(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=DA(s,t,o),e!==null&&(jl(e,s,o,i),f2(e,s,o)),o}function SC(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function lU(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function zP(e,t){lU(e,t),(e=e.alternate)&&lU(e,t)}function sle(){return null}var T$=typeof reportError=="function"?reportError:function(e){console.error(e)};function VP(e){this._internalRoot=e}Kj.prototype.render=VP.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ut(409));qj(e,t,null,null)};Kj.prototype.unmount=VP.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zp(function(){qj(null,e,null,null)}),t[qu]=null}};function Kj(e){this._internalRoot=e}Kj.prototype.unstable_scheduleHydration=function(e){if(e){var t=dH();e={blockedOn:null,target:e,priority:t};for(var n=0;n<uA.length&&t!==0&&t<uA[n].priority;n++);uA.splice(n,0,e),n===0&&hH(e)}};function qP(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Wj(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function dU(){}function ile(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=SC(o);i.call(d)}}var o=P$(t,r,e,0,null,!1,!1,"",dU);return e._reactRootContainer=o,e[qu]=o.current,dx(e.nodeType===8?e.parentNode:e),zp(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=SC(l);c.call(d)}}var l=$P(e,0,!1,null,null,!1,!1,"",dU);return e._reactRootContainer=l,e[qu]=l.current,dx(e.nodeType===8?e.parentNode:e),zp(function(){qj(t,l,n,r)}),l}function Gj(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var l=SC(o);c.call(l)}}qj(t,o,e,s)}else o=ile(n,t,e,s,r);return SC(o)}cH=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=n0(t.pendingLanes);n!==0&&(uP(t,n|1),vo(t,Vs()),!(dr&6)&&(Av=Vs()+500,af()))}break;case 13:zp(function(){var r=Ku(e,1);if(r!==null){var s=Ha();jl(r,e,1,s)}}),zP(e,1)}};hP=function(e){if(e.tag===13){var t=Ku(e,134217728);if(t!==null){var n=Ha();jl(t,e,134217728,n)}zP(e,134217728)}};lH=function(e){if(e.tag===13){var t=LA(e),n=Ku(e,t);if(n!==null){var r=Ha();jl(n,e,t,r)}zP(e,t)}};dH=function(){return Br};uH=function(e,t){var n=Br;try{return Br=e,t()}finally{Br=n}};YE=function(e,t,n){switch(t){case"input":if($E(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Rj(r);if(!s)throw Error(ut(90));H8(r),$E(r,s)}}}break;case"textarea":z8(e,n);break;case"select":t=n.value,t!=null&&Tg(e,!!n.multiple,t,!1)}};X8=RP;J8=zp;var ale={usingClientEntryPoint:!1,Events:[uw,mg,Rj,G8,Y8,RP]},My={findFiberByHostInstance:cp,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ole={bundleType:My.bundleType,version:My.version,rendererPackageName:My.rendererPackageName,rendererConfig:My.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sh.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=tH(e),e===null?null:e.stateNode},findFiberByHostInstance:My.findFiberByHostInstance||sle,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vb.isDisabled&&Vb.supportsFiber)try{Dj=Vb.inject(ole),_d=Vb}catch{}}ec.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ale;ec.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qP(t))throw Error(ut(200));return rle(e,t,null,n)};ec.createRoot=function(e,t){if(!qP(e))throw Error(ut(299));var n=!1,r="",s=T$;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=$P(e,1,!1,null,null,n,!1,r,s),e[qu]=t.current,dx(e.nodeType===8?e.parentNode:e),new VP(t)};ec.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ut(188)):(e=Object.keys(e).join(","),Error(ut(268,e)));return e=tH(t),e=e===null?null:e.stateNode,e};ec.flushSync=function(e){return zp(e)};ec.hydrate=function(e,t,n){if(!Wj(t))throw Error(ut(200));return Gj(null,e,t,!0,n)};ec.hydrateRoot=function(e,t,n){if(!qP(e))throw Error(ut(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=T$;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=P$(t,null,e,1,n??null,s,!1,i,o),e[qu]=t.current,dx(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Kj(t)};ec.render=function(e,t,n){if(!Wj(t))throw Error(ut(200));return Gj(null,e,t,!1,n)};ec.unmountComponentAtNode=function(e){if(!Wj(e))throw Error(ut(40));return e._reactRootContainer?(zp(function(){Gj(null,null,e,!1,function(){e._reactRootContainer=null,e[qu]=null})}),!0):!1};ec.unstable_batchedUpdates=RP;ec.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Wj(n))throw Error(ut(200));if(e==null||e._reactInternals===void 0)throw Error(ut(38));return Gj(e,t,n,!1,r)};ec.version="18.3.1-next-f1338f8080-20240426";function F$(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(F$)}catch(e){console.error(e)}}F$(),F8.exports=ec;var Fl=F8.exports;const D$=Tj(Fl);var U$,uU=Fl;U$=uU.createRoot,uU.hydrateRoot;const cle=1,lle=1e6;let UN=0;function dle(){return UN=(UN+1)%Number.MAX_SAFE_INTEGER,UN.toString()}const LN=new Map,hU=e=>{if(LN.has(e))return;const t=setTimeout(()=>{LN.delete(e),T0({type:"REMOVE_TOAST",toastId:e})},lle);LN.set(e,t)},ule=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,cle)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?hU(n):e.toasts.forEach(r=>{hU(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},w2=[];let b2={toasts:[]};function T0(e){b2=ule(b2,e),w2.forEach(t=>{t(b2)})}function hle({...e}){const t=dle(),n=s=>T0({type:"UPDATE_TOAST",toast:{...s,id:t}}),r=()=>T0({type:"DISMISS_TOAST",toastId:t});return T0({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||r()}}}),{id:t,dismiss:r,update:n}}function ii(){const[e,t]=w.useState(b2);return w.useEffect(()=>(w2.push(t),()=>{const n=w2.indexOf(t);n>-1&&w2.splice(n,1)}),[e]),{...e,toast:hle,dismiss:n=>T0({type:"DISMISS_TOAST",toastId:n})}}function nn(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function AU(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Yj(...e){return t=>{let n=!1;const r=e.map(s=>{const i=AU(s,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():AU(e[s],null)}}}}function Wt(...e){return w.useCallback(Yj(...e),e)}function Ale(e,t){const n=w.createContext(t),r=i=>{const{children:o,...c}=i,l=w.useMemo(()=>c,Object.values(c));return a.jsx(n.Provider,{value:l,children:o})};r.displayName=e+"Provider";function s(i){const o=w.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,s]}function Cs(e,t=[]){let n=[];function r(i,o){const c=w.createContext(o),l=n.length;n=[...n,o];const d=h=>{var y;const{scope:A,children:f,...m}=h,g=((y=A==null?void 0:A[e])==null?void 0:y[l])||c,b=w.useMemo(()=>m,Object.values(m));return a.jsx(g.Provider,{value:b,children:f})};d.displayName=i+"Provider";function u(h,A){var g;const f=((g=A==null?void 0:A[e])==null?void 0:g[l])||c,m=w.useContext(f);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[d,u]}const s=()=>{const i=n.map(o=>w.createContext(o));return function(c){const l=(c==null?void 0:c[e])||i;return w.useMemo(()=>({[`__scope${e}`]:{...c,[e]:l}}),[c,l])}};return s.scopeName=e,[r,fle(s,...t)]}function fle(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((c,{useScope:l,scopeName:d})=>{const h=l(i)[`__scope${d}`];return{...c,...h}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function GA(e){const t=mle(e),n=w.forwardRef((r,s)=>{const{children:i,...o}=r,c=w.Children.toArray(i),l=c.find(gle);if(l){const d=l.props.children,u=c.map(h=>h===l?w.Children.count(d)>1?w.Children.only(null):w.isValidElement(d)?d.props.children:null:h);return a.jsx(t,{...o,ref:s,children:w.isValidElement(d)?w.cloneElement(d,void 0,u):null})}return a.jsx(t,{...o,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}var ple=GA("Slot");function mle(e){const t=w.forwardRef((n,r)=>{const{children:s,...i}=n;if(w.isValidElement(s)){const o=yle(s),c=vle(i,s.props);return s.type!==w.Fragment&&(c.ref=r?Yj(r,o):o),w.cloneElement(s,c)}return w.Children.count(s)>1?w.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var L$=Symbol("radix.slottable");function M$(e){const t=({children:n})=>a.jsx(a.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=L$,t}function gle(e){return w.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===L$}function vle(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...c)=>{const l=i(...c);return s(...c),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function yle(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function hm(e){const t=e+"CollectionProvider",[n,r]=Cs(t),[s,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:b,children:y}=g,j=nt.useRef(null),x=nt.useRef(new Map).current;return a.jsx(s,{scope:b,itemMap:x,collectionRef:j,children:y})};o.displayName=t;const c=e+"CollectionSlot",l=GA(c),d=nt.forwardRef((g,b)=>{const{scope:y,children:j}=g,x=i(c,y),C=Wt(b,x.collectionRef);return a.jsx(l,{ref:C,children:j})});d.displayName=c;const u=e+"CollectionItemSlot",h="data-radix-collection-item",A=GA(u),f=nt.forwardRef((g,b)=>{const{scope:y,children:j,...x}=g,C=nt.useRef(null),S=Wt(b,C),_=i(u,y);return nt.useEffect(()=>(_.itemMap.set(C,{ref:C,...x}),()=>void _.itemMap.delete(C))),a.jsx(A,{[h]:"",ref:S,children:j})});f.displayName=u;function m(g){const b=i(e+"CollectionConsumer",g);return nt.useCallback(()=>{const j=b.collectionRef.current;if(!j)return[];const x=Array.from(j.querySelectorAll(`[${h}]`));return Array.from(b.itemMap.values()).sort((_,N)=>x.indexOf(_.ref.current)-x.indexOf(N.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:d,ItemSlot:f},m,r]}var xle=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],gt=xle.reduce((e,t)=>{const n=GA(`Primitive.${t}`),r=w.forwardRef((s,i)=>{const{asChild:o,...c}=s,l=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(l,{...c,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Aw(e,t){e&&Fl.flushSync(()=>e.dispatchEvent(t))}function Nr(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),w.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function KP(e,t=globalThis==null?void 0:globalThis.document){const n=Nr(e);w.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var wle="DismissableLayer",E5="dismissableLayer.update",ble="dismissableLayer.pointerDownOutside",Cle="dismissableLayer.focusOutside",fU,R$=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),fw=w.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:c,...l}=e,d=w.useContext(R$),[u,h]=w.useState(null),A=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=w.useState({}),m=Wt(t,N=>h(N)),g=Array.from(d.layers),[b]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(b),j=u?g.indexOf(u):-1,x=d.layersWithOutsidePointerEventsDisabled.size>0,C=j>=y,S=kle(N=>{const L=N.target,P=[...d.branches].some(F=>F.contains(L));!C||P||(s==null||s(N),o==null||o(N),N.defaultPrevented||c==null||c())},A),_=Sle(N=>{const L=N.target;[...d.branches].some(F=>F.contains(L))||(i==null||i(N),o==null||o(N),N.defaultPrevented||c==null||c())},A);return KP(N=>{j===d.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&c&&(N.preventDefault(),c()))},A),w.useEffect(()=>{if(u)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(fU=A.body.style.pointerEvents,A.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),pU(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(A.body.style.pointerEvents=fU)}},[u,A,n,d]),w.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),pU())},[u,d]),w.useEffect(()=>{const N=()=>f({});return document.addEventListener(E5,N),()=>document.removeEventListener(E5,N)},[]),a.jsx(gt.div,{...l,ref:m,style:{pointerEvents:x?C?"auto":"none":void 0,...e.style},onFocusCapture:nn(e.onFocusCapture,_.onFocusCapture),onBlurCapture:nn(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:nn(e.onPointerDownCapture,S.onPointerDownCapture)})});fw.displayName=wle;var jle="DismissableLayerBranch",O$=w.forwardRef((e,t)=>{const n=w.useContext(R$),r=w.useRef(null),s=Wt(t,r);return w.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),a.jsx(gt.div,{...e,ref:s})});O$.displayName=jle;function kle(e,t=globalThis==null?void 0:globalThis.document){const n=Nr(e),r=w.useRef(!1),s=w.useRef(()=>{});return w.useEffect(()=>{const i=c=>{if(c.target&&!r.current){let l=function(){Q$(ble,n,d,{discrete:!0})};const d={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=l,t.addEventListener("click",s.current,{once:!0})):l()}else t.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function Sle(e,t=globalThis==null?void 0:globalThis.document){const n=Nr(e),r=w.useRef(!1);return w.useEffect(()=>{const s=i=>{i.target&&!r.current&&Q$(Cle,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function pU(){const e=new CustomEvent(E5);document.dispatchEvent(e)}function Q$(e,t,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Aw(s,i):s.dispatchEvent(i)}var Nle=fw,Ble=O$,Tr=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},Ele="Portal",Lv=w.forwardRef((e,t)=>{var c;const{container:n,...r}=e,[s,i]=w.useState(!1);Tr(()=>i(!0),[]);const o=n||s&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return o?D$.createPortal(a.jsx(gt.div,{...r,ref:t}),o):null});Lv.displayName=Ele;function _le(e,t){return w.useReducer((n,r)=>t[n][r]??n,e)}var Ya=e=>{const{present:t,children:n}=e,r=Ile(t),s=typeof n=="function"?n({present:r.isPresent}):w.Children.only(n),i=Wt(r.ref,Ple(s));return typeof n=="function"||r.isPresent?w.cloneElement(s,{ref:i}):null};Ya.displayName="Presence";function Ile(e){const[t,n]=w.useState(),r=w.useRef(null),s=w.useRef(e),i=w.useRef("none"),o=e?"mounted":"unmounted",[c,l]=_le(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const d=qb(r.current);i.current=c==="mounted"?d:"none"},[c]),Tr(()=>{const d=r.current,u=s.current;if(u!==e){const A=i.current,f=qb(d);e?l("MOUNT"):f==="none"||(d==null?void 0:d.display)==="none"?l("UNMOUNT"):l(u&&A!==f?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,l]),Tr(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,h=f=>{const g=qb(r.current).includes(f.animationName);if(f.target===t&&g&&(l("ANIMATION_END"),!s.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},A=f=>{f.target===t&&(i.current=qb(r.current))};return t.addEventListener("animationstart",A),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",A),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:w.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function qb(e){return(e==null?void 0:e.animationName)||"none"}function Ple(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Tle=nP[" useInsertionEffect ".trim().toString()]||Tr;function fa({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,i,o]=Fle({defaultProp:t,onChange:n}),c=e!==void 0,l=c?e:s;{const u=w.useRef(e!==void 0);w.useEffect(()=>{const h=u.current;h!==c&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=c},[c,r])}const d=w.useCallback(u=>{var h;if(c){const A=Dle(u)?u(e):u;A!==e&&((h=o.current)==null||h.call(o,A))}else i(u)},[c,e,i,o]);return[l,d]}function Fle({defaultProp:e,onChange:t}){const[n,r]=w.useState(e),s=w.useRef(n),i=w.useRef(t);return Tle(()=>{i.current=t},[t]),w.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function Dle(e){return typeof e=="function"}var H$=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Ule="VisuallyHidden",Xj=w.forwardRef((e,t)=>a.jsx(gt.span,{...e,ref:t,style:{...H$,...e.style}}));Xj.displayName=Ule;var Lle=Xj,WP="ToastProvider",[GP,Mle,Rle]=hm("Toast"),[$$,HVe]=Cs("Toast",[Rle]),[Ole,Jj]=$$(WP),z$=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=e,[c,l]=w.useState(null),[d,u]=w.useState(0),h=w.useRef(!1),A=w.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${WP}\`. Expected non-empty \`string\`.`),a.jsx(GP.Provider,{scope:t,children:a.jsx(Ole,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:d,viewport:c,onViewportChange:l,onToastAdd:w.useCallback(()=>u(f=>f+1),[]),onToastRemove:w.useCallback(()=>u(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:A,children:o})})};z$.displayName=WP;var V$="ToastViewport",Qle=["F8"],_5="toast.viewportPause",I5="toast.viewportResume",q$=w.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=Qle,label:s="Notifications ({hotkey})",...i}=e,o=Jj(V$,n),c=Mle(n),l=w.useRef(null),d=w.useRef(null),u=w.useRef(null),h=w.useRef(null),A=Wt(t,h,o.onViewportChange),f=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=o.toastCount>0;w.useEffect(()=>{const b=y=>{var x;r.length!==0&&r.every(C=>y[C]||y.code===C)&&((x=h.current)==null||x.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),w.useEffect(()=>{const b=l.current,y=h.current;if(m&&b&&y){const j=()=>{if(!o.isClosePausedRef.current){const _=new CustomEvent(_5);y.dispatchEvent(_),o.isClosePausedRef.current=!0}},x=()=>{if(o.isClosePausedRef.current){const _=new CustomEvent(I5);y.dispatchEvent(_),o.isClosePausedRef.current=!1}},C=_=>{!b.contains(_.relatedTarget)&&x()},S=()=>{b.contains(document.activeElement)||x()};return b.addEventListener("focusin",j),b.addEventListener("focusout",C),b.addEventListener("pointermove",j),b.addEventListener("pointerleave",S),window.addEventListener("blur",j),window.addEventListener("focus",x),()=>{b.removeEventListener("focusin",j),b.removeEventListener("focusout",C),b.removeEventListener("pointermove",j),b.removeEventListener("pointerleave",S),window.removeEventListener("blur",j),window.removeEventListener("focus",x)}}},[m,o.isClosePausedRef]);const g=w.useCallback(({tabbingDirection:b})=>{const j=c().map(x=>{const C=x.ref.current,S=[C,...ede(C)];return b==="forwards"?S:S.reverse()});return(b==="forwards"?j.reverse():j).flat()},[c]);return w.useEffect(()=>{const b=h.current;if(b){const y=j=>{var S,_,N;const x=j.altKey||j.ctrlKey||j.metaKey;if(j.key==="Tab"&&!x){const L=document.activeElement,P=j.shiftKey;if(j.target===b&&P){(S=d.current)==null||S.focus();return}const T=g({tabbingDirection:P?"backwards":"forwards"}),Q=T.findIndex(D=>D===L);MN(T.slice(Q+1))?j.preventDefault():P?(_=d.current)==null||_.focus():(N=u.current)==null||N.focus()}};return b.addEventListener("keydown",y),()=>b.removeEventListener("keydown",y)}},[c,g]),a.jsxs(Ble,{ref:l,role:"region","aria-label":s.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&a.jsx(P5,{ref:d,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"forwards"});MN(b)}}),a.jsx(GP.Slot,{scope:n,children:a.jsx(gt.ol,{tabIndex:-1,...i,ref:A})}),m&&a.jsx(P5,{ref:u,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"backwards"});MN(b)}})]})});q$.displayName=V$;var K$="ToastFocusProxy",P5=w.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,i=Jj(K$,n);return a.jsx(Xj,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const c=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(c))&&r()}})});P5.displayName=K$;var pw="Toast",Hle="toast.swipeStart",$le="toast.swipeMove",zle="toast.swipeCancel",Vle="toast.swipeEnd",W$=w.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=e,[c,l]=fa({prop:r,defaultProp:s??!0,onChange:i,caller:pw});return a.jsx(Ya,{present:n||c,children:a.jsx(Wle,{open:c,...o,ref:t,onClose:()=>l(!1),onPause:Nr(e.onPause),onResume:Nr(e.onResume),onSwipeStart:nn(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:nn(e.onSwipeMove,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:nn(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:nn(e.onSwipeEnd,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});W$.displayName=pw;var[qle,Kle]=$$(pw,{onClose(){}}),Wle=w.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:c,onPause:l,onResume:d,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:A,onSwipeEnd:f,...m}=e,g=Jj(pw,n),[b,y]=w.useState(null),j=Wt(t,D=>y(D)),x=w.useRef(null),C=w.useRef(null),S=s||g.duration,_=w.useRef(0),N=w.useRef(S),L=w.useRef(0),{onToastAdd:P,onToastRemove:F}=g,I=Nr(()=>{var M;(b==null?void 0:b.contains(document.activeElement))&&((M=g.viewport)==null||M.focus()),o()}),T=w.useCallback(D=>{!D||D===1/0||(window.clearTimeout(L.current),_.current=new Date().getTime(),L.current=window.setTimeout(I,D))},[I]);w.useEffect(()=>{const D=g.viewport;if(D){const M=()=>{T(N.current),d==null||d()},U=()=>{const H=new Date().getTime()-_.current;N.current=N.current-H,window.clearTimeout(L.current),l==null||l()};return D.addEventListener(_5,U),D.addEventListener(I5,M),()=>{D.removeEventListener(_5,U),D.removeEventListener(I5,M)}}},[g.viewport,S,l,d,T]),w.useEffect(()=>{i&&!g.isClosePausedRef.current&&T(S)},[i,S,g.isClosePausedRef,T]),w.useEffect(()=>(P(),()=>F()),[P,F]);const Q=w.useMemo(()=>b?t7(b):null,[b]);return g.viewport?a.jsxs(a.Fragment,{children:[Q&&a.jsx(Gle,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:Q}),a.jsx(qle,{scope:n,onClose:I,children:Fl.createPortal(a.jsx(GP.ItemSlot,{scope:n,children:a.jsx(Nle,{asChild:!0,onEscapeKeyDown:nn(c,()=>{g.isFocusedToastEscapeKeyDownRef.current||I(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(gt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...m,ref:j,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:nn(e.onKeyDown,D=>{D.key==="Escape"&&(c==null||c(D.nativeEvent),D.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:nn(e.onPointerDown,D=>{D.button===0&&(x.current={x:D.clientX,y:D.clientY})}),onPointerMove:nn(e.onPointerMove,D=>{if(!x.current)return;const M=D.clientX-x.current.x,U=D.clientY-x.current.y,H=!!C.current,$=["left","right"].includes(g.swipeDirection),R=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,Y=$?R(0,M):0,X=$?0:R(0,U),q=D.pointerType==="touch"?10:2,K={x:Y,y:X},J={originalEvent:D,delta:K};H?(C.current=K,Kb($le,h,J,{discrete:!1})):mU(K,g.swipeDirection,q)?(C.current=K,Kb(Hle,u,J,{discrete:!1}),D.target.setPointerCapture(D.pointerId)):(Math.abs(M)>q||Math.abs(U)>q)&&(x.current=null)}),onPointerUp:nn(e.onPointerUp,D=>{const M=C.current,U=D.target;if(U.hasPointerCapture(D.pointerId)&&U.releasePointerCapture(D.pointerId),C.current=null,x.current=null,M){const H=D.currentTarget,$={originalEvent:D,delta:M};mU(M,g.swipeDirection,g.swipeThreshold)?Kb(Vle,f,$,{discrete:!0}):Kb(zle,A,$,{discrete:!0}),H.addEventListener("click",R=>R.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),Gle=e=>{const{__scopeToast:t,children:n,...r}=e,s=Jj(pw,t),[i,o]=w.useState(!1),[c,l]=w.useState(!1);return Jle(()=>o(!0)),w.useEffect(()=>{const d=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(d)},[]),c?null:a.jsx(Lv,{asChild:!0,children:a.jsx(Xj,{...r,children:i&&a.jsxs(a.Fragment,{children:[s.label," ",n]})})})},Yle="ToastTitle",G$=w.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return a.jsx(gt.div,{...r,ref:t})});G$.displayName=Yle;var Xle="ToastDescription",Y$=w.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return a.jsx(gt.div,{...r,ref:t})});Y$.displayName=Xle;var X$="ToastAction",J$=w.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?a.jsx(e7,{altText:n,asChild:!0,children:a.jsx(YP,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${X$}\`. Expected non-empty \`string\`.`),null)});J$.displayName=X$;var Z$="ToastClose",YP=w.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=Kle(Z$,n);return a.jsx(e7,{asChild:!0,children:a.jsx(gt.button,{type:"button",...r,ref:t,onClick:nn(e.onClick,s.onClose)})})});YP.displayName=Z$;var e7=w.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return a.jsx(gt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function t7(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),Zle(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...t7(r))}}),t}function Kb(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Aw(s,i):s.dispatchEvent(i)}var mU=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),i=r>s;return t==="left"||t==="right"?i&&r>n:!i&&s>n};function Jle(e=()=>{}){const t=Nr(e);Tr(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function Zle(e){return e.nodeType===e.ELEMENT_NODE}function ede(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function MN(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var tde=z$,n7=q$,r7=W$,s7=G$,i7=Y$,a7=J$,o7=YP;function c7(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=c7(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function l7(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=c7(e))&&(r&&(r+=" "),r+=t);return r}const gU=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,vU=l7,Mv=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return vU(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=t,o=Object.keys(s).map(d=>{const u=n==null?void 0:n[d],h=i==null?void 0:i[d];if(u===null)return null;const A=gU(u)||gU(h);return s[d][A]}),c=n&&Object.entries(n).reduce((d,u)=>{let[h,A]=u;return A===void 0||(d[h]=A),d},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((d,u)=>{let{class:h,className:A,...f}=u;return Object.entries(f).every(m=>{let[g,b]=m;return Array.isArray(b)?b.includes({...i,...c}[g]):{...i,...c}[g]===b})?[...d,h,A]:d},[]);return vU(e,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nde=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rde=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),yU=e=>{const t=rde(e);return t.charAt(0).toUpperCase()+t.slice(1)},d7=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),sde=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ide={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ade=w.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...c},l)=>w.createElement("svg",{ref:l,...ide,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:d7("lucide",s),...!i&&!sde(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,u])=>w.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=(e,t)=>{const n=w.forwardRef(({className:r,...s},i)=>w.createElement(ade,{ref:i,iconNode:t,className:d7(`lucide-${nde(yU(e))}`,`lucide-${e}`,r),...s}));return n.displayName=yU(e),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ode=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],T5=Ze("activity",ode);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cde=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],lde=Ze("arrow-down-right",cde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dde=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]],ude=Ze("arrow-down-wide-narrow",dde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hde=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],yo=Ze("arrow-left",hde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ade=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],u7=Ze("arrow-right",Ade);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fde=[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]],pde=Ze("arrow-up-narrow-wide",fde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mde=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],gde=Ze("arrow-up-right",mde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vde=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],yde=Ze("bell",vde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xde=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Xo=Ze("book-open",xde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wde=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}],["line",{x1:"12",x2:"12",y1:"7",y2:"13",key:"1cppfj"}],["line",{x1:"15",x2:"9",y1:"10",y2:"10",key:"1gty7f"}]],F5=Ze("bookmark-plus",wde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bde=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Rg=Ze("bot",bde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cde=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Gs=Ze("brain",Cde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jde=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],kd=Ze("calendar",jde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kde=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Sde=Ze("camera",kde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nde=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],h7=Ze("chart-column",Nde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bde=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],Ede=Ze("chart-line",Bde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _de=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],Ide=Ze("chart-no-axes-column-increasing",_de);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pde=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],YA=Ze("check",Pde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tde=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ic=Ze("chevron-down",Tde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fde=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Dde=Ze("chevron-left",Fde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ude=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],_r=Ze("chevron-right",Ude);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lde=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Zj=Ze("chevron-up",Lde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mde=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ts=Ze("circle-alert",Mde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rde=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],br=Ze("circle-check-big",Rde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ode=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Qde=Ze("circle-question-mark",Ode);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hde=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],up=Ze("circle-x",Hde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $de=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],A7=Ze("circle",$de);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zde=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Jo=Ze("clock",zde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vde=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],qde=Ze("code",Vde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kde=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Ii=Ze("copy",Kde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wde=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],NC=Ze("crown",Wde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gde=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],xo=Ze("database",Gde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yde=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Vp=Ze("download",Yde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xde=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],yx=Ze("ellipsis-vertical",Xde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jde=[["path",{d:"m15 15 6 6",key:"1s409w"}],["path",{d:"m15 9 6-6",key:"ko1vev"}],["path",{d:"M21 16v5h-5",key:"1ck2sf"}],["path",{d:"M21 8V3h-5",key:"1qoq8a"}],["path",{d:"M3 16v5h5",key:"1t08am"}],["path",{d:"m3 21 6-6",key:"wwnumi"}],["path",{d:"M3 8V3h5",key:"1ln10m"}],["path",{d:"M9 9 3 3",key:"v551iv"}]],Zde=Ze("expand",Jde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eue=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Hu=Ze("external-link",eue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tue=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],F0=Ze("eye-off",tue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nue=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],zr=Ze("eye",nue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rue=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],In=Ze("file-text",rue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sue=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],iue=Ze("flask-conical",sue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aue=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],yl=Ze("folder-open",aue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oue=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],cue=Ze("funnel",oue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lue=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],f7=Ze("gauge",lue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const due=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],uue=Ze("git-branch",due);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],p7=Ze("globe",hue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aue=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],m7=Ze("grid-3x3",Aue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fue=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],pue=Ze("hash",fue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mue=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Cg=Ze("history",mue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gue=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],vue=Ze("house",gue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yue=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],XP=Ze("image",yue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Ep=Ze("info",xue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wue=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],g7=Ze("key",wue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bue=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],Cue=Ze("keyboard",bue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jue=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Gu=Ze("layers",jue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kue=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],_p=Ze("lightbulb",kue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sue=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],v7=Ze("link-2",Sue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nue=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],fv=Ze("link",Nue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bue=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Cr=Ze("loader-circle",Bue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eue=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],xU=Ze("lock",Eue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ue=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Iue=Ze("log-out",_ue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pue=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Rv=Ze("mail",Pue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tue=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],D0=Ze("maximize-2",Tue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fue=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],Due=Ze("maximize",Fue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uue=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Lue=Ze("menu",Uue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mue=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Yu=Ze("message-square",Mue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rue=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],y7=Ze("minimize-2",Rue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oue=[["path",{d:"M5 12h14",key:"1ays0h"}]],Que=Ze("minus",Oue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hue=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],x7=Ze("mouse-pointer-2",Hue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ue=[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]],zue=Ze("paintbrush",$ue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vue=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],w7=Ze("palette",Vue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const que=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],Kue=Ze("panel-left-close",que);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wue=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],Gue=Ze("panel-left-open",Wue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yue=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],Xue=Ze("panel-right-close",Yue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jue=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]],Zue=Ze("panel-right-open",Jue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ehe=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Xu=Ze("pen-line",ehe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const the=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Kd=Ze("play",the);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nhe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ha=Ze("plus",nhe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rhe=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],kl=Ze("refresh-cw",rhe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const she=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ihe=Ze("rotate-ccw",she);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ahe=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Od=Ze("save",ahe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ohe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],mw=Ze("search",ohe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const che=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],hp=Ze("send",che);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lhe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],us=Ze("settings",lhe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dhe=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],uhe=Ze("share-2",dhe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hhe=[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]],D5=Ze("share",hhe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ahe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],qp=Ze("shield",Ahe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fhe=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],phe=Ze("sliders-vertical",fhe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mhe=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],gr=Ze("sparkles",mhe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ghe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Sd=Ze("square-pen",ghe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vhe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],b7=Ze("square",vhe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yhe=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],JP=Ze("star",yhe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xhe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Mr=Ze("target",xhe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const whe=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],bhe=Ze("thermometer",whe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Che=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],jhe=Ze("thumbs-down",Che);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const khe=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],She=Ze("thumbs-up",khe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nhe=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],C7=Ze("timer",Nhe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bhe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Pc=Ze("trash-2",Bhe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ehe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],wU=Ze("trending-up",Ehe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _he=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],BC=Ze("triangle-alert",_he);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ihe=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],U5=Ze("truck",Ihe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Phe=[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]],The=Ze("unlink",Phe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fhe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],xx=Ze("upload",Fhe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dhe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],ZP=Ze("user-plus",Dhe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uhe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Qd=Ze("user",Uhe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lhe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],qa=Ze("users",Lhe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mhe=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],L5=Ze("wand-sparkles",Mhe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rhe=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],j7=Ze("workflow",Rhe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ohe=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],CA=Ze("wrench",Ohe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qhe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],_i=Ze("x",Qhe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hhe=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Cc=Ze("zap",Hhe),e4="-",$he=e=>{const t=Vhe(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const c=o.split(e4);return c[0]===""&&c.length!==1&&c.shift(),k7(c,t)||zhe(o)},getConflictingClassGroupIds:(o,c)=>{const l=n[o]||[];return c&&r[o]?[...l,...r[o]]:l}}},k7=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?k7(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join(e4);return(o=t.validators.find(({validator:c})=>c(i)))==null?void 0:o.classGroupId},bU=/^\[(.+)\]$/,zhe=e=>{if(bU.test(e)){const t=bU.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Vhe=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return Khe(Object.entries(e.classGroups),n).forEach(([i,o])=>{M5(o,r,i,t)}),r},M5=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:CU(t,s);i.classGroupId=n;return}if(typeof s=="function"){if(qhe(s)){M5(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{M5(o,CU(t,i),n,r)})})},CU=(e,t)=>{let n=e;return t.split(e4).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},qhe=e=>e.isThemeGetter,Khe=(e,t)=>t?e.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,c])=>[t+o,c])):i);return[n,s]}):e,Whe=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},S7="!",Ghe=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],i=t.length,o=c=>{const l=[];let d=0,u=0,h;for(let b=0;b<c.length;b++){let y=c[b];if(d===0){if(y===s&&(r||c.slice(b,b+i)===t)){l.push(c.slice(u,b)),u=b+i;continue}if(y==="/"){h=b;continue}}y==="["?d++:y==="]"&&d--}const A=l.length===0?c:c.substring(u),f=A.startsWith(S7),m=f?A.substring(1):A,g=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:g}};return n?c=>n({className:c,parseClassName:o}):o},Yhe=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},Xhe=e=>({cache:Whe(e.cacheSize),parseClassName:Ghe(e),...$he(e)}),Jhe=/\s+/,Zhe=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,i=[],o=e.trim().split(Jhe);let c="";for(let l=o.length-1;l>=0;l-=1){const d=o[l],{modifiers:u,hasImportantModifier:h,baseClassName:A,maybePostfixModifierPosition:f}=n(d);let m=!!f,g=r(m?A.substring(0,f):A);if(!g){if(!m){c=d+(c.length>0?" "+c:c);continue}if(g=r(A),!g){c=d+(c.length>0?" "+c:c);continue}m=!1}const b=Yhe(u).join(":"),y=h?b+S7:b,j=y+g;if(i.includes(j))continue;i.push(j);const x=s(g,m);for(let C=0;C<x.length;++C){const S=x[C];i.push(y+S)}c=d+(c.length>0?" "+c:c)}return c};function eAe(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=N7(t))&&(r&&(r+=" "),r+=n);return r}const N7=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=N7(e[r]))&&(n&&(n+=" "),n+=t);return n};function tAe(e,...t){let n,r,s,i=o;function o(l){const d=t.reduce((u,h)=>h(u),e());return n=Xhe(d),r=n.cache.get,s=n.cache.set,i=c,c(l)}function c(l){const d=r(l);if(d)return d;const u=Zhe(l,n);return s(l,u),u}return function(){return i(eAe.apply(null,arguments))}}const Xr=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},B7=/^\[(?:([a-z-]+):)?(.+)\]$/i,nAe=/^\d+\/\d+$/,rAe=new Set(["px","full","screen"]),sAe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,iAe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,aAe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,oAe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,cAe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,xu=e=>Og(e)||rAe.has(e)||nAe.test(e),Wh=e=>Ov(e,"length",mAe),Og=e=>!!e&&!Number.isNaN(Number(e)),RN=e=>Ov(e,"number",Og),Ry=e=>!!e&&Number.isInteger(Number(e)),lAe=e=>e.endsWith("%")&&Og(e.slice(0,-1)),Dn=e=>B7.test(e),Gh=e=>sAe.test(e),dAe=new Set(["length","size","percentage"]),uAe=e=>Ov(e,dAe,E7),hAe=e=>Ov(e,"position",E7),AAe=new Set(["image","url"]),fAe=e=>Ov(e,AAe,vAe),pAe=e=>Ov(e,"",gAe),Oy=()=>!0,Ov=(e,t,n)=>{const r=B7.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},mAe=e=>iAe.test(e)&&!aAe.test(e),E7=()=>!1,gAe=e=>oAe.test(e),vAe=e=>cAe.test(e),yAe=()=>{const e=Xr("colors"),t=Xr("spacing"),n=Xr("blur"),r=Xr("brightness"),s=Xr("borderColor"),i=Xr("borderRadius"),o=Xr("borderSpacing"),c=Xr("borderWidth"),l=Xr("contrast"),d=Xr("grayscale"),u=Xr("hueRotate"),h=Xr("invert"),A=Xr("gap"),f=Xr("gradientColorStops"),m=Xr("gradientColorStopPositions"),g=Xr("inset"),b=Xr("margin"),y=Xr("opacity"),j=Xr("padding"),x=Xr("saturate"),C=Xr("scale"),S=Xr("sepia"),_=Xr("skew"),N=Xr("space"),L=Xr("translate"),P=()=>["auto","contain","none"],F=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto",Dn,t],T=()=>[Dn,t],Q=()=>["",xu,Wh],D=()=>["auto",Og,Dn],M=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U=()=>["solid","dashed","dotted","double","none"],H=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>["start","end","center","between","around","evenly","stretch"],R=()=>["","0",Dn],Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[Og,Dn];return{cacheSize:500,separator:":",theme:{colors:[Oy],spacing:[xu,Wh],blur:["none","",Gh,Dn],brightness:X(),borderColor:[e],borderRadius:["none","","full",Gh,Dn],borderSpacing:T(),borderWidth:Q(),contrast:X(),grayscale:R(),hueRotate:X(),invert:R(),gap:T(),gradientColorStops:[e],gradientColorStopPositions:[lAe,Wh],inset:I(),margin:I(),opacity:X(),padding:T(),saturate:X(),scale:X(),sepia:R(),skew:X(),space:T(),translate:T()},classGroups:{aspect:[{aspect:["auto","square","video",Dn]}],container:["container"],columns:[{columns:[Gh]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...M(),Dn]}],overflow:[{overflow:F()}],"overflow-x":[{"overflow-x":F()}],"overflow-y":[{"overflow-y":F()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ry,Dn]}],basis:[{basis:I()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Dn]}],grow:[{grow:R()}],shrink:[{shrink:R()}],order:[{order:["first","last","none",Ry,Dn]}],"grid-cols":[{"grid-cols":[Oy]}],"col-start-end":[{col:["auto",{span:["full",Ry,Dn]},Dn]}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":[Oy]}],"row-start-end":[{row:["auto",{span:[Ry,Dn]},Dn]}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Dn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Dn]}],gap:[{gap:[A]}],"gap-x":[{"gap-x":[A]}],"gap-y":[{"gap-y":[A]}],"justify-content":[{justify:["normal",...$()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...$(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...$(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[j]}],px:[{px:[j]}],py:[{py:[j]}],ps:[{ps:[j]}],pe:[{pe:[j]}],pt:[{pt:[j]}],pr:[{pr:[j]}],pb:[{pb:[j]}],pl:[{pl:[j]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Dn,t]}],"min-w":[{"min-w":[Dn,t,"min","max","fit"]}],"max-w":[{"max-w":[Dn,t,"none","full","min","max","fit","prose",{screen:[Gh]},Gh]}],h:[{h:[Dn,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Dn,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Dn,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Dn,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Gh,Wh]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",RN]}],"font-family":[{font:[Oy]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Dn]}],"line-clamp":[{"line-clamp":["none",Og,RN]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",xu,Dn]}],"list-image":[{"list-image":["none",Dn]}],"list-style-type":[{list:["none","disc","decimal",Dn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",xu,Wh]}],"underline-offset":[{"underline-offset":["auto",xu,Dn]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Dn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Dn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...M(),hAe]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",uAe]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},fAe]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...U(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:U()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...U()]}],"outline-offset":[{"outline-offset":[xu,Dn]}],"outline-w":[{outline:[xu,Wh]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[xu,Wh]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Gh,pAe]}],"shadow-color":[{shadow:[Oy]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...H(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":H()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Gh,Dn]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[x]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Dn]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",Dn]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",Dn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[Ry,Dn]}],"translate-x":[{"translate-x":[L]}],"translate-y":[{"translate-y":[L]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Dn]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Dn]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Dn]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[xu,Wh,RN]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},xAe=tAe(yAe);function $e(...e){return xAe(l7(e))}function jU(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}const wAe=tde,_7=w.forwardRef(({className:e,...t},n)=>a.jsx(n7,{ref:n,className:$e("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));_7.displayName=n7.displayName;const bAe=Mv("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),I7=w.forwardRef(({className:e,variant:t,...n},r)=>a.jsx(r7,{ref:r,className:$e(bAe({variant:t}),e),...n}));I7.displayName=r7.displayName;const CAe=w.forwardRef(({className:e,...t},n)=>a.jsx(a7,{ref:n,className:$e("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));CAe.displayName=a7.displayName;const P7=w.forwardRef(({className:e,...t},n)=>a.jsx(o7,{ref:n,className:$e("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:a.jsx(_i,{className:"h-4 w-4"})}));P7.displayName=o7.displayName;const T7=w.forwardRef(({className:e,...t},n)=>a.jsx(s7,{ref:n,className:$e("text-sm font-semibold",e),...t}));T7.displayName=s7.displayName;const F7=w.forwardRef(({className:e,...t},n)=>a.jsx(i7,{ref:n,className:$e("text-sm opacity-90",e),...t}));F7.displayName=i7.displayName;function jAe(){const{toasts:e}=ii();return a.jsxs(wAe,{children:[e.map(function({id:t,title:n,description:r,action:s,...i}){return a.jsxs(I7,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[n&&a.jsx(T7,{children:n}),r&&a.jsx(F7,{children:r})]}),s,a.jsx(P7,{})]},t)}),a.jsx(_7,{})]})}var kU=["light","dark"],kAe="(prefers-color-scheme: dark)",SAe=w.createContext(void 0),NAe={setTheme:e=>{},themes:[]},BAe=()=>{var e;return(e=w.useContext(SAe))!=null?e:NAe};w.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:c,nonce:l})=>{let d=i==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${c.map(m=>`'${m}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?kU.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",A=(m,g=!1,b=!0)=>{let y=o?o[m]:m,j=g?m+"|| ''":`'${y}'`,x="";return s&&b&&!g&&kU.includes(m)&&(x+=`d.style.colorScheme = '${m}';`),n==="class"?g||y?x+=`c.add(${j})`:x+="null":y&&(x+=`d[s](n,${j})`),x},f=e?`!function(){${u}${A(e)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${d})){var t='${kAe}',m=window.matchMedia(t);if(m.media!==t||m.matches){${A("dark")}}else{${A("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${A(o?"x[e]":"e",!0)}}${d?"":"else{"+A(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${A(o?"x[e]":"e",!0)}}else{${A(i,!1,!1)};}${h}}catch(t){}}();`;return w.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:f}})});function EAe(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const _Ae=e=>{switch(e){case"success":return TAe;case"info":return DAe;case"warning":return FAe;case"error":return UAe;default:return null}},IAe=Array(12).fill(0),PAe=({visible:e,className:t})=>nt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},nt.createElement("div",{className:"sonner-spinner"},IAe.map((n,r)=>nt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),TAe=nt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},nt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),FAe=nt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},nt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),DAe=nt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},nt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),UAe=nt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},nt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),LAe=nt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},nt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),nt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),MAe=()=>{const[e,t]=nt.useState(document.hidden);return nt.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let R5=1;class RAe{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...s}=t,i=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:R5++,o=this.toasts.find(l=>l.id===i),c=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...t,id:i,title:r}),{...l,...t,id:i,dismissible:c,title:r}):l):this.addToast({title:r,...s,dismissible:c,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const s=Promise.resolve(t instanceof Function?t():t);let i=r!==void 0,o;const c=s.then(async d=>{if(o=["resolve",d],nt.isValidElement(d))i=!1,this.create({id:r,type:"default",message:d});else if(QAe(d)&&!d.ok){i=!1;const h=typeof n.error=="function"?await n.error(`HTTP error! status: ${d.status}`):n.error,A=typeof n.description=="function"?await n.description(`HTTP error! status: ${d.status}`):n.description,m=typeof h=="object"&&!nt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:A,...m})}else if(d instanceof Error){i=!1;const h=typeof n.error=="function"?await n.error(d):n.error,A=typeof n.description=="function"?await n.description(d):n.description,m=typeof h=="object"&&!nt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:A,...m})}else if(n.success!==void 0){i=!1;const h=typeof n.success=="function"?await n.success(d):n.success,A=typeof n.description=="function"?await n.description(d):n.description,m=typeof h=="object"&&!nt.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:A,...m})}}).catch(async d=>{if(o=["reject",d],n.error!==void 0){i=!1;const u=typeof n.error=="function"?await n.error(d):n.error,h=typeof n.description=="function"?await n.description(d):n.description,f=typeof u=="object"&&!nt.isValidElement(u)?u:{message:u};this.create({id:r,type:"error",description:h,...f})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((d,u)=>c.then(()=>o[0]==="reject"?u(o[1]):d(o[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(t,n)=>{const r=(n==null?void 0:n.id)||R5++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ao=new RAe,OAe=(e,t)=>{const n=(t==null?void 0:t.id)||R5++;return ao.addToast({title:e,...t,id:n}),n},QAe=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",HAe=OAe,$Ae=()=>ao.toasts,zAe=()=>ao.getActiveToasts(),Ue=Object.assign(HAe,{success:ao.success,info:ao.info,warning:ao.warning,error:ao.error,custom:ao.custom,message:ao.message,promise:ao.promise,dismiss:ao.dismiss,loading:ao.loading},{getHistory:$Ae,getToasts:zAe});EAe("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Wb(e){return e.label!==void 0}const VAe=3,qAe="24px",KAe="16px",SU=4e3,WAe=356,GAe=14,YAe=45,XAe=200;function ud(...e){return e.filter(Boolean).join(" ")}function JAe(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const ZAe=e=>{var t,n,r,s,i,o,c,l,d;const{invert:u,toast:h,unstyled:A,interacting:f,setHeights:m,visibleToasts:g,heights:b,index:y,toasts:j,expanded:x,removeToast:C,defaultRichColors:S,closeButton:_,style:N,cancelButtonStyle:L,actionButtonStyle:P,className:F="",descriptionClassName:I="",duration:T,position:Q,gap:D,expandByDefault:M,classNames:U,icons:H,closeButtonAriaLabel:$="Close toast"}=e,[R,Y]=nt.useState(null),[X,q]=nt.useState(null),[K,J]=nt.useState(!1),[W,ne]=nt.useState(!1),[ae,ce]=nt.useState(!1),[Ae,pe]=nt.useState(!1),[be,Ne]=nt.useState(!1),[Pe,xe]=nt.useState(0),[ue,yt]=nt.useState(0),ht=nt.useRef(h.duration||T||SU),Ct=nt.useRef(null),Me=nt.useRef(null),kt=y===0,ct=y+1<=g,Nt=h.type,bt=h.dismissible!==!1,An=h.className||"",$t=h.descriptionClassName||"",Rt=nt.useMemo(()=>b.findIndex(wt=>wt.toastId===h.id)||0,[b,h.id]),Le=nt.useMemo(()=>{var wt;return(wt=h.closeButton)!=null?wt:_},[h.closeButton,_]),Ke=nt.useMemo(()=>h.duration||T||SU,[h.duration,T]),it=nt.useRef(0),pt=nt.useRef(0),At=nt.useRef(0),rn=nt.useRef(null),[vt,Bt]=Q.split("-"),Xt=nt.useMemo(()=>b.reduce((wt,Gn,Bn)=>Bn>=Rt?wt:wt+Gn.height,0),[b,Rt]),bn=MAe(),Qt=h.invert||u,on=Nt==="loading";pt.current=nt.useMemo(()=>Rt*D+Xt,[Rt,Xt]),nt.useEffect(()=>{ht.current=Ke},[Ke]),nt.useEffect(()=>{J(!0)},[]),nt.useEffect(()=>{const wt=Me.current;if(wt){const Gn=wt.getBoundingClientRect().height;return yt(Gn),m(Bn=>[{toastId:h.id,height:Gn,position:h.position},...Bn]),()=>m(Bn=>Bn.filter(ir=>ir.toastId!==h.id))}},[m,h.id]),nt.useLayoutEffect(()=>{if(!K)return;const wt=Me.current,Gn=wt.style.height;wt.style.height="auto";const Bn=wt.getBoundingClientRect().height;wt.style.height=Gn,yt(Bn),m(ir=>ir.find(St=>St.toastId===h.id)?ir.map(St=>St.toastId===h.id?{...St,height:Bn}:St):[{toastId:h.id,height:Bn,position:h.position},...ir])},[K,h.title,h.description,m,h.id,h.jsx,h.action,h.cancel]);const It=nt.useCallback(()=>{ne(!0),xe(pt.current),m(wt=>wt.filter(Gn=>Gn.toastId!==h.id)),setTimeout(()=>{C(h)},XAe)},[h,C,m,pt]);nt.useEffect(()=>{if(h.promise&&Nt==="loading"||h.duration===1/0||h.type==="loading")return;let wt;return x||f||bn?(()=>{if(At.current<it.current){const ir=new Date().getTime()-it.current;ht.current=ht.current-ir}At.current=new Date().getTime()})():(()=>{ht.current!==1/0&&(it.current=new Date().getTime(),wt=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),It()},ht.current))})(),()=>clearTimeout(wt)},[x,f,h,Nt,bn,It]),nt.useEffect(()=>{h.delete&&(It(),h.onDismiss==null||h.onDismiss.call(h,h))},[It,h.delete]);function Ut(){var wt;if(H!=null&&H.loading){var Gn;return nt.createElement("div",{className:ud(U==null?void 0:U.loader,h==null||(Gn=h.classNames)==null?void 0:Gn.loader,"sonner-loader"),"data-visible":Nt==="loading"},H.loading)}return nt.createElement(PAe,{className:ud(U==null?void 0:U.loader,h==null||(wt=h.classNames)==null?void 0:wt.loader),visible:Nt==="loading"})}const Wn=h.icon||(H==null?void 0:H[Nt])||_Ae(Nt);var Nn,en;return nt.createElement("li",{tabIndex:0,ref:Me,className:ud(F,An,U==null?void 0:U.toast,h==null||(t=h.classNames)==null?void 0:t.toast,U==null?void 0:U.default,U==null?void 0:U[Nt],h==null||(n=h.classNames)==null?void 0:n[Nt]),"data-sonner-toast":"","data-rich-colors":(Nn=h.richColors)!=null?Nn:S,"data-styled":!(h.jsx||h.unstyled||A),"data-mounted":K,"data-promise":!!h.promise,"data-swiped":be,"data-removed":W,"data-visible":ct,"data-y-position":vt,"data-x-position":Bt,"data-index":y,"data-front":kt,"data-swiping":ae,"data-dismissible":bt,"data-type":Nt,"data-invert":Qt,"data-swipe-out":Ae,"data-swipe-direction":X,"data-expanded":!!(x||M&&K),"data-testid":h.testId,style:{"--index":y,"--toasts-before":y,"--z-index":j.length-y,"--offset":`${W?Pe:pt.current}px`,"--initial-height":M?"auto":`${ue}px`,...N,...h.style},onDragEnd:()=>{ce(!1),Y(null),rn.current=null},onPointerDown:wt=>{wt.button!==2&&(on||!bt||(Ct.current=new Date,xe(pt.current),wt.target.setPointerCapture(wt.pointerId),wt.target.tagName!=="BUTTON"&&(ce(!0),rn.current={x:wt.clientX,y:wt.clientY})))},onPointerUp:()=>{var wt,Gn,Bn;if(Ae||!bt)return;rn.current=null;const ir=Number(((wt=Me.current)==null?void 0:wt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),rs=Number(((Gn=Me.current)==null?void 0:Gn.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),St=new Date().getTime()-((Bn=Ct.current)==null?void 0:Bn.getTime()),pr=R==="x"?ir:rs,Vr=Math.abs(pr)/St;if(Math.abs(pr)>=YAe||Vr>.11){xe(pt.current),h.onDismiss==null||h.onDismiss.call(h,h),q(R==="x"?ir>0?"right":"left":rs>0?"down":"up"),It(),pe(!0);return}else{var nr,Re;(nr=Me.current)==null||nr.style.setProperty("--swipe-amount-x","0px"),(Re=Me.current)==null||Re.style.setProperty("--swipe-amount-y","0px")}Ne(!1),ce(!1),Y(null)},onPointerMove:wt=>{var Gn,Bn,ir;if(!rn.current||!bt||((Gn=window.getSelection())==null?void 0:Gn.toString().length)>0)return;const St=wt.clientY-rn.current.y,pr=wt.clientX-rn.current.x;var Vr;const nr=(Vr=e.swipeDirections)!=null?Vr:JAe(Q);!R&&(Math.abs(pr)>1||Math.abs(St)>1)&&Y(Math.abs(pr)>Math.abs(St)?"x":"y");let Re={x:0,y:0};const mt=Ht=>1/(1.5+Math.abs(Ht)/20);if(R==="y"){if(nr.includes("top")||nr.includes("bottom"))if(nr.includes("top")&&St<0||nr.includes("bottom")&&St>0)Re.y=St;else{const Ht=St*mt(St);Re.y=Math.abs(Ht)<Math.abs(St)?Ht:St}}else if(R==="x"&&(nr.includes("left")||nr.includes("right")))if(nr.includes("left")&&pr<0||nr.includes("right")&&pr>0)Re.x=pr;else{const Ht=pr*mt(pr);Re.x=Math.abs(Ht)<Math.abs(pr)?Ht:pr}(Math.abs(Re.x)>0||Math.abs(Re.y)>0)&&Ne(!0),(Bn=Me.current)==null||Bn.style.setProperty("--swipe-amount-x",`${Re.x}px`),(ir=Me.current)==null||ir.style.setProperty("--swipe-amount-y",`${Re.y}px`)}},Le&&!h.jsx&&Nt!=="loading"?nt.createElement("button",{"aria-label":$,"data-disabled":on,"data-close-button":!0,onClick:on||!bt?()=>{}:()=>{It(),h.onDismiss==null||h.onDismiss.call(h,h)},className:ud(U==null?void 0:U.closeButton,h==null||(r=h.classNames)==null?void 0:r.closeButton)},(en=H==null?void 0:H.close)!=null?en:LAe):null,(Nt||h.icon||h.promise)&&h.icon!==null&&((H==null?void 0:H[Nt])!==null||h.icon)?nt.createElement("div",{"data-icon":"",className:ud(U==null?void 0:U.icon,h==null||(s=h.classNames)==null?void 0:s.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||Ut():null,h.type!=="loading"?Wn:null):null,nt.createElement("div",{"data-content":"",className:ud(U==null?void 0:U.content,h==null||(i=h.classNames)==null?void 0:i.content)},nt.createElement("div",{"data-title":"",className:ud(U==null?void 0:U.title,h==null||(o=h.classNames)==null?void 0:o.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?nt.createElement("div",{"data-description":"",className:ud(I,$t,U==null?void 0:U.description,h==null||(c=h.classNames)==null?void 0:c.description)},typeof h.description=="function"?h.description():h.description):null),nt.isValidElement(h.cancel)?h.cancel:h.cancel&&Wb(h.cancel)?nt.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||L,onClick:wt=>{Wb(h.cancel)&&bt&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,wt),It())},className:ud(U==null?void 0:U.cancelButton,h==null||(l=h.classNames)==null?void 0:l.cancelButton)},h.cancel.label):null,nt.isValidElement(h.action)?h.action:h.action&&Wb(h.action)?nt.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||P,onClick:wt=>{Wb(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,wt),!wt.defaultPrevented&&It())},className:ud(U==null?void 0:U.actionButton,h==null||(d=h.classNames)==null?void 0:d.actionButton)},h.action.label):null)};function NU(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function efe(e,t){const n={};return[e,t].forEach((r,s)=>{const i=s===1,o=i?"--mobile-offset":"--offset",c=i?KAe:qAe;function l(d){["top","right","bottom","left"].forEach(u=>{n[`${o}-${u}`]=typeof d=="number"?`${d}px`:d})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(d=>{r[d]===void 0?n[`${o}-${d}`]=c:n[`${o}-${d}`]=typeof r[d]=="number"?`${r[d]}px`:r[d]}):l(c)}),n}const tfe=nt.forwardRef(function(t,n){const{id:r,invert:s,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:c,closeButton:l,className:d,offset:u,mobileOffset:h,theme:A="light",richColors:f,duration:m,style:g,visibleToasts:b=VAe,toastOptions:y,dir:j=NU(),gap:x=GAe,icons:C,containerAriaLabel:S="Notifications"}=t,[_,N]=nt.useState([]),L=nt.useMemo(()=>r?_.filter(K=>K.toasterId===r):_.filter(K=>!K.toasterId),[_,r]),P=nt.useMemo(()=>Array.from(new Set([i].concat(L.filter(K=>K.position).map(K=>K.position)))),[L,i]),[F,I]=nt.useState([]),[T,Q]=nt.useState(!1),[D,M]=nt.useState(!1),[U,H]=nt.useState(A!=="system"?A:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),$=nt.useRef(null),R=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),Y=nt.useRef(null),X=nt.useRef(!1),q=nt.useCallback(K=>{N(J=>{var W;return(W=J.find(ne=>ne.id===K.id))!=null&&W.delete||ao.dismiss(K.id),J.filter(({id:ne})=>ne!==K.id)})},[]);return nt.useEffect(()=>ao.subscribe(K=>{if(K.dismiss){requestAnimationFrame(()=>{N(J=>J.map(W=>W.id===K.id?{...W,delete:!0}:W))});return}setTimeout(()=>{D$.flushSync(()=>{N(J=>{const W=J.findIndex(ne=>ne.id===K.id);return W!==-1?[...J.slice(0,W),{...J[W],...K},...J.slice(W+1)]:[K,...J]})})})}),[_]),nt.useEffect(()=>{if(A!=="system"){H(A);return}if(A==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?H("dark"):H("light")),typeof window>"u")return;const K=window.matchMedia("(prefers-color-scheme: dark)");try{K.addEventListener("change",({matches:J})=>{H(J?"dark":"light")})}catch{K.addListener(({matches:W})=>{try{H(W?"dark":"light")}catch(ne){console.error(ne)}})}},[A]),nt.useEffect(()=>{_.length<=1&&Q(!1)},[_]),nt.useEffect(()=>{const K=J=>{var W;if(o.every(ce=>J[ce]||J.code===ce)){var ae;Q(!0),(ae=$.current)==null||ae.focus()}J.code==="Escape"&&(document.activeElement===$.current||(W=$.current)!=null&&W.contains(document.activeElement))&&Q(!1)};return document.addEventListener("keydown",K),()=>document.removeEventListener("keydown",K)},[o]),nt.useEffect(()=>{if($.current)return()=>{Y.current&&(Y.current.focus({preventScroll:!0}),Y.current=null,X.current=!1)}},[$.current]),nt.createElement("section",{ref:n,"aria-label":`${S} ${R}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map((K,J)=>{var W;const[ne,ae]=K.split("-");return L.length?nt.createElement("ol",{key:K,dir:j==="auto"?NU():j,tabIndex:-1,ref:$,className:d,"data-sonner-toaster":!0,"data-sonner-theme":U,"data-y-position":ne,"data-x-position":ae,style:{"--front-toast-height":`${((W=F[0])==null?void 0:W.height)||0}px`,"--width":`${WAe}px`,"--gap":`${x}px`,...g,...efe(u,h)},onBlur:ce=>{X.current&&!ce.currentTarget.contains(ce.relatedTarget)&&(X.current=!1,Y.current&&(Y.current.focus({preventScroll:!0}),Y.current=null))},onFocus:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||X.current||(X.current=!0,Y.current=ce.relatedTarget)},onMouseEnter:()=>Q(!0),onMouseMove:()=>Q(!0),onMouseLeave:()=>{D||Q(!1)},onDragEnd:()=>Q(!1),onPointerDown:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||M(!0)},onPointerUp:()=>M(!1)},L.filter(ce=>!ce.position&&J===0||ce.position===K).map((ce,Ae)=>{var pe,be;return nt.createElement(ZAe,{key:ce.id,icons:C,index:Ae,toast:ce,defaultRichColors:f,duration:(pe=y==null?void 0:y.duration)!=null?pe:m,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:s,visibleToasts:b,closeButton:(be=y==null?void 0:y.closeButton)!=null?be:l,interacting:D,position:K,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,closeButtonAriaLabel:y==null?void 0:y.closeButtonAriaLabel,removeToast:q,toasts:L.filter(Ne=>Ne.position==ce.position),heights:F.filter(Ne=>Ne.position==ce.position),setHeights:I,expandByDefault:c,gap:x,expanded:T,swipeDirections:t.swipeDirections})})):null}))}),nfe=({...e})=>{const{theme:t="system"}=BAe();return a.jsx(tfe,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var rfe=nP[" useId ".trim().toString()]||(()=>{}),sfe=0;function $a(e){const[t,n]=w.useState(rfe());return Tr(()=>{e||n(r=>r??String(sfe++))},[e]),e||(t?`radix-${t}`:"")}const ife=["top","right","bottom","left"],XA=Math.min,$o=Math.max,EC=Math.round,Gb=Math.floor,Pd=e=>({x:e,y:e}),afe={left:"right",right:"left",bottom:"top",top:"bottom"},ofe={start:"end",end:"start"};function O5(e,t,n){return $o(e,XA(t,n))}function Ju(e,t){return typeof e=="function"?e(t):e}function Zu(e){return e.split("-")[0]}function Qv(e){return e.split("-")[1]}function t4(e){return e==="x"?"y":"x"}function n4(e){return e==="y"?"height":"width"}const cfe=new Set(["top","bottom"]);function Nd(e){return cfe.has(Zu(e))?"y":"x"}function r4(e){return t4(Nd(e))}function lfe(e,t,n){n===void 0&&(n=!1);const r=Qv(e),s=r4(e),i=n4(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=_C(o)),[o,_C(o)]}function dfe(e){const t=_C(e);return[Q5(e),t,Q5(t)]}function Q5(e){return e.replace(/start|end/g,t=>ofe[t])}const BU=["left","right"],EU=["right","left"],ufe=["top","bottom"],hfe=["bottom","top"];function Afe(e,t,n){switch(e){case"top":case"bottom":return n?t?EU:BU:t?BU:EU;case"left":case"right":return t?ufe:hfe;default:return[]}}function ffe(e,t,n,r){const s=Qv(e);let i=Afe(Zu(e),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(Q5)))),i}function _C(e){return e.replace(/left|right|bottom|top/g,t=>afe[t])}function pfe(e){return{top:0,right:0,bottom:0,left:0,...e}}function D7(e){return typeof e!="number"?pfe(e):{top:e,right:e,bottom:e,left:e}}function IC(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function _U(e,t,n){let{reference:r,floating:s}=e;const i=Nd(t),o=r4(t),c=n4(o),l=Zu(t),d=i==="y",u=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,A=r[c]/2-s[c]/2;let f;switch(l){case"top":f={x:u,y:r.y-s.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:h};break;case"left":f={x:r.x-s.width,y:h};break;default:f={x:r.x,y:r.y}}switch(Qv(t)){case"start":f[o]-=A*(n&&d?-1:1);break;case"end":f[o]+=A*(n&&d?-1:1);break}return f}const mfe=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,c=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:h}=_U(d,r,l),A=r,f={},m=0;for(let g=0;g<c.length;g++){const{name:b,fn:y}=c[g],{x:j,y:x,data:C,reset:S}=await y({x:u,y:h,initialPlacement:r,placement:A,strategy:s,middlewareData:f,rects:d,platform:o,elements:{reference:e,floating:t}});u=j??u,h=x??h,f={...f,[b]:{...f[b],...C}},S&&m<=50&&(m++,typeof S=="object"&&(S.placement&&(A=S.placement),S.rects&&(d=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):S.rects),{x:u,y:h}=_U(d,A,l)),g=-1)}return{x:u,y:h,placement:A,strategy:s,middlewareData:f}};async function wx(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:i,rects:o,elements:c,strategy:l}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:A=!1,padding:f=0}=Ju(t,e),m=D7(f),b=c[A?h==="floating"?"reference":"floating":h],y=IC(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(b)))==null||n?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(c.floating)),boundary:d,rootBoundary:u,strategy:l})),j=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,x=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c.floating)),C=await(i.isElement==null?void 0:i.isElement(x))?await(i.getScale==null?void 0:i.getScale(x))||{x:1,y:1}:{x:1,y:1},S=IC(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:j,offsetParent:x,strategy:l}):j);return{top:(y.top-S.top+m.top)/C.y,bottom:(S.bottom-y.bottom+m.bottom)/C.y,left:(y.left-S.left+m.left)/C.x,right:(S.right-y.right+m.right)/C.x}}const gfe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:i,platform:o,elements:c,middlewareData:l}=t,{element:d,padding:u=0}=Ju(e,t)||{};if(d==null)return{};const h=D7(u),A={x:n,y:r},f=r4(s),m=n4(f),g=await o.getDimensions(d),b=f==="y",y=b?"top":"left",j=b?"bottom":"right",x=b?"clientHeight":"clientWidth",C=i.reference[m]+i.reference[f]-A[f]-i.floating[m],S=A[f]-i.reference[f],_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let N=_?_[x]:0;(!N||!await(o.isElement==null?void 0:o.isElement(_)))&&(N=c.floating[x]||i.floating[m]);const L=C/2-S/2,P=N/2-g[m]/2-1,F=XA(h[y],P),I=XA(h[j],P),T=F,Q=N-g[m]-I,D=N/2-g[m]/2+L,M=O5(T,D,Q),U=!l.arrow&&Qv(s)!=null&&D!==M&&i.reference[m]/2-(D<T?F:I)-g[m]/2<0,H=U?D<T?D-T:D-Q:0;return{[f]:A[f]+H,data:{[f]:M,centerOffset:D-M-H,...U&&{alignmentOffset:H}},reset:U}}}),vfe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:c,platform:l,elements:d}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:A,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...b}=Ju(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const y=Zu(s),j=Nd(c),x=Zu(c)===c,C=await(l.isRTL==null?void 0:l.isRTL(d.floating)),S=A||(x||!g?[_C(c)]:dfe(c)),_=m!=="none";!A&&_&&S.push(...ffe(c,g,m,C));const N=[c,...S],L=await wx(t,b),P=[];let F=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&P.push(L[y]),h){const D=lfe(s,o,C);P.push(L[D[0]],L[D[1]])}if(F=[...F,{placement:s,overflows:P}],!P.every(D=>D<=0)){var I,T;const D=(((I=i.flip)==null?void 0:I.index)||0)+1,M=N[D];if(M&&(!(h==="alignment"?j!==Nd(M):!1)||F.every($=>$.overflows[0]>0&&Nd($.placement)===j)))return{data:{index:D,overflows:F},reset:{placement:M}};let U=(T=F.filter(H=>H.overflows[0]<=0).sort((H,$)=>H.overflows[1]-$.overflows[1])[0])==null?void 0:T.placement;if(!U)switch(f){case"bestFit":{var Q;const H=(Q=F.filter($=>{if(_){const R=Nd($.placement);return R===j||R==="y"}return!0}).map($=>[$.placement,$.overflows.filter(R=>R>0).reduce((R,Y)=>R+Y,0)]).sort(($,R)=>$[1]-R[1])[0])==null?void 0:Q[0];H&&(U=H);break}case"initialPlacement":U=c;break}if(s!==U)return{reset:{placement:U}}}return{}}}};function IU(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function PU(e){return ife.some(t=>e[t]>=0)}const yfe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=Ju(e,t);switch(r){case"referenceHidden":{const i=await wx(t,{...s,elementContext:"reference"}),o=IU(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:PU(o)}}}case"escaped":{const i=await wx(t,{...s,altBoundary:!0}),o=IU(i,n.floating);return{data:{escapedOffsets:o,escaped:PU(o)}}}default:return{}}}}},U7=new Set(["left","top"]);async function xfe(e,t){const{placement:n,platform:r,elements:s}=e,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Zu(n),c=Qv(n),l=Nd(n)==="y",d=U7.has(o)?-1:1,u=i&&l?-1:1,h=Ju(t,e);let{mainAxis:A,crossAxis:f,alignmentAxis:m}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return c&&typeof m=="number"&&(f=c==="end"?m*-1:m),l?{x:f*u,y:A*d}:{x:A*d,y:f*u}}const wfe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:i,placement:o,middlewareData:c}=t,l=await xfe(t,e);return o===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},bfe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:c={fn:b=>{let{x:y,y:j}=b;return{x:y,y:j}}},...l}=Ju(e,t),d={x:n,y:r},u=await wx(t,l),h=Nd(Zu(s)),A=t4(h);let f=d[A],m=d[h];if(i){const b=A==="y"?"top":"left",y=A==="y"?"bottom":"right",j=f+u[b],x=f-u[y];f=O5(j,f,x)}if(o){const b=h==="y"?"top":"left",y=h==="y"?"bottom":"right",j=m+u[b],x=m-u[y];m=O5(j,m,x)}const g=c.fn({...t,[A]:f,[h]:m});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[A]:i,[h]:o}}}}}},Cfe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=t,{offset:c=0,mainAxis:l=!0,crossAxis:d=!0}=Ju(e,t),u={x:n,y:r},h=Nd(s),A=t4(h);let f=u[A],m=u[h];const g=Ju(c,t),b=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const x=A==="y"?"height":"width",C=i.reference[A]-i.floating[x]+b.mainAxis,S=i.reference[A]+i.reference[x]-b.mainAxis;f<C?f=C:f>S&&(f=S)}if(d){var y,j;const x=A==="y"?"width":"height",C=U7.has(Zu(s)),S=i.reference[h]-i.floating[x]+(C&&((y=o.offset)==null?void 0:y[h])||0)+(C?0:b.crossAxis),_=i.reference[h]+i.reference[x]+(C?0:((j=o.offset)==null?void 0:j[h])||0)-(C?b.crossAxis:0);m<S?m=S:m>_&&(m=_)}return{[A]:f,[h]:m}}}},jfe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:i,platform:o,elements:c}=t,{apply:l=()=>{},...d}=Ju(e,t),u=await wx(t,d),h=Zu(s),A=Qv(s),f=Nd(s)==="y",{width:m,height:g}=i.floating;let b,y;h==="top"||h==="bottom"?(b=h,y=A===(await(o.isRTL==null?void 0:o.isRTL(c.floating))?"start":"end")?"left":"right"):(y=h,b=A==="end"?"top":"bottom");const j=g-u.top-u.bottom,x=m-u.left-u.right,C=XA(g-u[b],j),S=XA(m-u[y],x),_=!t.middlewareData.shift;let N=C,L=S;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(L=x),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(N=j),_&&!A){const F=$o(u.left,0),I=$o(u.right,0),T=$o(u.top,0),Q=$o(u.bottom,0);f?L=m-2*(F!==0||I!==0?F+I:$o(u.left,u.right)):N=g-2*(T!==0||Q!==0?T+Q:$o(u.top,u.bottom))}await l({...t,availableWidth:L,availableHeight:N});const P=await o.getDimensions(c.floating);return m!==P.width||g!==P.height?{reset:{rects:!0}}:{}}}};function ek(){return typeof window<"u"}function Hv(e){return L7(e)?(e.nodeName||"").toLowerCase():"#document"}function Go(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Wd(e){var t;return(t=(L7(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function L7(e){return ek()?e instanceof Node||e instanceof Go(e).Node:!1}function Bl(e){return ek()?e instanceof Element||e instanceof Go(e).Element:!1}function Hd(e){return ek()?e instanceof HTMLElement||e instanceof Go(e).HTMLElement:!1}function TU(e){return!ek()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Go(e).ShadowRoot}const kfe=new Set(["inline","contents"]);function gw(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=El(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!kfe.has(s)}const Sfe=new Set(["table","td","th"]);function Nfe(e){return Sfe.has(Hv(e))}const Bfe=[":popover-open",":modal"];function tk(e){return Bfe.some(t=>{try{return e.matches(t)}catch{return!1}})}const Efe=["transform","translate","scale","rotate","perspective"],_fe=["transform","translate","scale","rotate","perspective","filter"],Ife=["paint","layout","strict","content"];function s4(e){const t=i4(),n=Bl(e)?El(e):e;return Efe.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||_fe.some(r=>(n.willChange||"").includes(r))||Ife.some(r=>(n.contain||"").includes(r))}function Pfe(e){let t=JA(e);for(;Hd(t)&&!pv(t);){if(s4(t))return t;if(tk(t))return null;t=JA(t)}return null}function i4(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Tfe=new Set(["html","body","#document"]);function pv(e){return Tfe.has(Hv(e))}function El(e){return Go(e).getComputedStyle(e)}function nk(e){return Bl(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function JA(e){if(Hv(e)==="html")return e;const t=e.assignedSlot||e.parentNode||TU(e)&&e.host||Wd(e);return TU(t)?t.host:t}function M7(e){const t=JA(e);return pv(t)?e.ownerDocument?e.ownerDocument.body:e.body:Hd(t)&&gw(t)?t:M7(t)}function bx(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=M7(e),i=s===((r=e.ownerDocument)==null?void 0:r.body),o=Go(s);if(i){const c=H5(o);return t.concat(o,o.visualViewport||[],gw(s)?s:[],c&&n?bx(c):[])}return t.concat(s,bx(s,[],n))}function H5(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function R7(e){const t=El(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Hd(e),i=s?e.offsetWidth:n,o=s?e.offsetHeight:r,c=EC(n)!==i||EC(r)!==o;return c&&(n=i,r=o),{width:n,height:r,$:c}}function a4(e){return Bl(e)?e:e.contextElement}function Qg(e){const t=a4(e);if(!Hd(t))return Pd(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:i}=R7(t);let o=(i?EC(n.width):n.width)/r,c=(i?EC(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const Ffe=Pd(0);function O7(e){const t=Go(e);return!i4()||!t.visualViewport?Ffe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Dfe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Go(e)?!1:t}function Kp(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=a4(e);let o=Pd(1);t&&(r?Bl(r)&&(o=Qg(r)):o=Qg(e));const c=Dfe(i,n,r)?O7(i):Pd(0);let l=(s.left+c.x)/o.x,d=(s.top+c.y)/o.y,u=s.width/o.x,h=s.height/o.y;if(i){const A=Go(i),f=r&&Bl(r)?Go(r):r;let m=A,g=H5(m);for(;g&&r&&f!==m;){const b=Qg(g),y=g.getBoundingClientRect(),j=El(g),x=y.left+(g.clientLeft+parseFloat(j.paddingLeft))*b.x,C=y.top+(g.clientTop+parseFloat(j.paddingTop))*b.y;l*=b.x,d*=b.y,u*=b.x,h*=b.y,l+=x,d+=C,m=Go(g),g=H5(m)}}return IC({width:u,height:h,x:l,y:d})}function o4(e,t){const n=nk(e).scrollLeft;return t?t.left+n:Kp(Wd(e)).left+n}function Q7(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:o4(e,r)),i=r.top+t.scrollTop;return{x:s,y:i}}function Ufe(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const i=s==="fixed",o=Wd(r),c=t?tk(t.floating):!1;if(r===o||c&&i)return n;let l={scrollLeft:0,scrollTop:0},d=Pd(1);const u=Pd(0),h=Hd(r);if((h||!h&&!i)&&((Hv(r)!=="body"||gw(o))&&(l=nk(r)),Hd(r))){const f=Kp(r);d=Qg(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}const A=o&&!h&&!i?Q7(o,l,!0):Pd(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-l.scrollLeft*d.x+u.x+A.x,y:n.y*d.y-l.scrollTop*d.y+u.y+A.y}}function Lfe(e){return Array.from(e.getClientRects())}function Mfe(e){const t=Wd(e),n=nk(e),r=e.ownerDocument.body,s=$o(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=$o(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+o4(e);const c=-n.scrollTop;return El(r).direction==="rtl"&&(o+=$o(t.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:c}}function Rfe(e,t){const n=Go(e),r=Wd(e),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,c=0,l=0;if(s){i=s.width,o=s.height;const d=i4();(!d||d&&t==="fixed")&&(c=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:c,y:l}}const Ofe=new Set(["absolute","fixed"]);function Qfe(e,t){const n=Kp(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,i=Hd(e)?Qg(e):Pd(1),o=e.clientWidth*i.x,c=e.clientHeight*i.y,l=s*i.x,d=r*i.y;return{width:o,height:c,x:l,y:d}}function FU(e,t,n){let r;if(t==="viewport")r=Rfe(e,n);else if(t==="document")r=Mfe(Wd(e));else if(Bl(t))r=Qfe(t,n);else{const s=O7(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return IC(r)}function H7(e,t){const n=JA(e);return n===t||!Bl(n)||pv(n)?!1:El(n).position==="fixed"||H7(n,t)}function Hfe(e,t){const n=t.get(e);if(n)return n;let r=bx(e,[],!1).filter(c=>Bl(c)&&Hv(c)!=="body"),s=null;const i=El(e).position==="fixed";let o=i?JA(e):e;for(;Bl(o)&&!pv(o);){const c=El(o),l=s4(o);!l&&c.position==="fixed"&&(s=null),(i?!l&&!s:!l&&c.position==="static"&&!!s&&Ofe.has(s.position)||gw(o)&&!l&&H7(e,o))?r=r.filter(u=>u!==o):s=c,o=JA(o)}return t.set(e,r),r}function $fe(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const o=[...n==="clippingAncestors"?tk(t)?[]:Hfe(t,this._c):[].concat(n),r],c=o[0],l=o.reduce((d,u)=>{const h=FU(t,u,s);return d.top=$o(h.top,d.top),d.right=XA(h.right,d.right),d.bottom=XA(h.bottom,d.bottom),d.left=$o(h.left,d.left),d},FU(t,c,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function zfe(e){const{width:t,height:n}=R7(e);return{width:t,height:n}}function Vfe(e,t,n){const r=Hd(t),s=Wd(t),i=n==="fixed",o=Kp(e,!0,i,t);let c={scrollLeft:0,scrollTop:0};const l=Pd(0);function d(){l.x=o4(s)}if(r||!r&&!i)if((Hv(t)!=="body"||gw(s))&&(c=nk(t)),r){const f=Kp(t,!0,i,t);l.x=f.x+t.clientLeft,l.y=f.y+t.clientTop}else s&&d();i&&!r&&s&&d();const u=s&&!r&&!i?Q7(s,c):Pd(0),h=o.left+c.scrollLeft-l.x-u.x,A=o.top+c.scrollTop-l.y-u.y;return{x:h,y:A,width:o.width,height:o.height}}function ON(e){return El(e).position==="static"}function DU(e,t){if(!Hd(e)||El(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Wd(e)===n&&(n=n.ownerDocument.body),n}function $7(e,t){const n=Go(e);if(tk(e))return n;if(!Hd(e)){let s=JA(e);for(;s&&!pv(s);){if(Bl(s)&&!ON(s))return s;s=JA(s)}return n}let r=DU(e,t);for(;r&&Nfe(r)&&ON(r);)r=DU(r,t);return r&&pv(r)&&ON(r)&&!s4(r)?n:r||Pfe(e)||n}const qfe=async function(e){const t=this.getOffsetParent||$7,n=this.getDimensions,r=await n(e.floating);return{reference:Vfe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Kfe(e){return El(e).direction==="rtl"}const Wfe={convertOffsetParentRelativeRectToViewportRelativeRect:Ufe,getDocumentElement:Wd,getClippingRect:$fe,getOffsetParent:$7,getElementRects:qfe,getClientRects:Lfe,getDimensions:zfe,getScale:Qg,isElement:Bl,isRTL:Kfe};function z7(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Gfe(e,t){let n=null,r;const s=Wd(e);function i(){var c;clearTimeout(r),(c=n)==null||c.disconnect(),n=null}function o(c,l){c===void 0&&(c=!1),l===void 0&&(l=1),i();const d=e.getBoundingClientRect(),{left:u,top:h,width:A,height:f}=d;if(c||t(),!A||!f)return;const m=Gb(h),g=Gb(s.clientWidth-(u+A)),b=Gb(s.clientHeight-(h+f)),y=Gb(u),x={rootMargin:-m+"px "+-g+"px "+-b+"px "+-y+"px",threshold:$o(0,XA(1,l))||1};let C=!0;function S(_){const N=_[0].intersectionRatio;if(N!==l){if(!C)return o();N?o(!1,N):r=setTimeout(()=>{o(!1,1e-7)},1e3)}N===1&&!z7(d,e.getBoundingClientRect())&&o(),C=!1}try{n=new IntersectionObserver(S,{...x,root:s.ownerDocument})}catch{n=new IntersectionObserver(S,x)}n.observe(e)}return o(!0),i}function c4(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,d=a4(e),u=s||i?[...d?bx(d):[],...bx(t)]:[];u.forEach(y=>{s&&y.addEventListener("scroll",n,{passive:!0}),i&&y.addEventListener("resize",n)});const h=d&&c?Gfe(d,n):null;let A=-1,f=null;o&&(f=new ResizeObserver(y=>{let[j]=y;j&&j.target===d&&f&&(f.unobserve(t),cancelAnimationFrame(A),A=requestAnimationFrame(()=>{var x;(x=f)==null||x.observe(t)})),n()}),d&&!l&&f.observe(d),f.observe(t));let m,g=l?Kp(e):null;l&&b();function b(){const y=Kp(e);g&&!z7(g,y)&&n(),g=y,m=requestAnimationFrame(b)}return n(),()=>{var y;u.forEach(j=>{s&&j.removeEventListener("scroll",n),i&&j.removeEventListener("resize",n)}),h==null||h(),(y=f)==null||y.disconnect(),f=null,l&&cancelAnimationFrame(m)}}const Yfe=wfe,Xfe=bfe,Jfe=vfe,Zfe=jfe,epe=yfe,UU=gfe,tpe=Cfe,npe=(e,t,n)=>{const r=new Map,s={platform:Wfe,...n},i={...s.platform,_c:r};return mfe(e,t,{...s,platform:i})};var rpe=typeof document<"u",spe=function(){},C2=rpe?w.useLayoutEffect:spe;function PC(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!PC(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&e.$$typeof)&&!PC(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function V7(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function LU(e,t){const n=V7(e);return Math.round(t*n)/n}function QN(e){const t=w.useRef(e);return C2(()=>{t.current=e}),t}function l4(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:c=!0,whileElementsMounted:l,open:d}=e,[u,h]=w.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[A,f]=w.useState(r);PC(A,r)||f(r);const[m,g]=w.useState(null),[b,y]=w.useState(null),j=w.useCallback($=>{$!==_.current&&(_.current=$,g($))},[]),x=w.useCallback($=>{$!==N.current&&(N.current=$,y($))},[]),C=i||m,S=o||b,_=w.useRef(null),N=w.useRef(null),L=w.useRef(u),P=l!=null,F=QN(l),I=QN(s),T=QN(d),Q=w.useCallback(()=>{if(!_.current||!N.current)return;const $={placement:t,strategy:n,middleware:A};I.current&&($.platform=I.current),npe(_.current,N.current,$).then(R=>{const Y={...R,isPositioned:T.current!==!1};D.current&&!PC(L.current,Y)&&(L.current=Y,Fl.flushSync(()=>{h(Y)}))})},[A,t,n,I,T]);C2(()=>{d===!1&&L.current.isPositioned&&(L.current.isPositioned=!1,h($=>({...$,isPositioned:!1})))},[d]);const D=w.useRef(!1);C2(()=>(D.current=!0,()=>{D.current=!1}),[]),C2(()=>{if(C&&(_.current=C),S&&(N.current=S),C&&S){if(F.current)return F.current(C,S,Q);Q()}},[C,S,Q,F,P]);const M=w.useMemo(()=>({reference:_,floating:N,setReference:j,setFloating:x}),[j,x]),U=w.useMemo(()=>({reference:C,floating:S}),[C,S]),H=w.useMemo(()=>{const $={position:n,left:0,top:0};if(!U.floating)return $;const R=LU(U.floating,u.x),Y=LU(U.floating,u.y);return c?{...$,transform:"translate("+R+"px, "+Y+"px)",...V7(U.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:R,top:Y}},[n,c,U.floating,u.x,u.y]);return w.useMemo(()=>({...u,update:Q,refs:M,elements:U,floatingStyles:H}),[u,Q,M,U,H])}const ipe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?UU({element:r.current,padding:s}).fn(n):{}:r?UU({element:r,padding:s}).fn(n):{}}}},d4=(e,t)=>({...Yfe(e),options:[e,t]}),u4=(e,t)=>({...Xfe(e),options:[e,t]}),h4=(e,t)=>({...tpe(e),options:[e,t]}),A4=(e,t)=>({...Jfe(e),options:[e,t]}),f4=(e,t)=>({...Zfe(e),options:[e,t]}),p4=(e,t)=>({...epe(e),options:[e,t]}),m4=(e,t)=>({...ipe(e),options:[e,t]});var ape="Arrow",q7=w.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...i}=e;return a.jsx(gt.svg,{...i,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});q7.displayName=ape;var g4=q7;function $v(e){const[t,n]=w.useState(void 0);return Tr(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,c;if("borderBoxSize"in i){const l=i.borderBoxSize,d=Array.isArray(l)?l[0]:l;o=d.inlineSize,c=d.blockSize}else o=e.offsetWidth,c=e.offsetHeight;n({width:o,height:c})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var v4="Popper",[K7,rk]=Cs(v4),[ope,W7]=K7(v4),G7=e=>{const{__scopePopper:t,children:n}=e,[r,s]=w.useState(null);return a.jsx(ope,{scope:t,anchor:r,onAnchorChange:s,children:n})};G7.displayName=v4;var Y7="PopperAnchor",X7=w.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,i=W7(Y7,n),o=w.useRef(null),c=Wt(t,o);return w.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:a.jsx(gt.div,{...s,ref:c})});X7.displayName=Y7;var y4="PopperContent",[cpe,lpe]=K7(y4),J7=w.forwardRef((e,t)=>{var ae,ce,Ae,pe,be,Ne;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:c=0,avoidCollisions:l=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:A=!1,updatePositionStrategy:f="optimized",onPlaced:m,...g}=e,b=W7(y4,n),[y,j]=w.useState(null),x=Wt(t,Pe=>j(Pe)),[C,S]=w.useState(null),_=$v(C),N=(_==null?void 0:_.width)??0,L=(_==null?void 0:_.height)??0,P=r+(i!=="center"?"-"+i:""),F=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},I=Array.isArray(d)?d:[d],T=I.length>0,Q={padding:F,boundary:I.filter(upe),altBoundary:T},{refs:D,floatingStyles:M,placement:U,isPositioned:H,middlewareData:$}=l4({strategy:"fixed",placement:P,whileElementsMounted:(...Pe)=>c4(...Pe,{animationFrame:f==="always"}),elements:{reference:b.anchor},middleware:[d4({mainAxis:s+L,alignmentAxis:o}),l&&u4({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?h4():void 0,...Q}),l&&A4({...Q}),f4({...Q,apply:({elements:Pe,rects:xe,availableWidth:ue,availableHeight:yt})=>{const{width:ht,height:Ct}=xe.reference,Me=Pe.floating.style;Me.setProperty("--radix-popper-available-width",`${ue}px`),Me.setProperty("--radix-popper-available-height",`${yt}px`),Me.setProperty("--radix-popper-anchor-width",`${ht}px`),Me.setProperty("--radix-popper-anchor-height",`${Ct}px`)}}),C&&m4({element:C,padding:c}),hpe({arrowWidth:N,arrowHeight:L}),A&&p4({strategy:"referenceHidden",...Q})]}),[R,Y]=tz(U),X=Nr(m);Tr(()=>{H&&(X==null||X())},[H,X]);const q=(ae=$.arrow)==null?void 0:ae.x,K=(ce=$.arrow)==null?void 0:ce.y,J=((Ae=$.arrow)==null?void 0:Ae.centerOffset)!==0,[W,ne]=w.useState();return Tr(()=>{y&&ne(window.getComputedStyle(y).zIndex)},[y]),a.jsx("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:{...M,transform:H?M.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:W,"--radix-popper-transform-origin":[(pe=$.transformOrigin)==null?void 0:pe.x,(be=$.transformOrigin)==null?void 0:be.y].join(" "),...((Ne=$.hide)==null?void 0:Ne.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:a.jsx(cpe,{scope:n,placedSide:R,onArrowChange:S,arrowX:q,arrowY:K,shouldHideArrow:J,children:a.jsx(gt.div,{"data-side":R,"data-align":Y,...g,ref:x,style:{...g.style,animation:H?void 0:"none"}})})})});J7.displayName=y4;var Z7="PopperArrow",dpe={top:"bottom",right:"left",bottom:"top",left:"right"},ez=w.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,i=lpe(Z7,r),o=dpe[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(g4,{...s,ref:n,style:{...s.style,display:"block"}})})});ez.displayName=Z7;function upe(e){return e!==null}var hpe=e=>({name:"transformOrigin",options:e,fn(t){var b,y,j;const{placement:n,rects:r,middlewareData:s}=t,o=((b=s.arrow)==null?void 0:b.centerOffset)!==0,c=o?0:e.arrowWidth,l=o?0:e.arrowHeight,[d,u]=tz(n),h={start:"0%",center:"50%",end:"100%"}[u],A=(((y=s.arrow)==null?void 0:y.x)??0)+c/2,f=(((j=s.arrow)==null?void 0:j.y)??0)+l/2;let m="",g="";return d==="bottom"?(m=o?h:`${A}px`,g=`${-l}px`):d==="top"?(m=o?h:`${A}px`,g=`${r.floating.height+l}px`):d==="right"?(m=`${-l}px`,g=o?h:`${f}px`):d==="left"&&(m=`${r.floating.width+l}px`,g=o?h:`${f}px`),{data:{x:m,y:g}}}});function tz(e){const[t,n="center"]=e.split("-");return[t,n]}var nz=G7,x4=X7,rz=J7,sz=ez,[sk,$Ve]=Cs("Tooltip",[rk]),ik=rk(),iz="TooltipProvider",Ape=700,$5="tooltip.open",[fpe,w4]=sk(iz),az=e=>{const{__scopeTooltip:t,delayDuration:n=Ape,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=e,o=w.useRef(!0),c=w.useRef(!1),l=w.useRef(0);return w.useEffect(()=>{const d=l.current;return()=>window.clearTimeout(d)},[]),a.jsx(fpe,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:w.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:w.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:w.useCallback(d=>{c.current=d},[]),disableHoverableContent:s,children:i})};az.displayName=iz;var Cx="Tooltip",[ppe,ak]=sk(Cx),oz=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:s,onOpenChange:i,disableHoverableContent:o,delayDuration:c}=e,l=w4(Cx,e.__scopeTooltip),d=ik(t),[u,h]=w.useState(null),A=$a(),f=w.useRef(0),m=o??l.disableHoverableContent,g=c??l.delayDuration,b=w.useRef(!1),[y,j]=fa({prop:r,defaultProp:s??!1,onChange:N=>{N?(l.onOpen(),document.dispatchEvent(new CustomEvent($5))):l.onClose(),i==null||i(N)},caller:Cx}),x=w.useMemo(()=>y?b.current?"delayed-open":"instant-open":"closed",[y]),C=w.useCallback(()=>{window.clearTimeout(f.current),f.current=0,b.current=!1,j(!0)},[j]),S=w.useCallback(()=>{window.clearTimeout(f.current),f.current=0,j(!1)},[j]),_=w.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{b.current=!0,j(!0),f.current=0},g)},[g,j]);return w.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),a.jsx(nz,{...d,children:a.jsx(ppe,{scope:t,contentId:A,open:y,stateAttribute:x,trigger:u,onTriggerChange:h,onTriggerEnter:w.useCallback(()=>{l.isOpenDelayedRef.current?_():C()},[l.isOpenDelayedRef,_,C]),onTriggerLeave:w.useCallback(()=>{m?S():(window.clearTimeout(f.current),f.current=0)},[S,m]),onOpen:C,onClose:S,disableHoverableContent:m,children:n})})};oz.displayName=Cx;var z5="TooltipTrigger",cz=w.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=ak(z5,n),i=w4(z5,n),o=ik(n),c=w.useRef(null),l=Wt(t,c,s.onTriggerChange),d=w.useRef(!1),u=w.useRef(!1),h=w.useCallback(()=>d.current=!1,[]);return w.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),a.jsx(x4,{asChild:!0,...o,children:a.jsx(gt.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:nn(e.onPointerMove,A=>{A.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:nn(e.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:nn(e.onPointerDown,()=>{s.open&&s.onClose(),d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:nn(e.onFocus,()=>{d.current||s.onOpen()}),onBlur:nn(e.onBlur,s.onClose),onClick:nn(e.onClick,s.onClose)})})});cz.displayName=z5;var mpe="TooltipPortal",[zVe,gpe]=sk(mpe,{forceMount:void 0}),mv="TooltipContent",lz=w.forwardRef((e,t)=>{const n=gpe(mv,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=e,o=ak(mv,e.__scopeTooltip);return a.jsx(Ya,{present:r||o.open,children:o.disableHoverableContent?a.jsx(dz,{side:s,...i,ref:t}):a.jsx(vpe,{side:s,...i,ref:t})})}),vpe=w.forwardRef((e,t)=>{const n=ak(mv,e.__scopeTooltip),r=w4(mv,e.__scopeTooltip),s=w.useRef(null),i=Wt(t,s),[o,c]=w.useState(null),{trigger:l,onClose:d}=n,u=s.current,{onPointerInTransitChange:h}=r,A=w.useCallback(()=>{c(null),h(!1)},[h]),f=w.useCallback((m,g)=>{const b=m.currentTarget,y={x:m.clientX,y:m.clientY},j=Cpe(y,b.getBoundingClientRect()),x=jpe(y,j),C=kpe(g.getBoundingClientRect()),S=Npe([...x,...C]);c(S),h(!0)},[h]);return w.useEffect(()=>()=>A(),[A]),w.useEffect(()=>{if(l&&u){const m=b=>f(b,u),g=b=>f(b,l);return l.addEventListener("pointerleave",m),u.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",m),u.removeEventListener("pointerleave",g)}}},[l,u,f,A]),w.useEffect(()=>{if(o){const m=g=>{const b=g.target,y={x:g.clientX,y:g.clientY},j=(l==null?void 0:l.contains(b))||(u==null?void 0:u.contains(b)),x=!Spe(y,o);j?A():x&&(A(),d())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[l,u,o,d,A]),a.jsx(dz,{...e,ref:i})}),[ype,xpe]=sk(Cx,{isInside:!1}),wpe=M$("TooltipContent"),dz=w.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...c}=e,l=ak(mv,n),d=ik(n),{onClose:u}=l;return w.useEffect(()=>(document.addEventListener($5,u),()=>document.removeEventListener($5,u)),[u]),w.useEffect(()=>{if(l.trigger){const h=A=>{const f=A.target;f!=null&&f.contains(l.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,u]),a.jsx(fw,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:a.jsxs(rz,{"data-state":l.stateAttribute,...d,...c,ref:t,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(wpe,{children:r}),a.jsx(ype,{scope:n,isInside:!0,children:a.jsx(Lle,{id:l.contentId,role:"tooltip",children:s||r})})]})})});lz.displayName=mv;var uz="TooltipArrow",bpe=w.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=ik(n);return xpe(uz,n).isInside?null:a.jsx(sz,{...s,...r,ref:t})});bpe.displayName=uz;function Cpe(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function jpe(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function kpe(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function Spe(e,t){const{x:n,y:r}=e;let s=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const c=t[i],l=t[o],d=c.x,u=c.y,h=l.x,A=l.y;u>r!=A>r&&n<(h-d)*(r-u)/(A-u)+d&&(s=!s)}return s}function Npe(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Bpe(t)}function Bpe(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Epe=az,_pe=oz,Ipe=cz,hz=lz;const Sl=Epe,La=_pe,Ma=Ipe,da=w.forwardRef(({className:e,sideOffset:t=4,...n},r)=>a.jsx(hz,{ref:r,sideOffset:t,className:$e("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));da.displayName=hz.displayName;var ok=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ck=typeof window>"u"||"Deno"in globalThis;function ul(){}function Ppe(e,t){return typeof e=="function"?e(t):e}function Tpe(e){return typeof e=="number"&&e>=0&&e!==1/0}function Fpe(e,t){return Math.max(e+(t||0)-Date.now(),0)}function V5(e,t){return typeof e=="function"?e(t):e}function Dpe(e,t){return typeof e=="function"?e(t):e}function MU(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:c}=e;if(o){if(r){if(t.queryHash!==b4(o,t.options))return!1}else if(!kx(t.queryKey,o))return!1}if(n!=="all"){const l=t.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||s&&s!==t.state.fetchStatus||i&&!i(t))}function RU(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(jx(t.options.mutationKey)!==jx(i))return!1}else if(!kx(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function b4(e,t){return((t==null?void 0:t.queryKeyHashFn)||jx)(e)}function jx(e){return JSON.stringify(e,(t,n)=>q5(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function kx(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>kx(e[n],t[n])):!1}function Az(e,t){if(e===t)return e;const n=OU(e)&&OU(t);if(n||q5(e)&&q5(t)){const r=n?e:Object.keys(e),s=r.length,i=n?t:Object.keys(t),o=i.length,c=n?[]:{},l=new Set(r);let d=0;for(let u=0;u<o;u++){const h=n?u:i[u];(!n&&l.has(h)||n)&&e[h]===void 0&&t[h]===void 0?(c[h]=void 0,d++):(c[h]=Az(e[h],t[h]),c[h]===e[h]&&e[h]!==void 0&&d++)}return s===o&&d===s?e:c}return t}function OU(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function q5(e){if(!QU(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!QU(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function QU(e){return Object.prototype.toString.call(e)==="[object Object]"}function Upe(e){return new Promise(t=>{setTimeout(t,e)})}function Lpe(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Az(e,t):t}function Mpe(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function Rpe(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var C4=Symbol();function fz(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===C4?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var wp,mA,Zg,p8,Ope=(p8=class extends ok{constructor(){super();fr(this,wp);fr(this,mA);fr(this,Zg);Sn(this,Zg,t=>{if(!ck&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Ge(this,mA)||this.setEventListener(Ge(this,Zg))}onUnsubscribe(){var t;this.hasListeners()||((t=Ge(this,mA))==null||t.call(this),Sn(this,mA,void 0))}setEventListener(t){var n;Sn(this,Zg,t),(n=Ge(this,mA))==null||n.call(this),Sn(this,mA,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){Ge(this,wp)!==t&&(Sn(this,wp,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof Ge(this,wp)=="boolean"?Ge(this,wp):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},wp=new WeakMap,mA=new WeakMap,Zg=new WeakMap,p8),pz=new Ope,ev,gA,tv,m8,Qpe=(m8=class extends ok{constructor(){super();fr(this,ev,!0);fr(this,gA);fr(this,tv);Sn(this,tv,t=>{if(!ck&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Ge(this,gA)||this.setEventListener(Ge(this,tv))}onUnsubscribe(){var t;this.hasListeners()||((t=Ge(this,gA))==null||t.call(this),Sn(this,gA,void 0))}setEventListener(t){var n;Sn(this,tv,t),(n=Ge(this,gA))==null||n.call(this),Sn(this,gA,t(this.setOnline.bind(this)))}setOnline(t){Ge(this,ev)!==t&&(Sn(this,ev,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return Ge(this,ev)}},ev=new WeakMap,gA=new WeakMap,tv=new WeakMap,m8),TC=new Qpe;function Hpe(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}function $pe(e){return Math.min(1e3*2**e,3e4)}function mz(e){return(e??"online")==="online"?TC.isOnline():!0}var gz=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function HN(e){return e instanceof gz}function vz(e){let t=!1,n=0,r=!1,s;const i=Hpe(),o=g=>{var b;r||(A(new gz(g)),(b=e.abort)==null||b.call(e))},c=()=>{t=!0},l=()=>{t=!1},d=()=>pz.isFocused()&&(e.networkMode==="always"||TC.isOnline())&&e.canRun(),u=()=>mz(e.networkMode)&&e.canRun(),h=g=>{var b;r||(r=!0,(b=e.onSuccess)==null||b.call(e,g),s==null||s(),i.resolve(g))},A=g=>{var b;r||(r=!0,(b=e.onError)==null||b.call(e,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var b;s=y=>{(r||d())&&g(y)},(b=e.onPause)==null||b.call(e)}).then(()=>{var g;s=void 0,r||(g=e.onContinue)==null||g.call(e)}),m=()=>{if(r)return;let g;const b=n===0?e.initialPromise:void 0;try{g=b??e.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(h).catch(y=>{var _;if(r)return;const j=e.retry??(ck?0:3),x=e.retryDelay??$pe,C=typeof x=="function"?x(n,y):x,S=j===!0||typeof j=="number"&&n<j||typeof j=="function"&&j(n,y);if(t||!S){A(y);return}n++,(_=e.onFail)==null||_.call(e,n,y),Upe(C).then(()=>d()?void 0:f()).then(()=>{t?A(y):m()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:c,continueRetry:l,canStart:u,start:()=>(u()?m():f().then(m),i)}}var zpe=e=>setTimeout(e,0);function Vpe(){let e=[],t=0,n=c=>{c()},r=c=>{c()},s=zpe;const i=c=>{t?e.push(c):s(()=>{n(c)})},o=()=>{const c=e;e=[],c.length&&s(()=>{r(()=>{c.forEach(l=>{n(l)})})})};return{batch:c=>{let l;t++;try{l=c()}finally{t--,t||o()}return l},batchCalls:c=>(...l)=>{i(()=>{c(...l)})},schedule:i,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{s=c}}}var Ra=Vpe(),bp,g8,yz=(g8=class{constructor(){fr(this,bp)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Tpe(this.gcTime)&&Sn(this,bp,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ck?1/0:5*60*1e3))}clearGcTimeout(){Ge(this,bp)&&(clearTimeout(Ge(this,bp)),Sn(this,bp,void 0))}},bp=new WeakMap,g8),nv,Cp,gc,jp,aa,aw,kp,hl,Bu,v8,qpe=(v8=class extends yz{constructor(t){super();fr(this,hl);fr(this,nv);fr(this,Cp);fr(this,gc);fr(this,jp);fr(this,aa);fr(this,aw);fr(this,kp);Sn(this,kp,!1),Sn(this,aw,t.defaultOptions),this.setOptions(t.options),this.observers=[],Sn(this,jp,t.client),Sn(this,gc,Ge(this,jp).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Sn(this,nv,Wpe(this.options)),this.state=t.state??Ge(this,nv),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Ge(this,aa))==null?void 0:t.promise}setOptions(t){this.options={...Ge(this,aw),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Ge(this,gc).remove(this)}setData(t,n){const r=Lpe(this.state.data,t,this.options);return Zi(this,hl,Bu).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){Zi(this,hl,Bu).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=Ge(this,aa))==null?void 0:r.promise;return(s=Ge(this,aa))==null||s.cancel(t),n?n.then(ul).catch(ul):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ge(this,nv))}isActive(){return this.observers.some(t=>Dpe(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===C4||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>V5(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Fpe(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=Ge(this,aa))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=Ge(this,aa))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Ge(this,gc).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(Ge(this,aa)&&(Ge(this,kp)?Ge(this,aa).cancel({revert:!0}):Ge(this,aa).cancelRetry()),this.scheduleGc()),Ge(this,gc).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Zi(this,hl,Bu).call(this,{type:"invalidate"})}fetch(t,n){var d,u,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Ge(this,aa))return Ge(this,aa).continueRetry(),Ge(this,aa).promise}if(t&&this.setOptions(t),!this.options.queryFn){const A=this.observers.find(f=>f.options.queryFn);A&&this.setOptions(A.options)}const r=new AbortController,s=A=>{Object.defineProperty(A,"signal",{enumerable:!0,get:()=>(Sn(this,kp,!0),r.signal)})},i=()=>{const A=fz(this.options,n),m=(()=>{const g={client:Ge(this,jp),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return Sn(this,kp,!1),this.options.persister?this.options.persister(A,m,this):A(m)},c=(()=>{const A={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:Ge(this,jp),state:this.state,fetchFn:i};return s(A),A})();(d=this.options.behavior)==null||d.onFetch(c,this),Sn(this,Cp,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=c.fetchOptions)==null?void 0:u.meta))&&Zi(this,hl,Bu).call(this,{type:"fetch",meta:(h=c.fetchOptions)==null?void 0:h.meta});const l=A=>{var f,m,g,b;HN(A)&&A.silent||Zi(this,hl,Bu).call(this,{type:"error",error:A}),HN(A)||((m=(f=Ge(this,gc).config).onError)==null||m.call(f,A,this),(b=(g=Ge(this,gc).config).onSettled)==null||b.call(g,this.state.data,A,this)),this.scheduleGc()};return Sn(this,aa,vz({initialPromise:n==null?void 0:n.initialPromise,fn:c.fetchFn,abort:r.abort.bind(r),onSuccess:A=>{var f,m,g,b;if(A===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(A)}catch(y){l(y);return}(m=(f=Ge(this,gc).config).onSuccess)==null||m.call(f,A,this),(b=(g=Ge(this,gc).config).onSettled)==null||b.call(g,A,this.state.error,this),this.scheduleGc()},onError:l,onFail:(A,f)=>{Zi(this,hl,Bu).call(this,{type:"failed",failureCount:A,error:f})},onPause:()=>{Zi(this,hl,Bu).call(this,{type:"pause"})},onContinue:()=>{Zi(this,hl,Bu).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),Ge(this,aa).start()}},nv=new WeakMap,Cp=new WeakMap,gc=new WeakMap,jp=new WeakMap,aa=new WeakMap,aw=new WeakMap,kp=new WeakMap,hl=new WeakSet,Bu=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Kpe(r.data,this.options),fetchMeta:t.meta??null};case"success":return Sn(this,Cp,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return HN(s)&&s.revert&&Ge(this,Cp)?{...Ge(this,Cp),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Ra.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Ge(this,gc).notify({query:this,type:"updated",action:t})})},v8);function Kpe(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:mz(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Wpe(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var vd,y8,Gpe=(y8=class extends ok{constructor(t={}){super();fr(this,vd);this.config=t,Sn(this,vd,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??b4(s,n);let o=this.get(i);return o||(o=new qpe({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){Ge(this,vd).has(t.queryHash)||(Ge(this,vd).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=Ge(this,vd).get(t.queryHash);n&&(t.destroy(),n===t&&Ge(this,vd).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ra.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Ge(this,vd).get(t)}getAll(){return[...Ge(this,vd).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>MU(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>MU(t,r)):n}notify(t){Ra.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Ra.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ra.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},vd=new WeakMap,y8),yd,Ta,Sp,xd,tA,x8,Ype=(x8=class extends yz{constructor(t){super();fr(this,xd);fr(this,yd);fr(this,Ta);fr(this,Sp);this.mutationId=t.mutationId,Sn(this,Ta,t.mutationCache),Sn(this,yd,[]),this.state=t.state||Xpe(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Ge(this,yd).includes(t)||(Ge(this,yd).push(t),this.clearGcTimeout(),Ge(this,Ta).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Sn(this,yd,Ge(this,yd).filter(n=>n!==t)),this.scheduleGc(),Ge(this,Ta).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Ge(this,yd).length||(this.state.status==="pending"?this.scheduleGc():Ge(this,Ta).remove(this))}continue(){var t;return((t=Ge(this,Sp))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,c,l,d,u,h,A,f,m,g,b,y,j,x,C,S,_,N,L;const n=()=>{Zi(this,xd,tA).call(this,{type:"continue"})};Sn(this,Sp,vz({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(P,F)=>{Zi(this,xd,tA).call(this,{type:"failed",failureCount:P,error:F})},onPause:()=>{Zi(this,xd,tA).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ge(this,Ta).canRun(this)}));const r=this.state.status==="pending",s=!Ge(this,Sp).canStart();try{if(r)n();else{Zi(this,xd,tA).call(this,{type:"pending",variables:t,isPaused:s}),await((o=(i=Ge(this,Ta).config).onMutate)==null?void 0:o.call(i,t,this));const F=await((l=(c=this.options).onMutate)==null?void 0:l.call(c,t));F!==this.state.context&&Zi(this,xd,tA).call(this,{type:"pending",context:F,variables:t,isPaused:s})}const P=await Ge(this,Sp).start();return await((u=(d=Ge(this,Ta).config).onSuccess)==null?void 0:u.call(d,P,t,this.state.context,this)),await((A=(h=this.options).onSuccess)==null?void 0:A.call(h,P,t,this.state.context)),await((m=(f=Ge(this,Ta).config).onSettled)==null?void 0:m.call(f,P,null,this.state.variables,this.state.context,this)),await((b=(g=this.options).onSettled)==null?void 0:b.call(g,P,null,t,this.state.context)),Zi(this,xd,tA).call(this,{type:"success",data:P}),P}catch(P){try{throw await((j=(y=Ge(this,Ta).config).onError)==null?void 0:j.call(y,P,t,this.state.context,this)),await((C=(x=this.options).onError)==null?void 0:C.call(x,P,t,this.state.context)),await((_=(S=Ge(this,Ta).config).onSettled)==null?void 0:_.call(S,void 0,P,this.state.variables,this.state.context,this)),await((L=(N=this.options).onSettled)==null?void 0:L.call(N,void 0,P,t,this.state.context)),P}finally{Zi(this,xd,tA).call(this,{type:"error",error:P})}}finally{Ge(this,Ta).runNext(this)}}},yd=new WeakMap,Ta=new WeakMap,Sp=new WeakMap,xd=new WeakSet,tA=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Ra.batch(()=>{Ge(this,yd).forEach(r=>{r.onMutationUpdate(t)}),Ge(this,Ta).notify({mutation:this,type:"updated",action:t})})},x8);function Xpe(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Uu,Al,ow,w8,Jpe=(w8=class extends ok{constructor(t={}){super();fr(this,Uu);fr(this,Al);fr(this,ow);this.config=t,Sn(this,Uu,new Set),Sn(this,Al,new Map),Sn(this,ow,0)}build(t,n,r){const s=new Ype({mutationCache:this,mutationId:++Bb(this,ow)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){Ge(this,Uu).add(t);const n=Yb(t);if(typeof n=="string"){const r=Ge(this,Al).get(n);r?r.push(t):Ge(this,Al).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Ge(this,Uu).delete(t)){const n=Yb(t);if(typeof n=="string"){const r=Ge(this,Al).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&Ge(this,Al).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Yb(t);if(typeof n=="string"){const r=Ge(this,Al).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=Yb(t);if(typeof n=="string"){const s=(r=Ge(this,Al).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ra.batch(()=>{Ge(this,Uu).forEach(t=>{this.notify({type:"removed",mutation:t})}),Ge(this,Uu).clear(),Ge(this,Al).clear()})}getAll(){return Array.from(Ge(this,Uu))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>RU(n,r))}findAll(t={}){return this.getAll().filter(n=>RU(t,n))}notify(t){Ra.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Ra.batch(()=>Promise.all(t.map(n=>n.continue().catch(ul))))}},Uu=new WeakMap,Al=new WeakMap,ow=new WeakMap,w8);function Yb(e){var t;return(t=e.options.scope)==null?void 0:t.id}function HU(e){return{onFetch:(t,n)=>{var u,h,A,f,m;const r=t.options,s=(A=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:A.direction,i=((f=t.state.data)==null?void 0:f.pages)||[],o=((m=t.state.data)==null?void 0:m.pageParams)||[];let c={pages:[],pageParams:[]},l=0;const d=async()=>{let g=!1;const b=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},y=fz(t.options,t.fetchOptions),j=async(x,C,S)=>{if(g)return Promise.reject();if(C==null&&x.pages.length)return Promise.resolve(x);const N=(()=>{const I={client:t.client,queryKey:t.queryKey,pageParam:C,direction:S?"backward":"forward",meta:t.options.meta};return b(I),I})(),L=await y(N),{maxPages:P}=t.options,F=S?Rpe:Mpe;return{pages:F(x.pages,L,P),pageParams:F(x.pageParams,C,P)}};if(s&&i.length){const x=s==="backward",C=x?Zpe:$U,S={pages:i,pageParams:o},_=C(r,S);c=await j(S,_,x)}else{const x=e??i.length;do{const C=l===0?o[0]??r.initialPageParam:$U(r,c);if(l>0&&C==null)break;c=await j(c,C),l++}while(l<x)}return c};t.options.persister?t.fetchFn=()=>{var g,b;return(b=(g=t.options).persister)==null?void 0:b.call(g,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function $U(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function Zpe(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Is,vA,yA,rv,sv,xA,iv,av,b8,eme=(b8=class{constructor(e={}){fr(this,Is);fr(this,vA);fr(this,yA);fr(this,rv);fr(this,sv);fr(this,xA);fr(this,iv);fr(this,av);Sn(this,Is,e.queryCache||new Gpe),Sn(this,vA,e.mutationCache||new Jpe),Sn(this,yA,e.defaultOptions||{}),Sn(this,rv,new Map),Sn(this,sv,new Map),Sn(this,xA,0)}mount(){Bb(this,xA)._++,Ge(this,xA)===1&&(Sn(this,iv,pz.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ge(this,Is).onFocus())})),Sn(this,av,TC.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ge(this,Is).onOnline())})))}unmount(){var e,t;Bb(this,xA)._--,Ge(this,xA)===0&&((e=Ge(this,iv))==null||e.call(this),Sn(this,iv,void 0),(t=Ge(this,av))==null||t.call(this),Sn(this,av,void 0))}isFetching(e){return Ge(this,Is).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Ge(this,vA).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Ge(this,Is).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=Ge(this,Is).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(V5(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return Ge(this,Is).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=Ge(this,Is).get(r.queryHash),i=s==null?void 0:s.state.data,o=Ppe(t,i);if(o!==void 0)return Ge(this,Is).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Ra.batch(()=>Ge(this,Is).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Ge(this,Is).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=Ge(this,Is);Ra.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=Ge(this,Is);return Ra.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Ra.batch(()=>Ge(this,Is).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(ul).catch(ul)}invalidateQueries(e,t={}){return Ra.batch(()=>(Ge(this,Is).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Ra.batch(()=>Ge(this,Is).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(ul)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(ul)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=Ge(this,Is).build(this,t);return n.isStaleByTime(V5(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ul).catch(ul)}fetchInfiniteQuery(e){return e.behavior=HU(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ul).catch(ul)}ensureInfiniteQueryData(e){return e.behavior=HU(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return TC.isOnline()?Ge(this,vA).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ge(this,Is)}getMutationCache(){return Ge(this,vA)}getDefaultOptions(){return Ge(this,yA)}setDefaultOptions(e){Sn(this,yA,e)}setQueryDefaults(e,t){Ge(this,rv).set(jx(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Ge(this,rv).values()],n={};return t.forEach(r=>{kx(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){Ge(this,sv).set(jx(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Ge(this,sv).values()],n={};return t.forEach(r=>{kx(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Ge(this,yA).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=b4(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===C4&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Ge(this,yA).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Ge(this,Is).clear(),Ge(this,vA).clear()}},Is=new WeakMap,vA=new WeakMap,yA=new WeakMap,rv=new WeakMap,sv=new WeakMap,xA=new WeakMap,iv=new WeakMap,av=new WeakMap,b8),tme=w.createContext(void 0),nme=({client:e,children:t})=>(w.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(tme.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sx(){return Sx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sx.apply(this,arguments)}var jA;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(jA||(jA={}));const zU="popstate";function rme(e){e===void 0&&(e={});function t(r,s){let{pathname:i,search:o,hash:c}=r.location;return K5("",{pathname:i,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:FC(s)}return ime(t,n,null,e)}function Ys(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function xz(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function sme(){return Math.random().toString(36).substr(2,8)}function VU(e,t){return{usr:e.state,key:e.key,idx:t}}function K5(e,t,n,r){return n===void 0&&(n=null),Sx({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?zv(t):t,{state:n,key:t&&t.key||r||sme()})}function FC(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function zv(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function ime(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,c=jA.Pop,l=null,d=u();d==null&&(d=0,o.replaceState(Sx({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function h(){c=jA.Pop;let b=u(),y=b==null?null:b-d;d=b,l&&l({action:c,location:g.location,delta:y})}function A(b,y){c=jA.Push;let j=K5(g.location,b,y);d=u()+1;let x=VU(j,d),C=g.createHref(j);try{o.pushState(x,"",C)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(C)}i&&l&&l({action:c,location:g.location,delta:1})}function f(b,y){c=jA.Replace;let j=K5(g.location,b,y);d=u();let x=VU(j,d),C=g.createHref(j);o.replaceState(x,"",C),i&&l&&l({action:c,location:g.location,delta:0})}function m(b){let y=s.location.origin!=="null"?s.location.origin:s.location.href,j=typeof b=="string"?b:FC(b);return j=j.replace(/ $/,"%20"),Ys(y,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,y)}let g={get action(){return c},get location(){return e(s,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(zU,h),l=b,()=>{s.removeEventListener(zU,h),l=null}},createHref(b){return t(s,b)},createURL:m,encodeLocation(b){let y=m(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:A,replace:f,go(b){return o.go(b)}};return g}var qU;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(qU||(qU={}));function ame(e,t,n){return n===void 0&&(n="/"),ome(e,t,n,!1)}function ome(e,t,n,r){let s=typeof t=="string"?zv(t):t,i=j4(s.pathname||"/",n);if(i==null)return null;let o=wz(e);cme(o);let c=null;for(let l=0;c==null&&l<o.length;++l){let d=yme(i);c=gme(o[l],d,r)}return c}function wz(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,c)=>{let l={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Ys(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let d=RA([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(Ys(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),wz(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:pme(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,o);else for(let l of bz(i.path))s(i,o,l)}),t}function bz(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=bz(r.join("/")),c=[];return c.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&c.push(...o),c.map(l=>e.startsWith("/")&&l===""?"/":l)}function cme(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:mme(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const lme=/^:[\w-]+$/,dme=3,ume=2,hme=1,Ame=10,fme=-2,KU=e=>e==="*";function pme(e,t){let n=e.split("/"),r=n.length;return n.some(KU)&&(r+=fme),t&&(r+=ume),n.filter(s=>!KU(s)).reduce((s,i)=>s+(lme.test(i)?dme:i===""?hme:Ame),r)}function mme(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function gme(e,t,n){let{routesMeta:r}=e,s={},i="/",o=[];for(let c=0;c<r.length;++c){let l=r[c],d=c===r.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=WU({path:l.relativePath,caseSensitive:l.caseSensitive,end:d},u),A=l.route;if(!h&&d&&n&&!r[r.length-1].route.index&&(h=WU({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:RA([i,h.pathname]),pathnameBase:Cme(RA([i,h.pathnameBase])),route:A}),h.pathnameBase!=="/"&&(i=RA([i,h.pathnameBase]))}return o}function WU(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=vme(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,u,h)=>{let{paramName:A,isOptional:f}=u;if(A==="*"){let g=c[h]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const m=c[h];return f&&!m?d[A]=void 0:d[A]=(m||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function vme(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),xz(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,l)=>(r.push({paramName:c,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function yme(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return xz(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function j4(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function xme(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?zv(e):e;return{pathname:n?n.startsWith("/")?n:wme(n,t):t,search:jme(r),hash:kme(s)}}function wme(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function $N(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bme(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function k4(e,t){let n=bme(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function S4(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=zv(e):(s=Sx({},e),Ys(!s.pathname||!s.pathname.includes("?"),$N("?","pathname","search",s)),Ys(!s.pathname||!s.pathname.includes("#"),$N("#","pathname","hash",s)),Ys(!s.search||!s.search.includes("#"),$N("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,c;if(o==null)c=n;else{let h=t.length-1;if(!r&&o.startsWith("..")){let A=o.split("/");for(;A[0]==="..";)A.shift(),h-=1;s.pathname=A.join("/")}c=h>=0?t[h]:"/"}let l=xme(s,c),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(d||u)&&(l.pathname+="/"),l}const RA=e=>e.join("/").replace(/\/\/+/g,"/"),Cme=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),jme=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,kme=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Sme(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Cz=["post","put","patch","delete"];new Set(Cz);const Nme=["get",...Cz];new Set(Nme);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nx(){return Nx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nx.apply(this,arguments)}const N4=w.createContext(null),Bme=w.createContext(null),of=w.createContext(null),lk=w.createContext(null),ih=w.createContext({outlet:null,matches:[],isDataRoute:!1}),jz=w.createContext(null);function Eme(e,t){let{relative:n}=t===void 0?{}:t;Vv()||Ys(!1);let{basename:r,navigator:s}=w.useContext(of),{hash:i,pathname:o,search:c}=Sz(e,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:RA([r,o])),s.createHref({pathname:l,search:c,hash:i})}function Vv(){return w.useContext(lk)!=null}function ah(){return Vv()||Ys(!1),w.useContext(lk).location}function kz(e){w.useContext(of).static||w.useLayoutEffect(e)}function Vi(){let{isDataRoute:e}=w.useContext(ih);return e?Hme():_me()}function _me(){Vv()||Ys(!1);let e=w.useContext(N4),{basename:t,future:n,navigator:r}=w.useContext(of),{matches:s}=w.useContext(ih),{pathname:i}=ah(),o=JSON.stringify(k4(s,n.v7_relativeSplatPath)),c=w.useRef(!1);return kz(()=>{c.current=!0}),w.useCallback(function(d,u){if(u===void 0&&(u={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let h=S4(d,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:RA([t,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[t,r,o,i,e])}function vw(){let{matches:e}=w.useContext(ih),t=e[e.length-1];return t?t.params:{}}function Sz(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=w.useContext(of),{matches:s}=w.useContext(ih),{pathname:i}=ah(),o=JSON.stringify(k4(s,r.v7_relativeSplatPath));return w.useMemo(()=>S4(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function Ime(e,t){return Pme(e,t)}function Pme(e,t,n,r){Vv()||Ys(!1);let{navigator:s}=w.useContext(of),{matches:i}=w.useContext(ih),o=i[i.length-1],c=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let d=ah(),u;if(t){var h;let b=typeof t=="string"?zv(t):t;l==="/"||(h=b.pathname)!=null&&h.startsWith(l)||Ys(!1),u=b}else u=d;let A=u.pathname||"/",f=A;if(l!=="/"){let b=l.replace(/^\//,"").split("/");f="/"+A.replace(/^\//,"").split("/").slice(b.length).join("/")}let m=ame(e,{pathname:f}),g=Lme(m&&m.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:RA([l,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:RA([l,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,r);return t&&g?w.createElement(lk.Provider,{value:{location:Nx({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:jA.Pop}},g):g}function Tme(){let e=Qme(),t=Sme(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),n?w.createElement("pre",{style:s},n):null,null)}const Fme=w.createElement(Tme,null);class Dme extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?w.createElement(ih.Provider,{value:this.props.routeContext},w.createElement(jz.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ume(e){let{routeContext:t,match:n,children:r}=e,s=w.useContext(N4);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(ih.Provider,{value:t},r)}function Lme(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,c=(s=n)==null?void 0:s.errors;if(c!=null){let u=o.findIndex(h=>h.route.id&&(c==null?void 0:c[h.route.id])!==void 0);u>=0||Ys(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:A,errors:f}=n,m=h.route.loader&&A[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||m){l=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,h,A)=>{let f,m=!1,g=null,b=null;n&&(f=c&&h.route.id?c[h.route.id]:void 0,g=h.route.errorElement||Fme,l&&(d<0&&A===0?(m=!0,b=null):d===A&&(m=!0,b=h.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,A+1)),j=()=>{let x;return f?x=g:m?x=b:h.route.Component?x=w.createElement(h.route.Component,null):h.route.element?x=h.route.element:x=u,w.createElement(Ume,{match:h,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:x})};return n&&(h.route.ErrorBoundary||h.route.errorElement||A===0)?w.createElement(Dme,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:j(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):j()},null)}var Nz=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Nz||{}),DC=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(DC||{});function Mme(e){let t=w.useContext(N4);return t||Ys(!1),t}function Rme(e){let t=w.useContext(Bme);return t||Ys(!1),t}function Ome(e){let t=w.useContext(ih);return t||Ys(!1),t}function Bz(e){let t=Ome(),n=t.matches[t.matches.length-1];return n.route.id||Ys(!1),n.route.id}function Qme(){var e;let t=w.useContext(jz),n=Rme(DC.UseRouteError),r=Bz(DC.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Hme(){let{router:e}=Mme(Nz.UseNavigateStable),t=Bz(DC.UseNavigateStable),n=w.useRef(!1);return kz(()=>{n.current=!0}),w.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Nx({fromRouteId:t},i)))},[e,t])}function $me(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ez(e){let{to:t,replace:n,state:r,relative:s}=e;Vv()||Ys(!1);let{future:i,static:o}=w.useContext(of),{matches:c}=w.useContext(ih),{pathname:l}=ah(),d=Vi(),u=S4(t,k4(c,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(u);return w.useEffect(()=>d(JSON.parse(h),{replace:n,state:r,relative:s}),[d,h,s,n,r]),null}function Hs(e){Ys(!1)}function zme(e){let{basename:t="/",children:n=null,location:r,navigationType:s=jA.Pop,navigator:i,static:o=!1,future:c}=e;Vv()&&Ys(!1);let l=t.replace(/^\/*/,"/"),d=w.useMemo(()=>({basename:l,navigator:i,static:o,future:Nx({v7_relativeSplatPath:!1},c)}),[l,c,i,o]);typeof r=="string"&&(r=zv(r));let{pathname:u="/",search:h="",hash:A="",state:f=null,key:m="default"}=r,g=w.useMemo(()=>{let b=j4(u,l);return b==null?null:{location:{pathname:b,search:h,hash:A,state:f,key:m},navigationType:s}},[l,u,h,A,f,m,s]);return g==null?null:w.createElement(of.Provider,{value:d},w.createElement(lk.Provider,{children:n,value:g}))}function Vme(e){let{children:t,location:n}=e;return Ime(W5(t),n)}new Promise(()=>{});function W5(e,t){t===void 0&&(t=[]);let n=[];return w.Children.forEach(e,(r,s)=>{if(!w.isValidElement(r))return;let i=[...t,s];if(r.type===w.Fragment){n.push.apply(n,W5(r.props.children,i));return}r.type!==Hs&&Ys(!1),!r.props.index||!r.props.children||Ys(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=W5(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function G5(){return G5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G5.apply(this,arguments)}function qme(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Kme(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Wme(e,t){return e.button===0&&(!t||t==="_self")&&!Kme(e)}function Y5(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function Gme(e,t){let n=Y5(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(i=>{n.append(s,i)})}),n}const Yme=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Xme="6";try{window.__reactRouterVersion=Xme}catch{}const Jme="startTransition",GU=nP[Jme];function Zme(e){let{basename:t,children:n,future:r,window:s}=e,i=w.useRef();i.current==null&&(i.current=rme({window:s,v5Compat:!0}));let o=i.current,[c,l]=w.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},u=w.useCallback(h=>{d&&GU?GU(()=>l(h)):l(h)},[l,d]);return w.useLayoutEffect(()=>o.listen(u),[o,u]),w.useEffect(()=>$me(r),[r]),w.createElement(zme,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const ege=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tge=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fa=w.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:c,target:l,to:d,preventScrollReset:u,viewTransition:h}=t,A=qme(t,Yme),{basename:f}=w.useContext(of),m,g=!1;if(typeof d=="string"&&tge.test(d)&&(m=d,ege))try{let x=new URL(window.location.href),C=d.startsWith("//")?new URL(x.protocol+d):new URL(d),S=j4(C.pathname,f);C.origin===x.origin&&S!=null?d=S+C.search+C.hash:g=!0}catch{}let b=Eme(d,{relative:s}),y=nge(d,{replace:o,state:c,target:l,preventScrollReset:u,relative:s,viewTransition:h});function j(x){r&&r(x),x.defaultPrevented||y(x)}return w.createElement("a",G5({},A,{href:m||b,onClick:g||i?r:j,ref:n,target:l}))});var YU;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(YU||(YU={}));var XU;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(XU||(XU={}));function nge(e,t){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:c}=t===void 0?{}:t,l=Vi(),d=ah(),u=Sz(e,{relative:o});return w.useCallback(h=>{if(Wme(h,n)){h.preventDefault();let A=r!==void 0?r:FC(d)===FC(u);l(e,{replace:A,state:s,preventScrollReset:i,relative:o,viewTransition:c})}},[d,l,u,r,s,n,e,i,o,c])}function qv(e){let t=w.useRef(Y5(e)),n=w.useRef(!1),r=ah(),s=w.useMemo(()=>Gme(r.search,n.current?null:t.current),[r.search]),i=Vi(),o=w.useCallback((c,l)=>{const d=Y5(typeof c=="function"?c(s):c);n.current=!0,i("?"+d,l)},[i,s]);return[s,o]}const JU=e=>{let t;const n=new Set,r=(d,u)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const A=t;t=u??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(f=>f(t,A))}},s=()=>t,c={setState:r,getState:s,getInitialState:()=>l,subscribe:d=>(n.add(d),()=>n.delete(d))},l=t=e(r,s,c);return c},rge=e=>e?JU(e):JU,sge=e=>e;function ige(e,t=sge){const n=nt.useSyncExternalStore(e.subscribe,nt.useCallback(()=>t(e.getState()),[e,t]),nt.useCallback(()=>t(e.getInitialState()),[e,t]));return nt.useDebugValue(n),n}const ZU=e=>{const t=rge(e),n=r=>ige(t,r);return Object.assign(n,t),n},cf=e=>e?ZU(e):ZU,age="modulepreload",oge=function(e){return"/framepromptly-v4/"+e},eL={},Td=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=oge(l),l in eL)return;eL[l]=!0;const d=l.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":age,d||(h.as="script"),h.crossOrigin="",h.href=l,c&&h.setAttribute("nonce",c),document.head.appendChild(h),d)return new Promise((A,f)=>{h.addEventListener("load",A),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return t().catch(i)})},cge=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Td(async()=>{const{default:r}=await Promise.resolve().then(()=>Kv);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class B4 extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class lge extends B4{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class tL extends B4{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class nL extends B4{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var X5;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(X5||(X5={}));var dge=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function c(u){try{d(r.next(u))}catch(h){o(h)}}function l(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):s(u.value).then(c,l)}d((r=r.apply(e,t||[])).next())})};class uge{constructor(t,{headers:n={},customFetch:r,region:s=X5.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=cge(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return dge(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let c={},{region:l}=n;l||(l=this.region);const d=new URL(`${this.url}/${t}`);l&&l!=="any"&&(c["x-region"]=l,d.searchParams.set("forceFunctionRegion",l));let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(c["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(c["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:u}).catch(g=>{throw new lge(g)}),A=h.headers.get("x-relay-error");if(A&&A==="true")throw new tL(h);if(!h.ok)throw new nL(h);let f=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),m;return f==="application/json"?m=yield h.json():f==="application/octet-stream"?m=yield h.blob():f==="text/event-stream"?m=h:f==="multipart/form-data"?m=yield h.formData():m=yield h.text(),{data:m,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof nL||s instanceof tL?s.context:void 0}}})}}var lo={},E4={},dk={},yw={},uk={},hk={},hge=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},gv=hge();const Age=gv.fetch,_z=gv.fetch.bind(gv),Iz=gv.Headers,fge=gv.Request,pge=gv.Response,Kv=Object.freeze(Object.defineProperty({__proto__:null,Headers:Iz,Request:fge,Response:pge,default:_z,fetch:Age},Symbol.toStringTag,{value:"Module"})),mge=Uae(Kv);var Ak={};Object.defineProperty(Ak,"__esModule",{value:!0});let gge=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Ak.default=gge;var Pz=Oi&&Oi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hk,"__esModule",{value:!0});const vge=Pz(mge),yge=Pz(Ak);let xge=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=vge.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,c,l;let d=null,u=null,h=null,A=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),b=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");g&&b&&b.length>1&&(h=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,A=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await i.text();try{d=JSON.parse(g),Array.isArray(d)&&i.status===404&&(u=[],d=null,A=200,f="OK")}catch{i.status===404&&g===""?(A=204,f="No Content"):d={message:g}}if(d&&this.isMaybeSingle&&(!((l=d==null?void 0:d.details)===null||l===void 0)&&l.includes("0 rows"))&&(d=null,A=200,f="OK"),d&&this.shouldThrowOnError)throw new yge.default(d)}return{error:d,data:u,count:h,status:A,statusText:f}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,c,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(c=i==null?void 0:i.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};hk.default=xge;var wge=Oi&&Oi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(uk,"__esModule",{value:!0});const bge=wge(hk);let Cge=class extends bge.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",c=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${c?`${c},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var c;const l=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${d}"; options=${l};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};uk.default=Cge;var jge=Oi&&Oi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yw,"__esModule",{value:!0});const kge=jge(uk);let Sge=class extends kge.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};yw.default=Sge;var Nge=Oi&&Oi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dk,"__esModule",{value:!0});const Qy=Nge(yw);let Bge=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=n,this.schema=r,this.fetch=s}select(t,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(c=>/\s/.test(c)&&!i?"":(c==='"'&&(i=!i),c)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Qy.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((c,l)=>c.concat(Object.keys(l)),[]);if(o.length>0){const c=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",c.join(","))}}return new Qy.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",c=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&c.push(this.headers.Prefer),s&&c.push(`count=${s}`),i||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(t)){const l=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(l.length>0){const d=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Qy.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Qy.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Qy.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};dk.default=Bge;var fk={},pk={};Object.defineProperty(pk,"__esModule",{value:!0});pk.version=void 0;pk.version="0.0.0-automated";Object.defineProperty(fk,"__esModule",{value:!0});fk.DEFAULT_HEADERS=void 0;const Ege=pk;fk.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Ege.version}`};var Tz=Oi&&Oi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(E4,"__esModule",{value:!0});const _ge=Tz(dk),Ige=Tz(yw),Pge=fk;let Tge=class Fz{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},Pge.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new _ge.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Fz(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const c=new URL(`${this.url}/rpc/${t}`);let l;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{c.searchParams.append(u,h)})):(o="POST",l=n);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new Ige.default({method:o,url:c,headers:d,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};E4.default=Tge;var Wv=Oi&&Oi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lo,"__esModule",{value:!0});lo.PostgrestError=lo.PostgrestBuilder=lo.PostgrestTransformBuilder=lo.PostgrestFilterBuilder=lo.PostgrestQueryBuilder=lo.PostgrestClient=void 0;const Dz=Wv(E4);lo.PostgrestClient=Dz.default;const Uz=Wv(dk);lo.PostgrestQueryBuilder=Uz.default;const Lz=Wv(yw);lo.PostgrestFilterBuilder=Lz.default;const Mz=Wv(uk);lo.PostgrestTransformBuilder=Mz.default;const Rz=Wv(hk);lo.PostgrestBuilder=Rz.default;const Oz=Wv(Ak);lo.PostgrestError=Oz.default;var Fge=lo.default={PostgrestClient:Dz.default,PostgrestQueryBuilder:Uz.default,PostgrestFilterBuilder:Lz.default,PostgrestTransformBuilder:Mz.default,PostgrestBuilder:Rz.default,PostgrestError:Oz.default};const{PostgrestClient:Dge,PostgrestQueryBuilder:YVe,PostgrestFilterBuilder:XVe,PostgrestTransformBuilder:JVe,PostgrestBuilder:ZVe,PostgrestError:eqe}=Fge;class Uge{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Lge="2.15.1",Mge=`realtime-js/${Lge}`,Rge="1.0.0",J5=1e4,Oge=1e3,Qge=100;var U0;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(U0||(U0={}));var fi;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(fi||(fi={}));var pl;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(pl||(pl={}));var Z5;(function(e){e.websocket="websocket"})(Z5||(Z5={}));var sp;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(sp||(sp={}));class Hge{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const c=r.decode(t.slice(o,o+s));o=o+s;const l=r.decode(t.slice(o,o+i));o=o+i;const d=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:c,event:l,payload:d}}}let Qz=class{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Rr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Rr||(Rr={}));const rL=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,o)=>(i[o]=$ge(o,e,t,s),i),{})},$ge=(e,t,n,r)=>{const s=t.find(c=>c.name===e),i=s==null?void 0:s.type,o=n[e];return i&&!r.includes(i)?Hz(i,o):e_(o)},Hz=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return Kge(t,n)}switch(e){case Rr.bool:return zge(t);case Rr.float4:case Rr.float8:case Rr.int2:case Rr.int4:case Rr.int8:case Rr.numeric:case Rr.oid:return Vge(t);case Rr.json:case Rr.jsonb:return qge(t);case Rr.timestamp:return Wge(t);case Rr.abstime:case Rr.date:case Rr.daterange:case Rr.int4range:case Rr.int8range:case Rr.money:case Rr.reltime:case Rr.text:case Rr.time:case Rr.timestamptz:case Rr.timetz:case Rr.tsrange:case Rr.tstzrange:return e_(t);default:return e_(t)}},e_=e=>e,zge=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Vge=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},qge=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Kge=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(c=>Hz(t,c))}return e},Wge=e=>typeof e=="string"?e.replace(" ","T"):e,$z=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class zN{constructor(t,n,r={},s=J5){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var sL;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(sL||(sL={}));class L0{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=L0.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=L0.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=L0.syncDiff(this.state,s,i,o),c())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),o=this.transformState(n),c={},l={};return this.map(i,(d,u)=>{o[d]||(l[d]=u)}),this.map(o,(d,u)=>{const h=i[d];if(h){const A=u.map(b=>b.presence_ref),f=h.map(b=>b.presence_ref),m=u.filter(b=>f.indexOf(b.presence_ref)<0),g=h.filter(b=>A.indexOf(b.presence_ref)<0);m.length>0&&(c[d]=m),g.length>0&&(l[d]=g)}else c[d]=u}),this.syncDiff(i,{joins:c,leaves:l},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(c,l)=>{var d;const u=(d=t[c])!==null&&d!==void 0?d:[];if(t[c]=this.cloneDeep(l),u.length>0){const h=t[c].map(f=>f.presence_ref),A=u.filter(f=>h.indexOf(f.presence_ref)<0);t[c].unshift(...A)}r(c,u,l)}),this.map(o,(c,l)=>{let d=t[c];if(!d)return;const u=l.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),t[c]=d,s(c,d,l),d.length===0&&delete t[c]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var iL;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(iL||(iL={}));var M0;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(M0||(M0={}));var Iu;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Iu||(Iu={}));class _4{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=fi.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new zN(this,pl.join,this.params,this.timeout),this.rejoinTimer=new Qz(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=fi.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=fi.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=fi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=fi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=fi.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pl.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new L0(this),this.broadcastEndpointURL=$z(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==fi.closed){const{config:{broadcast:i,presence:o,private:c}}=this.params,l=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(A=>A.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[M0.PRESENCE]&&this.bindings[M0.PRESENCE].length>0,u={},h={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:l,private:c};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(A=>t==null?void 0:t(Iu.CHANNEL_ERROR,A)),this._onClose(()=>t==null?void 0:t(Iu.CLOSED)),this.updateJoinPayload(Object.assign({config:h},u)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:A})=>{var f;if(this.socket.setAuth(),A===void 0){t==null||t(Iu.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,g=(f=m==null?void 0:m.length)!==null&&f!==void 0?f:0,b=[];for(let y=0;y<g;y++){const j=m[y],{filter:{event:x,schema:C,table:S,filter:_}}=j,N=A&&A[y];if(N&&N.event===x&&N.schema===C&&N.table===S&&N.filter===_)b.push(Object.assign(Object.assign({},j),{id:N.id}));else{this.unsubscribe(),this.state=fi.errored,t==null||t(Iu.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(Iu.SUBSCRIBED);return}}).receive("error",A=>{this.state=fi.errored,t==null||t(Iu.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(A).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Iu.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===fi.joined&&t===M0.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,c,l;const d=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(c=(o=this.params)===null||o===void 0?void 0:o.config)===null||c===void 0?void 0:c.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=fi.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pl.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new zN(this,pl.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=fi.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new zN(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Qge){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const o=t.toLocaleLowerCase(),{close:c,error:l,leave:d,join:u}=pl;if(r&&[c,l,d,u].indexOf(o)>=0&&r!==this._joinRef())return;let A=this._onMessage(o,n,r);if(n&&!A)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var m,g,b;return((m=f.filter)===null||m===void 0?void 0:m.event)==="*"||((b=(g=f.filter)===null||g===void 0?void 0:g.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(f=>f.callback(A,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var m,g,b,y,j,x;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const C=f.id,S=(m=f.filter)===null||m===void 0?void 0:m.event;return C&&((g=n.ids)===null||g===void 0?void 0:g.includes(C))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const C=(j=(y=f==null?void 0:f.filter)===null||y===void 0?void 0:y.event)===null||j===void 0?void 0:j.toLocaleLowerCase();return C==="*"||C===((x=n==null?void 0:n.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof A=="object"&&"ids"in A){const m=A.data,{schema:g,table:b,commit_timestamp:y,type:j,errors:x}=m;A=Object.assign(Object.assign({},{schema:g,table:b,commit_timestamp:y,eventType:j,new:{},old:{},errors:x}),this._getPayloadRecords(m))}f.callback(A,r)})}_isClosed(){return this.state===fi.closed}_isJoined(){return this.state===fi.joined}_isJoining(){return this.state===fi.joining}_isLeaving(){return this.state===fi.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&_4.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(pl.close,{},t)}_onError(t){this._on(pl.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=fi.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=rL(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=rL(t.columns,t.old_record)),n}}const aL=()=>{},Xb={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Gge=[1e3,2e3,5e3,1e4],Yge=1e4,Xge=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Jge{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=J5,this.transport=null,this.heartbeatIntervalMs=Xb.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=aL,this.ref=0,this.reconnectTimer=null,this.logger=aL,this.conn=null,this.sendBuffer=[],this.serializer=new Hge,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>Td(async()=>{const{default:c}=await Promise.resolve().then(()=>Kv);return{default:c}},void 0).then(({default:c})=>c(...o)).catch(c=>{throw new Error(`Failed to load @supabase/node-fetch: ${c.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Z5.websocket}`,this.httpEndpoint=$z(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Uge.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Rge}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case U0.connecting:return sp.Connecting;case U0.open:return sp.Open;case U0.closing:return sp.Closing;default:return sp.Closed}}isConnected(){return this.connectionState()===sp.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new _4(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,o=()=>{this.encode(t,c=>{var l;(l=this.conn)===null||l===void 0||l.send(c)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Oge,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Xb.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,c=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${c}`.trim(),i),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(pl.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([Xge],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:Mge};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(pl.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Qz(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Xb.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,o,c,l,d;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:J5,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Xb.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:u=>Gge[u-1]||Yge,this.encode=(l=t==null?void 0:t.encode)!==null&&l!==void 0?l:(u,h)=>h(JSON.stringify(u)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class I4 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function pi(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Zge extends I4{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class t_ extends I4{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var eve=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function c(u){try{d(r.next(u))}catch(h){o(h)}}function l(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):s(u.value).then(c,l)}d((r=r.apply(e,t||[])).next())})};const zz=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Td(async()=>{const{default:r}=await Promise.resolve().then(()=>Kv);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},tve=()=>eve(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Td(()=>Promise.resolve().then(()=>Kv),void 0)).Response:Response}),n_=e=>{if(Array.isArray(e))return e.map(n=>n_(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=n_(r)}),t},nve=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Am=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function c(u){try{d(r.next(u))}catch(h){o(h)}}function l(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):s(u.value).then(c,l)}d((r=r.apply(e,t||[])).next())})};const VN=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),rve=(e,t,n)=>Am(void 0,void 0,void 0,function*(){const r=yield tve();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new Zge(VN(s),i,o))}).catch(s=>{t(new t_(VN(s),s))}):t(new t_(VN(e),e))}),sve=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(nve(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function xw(e,t,n,r,s,i){return Am(this,void 0,void 0,function*(){return new Promise((o,c)=>{e(n,sve(t,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>rve(l,c,r))})})}function UC(e,t,n,r){return Am(this,void 0,void 0,function*(){return xw(e,"GET",t,n,r)})}function md(e,t,n,r,s){return Am(this,void 0,void 0,function*(){return xw(e,"POST",t,r,s,n)})}function r_(e,t,n,r,s){return Am(this,void 0,void 0,function*(){return xw(e,"PUT",t,r,s,n)})}function ive(e,t,n,r){return Am(this,void 0,void 0,function*(){return xw(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Vz(e,t,n,r,s){return Am(this,void 0,void 0,function*(){return xw(e,"DELETE",t,r,s,n)})}var Pa=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function c(u){try{d(r.next(u))}catch(h){o(h)}}function l(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):s(u.value).then(c,l)}d((r=r.apply(e,t||[])).next())})};const ave={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},oL={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ove{constructor(t,n={},r,s){this.url=t,this.headers=n,this.bucketId=r,this.fetch=zz(s)}uploadOrUpdate(t,n,r,s){return Pa(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},oL),s);let c=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,c["cache-control"]=`max-age=${o.cacheControl}`,c["content-type"]=o.contentType,l&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(c=Object.assign(Object.assign({},c),s.headers));const d=this._removeEmptyFolders(n),u=this._getFinalPath(d),h=yield(t=="PUT"?r_:md)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:c},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(pi(i))return{data:null,error:i};throw i}})}upload(t,n,r){return Pa(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return Pa(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),c=new URL(this.url+`/object/upload/sign/${o}`);c.searchParams.set("token",n);try{let l;const d=Object.assign({upsert:oL.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",d.cacheControl)):(l=r,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield r_(this.fetch,c.toString(),l,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(l){if(pi(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,n){return Pa(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield md(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),c=o.searchParams.get("token");if(!c)throw new I4("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:c},error:null}}catch(r){if(pi(r))return{data:null,error:r};throw r}})}update(t,n,r){return Pa(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Pa(this,void 0,void 0,function*(){try{return{data:yield md(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(pi(s))return{data:null,error:s};throw s}})}copy(t,n,r){return Pa(this,void 0,void 0,function*(){try{return{data:{path:(yield md(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(pi(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return Pa(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield md(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(pi(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return Pa(this,void 0,void 0,function*(){try{const s=yield md(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(pi(s))return{data:null,error:s};throw s}})}download(t,n){return Pa(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const c=this._getFinalPath(t);return{data:yield(yield UC(this.fetch,`${this.url}/${s}/${c}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(pi(c))return{data:null,error:c};throw c}})}info(t){return Pa(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield UC(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:n_(r),error:null}}catch(r){if(pi(r))return{data:null,error:r};throw r}})}exists(t){return Pa(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield ive(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(pi(r)&&r instanceof t_){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const c=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${d}`)}}}remove(t){return Pa(this,void 0,void 0,function*(){try{return{data:yield Vz(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(pi(n))return{data:null,error:n};throw n}})}list(t,n,r){return Pa(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},ave),n),{prefix:t||""});return{data:yield md(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(pi(s))return{data:null,error:s};throw s}})}listV2(t,n){return Pa(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield md(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(pi(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const cve="2.11.0",lve={"X-Client-Info":`storage-js/${cve}`};var Mm=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function c(u){try{d(r.next(u))}catch(h){o(h)}}function l(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):s(u.value).then(c,l)}d((r=r.apply(e,t||[])).next())})};class dve{constructor(t,n={},r,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},lve),n),this.fetch=zz(r)}listBuckets(){return Mm(this,void 0,void 0,function*(){try{return{data:yield UC(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(pi(t))return{data:null,error:t};throw t}})}getBucket(t){return Mm(this,void 0,void 0,function*(){try{return{data:yield UC(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(pi(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Mm(this,void 0,void 0,function*(){try{return{data:yield md(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(pi(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Mm(this,void 0,void 0,function*(){try{return{data:yield r_(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(pi(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Mm(this,void 0,void 0,function*(){try{return{data:yield md(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(pi(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Mm(this,void 0,void 0,function*(){try{return{data:yield Vz(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(pi(n))return{data:null,error:n};throw n}})}}class uve extends dve{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new ove(this.url,this.headers,t,this.fetch)}}const hve="2.55.0";let s0="";typeof Deno<"u"?s0="deno":typeof document<"u"?s0="web":typeof navigator<"u"&&navigator.product==="ReactNative"?s0="react-native":s0="node";const Ave={"X-Client-Info":`supabase-js-${s0}/${hve}`},fve={headers:Ave},pve={schema:"public"},mve={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},gve={};var vve=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function c(u){try{d(r.next(u))}catch(h){o(h)}}function l(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):s(u.value).then(c,l)}d((r=r.apply(e,t||[])).next())})};const yve=e=>{let t;return e?t=e:typeof fetch>"u"?t=_z:t=fetch,(...n)=>t(...n)},xve=()=>typeof Headers>"u"?Iz:Headers,wve=(e,t,n)=>{const r=yve(n),s=xve();return(i,o)=>vve(void 0,void 0,void 0,function*(){var c;const l=(c=yield t())!==null&&c!==void 0?c:e;let d=new s(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:d}))})};var bve=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function c(u){try{d(r.next(u))}catch(h){o(h)}}function l(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):s(u.value).then(c,l)}d((r=r.apply(e,t||[])).next())})};function Cve(e){return e.endsWith("/")?e:e+"/"}function jve(e,t){var n,r;const{db:s,auth:i,realtime:o,global:c}=e,{db:l,auth:d,realtime:u,global:h}=t,A={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),c),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=c==null?void 0:c.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>bve(this,void 0,void 0,function*(){return""})};return e.accessToken?A.accessToken=e.accessToken:delete A.accessToken,A}const qz="2.71.1",rg=30*1e3,s_=3,qN=s_*rg,kve="http://localhost:9999",Sve="supabase.auth.token",Nve={"X-Client-Info":`gotrue-js/${qz}`},i_="X-Supabase-Api-Version",Kz={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Bve=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Eve=10*60*1e3;class P4 extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function _n(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class _ve extends P4{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Ive(e){return _n(e)&&e.name==="AuthApiError"}class Wz extends P4{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class lf extends P4{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class nA extends lf{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Pve(e){return _n(e)&&e.name==="AuthSessionMissingError"}class Jb extends lf{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Zb extends lf{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class e1 extends lf{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Tve(e){return _n(e)&&e.name==="AuthImplicitGrantRedirectError"}class cL extends lf{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class a_ extends lf{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function KN(e){return _n(e)&&e.name==="AuthRetryableFetchError"}class lL extends lf{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class o_ extends lf{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const LC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),dL=` 	
\r=`.split(""),Fve=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<dL.length;t+=1)e[dL[t].charCodeAt(0)]=-2;for(let t=0;t<LC.length;t+=1)e[LC[t].charCodeAt(0)]=t;return e})();function uL(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(LC[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(LC[r]),t.queuedBits-=6}}function Gz(e,t,n){const r=Fve[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function hL(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Lve(o,r,n)};for(let o=0;o<e.length;o+=1)Gz(e.charCodeAt(o),s,i);return t.join("")}function Dve(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Uve(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Dve(r,t)}}function Lve(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Mve(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Gz(e.charCodeAt(s),n,r);return new Uint8Array(t)}function Rve(e){const t=[];return Uve(e,n=>t.push(n)),new Uint8Array(t)}function Ove(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>uL(s,n,r)),uL(null,n,r),t.join("")}function Qve(e){return Math.round(Date.now()/1e3)+e}function Hve(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const il=()=>typeof window<"u"&&typeof document<"u",Kf={tested:!1,writable:!1},Yz=()=>{if(!il())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Kf.tested)return Kf.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Kf.tested=!0,Kf.writable=!0}catch{Kf.tested=!0,Kf.writable=!1}return Kf.writable};function $ve(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const Xz=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Td(async()=>{const{default:r}=await Promise.resolve().then(()=>Kv);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},zve=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",sg=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Wf=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Yh=async(e,t)=>{await e.removeItem(t)};class mk{constructor(){this.promise=new mk.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}mk.promiseConstructor=Promise;function WN(e){const t=e.split(".");if(t.length!==3)throw new o_("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Bve.test(t[r]))throw new o_("JWT not in base64url format");return{header:JSON.parse(hL(t[0])),payload:JSON.parse(hL(t[1])),signature:Mve(t[2]),raw:{header:t[0],payload:t[1]}}}async function Vve(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function qve(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function Kve(e){return("0"+e.toString(16)).substr(-2)}function Wve(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,Kve).join("")}async function Gve(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function Yve(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await Gve(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Rm(e,t,n=!1){const r=Wve();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await sg(e,`${t}-code-verifier`,s);const i=await Yve(r);return[i,r===i?"plain":"s256"]}const Xve=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Jve(e){const t=e.headers.get(i_);if(!t||!t.match(Xve))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Zve(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function eye(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const tye=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Om(e){if(!tye.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function GN(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function AL(e){return JSON.parse(JSON.stringify(e))}var nye=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const ep=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),rye=[502,503,504];async function fL(e){var t;if(!zve(e))throw new a_(ep(e),0);if(rye.includes(e.status))throw new a_(ep(e),e.status);let n;try{n=await e.json()}catch(i){throw new Wz(ep(i),i)}let r;const s=Jve(e);if(s&&s.getTime()>=Kz["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new lL(ep(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new nA}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new lL(ep(n),e.status,n.weak_password.reasons);throw new _ve(ep(n),e.status||500,r)}const sye=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function zn(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[i_]||(i[i_]=Kz["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const c=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await iye(e,t,n+c,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function iye(e,t,n,r,s,i){const o=sye(t,r,s,i);let c;try{c=await e(n,Object.assign({},o))}catch(l){throw console.error(l),new a_(ep(l),0)}if(c.ok||await fL(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(l){await fL(l)}}function Eu(e){var t;let n=null;lye(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=Qve(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function pL(e){const t=Eu(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function AA(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function aye(e){return{data:e,error:null}}function oye(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,o=nye(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:c,user:l},error:null}}function cye(e){return e}function lye(e){return e.access_token&&e.refresh_token&&e.expires_in}const YN=["global","local","others"];var dye=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class uye{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Xz(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=YN[0]){if(YN.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${YN.join(", ")}`);try{return await zn(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(_n(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await zn(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:AA})}catch(r){if(_n(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=dye(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await zn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:oye,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(_n(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await zn(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:AA})}catch(n){if(_n(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,o,c,l;try{const d={nextPage:null,lastPage:0,total:0},u=await zn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:cye});if(u.error)throw u.error;const h=await u.json(),A=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(c=u.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(m.split(";")[1].split("=")[1]);d[`${b}Page`]=g}),d.total=parseInt(A)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(_n(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Om(t);try{return await zn(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:AA})}catch(n){if(_n(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Om(t);try{return await zn(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:AA})}catch(r){if(_n(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Om(t);try{return await zn(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:AA})}catch(r){if(_n(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Om(t.userId);try{const{data:n,error:r}=await zn(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(_n(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Om(t.userId),Om(t.id);try{return{data:await zn(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(_n(n))return{data:null,error:n};throw n}}}function mL(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function hye(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Qm={debug:!!(globalThis&&Yz()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Jz extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Aye extends Jz{}async function fye(e,t,n){Qm.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Qm.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Qm.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Qm.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Qm.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Aye(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Qm.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}hye();const pye={url:kve,storageKey:Sve,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Nve,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function gL(e,t,n){return await n()}const Hm={};class Bx{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Bx.nextInstanceID,Bx.nextInstanceID+=1,this.instanceID>0&&il()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},pye),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new uye({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Xz(s.fetch),this.lock=s.lock||gL,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:il()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=fye:this.lock=gL,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Yz()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=mL(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=mL(this.memoryStorage)),il()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=Hm[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Hm[this.storageKey]=Object.assign(Object.assign({},Hm[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Hm[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Hm[this.storageKey]=Object.assign(Object.assign({},Hm[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${qz}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=$ve(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),il()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Tve(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:c}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",c),await this._saveSession(o),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return _n(n)?{error:n}:{error:new Wz("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await zn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Eu}),{data:o,error:c}=i;if(c||!o)return{data:{user:null,session:null},error:c};const l=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(i){if(_n(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:u,password:h,options:A}=t;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await Rm(this.storage,this.storageKey)),i=await zn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:A==null?void 0:A.emailRedirectTo,body:{email:u,password:h,data:(n=A==null?void 0:A.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},code_challenge:f,code_challenge_method:m},xform:Eu})}else if("phone"in t){const{phone:u,password:h,options:A}=t;i=await zn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=A==null?void 0:A.data)!==null&&r!==void 0?r:{},channel:(s=A==null?void 0:A.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken}},xform:Eu})}else throw new Zb("You must provide either an email or phone number and a password");const{data:o,error:c}=i;if(c||!o)return{data:{user:null,session:null},error:c};const l=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(i){if(_n(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:c}=t;n=await zn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:pL})}else if("phone"in t){const{phone:i,password:o,options:c}=t;n=await zn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:pL})}else throw new Zb("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Jb}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(_n(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,s,i,o,c,l,d,u,h,A,f;let m,g;if("message"in t)m=t.message,g=t.signature;else{const{chain:b,wallet:y,statement:j,options:x}=t;let C;if(il())if(typeof y=="object")C=y;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))C=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=y}const S=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in C&&C.signIn){const _=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),j?{statement:j}:null));let N;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")N=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)N=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)m=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),g=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${S.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...j?["",j,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(r=x==null?void 0:x.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((d=x==null?void 0:x.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((h=(u=x==null?void 0:x.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...x.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const _=await C.signMessage(new TextEncoder().encode(m),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=_}}try{const{data:b,error:y}=await zn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Ove(g)},!((A=t.options)===null||A===void 0)&&A.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Eu});if(y)throw y;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Jb}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:y})}catch(b){if(_n(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const n=await Wf(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await zn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Eu});if(await Yh(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Jb}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(_n(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=t,c=await zn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Eu}),{data:l,error:d}=c;return d?{data:{user:null,session:null},error:d}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Jb}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:d})}catch(n){if(_n(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,o;try{if("email"in t){const{email:c,options:l}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Rm(this.storage,this.storageKey));const{error:h}=await zn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:c,options:l}=t,{data:d,error:u}=await zn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Zb("You must provide either an email or phone number.")}catch(c){if(_n(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:c}=await zn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Eu});if(c)throw c;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,d=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(s){if(_n(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Rm(this.storage,this.storageKey)),await zn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:aye})}catch(i){if(_n(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new nA;const{error:s}=await zn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(_n(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:o}=await zn(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:o,error:c}=await zn(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:c}}throw new Zb("You must provide either an email or phone number and a type")}catch(n){if(_n(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Wf(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<qN:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Wf(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=GN()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,d,u))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await zn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:AA}):await this._useSession(async n=>{var r,s,i;const{data:o,error:c}=n;if(c)throw c;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new nA}:await zn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:AA})})}catch(n){if(_n(n))return Pve(n)&&(await this._removeSession(),await Yh(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new nA;const o=s.session;let c=null,l=null;this.flowType==="pkce"&&t.email!=null&&([c,l]=await Rm(this.storage,this.storageKey));const{data:d,error:u}=await zn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:c,code_challenge_method:l}),jwt:o.access_token,xform:AA});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(_n(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new nA;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=WN(t.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:c,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!c)return{data:{user:null,session:null},error:null};i=c}else{const{data:c,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:c.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(_n(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:c}=n;if(c)throw c;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new nA;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(_n(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!il())throw new e1("No browser detected.");if(t.error||t.error_description||t.error_code)throw new e1(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new cL("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new e1("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new cL("No code detected.");const{data:j,error:x}=await this._exchangeCodeForSession(t.code);if(x)throw x;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:j.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:c,expires_at:l,token_type:d}=t;if(!i||!c||!o||!d)throw new e1("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(c);let A=u+h;l&&(A=parseInt(l));const f=A-u;f*1e3<=rg&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const m=A-h;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,A,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,A,u);const{data:g,error:b}=await this._getUser(i);if(b)throw b;const y={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:A,refresh_token:o,token_type:d,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(r){if(_n(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Wf(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:c}=await this.admin.signOut(o,t);if(c&&!(Ive(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return t!=="others"&&(await this._removeSession(),await Yh(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=Hve(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Rm(this.storage,this.storageKey,!0));try{return await zn(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(_n(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(_n(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,c,l,d,u;const{data:h,error:A}=i;if(A)throw A;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(c=t.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await zn(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return il()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(_n(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await zn(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(_n(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await qve(async s=>(s>0&&await Vve(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await zn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Eu})),(s,i)=>{const o=200*Math.pow(2,s);return i&&KN(i)&&Date.now()+o-r<rg})}catch(r){if(this._debug(n,"error",r),_n(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),il()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Wf(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Wf(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await sg(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:GN()}else if(s&&!s.user&&!s.user){const o=await Wf(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Yh(this.storage,this.storageKey+"-user"),await sg(this.storage,this.storageKey,s)):s.user=GN()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<qN;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${qN}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),KN(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:c}=await this._getUser(s.access_token);!c&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new nA;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new mk;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new nA;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const c={session:i.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(i){if(this._debug(s,"error",i),_n(i)){const o={session:null,error:i};return KN(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(t,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let c=0;c<i.length;c+=1)console.error(i[c]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await sg(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=AL(s);await sg(this.storage,this.storageKey,i)}else{const s=AL(n);await sg(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Yh(this.storage,this.storageKey),await Yh(this.storage,this.storageKey+"-code-verifier"),await Yh(this.storage,this.storageKey+"-user"),this.userStorage&&await Yh(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&il()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),rg);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/rg);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${rg}ms, refresh threshold is ${s_} ticks`),s<=s_&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Jz)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!il()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Rm(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(c.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await zn(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(_n(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const c=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:d}=await zn(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(_n(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:c}=await zn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:c})})}catch(n){if(_n(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await zn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(_n(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=WN(s.access_token);let c=null;o.aal&&(c=o.aal);let l=c;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:c,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(c=>c.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(c=>c.kid===t),r&&this.jwks_cached_at+Eve>s)return r;const{data:i,error:o}=await zn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(c=>c.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:f,error:m}=await this.getSession();if(m||!f.session)return{data:null,error:m};r=f.session.access_token}const{header:s,payload:i,signature:o,raw:{header:c,payload:l}}=WN(r);n!=null&&n.allowExpired||Zve(i.exp);const d=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!d){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:s,signature:o},error:null}}const u=eye(s.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,Rve(`${c}.${l}`)))throw new o_("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(_n(r))return{data:null,error:r};throw r}}}Bx.nextInstanceID=0;const mye=Bx;class gye extends mye{constructor(t){super(t)}}var vye=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function c(u){try{d(r.next(u))}catch(h){o(h)}}function l(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):s(u.value).then(c,l)}d((r=r.apply(e,t||[])).next())})};class yye{constructor(t,n,r){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const c=Cve(t),l=new URL(c);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const d=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:pve,realtime:gve,auth:Object.assign(Object.assign({},mve),{storageKey:d}),global:fve},h=jve(r??{},u);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(A,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=wve(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Dge(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new uve(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new uge(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return vye(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:c,debug:l},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new gye({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:i,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:c,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Jge(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const xye=(e,t,n)=>new yye(e,t,n);function wye(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}wye()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const bye="https://drfaomantrtmtydbelxe.supabase.co",Cye="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRyZmFvbWFudHJ0bXR5ZGJlbHhlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1NTczNTAsImV4cCI6MjA3MTEzMzM1MH0.6oQtHv6OcLkdHvmBPkTnTHEIuF0_GudFxhebVg9atq0",rt=xye(bye,Cye,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0},realtime:{params:{eventsPerSecond:10}}});function Ex(e){const{framework:t,stage:n,tool:r}=e,s=jye(r.id,r.name),i=kye(r.id,t.id),o=Sye(r.id,n.id,t.id);return{promptTemplate:s.core,contextualGuidance:s.guidance,frameworkSpecificNotes:i,stageSpecificFocus:o,knowledgeIntegrationInstructions:s.knowledgeIntegration,qualityChecks:s.qualityChecks,expectedOutputFormat:s.outputFormat}}function jye(e,t){const n={"user-interviews":{core:`You are a senior UX researcher and user interview specialist with 15+ years of experience conducting insightful user research. You excel at designing interview guides that reveal deep user motivations, mental models, and behavioral patterns using advanced interviewing techniques.

## Your Task
Create a comprehensive user interview guide for this project using the following research methodology:

### Interview Methodology
- Use the funnel technique: start broad, progressively narrow to specific details
- Apply the "5 Whys" technique to uncover root motivations beyond surface responses
- Include emotional archaeology questions exploring feelings and satisfaction moments
- Design task-based scenarios that prompt behavioral demonstrations
- Build in validation through prioritization and choice exercises

### Required Interview Structure
Create a complete interview guide with:

1. **Opening (5-7 minutes)**
   - Warm-up questions to build rapport
   - Context-setting questions about participant background
   - Permission and recording consent
   - Expectation setting for the session

2. **Background & Context (10-15 minutes)**
   - Current situation and environment
   - Relevant tools, processes, and workflows they use
   - Role and responsibilities in their context
   - Decision-making authority and influences

3. **Core Topic Exploration (20-30 minutes)**
   - Open-ended questions revealing mental models
   - Scenario-based questions prompting specific examples
   - Critical incident questions about memorable experiences
   - "Day in the life" walkthrough questions
   - Emotional response exploration (frustrations, satisfying moments)

4. **Task Demonstration (if applicable, 10-15 minutes)**
   - Think-aloud protocol for relevant tasks
   - Current tool/process walkthrough
   - Problem-solving behavior observation
   - Workaround identification

5. **Forward-Looking (5-10 minutes)**
   - Ideal scenario descriptions
   - Aspiration and goal exploration
   - Hypothetical solution reactions
   - Change readiness and barrier identification

6. **Validation & Wrap-up (5-10 minutes)**
   - Prioritization exercises
   - Key point confirmation
   - Additional thoughts invitation
   - Next steps and follow-up permission

### Question Quality Requirements
For each question, ensure it:
- Uses open-ended phrasing that encourages storytelling
- Avoids leading or biased language
- Includes follow-up probes for deeper exploration
- Connects to project objectives and research questions
- Reveals both functional and emotional aspects

### Interview Logistics
Include guidance for:
- Participant recruitment criteria
- Session duration and scheduling
- Recording and note-taking setup
- Moderator preparation checklist
- Post-interview synthesis approach

### Validation Framework
Provide methods to:
- Test interview guide effectiveness through pilot sessions
- Validate question comprehension and relevance
- Cross-check responses for consistency
- Identify data saturation points
- Plan follow-up validation with participants

### Output Requirements
Deliver a complete interview guide that includes:
- All questions with suggested probes
- Timing estimates for each section
- Moderator tips for difficult moments
- Note-taking templates
- Analysis framework for captured data
---`,guidance:["Use funnel technique: start with broad questions, progressively narrow to specific details","Apply 5 Whys methodology to uncover root motivations beyond surface responses","Include emotional archaeology questions exploring feelings and satisfaction moments","Design task-based scenarios that prompt behavioral demonstrations","Build in validation opportunities through prioritization and choice exercises","Create questions that reveal mental models and decision-making processes","Include strategic silence and active listening guidance for moderators"],knowledgeIntegration:["CRITICAL: Incorporate ALL project knowledge base content including user segments, business context, existing research, and domain expertise","Use specific user pain points, behavioral patterns, and research findings from knowledge base to inform interview questions","Include industry-specific terminology, processes, and constraints from knowledge base in the interview guide","Reference business goals, success metrics, and strategic objectives from knowledge base to align interview objectives","Incorporate existing user insights and research gaps from knowledge base to focus interview areas","Use organizational context, team structure, and project constraints from knowledge base to optimize interview approach","Include target audience characteristics, user roles, and contextual factors from knowledge base in participant criteria"],qualityChecks:["Verify the interview guide includes comprehensive project context from knowledge base","Ensure detailed interview methodology and question design guidance is provided","Confirm complete interview structure with timing and flow requirements","Validate that specific validation methods and quality assurance approaches are included","Check that the guide is complete and ready to use without requiring additional input","Ensure moderator guidance and logistical considerations are provided"],outputFormat:"Complete, ready-to-use user interview guide with methodology, specific questions, follow-up probes, timing estimates, moderator tips, and validation framework"},"stakeholder-interviews":{core:`You are a senior business analyst and stakeholder engagement specialist with extensive experience facilitating strategic conversations with executives, product owners, and organizational decision-makers. You excel at uncovering business context, organizational dynamics, and strategic constraints through structured stakeholder interviews.

## Your Task
Create a comprehensive stakeholder interview guide that helps understand business objectives, success metrics, organizational dynamics, and strategic constraints. Design questions that reveal both explicit requirements and implicit assumptions that shape the project context.

### Interview Structure
Develop a complete interview guide with:

1. **Executive Alignment (10-15 minutes)**
   - Business objectives and strategic priorities
   - Success criteria and measurement methods
   - Competitive context and market positioning
   - Expected business outcomes and ROI

2. **Organizational Context (10-15 minutes)**
   - Decision-making processes and approval chains
   - Team structure and resource availability
   - Competing priorities and trade-offs
   - Political dynamics and stakeholder relationships

3. **Constraints & Requirements (15-20 minutes)**
   - Technical constraints and dependencies
   - Budget and timeline constraints
   - Regulatory and compliance requirements
   - Brand and policy constraints

4. **Risk & Change Management (10-15 minutes)**
   - Known risks and mitigation strategies
   - Change readiness and adoption concerns
   - Historical context and lessons learned
   - Potential barriers to success

5. **Vision & Validation (5-10 minutes)**
   - Ideal outcome descriptions
   - Must-have vs nice-to-have features
   - Success validation methods
   - Stakeholder communication preferences`,guidance:["Focus on understanding business objectives, success metrics, and constraints","Explore organizational dynamics and decision-making processes","Uncover hidden assumptions and unstated requirements","Identify potential risks, challenges, and resource limitations","Balance diplomatic questioning with direct inquiry about difficult topics","Create questions that reveal competing priorities and trade-off decisions"],knowledgeIntegration:["CRITICAL: Incorporate ALL project knowledge base content including organizational hierarchy, stakeholder relationships, business goals, and strategic objectives","Use known constraints and requirements from previous stakeholder interactions documented in knowledge base","Align interview questions with the specific business domain and industry context from knowledge base","Reference existing strategic initiatives and organizational priorities from knowledge base"],qualityChecks:["Verify the interview guide addresses both explicit and implicit stakeholder concerns","Ensure questions about success criteria and measurement methods are included","Confirm questions explore competing priorities and trade-offs","Validate that the guide is complete and ready to use with stakeholders"],outputFormat:"Complete business-focused stakeholder interview guide with strategic questions, constraint exploration, success criteria discussion, and organizational context mapping"},observations:{core:`You are an expert ethnographic researcher and behavioral analyst with deep experience conducting contextual observations of users in their natural environments. You excel at designing observation protocols that capture authentic behaviors, environmental factors, and non-verbal cues while minimizing observer influence.

## Your Task
Create a comprehensive user observation protocol that enables systematic documentation of user behaviors, environmental context, and interaction patterns. Design methods that reveal what users actually do (not what they say they do) in their natural settings.

### Observation Framework
Develop a complete observation protocol with:

1. **Pre-Observation Planning**
   - Observation objectives and research questions
   - Target user roles and contexts to observe
   - Optimal observation locations and timing
   - Equipment and documentation needs
   - Ethical considerations and consent procedures

2. **Observation Structure**
   - Environmental context documentation
   - User behavior and action sequences
   - Tool and artifact usage patterns
   - Communication and collaboration behaviors
   - Problem-solving and workaround identification
   - Emotional cues and frustration indicators
   - Interruptions and context switches

3. **Documentation Methods**
   - Structured field notes templates
   - Photography and video capture guidelines
   - Time-stamped behavior logging
   - Contextual artifact collection
   - Observer reflection notes

4. **Analysis Framework**
   - Pattern identification methods
   - Behavioral anomaly tracking
   - Context-behavior relationship mapping
   - Triangulation with other data sources
   - Insight synthesis approaches`,guidance:["Focus on observing actual behaviors rather than stated intentions","Design observation frameworks that capture context, environment, and constraints","Include methods for documenting non-verbal cues and emotional responses","Create structured approaches for identifying patterns and anomalies","Minimize observer influence through unobtrusive positioning and neutral documentation","Plan for multiple observation sessions to capture behavioral variations across contexts"],knowledgeIntegration:["CRITICAL: Incorporate ALL project knowledge base content to identify optimal observation contexts, environments, and user workflows","Reference known user workflows and touchpoints from the knowledge base to focus observation areas","Use understanding of user roles and responsibilities from knowledge base to structure observation categories","Align observation focus areas with business objectives and user goals from the knowledge base"],qualityChecks:["Verify observation methods minimize disruption to natural behaviors","Ensure multiple observation sessions are planned to capture behavioral variations","Confirm triangulation approaches with other data sources are included","Validate that the protocol is complete and ready to execute in the field"],outputFormat:"Complete structured observation protocol with planning guidance, context documentation templates, behavior tracking methods, and insight synthesis framework"},surveys:{core:`You are a quantitative research specialist and survey methodologist with expertise in designing statistically sound survey instruments. You excel at creating surveys that gather reliable, actionable data through validated scales, unbiased question design, and optimal response formats.

## Your Task
Create a comprehensive survey instrument that gathers quantitative insights about user behaviors, attitudes, preferences, and demographics. Design questions that enable statistical analysis, pattern identification, and evidence-based decision making.

### Survey Design Framework
Develop a complete survey with:

1. **Survey Objectives & Methodology**
   - Research questions and hypotheses to test
   - Target audience and sampling strategy
   - Expected sample size and statistical power
   - Survey distribution channels and timeline

2. **Question Structure**
   - Demographic profiling questions
   - Behavioral frequency and usage questions
   - Attitudinal and preference questions using validated scales
   - Satisfaction and sentiment measurements
   - Open-ended questions for qualitative context
   - Screening and segmentation logic

3. **Response Design**
   - Appropriate scale types (Likert, semantic differential, rating scales)
   - Multiple choice with exhaustive, mutually exclusive options
   - Ranking and prioritization questions
   - Matrix questions for efficiency
   - Skip logic and branching rules

4. **Quality Assurance**
   - Attention check questions
   - Response validation rules
   - Question randomization where appropriate
   - Progress indicators and completion estimates

5. **Analysis Plan**
   - Key metrics and statistical tests to perform
   - Data segmentation and cohort analysis approach
   - Visualization and reporting methods`,guidance:["Design questions that can be statistically analyzed for patterns","Use validated scales and measurement instruments where possible (NPS, SUS, CSAT, etc.)","Balance closed-ended questions with strategic open-ended items for context","Structure surveys for optimal completion rates (8-12 minutes ideal)","Avoid double-barreled questions, leading language, and biased framing","Include validation questions and attention checks for data quality"],knowledgeIntegration:["CRITICAL: Incorporate ALL project knowledge base content to identify target audience, sampling approach, and relevant metrics","Reference known user segments and demographics from knowledge base to design screening questions","Use validated hypotheses and research questions from knowledge base to structure survey objectives","Align survey questions with business metrics and success criteria from the knowledge base"],qualityChecks:["Verify all questions are unbiased and avoid leading responses","Ensure validation questions and attention checks are included","Confirm survey length and completion time are optimized for target response rates","Validate that the survey instrument is complete and ready to deploy"],outputFormat:"Complete survey instrument with question logic, response validation rules, skip logic, attention checks, and statistical analysis plan"},"affinity-mapping":{core:`# AI Affinity Mapping Expert

You are a senior UX researcher with 15+ years of experience in qualitative data analysis and affinity mapping. You excel at identifying patterns, themes, and insights from large amounts of user research data using systematic clustering and thematic analysis methods.

## Project Context:
{knowledgeBase}

---

## Instructions:
Use the Project Context above to fill in ALL bracketed placeholders below with specific, relevant information from the project knowledge base. Base all clusters, themes, and insights on the research data, user feedback, and patterns documented in the Project Context.

Create an affinity map that:
- Organizes research data into meaningful, hierarchical clusters
- Reveals patterns and themes that weren't obvious in raw data
- Progresses from specific observations to strategic insights
- Connects user needs with business opportunities

---

## Quality Standards:
- **Data-Driven**: Every cluster and theme must be supported by specific data points from the Project Context
- **Hierarchical Structure**: Progress from Level 1 (specific observations) through Level 3 (strategic insights)
- **Coherent Themes**: Each cluster should have a clear, unified theme that makes logical sense
- **Actionable Insights**: Level 3 insights should directly inform product and design decisions

---

## Output Format:
Create a complete affinity map with three hierarchical levels:
- **Level 1**: Initial clusters of related data points from research
- **Level 2**: Higher-order themes that group related clusters
- **Level 3**: Strategic insights and actionable recommendations

---

# AFFINITY MAP

## LEVEL 1: INITIAL CLUSTERS

### Cluster 1: [Write cluster name based on grouping patterns in the Project Context]
- [Write data point 1 from research data in the Project Context]
- [Write data point 2 from research data in the Project Context]
- [Write data point 3 from research data in the Project Context]
- [Write data point 4 from research data in the Project Context]

### Cluster 2: [Write cluster name based on patterns in the Project Context]
- [Write data point 1 from the Project Context]
- [Write data point 2 from the Project Context]
- [Write data point 3 from the Project Context]
- [Write data point 4 from the Project Context]

[Continue with additional clusters as needed based on the research data in the Project Context]

---

## LEVEL 2: THEMES (Higher-Level Patterns)

### Theme 1: [Write theme name based on cluster patterns from the Project Context]
- **Combines clusters:** [List which clusters this combines based on the analysis above]
- **Key insight:** [Write what this pattern reveals about user needs, behaviors, or pain points from the Project Context]
- **Evidence:** [Cite specific data points from the Project Context supporting this theme]

### Theme 2: [Write theme name based on patterns in the Project Context]
- **Combines clusters:** [List which clusters based on analysis]
- **Key insight:** [Write what this reveals based on the Project Context]
- **Evidence:** [Cite supporting data from the Project Context]

### Theme 3: [Write theme name based on patterns in the Project Context]
- **Combines clusters:** [List which clusters]
- **Key insight:** [Write what this reveals about users from the Project Context]
- **Evidence:** [Cite supporting evidence from the Project Context]

---

## LEVEL 3: META-THEMES (Strategic Insights)

### Meta-Theme 1: [Write overarching theme name synthesizing themes from the Project Context]
- **Pattern:** [Describe the high-level pattern across multiple themes based on the Project Context data]
- **Business Impact:** [Describe implications for the business/product based on business goals in the Project Context]
- **Recommendation:** [Write specific actionable recommendation aligned with objectives in the Project Context]

### Meta-Theme 2: [Write overarching theme name based on the Project Context patterns]
- **Pattern:** [Describe the high-level pattern from the Project Context]
- **Business Impact:** [Describe implications based on the Project Context]
- **Recommendation:** [Write actionable recommendation based on the Project Context]

---

## KEY INSIGHTS:
1. [Write key insight 1 based on patterns and themes identified from the Project Context]
2. [Write key insight 2 based on user behaviors and needs from the Project Context]
3. [Write key insight 3 based on opportunities and challenges from the Project Context]`,guidance:["Multi-level clustering","Pattern identification","Evidence-based insights","Strategic recommendations"],knowledgeIntegration:["Insert ALL research data from knowledge base","Include business objectives","Reference user segments"],qualityChecks:["Hierarchical themes","Evidence for each theme","Contradictions addressed","Actionable insights"],outputFormat:"Complete affinity map with themes, sub-themes, and strategic insights"},personas:{core:`# AI User Persona Expert

You are a senior UX researcher with 15+ years of experience in user research and persona development. You excel at synthesizing qualitative and quantitative research data into actionable user personas that drive product strategy and design decisions.

## Project Context:
{knowledgeBase}

---

## Instructions:
Use the Project Context above to create evidence-based personas. Fill in ALL bracketed placeholders with specific information from the research data and user insights in the Project Context. Each persona should represent a distinct user segment with unique goals, behaviors, and pain points identified in the research.

Create personas that:
- Are grounded in real research data and user insights
- Represent distinct and meaningful user segments
- Include specific, actionable details that inform design decisions
- Balance demographic information with behavioral and motivational insights

---

## Quality Standards:
- **Evidence-Based**: Every persona element must be backed by specific research findings from the Project Context
- **Distinct Segments**: Each persona should represent a meaningfully different user type with unique characteristics
- **Actionable**: Include enough detail to guide design decisions and feature prioritization
- **Realistic**: Use authentic details that reflect real users, not stereotypes

---

## Output Format:
Create 3 complete user personas following the structure below. Each persona should be comprehensive, research-backed, and immediately useful for product and design teams.

---

## PERSONA 1

**Name:** [Create a realistic full name]
**Age:** [Specific age]
**Occupation:** [Specific job title]
**Location:** [Specific city, state/country]
**Quote:** "[Write a one-sentence quote that captures their essence]"

**Goals:**
- [Write specific goal 1 based on research]
- [Write specific goal 2 based on research]
- [Write specific goal 3 based on research]

**Pain Points:**
- [Write specific pain point 1 from research]
- [Write specific pain point 2 from research]
- [Write specific pain point 3 from research]

**Behaviors:**
- [Describe specific behavior 1]
- [Describe specific behavior 2]
- [Describe specific behavior 3]

**Motivations:**
- [Describe what drives them]
- [Describe what they value most]
- [Describe what success looks like to them]

**Tech Comfort:** [State: Low, Medium, or High]

**Background:** [Write 2-3 sentences about their life context, work environment, and relevant circumstances based on the research data]

---

## PERSONA 2

[Repeat the same structure for persona 2]

---

## PERSONA 3

[Repeat the same structure for persona 3]`,guidance:["Triangulation method","Jobs-to-be-Done framework","Research evidence backing","Validation hypotheses"],knowledgeIntegration:["Insert ALL user research from knowledge base","Include business context and goals","Reference existing user segments"],qualityChecks:["Evidence-based profiles","Testable hypotheses included","Comprehensive and actionable"],outputFormat:"2-4 complete user personas with research backing and validation criteria"},"empathy-maps":{core:`# AI Empathy Mapping Expert

You are a senior UX researcher with 15+ years of experience in user empathy and behavioral analysis. You excel at synthesizing user research into empathy maps that capture the full spectrum of user thoughts, feelings, actions, and environmental factors.

## Project Context:
{knowledgeBase}

---

## Instructions:
Use the Project Context above to fill in ALL bracketed placeholders below with specific, relevant information from the project knowledge base. Base all empathy map quadrants on user research data, behavioral observations, and direct quotes documented in the Project Context.

Create an empathy map that:
- Captures authentic user thoughts, feelings, and behaviors from research
- Reveals emotional drivers and pain points
- Distinguishes between what users say versus what they do
- Connects user experience to product opportunities

---

## Quality Standards:
- **Research-Backed**: Every entry must come from actual user research data in the Project Context
- **Authentic Voice**: Use direct quotes and specific observations, not generic statements
- **Balanced Coverage**: All six quadrants (Thinks, Feels, Says, Does, Sees, Hears) should be thoroughly populated
- **Insight-Driven**: Reveal non-obvious insights about user motivations and pain points

---

## Output Format:
Create a complete empathy map with all six quadrants filled with specific, research-based entries. Each quadrant should have 3-5 detailed entries that provide deep understanding of the user's experience.

---

# EMPATHY MAP: [Write the persona name based on the target user in the Project Context]

## THINKS:
- [Write what the user is thinking based on goals, concerns, and questions mentioned in the Project Context]
- [Write another thought based on research data in the Project Context]
- [Write another thought based on user insights in the Project Context]

## FEELS:
- [Describe their emotions (frustrated, excited, anxious, confident, etc.) based on user sentiment in the Project Context]
- [Describe another emotional state from research in the Project Context]
- [Describe another emotional state from user feedback in the Project Context]

## SAYS:
- "[Write an actual quote from user research in the Project Context]"
- "[Write another actual quote from user interviews or feedback in the Project Context]"
- "[Write another actual quote from users documented in the Project Context]"

## DOES:
- [Describe an observable action or behavior from research in the Project Context]
- [Describe another observable action or behavior documented in the Project Context]
- [Describe another user behavior pattern from the Project Context]

## SEES:
- [Describe what they encounter in their environment based on context in the Project Context]
- [Describe another thing they see - competitors, influencers, etc. - mentioned in the Project Context]
- [Describe another environmental factor from the Project Context]

## HEARS:
- [Describe what others tell them or opinions they hear based on the Project Context]
- [Describe another external influence they hear documented in the Project Context]
- [Describe another piece of feedback or advice they hear from the Project Context]

## PAINS:
- [Write a specific frustration or obstacle they face based on pain points in the Project Context]
- [Write another pain point from research in the Project Context]
- [Write another pain point from user complaints in the Project Context]

## GAINS:
- [Write a desired outcome or benefit they seek based on goals in the Project Context]
- [Write another gain they want to achieve based on needs in the Project Context]
- [Write another gain they want to achieve based on objectives in the Project Context]`,guidance:["6-quadrant structure","Evidence-based","Specific scenarios","Research quotes"],knowledgeIntegration:["Insert ALL user research from knowledge base","Include behavioral data and quotes"],qualityChecks:["All 6 quadrants filled","Research-backed","Specific examples","Pains/gains identified"],outputFormat:"Complete empathy map with all quadrants populated from research"},brainstorming:{core:`You are an AI prompt generator that creates comprehensive, ready-to-use prompts for ideation and brainstorming facilitation. Generate a complete AI prompt that users can copy and paste into their AI assistant to design effective brainstorming sessions.

The generated prompt must:
1. Include instructions for AI to act as an innovation facilitation expert
2. Incorporate ALL project knowledge base content to focus ideation effectively
3. Provide structured methodology for divergent and convergent thinking
4. Include specific warm-up exercises and creative techniques
5. Request evaluation criteria and idea prioritization methods
6. Be comprehensive enough to generate complete brainstorming guides without additional input

Template Structure for Generated Prompt:
---
# AI Brainstorming Facilitation Expert

You are a senior innovation facilitator and creative thinking expert with 15+ years of experience leading productive ideation sessions. You specialize in structured brainstorming methodologies that generate high-quality, implementable ideas.

## Project Context
[Insert all relevant project knowledge base content here - user problems, business constraints, target outcomes, team dynamics, etc.]

## Your Task
Design a comprehensive brainstorming session for this project using proven facilitation methods that maximize creative output and team engagement.

### Brainstorming Methodology
- Apply divergent thinking techniques to generate maximum idea quantity
- Use convergent thinking approaches to identify most promising concepts
- Include structured warm-up exercises to prime creative thinking
- Design activities that build on and combine ideas effectively
- Create evaluation frameworks that balance creativity with feasibility

### Required Session Structure
Create a complete brainstorming guide with:

1. **Pre-Session Setup (15 minutes)**
   - Environment preparation and materials needed
   - Participant briefing and expectation setting
   - Ground rules and psychological safety guidelines
   - Technology setup for idea capture

2. **Creative Warm-Up (10-15 minutes)**
   - Ice breaker exercises to build comfort
   - Creative thinking activation activities
   - Perspective shifting exercises
   - Energy building and team alignment

3. **Problem Framing (10-15 minutes)**
   - Clear problem statement presentation
   - Context sharing from project knowledge
   - Success criteria and constraint clarification
   - "How Might We" question generation

4. **Divergent Ideation (30-45 minutes)**
   - **Individual Brainstorming (10 minutes)**
     - Silent idea generation to avoid groupthink
     - Specific prompts based on project context
     - Quantity-focused individual contribution
   
   - **Group Building (15-20 minutes)**
     - Idea sharing without judgment
     - Building on others' concepts
     - Cross-pollination between ideas
     - Wild idea encouragement
   
   - **Creative Techniques (10-15 minutes)**
     - SCAMPER method application
     - Reverse brainstorming exercises
     - Role-playing from different perspectives
     - Analogical thinking exercises

5. **Idea Organization (15-20 minutes)**
   - Idea clustering by themes or approaches
   - Similar concept grouping
   - Gap identification for additional ideation
   - Initial feasibility assessment

6. **Convergent Evaluation (20-30 minutes)**
   - Evaluation criteria establishment
   - Multi-criteria assessment approach
   - Dot voting or ranking exercises
   - Top idea selection and rationale

7. **Next Steps Planning (10 minutes)**
   - Selected idea documentation
   - Development and testing roadmap
   - Responsibility assignment
   - Follow-up session scheduling

### Facilitation Techniques
Include specific guidance for:
- Managing dominant personalities and encouraging quiet participants
- Handling idea criticism and maintaining creative flow
- Using visual tools and spatial arrangement effectively
- Capturing ideas accurately without losing momentum
- Managing time and energy throughout the session

### Idea Quality Enhancement
Provide methods to:
- Encourage wild ideas alongside practical solutions
- Build on and combine concepts for hybrid solutions
- Apply constraints creatively to spark innovation
- Connect ideas to user needs and business objectives
- Generate implementation approaches for top concepts

### Evaluation Framework
Create criteria for assessing ideas based on:
- User value and problem-solving effectiveness
- Technical feasibility and implementation complexity
- Business alignment and strategic fit
- Resource requirements and timeline implications
- Innovation potential and competitive advantage

### Output Requirements
Deliver a facilitation guide that includes:
- Complete session agenda with timing
- Specific exercises and prompts for each phase
- Materials and setup requirements
- Idea capture and documentation methods
- Follow-up activities and implementation planning
---`,guidance:["Generate prompts that instruct AI to structure sessions with divergent thinking followed by convergent evaluation","Include instructions for AI to design creative warm-up exercises that prime innovative thinking","Ensure prompts direct AI to encourage building on and combining ideas for hybrid solutions","Generate prompts instructing AI to provide specific facilitation techniques for managing group dynamics","Include instructions for AI to create evaluation criteria that balance creativity with feasibility","Ensure prompts direct AI to focus ideation on project-relevant problem areas and opportunities","Generate prompts that instruct AI to provide complete session timing and materials requirements"],knowledgeIntegration:["CRITICAL: The generated prompt must incorporate ALL project knowledge base content including user problems, business constraints, and strategic objectives","Insert specific user pain points, unmet needs, and opportunity areas from knowledge base into ideation focus","Include business goals, resource constraints, and strategic priorities from knowledge base in evaluation criteria","Reference team composition, organizational culture, and collaboration preferences from knowledge base in facilitation approach","Incorporate competitive landscape, market opportunities, and innovation requirements from knowledge base in creative prompts","Use project timeline, budget constraints, and implementation capabilities from knowledge base to guide idea feasibility assessment","Include domain expertise, technical constraints, and regulatory requirements from knowledge base in brainstorming parameters"],qualityChecks:["Verify the generated prompt includes comprehensive project context for focused ideation","Ensure the prompt provides detailed facilitation methodology with specific techniques","Confirm the prompt specifies complete session structure with timing and activities","Validate that the prompt includes evaluation criteria and idea prioritization methods","Check that the prompt generates facilitation guides ready for immediate implementation","Ensure the prompt instructs AI to provide follow-up planning and implementation approaches"],outputFormat:"Complete, copy-paste ready AI prompt that generates structured brainstorming facilitation guides with exercises, timing, evaluation criteria, and implementation planning"},"how-might-we":{core:`You are an innovation strategist and design thinking facilitator with expertise in problem reframing and opportunity identification. You excel at transforming challenges into "How Might We" questions that inspire creative solutions while maintaining strategic focus.

## Your Task
Create a comprehensive set of How Might We (HMW) questions that reframe problems as opportunities for innovation. Design questions that balance breadth for creative exploration with specificity for actionable solutions.

### HMW Question Framework
Develop a complete set of HMW questions including:

1. **Problem Analysis**
   - Core problems identified from user research and business context
   - Root causes and contributing factors
   - Stakeholder perspectives on the challenge
   - Current constraints and limitations

2. **HMW Question Categories**
   - **Amplifying Questions**: How might we amplify what's working?
   - **Removing Questions**: How might we remove barriers?
   - **Exploring Questions**: How might we explore opposites or alternatives?
   - **Questioning Assumptions**: How might we challenge fundamental beliefs?
   - **Unexpected Resource Questions**: How might we use available resources differently?

3. **Question Characteristics**
   - Broad enough to allow creativity and multiple solutions
   - Specific enough to be actionable and focused
   - Positively framed to inspire rather than constrain
   - Assume solutions are possible
   - Multiple questions exploring different angles of the same challenge

4. **Strategic Alignment**
   - Connection to user pain points and needs
   - Alignment with business objectives
   - Consideration of technical constraints
   - Feasibility within project context`,guidance:['Frame problems as opportunities starting with "How might we..."',"Create questions that are broad enough to allow creativity but specific enough to be actionable","Include multiple HMW questions (5-10) exploring different angles of the same problem","Design questions that inspire rather than constrain solution thinking","Avoid suggesting solutions within the question itself","Use different reframing techniques: amplify, remove, explore, question assumptions, find unexpected resources"],knowledgeIntegration:["CRITICAL: Incorporate ALL project knowledge base content to identify the most important problems to address","Reference user pain points and unmet needs from the knowledge base to ground HMW questions","Use business objectives and constraints from knowledge base to frame realistic opportunities","Align HMW questions with strategic priorities and success metrics from project documentation"],qualityChecks:['Verify HMW questions are properly scoped - not too broad ("How might we change the world?") or too narrow ("How might we change button color?")',"Ensure multiple perspectives and stakeholder viewpoints are represented","Confirm questions inspire multiple solution concepts rather than pointing to single answer","Validate that questions are complete and ready to use in ideation sessions"],outputFormat:"Comprehensive set of 5-10 well-crafted How Might We questions with problem analysis, strategic context, and guidance for using questions in ideation"},wireframes:{core:`# AI Wireframing Expert

You are a senior UX designer with 15+ years of experience in information architecture and interface design. You excel at creating low-fidelity wireframes that clearly communicate layout, hierarchy, and user flows while focusing on functionality over visual design.

## Project Context:
{knowledgeBase}

---

## Instructions:
Use the Project Context above to fill in ALL bracketed placeholders below with specific, relevant information from the project knowledge base. Base all wireframe designs on user workflows, business requirements, and technical constraints documented in the Project Context.

Create wireframes that:
- Prioritize user tasks and workflows identified in research
- Establish clear information hierarchy and navigation patterns
- Communicate functionality and interaction patterns effectively
- Balance user needs with business requirements and technical constraints

---

## Quality Standards:
- **User-Centered**: Design reflects actual user workflows and mental models from the Project Context
- **Clear Hierarchy**: Visual hierarchy clearly indicates importance and relationships between elements
- **Annotated**: Include notes explaining design decisions and interaction patterns
- **Complete Coverage**: Address all key user flows and critical screens identified in requirements

---

## Output Format:
Create low-fidelity wireframe specifications for key screens, including:
- Screen layout with element placement and sizing
- Content hierarchy and grouping
- Navigation and interaction patterns
- Annotations explaining design rationale
- User flow connections between screens

---

## WIREFRAME 1: [Write screen name based on key user workflows in the Project Context - e.g., "Home Screen"]

**Layout Description:**
[Describe the layout structure based on user needs and content hierarchy in the Project Context - e.g., "Header with logo and navigation at top, hero banner below header, 3-column grid of featured items in main content area, sidebar with filters on right, footer at bottom"]

**Key Elements:**
1. [Element name based on features in the Project Context]: [Description and function based on user needs - e.g., "Search bar: Allows users to search products by keyword"]
2. [Element name from the Project Context]: [Description and function based on requirements in the Project Context]
3. [Element name from user workflows in the Project Context]: [Description and function]
4. [Element name from the Project Context]: [Description and function]
5. [Element name based on business goals in the Project Context]: [Description and function]

**User Flow:**
- Arrives from: [Where user comes from based on user journeys in the Project Context]
- Primary goal: [What user wants to accomplish based on goals and tasks in the Project Context]
- Next step: [Where user goes next based on workflows in the Project Context]

**Annotations:**
- [Design decision and rationale based on user research or business requirements in the Project Context - e.g., "Placed CTA button above fold to increase conversions based on heatmap data"]
- [Another design decision and rationale based on insights from the Project Context]

---

## WIREFRAME 2: [Write screen name based on user workflows in the Project Context]

**Layout Description:**
[Describe the layout structure for this screen based on content and functionality in the Project Context]

**Key Elements:**
1. [Element name from the Project Context]: [Description and function based on user needs in the Project Context]
2. [Element name]: [Description and function based on requirements]
3. [Element name]: [Description and function]
4. [Element name]: [Description and function]
5. [Element name]: [Description and function]

**User Flow:**
- Arrives from: [Where user comes from based on the Project Context]
- Primary goal: [What user wants to accomplish based on the Project Context]
- Next step: [Where user goes next based on the Project Context]

**Annotations:**
- [Design decision and rationale based on the Project Context]
- [Another design decision and rationale based on the Project Context]

---

## WIREFRAME 3: [Write screen name based on key screens in the Project Context]

[Repeat same structure using information from the Project Context]

---

[Continue for all key screens identified in the Project Context]`,guidance:["Information architecture focus","User task flows","Responsive design","Detailed annotations"],knowledgeIntegration:["Insert ALL workflows from knowledge base","Include business requirements","Reference technical constraints"],qualityChecks:["Complete screen coverage","Annotated decisions","User flows documented","Research-backed"],outputFormat:"Wireframe specifications for key screens with annotations and user flows"},"paper-prototypes":{core:`You are a rapid prototyping specialist and interaction designer with expertise in creating low-fidelity, testable prototypes. You excel at translating concepts into tangible artifacts that enable quick validation, iteration, and stakeholder alignment through paper-based or simple digital mockups.

## Your Task
Create comprehensive paper prototype specifications that enable rapid creation of testable, interactive prototypes. Design prototypes that focus on core interactions and user flows rather than visual polish, allowing for fast iteration based on feedback.

### Paper Prototype Framework
Develop complete prototype specifications including:

1. **Prototype Scope & Objectives**
   - Key features and flows to prototype
   - Primary user tasks to validate
   - Specific hypotheses to test
   - Success criteria for prototype

2. **Screen & State Inventory**
   - All screens/views needed for core flows
   - Interaction states (default, hover, active, error, success)
   - Navigation elements and connections
   - Modal, overlay, and secondary interfaces

3. **Interaction Specifications**
   - User flow diagrams showing screen transitions
   - Tap/click targets and interactive elements
   - Input fields and form interactions
   - Button behaviors and system responses
   - Error states and recovery paths

4. **Content & Component Details**
   - Information architecture for each screen
   - Content hierarchy and priority
   - Component specifications (buttons, inputs, cards, etc.)
   - Placeholder content that reflects realistic use

5. **Testing Plan**
   - Test scenarios and tasks for participants
   - Facilitator guidance for demonstrating interactions
   - Areas to gather specific feedback on
   - Iteration approach based on findings`,guidance:["Focus on core interactions and user flows rather than visual polish or final design details","Create prototypes that can be easily modified based on test feedback (loose sheets vs bound)","Include multiple interaction states and error conditions to validate complete user journeys","Design prototypes that facilitate user testing and stakeholder review with clear interaction patterns","Specify realistic content and data to make prototype scenarios believable","Include annotations for facilitators about how to demonstrate interactions"],knowledgeIntegration:["CRITICAL: Incorporate ALL project knowledge base content to prioritize which features and flows to prototype","Reference user scenarios and tasks from the knowledge base to structure prototype interactions","Use business constraints and technical limitations from knowledge base to inform prototype scope","Align prototype functionality with user goals and business objectives from project documentation"],qualityChecks:["Verify prototypes are testable and interactive enough for meaningful feedback","Ensure consideration of edge cases and error states in the prototype","Confirm rapid iteration plan based on user testing results is included","Validate that prototype specifications are complete and ready to build"],outputFormat:"Complete paper prototype specifications with screen inventory, interaction flows, content details, facilitator guidance, and testing plan"},"usability-tests":{core:`You are a senior UX researcher and usability testing specialist with 15+ years of experience designing and conducting rigorous user testing. You excel at creating testing protocols that reveal actionable insights about user behavior and interface effectiveness through evidence-based methodology.

## Your Task
Design a comprehensive usability testing protocol for this project using evidence-based methodology that captures both quantitative performance and qualitative user experience insights.

### Usability Testing Methodology
- Design tests that observe actual behavior rather than collect opinions
- Create realistic task scenarios based on authentic user workflows
- Apply statistical rigor for quantitative measurements
- Include systematic qualitative observation and analysis
- Plan for actionable findings that drive design improvements

### Required Testing Protocol
Create a complete testing plan including:

1. **Testing Strategy & Objectives**
   - Primary research questions and hypotheses
   - Success criteria and key performance indicators
   - Testing method selection (moderated, unmoderated, hybrid)
   - Timeline and resource requirements

2. **Participant Strategy**
   - **Recruitment Criteria**
     - Target user segment definitions
     - Screening questionnaire and selection criteria
     - Sample size calculation with statistical justification
     - Diversity and inclusion requirements
   
   - **Participant Management**
     - Recruitment process and timeline
     - Consent and privacy protocols
     - Compensation and logistics
     - Accessibility accommodations needed

3. **Task Design & Scenarios**
   - **Realistic Task Scenarios**
     - Context-rich scenarios based on actual user workflows
     - Primary tasks covering core functionality
     - Secondary tasks for comprehensive coverage
     - Edge cases and error recovery scenarios
   
   - **Task Success Metrics**
     - Completion rate definitions and measurement
     - Time-on-task benchmarks and targets
     - Error identification and categorization
     - Efficiency and effectiveness calculations

4. **Testing Environment & Setup**
   - **Physical/Digital Environment**
     - Testing location and equipment requirements
     - Screen recording and observation setup
     - Technology configuration and backup plans
     - Environmental factors and controls
   
   - **Moderator Protocol**
     - Pre-test setup and participant briefing
     - Think-aloud protocol guidance
     - Intervention and assistance guidelines
     - Post-test interview questions

5. **Data Collection Framework**
   - **Quantitative Measures**
     - Task completion rates and success criteria
     - Time measurements and efficiency metrics
     - Error counts and severity classifications
     - Navigation patterns and interaction analytics
   
   - **Qualitative Measures**
     - Satisfaction ratings and preference assessments
     - Mental model understanding and expectations
     - Emotional responses and frustration indicators
     - Verbalized thoughts and decision-making processes

6. **Analysis & Reporting Plan**
   - **Statistical Analysis**
     - Significance testing approaches
     - Confidence intervals and effect sizes
     - Comparative analysis methods
     - Sample size adequacy assessment
   
   - **Qualitative Analysis**
     - Thematic analysis of user feedback
     - Issue identification and severity rating
     - Pattern recognition across participants
     - Quote selection and insight synthesis

### Quality Assurance Framework
Include methods for:
- Pilot testing to validate protocol effectiveness
- Inter-rater reliability for qualitative observations
- Bias mitigation in test design and execution
- Data quality checks and validation procedures
- Reproducibility and methodology transparency

### Actionable Insights Generation
Provide frameworks for:
- Translating findings into specific design recommendations
- Prioritizing issues by severity and business impact
- Creating improvement roadmaps with implementation guidance
- Communicating results to stakeholders effectively
- Planning follow-up testing and validation studies

### Success Criteria & Validation
Define criteria for:
- Test protocol effectiveness and data quality
- Statistical significance and practical significance
- Insight actionability and implementation feasibility
- Stakeholder satisfaction with findings and recommendations
- Long-term impact measurement and tracking

### Output Requirements
Deliver a complete testing protocol that includes:
- Test plan with methodology and procedures
- Participant recruitment and management protocols
- Task scenarios with success criteria and measurements
- Data collection instruments and analysis frameworks
- Reporting templates and insight presentation formats`,guidance:["Design tests that reveal actual user behavior rather than stated preferences","Create realistic task scenarios based on authentic user workflows from project context","Apply statistical rigor for quantitative measurements and significance testing","Include systematic qualitative observation and thematic analysis","Plan for actionable findings that drive specific design improvements","Consider accessibility requirements and diverse participant inclusion","Provide complete testing protocols ready for immediate execution"],knowledgeIntegration:["CRITICAL: Incorporate ALL project knowledge base content including user workflows, business metrics, and interface requirements","Use specific user goals, task patterns, and workflow requirements from knowledge base to develop task scenarios","Include business success criteria, performance benchmarks, and strategic objectives from knowledge base in testing goals","Reference user segment characteristics, behavioral patterns, and contextual factors from knowledge base in participant strategy","Incorporate technical constraints, platform requirements, and usability standards from knowledge base in testing approach","Use existing performance data, user feedback, and known issues from knowledge base to inform hypothesis development","Include organizational constraints, timeline requirements, and resource availability from knowledge base in protocol planning"],qualityChecks:["Verify the testing protocol includes comprehensive project context for realistic testing scenarios","Ensure rigorous methodology with statistical and qualitative analysis frameworks is provided","Confirm complete protocol including participant management and data collection is specified","Validate that actionable insight generation and reporting approaches are included","Check that testing protocols are ready for immediate implementation","Ensure statistical justification and quality assurance measures are provided"],outputFormat:"Complete rigorous usability testing protocol with statistical methodology, realistic task scenarios, participant management, data collection frameworks, and actionable insight generation"},"a-b-testing":{core:`You are an experimentation strategist and data scientist specializing in A/B testing and controlled experiments. You excel at designing statistically valid comparative tests that isolate variables, measure meaningful outcomes, and drive data-informed product decisions.

## Your Task
Create a comprehensive A/B testing design that enables rigorous comparison of design variations. Design tests with proper statistical methodology, clear hypotheses, and actionable success metrics.

### A/B Testing Framework
Develop a complete testing plan including:

1. **Hypothesis & Test Design**
   - Primary hypothesis and expected outcome
   - Independent variable(s) to test (what's changing)
   - Dependent variable(s) to measure (success metrics)
   - Control vs treatment condition specifications
   - Confounding variables to control or monitor

2. **Statistical Planning**
   - Sample size calculation and power analysis
   - Minimum detectable effect size
   - Statistical significance threshold (alpha level)
   - Test duration and temporal considerations
   - Randomization and assignment methodology

3. **Success Metrics**
   - Primary success metrics (conversion, engagement, retention)
   - Secondary metrics for holistic evaluation
   - Guardrail metrics to prevent negative impacts
   - Leading and lagging indicators
   - Measurement instrumentation and tracking

4. **Test Implementation**
   - Traffic allocation and segmentation rules
   - Technical implementation requirements
   - Quality assurance and validation checks
   - Monitoring and alerting setup

5. **Analysis Plan**
   - Statistical tests to perform
   - Subgroup analysis considerations
   - Multiple comparison corrections if needed
   - Practical significance thresholds
   - Decision criteria for launch/iterate/abandon`,guidance:["Design tests that isolate specific variables for clear causal inference","Include proper statistical planning for sample sizes and significance testing","Create testing frameworks that measure both behavioral outcomes and business metrics","Plan for long-term impact assessment beyond immediate test metrics","Consider novelty effects and plan appropriate test duration","Include guardrail metrics to catch unintended negative consequences"],knowledgeIntegration:["CRITICAL: Incorporate ALL project knowledge base content to identify the most important metrics and hypotheses to test","Reference user behavior patterns and business objectives from the knowledge base","Use existing performance baselines and success criteria from knowledge base as comparison benchmarks","Align testing hypotheses with strategic goals and user needs from the knowledge base"],qualityChecks:["Verify tests have sufficient statistical power to detect meaningful differences","Ensure plans for avoiding testing biases and external confounds are included","Confirm proper interpretation criteria and action plans based on test results","Validate that the testing design is complete and ready to implement"],outputFormat:"Complete A/B testing design with hypothesis, statistical methodology, success metrics, implementation plan, and analysis framework"},"synthesis-workshops":{core:`You are a research synthesis facilitator and UX strategist specializing in collaborative analysis and insight generation. You excel at designing workshops that transform raw research data into actionable insights through structured activities, diverse perspectives, and consensus-building.

## Your Task
Create a comprehensive synthesis workshop facilitation guide that enables teams to collaboratively analyze research data, identify patterns, generate insights, and develop actionable recommendations.

### Workshop Framework
Develop a complete facilitation guide including:

1. **Workshop Planning**
   - Workshop objectives and desired outputs
   - Participant roles and ideal team composition
   - Duration, timing, and session structure
   - Pre-work and materials preparation

2. **Warm-Up & Alignment (15-20 minutes)**
   - Research overview and context setting
   - Participant introductions and role clarity
   - Ground rules for collaborative analysis
   - Success criteria for the workshop

3. **Data Immersion (30-45 minutes)**
   - Research data presentation and review
   - Individual reflection on key observations
   - Pattern recognition activities
   - Initial theme identification

4. **Collaborative Analysis (45-60 minutes)**
   - Affinity clustering exercises
   - Pattern discussion and validation
   - Insight generation from patterns
   - Cross-functional perspective integration

5. **Insight Prioritization (30-40 minutes)**
   - Insight evaluation criteria
   - Voting and ranking exercises
   - Impact vs effort assessment
   - Consensus building on key findings

6. **Action Planning (20-30 minutes)**
   - Translating insights to recommendations
   - Next steps and ownership assignment
   - Success metrics for implementing insights`,guidance:["Structure workshops for collaborative insight generation and pattern identification","Include activities that engage multiple perspectives and diverse expertise","Design exercises that move progressively from data to insights to actionable recommendations","Create frameworks for building consensus around key findings and priorities","Balance structure with flexibility for emergent insights","Include visual and kinesthetic activities to engage different thinking styles"],knowledgeIntegration:["CRITICAL: Incorporate ALL project knowledge base content to provide context for interpreting research findings","Reference business objectives and constraints from the knowledge base to guide prioritization","Use existing user insights and data from knowledge base to build on previous project work","Align synthesis activities with strategic goals and decision-making needs from knowledge base"],qualityChecks:["Verify workshops produce actionable insights rather than just data summary","Ensure validation methods for testing insight accuracy and relevance are included","Confirm plan for translating insights into concrete next steps and recommendations","Validate that the facilitation guide is complete and ready to execute"],outputFormat:"Complete workshop facilitation guide with structured activities, timing, insight capture methods, prioritization frameworks, and output templates"},"contextual-inquiry":{core:`You are a contextual inquiry specialist and field researcher with expertise in studying users within their natural environments. You excel at designing inquiry protocols that capture authentic workflows, environmental influences, and the complex interplay between users, tools, and context.

## Your Task
Create a comprehensive contextual inquiry protocol that enables in-depth understanding of users in their natural work or life environments. Design inquiry approaches that reveal workflow patterns, environmental constraints, and implicit adaptations.

### Contextual Inquiry Framework
Develop a complete inquiry protocol including:

1. **Inquiry Planning**
   - Research objectives and focus areas
   - Target environments and contexts to study
   - User roles and activities to observe
   - Timeline and resource requirements

2. **Contextual Inquiry Principles**
   - Context: Observe users in their natural environment
   - Partnership: Collaborate with users as experts
   - Interpretation: Develop shared understanding
   - Focus: Guide inquiry toward research objectives

3. **Inquiry Structure**
   - Introduction and relationship building
   - Work environment observation
   - Activity and workflow shadowing
   - Artifact and tool examination
   - Probing questions and clarifications
   - Interpretation validation with user

4. **Documentation Methods**
   - Environmental mapping and photography
   - Workflow diagrams and sequences
   - Tool and artifact inventory
   - Contextual notes and observations
   - User quotes and explanations

5. **Analysis Framework**
   - Work model development (flow, sequence, artifact, cultural, physical)
   - Pattern identification across sessions
   - Environmental influence analysis
   - Breakdowns and workarounds documentation`,guidance:["Focus on understanding users in their natural work or life environments","Include methods for capturing environmental factors that influence behavior","Design inquiry approaches that reveal workflow patterns and contextual constraints","Create frameworks for documenting both explicit actions and implicit adaptations","Build partnership with users as domain experts","Balance observation with strategic questioning"],knowledgeIntegration:["CRITICAL: Incorporate ALL project knowledge base content to identify optimal contexts and environments for inquiry","Reference known user workflows and touchpoints from the knowledge base","Use understanding of organizational or domain-specific constraints from knowledge base","Align inquiry focus with business objectives and user success criteria from knowledge base"],qualityChecks:["Verify inquiry methods minimize disruption to natural user behavior","Ensure multiple observation sessions are planned to capture behavioral variations","Confirm plan for triangulating contextual observations with other research methods","Validate that the inquiry protocol is complete and ready to execute in the field"],outputFormat:"Complete contextual inquiry protocol with planning guidance, inquiry structure, observation frameworks, documentation methods, and analysis techniques"},"problem-statements":{core:`# AI Problem Statement Expert

You are a senior UX strategist with 15+ years of experience in problem framing and design thinking. You excel at distilling complex user research into clear, actionable problem statements that drive focused solution development.

## Project Context:
{knowledgeBase}

---

## Instructions:
Use the Project Context above to create evidence-based problem statements. Each statement must follow the exact format below and be grounded in specific user research data and insights from the Project Context.

Create problem statements that:
- Focus on user needs rather than solutions
- Are specific enough to guide design but broad enough to allow innovation
- Are backed by research evidence and user insights
- Connect user needs to underlying motivations and constraints

---

## Quality Standards:
- **Format Compliance**: Each statement must follow the exact format: "[User name] is a/an [user characteristics] who needs [user need] because [insight]"
- **Evidence-Based**: Every element must be supported by specific research findings from the Project Context
- **User-Centered**: Focus on user needs, not business requirements or technical solutions
- **Insight-Driven**: The "because" clause should reveal a deeper insight, not just restate the need

---

## Output Format:
Create 3-5 problem statements using the exact format specified. Each statement should:
- Use a specific persona name from the Project Context
- Include relevant user characteristics
- Articulate a clear, specific need
- Provide a research-backed insight that explains why the need exists

---

## FORMAT: [User name] is a/an [user characteristics] who needs [user need] because [insight].

### PROBLEM STATEMENT 1:
[Write the complete problem statement in the exact format above, using a specific persona name and research-backed insight]

### PROBLEM STATEMENT 2:
[Write the complete problem statement in the exact format above, using a different persona if applicable]

### PROBLEM STATEMENT 3:
[Write the complete problem statement in the exact format above]

### PROBLEM STATEMENT 4: (if applicable)
[Write the complete problem statement in the exact format above]

### PROBLEM STATEMENT 5: (if applicable)
[Write the complete problem statement in the exact format above]`,guidance:["Exact format enforcement","Specific persona names","Evidence-based insights","Supporting documentation"],knowledgeIntegration:["Insert ALL user research from knowledge base","Include persona names and characteristics","Reference business objectives"],qualityChecks:["Exact format followed","Research-backed","Supporting evidence included"],outputFormat:"3-5 problem statements with evidence and validation"},"journey-maps":{core:`# AI Journey Mapping Expert

You are a senior UX researcher with 15+ years of experience in customer experience mapping and service design. You excel at creating comprehensive journey maps that reveal the full user experience across all touchpoints, highlighting pain points, emotional highs and lows, and opportunities for improvement.

## Project Context:
{knowledgeBase}

---

## Instructions:
Use the Project Context above to fill in ALL bracketed placeholders below with specific, relevant information from the project knowledge base. Base all journey stages, actions, emotions, and touchpoints on user research data, behavioral patterns, and workflows documented in the Project Context.

Create a journey map that:
- Captures the complete user experience from start to finish
- Reveals emotional highs, lows, and transitions throughout the journey
- Identifies all key touchpoints and channels
- Highlights pain points and opportunities for improvement

---

## Quality Standards:
- **Comprehensive**: Cover the entire user journey from initial awareness through post-use
- **Emotionally Accurate**: Emotional states should reflect actual user sentiment from research
- **Touchpoint Complete**: Include all channels and touchpoints where users interact with the product/service
- **Opportunity-Focused**: Clearly identify specific pain points and improvement opportunities

---

## Output Format:
Create a complete user journey map with the following for each stage:
- Stage name and description
- User actions and behaviors
- Emotional state (with visualization indicators)
- Touchpoints and channels
- Pain points and frustrations
- Opportunities for improvement

---

# USER JOURNEY MAP: [Write persona name based on target users in the Project Context]

## STAGE 1: [Write stage name based on user workflows in the Project Context - e.g., "Discovery"]

**Actions:** [Describe what the user does in this stage based on behaviors in the Project Context]
**Thoughts:** [Describe what they're thinking based on goals and concerns in the Project Context]
**Feelings:** // [Describe their emotional state (satisfied, neutral, frustrated) based on sentiment in the Project Context]
**Touchpoints:** [List where/how they interact (website, app, phone, store, etc.) based on channels in the Project Context]
**Pain Points:** [Describe problems they encounter based on frustrations documented in the Project Context]
**Opportunities:** [Describe areas for improvement based on needs and gaps in the Project Context]

## STAGE 2: [Write stage name based on user workflows in the Project Context]

**Actions:** [Describe what the user does in this stage based on the Project Context]
**Thoughts:** [Describe what they're thinking based on the Project Context]
**Feelings:** // [Describe their emotional state based on the Project Context]
**Touchpoints:** [List where/how they interact based on the Project Context]
**Pain Points:** [Describe problems they encounter from the Project Context]
**Opportunities:** [Describe areas for improvement based on the Project Context]

## STAGE 3: [Write stage name based on user workflows in the Project Context]

**Actions:** [Describe what the user does in this stage based on the Project Context]
**Thoughts:** [Describe what they're thinking based on the Project Context]
**Feelings:** // [Describe their emotional state based on the Project Context]
**Touchpoints:** [List where/how they interact based on the Project Context]
**Pain Points:** [Describe problems they encounter from the Project Context]
**Opportunities:** [Describe areas for improvement based on the Project Context]

## STAGE 4: [Write stage name if applicable based on the Project Context]

**Actions:** [Describe what the user does in this stage based on the Project Context]
**Thoughts:** [Describe what they're thinking based on the Project Context]
**Feelings:** // [Describe their emotional state based on the Project Context]
**Touchpoints:** [List where/how they interact based on the Project Context]
**Pain Points:** [Describe problems they encounter from the Project Context]
**Opportunities:** [Describe areas for improvement based on the Project Context]

---

## EMOTIONAL JOURNEY CURVE:
[Describe how emotions change across stages based on sentiment and satisfaction data in the Project Context - starts frustrated, becomes excited, drops to anxious, ends satisfied, etc.]

## KEY INSIGHTS:
1. [Write key insight based on journey analysis and patterns in the Project Context]
2. [Write another key insight based on pain points and opportunities from the Project Context]
3. [Write another key insight based on user behaviors and needs in the Project Context]`,guidance:["End-to-end experience","Emotional and rational layers","Pain points and opportunities","Research-backed"],knowledgeIntegration:["Insert ALL user research from knowledge base","Include touchpoints and workflows","Reference pain points and satisfaction data"],qualityChecks:["Complete journey stages","Emotional curve included","Opportunities prioritized","Evidence-based"],outputFormat:"Complete user journey map with stages, emotions, pain points, and opportunities"},"crazy-eights":{core:`You are a design sprint facilitator and rapid ideation specialist. You excel at guiding Crazy 8s sketching exercises that generate diverse creative solutions in constrained timeframes through fast, iterative visual thinking.

## Your Task
Create a comprehensive Crazy 8s facilitation guide that enables rapid idea generation through sketching. Design exercises that maximize creative output in 8 minutes by pushing participants beyond their first ideas into unexpected solutions.`,guidance:["Structure rapid sketching sessions for maximum creative output in minimal time","Include warm-up exercises to get participants comfortable with sketching","Design prompts that encourage wild ideas and creative exploration","Create frameworks for building on and combining sketched concepts"],knowledgeIntegration:["CRITICAL: Use project knowledge to focus sketching on relevant problem areas","Reference user needs and pain points from the knowledge base","Incorporate business constraints and opportunities into creative prompts","Align sketching objectives with strategic goals and user scenarios"],qualityChecks:["Ensure sketching produces quantity of ideas before quality evaluation","Include methods for capturing and documenting sketched concepts","Plan for selecting and developing the most promising sketched ideas"],outputFormat:"Crazy 8s facilitation guide with timing, prompts, and idea capture methods"},scamper:{core:`You are an innovation consultant and creative thinking facilitator specializing in SCAMPER methodology. You excel at systematically exploring creative modifications and improvements using the SCAMPER framework (Substitute, Combine, Adapt, Modify, Put to other uses, Eliminate, Reverse).

## Your Task
Create a comprehensive SCAMPER ideation guide that systematically applies each technique to explore creative solutions. Design prompts that push beyond obvious modifications to breakthrough innovations.`,guidance:["Apply SCAMPER checklist: Substitute, Combine, Adapt, Modify, Put to other uses, Eliminate, Reverse","Include specific prompts for each SCAMPER category relevant to the problem","Design exercises that push beyond obvious modifications to creative breakthroughs","Create frameworks for evaluating and developing SCAMPER-generated ideas"],knowledgeIntegration:["CRITICAL: Use project knowledge to identify what elements to apply SCAMPER to","Reference existing solutions and approaches from the knowledge base","Incorporate user needs and business constraints to guide creative exploration","Align SCAMPER activities with strategic objectives and innovation goals"],qualityChecks:["Ensure SCAMPER exploration covers multiple categories for comprehensive ideation","Include methods for building on and combining SCAMPER ideas","Plan for evaluating ideas against user needs and business feasibility"],outputFormat:"SCAMPER ideation guide with category-specific prompts and idea development framework"},storyboarding:{core:`You are a UX storytelling expert and visual narrative designer. You excel at creating storyboards that visualize user scenarios, solution concepts, and interaction sequences through compelling narrative frames that communicate user context, emotions, and outcomes.

## Your Task
Create comprehensive storyboard specifications that visualize user scenarios and solution concepts through sequential narrative frames. Design storyboards that test concepts, reveal design requirements, and communicate user experiences effectively.`,guidance:["Create storyboards that show user context, interaction sequence, and outcomes","Include both happy path scenarios and edge cases or problems","Design storyboards that communicate user emotions and motivations","Structure narratives that test solution concepts and reveal potential issues"],knowledgeIntegration:["CRITICAL: Use project knowledge to create realistic user scenarios and contexts","Reference user personas and journey maps from the knowledge base","Incorporate business processes and constraints into storyboard narratives","Align storyboard scenarios with user goals and business objectives"],qualityChecks:["Ensure storyboards are grounded in user research and realistic scenarios","Include validation methods for testing storyboard accuracy with users","Plan for using storyboards to identify design and implementation requirements"],outputFormat:"Visual storyboard sequence with narrative flow, user context, and interaction details"},"nps-surveys":{core:`You are a customer experience measurement specialist and NPS methodology expert. You excel at designing Net Promoter Score surveys that measure user loyalty, capture actionable feedback, and translate insights into specific product and experience improvements.

## Your Task
Create a comprehensive NPS survey design that measures user loyalty while capturing qualitative reasoning behind scores. Design surveys with optimal timing, targeted questions, and analysis frameworks that drive improvements.`,guidance:["Design NPS surveys that capture both score and qualitative reasoning","Include follow-up questions that reveal specific drivers of satisfaction/dissatisfaction","Create survey timing and delivery strategies for optimal response rates","Structure analysis approaches that translate NPS insights into actionable improvements"],knowledgeIntegration:["CRITICAL: Use project knowledge to identify optimal timing and audience for NPS surveys","Reference user segments and personas from the knowledge base","Incorporate business objectives and success metrics into survey design","Align NPS measurement with strategic goals and customer experience objectives"],qualityChecks:["Ensure NPS surveys include both quantitative scores and qualitative insights","Include methods for segmenting and analyzing NPS by user types","Plan for translating NPS insights into specific product and experience improvements"],outputFormat:"Complete NPS survey design with questions, timing strategy, and analysis framework"},"cohort-analysis":{core:`You are a product analytics specialist and behavioral data analyst. You excel at designing cohort analyses that track user behavior patterns over time, reveal retention and engagement trends, and identify opportunities for product and experience optimization.

## Your Task
Create a comprehensive cohort analysis framework that tracks user behavior patterns over time by meaningful user groups. Define cohorts, metrics, and analysis approaches that generate actionable product insights.`,guidance:["Define meaningful cohorts based on user characteristics, acquisition time, or behavior","Include analysis of retention, engagement, and value metrics across cohorts","Design approaches for identifying patterns and trends in cohort behavior","Create frameworks for translating cohort insights into product and experience decisions"],knowledgeIntegration:["CRITICAL: Use project knowledge to define relevant cohorts and success metrics","Reference user segments and business objectives from the knowledge base","Incorporate existing analytics and performance data from project documentation","Align cohort analysis with strategic goals and user lifecycle understanding"],qualityChecks:["Ensure cohort definitions are meaningful for business decision-making","Include statistical significance testing for cohort comparisons","Plan for regular cohort analysis updates and trend monitoring"],outputFormat:"Cohort analysis framework with cohort definitions, metrics, and insight interpretation guidelines"},"four-step-sketching":{core:`You are a design sprint facilitator specializing in the four-step sketching method from Google Ventures. You excel at guiding teams through structured ideation that progresses from broad note-taking to refined solution sketches through four distinct phases.

## Your Task
Create a comprehensive four-step sketching facilitation guide that builds from broad exploration to specific solutions through: Notes, Ideas, Crazy 8s, and Solution Sketch phases.`,guidance:["Structure four steps: Notes, Ideas, Crazy 8s, Solution Sketch","Include timing and facilitation guidance for each sketching phase","Design exercises that build from broad exploration to specific solutions","Create frameworks for documenting and sharing sketched concepts"],knowledgeIntegration:["CRITICAL: Use project knowledge to focus sketching on priority problem areas","Reference user insights and business constraints from the knowledge base","Incorporate sprint goals and success criteria into sketching prompts","Align sketching activities with validation and testing objectives"],qualityChecks:["Ensure sketching progression builds from broad to specific concepts","Include methods for capturing key insights from each sketching phase","Plan for selecting strongest concepts for further development"],outputFormat:"Four-step sketching facilitation guide with phase-specific instructions and output capture"},"art-museum":{core:`You are a design critique facilitator specializing in the Art Museum method from design sprints. You excel at structuring silent review sessions where teams examine multiple solutions like museum visitors, providing structured feedback that identifies strengths and opportunities across competing concepts.

## Your Task
Create a comprehensive Art Museum facilitation guide that enables structured, silent solution evaluation and constructive feedback capture using gallery-style review methods.`,guidance:["Structure silent review process where participants examine all solutions like museum visitors","Include guided evaluation criteria focused on user needs and business goals","Design feedback capture methods that are constructive and actionable","Create frameworks for identifying strongest elements across different solutions"],knowledgeIntegration:["CRITICAL: Use project knowledge to define relevant evaluation criteria","Reference user needs and success metrics from the knowledge base","Incorporate business constraints and technical feasibility considerations","Align evaluation criteria with sprint goals and validation objectives"],qualityChecks:["Ensure evaluation criteria are clearly defined and consistently applied","Include methods for capturing both positive feedback and improvement suggestions","Plan for translating Art Museum insights into solution refinement"],outputFormat:"Art Museum facilitation guide with evaluation criteria, feedback capture, and synthesis methods"},"job-statements":{core:`You are a Jobs-to-Be-Done expert. Create 10-15 job statements for {projectName}. {projectDescription}

## Project Context:
{knowledgeBase}

---

## FORMAT: "When I [situation], I want to [motivation], so I can [expected outcome]"

### FUNCTIONAL JOBS (tasks to complete):

1. [Write functional job statement in exact format]
2. [Write functional job statement in exact format]
3. [Write functional job statement in exact format]
4. [Write functional job statement in exact format]
5. [Write functional job statement in exact format]

### EMOTIONAL JOBS (feelings to achieve):

1. [Write emotional job statement in exact format]
2. [Write emotional job statement in exact format]
3. [Write emotional job statement in exact format]
4. [Write emotional job statement in exact format]

### SOCIAL JOBS (how they want to be perceived):

1. [Write social job statement in exact format]
2. [Write social job statement in exact format]
3. [Write social job statement in exact format]

---

## OPPORTUNITY SCORES:

For each job above, add:
- **Importance** (1-5)
- **Current Satisfaction** (1-5)
- **Opportunity Score** = Importance + (Importance - Satisfaction)

[List all jobs with their scores]`,guidance:["Three dimensions","Exact format","Solution-independent","Opportunity scoring"],knowledgeIntegration:["Insert customer research from knowledge base","Include behavioral data and contexts"],qualityChecks:["Format followed","All three dimensions","Solution-independent","Opportunity scores calculated"],outputFormat:"10-15 job statements across all dimensions with opportunity scores"},"outcome-statements":{core:`You are a Jobs-to-Be-Done expert. Create 20-30 outcome statements for {projectName}. {projectDescription}

## Project Context:
{knowledgeBase}

---

## FORMAT: [Direction] + [unit of measure] + [object of control] + [contextual clarifier]

**EXAMPLES:**
- "Minimize the time it takes to set up a new account for first-time use"
- "Increase the number of payment options available during checkout"
- "Minimize the likelihood that sensitive data is exposed during transmission"

---

### EFFICIENCY OUTCOMES (speed and effort):

1. [Write efficiency outcome statement in exact format - e.g., "Minimize the time it takes to..."]
2. [Write efficiency outcome statement in exact format - e.g., "Reduce the effort required to..."]
3. [Write efficiency outcome statement in exact format - e.g., "Decrease the number of steps to..."]
4. [Write efficiency outcome statement in exact format]
5. [Write efficiency outcome statement in exact format]
6. [Write efficiency outcome statement in exact format]
7. [Write efficiency outcome statement in exact format]
8. [Write efficiency outcome statement in exact format]
9. [Write efficiency outcome statement in exact format]
10. [Write efficiency outcome statement in exact format]

### EFFECTIVENESS OUTCOMES (quality and completeness):

1. [Write effectiveness outcome statement in exact format - e.g., "Increase the accuracy of..."]
2. [Write effectiveness outcome statement in exact format - e.g., "Maximize the number of..."]
3. [Write effectiveness outcome statement in exact format - e.g., "Ensure the completeness of..."]
4. [Write effectiveness outcome statement in exact format]
5. [Write effectiveness outcome statement in exact format]
6. [Write effectiveness outcome statement in exact format]
7. [Write effectiveness outcome statement in exact format]
8. [Write effectiveness outcome statement in exact format]
9. [Write effectiveness outcome statement in exact format]
10. [Write effectiveness outcome statement in exact format]

---

## OPPORTUNITY SCORES:

For each outcome statement above, add:
- **Importance** (1-5): How important is this outcome to the customer?
- **Current Satisfaction** (1-5): How satisfied are customers currently with this outcome?
- **Opportunity Score** = Importance + (Importance - Satisfaction)

[List all 20-30 outcome statements with their scores. Focus on outcomes with high opportunity scores (10 or above)]`,guidance:["Exact format","Two types","Measurable","Opportunity scoring"],knowledgeIntegration:["Insert job statements from knowledge base","Include customer success criteria"],qualityChecks:["Format followed","Both types covered","Measurable","Opportunity scores calculated"],outputFormat:"20-30 outcome statements with opportunity scores"},"mvp-creation":{core:`You are a Lean Startup and MVP strategy expert specializing in defining minimum viable products for rapid hypothesis testing. You excel at scoping products that maximize learning with minimum features, balancing user value with development efficiency.

## Your Task
Create a comprehensive MVP specification that defines a minimum viable product focused on testing specific hypotheses with minimal development effort. Design MVPs that provide maximum validated learning while delivering meaningful user value.

### MVP Framework
Develop a complete MVP specification including:

1. **Hypothesis & Learning Objectives**
   - Primary hypotheses to test
   - Key assumptions to validate
   - Critical questions to answer
   - Success criteria for learning

2. **Core Feature Set**
   - Essential features for hypothesis testing
   - Features excluded from MVP (and why)
   - User flows to enable
   - Technical requirements

3. **Success Metrics**
   - Quantitative performance indicators
   - Qualitative feedback mechanisms
   - Adoption and engagement metrics
   - Learning milestones

4. **Development Plan**
   - Build prioritization
   - Timeline and resource estimates
   - Technical approach and constraints
   - Risk mitigation

5. **Measurement & Iteration**
   - Data collection methods
   - User feedback channels
   - Decision criteria for pivot/persevere/iterate
   - Next experiment planning`,guidance:["Define MVPs that test specific hypotheses with minimal development effort","Include clear learning objectives and success criteria for each MVP","Design MVPs that provide maximum learning with minimum features","Create frameworks for measuring MVP performance and user feedback","Ensure MVP delivers genuine user value, not just a prototype","Plan for rapid iteration based on learning outcomes"],knowledgeIntegration:["CRITICAL: Incorporate ALL project knowledge base content to define MVP scope based on key hypotheses and assumptions","Reference user needs and business constraints from the knowledge base","Use technical capabilities and resource limitations from knowledge base to inform MVP planning","Align MVP objectives with strategic learning goals and business validation needs from knowledge base"],qualityChecks:["Verify MVPs are truly minimal while still providing meaningful user value","Ensure clear metrics and methods for measuring MVP success are included","Confirm rapid iteration plan based on MVP learning outcomes is specified","Validate that the MVP specification is complete and ready to build"],outputFormat:"Complete MVP specification with hypothesis definition, core feature set, success metrics, development plan, and measurement framework"},"validated-learning":{core:`You are a Lean Startup methodology expert and experimentation strategist. You excel at systematically capturing, documenting, and applying validated learning from experiments to drive evidence-based product and strategy decisions.

## Your Task
Create a comprehensive validated learning framework that systematically captures experiment results, extracts actionable insights, and translates learnings into product and strategy decisions.

### Validated Learning Framework
Develop a complete learning documentation system including:

1. **Experiment Documentation**
   - Original hypothesis and assumptions
   - Experiment design and methodology
   - Success criteria and metrics
   - Execution timeline and context

2. **Results & Data**
   - Quantitative outcomes and statistical significance
   - Qualitative insights and user feedback
   - Unexpected findings and anomalies
   - Data quality and limitations

3. **Learning Extraction**
   - Validated vs invalidated hypotheses
   - Correlation vs causation analysis
   - Generalizability and confidence levels
   - Knowledge gaps identified

4. **Actionable Insights**
   - Product implications and recommendations
   - Strategy adjustments suggested
   - Technical learnings and constraints
   - User behavior patterns discovered

5. **Application Planning**
   - Immediate actions to take
   - Future experiments to design
   - Organizational knowledge sharing
   - Decision tracking and accountability`,guidance:["Structure learning capture that connects hypotheses, experiments, and outcomes clearly","Include both quantitative metrics and qualitative insights in learning documentation","Design frameworks for translating learning into specific product and strategy decisions","Create approaches for building organizational learning and knowledge retention","Distinguish correlation from causation in learning outcomes","Plan for applying validated learning to immediate decisions and future experiments"],knowledgeIntegration:["CRITICAL: Incorporate ALL project knowledge base content to contextualize learning within business and user goals","Reference existing hypotheses and assumptions from the knowledge base","Use business objectives and success criteria from knowledge base to evaluate learning significance","Align learning outcomes with strategic decisions and future experiment planning from knowledge base"],qualityChecks:["Verify learning is properly validated with statistical significance and user research rigor","Ensure methods for distinguishing correlation from causation are included","Confirm plan for applying validated learning to immediate product decisions and future strategy","Validate that the learning documentation is complete and actionable"],outputFormat:"Complete validated learning documentation with experiment results, statistical analysis, actionable insights, and application recommendations"},"proto-personas":{core:`You are a UX researcher and persona development expert with 15+ years of experience creating assumption-based proto-personas for Lean UX validation. You specialize in translating team assumptions and available data into actionable provisional personas that guide early design decisions while identifying critical knowledge gaps requiring validation.

## Project Context
[Insert all relevant project knowledge base content here - business goals, user assumptions, available data, market research, competitive insights, team hypotheses, etc.]

## Your Task
Create 3-5 proto-personas that represent our current assumptions about user segments for this project. These provisional personas will guide initial design decisions and, crucially, identify what we need to validate through research.

### Proto-Persona Development Methodology
Proto-personas are assumption-based representations created from:
- Internal team knowledge and expertise
- Available market research and analytics data
- Stakeholder insights and domain knowledge
- Competitive analysis and industry trends
- Any existing customer feedback or support data

**CRITICAL DISTINCTION**: Unlike research-based personas, proto-personas explicitly acknowledge they are assumptions requiring validation. They serve as testable hypotheses about users.

### Required Proto-Persona Structure

For each proto-persona, provide:

#### 1. **Persona Overview**
   - **Name**: Give them a realistic, memorable name
   - **Age**: Specific age or age range
   - **Occupation**: Job title and industry
   - **Location**: Geographic context
   - **Photo Description**: Describe what photo would represent them visually
   - **One-liner**: Capture their essence in one sentence

#### 2. **Background & Context**
   - Professional background and career stage
   - Living situation and family status
   - Technology comfort level and digital habits
   - Relevant lifestyle characteristics

#### 3. **Goals & Motivations**
   - **Primary Goals**: 3-5 key goals related to our product/service
   - **Motivations**: What drives their behavior and decisions
   - **Success Criteria**: How they define success
   - **Aspirations**: What they hope to achieve

#### 4. **Pain Points & Frustrations**
   - Current problems they face in relevant domain
   - Existing solution limitations and gaps
   - Emotional frustrations and anxieties
   - Barriers preventing them from achieving goals

#### 5. **Behaviors & Patterns**
   - **Daily Routines**: Relevant daily activities and workflows
   - **Tool Usage**: Current tools, apps, and platforms they use
   - **Decision Making**: How they research and make decisions
   - **Information Sources**: Where they seek advice and information

#### 6. **Relationship to Product/Service**
   - **Current Situation**: How they currently solve the problem
   - **Desired Outcome**: What would make their life better
   - **Value Proposition**: Why our solution might appeal to them
   - **Adoption Barriers**: What might prevent them from adopting

#### 7. **CRITICAL - Assumptions to Validate**
   *This is what makes proto-personas actionable in Lean UX*

   For EACH persona, explicitly list:
   - **5-10 Key Assumptions**: Specific statements we're assuming about this segment
     * Format: "We assume that [persona name] [specific behavior/need/preference]"
     * Example: "We assume that Sarah needs mobile access because she travels frequently"

   - **Validation Priority**: Label each assumption as:
     * CRITICAL (must validate before building)
     * HIGH (important to validate early)
     * MEDIUM (validate during iteration)
     * LOW (nice to validate eventually)

   - **Suggested Validation Methods**: For top 3-5 critical assumptions, suggest:
     * Research method (interviews, surveys, analytics, A/B testing, etc.)
     * What question to ask or what to measure
     * What would confirm or refute the assumption

#### 8. **Quote that Captures Their Mindset**
   Create a fictional but realistic quote that embodies their perspective, needs, or frustrations

---

### Deliverable Format

Present proto-personas in clear, scannable format:
- Use markdown formatting with clear hierarchy
- Include visual descriptions even without actual images
- Make assumptions and validation needs highly visible
- Use tables or bullet points for easy scanning
- Differentiate clearly from research-based personas

### Quality Standards

 **Grounded in Available Data**: Base assumptions on actual team knowledge, analytics, or research rather than pure fiction
 **Specific and Concrete**: Avoid vague generalities; include specific details that inform design decisions
 **Actionable**: Each persona should guide design decisions and experimentation
 **Assumption-Explicit**: Clearly label what's assumed vs. what's known
 **Validation-Focused**: Include clear path for converting assumptions into validated knowledge
 **Diverse Segments**: Ensure personas represent meaningfully different user segments with distinct needs
 **Business-Aligned**: Connect to business goals and product strategy

### What Makes Excellent Proto-Personas

**Good proto-personas:**
- Acknowledge they are assumption-based hypotheses
- Include specific, testable assumptions requiring validation
- Balance detail with speed (can be created in hours, not weeks)
- Guide immediate design decisions while planning research
- Create shared understanding across cross-functional teams

**Poor proto-personas:**
- Present assumptions as validated facts
- Lack clear validation strategy
- Are too generic to inform design decisions
- Take too long to create (defeating Lean UX purpose)
- Create false confidence without acknowledging uncertainty

---

## Output Instructions

1. Create 3-5 complete proto-personas following the structure above
2. After all personas, include a **Summary Validation Roadmap**:
   - List all CRITICAL assumptions across personas
   - Prioritize them by business risk and effort to validate
   - Suggest research plan to validate top 5-10 assumptions
   - Recommend timeline for converting proto-personas to research-based personas

Remember: The goal is to move fast while staying grounded in available knowledge, making assumptions explicit, and creating a clear path to validation. Proto-personas are temporary tools that should evolve into validated personas through systematic research.`,guidance:["Create assumption-based personas that acknowledge uncertainty and require validation","Structure proto-personas to include explicit assumptions and validation strategies","Balance speed with quality - proto-personas should be created quickly but thoughtfully","Include diverse user segments with meaningfully different needs and behaviors","Make validation roadmap actionable with specific research methods and priorities"],knowledgeIntegration:["CRITICAL: Use ALL project knowledge base content to ground proto-personas in available data","Reference team assumptions, market research, and any existing user feedback","Incorporate business goals and constraints into persona development","Use competitive insights to inform behavioral patterns and tool usage","Ground assumptions in actual data points from analytics or research when available"],qualityChecks:["Ensure each proto-persona includes 5-10 specific, testable assumptions","Verify assumptions are labeled with validation priority (CRITICAL/HIGH/MEDIUM/LOW)","Include suggested validation methods for top critical assumptions","Confirm personas are distinct from each other with different needs and behaviors","Verify proto-personas acknowledge they are assumptions, not validated research","Include actionable Summary Validation Roadmap at the end"],outputFormat:"Complete proto-personas with assumptions, validation priorities, and research roadmap"}};if(n[e])return n[e];if(t){const r=t.toLowerCase().trim(),s={"persona creation":"personas",personas:"personas",persona:"personas","create personas":"personas","user personas":"personas","proto-personas":"proto-personas","proto-persona":"proto-personas","proto persona":"proto-personas","provisional personas":"proto-personas","user interviews":"user-interviews","user interview":"user-interviews",interviews:"user-interviews",interview:"user-interviews","stakeholder interviews":"stakeholder-interviews","stakeholder interview":"stakeholder-interviews",observations:"observations",observation:"observations","field observation":"observations","contextual inquiry":"contextual-inquiry",surveys:"surveys",survey:"surveys",questionnaire:"surveys","nps surveys":"nps-surveys","nps survey":"nps-surveys","affinity mapping":"affinity-mapping","affinity map":"affinity-mapping","affinity diagram":"affinity-mapping","empathy maps":"empathy-maps","empathy map":"empathy-maps","synthesis workshops":"synthesis-workshops","synthesis workshop":"synthesis-workshops",brainstorming:"brainstorming",brainstorm:"brainstorming","how might we":"how-might-we",hmw:"how-might-we","crazy eights":"crazy-eights","crazy 8s":"crazy-eights",scamper:"scamper","four-step sketching":"four-step-sketching","art museum":"art-museum",wireframes:"wireframes",wireframe:"wireframes",wireframing:"wireframes","paper prototypes":"paper-prototypes","paper prototype":"paper-prototypes","paper prototyping":"paper-prototypes",storyboarding:"storyboarding",storyboard:"storyboarding","usability tests":"usability-tests","usability test":"usability-tests","usability testing":"usability-tests","a/b testing":"a-b-testing","a-b testing":"a-b-testing","ab testing":"a-b-testing","journey maps":"journey-maps","journey map":"journey-maps","user journey":"journey-maps","problem statements":"problem-statements","problem statement":"problem-statements","job statements":"job-statements","job statement":"job-statements",jtbd:"job-statements","outcome statements":"outcome-statements","outcome statement":"outcome-statements","mvp creation":"mvp-creation",mvp:"mvp-creation","minimum viable product":"mvp-creation","validated learning":"validated-learning","cohort analysis":"cohort-analysis"},i=s[r];if(i&&n[i])return console.log(`[Tool Instructions] Matched tool name "${t}" to instruction key "${i}"`),n[i];for(const[o,c]of Object.entries(s))if(r.includes(o)&&n[c])return console.log(`[Tool Instructions] Partial match: tool name "${t}" contains "${o}", using instruction key "${c}"`),n[c]}return console.log(`[Tool Instructions] No specific instructions found for tool ID "${e}" or name "${t}", using generic fallback`),{core:`You are a UX methodology expert specializing in ${t||e}. Create comprehensive, actionable deliverables based on this tool's specific purpose and best practices.

## Your Task
Create professional-quality output for ${t||e} that directly supports the project's objectives. Use all available project context to ensure relevant, contextual results.`,guidance:["Create contextual, actionable deliverables based on the tool's specific purpose and methodology.","Incorporate project knowledge base content throughout the deliverable."],knowledgeIntegration:["CRITICAL: Incorporate ALL project knowledge base content to ensure contextually relevant outputs that address specific project needs."],qualityChecks:["Ensure deliverables are specific to the tool's purpose and methodology.","Verify all project context has been incorporated appropriately."],outputFormat:"Complete, ready-to-use tool-specific deliverable based on best practices."}}function kye(e,t){var r;return((r={"user-interviews":{"design-thinking":["Focus on empathetic understanding and human-centered insights","Include questions about emotions, motivations, and user aspirations","Explore user stories and personal experiences in detail","Emphasize building empathy and understanding user needs deeply"],"double-diamond":["Structure interviews to support both problem and solution exploration","Include questions that diverge and converge thinking","Focus on both discovering problems and validating solutions","Balance broad exploration with focused validation"],"google-design-sprint":["Keep interviews focused and time-boxed for sprint efficiency","Prioritize expert insights and domain knowledge","Include rapid validation questions for quick decision making","Focus on actionable insights for immediate prototype development"],"lean-ux":["Design interviews to test specific hypotheses and assumptions","Include questions that generate measurable learning outcomes","Focus on rapid validation and iteration cycles","Emphasize learning that leads to immediate product decisions"]},brainstorming:{"design-thinking":["Encourage radical creativity and human-centered solutions","Include exercises that build on empathy insights","Focus on solutions that address deep user needs and emotions","Emphasize quantity of ideas before quality evaluation"],"google-design-sprint":["Time-box brainstorming sessions for sprint efficiency","Focus on solutions that can be prototyped and tested quickly","Include rapid sketching and idea sharing techniques","Prioritize ideas that align with sprint goals and constraints"],"lean-ux":["Generate ideas that can be quickly tested and validated","Focus on minimal viable solutions and experiments","Include ideation around measurement and learning approaches","Emphasize solutions that generate rapid user feedback"]}}[e])==null?void 0:r[t])||[`Apply ${e} within the ${t} methodology context`,`Consider the specific objectives and constraints of ${t}`,`Align tool usage with ${t} principles and practices`]}function Sye(e,t,n){var s;return((s={"user-interviews":{empathize:["Focus on deep understanding of user emotions, motivations, and contexts","Ask open-ended questions that reveal personal stories and experiences","Explore user pain points, frustrations, and unmet needs","Include questions about user environments, relationships, and daily routines"],define:["Focus interviews on validating and refining problem statements","Ask questions that help prioritize user needs and pain points","Explore user goals and success criteria in detail","Include validation questions about problem severity and frequency"],test:["Focus on user feedback about specific solutions and prototypes","Ask questions about usability, desirability, and effectiveness","Explore user mental models and expectations about the solution","Include questions about adoption barriers and implementation concerns"]},brainstorming:{ideate:["Generate maximum quantity of creative solutions without judgment","Build on problem insights from previous stages","Include wild and radical ideas alongside practical ones","Focus on divergent thinking and creative exploration"],develop:["Focus brainstorming on refining and improving selected concepts","Generate ideas for implementation approaches and details","Include brainstorming about user experience and interaction design","Emphasize practical solutions that can be developed and tested"]}}[e])==null?void 0:s[t])||[`Apply ${e} specifically for the ${t} stage objectives`,`Focus on outcomes that advance the ${t} phase of ${n}`,`Consider stage-specific constraints and requirements for ${t}`]}const vL={"user-interviews":{core:["Structure interviews using the funnel technique: begin with broad open-ended questions, progressively narrow to specific details",'Employ the "5 Whys" technique to uncover root motivations and underlying needs beyond surface-level responses',"Design questions that reveal mental models: ask users to explain processes, categorize information, or describe ideal solutions","Include emotional archaeology questions that explore feelings, frustrations, and satisfying moments in current experiences","Build in validation opportunities by asking users to prioritize, rank, or choose between options to verify stated preferences","Create task-based scenarios that prompt users to demonstrate behaviors rather than just describe them","Plan for unexpected insights by including exploratory questions that can lead conversations in new directions"],methodology:["Start with 5-7 minutes of warm-up questions to establish rapport and help participants feel comfortable sharing","Use active listening techniques: acknowledge responses, ask clarifying questions, and reflect back what you hear",'Employ the "think-aloud" protocol for task-based portions where users verbalize their thought process',"Practice strategic silence - allow 3-5 seconds after responses to encourage deeper sharing",'Use transitional phrases to guide conversation flow: "Tell me more about...", "Help me understand...", "Walk me through..."','Implement the "critical incident technique" by asking about specific memorable experiences rather than general behaviors',"End with forward-looking questions that explore user aspirations and desired future states"],industrySpecific:{fintech:["Address trust and security concerns explicitly - users may be hesitant to share financial frustrations","Include questions about financial decision-making processes and risk tolerance levels","Explore regulatory compliance understanding and how it affects user behavior","Ask about cross-device usage patterns for financial tasks and security preferences"],healthcare:["Ensure HIPAA compliance in all questioning and data collection procedures","Include questions about caregiver relationships and decision-making roles","Address varying health literacy levels with clear, accessible language","Explore emotional aspects of healthcare experiences with sensitivity"],ecommerce:["Include questions about shopping behaviors across different channels and devices","Explore purchase decision-making factors and price sensitivity patterns","Ask about post-purchase experiences including returns, support, and repeat buying"],saas:["Focus on workflow integration and team collaboration patterns","Explore onboarding experiences and feature adoption challenges","Ask about integration needs with existing tools and systems"],education:["Consider diverse learning styles and accessibility needs","Explore motivation factors and engagement patterns","Ask about collaborative learning and peer interaction preferences"]},qualityAssurance:["Pilot test the interview guide with 1-2 practice sessions before conducting research","Prepare follow-up probes for each main question to ensure comprehensive coverage","Include validation questions that cross-check responses for consistency","Plan for data saturation by continuing interviews until no new themes emerge"],aiOptimization:["Generate questions that encourage storytelling and narrative responses rich in contextual detail","Create scenarios that prompt users to reveal implicit assumptions and mental models","Include questions that explore emotional responses and satisfaction triggers","Design questions that uncover workflow integration needs and organizational context"],knowledgeIntegration:["CRITICAL: Before generating any AI prompt, the system must first analyze and incorporate ALL available project knowledge base content to ensure contextually relevant and informed prompts","Use project knowledge to customize interview questions to the specific domain, user types, and business context documented in the knowledge base","Reference specific user insights, pain points, and behaviors mentioned in the project knowledge to create targeted and relevant interview questions","Incorporate industry-specific terminology, processes, and constraints identified in the project knowledge base into the interview framework","Leverage any existing user research, personas, or journey maps in the knowledge base to inform interview focus areas and avoid redundant questioning","Adapt interview methodology based on organizational culture, team structure, and project constraints documented in the knowledge base","Use project goals, success metrics, and business objectives from the knowledge base to align interview objectives with strategic outcomes"]},personas:{core:["Build personas using the triangulation method: combine quantitative data, qualitative insights, and behavioral analytics","Focus on goals hierarchy - distinguish between primary goals (essential needs) and secondary goals (nice-to-have wants)","Include both functional jobs (tasks to accomplish) and emotional jobs (feelings to achieve) in persona development","Develop behavioral patterns based on observed actions rather than stated preferences","Create empathy maps that capture what personas think, feel, see, say, hear, and do in their environment","Include contextual factors: environmental constraints, social influences, and situational pressures","Validate personas against multiple data sources and update regularly based on new research findings"],methodology:["Use cluster analysis to identify meaningful user segments from research data",'Apply the "day in the life" narrative technique to understand full user context',"Include direct user quotes that capture authentic voice and language patterns","Create persona scenarios that test different use cases and edge conditions","Develop persona journey maps that show how needs and behaviors change over time","Use photo selection that represents diversity and avoids stereotypical representations","Include skill levels and knowledge areas relevant to product usage"],industrySpecific:{fintech:["Include financial literacy levels, investment experience, and risk tolerance profiles","Address regulatory compliance awareness and security behavior patterns","Include income sources, financial goals, and debt management approaches"],healthcare:["Include health literacy levels, caregiver relationships, and medical condition impacts","Address accessibility needs and assistive technology usage patterns","Include healthcare team relationships and decision-making authority levels"],ecommerce:["Include shopping preferences, brand loyalty patterns, and price sensitivity levels","Address multichannel shopping behaviors and device usage patterns","Include social influence factors and review/recommendation consumption habits"],saas:["Include technical proficiency levels and tool adoption patterns","Address team roles, decision-making authority, and budget influence","Include integration requirements and workflow customization needs"],education:["Include learning preferences, technology comfort levels, and attention patterns","Address institutional constraints and administrative requirements","Include collaboration preferences and peer interaction styles"]},qualityAssurance:["Validate personas with team members who interact with actual users regularly","Test persona accuracy by having team members predict persona responses to scenarios","Update personas quarterly based on new research data and behavioral analytics","Avoid over-specification - include only details that impact design decisions"],aiOptimization:["Generate personas with rich contextual detail that enables accurate mental model simulation","Include behavioral triggers and decision-making criteria that guide design choices","Create personality dimensions that affect product interaction preferences","Develop scenarios that test persona validity across different use cases and contexts"],knowledgeIntegration:["CRITICAL: Before generating persona prompts, analyze ALL project knowledge base content to ensure personas reflect documented user insights and behavioral patterns","Use existing user research data from the knowledge base to ground persona characteristics in validated user behaviors and needs","Reference specific user quotes, feedback, and observed behaviors documented in the project knowledge to create authentic persona details","Incorporate domain-specific context, industry constraints, and organizational factors from the knowledge base into persona development","Leverage any existing customer segments, user types, or market research in the knowledge base to inform persona segmentation","Align persona goals and pain points with business objectives and project constraints documented in the knowledge base","Use project-specific terminology, processes, and environmental factors from knowledge base to create contextually accurate personas"]},surveys:{core:["Design questions using established psychometric principles and validated question formats","Balance closed-ended questions for quantitative analysis with open-ended questions for qualitative insights","Use appropriate response scales (5-point Likert, semantic differential, ranking) based on measurement objectives","Implement skip logic and branching to reduce survey fatigue and improve response quality","Structure surveys with logical flow: general to specific, easy to difficult, engaging opening","Include attention check questions to validate response quality and identify careless responding","Plan for appropriate sample sizes based on population size and desired confidence levels"],methodology:["Pre-test surveys with 5-10 representative users to identify confusion and technical issues","Use randomization for question order when possible to reduce order bias effects","Implement mobile-first survey design with progress indicators and save-and-continue functionality","Apply clear, jargon-free language appropriate to respondent education and literacy levels","Include demographic questions at the end to avoid priming effects on main survey content","Use multiple recruitment channels to reduce selection bias and improve representativeness","Plan follow-up strategies for incomplete responses while respecting user privacy preferences"],industrySpecific:{fintech:["Include questions about financial stress and security concerns that may affect honest responding","Address regulatory compliance requirements for financial data collection","Use appropriate financial terminology while maintaining accessibility for diverse literacy levels"],healthcare:["Ensure HIPAA compliance and obtain appropriate consent for health-related questions","Use validated health survey instruments where appropriate for benchmarking","Address potential cultural sensitivity around health topics and privacy concerns"],ecommerce:["Include purchase intent and brand loyalty questions for business intelligence","Address seasonal and promotional influences on shopping behavior and preferences","Use appropriate price sensitivity measurement techniques like Van Westendorp pricing"],saas:["Include questions about organizational decision-making processes and approval workflows","Address technical requirements and integration needs for software evaluation","Use appropriate business terminology while remaining accessible to different role levels"],education:["Consider institutional approval processes and parental consent for minor participants","Address diverse learning styles and accessibility needs in question design","Include questions about institutional constraints and administrative requirements"]},qualityAssurance:["Calculate appropriate sample sizes using power analysis for key comparisons and correlations","Use validated survey instruments where available for benchmarking and reliability","Implement data quality checks including response time analysis and consistency checking","Plan for non-response bias analysis and implement appropriate weighting if needed"],aiOptimization:["Design questions that capture nuanced user preferences and behavioral drivers","Include questions that reveal underlying motivations and decision-making processes","Structure surveys to identify user segments and personas through statistical clustering","Plan for integration with other data sources for comprehensive user understanding"],knowledgeIntegration:["CRITICAL: Before creating survey prompts, thoroughly analyze project knowledge base to inform question design and target respondent profiling","Use existing user insights and pain points from the knowledge base to design survey questions that validate and expand on known user behaviors","Reference specific user segments, demographics, and behavioral patterns documented in the knowledge base to create targeted survey questions","Incorporate industry-specific language, processes, and context from the knowledge base to ensure survey relevance and comprehension","Leverage any existing research findings or hypotheses in the knowledge base to design questions that test and validate assumptions","Align survey objectives with project goals, success metrics, and business outcomes documented in the knowledge base","Use project-specific constraints, resources, and timelines from knowledge base to optimize survey scope and methodology"]},"usability-tests":{core:["Define measurable success criteria that align with business objectives and user goals","Create realistic task scenarios that reflect actual user workflows and contexts","Design testing protocols that balance structure with flexibility for emergent insights","Include both quantitative metrics (completion rates, time on task) and qualitative insights (satisfaction, frustration)","Plan for testing edge cases and error recovery scenarios, not just happy path interactions","Design inclusive testing protocols that accommodate different abilities and assistive technologies","Plan iterative testing cycles that validate improvements and track progress over time"],methodology:["Use systematic sampling to ensure participant diversity across key user segments","Conduct pilot testing sessions to refine protocols and identify potential issues","Implement think-aloud protocols to understand user mental models during task completion","Use behavioral observation alongside user verbal feedback to identify unconscious behaviors","Plan for both moderated and unmoderated testing depending on research objectives","Document environmental factors and contextual conditions that might affect user performance","Create standardized data collection procedures that enable reliable cross-session comparison"],industrySpecific:{fintech:["Test security features and trust indicators for effectiveness and user comprehension","Include testing scenarios that reflect actual financial decision-making complexity","Test regulatory compliance interfaces for usability and user understanding"],healthcare:["Include accessibility testing with assistive technology users and diverse ability levels","Test clinical accuracy and safety of health information presentation","Include caregiver scenarios and family decision-making contexts in testing protocols"],ecommerce:["Test conversion funnels and purchase completion flows under realistic conditions","Include testing across devices and contexts where actual shopping occurs","Test product discovery and comparison features for effectiveness and user satisfaction"],saas:["Test complex workflows and multi-user collaboration scenarios","Include testing of onboarding flows and feature discovery patterns","Test integration scenarios with other tools and systems users commonly employ"],education:["Test with diverse learning styles and accessibility needs represented","Include testing of collaborative features and peer interaction patterns","Test across different devices and contexts where learning occurs"]},qualityAssurance:["Use appropriate sample sizes based on testing objectives and statistical requirements","Validate testing scenarios with actual users before conducting formal usability sessions","Document testing conditions and environmental factors that might affect results","Plan follow-up testing to validate that identified issues have been successfully resolved"],aiOptimization:["Generate testing scenarios that reveal underlying usability issues and user mental model misalignments","Create evaluation frameworks that capture both objective performance metrics and subjective user experience quality","Design testing protocols that identify improvement opportunities with high user impact and feasible implementation","Include predictive testing elements that anticipate future user needs and usage contexts"],knowledgeIntegration:["CRITICAL: Before designing usability test prompts, comprehensively review project knowledge base to create realistic testing scenarios and success criteria","Use documented user workflows, pain points, and behavioral patterns from the knowledge base to design authentic testing tasks and scenarios","Reference specific product features, functionality, and user interactions documented in the knowledge base to create targeted testing protocols","Incorporate user goals, success metrics, and expected outcomes from the knowledge base into testing success criteria and evaluation frameworks","Leverage any existing usability issues, user feedback, or performance data in the knowledge base to inform testing focus areas","Align testing objectives with business goals, product requirements, and project constraints documented in the knowledge base","Use project-specific user segments, personas, and usage contexts from knowledge base to ensure representative participant recruitment"]},observations:{core:["Conduct ethnographic field studies in users' natural environments to capture authentic behaviors","Use systematic observation protocols including direct observation and participant shadowing techniques","Document contextual factors including environmental constraints, social influences, and physical settings","Capture both explicit behaviors (what users do) and implicit behaviors (habitual and unconscious actions)","Record interruptions, workarounds, and superstitious behaviors that users have developed over time","Use multiple documentation methods: field notes, photography, sketches, video recordings, and artifact analysis","Plan for extended observation periods (days to weeks) to identify behavior patterns over time"],methodology:[`Apply the "fly on the wall" approach with minimal intervention in participants' natural activities`,"Use structured observation frameworks with predefined categories and coding systems","Implement time sampling and event sampling techniques for systematic data collection","Balance passive observation with contextual inquiry moments for clarification and deeper understanding","Create detailed environmental maps showing physical spaces, tools, and interaction patterns","Document social dynamics and collaborative behaviors within the observed context","Use mobile ethnography techniques for following users across different environments"],industrySpecific:{fintech:["Observe financial decision-making processes in real-world contexts and environments","Document security behaviors and trust-building actions users naturally employ","Capture multi-device usage patterns for financial tasks across different locations"],healthcare:["Ensure HIPAA compliance and appropriate consent for all observational activities","Observe care coordination and communication patterns between patients and providers","Document accessibility needs and accommodation strategies in natural healthcare settings"],ecommerce:["Observe shopping behaviors across physical and digital touchpoints in natural settings","Document research and comparison behaviors that occur outside of the direct purchase flow","Capture social influence factors and recommendation-seeking patterns in real contexts"],saas:["Observe workflow integration patterns and tool-switching behaviors in actual work environments","Document collaborative work practices and team interaction patterns around software use","Capture onboarding and learning behaviors as they naturally occur in organizational contexts"],education:["Observe learning behaviors across formal and informal educational settings","Document collaborative learning patterns and peer interaction dynamics","Capture accessibility adaptations and learning accommodation strategies in natural use"]},qualityAssurance:["Use multiple observers for complex scenarios to ensure comprehensive data capture","Implement inter-observer reliability checks to validate observation accuracy","Create detailed observation protocols with clear behavioral categories and definitions","Plan for data saturation by continuing observations until no new behavioral patterns emerge"],aiOptimization:["Generate observation frameworks that reveal underlying user mental models and decision-making processes","Create behavioral coding systems that identify patterns invisible to users themselves","Design contextual analysis that connects environmental factors to user behavior variations","Include predictive behavioral insights that anticipate user needs based on observed patterns"],knowledgeIntegration:["CRITICAL: Before designing observational studies, thoroughly analyze project knowledge base to identify specific behaviors, environments, and contexts to observe","Use documented user personas, journeys, and pain points from knowledge base to focus observation protocols on high-impact behavioral patterns","Reference existing user research and behavioral data in knowledge base to identify gaps in understanding that observation can address","Incorporate project-specific environments, tools, and workflows from knowledge base to ensure observation contexts are relevant and realistic","Leverage business objectives and success metrics from knowledge base to prioritize which user behaviors are most critical to observe and document","Use domain expertise and industry constraints from knowledge base to design observation protocols that respect user privacy and organizational requirements","Align observation objectives with project goals and strategic outcomes documented in the knowledge base to ensure actionable insights"]},"problem-statements":{core:["Define clear, actionable problem statements using the specific format: [User name] is a/an [user characteristics] who needs [user need] because [insight]","Ground problem statements in validated user research insights rather than assumptions","Frame problems from the user perspective focusing on their specific needs and contexts","Ensure problems are specific enough to guide solution development but broad enough to allow innovation","Create problem statements that inspire action and creative solution generation","Balance user needs with business objectives and technical constraints in problem framing","Validate problem statements with stakeholders and users before proceeding to ideation"],methodology:["Use the exact format: [User name] is a/an [user characteristics] who needs [user need] because [insight]",'Create specific user names that represent real personas (e.g., "Sarah", "Marcus", "Elena")',"Define user characteristics that capture key demographics, roles, or behavioral traits","Express user needs as clear, actionable requirements or desired outcomes","Base insights on validated research findings that explain the underlying reasons for the need","Start with user research insights and synthesize into core problem themes","Test problem statement clarity by having team members explain the problem back","Create multiple problem statement variations to explore different angles","Prioritize problem statements based on user impact and business value","Refine problem statements through iterative team discussion and stakeholder feedback","Document the rationale and research behind each problem statement"],industrySpecific:{fintech:["Frame problems around financial security, trust, and regulatory compliance needs","Include financial literacy and accessibility considerations in problem statements","Address multi-generational and diverse economic context needs in problem framing"],healthcare:["Frame problems around patient safety, care quality, and health outcomes","Include accessibility and diverse health condition needs in problem statements","Address care coordination and provider-patient communication challenges"],ecommerce:["Frame problems around customer journey, conversion, and post-purchase satisfaction","Include omnichannel and cross-device experience needs in problem statements","Address personalization and recommendation effectiveness challenges"],saas:["Frame problems around workflow integration, team collaboration, and organizational adoption","Include user onboarding and feature discovery challenges in problem statements","Address scalability and enterprise-level usage needs"],education:["Frame problems around learning effectiveness, engagement, and diverse learning styles","Include accessibility and institutional constraint considerations","Address collaborative learning and peer interaction needs"]},qualityAssurance:["Validate problem statements through user interviews and stakeholder review","Test problem statement effectiveness by measuring ideation quality and quantity","Ensure problem statements lead to actionable and feasible solution development","Review problem statement accuracy against new user research findings"],aiOptimization:["Generate problem statements that stimulate innovative thinking while maintaining focus","Create problem framing that encourages diverse solution approaches and perspectives","Design problem statements that balance user empathy with strategic business alignment","Include problem validation techniques that ensure continued relevance throughout development"],knowledgeIntegration:j2()},"crazy-eights":{core:["Conduct rapid 8-minute sketching sessions to generate 8 different solution concepts","Focus on quantity over quality to encourage divergent thinking and creative exploration","Use simple sketching techniques that anyone can participate in regardless of drawing ability","Create time pressure to bypass internal critics and encourage spontaneous ideation","Generate diverse solution approaches by exploring different angles and perspectives","Build on existing ideas while pushing for new and unexpected solution directions","Use crazy 8s as a warm-up or energizer for longer ideation sessions"],methodology:["Provide each participant with paper divided into 8 sections","Set strict 8-minute timer with 1-minute per idea guideline","Encourage simple sketches with minimal text and maximum concept clarity","Remind participants to build on previous ideas while exploring new directions","Have participants share and explain their favorite concepts after completion","Use dot voting or other quick selection methods to identify promising ideas","Iterate with additional crazy 8s rounds to explore selected concepts further"],industrySpecific:{fintech:["Sketch financial interface concepts that build trust and security confidence","Explore diverse ways to present financial data and decision-making tools","Generate concepts for simplifying complex financial processes and regulations"],healthcare:["Sketch patient experience concepts that improve care coordination and communication","Explore accessibility solutions for diverse health conditions and capabilities","Generate concepts for health information presentation and patient education"],ecommerce:["Sketch shopping experience concepts across different devices and contexts","Explore personalization and recommendation presentation approaches","Generate concepts for social proof and community integration in shopping"],saas:["Sketch workflow integration concepts and team collaboration solutions","Explore onboarding and feature discovery approach variations","Generate concepts for complex software simplification and user empowerment"],education:["Sketch learning experience concepts for diverse learning styles and preferences","Explore collaborative learning and peer interaction solution approaches","Generate concepts for engagement and motivation in educational contexts"]},qualityAssurance:["Ensure all participants complete 8 concepts within the time limit","Validate concept diversity by checking for different solution approaches","Test concept clarity by having other participants interpret sketched ideas","Measure ideation effectiveness through subsequent solution development success"],aiOptimization:["Generate crazy 8s prompts that push participants toward innovative and unexpected solutions","Create time-boxed ideation that maximizes creative output while maintaining solution relevance","Design sketching exercises that reveal hidden assumptions and alternative approaches","Include concept evaluation techniques that identify highest-potential ideas for development"],knowledgeIntegration:j2()},scamper:{core:["Apply systematic creativity technique using Substitute, Combine, Adapt, Modify, Put to other uses, Eliminate, Reverse","Transform existing solutions and concepts through structured creative questioning","Generate innovative variations by applying each SCAMPER prompt to current solutions","Challenge assumptions about how solutions must work by exploring alternative approaches","Create breakthrough innovations by combining SCAMPER techniques in unexpected ways","Use SCAMPER to overcome creative blocks and generate fresh perspective on problems","Apply SCAMPER systematically to ensure comprehensive exploration of solution space"],methodology:["Define the baseline solution or concept to be improved through SCAMPER","Work through each SCAMPER prompt systematically: Substitute (what can be substituted?), Combine (what can be combined?), Adapt (what can be adapted?), Modify (what can be modified?), Put to other uses (how else can this be used?), Eliminate (what can be removed?), Reverse (what can be reversed or rearranged?)","Generate multiple ideas for each SCAMPER category before moving to the next","Build on ideas across categories to create hybrid solutions and novel approaches","Document all ideas regardless of initial feasibility to maintain creative momentum","Select most promising ideas for further development and prototyping","Iterate through SCAMPER multiple times with different baseline solutions"],industrySpecific:{fintech:["Apply SCAMPER to financial service delivery, security measures, and user trust-building","Explore alternative approaches to financial data presentation and decision support","Generate innovations in financial education and literacy development"],healthcare:["Apply SCAMPER to patient care delivery, health information systems, and treatment approaches","Explore alternative methods for care coordination and provider communication","Generate innovations in health education and patient empowerment"],ecommerce:["Apply SCAMPER to shopping experiences, product discovery, and customer service","Explore alternative approaches to personalization and recommendation systems","Generate innovations in social commerce and community-driven shopping"],saas:["Apply SCAMPER to software interfaces, workflow integration, and collaboration features","Explore alternative approaches to user onboarding and feature adoption","Generate innovations in organizational software adoption and change management"],education:["Apply SCAMPER to learning experiences, assessment methods, and knowledge delivery","Explore alternative approaches to student engagement and motivation","Generate innovations in collaborative learning and peer-to-peer education"]},qualityAssurance:["Ensure systematic application of all SCAMPER categories to avoid idea gaps","Validate idea quality through feasibility and impact assessment","Test SCAMPER effectiveness by measuring breakthrough idea generation","Review SCAMPER outcomes for practical implementation potential"],aiOptimization:["Generate SCAMPER applications that push beyond obvious solutions toward breakthrough innovations","Create systematic creativity that reveals hidden opportunities and alternative approaches","Design SCAMPER sessions that challenge fundamental assumptions about solution constraints","Include innovation validation techniques that identify highest-potential breakthrough concepts"],knowledgeIntegration:j2()},"affinity-mapping":{core:["Apply systematic thematic analysis to organize qualitative research data into meaningful clusters","Use collaborative synthesis techniques that engage cross-functional team members in insight generation","Implement the basic affinity process: individual idea capture, similarity grouping, and theme labeling","Create hierarchical clustering that reveals both surface patterns and deeper underlying themes","Use contextual filtering to reveal patterns based on user demographics, behaviors, or environmental factors","Apply iterative clustering approaches to discover multiple perspectives and validate pattern recognition","Transform clustered insights into actionable design recommendations and strategic opportunities"],methodology:["Begin with individual brainwriting to capture diverse perspectives before collaborative grouping","Use time-boxed synthesis sessions to maintain focus and momentum throughout the clustering process",'Apply the "one idea per sticky note" principle to enable flexible reorganization and pattern discovery',"Implement silent clustering followed by collaborative discussion to reduce groupthink and bias","Use dot voting and impact-effort matrices for democratic prioritization of insight clusters","Create cluster labels that capture the essence of grouped insights rather than just describing contents","Document outlier insights separately to preserve unique and potentially innovative observations"],industrySpecific:{fintech:["Cluster insights around trust, security, and regulatory compliance themes specific to financial services","Group behavioral patterns related to financial decision-making complexity and risk assessment","Organize insights around multi-generational financial literacy and technology adoption patterns"],healthcare:["Apply clustering that reveals care coordination and provider communication insight themes","Group insights around accessibility needs and accommodation strategies across diverse health conditions","Organize patterns around health literacy levels and patient advocacy relationship dynamics"],ecommerce:["Cluster insights around customer journey phases from awareness through post-purchase advocacy","Group behavioral patterns related to social proof consumption and recommendation trust factors","Organize insights around omnichannel shopping behaviors and cross-device experience expectations"],saas:["Apply clustering around organizational change management and team adoption insight patterns","Group insights related to workflow integration challenges and collaboration tool ecosystem needs","Organize patterns around user onboarding and feature discovery across different organizational roles"],education:["Cluster insights around diverse learning styles and institutional constraint impact on learning","Group patterns related to collaborative learning preferences and peer interaction dynamics","Organize insights around technology accessibility and digital equity in educational contexts"]},qualityAssurance:["Validate cluster accuracy through team consensus and stakeholder review of thematic organization","Test insight cluster validity by having team members predict user responses to design concepts","Update clustering based on new research data and validate pattern stability over time","Create measurement frameworks to track how clustered insights inform successful design decisions"],aiOptimization:["Generate clustering approaches that reveal hidden behavioral patterns and unconscious user motivations","Create synthesis frameworks that balance systematic analysis with creative insight discovery","Design collaborative processes that maximize diverse perspective integration while maintaining analytical rigor","Include meta-analysis elements that identify patterns across different user research studies and contexts"]},"how-might-we":{core:['Frame problems as innovation opportunities using the structured "How might we..." question format',"Generate questions that suggest solutions are possible while avoiding prescriptive or narrow problem statements","Create appropriately scoped questions that are neither too broad nor overly specific for productive ideation","Ground HMW questions in specific user research insights rather than general assumptions or business goals","Use strategic question types: amplify good aspects, question assumptions, explore adjectives, identify resources","Apply divergent-convergent thinking cycles with HMW as the bridge between problem definition and solution ideation","Generate multiple HMW variations to explore different angles and perspectives on the same core challenge"],methodology:["Start with validated user research findings and pain points as the foundation for HMW question development","Use collaborative workshops with cross-functional stakeholders to generate diverse HMW perspectives","Apply the question transformation techniques: reframe complaints as opportunities, break complex problems into components","Implement systematic evaluation criteria to assess HMW question quality and ideation potential","Create HMW question taxonomies organized by user journey phases, user types, or problem categories","Use rapid iteration cycles to refine question framing based on initial ideation session outcomes","Document the rationale behind each HMW question to maintain connection to research insights"],industrySpecific:{fintech:["Frame questions around trust-building, security transparency, and regulatory compliance as innovation opportunities","Create HMW questions that address financial literacy gaps and risk assessment complexity","Generate questions that explore inclusive financial services and accessibility across diverse economic contexts"],healthcare:["Frame questions around care coordination, provider communication, and patient advocacy as innovation opportunities","Create HMW questions that address health literacy diversity and caregiver relationship complexity","Generate questions that explore accessibility improvements and accommodation innovation in healthcare delivery"],ecommerce:["Frame questions around conversion optimization, customer retention, and post-purchase experience as opportunities","Create HMW questions that address omnichannel experience integration and cross-device behavior patterns","Generate questions that explore personalization and social proof integration as competitive advantages"],saas:["Frame questions around user onboarding, feature adoption, and workflow integration as innovation opportunities","Create HMW questions that address organizational change management and team collaboration enhancement","Generate questions that explore integration ecosystem needs and inter-tool workflow optimization"],education:["Frame questions around engagement, motivation, and diverse learning styles as innovation opportunities","Create HMW questions that address institutional constraints and administrative efficiency improvements","Generate questions that explore collaborative learning and peer interaction enhancement possibilities"]},qualityAssurance:["Test HMW questions through rapid ideation sessions to validate their generative potential","Evaluate question quality based on specificity to research insights and breadth of solution possibilities","Validate HMW effectiveness by measuring the quantity and quality of ideas generated in ideation sessions","Create feedback loops that refine HMW question framing based on solution feasibility and user impact"],aiOptimization:["Generate HMW questions that stimulate creative thinking while maintaining focus on validated user needs","Create question framing that encourages solutions with high user impact and strategic business alignment","Design HMW development processes that integrate diverse stakeholder perspectives systematically","Include rapid validation techniques that test HMW effectiveness before major ideation investments"]},"stakeholder-interviews":{core:["Conduct structured interviews with key project stakeholders to gather business context and organizational insights","Apply collaborative partnership approach that makes stakeholders feel heard while extracting strategic information","Focus on business goals, historical context, constraints, and success metrics to align design with organizational needs","Use systematic questioning techniques to uncover hidden assumptions, political dynamics, and resource constraints","Document organizational knowledge, decision-making processes, and approval workflows that affect design implementation","Balance stakeholder perspectives with user needs to create comprehensive understanding of design challenges","Plan for early-stage and ongoing stakeholder engagement to maintain alignment throughout the design process"],methodology:["Select representative stakeholders across different organizational levels and functional areas","Structure interviews to cover project origins, business objectives, constraints, and success criteria","Use open-ended questions to encourage stakeholders to share their perspectives and concerns naturally","Apply active listening techniques and follow-up questions to dig deeper into organizational context","Document both explicit requirements and implicit expectations that stakeholders may not articulate directly","Create stakeholder journey maps that show how different roles interact with and are affected by design decisions","Plan condensed interview schedules to build momentum and maintain contextual understanding across sessions"],industrySpecific:{fintech:["Focus on regulatory compliance requirements and risk management constraints from financial stakeholders","Understand security protocols and audit requirements that affect design and development processes","Explore competitive landscape insights and market positioning goals from business stakeholders"],healthcare:["Address clinical workflow requirements and patient safety concerns from healthcare provider stakeholders","Understand regulatory compliance needs and clinical evidence requirements from administrative stakeholders","Explore care coordination and provider communication needs from operational stakeholders"],ecommerce:["Focus on conversion optimization goals and customer acquisition strategies from marketing stakeholders","Understand inventory management and fulfillment constraints from operational stakeholders","Explore brand positioning and competitive differentiation goals from business development stakeholders"],saas:["Address integration requirements and technical constraints from engineering and IT stakeholders","Understand customer success metrics and retention goals from customer experience stakeholders","Explore feature prioritization and roadmap planning from product management stakeholders"],education:["Focus on pedagogical requirements and learning outcome goals from educational stakeholders","Understand institutional constraints and administrative requirements from operational stakeholders","Explore accessibility compliance and inclusive design requirements from diversity and inclusion stakeholders"]},qualityAssurance:["Validate stakeholder input through cross-referencing with user research and market data","Test stakeholder alignment by having different stakeholders review and comment on synthesized insights","Create stakeholder feedback loops that maintain engagement and validate design direction throughout the process","Plan follow-up sessions to clarify conflicting requirements and build consensus around design priorities"],aiOptimization:["Generate interview approaches that reveal hidden organizational dynamics and decision-making patterns","Create synthesis frameworks that balance diverse stakeholder perspectives with user-centered design principles","Design stakeholder engagement strategies that build buy-in and support for user-centered design approaches","Include organizational change management insights that support successful design implementation and adoption"]},"contextual-inquiry":{core:["Conduct in-depth field research combining observation and interview techniques in users' natural work environments","Apply the four key principles: Context (natural environment), Partnership (user-researcher collaboration), Interpretation (shared understanding), Focus (relevant scope)","Use structured 2-hour sessions that balance silent observation with contextual questioning and discussion","Document both explicit task completion and implicit environmental factors that influence user behavior","Capture interruptions, multitasking patterns, and social interactions that affect user experience in real contexts","Create detailed workflow maps that show how users actually complete tasks versus how they think they do","Plan for multiple sessions across different contexts to understand behavior variations and environmental influences"],methodology:["Structure sessions with primer, transition, contextual interview, and wrap-up phases for comprehensive data collection",'Use the "master-apprentice" model where users teach researchers about their work context and processes',"Apply strategic questioning during natural task breaks to avoid disrupting user flow and authentic behavior","Document physical environment, tools, artifacts, and social dynamics that contribute to user experience","Create environmental maps showing spatial relationships, tool locations, and interaction patterns in the workspace","Use mobile ethnography techniques to follow users across different locations and contexts as needed","Plan for immediate post-session synthesis to capture environmental nuances and contextual insights while fresh"],industrySpecific:{fintech:["Observe financial decision-making processes in real work environments including security and compliance behaviors","Document multi-device usage patterns and security protocols users naturally employ in financial tasks","Capture environmental factors that influence trust and risk assessment in actual financial contexts"],healthcare:["Ensure proper consent and HIPAA compliance for observational research in healthcare settings","Observe care coordination workflows and provider communication patterns in authentic clinical environments","Document accessibility accommodations and assistive technology usage in natural healthcare contexts"],ecommerce:["Observe shopping research and purchase decision-making processes across multiple touchpoints and contexts","Document social influence factors and recommendation-seeking behaviors in natural shopping environments","Capture cross-device and cross-channel behavior patterns in authentic retail and online contexts"],saas:["Observe workflow integration and collaboration patterns in authentic organizational work environments","Document tool-switching behaviors and integration needs within actual business process contexts","Capture team dynamics and collaborative work practices around software usage in natural settings"],education:["Observe learning behaviors across formal and informal educational contexts and environments","Document collaborative learning patterns and peer interaction dynamics in authentic educational settings","Capture accessibility accommodations and diverse learning strategies in natural academic contexts"]},qualityAssurance:["Validate contextual insights through follow-up interviews and member checking with observed participants","Cross-reference contextual observations with other research methods to ensure comprehensive understanding","Plan for data saturation by conducting inquiry sessions until no new contextual patterns emerge","Create detailed documentation protocols that capture both behavioral and environmental data systematically"],aiOptimization:["Generate contextual analysis frameworks that reveal connections between environment and user behavior patterns","Create observation protocols that identify contextual factors invisible to users but critical for design success","Design inquiry approaches that uncover workflow integration needs and environmental constraint impacts","Include predictive contextual insights that anticipate how environmental changes might affect user behavior"]},"synthesis-workshops":{core:["Facilitate collaborative analysis sessions that transform raw research data into actionable design insights","Apply structured group sensemaking techniques that engage diverse stakeholders in insight generation and validation","Use visual collaboration methods including affinity mapping, journey mapping, and insight clustering to organize findings","Create shared understanding across cross-functional teams about user needs, pain points, and opportunity areas","Generate prioritized insight hierarchies that distinguish between must-have insights and nice-to-have observations","Transform individual research observations into collective team knowledge and strategic design direction","Plan for iterative synthesis cycles that refine insights based on additional data and stakeholder feedback"],methodology:["Structure workshops with clear phases: data immersion, pattern identification, insight generation, and prioritization","Use divergent-convergent thinking cycles that balance comprehensive exploration with focused decision-making","Apply silent individual work followed by collaborative discussion to reduce groupthink and encourage diverse perspectives","Implement systematic clustering techniques including contextual grouping and thematic organization methods","Use dot voting, impact-effort matrices, and consensus-building techniques for democratic insight prioritization","Create visual synthesis artifacts including insight maps, opportunity frameworks, and strategic recommendation summaries","Plan for workshop documentation that captures both final insights and the reasoning process behind key decisions"],industrySpecific:{fintech:["Focus synthesis on trust-building opportunities, security transparency, and regulatory compliance innovation possibilities","Prioritize insights related to financial decision-making complexity and risk communication improvements","Generate synthesis around financial literacy gaps and inclusive financial service design opportunities"],healthcare:["Apply synthesis techniques to care coordination insights and provider communication improvement opportunities","Focus on accessibility accommodation insights and health literacy diversity consideration in synthesis priorities","Generate collaborative analysis around patient advocacy and caregiver relationship dynamic insights"],ecommerce:["Structure synthesis around customer journey insights and omnichannel experience optimization opportunities","Prioritize insights related to social proof integration and personalization strategy development","Focus collaborative analysis on post-purchase experience and customer retention insight generation"],saas:["Apply synthesis to workflow integration insights and organizational change management opportunity identification","Focus on user onboarding and feature adoption pattern analysis in collaborative workshop settings","Generate synthesis around team collaboration and integration ecosystem needs from research findings"],education:["Structure synthesis around diverse learning style insights and institutional constraint impact analysis","Focus collaborative analysis on engagement and motivation factor identification from research data","Apply synthesis techniques to collaborative learning and peer interaction dynamic insights"]},qualityAssurance:["Validate synthesis outcomes through stakeholder review and cross-functional team consensus building","Test insight accuracy by having team members use synthesized insights to predict user behavior in new scenarios","Create synthesis quality checks that ensure insights are grounded in research data rather than team assumptions","Plan follow-up validation that tests synthesized insights against additional user research and market data"],aiOptimization:["Generate synthesis frameworks that balance systematic analysis with creative insight discovery and strategic thinking","Create collaborative processes that maximize diverse perspective integration while maintaining analytical rigor and focus","Design workshop structures that efficiently transform large amounts of qualitative data into actionable design direction","Include meta-synthesis elements that identify patterns across multiple research studies and generate strategic recommendations"]}},yL={"journey-maps":{core:["Map the complete emotional journey alongside functional steps - emotions drive experience perception","Include both digital and physical touchpoints in omnichannel experience mapping","Identify moments of truth where user perception is most influenced by experience quality","Document backstage processes and organizational factors that enable or hinder experience delivery","Include micro-moments and transition states between major journey phases","Map user goals and success criteria at each stage to understand shifting priorities","Identify opportunity areas where small improvements could create disproportionate impact"],methodology:["Use workshop-based collaborative mapping with cross-functional stakeholder involvement","Base journey maps on actual user research data rather than internal assumptions","Create journey maps for specific user scenarios rather than generic user experiences","Include service recovery scenarios and error state journey paths","Document supporting evidence and data sources for each journey component","Test journey map accuracy with actual users through validation interviews","Create both current-state and future-state journey maps to guide improvement efforts"],industrySpecific:{fintech:["Include regulatory touchpoints and compliance verification steps throughout journey","Map security and trust-building touchpoints across all journey phases","Include financial decision-making complexity and risk assessment processes"],healthcare:["Include care coordination touchpoints and provider communication needs","Map accessibility requirements and accommodation needs across journey phases","Include caregiver involvement and family decision-making processes"],ecommerce:["Map pre-purchase research behaviors and social proof consultation patterns","Include post-purchase experience phases: delivery, usage, support, and repurchase consideration","Map cross-device and cross-channel behavior patterns throughout purchase journey"],saas:["Map organizational decision-making and approval processes throughout adoption journey","Include integration and setup phases with technical implementation considerations","Map user onboarding and team adoption patterns across different user roles"],education:["Map learning journey phases from awareness through mastery and application","Include institutional and administrative touchpoints that affect learner experience","Map collaborative learning interactions and peer-to-peer experience elements"]},qualityAssurance:["Validate journey maps with actual user interviews and observational research","Update journey maps based on customer support data and user feedback patterns","Test journey map assumptions through targeted user research and analytics validation","Create measurement frameworks to track improvement in journey experience over time"],aiOptimization:["Generate journey maps that reveal underlying user mental models and decision-making processes","Create emotional journey analysis that identifies satisfaction and frustration triggers","Develop opportunity analysis that prioritizes improvements based on user impact and business value","Include predictive elements that anticipate user needs and proactive service opportunities"]},wireframes:{core:["Progress systematically through fidelity levels: sketches  lo-fi  mid-fi  hi-fi wireframes","Establish clear content hierarchy and information prioritization before detailed layout design","Include responsive behavior documentation across mobile, tablet, and desktop breakpoints","Plan component reusability and design system integration from initial wireframing stages","Document interaction states including hover, active, loading, and error conditions","Include accessibility considerations and ARIA labeling requirements in wireframe annotations","Plan user flow integration and navigation patterns that support task completion"],methodology:["Start with rapid sketching to explore multiple layout concepts before digital wireframing","Use consistent annotation systems that communicate interaction behavior to developers","Include user scenario walkthroughs to validate wireframe effectiveness for task completion","Plan progressive enhancement that ensures core functionality across device and browser capabilities","Document content requirements and copywriting needs for each interface element","Include performance considerations and loading behavior in wireframe specifications","Plan for internationalization and localization requirements in layout and navigation design"],industrySpecific:{fintech:["Include security indicators and trust elements placement throughout interface wireframes","Plan for regulatory compliance information display and user consent flow integration","Design financial data visualization and complex calculation interface requirements"],healthcare:["Include accessibility-first design that accommodates assistive technology usage","Plan for clinical workflow integration and provider communication interface needs","Design emergency and critical information presentation with appropriate visual hierarchy"],ecommerce:["Include conversion optimization elements and social proof placement in product interface design","Plan for product discovery and comparison interface requirements","Design checkout flow wireframes that minimize abandonment and maximize completion"],saas:["Plan for complex data visualization and dashboard layout requirements","Include collaborative features and multi-user interaction patterns","Design onboarding flows that accommodate different user roles and permission levels"],education:["Include interactive learning elements and progress tracking in wireframe design","Plan for collaborative features and peer interaction interface requirements","Design accessibility-first layouts that accommodate diverse learning needs"]},qualityAssurance:["Validate wireframe concepts through user testing at appropriate fidelity levels","Test wireframe navigation and information architecture through task completion scenarios","Plan iterative wireframe refinement based on stakeholder feedback and user testing insights","Create wireframe documentation that enables accurate development implementation"],aiOptimization:["Generate wireframe concepts that prioritize user mental models and task completion efficiency","Create layout designs that balance user needs with business objectives and technical constraints","Design interface patterns that anticipate user needs and reduce cognitive load","Include adaptive design elements that respond to user behavior and preferences"]},brainstorming:{core:["Move beyond traditional brainstorming to structured individual-first ideation methods",'Use "How Might We" question framing to reframe problems as innovation opportunities',"Implement time-boxed exercises like Crazy 8s (8 ideas in 8 minutes) to prevent overthinking","Include brainwriting techniques that give equal voice to introverted and extroverted participants","Plan for both divergent thinking (idea generation) and convergent thinking (idea selection and refinement)","Create psychological safety that encourages wild ideas and builds on others' contributions","Document all ideas with visual capture methods that preserve context and detail"],methodology:["Start workshops with energizing activities that shift mindset from critical to creative thinking",'Use the "Yes, And..." principle to build ideas rather than immediately evaluating or critiquing',"Implement dot voting and impact/effort matrices for systematic idea evaluation and prioritization","Include diverse perspectives with representatives from different departments and user types","Plan workshop flow that alternates between individual work and collaborative building","Use visual collaboration tools and templates that maintain momentum and focus","End workshops with clear next steps, ownership assignment, and timeline commitment"],industrySpecific:{fintech:["Include regulatory constraints and compliance requirements in ideation parameters","Focus on trust-building and security concerns as innovation opportunities","Consider financial literacy levels and accessibility in solution ideation"],healthcare:["Include patient safety and clinical workflow considerations in all ideation","Focus on care coordination and provider communication as innovation areas","Consider diverse health literacy levels and accessibility needs in solution development"],ecommerce:["Include conversion optimization and customer acquisition challenges in ideation scope","Focus on personalization and customer experience differentiation opportunities","Consider omnichannel and cross-device experience integration in solution ideation"],saas:["Include integration challenges and workflow optimization in ideation scope","Focus on user onboarding and feature adoption as key innovation areas","Consider organizational change management and team collaboration needs"],education:["Include diverse learning styles and accessibility needs in ideation parameters","Focus on engagement and motivation as key innovation opportunities","Consider institutional constraints and administrative requirements in solution development"]},qualityAssurance:["Validate workshop ideas through rapid prototyping and user feedback collection","Plan follow-up sessions to refine and develop most promising concepts","Create evaluation criteria that balance innovation potential with implementation feasibility","Document ideation process and outcomes to inform future workshop improvements"],aiOptimization:["Generate ideation frameworks that stimulate creative thinking while maintaining focus on user needs","Create evaluation methods that identify ideas with highest user impact and strategic alignment","Design workshop structures that maximize participant engagement and creative contribution","Include rapid validation techniques that test idea viability before significant resource investment"]},"expert-interviews":{core:["Conduct focused interviews with domain experts to gather specialized knowledge and industry insights","Apply systematic questioning techniques to extract expert mental models and decision-making frameworks","Focus on capturing tacit knowledge and professional expertise that shapes user experience in specific domains","Document expert perspectives on user behavior patterns, industry constraints, and opportunity areas","Balance respect for expert knowledge with critical questioning to validate assumptions and uncover biases","Create knowledge maps that organize expert insights around user journey phases and design challenge areas","Plan for rapid knowledge transfer sessions that efficiently capture deep domain expertise"],methodology:["Select experts based on domain relevance, user interaction experience, and diverse perspective representation","Structure interviews to cover domain overview, user behavior insights, common challenges, and future trends","Use problem-scenario questioning to understand how experts would approach typical user challenges","Apply hypothetical situation testing to validate expert assumptions against actual user behavior patterns","Document both explicit expert recommendations and implicit assumptions about user needs and behaviors","Create expert consensus and disagreement maps to identify areas of uncertainty or debate in the domain","Plan follow-up validation to test expert insights against actual user research and behavioral data"],industrySpecific:{fintech:["Interview financial advisors, compliance experts, and fintech professionals about user financial behavior patterns","Focus on regulatory expertise, security best practices, and financial literacy assessment from domain experts","Explore expert perspectives on trust-building, risk communication, and financial decision-making complexity"],healthcare:["Interview clinicians, health educators, and healthcare administrators about patient experience and care delivery","Focus on expert knowledge about health literacy, care coordination, and patient safety considerations","Explore clinical workflow expertise and provider-patient communication best practices from healthcare professionals"],ecommerce:["Interview retail experts, marketing professionals, and e-commerce specialists about consumer behavior patterns","Focus on expert insights about purchase decision-making, brand loyalty, and omnichannel experience design","Explore expert perspectives on conversion optimization, customer retention, and personalization strategies"],saas:["Interview software specialists, IT professionals, and business process experts about organizational software adoption","Focus on expert knowledge about workflow integration, team collaboration, and enterprise software implementation","Explore expert perspectives on user onboarding, feature adoption, and organizational change management"],education:["Interview educators, instructional designers, and educational technology experts about learning experience design","Focus on expert insights about diverse learning styles, engagement strategies, and institutional constraints","Explore expert perspectives on collaborative learning, accessibility, and educational technology implementation"]},qualityAssurance:["Validate expert insights through triangulation with user research data and market analysis","Cross-reference expert opinions to identify consensus areas and points of professional disagreement","Test expert recommendations through rapid prototyping and user validation where possible","Plan for expert review of design concepts to ensure domain accuracy and professional feasibility"],aiOptimization:["Generate expert interview approaches that efficiently extract specialized domain knowledge and professional insights","Create synthesis frameworks that integrate expert perspectives with user research for comprehensive understanding","Design expert engagement strategies that build ongoing advisory relationships throughout the design process","Include expert validation protocols that ensure design solutions meet professional standards and domain requirements"]},"job-steps":{core:["Apply Jobs-to-Be-Done methodology to break down customer job processes into discrete, actionable steps","Map the complete job workflow from job triggering through job completion and success measurement","Identify functional, emotional, and social dimensions of each job step to understand comprehensive user needs","Document desired outcomes, success criteria, and measurement methods for each step in the customer job process","Analyze job step dependencies, required resources, and potential failure points that affect job completion success","Create job step hierarchies that distinguish between core job steps and supporting sub-processes","Plan for job step validation through customer interviews and behavioral observation in natural contexts"],methodology:["Use systematic job interview techniques to understand how customers currently execute each job step","Apply outcome-driven innovation methodology to identify underserved and overserved aspects of each job step","Document job step contexts including when, where, and why customers perform each step in their workflow","Create job step journey maps that show how customers move between steps and handle job step transitions","Use job step prioritization methods to identify which steps are most critical for overall job success","Apply job step benchmarking to understand how different customer segments approach the same job steps","Plan iterative job step refinement based on additional customer research and behavioral validation"],industrySpecific:{fintech:["Map financial job steps including research, evaluation, decision-making, execution, and monitoring phases","Focus on trust-building and security verification steps that customers require for financial job completion","Document regulatory compliance and risk assessment steps that affect financial job workflow execution"],healthcare:["Map healthcare job steps including symptom recognition, care seeking, treatment, and recovery monitoring","Focus on care coordination and provider communication steps required for comprehensive healthcare job completion","Document accessibility accommodation and caregiver involvement steps in healthcare job processes"],ecommerce:["Map shopping job steps including need recognition, research, evaluation, purchase, and post-purchase experience","Focus on social proof validation and recommendation integration steps in customer purchase job workflows","Document omnichannel job steps that customers use across different touchpoints and devices"],saas:["Map software adoption job steps including evaluation, trial, implementation, training, and optimization phases","Focus on integration and workflow customization steps required for successful software job completion","Document organizational approval and team adoption steps in enterprise software implementation jobs"],education:["Map learning job steps including goal setting, content consumption, practice, assessment, and application phases","Focus on collaborative learning and peer interaction steps that enhance educational job completion success","Document accessibility accommodation and institutional navigation steps in educational job processes"]},qualityAssurance:["Validate job step accuracy through customer journey observation and behavioral data analysis","Test job step completeness by having customers walk through the mapped process and identify missing elements","Cross-reference job step maps with customer support data to identify common failure points and friction areas","Plan job step iteration based on customer feedback and changing market conditions or customer needs"],aiOptimization:["Generate job step analysis that reveals hidden customer needs and underserved job outcomes","Create job step optimization frameworks that identify highest-impact improvement opportunities","Design job step innovation approaches that anticipate future customer job evolution and changing contexts","Include predictive job step analysis that identifies emerging customer job patterns and workflow changes"]},"hypothesis-canvas":{core:["Apply structured hypothesis formation using Lean UX methodology to create testable assumptions about user needs and behaviors","Use hypothesis canvas framework to organize beliefs, assumptions, and success criteria in testable formats","Create specific, measurable hypotheses that can be validated through rapid experimentation and user research","Balance business assumptions with user experience hypotheses to ensure comprehensive validation coverage","Apply risk assessment techniques to prioritize high-risk assumptions that require immediate validation","Generate hypothesis hierarchies that distinguish between foundational assumptions and tactical implementation details","Plan for iterative hypothesis refinement based on experimental results and new learning from user validation"],methodology:['Structure hypotheses using the format: "We believe [assumption] will result in [outcome] as measured by [metric]"',"Use assumption mapping workshops to identify and prioritize team beliefs about users, market, and solution effectiveness","Apply systematic bias identification techniques to recognize and address cognitive biases in hypothesis formation","Create experiment design frameworks that efficiently test multiple related hypotheses through single validation efforts","Use hypothesis tracking systems that document assumption validation status and learning outcomes over time","Implement rapid validation cycles that test riskiest assumptions first before significant development investment","Plan hypothesis evolution strategies that adapt assumptions based on validated learning and market feedback"],industrySpecific:{fintech:["Create hypotheses about financial decision-making behavior, trust-building, and security feature effectiveness","Focus on regulatory compliance assumptions and risk communication hypothesis validation in financial contexts","Generate hypotheses about financial literacy levels and inclusive financial service design effectiveness"],healthcare:["Develop hypotheses about care coordination needs, provider communication preferences, and patient engagement patterns","Focus on health literacy assumptions and accessibility accommodation hypothesis validation in healthcare contexts","Create hypotheses about caregiver involvement patterns and patient advocacy relationship dynamics"],ecommerce:["Generate hypotheses about purchase decision-making factors, social proof effectiveness, and conversion optimization","Focus on omnichannel behavior assumptions and personalization strategy hypothesis validation","Create hypotheses about post-purchase experience impact and customer retention factor effectiveness"],saas:["Develop hypotheses about workflow integration needs, feature adoption patterns, and organizational change management","Focus on user onboarding assumptions and team collaboration feature hypothesis validation","Create hypotheses about integration ecosystem needs and enterprise software implementation success factors"],education:["Generate hypotheses about learning engagement factors, collaborative learning effectiveness, and institutional constraints","Focus on diverse learning style assumptions and accessibility feature hypothesis validation","Create hypotheses about motivation factors and peer interaction enhancement strategy effectiveness"]},qualityAssurance:["Validate hypothesis quality through peer review and stakeholder feedback on assumption clarity and testability","Test hypothesis specificity by ensuring each assumption can be validated through measurable user behavior or feedback","Create hypothesis validation tracking that documents learning outcomes and assumption evolution over time","Plan hypothesis review cycles that update assumptions based on market changes and new user research insights"],aiOptimization:["Generate hypothesis formation frameworks that systematically identify hidden assumptions and cognitive biases","Create validation design approaches that efficiently test multiple related assumptions through integrated experiments","Design hypothesis evolution strategies that adapt to validated learning while maintaining strategic focus","Include predictive hypothesis elements that anticipate future user behavior changes and market evolution"]},"user-story-mapping":{core:["Apply user story mapping methodology to visualize user journey flows and feature prioritization in product development","Create story map hierarchies that organize user activities, tasks, and detailed stories in logical workflow sequences","Use collaborative mapping sessions to build shared understanding of user needs across product development teams","Generate release planning frameworks that prioritize story implementation based on user value and business impact","Document user story dependencies and workflow relationships that affect feature development and release sequencing","Create story map validation processes that ensure mapped stories accurately reflect actual user behavior patterns","Plan for story map evolution that adapts to user feedback, market changes, and development learning outcomes"],methodology:["Structure story maps with user activities as columns and story details organized by priority rows underneath","Use persona-based mapping to ensure story maps reflect needs of specific user segments and usage contexts","Apply walking skeleton approach to identify minimum viable story sets that deliver complete user value","Implement story slicing techniques that break large user stories into testable, developable increments","Use story estimation and velocity planning to create realistic development timelines and release planning","Create story map documentation that maintains traceability from user research to implemented features","Plan regular story map review sessions that incorporate user feedback and development learning into story prioritization"],industrySpecific:{fintech:["Map financial user stories around trust-building, security verification, and regulatory compliance user workflows","Focus on financial decision-making story flows that address risk assessment and financial literacy considerations","Create story maps that include multi-generational user needs and diverse financial capability requirements"],healthcare:["Map healthcare user stories around care coordination, provider communication, and patient advocacy workflows","Focus on accessibility user stories that address diverse health conditions and accommodation requirements","Create story maps that include caregiver roles and family decision-making dynamics in healthcare contexts"],ecommerce:["Map shopping user stories around customer journey phases from awareness through post-purchase advocacy","Focus on omnichannel user stories that address cross-device and cross-touchpoint shopping behavior patterns","Create story maps that include social proof and recommendation integration in purchase decision workflows"],saas:["Map software user stories around organizational adoption, workflow integration, and team collaboration requirements","Focus on onboarding user stories that address diverse user roles and permission levels in enterprise contexts","Create story maps that include integration and customization requirements for business process optimization"],education:["Map learning user stories around diverse learning styles, institutional constraints, and collaborative learning needs","Focus on accessibility user stories that address diverse learning abilities and accommodation requirements","Create story maps that include peer interaction and collaborative learning workflows in educational contexts"]},qualityAssurance:["Validate story map accuracy through user journey observation and customer feedback on story priority and completeness","Test story map usability by having development teams use maps for sprint planning and feature development guidance","Cross-reference story maps with user analytics and support data to validate story importance and user behavior patterns","Plan story map maintenance that keeps maps current with user needs evolution and product development learning"],aiOptimization:["Generate story mapping approaches that efficiently translate user research insights into actionable development priorities","Create story prioritization frameworks that balance user value, business impact, and development complexity considerations","Design story map evolution strategies that maintain user focus while adapting to technical constraints and business goals","Include predictive story planning that anticipates future user needs and market changes in story map development"]},"notification-strategy":{core:["Apply behavioral psychology principles to design notification systems that create habit-forming engagement patterns","Use trigger design methodology from Hooked Model to create external triggers that prompt desired user actions","Balance notification frequency and relevance to maintain user engagement without causing notification fatigue","Create personalized notification strategies that adapt to individual user behavior patterns and preferences","Apply progressive disclosure techniques that gradually increase notification sophistication as users develop habits","Design notification content that connects external triggers to internal user motivations and desired outcomes","Plan for notification strategy evolution that adapts to user lifecycle stages and changing engagement patterns"],methodology:["Use behavioral trigger taxonomy to categorize notifications by user context, timing, and motivational alignment","Apply A/B testing frameworks to optimize notification timing, content, and delivery channel effectiveness","Implement user segmentation strategies that customize notification approaches based on user behavior and preferences","Create notification journey maps that show how trigger sequences support habit formation and user engagement","Use feedback loop analysis to understand how notifications influence user behavior and long-term engagement patterns","Apply ethical design principles to ensure notifications serve user needs rather than exploiting psychological vulnerabilities","Plan notification analytics that measure both engagement metrics and user satisfaction with notification experience"],industrySpecific:{fintech:["Design financial notifications that build trust through transparency while prompting timely financial actions","Focus on security and fraud alert notifications that balance user safety with notification fatigue management","Create financial goal and milestone notifications that support positive financial behavior habit formation"],healthcare:["Design health reminder notifications that support medication adherence and appointment management without anxiety","Focus on care coordination notifications that facilitate provider communication and patient engagement","Create wellness and prevention notifications that encourage positive health behavior habit development"],ecommerce:["Design purchase and promotion notifications that enhance shopping experience without appearing manipulative","Focus on personalized recommendation notifications that align with individual shopping behavior patterns","Create post-purchase notifications that support customer satisfaction and encourage repeat engagement"],saas:["Design productivity and workflow notifications that support feature adoption without interrupting user focus","Focus on collaboration notifications that facilitate team communication while respecting individual work patterns","Create learning and onboarding notifications that guide feature discovery and skill development progressively"],education:["Design learning reminder notifications that support study habits and assignment completion without stress induction","Focus on collaborative learning notifications that encourage peer interaction and group participation","Create achievement and progress notifications that motivate continued learning engagement and skill development"]},qualityAssurance:["Validate notification effectiveness through user engagement metrics and satisfaction feedback collection","Test notification strategy impact on long-term user retention and habit formation success","Monitor notification unsubscribe rates and user feedback to identify notification fatigue and optimization opportunities","Plan notification strategy iteration based on user behavior data and changing engagement pattern analysis"],aiOptimization:["Generate notification strategies that balance user engagement with ethical design principles and user wellbeing","Create personalization frameworks that adapt notification approaches to individual user psychology and preferences","Design habit formation approaches that use notifications to support positive user behavior change and goal achievement","Include predictive notification timing that anticipates optimal user receptivity and contextual appropriateness"]}};function Ip(e,t){const n={framework:{id:"generic",name:"Generic Framework"},stage:{id:"generic",name:"Generic Stage"},tool:{id:e,name:e.replace("-"," ").replace(/\b\w/g,r=>r.toUpperCase())}};try{const r=Ex(n);return[r.promptTemplate,...r.contextualGuidance,...r.knowledgeIntegrationInstructions]}catch{console.warn("Falling back to legacy instructions for tool:",e);const s=Nye(e),i=Bye(s,e);if(!i)return["Generate comprehensive, actionable guidance for this UX tool"];const o=[...i.core,...i.methodology,...i.qualityAssurance,...i.aiOptimization,...i.knowledgeIntegration||j2()];return t&&i.industrySpecific[t]&&o.push(...i.industrySpecific[t]),o}}function Nye(e){return e.includes("interview")||e.includes("persona")||e.includes("survey")||e.includes("observation")?"research":e.includes("journey")||e.includes("wireframe")||e.includes("map")?"design":e.includes("testing")||e.includes("usability")||e.includes("test")?"testing":"ideation"}function Bye(e,t){const n=Eye(t);switch(e){case"research":return vL[n]||null;case"design":return yL[n]||null;case"testing":return vL[n]||null;case"ideation":return yL[n]||null;default:return null}}function Eye(e){return{"user-interviews":"user-interviews","empathy-maps":"personas","empathy-maps-dt":"personas","empathy-map":"personas","affinity-mapping":"affinity-mapping","journey-maps":"journey-maps","customer-journey-mapping":"journey-maps","usability-tests":"usability-tests","usability-testing":"usability-tests",wireframing:"wireframes","wire-frames":"wireframes","idea-generation":"brainstorming",ideation:"brainstorming",observations:"observations","how-might-we":"how-might-we","stakeholder-interviews":"stakeholder-interviews","contextual-inquiry":"contextual-inquiry","synthesis-workshops":"synthesis-workshops","expert-interviews":"expert-interviews","job-steps":"job-steps","hypothesis-canvas":"hypothesis-canvas","user-story-mapping":"user-story-mapping","notification-strategy":"notification-strategy","surveys-heart":"surveys"}[e]||e}function j2(e){return["CRITICAL: Before generating any AI prompt, the system must first analyze and incorporate ALL available project knowledge base content to ensure contextually relevant and informed outputs","Use project knowledge to customize all tool guidance to the specific domain, user types, business context, and organizational constraints documented in the knowledge base","Reference specific user insights, pain points, behaviors, and feedback mentioned in the project knowledge to create targeted and relevant tool applications","Incorporate industry-specific terminology, processes, regulations, and constraints identified in the project knowledge base into all tool methodologies","Leverage any existing research, data, personas, journey maps, or previous tool outputs in the knowledge base to inform current tool application and avoid redundancy","Adapt tool methodology and focus based on organizational culture, team structure, resource constraints, and project timelines documented in the knowledge base","Align all tool outputs with project goals, success metrics, business objectives, and strategic outcomes documented in the knowledge base"]}const Zz=[{id:"user-interviews",name:"User Interview Guide",description:"Generate comprehensive interview guides using funnel technique and behavioral research methods",category:"research",frameworks:["design-thinking","human-centered-design","double-diamond"],stages:["empathize","discover","research","hear"],template:`# Research-Backed User Interview Guide: {{projectName}}

## Strategic Research Framework
**Primary Research Question:** {{primaryResearchQuestion}}
**Target User Segment:** {{targetUserSegment}}
**Interview Duration:** {{duration}} minutes
**Methodology:** Structured funnel technique with behavioral observation
**Sample Size:** {{sampleSize}} participants for thematic saturation

## Pre-Interview Protocol
### Participant Preparation
- **Recruitment Criteria:** {{recruitmentCriteria}}
- **Screening Questions:** Verify target segment alignment and availability
- **Consent & Recording:** Obtain informed consent for recording and data use
- **Environment Setup:** Ensure comfortable, distraction-free interview space

### Interviewer Preparation
- **Research Objectives Review:** {{researchObjectives}}
- **Persona Hypothesis Validation:** Test existing assumptions about user needs
- **Bias Mitigation Strategies:** Prepare neutral questioning approach

## Interview Structure (Funnel Technique)

### Phase 1: Rapport Building (5-7 minutes)
**Objective:** Establish psychological safety and participant comfort
- Tell me a bit about yourself and your role
- How long have you been in [relevant context]?
- What does a typical day look like for you?

### Phase 2: Context Exploration (8-12 minutes)
**Objective:** Understand participant's environment and background
- Walk me through how you currently [relevant process/task]
- What tools or methods do you use for [relevant activity]?
- How did you learn to do [relevant process] this way?

### Phase 3: Behavioral Deep Dive (15-20 minutes)
**Objective:** Uncover actual behaviors and mental models
**Critical Incident Questions:**
- Tell me about the last time you [relevant activity] - walk me through it step by step
- Describe a time when [process] didn't go as expected - what happened?
- What's the most frustrating part of [relevant process]? Can you give me a specific example?

**5 Whys Exploration:**
- Why is [identified issue] problematic for you?
- What makes that particularly challenging?
- How does that affect your [work/goals/outcomes]?

### Phase 4: Pain Point Analysis (10-15 minutes)
**Objective:** Identify frustrations and barriers
- If you could wave a magic wand and change one thing about [process], what would it be?
- What workarounds have you developed to deal with [identified challenges]?
- How do these challenges affect others on your team/in your organization?

### Phase 5: Aspiration Discovery (8-10 minutes)
**Objective:** Understand desired outcomes and motivations
- What would success look like for you in [relevant context]?
- How would you know if a solution was working well?
- What would need to be true for you to change your current approach?

### Phase 6: Validation & Wrap-up (5-7 minutes)
**Objective:** Validate insights and gather additional context
- Of everything we've discussed, what feels most important to you?
- Is there anything I should have asked but didn't?
- Who else should I talk to who might have a different perspective?

## Post-Interview Protocol
### Immediate Actions (within 2 hours)
- Complete behavioral observation notes
- Document environmental and contextual factors
- Rate interview quality and participant engagement
- Identify follow-up questions for future interviews

### Analysis Framework (within 48 hours)
- **Thematic Analysis:** Apply 6-phase thematic analysis methodology
- **Behavioral Mapping:** Document observed vs. stated behaviors
- **Mental Model Documentation:** Capture decision-making processes
- **Quote Collection:** Preserve authentic user language and expressions

## Research Quality Assurance
### Validity Measures
- **Triangulation:** Cross-reference with other research methods
- **Saturation Assessment:** Continue until no new themes emerge
- **Inter-rater Reliability:** Have multiple team members analyze key interviews
- **Member Checking:** Validate findings with participants when appropriate

### Success Criteria
- Uncover minimum 3-5 actionable insights per interview
- Validate or challenge existing assumptions about user needs
- Document distinct behavioral patterns across user segments
- Achieve 80%+ participant satisfaction with interview experience

{{#if industrySpecific}}
## Industry-Specific Considerations
{{industrySpecific}}
{{/if}}

## Accessibility & Inclusion Protocol
- **Language Accessibility:** Use clear, jargon-free language appropriate to participant literacy levels
- **Assistive Technology Support:** Ensure interview methods accommodate various accessibility needs
- **Cultural Sensitivity:** Adapt questioning style and topics for cultural context
- **Diverse Participation:** Ensure representative sampling across demographic dimensions`,variables:[{id:"projectName",name:"Project Name",type:"text",required:!0,description:"Name of the project or product being researched"},{id:"primaryResearchQuestion",name:"Primary Research Question",type:"textarea",required:!0,description:"Main question this research aims to answer"},{id:"targetUserSegment",name:"Target User Segment",type:"text",required:!0,description:"Specific user segment to interview (be precise)"},{id:"duration",name:"Interview Duration",type:"select",required:!0,description:"Planned duration for each interview",options:["30","45","60","75","90"]},{id:"sampleSize",name:"Target Sample Size",type:"number",required:!0,description:"Number of participants to interview (5-8 recommended for thematic saturation)",validation:{min:3,max:20,message:"Sample size should be between 3 and 20 participants"}},{id:"researchObjectives",name:"Research Objectives",type:"textarea",required:!0,description:"List of specific objectives this research will achieve"},{id:"recruitmentCriteria",name:"Recruitment Criteria",type:"textarea",required:!1,description:"Specific criteria for participant recruitment"}],instructions:Ip("user-interviews"),expectedOutput:`Comprehensive interview guide including:
- Structured question sequences using proven research methodologies
- Pre and post-interview protocols with quality assurance measures
- Behavioral observation frameworks and analysis guidelines
- Industry-specific adaptations and accessibility considerations
- Success criteria and validation frameworks for research quality`,qualityMetrics:{completionTime:"3-4 hours to create, 1-2 hours per interview",difficultyLevel:"intermediate",participantCount:{min:5,max:12,recommended:8},successCriteria:["Generate 3-5 actionable insights per interview","Achieve thematic saturation across participant set","Validate or challenge existing user assumptions","Maintain 80%+ participant satisfaction score"],outputQuality:{structure:["Clear interview flow from rapport to wrap-up","Logical question progression using funnel technique","Appropriate time allocation for each interview phase"],content:["Open-ended questions that encourage storytelling","Behavioral focus over stated preferences","Industry-appropriate terminology and considerations"],usability:["Easy-to-follow format for interviewer","Clear instructions for each interview phase","Practical post-interview analysis guidance"]}},researchBacking:{methodology:["Funnel technique for progressive question depth","Critical incident technique for behavioral insights","5 Whys methodology for root cause analysis","Thematic analysis framework for systematic insight extraction"],bestPractices:["Individual interviews provide deeper insights than focus groups","5-8 participants typically achieve thematic saturation","Behavioral observation more reliable than self-reported behaviors","Open-ended questions generate richer qualitative data"],industryStandards:["GDPR compliance for data collection and storage","Accessibility standards for inclusive research participation","Industry-specific regulations (HIPAA for healthcare, PCI for fintech)","Ethical research guidelines from professional UX organizations"]},customizationOptions:[{id:"includeTaskScenarios",label:"Include Task-Based Scenarios",type:"checkbox",default:!1,description:"Add realistic task scenarios for behavioral observation",category:"methodology"},{id:"focusArea",label:"Primary Focus Area",type:"select",options:["Usability","User Needs","Decision Making","Emotional Experience","Workflow Integration"],default:"User Needs",description:"Main area of focus for interview questions",category:"output"},{id:"methodologyDepth",label:"Methodology Depth",type:"select",options:["Basic","Intermediate","Advanced"],default:"Intermediate",description:"Level of research methodology detail to include",category:"quality"},{id:"timeConstraints",label:"Time Constraints",type:"select",options:["Flexible","Limited","Strict"],default:"Flexible",description:"How strict are the time constraints for this research?",category:"constraints"}],industryAdaptations:{fintech:{template:"Enhanced with financial services context and compliance considerations",considerations:["Address trust and security concerns explicitly","Include questions about financial decision-making processes","Explore regulatory compliance understanding","Consider cross-device usage for financial tasks"]},healthcare:{template:"Enhanced with healthcare context and HIPAA compliance",considerations:["Ensure HIPAA compliance in all procedures","Include caregiver relationship questions","Address varying health literacy levels","Explore emotional aspects with sensitivity"]},ecommerce:{template:"Enhanced with e-commerce context and shopping behaviors",considerations:["Include multichannel shopping behavior questions","Explore purchase decision-making factors","Ask about post-purchase experiences","Consider seasonal and promotional influences"]},saas:{template:"Enhanced with SaaS context and B2B considerations",considerations:["Focus on workflow integration patterns","Explore team collaboration needs","Ask about tool adoption challenges","Consider organizational decision-making processes"]},education:{template:"Enhanced with educational context and learning needs",considerations:["Consider diverse learning styles","Explore motivation and engagement factors","Ask about collaborative learning preferences","Address institutional constraints"]}}},{id:"personas",name:"User Personas",description:"Create user personas based on research and project context",category:"synthesis",frameworks:["design-thinking","human-centered-design","jobs-to-be-done"],stages:["define","synthesize","persona-creation"],template:`You are a senior UX researcher. Create 3 user personas for {{projectName}}. {{projectDescription}}

## Project Context:
{{knowledgeBase}}

---

## Instructions:
Use the Project Context above to fill in ALL bracketed placeholders below with specific, relevant information from the project knowledge base. Base all persona details on the research data, user insights, and business context provided.

---

## PERSONA 1

**Name:** [Create a realistic full name based on the target audience demographics in the Project Context]
**Age:** [Specific age based on the age range and demographics mentioned in the Project Context]
**Occupation:** [Specific job title relevant to the project's target users as described in the Project Context]
**Location:** [Specific city, state/country based on the target market or user base mentioned in the Project Context]
**Quote:** "[Write a one-sentence quote that captures their essence based on user research, pain points, and goals in the Project Context]"

**Goals:**
- [Write specific goal 1 based on user needs, desires, and objectives mentioned in the Project Context]
- [Write specific goal 2 based on user needs, desires, and objectives mentioned in the Project Context]
- [Write specific goal 3 based on user needs, desires, and objectives mentioned in the Project Context]

**Pain Points:**
- [Write specific pain point 1 from user research, complaints, or frustrations documented in the Project Context]
- [Write specific pain point 2 from user research, complaints, or frustrations documented in the Project Context]
- [Write specific pain point 3 from user research, complaints, or frustrations documented in the Project Context]

**Behaviors:**
- [Describe specific behavior 1 based on user actions, habits, and patterns mentioned in the Project Context]
- [Describe specific behavior 2 based on user actions, habits, and patterns mentioned in the Project Context]
- [Describe specific behavior 3 based on user actions, habits, and patterns mentioned in the Project Context]

**Motivations:**
- [Describe what drives them based on user motivations and values mentioned in the Project Context]
- [Describe what they value most based on priorities and preferences in the Project Context]
- [Describe what success looks like to them based on desired outcomes in the Project Context]

**Tech Comfort:** [State: Low, Medium, or High based on the technology usage and digital literacy mentioned in the Project Context]

**Background:** [Write 2-3 sentences about their life context, work environment, and relevant circumstances based on the research data, user profiles, and contextual information in the Project Context]

---

## PERSONA 2

**Name:** [Create a realistic full name based on the target audience demographics in the Project Context]
**Age:** [Specific age based on the age range and demographics mentioned in the Project Context]
**Occupation:** [Specific job title relevant to the project's target users as described in the Project Context]
**Location:** [Specific city, state/country based on the target market or user base mentioned in the Project Context]
**Quote:** "[Write a one-sentence quote that captures their essence based on user research, pain points, and goals in the Project Context]"

**Goals:**
- [Write specific goal 1 based on user needs, desires, and objectives mentioned in the Project Context]
- [Write specific goal 2 based on user needs, desires, and objectives mentioned in the Project Context]
- [Write specific goal 3 based on user needs, desires, and objectives mentioned in the Project Context]

**Pain Points:**
- [Write specific pain point 1 from user research, complaints, or frustrations documented in the Project Context]
- [Write specific pain point 2 from user research, complaints, or frustrations documented in the Project Context]
- [Write specific pain point 3 from user research, complaints, or frustrations documented in the Project Context]

**Behaviors:**
- [Describe specific behavior 1 based on user actions, habits, and patterns mentioned in the Project Context]
- [Describe specific behavior 2 based on user actions, habits, and patterns mentioned in the Project Context]
- [Describe specific behavior 3 based on user actions, habits, and patterns mentioned in the Project Context]

**Motivations:**
- [Describe what drives them based on user motivations and values mentioned in the Project Context]
- [Describe what they value most based on priorities and preferences in the Project Context]
- [Describe what success looks like to them based on desired outcomes in the Project Context]

**Tech Comfort:** [State: Low, Medium, or High based on the technology usage and digital literacy mentioned in the Project Context]

**Background:** [Write 2-3 sentences about their life context, work environment, and relevant circumstances based on the research data, user profiles, and contextual information in the Project Context]

---

## PERSONA 3

**Name:** [Create a realistic full name based on the target audience demographics in the Project Context]
**Age:** [Specific age based on the age range and demographics mentioned in the Project Context]
**Occupation:** [Specific job title relevant to the project's target users as described in the Project Context]
**Location:** [Specific city, state/country based on the target market or user base mentioned in the Project Context]
**Quote:** "[Write a one-sentence quote that captures their essence based on user research, pain points, and goals in the Project Context]"

**Goals:**
- [Write specific goal 1 based on user needs, desires, and objectives mentioned in the Project Context]
- [Write specific goal 2 based on user needs, desires, and objectives mentioned in the Project Context]
- [Write specific goal 3 based on user needs, desires, and objectives mentioned in the Project Context]

**Pain Points:**
- [Write specific pain point 1 from user research, complaints, or frustrations documented in the Project Context]
- [Write specific pain point 2 from user research, complaints, or frustrations documented in the Project Context]
- [Write specific pain point 3 from user research, complaints, or frustrations documented in the Project Context]

**Behaviors:**
- [Describe specific behavior 1 based on user actions, habits, and patterns mentioned in the Project Context]
- [Describe specific behavior 2 based on user actions, habits, and patterns mentioned in the Project Context]
- [Describe specific behavior 3 based on user actions, habits, and patterns mentioned in the Project Context]

**Motivations:**
- [Describe what drives them based on user motivations and values mentioned in the Project Context]
- [Describe what they value most based on priorities and preferences in the Project Context]
- [Describe what success looks like to them based on desired outcomes in the Project Context]

**Tech Comfort:** [State: Low, Medium, or High based on the technology usage and digital literacy mentioned in the Project Context]

**Background:** [Write 2-3 sentences about their life context, work environment, and relevant circumstances based on the research data, user profiles, and contextual information in the Project Context]`,variables:[{id:"projectName",name:"Project Name",type:"text",required:!0,description:"Name of the project"},{id:"projectDescription",name:"Project Description",type:"textarea",required:!1,description:"Brief description of the project"},{id:"knowledgeBase",name:"Knowledge Base Content",type:"textarea",required:!1,description:"All knowledge base content including user research, business context, target audience, pain points, behaviors, goals"}],instructions:Ip("personas"),expectedOutput:"3 complete user personas with research-backed attributes",qualityMetrics:{completionTime:"30-60 minutes",difficultyLevel:"intermediate",participantCount:{min:5,max:30,recommended:15},successCriteria:["Create 3 distinct, evidence-based personas","Include specific attributes based on research","Define clear goals, pain points, and behaviors"],outputQuality:{structure:["Clear persona attributes","Logical organization","Comprehensive profile"],content:["Specific, actionable insights","Research-backed attributes","Clear connection to user needs"],usability:["Easy reference format","Clear and concise","Actionable insights"]}},researchBacking:{methodology:["Research-based persona development","User interview synthesis","Behavioral observation","Data-driven attributes"],bestPractices:["3-5 personas maximum","Focus on behaviors and goals","Base on real research data","Keep personas actionable"],industryStandards:["Include diverse representation","Focus on user needs","Align with business objectives","Regular updates based on research"]},customizationOptions:[{id:"personaCount",label:"Number of Personas",type:"number",default:3,description:"How many personas should be created? (2-5 recommended)",category:"output"}],industryAdaptations:{fintech:{template:"Enhanced with financial services context",considerations:["Include financial literacy levels","Address security behaviors","Include financial goals","Consider risk tolerance"]},healthcare:{template:"Enhanced with healthcare context",considerations:["Include health literacy levels","Address accessibility needs","Include caregiver relationships","Consider medical conditions"]},ecommerce:{template:"Enhanced with e-commerce context",considerations:["Include shopping preferences","Address device usage","Include brand loyalty patterns","Consider price sensitivity"]},saas:{template:"Enhanced with SaaS context",considerations:["Include technical proficiency","Address team roles","Include workflow needs","Consider change management"]},education:{template:"Enhanced with educational context",considerations:["Include learning preferences","Address technology comfort","Include collaboration preferences","Consider motivation factors"]}}},{id:"usability-tests",name:"Comprehensive Usability Testing Plan",description:"Design systematic usability testing protocols with statistical rigor and inclusive methodology",category:"testing",frameworks:["design-thinking","lean-ux","human-centered-design"],stages:["test","validate","measure"],template:`# Evidence-Based Usability Testing Plan: {{projectName}}

## Testing Strategy Framework
**Testing Objective:** {{testingObjective}}
**Primary Metrics:** {{primaryMetrics}}
**Secondary Metrics:** {{secondaryMetrics}}
**Testing Method:** {{testingMethod}}
**Statistical Requirements:** 95% confidence level, 80% statistical power

## Participant Strategy

### Sample Design
**Target Sample Size:** {{sampleSize}} participants
**Recruitment Method:** {{recruitmentMethod}}
**Screening Criteria:** {{screeningCriteria}}
**Diversity Requirements:** Representative sampling across key demographic dimensions

### Participant Profiles
{{#each participantProfiles}}
**Profile {{@index}}:** {{this}}
{{/each}}

### Accessibility Inclusion
**Assistive Technology Testing:** Include users of screen readers, voice control, and other accessibility tools
**Accommodation Requirements:** Provide appropriate accommodations for diverse abilities

## Testing Methodology

### Task Design
**Task Scenarios:** {{taskScenarios}}
**Task Success Criteria:** {{successCriteria}}
**Task Completion Metrics:** Success rate, time on task, error rate, satisfaction

### Protocol Structure
#### Pre-Test Phase (5-10 minutes)
- Participant consent and setup
- Background questionnaire
- Technology setup and comfort assessment
- Think-aloud protocol explanation

#### Testing Phase ({{testingDuration}} minutes)
{{#each tasks}}
**Task {{@index}}:** {{this.description}}
**Success Criteria:** {{this.success}}
**Expected Time:** {{this.time}}
{{/each}}

#### Post-Test Phase (10-15 minutes)
- System Usability Scale (SUS) questionnaire
- Retrospective interview
- Satisfaction and preference assessment
- Additional feedback collection

## Data Collection Framework

### Quantitative Metrics
**Task Completion Rate:** Target {{completionRateTarget}}%
**Time on Task:** Baseline vs. target comparison
**Error Rate:** Critical vs. non-critical error tracking
**Efficiency Ratio:** Task completion / time spent

### Qualitative Metrics
**User Satisfaction:** SUS score target {{susTarget}}
**Confidence Level:** Post-task confidence rating
**Perceived Usability:** Subjective usability assessment
**Emotional Response:** Frustration and satisfaction indicators

### Observational Data
**Behavioral Patterns:** Navigation and interaction patterns
**Error Recovery:** How users handle and recover from errors
**Help-Seeking Behavior:** When and how users seek assistance
**Cognitive Load Indicators:** Signs of confusion or uncertainty

## Testing Environment

### {{testingMethod}} Setup
{{#if (eq testingMethod "Moderated In-Person")}}
**Location:** Controlled testing laboratory
**Equipment:** Recording equipment, eye-tracking (if available), multiple devices
**Recording Setup:** Video, audio, and screen recording with participant consent
**Moderator Guidelines:** Neutral facilitation, minimal intervention during tasks
{{else if (eq testingMethod "Moderated Remote")}}
**Platform:** {{remotePlatform}}
**Technology Requirements:** Reliable internet, screen sharing capability
**Recording Setup:** Platform recording with participant consent
**Moderator Guidelines:** Remote facilitation best practices
{{else if (eq testingMethod "Unmoderated Remote")}}
**Platform:** {{remotePlatform}}
**Task Instructions:** Clear, detailed self-service instructions
**Quality Assurance:** Automated quality checks and response validation
{{/if}}

## Analysis Framework

### Statistical Analysis
**Significance Testing:** Chi-square for completion rates, t-tests for time metrics
**Confidence Level:** 95% confidence intervals for key metrics
**Effect Size Calculation:** Cohen's d for meaningful differences
**Sample Size Validation:** Post-hoc power analysis

### Qualitative Analysis
**Thematic Analysis:** 6-phase systematic approach for verbal data
**Issue Severity Rating:** Critical, High, Medium, Low based on impact and frequency
**Recommendation Prioritization:** Impact vs. effort matrix for improvement suggestions

## Quality Assurance

### Pilot Testing
**Pilot Sessions:** {{pilotSessionCount}} sessions before full testing
**Protocol Refinement:** Based on pilot feedback and technical validation
**Technical Validation:** System performance and recording quality verification

### Inter-Rater Reliability
**Multiple Observer Setup:** {{observerSetup}}
**Agreement Threshold:** 80% inter-rater agreement on issue identification
**Consensus Protocol:** Structured discussion for disagreement resolution

## Reporting Framework

### Executive Summary
- Key findings and business implications
- Usability score and industry benchmarking
- Priority recommendations with expected impact

### Detailed Findings
- Task-by-task performance analysis
- User segment comparisons and insights
- Issue identification with supporting evidence

### Actionable Recommendations
- Prioritized improvement suggestions
- Implementation difficulty assessment
- Expected impact and success metrics

## Success Criteria & Next Steps

### Testing Success Metrics
- Complete {{sampleSize}} valid sessions with target participants
- Achieve statistical significance in primary metrics
- Identify minimum {{minIssues}} actionable usability issues
- Generate {{recommendationCount}} prioritized recommendations

### Follow-Up Protocol
**Immediate Actions:** Critical issue communication to development team
**Short-term Planning:** Iteration roadmap with timeline and ownership
**Long-term Strategy:** Ongoing testing schedule and continuous measurement

{{#if industrySpecific}}
## Industry-Specific Considerations
{{industrySpecific}}
{{/if}}

## Risk Mitigation
**Technical Risks:** Platform failures, recording issues, connectivity problems
**Participant Risks:** No-shows, inadequate screening, bias in responses
**Timeline Risks:** Extended recruitment, analysis delays, stakeholder availability`,variables:[{id:"projectName",name:"Project/Product Name",type:"text",required:!0,description:"Name of the product or feature being tested"},{id:"testingObjective",name:"Primary Testing Objective",type:"textarea",required:!0,description:"Main goal and research questions for this usability test"},{id:"testingMethod",name:"Testing Method",type:"select",required:!0,options:["Moderated In-Person","Moderated Remote","Unmoderated Remote","Hybrid"],description:"Primary testing methodology to be used"},{id:"sampleSize",name:"Target Sample Size",type:"number",required:!0,description:"Number of participants needed (5-8 for qualitative, 30+ for quantitative)",validation:{min:5,max:100,message:"Sample size should be between 5 and 100 participants"}},{id:"primaryMetrics",name:"Primary Success Metrics",type:"textarea",required:!0,description:"Key metrics that will determine testing success"},{id:"completionRateTarget",name:"Task Completion Rate Target",type:"number",required:!0,description:"Target completion rate percentage (e.g., 85)",validation:{min:50,max:100,message:"Completion rate target should be between 50% and 100%"}},{id:"susTarget",name:"SUS Score Target",type:"number",required:!0,description:"Target System Usability Scale score (68 is average, 80+ is excellent)",validation:{min:0,max:100,message:"SUS score should be between 0 and 100"}},{id:"testingDuration",name:"Testing Session Duration",type:"select",required:!0,options:["30","45","60","90"],description:"Duration of each testing session in minutes"}],instructions:Ip("usability-tests"),expectedOutput:`Comprehensive testing plan including:
- Statistically rigorous methodology with appropriate sample sizes
- Inclusive participant recruitment with accessibility considerations
- Structured protocol with quantitative and qualitative measurement
- Analysis framework with statistical significance testing
- Quality assurance measures and validation protocols`,qualityMetrics:{completionTime:"6-8 hours for plan creation, 2-3 hours per session",difficultyLevel:"advanced",participantCount:{min:5,max:30,recommended:8},successCriteria:["Design statistically valid testing protocol","Include comprehensive accessibility considerations","Create actionable analysis and reporting framework","Establish clear quality assurance measures"],outputQuality:{structure:["Logical flow from strategy through execution to analysis","Clear separation of quantitative and qualitative measures","Comprehensive risk mitigation and contingency planning"],content:["Statistically rigorous methodology and sample size calculations","Inclusive design with accessibility and diversity considerations","Actionable analysis framework with clear success criteria"],usability:["Easy-to-follow protocol for research team execution","Clear templates and checklists for consistent implementation","Practical timeline and resource requirements"]}},researchBacking:{methodology:["Nielsen's recommendation of 5 users for qualitative insights","Statistical power analysis for quantitative studies","Think-aloud protocol for cognitive process insight","System Usability Scale (SUS) for standardized measurement"],bestPractices:["Pilot testing prevents protocol issues and improves data quality","Mixed methods (quantitative + qualitative) provide comprehensive insights","Task scenarios should reflect realistic user goals and contexts","Accessibility testing ensures inclusive design validation"],industryStandards:["WCAG 2.1 AA compliance for accessibility testing","ISO 9241-11 standard for usability measurement","Statistical significance testing for reliable conclusions","Ethical guidelines for user research and data privacy"]},customizationOptions:[{id:"includeAccessibilityTesting",label:"Include Accessibility Testing",type:"checkbox",default:!0,description:"Include participants with disabilities and assistive technology users",category:"methodology"},{id:"statisticalRigor",label:"Statistical Rigor Level",type:"select",options:["Qualitative Focus","Mixed Methods","Quantitative Focus"],default:"Mixed Methods",description:"Balance between qualitative insights and quantitative validation",category:"methodology"},{id:"timelineUrgency",label:"Timeline Urgency",type:"select",options:["Flexible","Standard","Rush"],default:"Standard",description:"How urgent are the testing results needed?",category:"constraints"},{id:"budgetLevel",label:"Budget Level",type:"select",options:["Limited","Standard","Premium"],default:"Standard",description:"Available budget for testing (affects recruitment and tools)",category:"constraints"}],industryAdaptations:{fintech:{template:"Enhanced with financial services testing considerations",considerations:["Include testing of security features and trust indicators","Test regulatory compliance interfaces for usability","Consider financial decision-making complexity in task design","Address privacy and security concerns in participant recruitment"]},healthcare:{template:"Enhanced with healthcare testing considerations",considerations:["Ensure HIPAA compliance and patient privacy protection","Include accessibility testing with diverse ability levels","Test clinical accuracy and safety of health information","Consider caregiver and family decision-making contexts"]},ecommerce:{template:"Enhanced with e-commerce testing considerations",considerations:["Test conversion funnels and purchase completion flows","Include cross-device and cross-channel testing scenarios","Test product discovery and comparison features","Consider seasonal and promotional influences on behavior"]},saas:{template:"Enhanced with SaaS testing considerations",considerations:["Test complex workflows and multi-user collaboration","Include onboarding and feature discovery testing","Test integration scenarios with other business tools","Consider organizational decision-making and approval processes"]},education:{template:"Enhanced with educational testing considerations",considerations:["Test with diverse learning styles and accessibility needs","Include collaborative features and peer interaction testing","Test across different devices and learning contexts","Consider institutional constraints and administrative requirements"]}}},{id:"surveys",name:"Quantitative Survey Research",description:"Design statistically valid surveys using psychometric principles and validated question formats",category:"research",frameworks:["design-thinking","heart-framework"],stages:["empathize","discover","happiness"],template:`You are an expert UX researcher with advanced training in survey methodology and statistical analysis. Using the project knowledge provided: {knowledge_context}, create a comprehensive quantitative survey design that follows established psychometric principles and yields statistically significant insights.

# Quantitative Survey Design: {{projectName}}

## Research Strategy Framework
**Primary Research Objective:** {{primaryResearchObjective}}
**Target Population:** {{targetPopulation}}
**Sample Size Required:** {{sampleSize}} participants for {{confidenceLevel}}% confidence level
**Survey Distribution Method:** {{distributionMethod}}
**Expected Response Rate:** {{expectedResponseRate}}%
**Statistical Analysis Plan:** {{analysisMethod}}

## Pre-Survey Planning

### Population and Sampling Strategy
- **Target Demographics:** {{targetDemographics}}
- **Inclusion Criteria:** {{inclusionCriteria}}
- **Exclusion Criteria:** {{exclusionCriteria}}
- **Sampling Method:** {{samplingMethod}} (random, stratified, convenience, etc.)
- **Power Analysis:** Calculated sample size ensures {{statisticalPower}}% power to detect {{effectSize}} effect size

### Question Development Framework
- **Validated Instruments:** Incorporate established scales where appropriate (SUS, Net Promoter Score, etc.)
- **Question Types Balance:** {{percentClosedEnded}}% closed-ended for quantitative analysis, {{percentOpenEnded}}% open-ended for qualitative insights
- **Response Scale Selection:** Use appropriate scales (5-point Likert, semantic differential, ranking) based on measurement objectives
- **Cognitive Load Management:** Average completion time target: {{completionTimeTarget}} minutes

## Survey Structure and Design

### Section 1: Screening and Demographics
**Screening Questions:**
{{#each screeningQuestions}}
- {{this.question}} [{{this.type}}]
{{/each}}

**Demographics Collection:**
- Collect at survey end to avoid priming effects
- Include only necessary demographic variables for analysis
- Ensure inclusive language and response options

### Section 2: Main Research Questions
{{#each mainSections}}
**Section: {{this.title}}**
**Measurement Objective:** {{this.objective}}

{{#each this.questions}}
- **Question {{@index}}:** {{this.text}}
- **Scale:** {{this.scale}}
- **Required:** {{this.required}}
- **Logic:** {{this.skipLogic}}
{{/each}}
{{/each}}

### Section 3: Validation and Quality Control
- **Attention Check Questions:** Include {{attentionCheckCount}} attention checks to identify careless responding
- **Consistency Checks:** Pair related questions to validate response quality
- **Response Time Monitoring:** Flag responses completed in less than {{minimumTimeThreshold}} minutes

## Statistical Analysis Plan

### Descriptive Statistics
- **Frequency Distributions:** For all categorical variables
- **Central Tendency:** Mean, median, mode for continuous variables
- **Variability Measures:** Standard deviation, range, quartiles
- **Missing Data Analysis:** Pattern analysis and imputation strategy

### Inferential Statistics
- **Primary Comparisons:** {{primaryComparisons}}
- **Statistical Tests:** {{statisticalTests}} based on data types and distribution
- **Multiple Comparisons:** {{multipleComparisonsAdjustment}} adjustment for family-wise error rate
- **Confidence Intervals:** Report {{confidenceLevel}}% CIs for all effect estimates

### Advanced Analytics (if applicable)
- **Factor Analysis:** Explore underlying constructs in multi-item scales
- **Cluster Analysis:** Identify user segments based on response patterns
- **Regression Analysis:** Model relationships between variables
- **Structural Equation Modeling:** Test theoretical frameworks

## Quality Assurance Protocol

### Pre-Launch Testing
- **Cognitive Interviews:** Test {{cognitiveInterviewCount}} participants to identify confusion
- **Pilot Testing:** Run pilot with {{pilotSampleSize}} participants
- **Technical Validation:** Test across devices and browsers
- **Accessibility Check:** Ensure WCAG 2.1 AA compliance

### Data Quality Measures
- **Response Validation:** Real-time validation rules for data entry
- **Duplicate Detection:** IP address and email monitoring
- **Geographic Verification:** Location-based validation if relevant
- **Response Pattern Analysis:** Identify straight-lining and random responding

## Reporting and Analysis Framework

### Executive Dashboard
- **Key Performance Indicators:** {{#each kpis}}{{this}}; {{/each}}
- **Statistical Significance:** Highlight findings with p < {{alphaLevel}}
- **Effect Size Interpretation:** Include Cohen's conventions for practical significance
- **Confidence Intervals:** Visual representation of uncertainty

### Detailed Analysis Report
- **Methodology Documentation:** Complete transparency in methods and limitations
- **Assumption Testing:** Document statistical assumption verification
- **Sensitivity Analysis:** Test robustness of findings to methodological choices
- **Practical Implications:** Connect statistical findings to actionable design insights

## Ethical and Compliance Considerations

### Data Privacy and Consent
- **Informed Consent:** Clear explanation of research purpose and data use
- **Data Storage:** Secure, encrypted storage with retention schedule
- **Anonymization:** Remove or encrypt personally identifiable information
- **Compliance:** Adhere to {{regulatoryRequirements}} (GDPR, HIPAA, etc.)

### Bias Mitigation
- **Question Order Randomization:** Prevent order effects where appropriate
- **Response Option Randomization:** Minimize position bias
- **Interviewer Training:** For phone/interview-administered surveys
- **Cultural Sensitivity:** Language and cultural appropriateness review

{{#if industrySpecific}}
## Industry-Specific Considerations
{{industrySpecific}}
{{/if}}

## Success Metrics and Validation

### Response Quality Indicators
- **Completion Rate:** Target {{targetCompletionRate}}%
- **Data Quality Score:** Composite measure of attention checks and consistency
- **Representativeness:** Compare sample to target population demographics
- **Reliability:** Internal consistency (Cronbach's   0.70 for scales)

### Actionability Assessment
- **Statistical Power:** Achieved power for primary comparisons
- **Clinical/Practical Significance:** Meaningful effect sizes beyond statistical significance
- **Confidence in Findings:** Replication recommendations and confidence levels
- **Implementation Guidance:** Clear connection between findings and design decisions`,variables:[{id:"projectName",name:"Project Name",type:"text",required:!0,description:"Name of the project or product being researched"},{id:"primaryResearchObjective",name:"Primary Research Objective",type:"textarea",required:!0,description:"Main research question this survey aims to answer"},{id:"targetPopulation",name:"Target Population",type:"text",required:!0,description:"Specific population to survey (be precise about demographics and characteristics)"},{id:"sampleSize",name:"Required Sample Size",type:"number",required:!0,description:"Number of participants needed for statistical significance",validation:{min:30,max:1e4,message:"Sample size should be between 30 and 10,000 participants"}},{id:"confidenceLevel",name:"Confidence Level",type:"select",required:!0,options:["90","95","99"],description:"Statistical confidence level for results"},{id:"distributionMethod",name:"Distribution Method",type:"select",required:!0,options:["Email","In-app","Website pop-up","Social media","Phone","Mail","Mixed methods"],description:"Primary method for distributing the survey"}],instructions:["Design questions using established psychometric principles and validated question formats","Balance closed-ended questions for quantitative analysis with open-ended questions for qualitative insights","Use appropriate response scales (5-point Likert, semantic differential, ranking) based on measurement objectives","Implement skip logic and branching to reduce survey fatigue and improve response quality","Structure surveys with logical flow: general to specific, easy to difficult, engaging opening","Include attention check questions to validate response quality and identify careless responding","Plan for appropriate sample sizes based on population size and desired confidence levels","Pre-test surveys with representative users to identify confusion and technical issues","Use clear, jargon-free language appropriate to respondent education and literacy levels","Plan follow-up strategies for incomplete responses while respecting user privacy preferences"],expectedOutput:`Comprehensive survey design including:
- Statistically rigorous methodology with appropriate sample sizes and power analysis
- Psychometrically sound question development with validated instruments
- Quality assurance protocols including pilot testing and response validation
- Detailed analysis plan with appropriate statistical tests and reporting framework
- Ethical considerations and compliance requirements for data collection`,qualityMetrics:{completionTime:"4-6 hours for design, 2-4 weeks for data collection and analysis",difficultyLevel:"advanced",participantCount:{min:30,max:1e3,recommended:200},successCriteria:["Achieve target response rate and sample size for statistical power","Maintain data quality with <10% careless responding","Generate statistically significant insights with practical implications","Create actionable findings that inform design decisions"],outputQuality:{structure:["Logical survey flow optimized for completion and data quality","Appropriate balance of question types for comprehensive insights","Clear analysis plan connecting findings to actionable recommendations"],content:["Psychometrically sound questions using validated scales where appropriate","Statistical rigor in sampling, analysis, and interpretation","Industry-appropriate terminology and compliance considerations"],usability:["Clear instructions and intuitive interface for participants","Comprehensive analysis framework for research team implementation","Practical timeline and resource requirements documentation"]}},researchBacking:{methodology:["Psychometric theory for reliable and valid measurement","Statistical power analysis for appropriate sample sizing","Survey methodology best practices from established research institutions","Cognitive interviewing techniques for question validation"],bestPractices:["Pre-testing prevents response quality issues and improves completion rates","Mixed question types provide both statistical rigor and qualitative depth","Attention checks and validation measures ensure high-quality data","Proper statistical analysis accounts for multiple comparisons and effect sizes"],industryStandards:["GDPR and data privacy compliance for international research","Statistical significance testing with appropriate confidence levels","Accessibility standards (WCAG 2.1 AA) for inclusive survey design","Industry-specific regulations for sensitive topics (HIPAA, financial services, etc.)"]},customizationOptions:[{id:"includeLongitudinalDesign",label:"Include Longitudinal Design",type:"checkbox",default:!1,description:"Design for repeated measures over time to track changes",category:"methodology"},{id:"statisticalComplexity",label:"Statistical Analysis Complexity",type:"select",options:["Basic Descriptive","Inferential Statistics","Advanced Multivariate"],default:"Inferential Statistics",description:"Level of statistical analysis planned for the data",category:"output"},{id:"incentiveStrategy",label:"Participant Incentive Strategy",type:"select",options:["None","Small Incentive","Lottery","Donation to Charity"],default:"Small Incentive",description:"Strategy for encouraging participation",category:"methodology"}],industryAdaptations:{fintech:{template:"Enhanced with financial services survey requirements",considerations:["Include questions about financial stress and security concerns","Address regulatory compliance requirements for financial data collection","Use appropriate financial terminology while maintaining accessibility","Consider cross-device usage patterns for financial tasks"]},healthcare:{template:"Enhanced with healthcare survey requirements",considerations:["Ensure HIPAA compliance and obtain appropriate consent for health-related questions","Use validated health survey instruments where appropriate for benchmarking","Address cultural sensitivity around health topics and privacy concerns","Include caregiver and family decision-making contexts in question design"]},ecommerce:{template:"Enhanced with e-commerce survey requirements",considerations:["Include purchase intent and brand loyalty questions for business intelligence","Address seasonal and promotional influences on shopping behavior","Use appropriate price sensitivity measurement techniques","Include multichannel shopping behavior and device usage patterns"]}}},{id:"observations",name:"Ethnographic User Observation",description:"Conduct systematic ethnographic observations to understand user behavior in natural contexts",category:"research",frameworks:["design-thinking","human-centered-design"],stages:["empathize","hear","discover"],template:`You are an expert UX researcher specializing in ethnographic methods and naturalistic observation. Using the project knowledge provided: {knowledge_context}, design a comprehensive observation study that reveals authentic user behaviors and uncovers insights invisible in controlled research settings.

# Ethnographic Observation Study: {{projectName}}

## Research Strategy Framework
**Observation Objective:** {{observationObjective}}
**Target User Context:** {{targetContext}}
**Study Duration:** {{studyDuration}}
**Observation Method:** {{observationMethod}}
**Data Collection Approach:** {{dataCollectionApproach}}
**Analysis Framework:** Thematic analysis with behavioral coding

## Methodological Foundation

### Ethnographic Principles
- **Naturalistic Setting:** Observe users in their authentic environments without artificial constraints
- **Holistic Understanding:** Capture the complete context including social, cultural, and environmental factors
- **Minimal Intervention:** Maintain passive observer role to avoid influencing natural behaviors
- **Cultural Sensitivity:** Approach observation with respect for diverse practices and norms
- **Iterative Insight Development:** Allow insights to emerge through systematic observation and reflection

### Observer Training and Preparation
- **Bias Awareness Training:** Recognize and minimize observer bias and cultural assumptions
- **Documentation Standards:** Consistent note-taking protocols and behavioral coding systems
- **Technology Setup:** Recording equipment (with consent), observation templates, and mobile documentation tools
- **Ethical Guidelines:** Clear understanding of privacy boundaries and informed consent requirements

## Study Design and Planning

### Participant and Context Selection
**Primary User Segments:** {{primaryUserSegments}}
**Observation Locations:** {{observationLocations}}
**Time Sampling Strategy:** {{timeSamplingStrategy}}
**Social Context Considerations:** {{socialContextFactors}}

### Observation Protocol
**Session Structure:**
1. **Pre-Observation Setup (15-30 minutes):**
   - Environment familiarization and equipment setup
   - Initial context documentation (physical space, social dynamics)
   - Baseline behavioral observations before target activity begins

2. **Primary Observation Period ({{primaryObservationDuration}}):**
   - Focus on {{targetBehaviors}}
   - Document both explicit actions and implicit behaviors
   - Note environmental influences and contextual factors
   - Capture social interactions and communication patterns

3. **Post-Observation Documentation (15-20 minutes):**
   - Immediate reflection notes while observations are fresh
   - Equipment and setup documentation
   - Initial pattern identification and questions for further exploration

### Data Collection Framework

#### Behavioral Observation Categories
**Task Performance:**
- Sequence of actions and decision points
- Problem-solving strategies and workarounds
- Error patterns and recovery methods
- Efficiency indicators and time allocation

**Environmental Interaction:**
- Physical space utilization and constraints
- Tool and technology usage patterns
- Social and cultural context influences
- Interruption and distraction management

**Emotional and Cognitive Indicators:**
- Signs of frustration, confusion, or satisfaction
- Cognitive load indicators (pausing, re-reading, seeking help)
- Confidence levels and comfort with processes
- Motivation and engagement signals

#### Documentation Methods
**Field Notes Structure:**
- **Objective Observations:** What happened (factual, descriptive)
- **Behavioral Patterns:** Recurring actions and decision patterns
- **Environmental Context:** Physical, social, and cultural factors
- **Researcher Interpretations:** Initial insights and questions (clearly marked as interpretive)

**Visual Documentation:** {{visualDocumentationPlan}}
**Audio/Video Recording:** {{recordingPlan}} (with explicit consent)
**Artifact Collection:** {{artifactCollectionPlan}}

## Analysis and Synthesis Framework

### Thematic Analysis Process
**Phase 1: Data Familiarization**
- Review all observation notes and recordings systematically
- Create chronological activity maps for each observation session
- Identify immediate patterns and contradictions in behavior

**Phase 2: Initial Coding**
- Apply descriptive codes to behavioral observations
- Use both inductive (emerging from data) and deductive (theory-driven) codes
- Maintain clear distinction between observed behaviors and interpretations

**Phase 3: Pattern Identification**
- Group related codes into behavioral themes and user needs
- Map relationships between environmental factors and behavioral patterns
- Identify gaps between intended and actual user behaviors

**Phase 4: Insight Development**
- Connect behavioral patterns to broader user goals and motivations
- Identify design opportunities based on observed pain points and workarounds
- Validate insights across multiple observation sessions and contexts

### Cross-Session Analysis
**Consistency Validation:** Compare behavioral patterns across different users and contexts
**Environmental Impact Assessment:** Analyze how different contexts affect user behavior
**Segment Differentiation:** Identify behavioral differences across user segments
**Temporal Patterns:** Track how behaviors change over time or with experience level

## Quality Assurance and Validation

### Observer Reliability
**Inter-Observer Agreement:** {{interObserverSetup}} (if multiple observers)
**Agreement Threshold:** 80% agreement on key behavioral observations
**Calibration Sessions:** Regular alignment meetings to ensure consistent observation standards
**Blind Coding Validation:** Independent analysis of select sessions by multiple researchers

### Data Quality Measures
**Observation Completeness:** Ensure comprehensive coverage of target behaviors and contexts
**Context Documentation:** Systematic recording of environmental and social factors
**Participant Verification:** {{participantValidationPlan}} where appropriate
**Triangulation:** Cross-reference observations with other research methods

## Ethical Considerations and Privacy

### Informed Consent Process
- **Voluntary Participation:** Clear communication about right to withdraw
- **Recording Permissions:** Separate consent for audio/video documentation
- **Data Usage Transparency:** Explain how observations will be analyzed and reported
- **Privacy Protection:** Specific protocols for handling sensitive observations

### Cultural and Social Sensitivity
- **Power Dynamics:** Acknowledge researcher-participant relationship dynamics
- **Cultural Competency:** Respectful approach to diverse cultural practices
- **Vulnerable Populations:** Additional protections for children, elderly, or other vulnerable groups
- **Community Benefit:** Ensure research provides value to observed communities

## Reporting and Application Framework

### Behavioral Insights Report
**Executive Summary:**
- Key behavioral patterns and their implications for design
- Priority opportunity areas based on observed pain points
- Recommendations for immediate and long-term design improvements

**Detailed Findings:**
- Comprehensive behavioral pattern documentation with supporting evidence
- Environmental factor analysis and context-dependent behaviors
- User segment comparisons and differentiated needs
- Connection between observations and existing research findings

### Design Implications
**Immediate Opportunities:** Low-effort, high-impact improvements based on observed behaviors
**Strategic Recommendations:** Long-term design directions informed by deep behavioral insights
**Feature Requirements:** Specific functionality needs identified through behavioral observation
**Design Principles:** User behavior-informed principles for future design decisions

{{#if industrySpecific}}
## Industry-Specific Considerations
{{industrySpecific}}
{{/if}}

## Success Criteria and Validation

### Study Execution Metrics
- **Observation Coverage:** Complete {{targetObservationHours}} hours across {{targetParticipantCount}} participants
- **Context Diversity:** Observe across {{contextVarietyTarget}} different environments and situations
- **Data Quality:** Achieve comprehensive behavioral documentation with <10% missing data
- **Insight Generation:** Identify minimum {{minimumInsightTarget}} actionable design insights

### Long-term Value Assessment
- **Design Integration:** Percentage of insights that inform actual design decisions
- **Behavioral Prediction:** Accuracy of behavioral models developed from observations
- **User Experience Impact:** Measurable improvements in user experience based on applied insights
- **Research Efficiency:** Reduced need for additional research through comprehensive behavioral understanding`,variables:[{id:"projectName",name:"Project Name",type:"text",required:!0,description:"Name of the project or product being observed"},{id:"observationObjective",name:"Primary Observation Objective",type:"textarea",required:!0,description:"Main research question and specific behaviors to observe"},{id:"targetContext",name:"Target User Context",type:"text",required:!0,description:"Specific environment and context where users will be observed"},{id:"studyDuration",name:"Study Duration",type:"select",required:!0,options:["1-2 weeks","3-4 weeks","1-2 months","3+ months"],description:"Total duration of the observation study"},{id:"observationMethod",name:"Primary Observation Method",type:"select",required:!0,options:["Direct observation","Participant observation","Video ethnography","Digital observation","Mixed methods"],description:"Primary methodology for conducting observations"},{id:"primaryObservationDuration",name:"Individual Session Duration",type:"select",required:!0,options:["30 minutes","1 hour","2 hours","Half day","Full day"],description:"Duration of each observation session"}],instructions:["Observe users in their natural environments without artificial constraints","Maintain passive observer role to avoid influencing natural behaviors","Capture both explicit actions and implicit behaviors, including environmental influences","Document social interactions and communication patterns that affect user experience","Use systematic behavioral coding to ensure consistent and comprehensive data collection","Apply thematic analysis methodology for pattern identification and insight development","Ensure cultural sensitivity and respect for diverse practices and norms","Triangulate observations with other research methods for comprehensive understanding","Focus on behavioral patterns over individual preferences for actionable insights","Connect observed behaviors to broader user goals and design implications"],expectedOutput:`Comprehensive observation study including:
- Systematic behavioral documentation with environmental context analysis
- Thematic analysis revealing authentic user behavior patterns and needs
- Quality assurance protocols ensuring observer reliability and data validity
- Ethical framework protecting participant privacy and cultural sensitivity
- Actionable design insights connecting behavioral observations to improvement opportunities`,qualityMetrics:{completionTime:"2-4 weeks for data collection, 1-2 weeks for analysis",difficultyLevel:"advanced",participantCount:{min:5,max:20,recommended:8},successCriteria:["Observe authentic user behaviors across diverse contexts and situations","Identify behavioral patterns invisible in controlled research settings","Generate actionable insights connecting behaviors to design opportunities","Maintain ethical standards and cultural sensitivity throughout study"],outputQuality:{structure:["Systematic documentation of behavioral patterns with supporting evidence","Clear distinction between observed behaviors and researcher interpretations","Comprehensive context analysis including environmental and social factors"],content:["Rich behavioral insights revealing authentic user needs and pain points","Evidence-based design recommendations grounded in observed behaviors","Cultural and contextual sensitivity in interpretation and application"],usability:["Clear behavioral documentation enabling design team understanding and application","Actionable insights with specific implementation guidance for design improvements","Ethical framework ensuring respectful and responsible research practices"]}},researchBacking:{methodology:["Ethnographic research principles for naturalistic observation","Behavioral coding systems for systematic data collection","Thematic analysis methodology for pattern identification","Triangulation techniques for insight validation across methods"],bestPractices:["Passive observation reveals authentic behaviors not visible in controlled settings","Multiple observation sessions across contexts provide comprehensive behavioral understanding","Cultural sensitivity and ethical considerations are essential for respectful research","Systematic documentation enables reliable pattern identification and insight development"],industryStandards:["Informed consent protocols protecting participant privacy and autonomy","Cultural competency standards for respectful cross-cultural research","Data privacy regulations (GDPR, HIPAA) for sensitive observation contexts","Accessibility considerations ensuring inclusive research participation"]},customizationOptions:[{id:"includeDigitalEthnography",label:"Include Digital Ethnography",type:"checkbox",default:!1,description:"Observe digital behaviors through screen recording and analytics",category:"methodology"},{id:"participationLevel",label:"Observer Participation Level",type:"select",options:["Complete Observer","Observer as Participant","Participant as Observer"],default:"Observer as Participant",description:"Level of researcher participation in observed activities",category:"methodology"},{id:"documentationDetail",label:"Documentation Detail Level",type:"select",options:["High-level patterns","Detailed behaviors","Micro-interaction analysis"],default:"Detailed behaviors",description:"Granularity of behavioral documentation and analysis",category:"output"}],industryAdaptations:{fintech:{template:"Enhanced with financial services observation considerations",considerations:["Observe security behaviors and trust indicators in financial contexts","Document cross-device usage patterns for financial tasks and data entry","Include privacy concerns and regulatory compliance awareness in behavioral analysis","Observe financial decision-making processes and risk assessment behaviors"]},healthcare:{template:"Enhanced with healthcare observation considerations",considerations:["Ensure HIPAA compliance and patient privacy protection in clinical settings","Observe care coordination behaviors and provider communication patterns","Include accessibility needs and assistive technology usage in behavioral documentation","Document caregiver involvement and family decision-making processes"]},ecommerce:{template:"Enhanced with e-commerce observation considerations",considerations:["Observe shopping behaviors across multiple channels and devices","Document social influence factors and peer consultation patterns","Include seasonal and promotional influences on shopping behavior patterns","Observe post-purchase behaviors including returns and support interactions"]}}},{id:"empathy-maps-dt",name:"Design Thinking Empathy Map",description:"Create detailed empathy maps that capture user thoughts, feelings, actions, and environmental influences",category:"synthesis",frameworks:["design-thinking","human-centered-design"],stages:["empathize","define","hear"],template:`You are an expert UX researcher and design thinking facilitator with deep expertise in empathy mapping methodology. Using the project knowledge provided: {knowledge_context}, create a comprehensive empathy map that captures authentic user perspectives and reveals underlying needs, motivations, and pain points.

# Design Thinking Empathy Map: {{personaName}}

## Empathy Map Foundation
**Target User:** {{personaName}}
**Context/Scenario:** {{targetScenario}}
**Data Sources:** {{dataSources}}
**Confidence Level:** {{confidenceLevel}}/10 based on research depth
**Last Updated:** [Current Date]
**Research Methods Used:** {{researchMethods}}

## Core Empathy Map Quadrants

### THINKS & BELIEVES
**Conscious Thoughts:**
{{#each consciousThoughts}}
- "{{this}}" [Source: {{source}}]
{{/each}}

**Beliefs & Assumptions:**
{{#each beliefsAssumptions}}
- {{this.belief}}
- *Evidence:* {{this.evidence}}
- *Confidence:* {{this.confidence}}/10
{{/each}}

**Mental Models:**
{{#each mentalModels}}
- **About {{this.topic}}:** {{this.model}}
- *Implication:* {{this.implication}}
{{/each}}

**Worries & Concerns:**
{{#each worriesConcerns}}
- {{this.worry}}
- *Impact Level:* {{this.impact}} (High/Medium/Low)
- *Frequency:* {{this.frequency}}
{{/each}}

### SEES
**Physical Environment:**
{{#each physicalEnvironment}}
- {{this.element}}: {{this.description}}
- *Influence on Experience:* {{this.influence}}
{{/each}}

**Digital Environment:**
{{#each digitalEnvironment}}
- {{this.platform}}: {{this.usage}}
- *User Perception:* {{this.perception}}
{{/each}}

**Social Environment:**
{{#each socialEnvironment}}
- **People:** {{this.people}}
- **Interactions:** {{this.interactions}}
- **Social Pressure/Support:** {{this.socialDynamics}}
{{/each}}

**Information Sources:**
{{#each informationSources}}
- {{this.source}}: {{this.trustLevel}} trust level
- *Usage Context:* {{this.context}}
{{/each}}

**Market & Competition:**
{{#each marketCompetition}}
- {{this.competitor}}: {{this.perception}}
- *Comparison Factors:* {{this.comparisonFactors}}
{{/each}}

### SAYS & DOES
**Verbal Expressions:**
{{#each verbalExpressions}}
- **Direct Quotes:** "{{this.quote}}"
- **Context:** {{this.context}}
- **Emotional Tone:** {{this.tone}}
{{/each}}

**Public Behaviors:**
{{#each publicBehaviors}}
- **Action:** {{this.action}}
- **Frequency:** {{this.frequency}}
- **Social Context:** {{this.socialContext}}
- **Motivation:** {{this.motivation}}
{{/each}}

**Social Media & Communication:**
{{#each socialMediaBehavior}}
- **Platform:** {{this.platform}}
- **Typical Content:** {{this.content}}
- **Engagement Style:** {{this.style}}
{{/each}}

**Decision-Making Behaviors:**
{{#each decisionMakingBehaviors}}
- **Decision Type:** {{this.type}}
- **Process:** {{this.process}}
- **Influencing Factors:** {{this.factors}}
{{/each}}

### HEARS
**Direct Feedback Sources:**
{{#each directFeedback}}
- **Source:** {{this.source}} ({{this.relationship}})
- **Typical Message:** {{this.message}}
- **User Response:** {{this.response}}
- **Influence Level:** {{this.influence}}/10
{{/each}}

**Indirect Information:**
{{#each indirectInformation}}
- **Channel:** {{this.channel}}
- **Content Type:** {{this.contentType}}
- **Credibility Perception:** {{this.credibility}}
- **Impact on Decisions:** {{this.impact}}
{{/each}}

**Social Influence:**
{{#each socialInfluence}}
- **Influencer Type:** {{this.type}} (peers, experts, family, etc.)
- **Influence Method:** {{this.method}}
- **Topics of Influence:** {{this.topics}}
- **Resistance/Acceptance:** {{this.acceptance}}
{{/each}}

**Industry/Market Messages:**
{{#each industryMessages}}
- **Message Source:** {{this.source}}
- **Key Themes:** {{this.themes}}
- **User Interpretation:** {{this.interpretation}}
{{/each}}

## Extended Empathy Analysis

### PAINS (Frustrations, Obstacles, Risks)
**Functional Pains:**
{{#each functionalPains}}
- **Pain Point:** {{this.pain}}
- **Intensity:** {{this.intensity}}/10
- **Frequency:** {{this.frequency}}
- **Current Workarounds:** {{this.workarounds}}
- **Ideal Solution:** {{this.idealSolution}}
{{/each}}

**Emotional Pains:**
{{#each emotionalPains}}
- **Emotional State:** {{this.emotion}}
- **Trigger:** {{this.trigger}}
- **Impact:** {{this.impact}}
- **Coping Mechanisms:** {{this.coping}}
{{/each}}

**Social Pains:**
{{#each socialPains}}
- **Social Challenge:** {{this.challenge}}
- **Social Context:** {{this.context}}
- **Embarrassment/Fear Factors:** {{this.fears}}
- **Desired Social Outcome:** {{this.desiredOutcome}}
{{/each}}

### GAINS (Wants, Needs, Hopes, Dreams)
**Functional Gains:**
{{#each functionalGains}}
- **Desired Outcome:** {{this.outcome}}
- **Success Criteria:** {{this.criteria}}
- **Current Gap:** {{this.gap}}
- **Priority Level:** {{this.priority}}/10
{{/each}}

**Emotional Gains:**
{{#each emotionalGains}}
- **Desired Feeling:** {{this.feeling}}
- **Trigger Context:** {{this.context}}
- **Personal Significance:** {{this.significance}}
- **Achievement Indicators:** {{this.indicators}}
{{/each}}

**Social Gains:**
{{#each socialGains}}
- **Social Goal:** {{this.goal}}
- **Target Audience:** {{this.audience}}
- **Status/Recognition Factors:** {{this.recognition}}
- **Community Benefits:** {{this.communityBenefit}}
{{/each}}

## Behavioral Patterns and Insights

### Decision-Making Framework
**Decision Criteria Hierarchy:**
1. **Primary:** {{primaryDecisionCriteria}}
2. **Secondary:** {{secondaryDecisionCriteria}}
3. **Tiebreakers:** {{tiebreakingCriteria}}

**Information Gathering Process:**
{{informationGatheringProcess}}

**Risk Assessment Approach:**
{{riskAssessmentApproach}}

### Emotional Journey Mapping
**Emotional States Throughout Experience:**
{{#each emotionalJourney}}
- **Phase:** {{this.phase}}
- **Dominant Emotion:** {{this.emotion}}
- **Intensity:** {{this.intensity}}/10
- **Triggers:** {{this.triggers}}
- **Duration:** {{this.duration}}
{{/each}}

**Emotional Recovery Patterns:**
{{emotionalRecoveryPatterns}}

### Behavioral Triggers and Motivators
**Positive Triggers (What Motivates Action):**
{{#each positiveTriggerts}}
- {{this.trigger}}  {{this.result}}
- *Effectiveness:* {{this.effectiveness}}/10
{{/each}}

**Negative Triggers (What Causes Avoidance):**
{{#each negativeTriggerts}}
- {{this.trigger}}  {{this.avoidance}}
- *Intensity:* {{this.intensity}}/10
{{/each}}

## Research Validation and Confidence

### Supporting Evidence
**Quantitative Data Points:**
{{#each quantitativeEvidence}}
- {{this.metric}}: {{this.value}}
- *Sample Size:* {{this.sampleSize}}
- *Confidence:* {{this.confidence}}%
{{/each}}

**Qualitative Insights:**
{{#each qualitativeInsights}}
- **Theme:** {{this.theme}}
- **Supporting Quotes:** {{this.quotes}}
- **Frequency:** {{this.frequency}} participants
{{/each}}

**Behavioral Observations:**
{{#each behavioralObservations}}
- **Observed Behavior:** {{this.behavior}}
- **Context:** {{this.context}}
- **Consistency:** {{this.consistency}}% across observations
{{/each}}

### Assumptions and Gaps
**Research Gaps:**
{{#each researchGaps}}
- **Gap Area:** {{this.area}}
- **Impact on Empathy Map:** {{this.impact}}
- **Recommended Research:** {{this.recommendation}}
{{/each}}

**Assumptions to Validate:**
{{#each assumptionsToValidate}}
- **Assumption:** {{this.assumption}}
- **Risk if Wrong:** {{this.risk}}
- **Validation Method:** {{this.method}}
{{/each}}

## Design Implications and Opportunities

### Immediate Design Opportunities
{{#each immediateOpportunities}}
- **Opportunity:** {{this.opportunity}}
- **Target Pain/Gain:** {{this.target}}
- **Estimated Impact:** {{this.impact}}/10
- **Implementation Complexity:** {{this.complexity}} (Low/Medium/High)
{{/each}}

### Long-term Strategic Opportunities
{{#each strategicOpportunities}}
- **Strategic Direction:** {{this.direction}}
- **User Value Proposition:** {{this.value}}
- **Business Alignment:** {{this.alignment}}
- **Success Metrics:** {{this.metrics}}
{{/each}}

### Experience Design Principles
Based on this empathy map, recommended design principles:
{{#each designPrinciples}}
- **Principle:** {{this.principle}}
- **Rationale:** {{this.rationale}}
- **Application Examples:** {{this.examples}}
{{/each}}

{{#if industrySpecific}}
## Industry-Specific Considerations
{{industrySpecific}}
{{/if}}

## Empathy Map Maintenance and Updates

### Review Schedule
- **Regular Review:** {{reviewFrequency}}
- **Trigger Events:** {{updateTriggers}}
- **Stakeholder Involvement:** {{stakeholderReview}}

### Version Control
- **Version:** {{currentVersion}}
- **Major Changes:** {{majorChanges}}
- **Impact Assessment:** {{impactAssessment}}

### Usage Guidelines
- **Team Access:** {{teamAccess}}
- **Reference Context:** {{referenceContext}}
- **Decision Integration:** {{decisionIntegration}}`,variables:[{id:"personaName",name:"Target User/Persona Name",type:"text",required:!0,description:"Name or identifier for the user this empathy map represents"},{id:"targetScenario",name:"Target Scenario/Context",type:"textarea",required:!0,description:"Specific scenario or context this empathy map addresses"},{id:"dataSources",name:"Research Data Sources",type:"textarea",required:!0,description:"List of research sources used to create this empathy map"},{id:"researchMethods",name:"Research Methods Used",type:"multiselect",required:!0,options:["User Interviews","Surveys","Observations","Analytics","Support Data","Social Media Analysis","Competitor Analysis"],description:"Research methodologies used to gather empathy map data"},{id:"confidenceLevel",name:"Data Confidence Level",type:"select",required:!0,options:["6","7","8","9","10"],description:"Confidence level in empathy map accuracy based on data quality (1-10)"}],instructions:["Ground every element of the empathy map in actual research data rather than assumptions","Capture authentic user voice through direct quotes and observed behaviors","Distinguish between what users say publicly versus what they think privately","Include emotional states and their triggers throughout different experience phases","Map both functional and emotional needs, recognizing their interconnected nature","Document environmental and social influences that shape user perspective and behavior","Identify gaps between user intentions and actual behaviors for design insights","Connect empathy map insights to specific design opportunities and recommendations","Validate empathy map elements with actual users when possible","Update empathy maps regularly based on new research findings and user feedback"],expectedOutput:`Comprehensive empathy map including:
- Four core quadrants (Thinks/Believes, Sees, Says/Does, Hears) with detailed, research-backed content
- Extended analysis of pains and gains with prioritization and solution implications
- Behavioral patterns and decision-making frameworks based on authentic user insights
- Supporting evidence and validation framework demonstrating empathy map reliability
- Actionable design implications connecting user empathy to specific improvement opportunities`,qualityMetrics:{completionTime:"2-4 hours including research synthesis and validation",difficultyLevel:"intermediate",participantCount:{min:5,max:20,recommended:8},successCriteria:["Create research-backed empathy map with authentic user voice and perspective","Identify actionable insights connecting user empathy to design opportunities","Validate empathy map accuracy with user-facing team members or users","Generate design principles and recommendations based on deep user understanding"],outputQuality:{structure:["Comprehensive coverage of all empathy map quadrants with detailed insights","Clear distinction between observed behaviors and underlying thoughts/feelings","Logical connection between user empathy and actionable design implications"],content:["Authentic user voice preserved through direct quotes and behavioral observations","Nuanced understanding of user motivations, fears, and aspirations","Evidence-based insights grounded in actual research rather than assumptions"],usability:["Clear, accessible format enabling team understanding and application","Actionable design opportunities with implementation guidance","Regular update framework maintaining empathy map relevance and accuracy"]}},researchBacking:{methodology:["Design thinking empathy mapping framework with extended analysis dimensions","Behavioral observation techniques for authentic user perspective capture","Emotional journey mapping for understanding user experience fluctuations","Evidence-based validation methods for empathy map accuracy verification"],bestPractices:["Ground empathy maps in actual research data rather than team assumptions","Include both functional and emotional dimensions of user experience","Validate empathy maps with users and user-facing team members regularly","Connect empathy insights to specific design opportunities and business value"],industryStandards:["Design thinking methodology standards for empathy development","User research ethics guidelines for respectful perspective representation","Accessibility considerations ensuring inclusive empathy map development","Privacy standards protecting user information in empathy documentation"]},customizationOptions:[{id:"includeCompetitorAnalysis",label:"Include Competitor Analysis",type:"checkbox",default:!1,description:"Include user perspectives on competitive products and services",category:"output"},{id:"empathyDepth",label:"Empathy Analysis Depth",type:"select",options:["Essential","Detailed","Comprehensive"],default:"Detailed",description:"Level of detail and analysis depth for empathy mapping",category:"output"},{id:"updateFrequency",label:"Empathy Map Update Frequency",type:"select",options:["Monthly","Quarterly","Bi-annually","Project-based"],default:"Quarterly",description:"How often should empathy maps be reviewed and updated?",category:"quality"}],industryAdaptations:{fintech:{template:"Enhanced with financial services empathy considerations",considerations:["Include financial stress and security anxieties in emotional analysis","Address trust and credibility concerns in user perspective mapping","Include regulatory compliance awareness and its emotional impact on users","Consider financial literacy levels and their influence on user confidence and behavior"]},healthcare:{template:"Enhanced with healthcare empathy considerations",considerations:["Include health anxiety and uncertainty in emotional journey mapping","Address caregiver perspectives and family decision-making dynamics","Include accessibility needs and their emotional impact on user experience","Consider health literacy levels and medical complexity in user perspective analysis"]},ecommerce:{template:"Enhanced with e-commerce empathy considerations",considerations:["Include purchase anxiety and buyer's remorse in emotional analysis","Address social proof and peer influence in decision-making perspectives","Include brand loyalty and switching costs in user belief systems","Consider seasonal and promotional influences on user motivations and behaviors"]}}},{id:"affinity-mapping-DISABLED",name:"Affinity Mapping and Research Synthesis (DISABLED - using simple template)",description:"Systematically organize and synthesize qualitative research data to identify patterns, themes, and actionable insights",category:"synthesis",frameworks:["design-thinking","double-diamond"],stages:["define","define-dd","synthesize"],template:`You are an expert UX researcher and design strategist with extensive experience in qualitative data synthesis and pattern recognition. Using the project knowledge provided: {knowledge_context}, create a comprehensive affinity mapping process that transforms raw research data into clear, actionable insights that inform design decisions.

# Affinity Mapping and Research Synthesis: {{projectName}}

## Research Synthesis Strategy
**Research Data Sources:** {{dataSources}}
**Analysis Method:** {{analysisMethod}}
**Team Composition:** {{teamComposition}}
**Timeline:** {{synthesisTimeline}}
**Expected Insight Categories:** {{expectedCategories}}
**Stakeholder Involvement:** {{stakeholderInvolvement}}

## Pre-Synthesis Preparation

### Data Quality Assessment
- **Data Volume:** {{dataVolume}} (interviews, observations, survey responses, etc.)
- **Data Types:** {{dataTypes}} (quotes, observations, metrics, artifacts)
- **Data Consistency:** Review for completeness and quality across all sources
- **Research Coverage:** Validate representation across user segments and contexts

### Team Preparation and Training
- **Synthesis Team:** {{synthesisTeam}} participants
- **Role Assignments:** Note-taker, facilitator, time-keeper, documentation lead
- **Bias Awareness:** Training on researcher bias and assumption checking
- **Methodology Alignment:** Ensure team understanding of affinity mapping principles

### Material and Environment Setup
- **Physical Space:** Large wall space, moveable furniture, good lighting
- **Digital Tools:** {{digitalTools}} (Miro, FigJam, Mural, or physical materials)
- **Supplies:** Sticky notes, markers, dot stickers, flip chart paper, camera
- **Time Allocation:** {{sessionDuration}} hours with planned breaks

## Data Preparation and Note Creation

### Note Quality Standards
**Individual Note Characteristics:**
- **Atomic Insights:** One insight per note, specific and concrete
- **User Voice:** Preserve authentic language and direct quotes where valuable
- **Context Preservation:** Include relevant context (user segment, situation, method)
- **Actionability:** Focus on insights that can inform design decisions
- **Clarity:** Write notes that team members can understand without additional explanation

### Note Creation Process
**From Interview Data:**
{{#each interviewDataNotes}}
- **Source:** {{this.source}}
- **Key Insight:** {{this.insight}}
- **Supporting Evidence:** {{this.evidence}}
- **User Context:** {{this.context}}
{{/each}}

**From Observational Data:**
{{#each observationalNotes}}
- **Behavior Observed:** {{this.behavior}}
- **Context:** {{this.context}}
- **Frequency/Pattern:** {{this.pattern}}
- **Design Implication:** {{this.implication}}
{{/each}}

**From Survey and Analytics Data:**
{{#each quantitativeNotes}}
- **Data Point:** {{this.metric}}
- **Insight:** {{this.insight}}
- **Statistical Significance:** {{this.significance}}
- **Qualitative Context:** {{this.context}}
{{/each}}

## Affinity Mapping Process

### Phase 1: Individual Note Review ({{phase1Duration}} minutes)
- **Silent Review:** Each team member reviews all notes individually
- **Initial Grouping:** Identify obvious patterns and relationships mentally
- **Question Generation:** Note areas of confusion or contradiction
- **Bias Check:** Reflect on personal assumptions and preconceptions

### Phase 2: Collaborative Clustering ({{phase2Duration}} minutes)
**Bottom-Up Clustering:**
- Start with first note and look for related notes
- Create clusters of 3-7 related notes maximum
- Avoid forcing notes into existing clusters
- Create new clusters when notes don't fit existing patterns
- Name clusters descriptively, not prescriptively

**Cluster Validation:**
- **Coherence Check:** Ensure all notes in cluster truly relate
- **Overlap Assessment:** Identify clusters with similar themes
- **Gap Identification:** Note missing information or contradictions

### Phase 3: Theme Development ({{phase3Duration}} minutes)
**Theme Identification:**
{{#each identifiedThemes}}
- **Theme:** {{this.theme}}
- **Supporting Clusters:** {{this.clusters}}
- **Evidence Strength:** {{this.strength}}/10
- **User Impact:** {{this.impact}} (High/Medium/Low)
- **Design Opportunity:** {{this.opportunity}}
{{/each}}

**Theme Relationships:**
- **Dependencies:** Themes that build upon or require others
- **Tensions:** Conflicting themes that reveal user complexity
- **Hierarchies:** Primary themes versus supporting themes
- **Cross-cutting:** Themes that appear across multiple user segments

### Phase 4: Insight Prioritization ({{phase4Duration}} minutes)
**Impact vs. Effort Analysis:**
{{#each prioritizedInsights}}
- **Insight:** {{this.insight}}
- **User Impact:** {{this.impact}}/10
- **Implementation Effort:** {{this.effort}}/10 (1=easy, 10=very difficult)
- **Business Alignment:** {{this.alignment}}/10
- **Priority Ranking:** {{this.ranking}}
{{/each}}

**Validation Criteria:**
- **Evidence Strength:** Multiple sources supporting the insight
- **User Centrality:** Directly affects user experience and outcomes
- **Actionability:** Clear implications for design decisions
- **Strategic Alignment:** Connects to business objectives and constraints

## Advanced Analysis Techniques

### Cross-Segment Analysis
**Behavioral Patterns Across User Types:**
{{#each crossSegmentPatterns}}
- **Pattern:** {{this.pattern}}
- **Segments Affected:** {{this.segments}}
- **Variations:** {{this.variations}}
- **Design Implications:** {{this.implications}}
{{/each}}

### Journey-Based Clustering
**Experience Phase Alignment:**
{{#each journeyPhaseClusters}}
- **Journey Phase:** {{this.phase}}
- **Key Insights:** {{this.insights}}
- **Pain Points:** {{this.pains}}
- **Opportunities:** {{this.opportunities}}
{{/each}}

### Contradiction and Tension Analysis
**User Behavior Contradictions:**
{{#each contradictions}}
- **Contradiction:** {{this.contradiction}}
- **Contributing Factors:** {{this.factors}}
- **Resolution Strategy:** {{this.resolution}}
- **Design Challenge:** {{this.challenge}}
{{/each}}

## Synthesis Output Framework

### Executive Insight Summary
**Top-Level Findings (Maximum 5):**
{{#each topLevelFindings}}
1. **{{this.finding}}**
   - *Evidence:* {{this.evidence}}
   - *Impact:* {{this.impact}}
   - *Recommendation:* {{this.recommendation}}
{{/each}}

**Critical User Needs:**
{{#each criticalNeeds}}
- **Need:** {{this.need}}
- **Current Gap:** {{this.gap}}
- **User Impact:** {{this.impact}}
- **Solution Direction:** {{this.solution}}
{{/each}}

### Detailed Theme Documentation
{{#each detailedThemes}}
**Theme: {{this.name}}**
- **Description:** {{this.description}}
- **Supporting Evidence:** {{this.evidence}}
- **User Segments Affected:** {{this.segments}}
- **Frequency:** {{this.frequency}}% of participants
- **Design Implications:** {{this.implications}}
- **Success Metrics:** {{this.metrics}}
- **Implementation Considerations:** {{this.considerations}}
{{/each}}

### Design Opportunity Map
**Immediate Opportunities (0-3 months):**
{{#each immediateOpportunities}}
- {{this.opportunity}} - {{this.description}}
{{/each}}

**Medium-term Opportunities (3-12 months):**
{{#each mediumTermOpportunities}}
- {{this.opportunity}} - {{this.description}}
{{/each}}

**Strategic Opportunities (12+ months):**
{{#each strategicOpportunities}}
- {{this.opportunity}} - {{this.description}}
{{/each}}

## Quality Assurance and Validation

### Internal Validation
- **Team Consensus:** 80% agreement on primary themes and insights
- **Evidence Traceability:** Clear connection from insights back to source data
- **Assumption Documentation:** Explicit acknowledgment of assumptions and gaps
- **Bias Assessment:** Recognition of potential researcher and team bias

### External Validation
- **Stakeholder Review:** {{stakeholderValidationPlan}}
- **User Validation:** {{userValidationMethod}}
- **Cross-Reference Check:** {{crossReferenceMethod}}
- **Historical Consistency:** Comparison with previous research findings

### Documentation Standards
- **Version Control:** Clear versioning and change tracking
- **Source Attribution:** Traceability to original research data
- **Update Schedule:** {{updateSchedule}} for ongoing research integration
- **Access Control:** {{accessControl}} for team and stakeholder usage

## Implementation and Follow-up

### Insight Integration Strategy
- **Design Brief Integration:** How insights inform design requirements
- **Persona Updates:** Updates to existing personas based on new insights
- **Journey Map Refinement:** Integration with customer journey mapping
- **Feature Prioritization:** How insights influence product roadmap decisions

### Measurement and Validation Plan
- **Success Metrics:** {{successMetrics}}
- **Validation Method:** {{validationMethod}}
- **Timeline:** {{measurementTimeline}}
- **Responsibility:** {{measurementOwnership}}

{{#if industrySpecific}}
## Industry-Specific Considerations
{{industrySpecific}}
{{/if}}

## Affinity Mapping Best Practices Checklist

### Process Excellence
- [ ] All team members trained on methodology and bias awareness
- [ ] High-quality notes created from all data sources
- [ ] Systematic clustering process followed without forcing patterns
- [ ] Multiple rounds of review and refinement completed
- [ ] Clear documentation of methodology and assumptions

### Quality Outcomes
- [ ] Insights clearly supported by evidence from multiple sources
- [ ] Contradictions and tensions acknowledged and explored
- [ ] Actionable recommendations connected to specific insights
- [ ] Priority levels assigned based on impact and feasibility
- [ ] Stakeholder validation completed with documented feedback

### Strategic Integration
- [ ] Insights connected to business objectives and user outcomes
- [ ] Implementation roadmap created with clear timelines and ownership
- [ ] Success metrics defined and measurement plan established
- [ ] Communication plan for sharing insights across organization
- [ ] Update process established for ongoing research integration`,variables:[{id:"projectName",name:"Project Name",type:"text",required:!0,description:"Name of the project or research initiative"},{id:"dataSources",name:"Research Data Sources",type:"textarea",required:!0,description:"List all sources of research data to be synthesized"},{id:"analysisMethod",name:"Analysis Method",type:"select",required:!0,options:["Collaborative Workshop","Individual Analysis + Review","Hybrid Approach","Digital-First Analysis"],description:"Primary method for conducting affinity mapping"},{id:"teamComposition",name:"Synthesis Team Composition",type:"text",required:!0,description:"Who will participate in the synthesis process?"},{id:"synthesisTimeline",name:"Synthesis Timeline",type:"select",required:!0,options:["2-4 hours","1 day","2 days","1 week"],description:"Total time allocated for synthesis process"},{id:"digitalTools",name:"Digital Tools",type:"select",required:!1,options:["Miro","FigJam","Mural","Physical materials only","Hybrid physical/digital"],description:"Tools to be used for affinity mapping process"}],instructions:["Prepare high-quality individual notes that capture atomic insights from research data","Use collaborative clustering approach that allows patterns to emerge naturally rather than forcing predetermined categories","Apply systematic thematic analysis to identify meaningful patterns and relationships across data","Prioritize insights based on user impact, evidence strength, and implementation feasibility","Document contradictions and tensions that reveal user complexity and design challenges","Create actionable recommendations clearly connected to specific insights and evidence","Validate findings through multiple review rounds and stakeholder feedback","Establish clear traceability from insights back to original research data sources","Plan for ongoing integration of new research findings and insight refinement","Connect synthesis outcomes to specific design decisions and business objectives"],expectedOutput:`Comprehensive research synthesis including:
- Systematically organized themes and patterns with supporting evidence
- Prioritized actionable insights with clear implementation recommendations
- Cross-segment analysis revealing user behavior patterns and contradictions
- Quality assurance framework ensuring insight validity and team alignment
- Integration strategy connecting insights to design decisions and business outcomes`,qualityMetrics:{completionTime:"4-16 hours depending on data volume and team size",difficultyLevel:"intermediate",participantCount:{min:2,max:8,recommended:4},successCriteria:["Generate 5-10 high-priority actionable insights supported by evidence","Achieve 80%+ team consensus on primary themes and recommendations","Create clear traceability from insights back to original research data","Identify design opportunities with estimated impact and implementation effort"],outputQuality:{structure:["Logical progression from individual notes through clustering to strategic insights","Clear prioritization framework balancing user impact and implementation feasibility","Systematic documentation enabling ongoing refinement and validation"],content:["High-quality insights grounded in multiple sources of evidence","Nuanced understanding of user complexity including contradictions and tensions","Actionable recommendations with clear connection to design decisions"],usability:["Clear documentation enabling team understanding and stakeholder communication","Integration framework connecting insights to design briefs and product decisions","Update process maintaining insight relevance with ongoing research"]}},researchBacking:{methodology:["Thematic analysis methodology for systematic pattern identification","Affinity diagramming techniques for collaborative insight development","Grounded theory principles for allowing insights to emerge from data","Multi-source triangulation for insight validation and reliability"],bestPractices:["High-quality individual notes are essential foundation for meaningful synthesis","Collaborative clustering reveals patterns invisible to individual analysis","Multiple review rounds improve insight quality and team alignment","Clear documentation enables ongoing refinement and organizational learning"],industryStandards:["Qualitative research standards for data integrity and analysis rigor","Privacy protection protocols for handling sensitive user research data","Team collaboration best practices for inclusive and productive synthesis sessions","Documentation standards enabling audit trails and methodology transparency"]},customizationOptions:[{id:"includeQuantitativeData",label:"Include Quantitative Data Integration",type:"checkbox",default:!0,description:"Integrate survey and analytics data with qualitative insights",category:"methodology"},{id:"analysisDepth",label:"Analysis Depth Level",type:"select",options:["Surface Patterns","Deep Thematic Analysis","Strategic Insight Development"],default:"Deep Thematic Analysis",description:"Level of analytical depth for pattern identification",category:"output"},{id:"stakeholderInvolvement",label:"Stakeholder Involvement Level",type:"select",options:["Core Team Only","Review and Feedback","Active Participation"],default:"Review and Feedback",description:"Level of stakeholder involvement in synthesis process",category:"methodology"}],industryAdaptations:{fintech:{template:"Enhanced with financial services synthesis considerations",considerations:["Include regulatory compliance implications in insight prioritization","Address security and trust themes with specific attention to user anxiety patterns","Consider financial literacy levels in user behavior pattern analysis","Integrate risk management considerations into design opportunity assessment"]},healthcare:{template:"Enhanced with healthcare synthesis considerations",considerations:["Address clinical workflow integration in insight development","Include caregiver and family decision-making patterns in analysis","Consider health literacy and accessibility needs in theme development","Integrate patient safety implications into design opportunity prioritization"]},ecommerce:{template:"Enhanced with e-commerce synthesis considerations",considerations:["Include conversion optimization insights in priority theme development","Address multichannel behavior patterns and device usage implications","Consider seasonal and promotional influences in user behavior analysis","Integrate social proof and peer influence patterns into design opportunities"]}}},{id:"brainstorming",name:"Structured Creative Ideation",description:"Facilitate systematic ideation sessions using proven creative thinking methods and collaboration frameworks",category:"ideation",frameworks:["design-thinking","lean-ux"],stages:["ideate","hypothesize"],template:`You are an expert design facilitator and innovation strategist with extensive experience in creative ideation methodologies. Using the project knowledge provided: {knowledge_context}, design a comprehensive ideation session that generates creative solutions while maintaining focus on user needs and business objectives.

# Structured Creative Ideation Session: {{projectName}}

## Ideation Strategy Framework
**Session Objective:** {{sessionObjective}}
**Challenge Statement:** {{challengeStatement}}
**Target Participants:** {{targetParticipants}}
**Session Duration:** {{sessionDuration}}
**Expected Output:** {{expectedOutput}}
**Success Metrics:** {{successMetrics}}

## Pre-Session Preparation

### Challenge Framing and Context Setting
**Problem Definition:**
- **Core Challenge:** {{coreChallenge}}
- **User Context:** {{userContext}}
- **Business Context:** {{businessContext}}
- **Technical Context:** {{technicalContext}}
- **Constraints:** {{constraints}}

**Background Materials:**
- **User Research Summary:** {{researchSummary}}
- **Persona Profiles:** {{personaProfiles}}
- **Current Solution Analysis:** {{currentSolutionAnalysis}}
- **Competitive Landscape:** {{competitiveLandscape}}
- **Success Criteria:** {{successCriteria}}

### Participant Preparation and Team Composition
**Participant Roles:**
{{#each participantRoles}}
- **{{this.role}}:** {{this.expertise}} - {{this.contribution}}
{{/each}}

**Pre-Session Activities:**
- **Context Review:** Share background materials 48 hours before session
- **Individual Pre-Ideation:** {{preIdeationActivity}}
- **Bias Awareness:** Brief on common ideation pitfalls and cognitive biases
- **Tool Familiarization:** Introduction to ideation methods and digital tools

### Session Environment and Materials
**Physical/Digital Setup:**
- **Space:** {{sessionSpace}} with moveable furniture and collaboration walls
- **Digital Tools:** {{digitalTools}} (Miro, FigJam, or equivalent)
- **Physical Materials:** Sticky notes, markers, dot stickers, flip chart paper
- **Technology:** Projector/screens for shared viewing and documentation

## Ideation Session Structure

### Phase 1: Warm-up and Alignment ({{warmupDuration}} minutes)

**Energy Building Activity:**
- **Icebreaker:** {{icebreakerActivity}}
- **Creative Confidence:** Quick creative exercise to shift from critical to creative mindset
- **Team Norms:** Establish "Yes, And..." principle and judgment-free zone

**Challenge Alignment:**
- **Problem Restatement:** Collaborative refinement of challenge statement
- **Success Vision:** Shared understanding of what success looks like
- **Constraint Acknowledgment:** Clear identification of real vs. perceived constraints

### Phase 2: Divergent Thinking - Idea Generation ({{divergentDuration}} minutes)

**Individual Ideation ({{individualDuration}} minutes):**
- **Method:** {{individualMethod}} (Crazy 8s, Mind Mapping, or Brainwriting)
- **Focus:** Generate maximum quantity of ideas without self-censorship
- **Documentation:** Individual capture on sticky notes or digital canvas
- **Target:** {{individualTarget}} ideas per participant

**Collaborative Building ({{collaborativeDuration}} minutes):**
- **Idea Sharing:** Round-robin sharing without commentary or evaluation
- **"Yes, And..." Building:** Build upon others' ideas rather than critiquing
- **Cross-Pollination:** Encourage combination and variation of existing ideas
- **Silent Brainstorming:** {{silentBrainstormingDuration}} minutes of additional silent generation

**Advanced Ideation Techniques:**
{{#each advancedTechniques}}
**{{this.technique}} ({{this.duration}} minutes):**
- **Method:** {{this.method}}
- **Focus:** {{this.focus}}
- **Expected Output:** {{this.output}}
{{/each}}

### Phase 3: Idea Organization and Clustering ({{organizationDuration}} minutes)

**Affinity Clustering:**
- **Initial Grouping:** Organize similar ideas into natural clusters
- **Cluster Naming:** Descriptive titles that capture cluster essence
- **Gap Identification:** Note missing categories or under-explored areas
- **Redundancy Consolidation:** Combine truly duplicate ideas while preserving nuance

**Category Development:**
{{#each ideaCategories}}
- **Category:** {{this.name}}
- **Description:** {{this.description}}
- **Idea Count:** {{this.count}}
- **Potential Impact:** {{this.impact}}
{{/each}}

### Phase 4: Convergent Thinking - Idea Evaluation ({{convergentDuration}} minutes)

**Multi-Criteria Evaluation:**
**Criteria Weighting:**
- **User Value:** {{userValueWeight}}% - How well does this solve user problems?
- **Feasibility:** {{feasibilityWeight}}% - Can we realistically implement this?
- **Innovation:** {{innovationWeight}}% - How novel/differentiated is this approach?
- **Strategic Fit:** {{strategicFitWeight}}% - Does this align with business objectives?

**Evaluation Process:**
1. **Individual Scoring:** Each participant scores top ideas against all criteria
2. **Discussion:** Debate scores with specific rationale sharing
3. **Consensus Building:** Collaborative adjustment of scores where justified
4. **Final Ranking:** Mathematical ranking based on weighted criteria scores

**Selection Framework:**
{{#each selectionCriteria}}
- **{{this.criterion}}:** {{this.description}} (Weight: {{this.weight}}%)
{{/each}}

### Phase 5: Idea Development and Refinement ({{developmentDuration}} minutes)

**Top Idea Deep Dive (Top {{topIdeasCount}} Ideas):**
{{#each topIdeas}}
**Idea {{@index}}: {{this.name}}**
- **Core Concept:** {{this.concept}}
- **User Value Proposition:** {{this.userValue}}
- **Implementation Approach:** {{this.implementation}}
- **Success Metrics:** {{this.metrics}}
- **Risk Assessment:** {{this.risks}}
- **Next Steps:** {{this.nextSteps}}
{{/each}}

**Rapid Prototyping Planning:**
- **Prototype Scope:** {{prototypeScope}}
- **Testing Approach:** {{testingApproach}}
- **Resource Requirements:** {{resourceRequirements}}
- **Timeline:** {{prototypeTimeline}}

## Advanced Ideation Methodologies

### Design Thinking Integration
**How Might We Questions:**
{{#each howMightWeQuestions}}
- **HMW:** {{this.question}}
- **Generated Ideas:** {{this.ideaCount}}
- **Top Concepts:** {{this.topConcepts}}
{{/each}}

### SCAMPER Technique Application
**Systematic Idea Enhancement:**
- **Substitute:** {{substituteConcepts}}
- **Combine:** {{combineConcepts}}
- **Adapt:** {{adaptConcepts}}
- **Modify:** {{modifyConcepts}}
- **Put to Other Uses:** {{otherUsesConcepts}}
- **Eliminate:** {{eliminateConcepts}}
- **Reverse:** {{reverseConcepts}}

### Six Thinking Hats Method
**Perspective-Based Analysis:**
- **White Hat (Facts):** {{factualAnalysis}}
- **Red Hat (Emotions):** {{emotionalConsiderations}}
- **Black Hat (Caution):** {{riskAssessment}}
- **Yellow Hat (Benefits):** {{benefitAnalysis}}
- **Green Hat (Creativity):** {{creativeExtensions}}
- **Blue Hat (Process):** {{processReflection}}

## Quality Assurance and Bias Mitigation

### Creative Process Quality
- **Participation Balance:** Ensure equal contribution from all participants
- **Idea Diversity:** Assess variety across different solution categories
- **Building Behavior:** Monitor for supportive vs. critical interaction patterns
- **Energy Management:** Maintain creative energy throughout session duration

### Bias Recognition and Mitigation
**Common Biases to Address:**
- **Anchoring Bias:** Prevent fixation on early ideas
- **Authority Bias:** Ensure senior voices don't dominate creative space
- **Confirmation Bias:** Challenge ideas that confirm existing assumptions
- **Groupthink:** Maintain healthy dissent and alternative perspectives

**Mitigation Strategies:**
- **Anonymous Contribution:** Use silent brainstorming and anonymous idea submission
- **Role Rotation:** Rotate facilitation and perspective-taking roles
- **Devil's Advocate:** Assign someone to challenge popular ideas constructively
- **External Perspective:** Include outsiders or users in evaluation process

## Documentation and Follow-Up Framework

### Session Documentation
**Immediate Capture:**
- **All Generated Ideas:** {{totalIdeasGenerated}} ideas captured and categorized
- **Selection Rationale:** Decision reasoning for top-ranked ideas
- **Participant Feedback:** Session effectiveness and satisfaction assessment
- **Visual Documentation:** Photos/screenshots of ideation artifacts

**Structured Output:**
{{#each documentedOutputs}}
- **{{this.category}}:** {{this.content}}
- **Next Steps:** {{this.nextSteps}}
- **Owner:** {{this.owner}}
- **Timeline:** {{this.timeline}}
{{/each}}

### Implementation Planning
**Immediate Actions (Next 2 weeks):**
{{#each immediateActions}}
- {{this.action}} - Owner: {{this.owner}}, Due: {{this.dueDate}}
{{/each}}

**Short-term Development (Next 1-3 months):**
{{#each shortTermActions}}
- {{this.action}} - Owner: {{this.owner}}, Due: {{this.dueDate}}
{{/each}}

**Long-term Strategic Actions (3+ months):**
{{#each longTermActions}}
- {{this.action}} - Owner: {{this.owner}}, Due: {{this.dueDate}}
{{/each}}

### Success Measurement Framework
**Ideation Success Metrics:**
- **Quantity:** {{quantityMetric}} ideas generated
- **Quality:** {{qualityMetric}} ideas meeting evaluation criteria
- **Diversity:** {{diversityMetric}} different solution categories explored
- **Participant Satisfaction:** {{satisfactionMetric}}/10 average session rating

**Implementation Success Metrics:**
- **Conversion Rate:** {{conversionMetric}}% of top ideas moving to development
- **User Validation:** {{userValidationMetric}} user testing and feedback integration
- **Business Impact:** {{businessImpactMetric}} measurable business outcomes
- **Innovation Index:** {{innovationMetric}} novel solutions vs. incremental improvements

{{#if industrySpecific}}
## Industry-Specific Considerations
{{industrySpecific}}
{{/if}}

## Post-Session Optimization and Learning

### Session Retrospective
**What Worked Well:**
- Process elements that enhanced creativity and collaboration
- Environmental factors that supported productive ideation
- Participant behaviors that contributed to session success

**What Could Be Improved:**
- Process adjustments for future sessions
- Environmental or tool changes needed
- Participant preparation or facilitation improvements

**Learnings for Future Sessions:**
- Methodology refinements based on outcomes and feedback
- Team composition optimization for different challenge types
- Tool and environment recommendations for similar contexts

### Organizational Learning Integration
- **Best Practices Documentation:** Capture successful techniques for team knowledge base
- **Methodology Refinement:** Update standard ideation processes based on learnings
- **Team Skill Development:** Identify training needs for improved facilitation and participation
- **Innovation Culture:** Assess impact on organizational creative confidence and collaboration`,variables:[{id:"projectName",name:"Project Name",type:"text",required:!0,description:"Name of the project or challenge being addressed"},{id:"sessionObjective",name:"Session Objective",type:"textarea",required:!0,description:"Primary goal and expected outcomes from the ideation session"},{id:"challengeStatement",name:"Challenge Statement",type:"textarea",required:!0,description:"Clear, specific statement of the problem or opportunity to address"},{id:"targetParticipants",name:"Target Participants",type:"text",required:!0,description:"Who should participate and why (roles, expertise, perspectives needed)"},{id:"sessionDuration",name:"Session Duration",type:"select",required:!0,options:["90 minutes","2 hours","3 hours","Half day","Full day"],description:"Total time allocated for ideation session"},{id:"individualMethod",name:"Individual Ideation Method",type:"select",required:!0,options:["Crazy 8s","Mind Mapping","Brainwriting","SCAMPER","Free Association"],description:"Primary method for individual idea generation"}],instructions:["Structure ideation sessions to balance divergent thinking (idea generation) with convergent thinking (evaluation and selection)","Use proven creative thinking methods like Crazy 8s, SCAMPER, and How Might We questions to stimulate innovation",'Implement "Yes, And..." principle to build upon ideas rather than immediately critiquing them',"Ensure diverse participation through balanced facilitation and anonymous contribution opportunities","Apply systematic evaluation criteria that balance user value, feasibility, innovation, and strategic fit","Document all ideas and rationale for systematic follow-up and implementation planning","Address cognitive biases that can limit creative thinking through structured process and awareness","Plan for immediate next steps and clear ownership of top ideas for continued development","Create psychological safety that encourages wild ideas and builds creative confidence","Connect ideation outcomes to user research insights and business objectives for grounded innovation"],expectedOutput:`Structured ideation session including:
- Comprehensive session plan with proven creative thinking methodologies
- Systematic evaluation framework balancing multiple criteria and stakeholder perspectives  
- Detailed documentation of all generated ideas with clear next steps and ownership
- Quality assurance measures addressing participation balance and cognitive bias mitigation
- Implementation roadmap connecting creative concepts to user validation and business outcomes`,qualityMetrics:{completionTime:"2-8 hours depending on session scope and complexity",difficultyLevel:"intermediate",participantCount:{min:4,max:12,recommended:8},successCriteria:["Generate 50+ ideas with diversity across multiple solution categories","Achieve balanced participation from all session participants","Select 3-5 top ideas with clear implementation roadmap and ownership","Maintain high creative energy and psychological safety throughout session"],outputQuality:{structure:["Clear progression from problem framing through idea generation to systematic evaluation","Balanced time allocation supporting both creative and analytical thinking phases","Comprehensive documentation enabling effective follow-up and implementation"],content:["High-quality ideas demonstrating creative thinking within realistic constraints","Evidence of building upon and combining concepts rather than just individual contributions","Clear connection between generated solutions and underlying user needs and business objectives"],usability:["Clear next steps and ownership assignments for continued idea development","Systematic evaluation framework enabling consistent decision-making","Session structure and methodologies that can be replicated for future challenges"]}},researchBacking:{methodology:["Design thinking ideation principles for user-centered solution development","IDEO methodology for balancing individual and collaborative creative processes","Systematic creativity techniques including SCAMPER and Six Thinking Hats","Group facilitation best practices for maximizing creative collaboration"],bestPractices:["Individual ideation before group sharing prevents groupthink and promotes diversity","Structured evaluation criteria enable objective selection while maintaining creativity","Time-boxed activities maintain energy and prevent over-analysis during creative phases","Clear documentation and follow-up planning ensure ideas translate to implementable solutions"],industryStandards:["Innovation management frameworks for systematic creative process implementation","Team collaboration guidelines ensuring inclusive participation and psychological safety","Intellectual property considerations for idea documentation and development rights","Project management integration for connecting creative outputs to development workflows"]},customizationOptions:[{id:"includeRemoteParticipation",label:"Include Remote Participation",type:"checkbox",default:!1,description:"Design session for hybrid in-person and remote participant collaboration",category:"methodology"},{id:"ideationIntensity",label:"Ideation Intensity Level",type:"select",options:["Rapid Exploration","Thorough Development","Deep Innovation"],default:"Thorough Development",description:"Balance between idea quantity and individual concept depth",category:"output"},{id:"evaluationComplexity",label:"Evaluation Complexity",type:"select",options:["Simple Voting","Multi-Criteria Analysis","Sophisticated Scoring"],default:"Multi-Criteria Analysis",description:"Level of systematic analysis for idea selection and prioritization",category:"methodology"}],industryAdaptations:{fintech:{template:"Enhanced with financial services ideation considerations",considerations:["Include regulatory compliance constraints and opportunities in creative parameters","Focus on trust-building and security concerns as innovation opportunities","Consider financial literacy levels and accessibility in solution ideation","Address risk management and fraud prevention as creative challenges"]},healthcare:{template:"Enhanced with healthcare ideation considerations",considerations:["Include patient safety and clinical workflow considerations in all ideation","Focus on care coordination and provider communication as innovation areas","Consider diverse health literacy levels and accessibility needs in solution development","Address regulatory compliance (HIPAA, FDA) as design constraints and opportunities"]},ecommerce:{template:"Enhanced with e-commerce ideation considerations",considerations:["Include conversion optimization and customer acquisition challenges in ideation scope","Focus on personalization and customer experience differentiation opportunities","Consider omnichannel and cross-device experience integration in solution ideation","Address social proof and peer influence as innovation opportunities"]}}},{id:"surveys",name:"Surveys",description:"Design and conduct quantitative surveys using psychometric principles and statistical validation",category:"research",frameworks:["design-thinking"],stages:["empathize"],variables:[{id:"knowledge_context",name:"Project Knowledge Context",type:"textarea",required:!0,description:"Project knowledge file information that will be used to contextualize the survey"},{id:"research_objectives",name:"Research Objectives",type:"textarea",required:!0,description:"What specific research questions need to be answered?"},{id:"target_population",name:"Target Population",type:"text",required:!0,description:"Description of the target survey population"},{id:"survey_length",name:"Survey Length",type:"select",required:!0,description:"Desired survey completion time",options:["5-10 minutes","10-15 minutes","15-20 minutes","20+ minutes"]}],instructions:`You are an expert UX researcher and survey methodologist. Using the project knowledge provided: {knowledge_context}, create a comprehensive quantitative survey following psychometric principles and 2025 best practices.

**Survey Design Framework:**
1. **Question Development** - Create questions that directly address {research_objectives}
2. **Response Scale Design** - Use validated scales (Likert, semantic differential, ranking)
3. **Bias Mitigation** - Apply randomization, balanced scales, and neutral language
4. **Accessibility** - Ensure WCAG compliance and multiple format compatibility

**Survey Structure:**
- **Introduction** (establishes trust and explains purpose)
- **Screening Questions** (qualify {target_population})
- **Core Research Questions** (address {research_objectives})
- **Demographics** (collect relevant segmentation data)
- **Thank You** (next steps and incentive information)

**Psychometric Validation:**
- Pre-test with 5-10 participants before full deployment
- Include attention check questions for data quality
- Use reverse-coded items to detect response bias
- Calculate internal consistency (Cronbach's alpha > 0.7)

**Distribution Strategy:**
- Multi-channel approach for representative sampling
- Mobile-optimized design for accessibility
- Reminder sequence for improved response rates
- Incentive structure aligned with {target_population}

**Data Analysis Plan:**
- Descriptive statistics for all variables
- Cross-tabulation by key demographics
- Statistical significance testing where appropriate
- Confidence intervals and margin of error reporting

**Target:** {survey_length} completion time with >15% response rate and representative sample of {target_population}.`,customizationOptions:[{id:"survey_type",label:"Survey Type",type:"select",options:["Customer satisfaction","Market research","User preferences","Needs assessment","Concept testing"],default:"User preferences",description:"Type of survey research being conducted",category:"methodology"},{id:"sample_size",label:"Target Sample Size",type:"number",default:200,description:"Desired number of completed responses",category:"constraints"}],qualityMetrics:{completionTime:"2-4 weeks",difficultyLevel:"intermediate",participantCount:{min:50,max:1e3,recommended:200},successCriteria:["Response rate above 15%","Representative sample achieved","Data quality metrics met (attention checks passed)","Statistical power adequate for analysis"],outputQuality:{structure:["Clear research questions","Validated scales","Logical flow"],content:["Bias-free language","Actionable insights","Statistical rigor"],usability:["Mobile optimization","Accessibility compliance","Clear instructions"]}},industryAdaptations:{healthcare:{additionalConsiderations:["HIPAA compliance for patient data collection","Medical terminology validation with clinical experts","IRB approval requirements for human subjects research"]},financial:{additionalConsiderations:["Regulatory compliance with financial data privacy","Risk assessment questions for financial products","Economic behavior and decision-making factors"]}}},{id:"observations",name:"Observations",description:"Conduct systematic ethnographic user observations with behavioral analysis methodology",category:"research",frameworks:["design-thinking"],stages:["empathize"],variables:[{id:"knowledge_context",name:"Project Knowledge Context",type:"textarea",required:!0,description:"Project knowledge file information that will inform the observation focus"},{id:"observation_context",name:"Observation Context",type:"text",required:!0,description:"Where and when will observations take place?"},{id:"behavior_focus",name:"Behavioral Focus",type:"textarea",required:!0,description:"What specific behaviors or interactions should be observed?"},{id:"observation_duration",name:"Observation Duration",type:"select",required:!0,description:"Total observation time per session",options:["30 minutes","1 hour","2 hours","Half day","Full day"]}],instructions:`You are an expert UX ethnographer and behavioral researcher. Using the project knowledge provided: {knowledge_context}, design a comprehensive observational study following systematic ethnographic methodology and 2025 naturalistic research best practices.

**Observation Framework:**
1. **Naturalistic Setting** - Observe users in {observation_context} without interference
2. **Behavioral Mapping** - Document {behavior_focus} using structured protocols
3. **Environmental Analysis** - Record contextual factors influencing behavior
4. **Interaction Patterns** - Identify social and technological interaction dynamics

**Systematic Documentation:**
- **Behavior Coding Sheet** (predetermined categories for consistent recording)
- **Temporal Mapping** (chronological sequence of user actions)
- **Environmental Factors** (physical/digital context influencing behavior)
- **Pain Points & Workarounds** (friction moments and user adaptations)
- **Emotional Responses** (observable indicators of user sentiment)

**Ethnographic Methodology:**
- Pre-observation reconnaissance to understand context
- Unobtrusive positioning to minimize observer effect
- Continuous field notes using structured templates
- Photography/video (with consent) for behavioral analysis
- Post-observation reflection and pattern identification

**Cultural Sensitivity:**
- Respect for user privacy and cultural norms
- Informed consent for observation and documentation
- Awareness of power dynamics and observer bias
- Inclusive approach to diverse user behaviors

**Analysis Framework:**
- Thematic coding of behavioral patterns
- Frequency analysis of critical interactions
- Journey mapping from observational data
- Pain point prioritization matrix
- Recommendation development based on evidence

**Duration:** {observation_duration} per participant with minimum 5 participants for pattern validation.`,customizationOptions:[{id:"observation_method",label:"Observation Method",type:"select",options:["Silent observation","Think-aloud protocol","Contextual inquiry","Shadowing"],default:"Silent observation",description:"Method of conducting observations",category:"methodology"},{id:"recording_method",label:"Recording Method",type:"multiselect",options:["Field notes","Audio recording","Video recording","Photography","Screen recording"],default:["Field notes"],description:"Methods for documenting observations",category:"methodology"}],qualityMetrics:{completionTime:"2-3 weeks",difficultyLevel:"advanced",participantCount:{min:5,max:15,recommended:8},successCriteria:["Rich behavioral data collected","Patterns identified across multiple participants","Environmental factors documented","Actionable insights generated"],outputQuality:{structure:["Systematic documentation","Consistent coding","Temporal mapping"],content:["Behavioral patterns","Contextual insights","Evidence-based recommendations"],usability:["Accessible findings","Actionable insights","Visual documentation"]}},industryAdaptations:{healthcare:{additionalConsiderations:["HIPAA compliance for patient observation","Clinical workflow sensitivity","Medical device interaction protocols"]},retail:{additionalConsiderations:["Customer journey mapping focus","Purchase decision observation","Store environment impact analysis"]}}},{id:"empathy-maps-dt",name:"Empathy Maps",description:"Create comprehensive empathy maps using research validation and behavioral insights",category:"analysis",frameworks:["design-thinking"],stages:["empathize"],variables:[{id:"knowledge_context",name:"Project Knowledge Context",type:"textarea",required:!0,description:"Project knowledge file information providing user research data"},{id:"target_user",name:"Target User",type:"text",required:!0,description:"Primary user type for empathy mapping"},{id:"research_source",name:"Research Source",type:"textarea",required:!0,description:"What research data will inform the empathy map?"},{id:"context_scenario",name:"Context Scenario",type:"text",required:!0,description:"Specific scenario or use case for the empathy map"}],instructions:`You are an expert UX researcher and empathy mapping specialist. Using the project knowledge provided: {knowledge_context}, create a comprehensive empathy map for {target_user} based on {research_source} following research-validated methodology and 2025 best practices.

**Empathy Map Framework:**
1. **SAYS** - Direct quotes and verbal expressions from user research
2. **THINKS** - Internal thoughts, beliefs, and cognitive processes  
3. **DOES** - Observable behaviors, actions, and interactions
4. **FEELS** - Emotions, feelings, and emotional responses

**Research Integration:**
- Ground each quadrant in specific evidence from {research_source}
- Include contradictions and complexity rather than oversimplifying
- Reference direct user quotes and behavioral observations
- Connect insights to {context_scenario} for relevance

**Advanced Empathy Mapping:**
- **Pain Points** - Frustrations, obstacles, and negative experiences
- **Gain Opportunities** - Motivations, goals, and desired outcomes
- **Influences** - External factors affecting user decisions
- **User Goals** - Primary and secondary objectives in {context_scenario}

**Validation Methodology:**
- Cross-reference findings with multiple research sources
- Validate assumptions through additional user touchpoints
- Include confidence levels for each insight (high/medium/low)
- Document gaps requiring further research

**Synthesis Process:**
- Collaborative review with research team members
- Stakeholder validation sessions for accuracy
- Integration with personas and journey mapping
- Action planning based on empathy insights

**Output Format:**
- Visual empathy map with clear quadrant organization
- Supporting evidence documentation for each insight
- Priority ranking of pain points and opportunities
- Recommendations for design implications

Focus on {target_user} in {context_scenario} using validated insights from {research_source}.`,customizationOptions:[{id:"empathy_depth",label:"Empathy Depth Level",type:"select",options:["Basic (4 quadrants)","Extended (6 sections)","Comprehensive (8+ dimensions)"],default:"Extended (6 sections)",description:"Level of detail for empathy mapping",category:"methodology"},{id:"validation_method",label:"Validation Method",type:"select",options:["Stakeholder review","User validation","Research triangulation","Team synthesis"],default:"Research triangulation",description:"How will the empathy map be validated?",category:"quality"}],qualityMetrics:{completionTime:"1-2 weeks",difficultyLevel:"intermediate",participantCount:{min:1,max:3,recommended:1},successCriteria:["Research-backed insights in each quadrant","User quotes and evidence provided","Actionable pain points identified","Design opportunities highlighted"],outputQuality:{structure:["Clear quadrant organization","Evidence documentation","Priority ranking"],content:["Research validation","User voice integration","Actionable insights"],usability:["Visual clarity","Stakeholder accessibility","Design implications"]}},industryAdaptations:{b2b:{additionalConsiderations:["Organizational context and stakeholder influences","Business process integration requirements","Decision-making hierarchy impact on user experience"]},consumer:{additionalConsiderations:["Lifestyle and personal context factors","Emotional and aspirational drivers","Social influence and peer pressure dynamics"]}}},{id:"affinity-mapping-DISABLED-2",name:"Affinity Mapping (DISABLED - using simple template)",description:"Synthesize research insights using collaborative thematic analysis and bias mitigation techniques",category:"analysis",frameworks:["design-thinking"],stages:["define"],variables:[{id:"knowledge_context",name:"Project Knowledge Context",type:"textarea",required:!0,description:"Project knowledge file information containing research data to be synthesized"},{id:"research_data",name:"Research Data Sources",type:"textarea",required:!0,description:"What research data will be analyzed (interviews, observations, surveys, etc.)?"},{id:"synthesis_goal",name:"Synthesis Goal",type:"text",required:!0,description:"What patterns or insights are you hoping to discover?"},{id:"team_size",name:"Team Size",type:"number",required:!0,description:"Number of people participating in affinity mapping",validation:{min:2,max:8}}],instructions:`You are an expert UX researcher and synthesis specialist. Using the project knowledge provided: {knowledge_context}, facilitate a comprehensive affinity mapping session to synthesize {research_data} and achieve {synthesis_goal} using collaborative analysis methodology and 2025 best practices for bias mitigation.

**Affinity Mapping Process:**
1. **Data Preparation** - Extract discrete insights from {research_data}
2. **Individual Clustering** - Each team member groups insights independently
3. **Collaborative Synthesis** - Merge individual clusters through discussion
4. **Theme Development** - Create meaningful labels and hierarchies
5. **Pattern Validation** - Cross-check themes against original research

**Systematic Methodology:**
- **Atomic Insights** - Break down research into specific, discrete observations
- **Silent Clustering** - Initial grouping without discussion to reduce bias
- **Collaborative Refinement** - Team discussion to merge and refine clusters
- **Hierarchical Organization** - Create super-themes and sub-themes
- **Evidence Mapping** - Link themes back to specific research evidence

**Bias Mitigation Strategies:**
- Rotate facilitation among {team_size} participants
- Use structured discussion protocols
- Include diverse perspectives in analysis
- Document dissenting viewpoints and edge cases
- Validate themes with original research participants

**Advanced Synthesis Techniques:**
- **Saturation Analysis** - Identify when new data stops producing new themes
- **Negative Case Analysis** - Explicitly look for contradictory evidence
- **Member Checking** - Validate findings with research participants
- **Triangulation** - Cross-reference themes across multiple data sources

**Documentation Framework:**
- Visual cluster maps with clear theme labels
- Supporting evidence for each theme (quotes, observations)
- Theme priority ranking based on frequency and impact
- Insight confidence levels and supporting evidence strength
- Action items and design implications for each major theme

**Workshop Structure:**
- Pre-work: Individual data review and initial insights
- Session 1: Silent clustering and individual presentations
- Session 2: Collaborative merging and theme development
- Session 3: Validation and prioritization
- Follow-up: Documentation and stakeholder communication

Target {synthesis_goal} through systematic analysis of {research_data} with {team_size} team members.`,customizationOptions:[{id:"synthesis_method",label:"Synthesis Method",type:"select",options:["Traditional affinity","Thematic analysis","Grounded theory","Framework analysis"],default:"Traditional affinity",description:"Methodology for insight synthesis",category:"methodology"},{id:"output_format",label:"Output Format",type:"select",options:["Visual clusters","Hierarchical themes","Journey insights","Problem statements"],default:"Hierarchical themes",description:"Primary output format for synthesis results",category:"output"}],qualityMetrics:{completionTime:"1-2 weeks",difficultyLevel:"intermediate",participantCount:{min:2,max:8,recommended:4},successCriteria:["Clear thematic patterns identified","Evidence-backed insights generated","Team consensus on major themes","Actionable design implications developed"],outputQuality:{structure:["Hierarchical theme organization","Evidence documentation","Priority ranking"],content:["Research validation","Insight depth","Bias mitigation"],usability:["Visual clarity","Stakeholder communication","Action orientation"]}},industryAdaptations:{enterprise:{additionalConsiderations:["Stakeholder consensus building across departments","Business requirement integration with user insights","Change management implications for synthesis findings"]},startup:{additionalConsiderations:["Resource-constrained synthesis approaches","Rapid iteration and validation cycles","Product-market fit implications of research themes"]}}},{id:"brainstorming",name:"Brainstorming",description:"Facilitate structured creative ideation using systematic evaluation frameworks and divergent-convergent methodology",category:"ideation",frameworks:["design-thinking"],stages:["ideate"],variables:[{id:"knowledge_context",name:"Project Knowledge Context",type:"textarea",required:!0,description:"Project knowledge file information that will inform ideation constraints and opportunities"},{id:"challenge_statement",name:"Challenge Statement",type:"textarea",required:!0,description:"The specific problem or opportunity for ideation (How might we...?)"},{id:"ideation_focus",name:"Ideation Focus",type:"select",required:!0,description:"Primary focus area for idea generation",options:["Features & functionality","User experience improvements","Business model innovation","Technology solutions","Service design"]},{id:"session_duration",name:"Session Duration",type:"select",required:!0,description:"Total brainstorming session time",options:["30 minutes","1 hour","2 hours","Half day workshop"]}],instructions:`You are an expert innovation facilitator and creative ideation specialist. Using the project knowledge provided: {knowledge_context}, design and facilitate a comprehensive brainstorming session to address {challenge_statement} with focus on {ideation_focus} using structured creative methodology and 2025 best practices for systematic innovation.

**Structured Ideation Framework:**
1. **Divergent Phase** - Generate maximum quantity without judgment
2. **Convergent Phase** - Evaluate and prioritize using systematic criteria
3. **Development Phase** - Elaborate on top concepts with feasibility analysis
4. **Validation Phase** - Assess ideas against user needs and business goals

**Session Design ({session_duration}):**
- **Warm-up** (10%) - Creative exercises to prime innovative thinking
- **Problem Reframing** (15%) - Multiple perspectives on {challenge_statement}
- **Divergent Ideation** (40%) - Rapid idea generation using multiple techniques
- **Convergent Evaluation** (25%) - Systematic assessment and clustering
- **Development Planning** (10%) - Next steps for promising concepts

**Ideation Techniques:**
- **Classic Brainstorming** - Build on others' ideas, defer judgment
- **Brainwriting** - Silent idea generation to reduce groupthink
- **SCAMPER Method** - Substitute, Combine, Adapt, Modify, Put to other uses, Eliminate, Reverse
- **Worst Possible Ideas** - Generate bad ideas to stimulate creative thinking
- **Analogical Thinking** - Draw inspiration from unrelated domains

**Evaluation Framework:**
- **Feasibility** - Technical and resource constraints from {knowledge_context}
- **Desirability** - User value and problem-solution fit
- **Viability** - Business model alignment and market opportunity
- **Innovation Level** - Degree of novelty and competitive differentiation
- **Implementation Timeline** - Short-term vs. long-term opportunities

**Systematic Assessment:**
- Dot voting for initial prioritization
- Impact vs. Effort matrix plotting
- Assumption mapping for top concepts
- Risk assessment and mitigation planning
- Resource requirement estimation

**Output Deliverables:**
- Comprehensive idea inventory (100+ ideas target)
- Prioritized concept portfolio (top 10-15 ideas)
- Detailed concept descriptions for top 3-5 ideas
- Implementation roadmap with next steps
- Assumption testing plan for validation

Focus on {ideation_focus} solutions for {challenge_statement} informed by insights from {knowledge_context}.`,customizationOptions:[{id:"facilitation_style",label:"Facilitation Style",type:"select",options:["Structured workshop","Freeform session","Design sprint style","Innovation tournament"],default:"Structured workshop",description:"Approach to facilitating the brainstorming session",category:"methodology"},{id:"evaluation_criteria",label:"Primary Evaluation Criteria",type:"multiselect",options:["User impact","Technical feasibility","Business value","Innovation level","Implementation speed"],default:["User impact","Technical feasibility","Business value"],description:"Criteria for assessing and prioritizing ideas",category:"output"}],qualityMetrics:{completionTime:"1 week",difficultyLevel:"beginner",participantCount:{min:4,max:12,recommended:6},successCriteria:["100+ ideas generated in divergent phase","Systematic evaluation framework applied","Top concepts developed with detail","Clear next steps identified"],outputQuality:{structure:["Divergent-convergent flow","Systematic evaluation","Prioritized output"],content:["Creative diversity","Feasibility assessment","Actionable concepts"],usability:["Clear facilitation","Participant engagement","Tangible outcomes"]}},industryAdaptations:{technology:{additionalConsiderations:["Technical architecture constraints and opportunities","Platform ecosystem integration requirements","Scalability and performance implications for ideas"]},healthcare:{additionalConsiderations:["Regulatory compliance requirements for medical solutions","Patient safety and clinical workflow integration","Evidence-based design and clinical validation needs"]}}}];function T4(e){return Zz.find(t=>t.id===e)}function _ye(){return Zz}function Iye(e,t){var r;const n=T4(e);return(r=n==null?void 0:n.industryAdaptations)==null?void 0:r[t]}function xL(e,t){const n=T4(e);if(!n)return{isValid:!1,errors:["Template not found"]};const r=[];return n.variables.forEach(s=>{const i=t[s.id];if(s.required&&(i==null||i==="")){r.push(`${s.name} is required`);return}if(!(!i&&!s.required)){if(s.type==="number"&&typeof i!="number"&&r.push(`${s.name} must be a number`),s.validation){const o=s.validation;o.min&&i<o.min&&r.push(o.message||`${s.name} must be at least ${o.min}`),o.max&&i>o.max&&r.push(o.message||`${s.name} must be at most ${o.max}`),o.pattern&&typeof i=="string"&&!new RegExp(o.pattern).test(i)&&r.push(o.message||`${s.name} format is invalid`)}s.options&&!s.options.includes(i)&&r.push(`${s.name} must be one of: ${s.options.join(", ")}`)}}),{isValid:r.length===0,errors:r}}const k2=[{id:"clarity_structure",name:"Structural Clarity",description:"Clear organization, logical flow, and proper formatting",weight:.2,category:"structure"},{id:"completeness",name:"Completeness",description:"All necessary elements and sections are present",weight:.15,category:"structure"},{id:"consistency",name:"Consistency",description:"Consistent terminology, format, and style throughout",weight:.1,category:"structure"},{id:"actionability",name:"Actionability",description:"Provides clear, specific actions and guidance",weight:.2,category:"content"},{id:"methodology_rigor",name:"Methodological Rigor",description:"Based on established UX research and design methodologies",weight:.15,category:"methodology"},{id:"context_relevance",name:"Context Relevance",description:"Relevant to specified context, users, and objectives",weight:.1,category:"content"},{id:"practitioner_usability",name:"Practitioner Usability",description:"Easy for UX practitioners to understand and implement",weight:.15,category:"usability"},{id:"accessibility_inclusion",name:"Accessibility & Inclusion",description:"Considers diverse users and accessibility requirements",weight:.1,category:"usability"}],Pye={fintech:[{id:"regulatory_compliance",name:"Regulatory Compliance",description:"Addresses financial services regulations and compliance requirements",weight:.15,category:"methodology"},{id:"security_considerations",name:"Security Considerations",description:"Includes appropriate security and trust-building elements",weight:.1,category:"content"}],healthcare:[{id:"hipaa_compliance",name:"HIPAA Compliance",description:"Addresses healthcare privacy and data protection requirements",weight:.15,category:"methodology"},{id:"clinical_accuracy",name:"Clinical Accuracy",description:"Considers clinical workflows and healthcare-specific needs",weight:.1,category:"content"}],ecommerce:[{id:"conversion_focus",name:"Conversion Focus",description:"Addresses conversion optimization and customer journey considerations",weight:.1,category:"content"},{id:"multichannel_consideration",name:"Multichannel Consideration",description:"Considers cross-device and omnichannel user experiences",weight:.1,category:"methodology"}],saas:[{id:"integration_awareness",name:"Integration Awareness",description:"Considers workflow integration and tool ecosystem needs",weight:.1,category:"content"},{id:"organizational_context",name:"Organizational Context",description:"Addresses team collaboration and organizational decision-making",weight:.1,category:"methodology"}],education:[{id:"learning_accessibility",name:"Learning Accessibility",description:"Considers diverse learning styles and accessibility needs",weight:.1,category:"usability"},{id:"institutional_constraints",name:"Institutional Constraints",description:"Addresses educational institutional requirements and limitations",weight:.1,category:"methodology"}]},Tye={"user-interviews":{templateId:"user-interviews",requiredElements:["research objectives","participant criteria","interview structure","question types","analysis framework","quality assurance measures"],qualityMetrics:[...k2,{id:"question_quality",name:"Question Quality",description:"Questions are open-ended, unbiased, and encourage storytelling",weight:.15,category:"methodology"},{id:"funnel_technique",name:"Funnel Technique Implementation",description:"Proper implementation of broad-to-specific questioning approach",weight:.1,category:"methodology"}]},personas:{templateId:"personas",requiredElements:["research backing","behavioral patterns","goals and motivations","pain points","design implications","validation framework"],qualityMetrics:[...k2,{id:"research_foundation",name:"Research Foundation",description:"Personas are clearly based on actual research data and evidence",weight:.15,category:"methodology"},{id:"behavioral_focus",name:"Behavioral Focus",description:"Emphasizes behaviors and goals over demographic details",weight:.1,category:"content"}]},"usability-tests":{templateId:"usability-tests",requiredElements:["testing objectives","participant strategy","task scenarios","success metrics","analysis framework","quality assurance","reporting structure"],qualityMetrics:[...k2,{id:"statistical_rigor",name:"Statistical Rigor",description:"Appropriate sample sizes and statistical considerations",weight:.15,category:"methodology"},{id:"task_realism",name:"Task Realism",description:"Tasks reflect realistic user goals and contexts",weight:.1,category:"content"}]}};class Fye{constructor(){Je(this,"industryMetrics");Je(this,"templateCriteria");this.industryMetrics=Pye,this.templateCriteria=Tye}async validatePrompt(t,n,r,s){const i=n?this.templateCriteria[n]:null,o=(i==null?void 0:i.qualityMetrics)||k2,c=r?this.industryMetrics[r]||[]:[],l=[...o,...c],d=[];for(const m of l){const g=await this.evaluateMetric(t,m,n,r,s);d.push(g)}const u=d.reduce((m,g)=>{const b=l.find(y=>y.id===g.metricId);return m+g.score*((b==null?void 0:b.weight)||.1)},0),h=Math.round(u);let A;h>=85?A="excellent":h>=70?A="good":h>=55?A="fair":A="poor";const f=this.generateSummary(d,l,h);return{overallScore:h,category:A,scores:d,summary:f,validationTimestamp:Date.now(),templateId:n,industry:r}}async evaluateMetric(t,n,r,s,i){let o=50;const c=[],l=[];switch(n.id){case"clarity_structure":o=this.evaluateStructuralClarity(t),o<70&&(l.push("Improve section organization and use clear headers"),l.push("Add logical flow between different sections"));break;case"completeness":o=this.evaluateCompleteness(t,r),o<70&&(l.push("Ensure all required sections are present"),l.push("Add missing methodology or analysis components"));break;case"actionability":o=this.evaluateActionability(t),o<70&&(l.push("Add more specific, step-by-step guidance"),l.push("Include concrete examples and templates"));break;case"methodology_rigor":o=this.evaluateMethodologicalRigor(t,r),o<70&&(l.push("Reference established UX research methodologies"),l.push("Include validation and quality assurance measures"));break;case"accessibility_inclusion":o=this.evaluateAccessibilityConsideration(t),o<70&&(l.push("Add accessibility considerations and inclusive design practices"),l.push("Consider diverse user abilities and needs"));break;default:o=this.evaluateGenericMetric(t,n,s),o<70&&l.push(`Improve ${n.name.toLowerCase()} considerations`);break}return{metricId:n.id,score:Math.max(0,Math.min(100,o)),feedback:c.join(". "),suggestions:l}}evaluateStructuralClarity(t){let n=50;const r=(t.match(/^#+\s/gm)||[]).length;return n+=Math.min(20,r*5),/(?:objective|method|analysis|result)/gi.test(t)&&(n+=15),(t.includes("**")||t.includes("*"))&&(n+=10),/^\d+\.|^-\s|^\*\s/gm.test(t)&&(n+=5),Math.min(100,n)}evaluateCompleteness(t,n){let r=60;if(!n)return r;const s=this.templateCriteria[n];if(!s)return r;const i=s.requiredElements;return r=20+i.filter(l=>new RegExp(l.replace(/\s+/g,"\\s+"),"gi").test(t)).length/i.length*80,Math.min(100,r)}evaluateActionability(t){let n=40;const s=["create","design","conduct","analyze","implement","test","validate"].filter(d=>new RegExp(`\\b${d}\\b`,"gi").test(t)).length;return n+=Math.min(20,s*3),/step-by-step|follow these|instructions|protocol/gi.test(t)&&(n+=15),/example|template|sample|format/gi.test(t)&&(n+=10),/minutes|hours|duration|timeline/gi.test(t)&&(n+=10),/tool|resource|material|equipment/gi.test(t)&&(n+=5),Math.min(100,n)}evaluateMethodologicalRigor(t,n){let r=50;const i=["methodology","framework","analysis","validation","research"].filter(l=>new RegExp(`\\b${l}\\b`,"gi").test(t)).length;return r+=Math.min(20,i*4),/quality|validation|reliability|validity|bias|saturation/gi.test(t)&&(r+=15),/technique|framework|model|standard|principle/gi.test(t)&&(r+=10),n==="user-interviews"&&/funnel|open-ended|5 whys|think-aloud/gi.test(t)&&(r+=5),Math.min(100,r)}evaluateAccessibilityConsideration(t){let n=30;const s=["accessibility","inclusive","assistive","diverse","accommodation"].filter(l=>new RegExp(`\\b${l}\\b`,"gi").test(t)).length;return n+=Math.min(30,s*6),/screen reader|WCAG|disability|impairment|barrier/gi.test(t)&&(n+=20),/all users|diverse|everyone|various abilities/gi.test(t)&&(n+=10),/cultural|sensitivity|diverse background/gi.test(t)&&(n+=10),Math.min(100,n)}evaluateGenericMetric(t,n,r){let s=60;switch(n.category){case"structure":s=this.evaluateStructuralClarity(t);break;case"content":s=this.evaluateActionability(t);break;case"methodology":s=this.evaluateMethodologicalRigor(t);break;case"usability":s=this.evaluateAccessibilityConsideration(t);break}return s}generateSummary(t,n,r){const s=[],i=[],o=[],c=[];return t.forEach(l=>{const d=n.find(u=>u.id===l.metricId);d&&(l.score>=80?s.push(`Strong ${d.name.toLowerCase()}`):l.score<50?(o.push(`Critical issue with ${d.name.toLowerCase()}`),c.push(...l.suggestions)):l.score<70&&(i.push(`Needs improvement in ${d.name.toLowerCase()}`),c.push(...l.suggestions.slice(0,1))))}),{strengths:[...new Set(s)].slice(0,5),weaknesses:[...new Set(i)].slice(0,5),criticalIssues:[...new Set(o)].slice(0,3),recommendations:[...new Set(c)].slice(0,8)}}getValidationCriteria(t){return this.templateCriteria[t]||null}addCustomMetric(t){}}const Dye=new Fye,Uye={id:"design-thinking-enhanced",name:"Design Thinking (Research-Backed)",description:"Human-centered innovation methodology with comprehensive research foundation and accessibility protocols",color:"#8B5CF6",characteristics:{focus:"Human-centered innovation with inclusive design principles",timeline:"2-6 months (with accessibility checkpoints)",complexity:"Medium-High (enhanced with research protocols)",teamSize:"3-8 people (including accessibility specialists)",outcome:"Validated, accessible, and inclusive solutions"},stages:[],researchBacking:{methodology:{foundationalTheory:["Human-Centered Design Theory (Norman, 1988)","Design Science Research Methodology (Hevner et al., 2004)","Activity Theory (Engestrm, 1987)","Participatory Design Theory (Schuler & Namioka, 1993)","Universal Design Principles (Mace et al., 1991)"],researchEvidence:["Stanford d.school 15+ years of research on design thinking effectiveness","IDEO's documented success rates across 1000+ projects","IBM Design Thinking ROI studies showing 2:1 return on investment","SAP's accessibility integration increasing user satisfaction by 23%","Academic meta-analysis of 150+ design thinking studies (2019)"],industryStandards:["ISO 9241-210:2019 Human-centred design for interactive systems","WCAG 2.1 Web Content Accessibility Guidelines","Section 508 Accessibility Standards","EN 301 549 European Accessibility Standard","ISO 14289 Document accessibility requirements"],academicSources:["Design Studies Journal - Design Thinking special issues","International Journal of Design - Human-centered design research","Universal Access in the Information Society Journal","ACM Transactions on Accessible Computing","Journal of Usability Studies"]},bestPractices:{preparation:["Establish clear accessibility requirements from project start","Recruit diverse user groups including people with disabilities","Set up inclusive research environments and tools","Define measurable accessibility and inclusion goals","Create team accessibility competency baseline"],execution:["Use multiple communication modalities in all activities","Provide materials in various accessible formats","Include assistive technology users in all research phases","Document accessibility considerations throughout process","Regular accessibility checkpoint reviews"],analysis:["Analyze data through intersectional lens","Identify barriers for users with different abilities","Validate insights with diverse user groups","Consider cultural and linguistic differences","Document bias identification and mitigation efforts"],deliverables:["Include accessibility specifications in all deliverables","Provide alternative formats for all documentation","Create inclusive persona sets representing diverse abilities","Document accessibility decision rationale","Include accessibility testing protocols"]},accessibilityProtocols:{inclusiveDesign:["Follow Microsoft Inclusive Design principles: recognize exclusion, learn from diversity, solve for one extend to many","Apply IBM's Inclusive Design Toolkit methodologies","Use Progressive Enhancement approach for accessibility","Implement Universal Design for Learning (UDL) principles","Consider Intersectional Design Framework (Sasha Costanza-Chock)"],accessibilityGuidelines:["WCAG 2.1 AA compliance minimum standard","Include keyboard navigation in all prototypes","Ensure color contrast ratios meet accessibility standards","Provide alternative text for all visual content","Test with screen readers and assistive technologies","Include captions and transcripts for audio/video content"],diversityConsiderations:["Recruit participants across disability, age, gender, ethnicity, socioeconomic status","Consider cultural differences in interaction patterns","Include non-native speakers in research activities","Account for different technological literacy levels","Consider varying socioeconomic contexts for solution design"],ethicalGuidelines:["Follow IRB (Institutional Review Board) guidelines for human subjects research","Obtain informed consent with accessible formats","Ensure data privacy and protection for vulnerable populations","Provide fair compensation regardless of participant background","Document and address potential harms to participants"]},qualityAssurance:{validationCriteria:["Solution tested with diverse user groups including people with disabilities","Accessibility requirements documented and validated","Cultural appropriateness reviewed by relevant communities","Technical implementation follows accessibility standards","Business case includes diversity and inclusion metrics"],successMetrics:["User satisfaction scores across diverse user groups (minimum 4.0/5.0)","Accessibility compliance score (minimum WCAG 2.1 AA)","Diversity representation in research (minimum 30% underrepresented groups)","Task completion rates for users with assistive technologies (95% of average)","Cultural appropriateness rating from community representatives"],commonPitfalls:["Assuming one-size-fits-all solutions work for all users","Adding accessibility as afterthought rather than core design principle","Over-relying on automated accessibility testing without human validation","Conflating compliance with actual usability for people with disabilities","Ignoring intersectionality in user research and design decisions"],qualityChecklist:[" Diverse user representation in all research phases"," Accessibility requirements defined and tracked"," Inclusive design principles applied throughout"," Multiple testing methods including assistive technology"," Community feedback incorporated from affected populations"," Documentation includes accessibility decision rationale"," Team trained in inclusive design practices"]}},comprehensiveInstructions:{overview:"Design Thinking is a human-centered innovation methodology that combines empathy, creativity, and rationality to meet user needs and drive business success. This enhanced version integrates comprehensive accessibility protocols, inclusive design practices, and research-backed methodologies to ensure solutions work for diverse user populations.",whenToUse:["Complex, ambiguous problems requiring innovative solutions","Projects requiring deep user understanding across diverse populations","Innovation initiatives where accessibility and inclusion are priorities","Cross-functional team projects requiring shared methodology","Situations where traditional problem-solving approaches have failed","Products or services intended for broad, diverse user bases"],whenNotToUse:["Simple, well-defined problems with clear solutions","Emergency situations requiring immediate action","Projects with extremely tight budgets that cannot support proper research","Teams unwilling to engage with diverse user perspectives","Situations where stakeholders are not committed to user-centered outcomes"],prerequisites:["Leadership commitment to human-centered design and accessibility","Budget for inclusive user research and accessibility testing","Team members trained in basic accessibility and inclusive design","Access to diverse user groups including people with disabilities","Time allocation for iterative design and validation processes","Organizational readiness for potential significant design changes"],expectedOutcomes:["Deep understanding of user needs across diverse populations","Innovative solutions validated with real users including people with disabilities","Accessible and inclusive design specifications","Cross-functional team alignment on user-centered approach","Documented design rationale including accessibility decisions","Scalable design system considering diverse user needs","Business case supported by inclusive user research"],timeInvestment:"2-6 months depending on complexity, with 15-20% additional time for enhanced accessibility and inclusion protocols",teamComposition:["Design Lead with inclusive design expertise","UX Researcher experienced in accessible research methods","Accessibility Specialist or consultant","Product Manager with inclusive product experience","Engineering representative familiar with accessibility implementation","Community liaisons from affected user groups","Business stakeholder committed to inclusive outcomes"]}},Lye={id:"user-interviews-enhanced",name:"User Interviews (Accessible)",description:"Conduct inclusive, accessible user interviews with comprehensive methodology",category:"Research",icon:"MessageCircle",characteristics:{effort:"High (enhanced with accessibility protocols)",expertise:"Research skills + accessibility knowledge",resources:["interview guide","accessible recording equipment","alternative communication tools"],output:"Inclusive user insights with accessibility considerations",when:"Beginning and throughout project with diverse user groups"},researchBacking:{methodology:{foundationalTheory:["Ethnographic Interview Theory (Spradley, 1979)","Critical Disability Theory (Meekosha & Shuttleworth, 2009)","Phenomenological Research Methods (Moustakas, 1994)","Participatory Action Research (Reason & Bradbury, 2008)","Cultural Responsiveness in Research (Sue & Sue, 2015)"],researchEvidence:["Nielsen's research on user interview effectiveness (52 users)","Studies showing 80% improvement in accessibility when including disabled users in research","Research on interview bias reduction techniques","Evidence for multiple interview rounds improving insight quality","Studies on cultural adaptation improving research validity"],industryStandards:["ISO 9241-210 Human-centered design interview protocols","GDPR compliance for research data collection","APA Ethical Guidelines for research with human subjects","W3C's Research Methods for Accessibility","Section 508 requirements for research accessibility"],academicSources:["Qualitative Research in Psychology - Interview methodology","Disability & Society Journal - Inclusive research methods","International Journal of Inclusive Education - Accessible research","Journal of Empirical Research on Human Research Ethics","Universal Access in the Information Society"]},bestPractices:{preparation:["Recruit participants across disability, age, gender, ethnicity, socioeconomic backgrounds","Provide interview questions in advance if requested","Offer multiple communication options (video, audio, text, sign language)","Ensure interview environment is physically and digitally accessible","Prepare accessible consent forms and compensation processes","Test all technology with assistive devices beforehand"],execution:["Begin with accessibility and communication preference check","Use plain language and avoid jargon","Allow extra time for responses and processing","Provide breaks as needed","Use multiple prompting techniques for different communication styles","Document accessibility adaptations made during interview"],analysis:["Review recordings/transcripts for accessibility insights","Code data considering intersectional experiences","Identify patterns across different ability and demographic groups","Note where standard solutions may not work for specific users","Validate interpretations with participant communities when possible"],deliverables:["Accessible interview summaries with alternative formats","Anonymized participant quotes representing diverse perspectives","Accessibility insight documentation","Recommendations for inclusive design based on interviews","Cultural and linguistic considerations documented"]},accessibilityProtocols:{inclusiveDesign:["Offer interviews in participant's preferred communication mode","Use inclusive language that doesn't assume ability or circumstance","Provide materials in multiple formats (audio, large print, Braille, digital)","Allow participants to bring support persons or interpreters","Consider different cultural norms around communication and privacy"],accessibilityGuidelines:["Video platforms must support screen readers and keyboard navigation","Provide live captions or sign language interpretation if requested","Ensure good audio quality for hearing aid compatibility","Use high contrast visuals for participants with low vision","Provide interview guide in accessible formats beforehand"],diversityConsiderations:["Account for different time zones and schedules","Consider varying internet connectivity and device capabilities","Respect cultural communication patterns and preferences","Acknowledge different relationships to technology and privacy","Be aware of power dynamics between researcher and participant"],ethicalGuidelines:["Informed consent must be truly accessible and understandable","Respect participant autonomy in communication choices","Ensure data security meets enhanced privacy needs","Provide clear information about how insights will be used","Offer ways for participants to review their contributions"]},qualityAssurance:{validationCriteria:["Interview protocol tested with diverse user groups","Accessibility accommodations successfully implemented","Rich, nuanced data collected across different user types","Participant feedback positive across demographic groups","Insights actionable for inclusive design decisions"],successMetrics:["Participant satisfaction score 4.5/5.0 across all groups","Successful accommodation rate of 100% for requested accessibility needs","Data saturation reached across different user demographics","Insight quality rated as high by cross-functional team","Cultural appropriateness confirmed by community representatives"],commonPitfalls:["Assuming all participants communicate in similar ways","Not budgeting adequate time for accessibility accommodations","Using technology that excludes certain users","Asking leading questions based on researcher assumptions","Not following up to validate interpretations with communities"],qualityChecklist:[" Diverse participant recruitment completed"," Accessibility accommodations offered and implemented"," Interview environment tested for accessibility"," Multiple communication options available"," Consent process accessible and culturally appropriate"," Data analysis considers intersectional perspectives"," Insights validated with affected communities"]}},comprehensiveGuidance:{purpose:"Gather deep, qualitative insights about user needs, behaviors, and experiences through one-on-one conversations that are accessible and inclusive for all participants.",methodology:"Semi-structured interviews using accessibility-informed ethnographic techniques, ensuring full participation regardless of ability, communication style, or cultural background.",preparation:{materials:["Interview guide with main questions and accessible alternatives","Consent forms in multiple formats (audio, large print, easy read)","Recording equipment compatible with assistive technologies","Backup communication tools (text-to-speech, visual aids)","Participant compensation in accessible payment methods"],environment:["Quiet, well-lit space with adjustable lighting","Accessible physical location or reliable video platform","Technology tested with screen readers and other assistive devices","Backup internet connection and alternative communication methods","Comfortable seating and temperature control"],participants:["Recruit across disability, age, gender, ethnicity, socioeconomic status","Screen for communication preferences and accessibility needs","Provide advance information about interview process","Confirm accessibility accommodations 24 hours before","Offer flexible scheduling including evenings and weekends"],timeline:"1-2 weeks recruitment, 1-2 hours per interview, 1 week for analysis per 5-6 interviews"},execution:{stepByStepInstructions:["1. Welcome participant and confirm accessibility accommodations are working","2. Review consent process using participant's preferred format","3. Start with easy background questions to build rapport","4. Use open-ended questions with accessible follow-up prompts","5. Allow natural pauses and extra processing time","6. Check understanding regularly without being patronizing","7. Adapt questioning style based on participant responses","8. Close with opportunity for participant to add anything","9. Thank participant and confirm next steps for findings sharing"],facilitationTips:["Mirror participant's communication style and pace","Use inclusive language that doesn't assume ability or circumstance","Be comfortable with silence and different response patterns","Ask permission before making assumptions about participant needs","Focus on understanding rather than confirming pre-existing beliefs","Document accessibility insights alongside usability insights"],troubleshooting:["Technical issues: Have backup communication methods ready","Participant fatigue: Offer breaks and shorter sessions","Communication challenges: Use alternative prompting techniques","Cultural misunderstandings: Acknowledge and ask for clarification","Emotional responses: Have support resources and protocols ready"]},analysis:{dataProcessing:["Transcribe interviews with accessibility considerations noted","Code data using intersectional analysis framework","Identify patterns within and across different user groups","Note specific accessibility barriers and solutions mentioned","Document cultural and linguistic considerations"],insightExtraction:["Look for unmet needs across different user populations","Identify pain points that disproportionately affect certain groups","Find opportunities for inclusive design solutions","Note where one-size-fits-all approaches fail","Extract insights about communication and interaction preferences"],validation:["Check interpretations with participants when possible","Share preliminary findings with community representatives","Validate accessibility insights with disability advocates","Cross-reference findings with existing accessibility research","Test insights against different cultural contexts"]},deliverables:{formats:["Interview summary reports with accessible formatting","Audio recordings with transcripts and captions","Video highlights with audio descriptions","Infographic summaries with alternative text","Presentation materials in multiple formats"],templates:["Interview guide template with accessibility prompts","Consent form templates for different communication needs","Analysis framework considering intersectional experiences","Insight documentation including accessibility implications","Participant feedback collection accessible format"],presentationGuidance:["Lead with inclusive insights and accessibility considerations","Use quotes representing diverse participant voices","Include specific recommendations for accessible design","Present findings in accessible formats for stakeholders","Provide clear action items with accessibility specifications"]}}},wL={frameworks:{"design-thinking-enhanced":Uye},tools:{"user-interviews-enhanced":Lye}},Mye={id:"double-diamond-enhanced",name:"Double Diamond (Research-Backed)",description:"Systematic design process with comprehensive research foundation and accessibility integration",color:"#10B981",characteristics:{focus:"Structured problem-solving with inclusive discovery and delivery",timeline:"3-8 months with accessibility checkpoints",complexity:"Medium (enhanced with research rigor)",teamSize:"4-10 people including accessibility experts",outcome:"Systematically validated, accessible solutions"},stages:[],researchBacking:{methodology:{foundationalTheory:["Design Council's Double Diamond model (2005)","Divergent-Convergent Thinking Theory (Guilford, 1967)","Systems Thinking in Design (Checkland, 1981)","Inclusive Innovation Framework (Clayton Christensen Institute)","Accessibility-First Design Methodology (WebAIM, 2019)"],researchEvidence:["Design Council's 15-year study on design process effectiveness","British Design Council ROI studies showing 4:1 return","Government Digital Service accessibility improvements","200+ case studies from inclusive design implementations","Academic research on structured design process outcomes"],industryStandards:["ISO 9241-210:2019 Human-centred design processes","BS 7000-6:2005 Design management systems","WCAG 2.1 accessibility integration requirements","Government Digital Service Design Principles","European Accessibility Act compliance standards"],academicSources:["Design Issues Journal - Process methodology research","CoDesign Journal - Participatory design methods","Design Studies - Systematic design research","Universal Access in the Information Society","Journal of Accessibility and Design for All"]},bestPractices:{preparation:["Define accessibility requirements in project charter","Establish diverse stakeholder advisory group","Set up inclusive research and testing environments","Create accessibility competency development plan","Define measurable inclusion and accessibility KPIs"],execution:["Use structured divergent-convergent cycles with accessibility checkpoints","Include accessibility experts in all diamond phases","Document accessibility decisions and rationale throughout","Regular validation with diverse user groups","Maintain accessibility artifact repository"],analysis:["Apply systematic evaluation criteria including accessibility","Use evidence-based decision making frameworks","Document trade-offs and accessibility impact assessments","Validate solutions across different user scenarios","Measure against predefined accessibility success criteria"],deliverables:["Comprehensive accessibility specifications integrated","Evidence-based design decisions documented","Inclusive testing results and validation reports","Accessibility compliance certification","Implementation guides with accessibility requirements"]},accessibilityProtocols:{inclusiveDesign:["Apply Inclusive Design Principles throughout all diamond phases","Use progressive disclosure and flexible interaction patterns","Design for cognitive accessibility from the start","Consider assistive technology compatibility in all solutions","Implement universal design principles systematically"],accessibilityGuidelines:["WCAG 2.1 AA minimum compliance with AAA aspirational goals","Section 508 compliance for government projects","Platform-specific accessibility guidelines integration","International accessibility standards consideration","Emerging technology accessibility requirements"],diversityConsiderations:["Include intersectional perspective in all research phases","Consider global accessibility needs and cultural differences","Account for varying technological access and literacy","Include economic accessibility in solution design","Address language and communication diversity"],ethicalGuidelines:["Apply ethical design framework throughout process","Consider long-term accessibility maintenance responsibilities","Ensure equitable access to solution benefits","Document ethical decision-making rationale","Include community benefit assessment"]},qualityAssurance:{validationCriteria:["Solution tested across four diamond phases with accessibility validation","Systematic evidence collection and analysis completed","Accessibility compliance verified through multiple testing methods","Stakeholder validation including disability community representatives","Business case includes accessibility and inclusion ROI"],successMetrics:["Process completion rate meeting timeline with accessibility milestones","Accessibility compliance score 95% across all deliverables","Stakeholder satisfaction 4.5/5.0 across diverse groups","Solution effectiveness verified through systematic testing","Cost-benefit analysis positive including accessibility investments"],commonPitfalls:["Rushing through discovery phases without adequate accessibility research","Treating accessibility as separate track rather than integrated approach","Not allocating sufficient time for inclusive design iterations","Over-relying on automated testing without human accessibility validation","Failing to maintain accessibility standards through delivery phases"],qualityChecklist:[" All diamond phases include accessibility checkpoints"," Diverse user representation in discovery and validation"," Evidence-based decision making documented"," Accessibility compliance verified at each convergence point"," Systematic testing completed with assistive technologies"," Implementation includes accessibility maintenance plan"," Team accessibility competency verified"]}},comprehensiveInstructions:{overview:"The Double Diamond is a systematic design process that maps the design journey from problem to solution through four distinct phases: Discover, Define, Develop, and Deliver. This enhanced version integrates comprehensive accessibility protocols and evidence-based methodologies to ensure systematic, inclusive design outcomes.",whenToUse:["Complex problems requiring systematic exploration and validation","Projects where both problem and solution space are unclear","Situations requiring evidence-based design decisions","Large-scale projects with multiple stakeholders and accessibility requirements","Innovation projects where systematic risk management is important","Government or regulated industry projects requiring compliance"],whenNotToUse:["Simple problems with well-defined solutions","Emergency or crisis response situations","Projects with extremely limited budgets for systematic research","Teams unwilling to follow structured process methodology","Situations where speed is more important than systematic validation"],prerequisites:["Leadership commitment to systematic design process","Budget allocation for all four diamond phases including accessibility","Team with diverse skills including accessibility expertise","Access to real users throughout process including people with disabilities","Organizational readiness for evidence-based decision making","Time allocation for iterative validation and refinement"],expectedOutcomes:["Systematically validated problem definition with accessibility considerations","Evidence-based solution design with comprehensive accessibility features","Clear documentation of design decisions and accessibility rationale","Validated solution ready for implementation with accessibility specifications","Team capability development in systematic accessible design","Measurable business outcomes with inclusion and accessibility metrics"],timeInvestment:"3-8 months depending on complexity, with structured phases and accessibility validation milestones",teamComposition:["Project Lead with systematic design process experience","UX Researchers skilled in inclusive research methods","Accessibility Specialist integrated throughout process","Service/Product Designer with accessibility design expertise","Business Analyst with inclusive business model experience","Technical Lead familiar with accessible implementation","Community Representatives from affected user groups"]}},Rye={id:"design-sprint-enhanced",name:"Design Sprint (Accessible)",description:"Rapid prototyping and validation with integrated accessibility protocols",color:"#EF4444",characteristics:{focus:"Rapid validation with accessibility from day one",timeline:"5 days with accessibility validation",complexity:"Medium (intensive with accessibility integration)",teamSize:"5-7 people including accessibility expert",outcome:"Validated prototype with accessibility baseline"},stages:[],researchBacking:{methodology:{foundationalTheory:["Google Ventures Sprint Methodology (Knapp, Zeratsky, Kowitz, 2016)","Rapid Prototyping Theory (Brown, 1991)","Time-boxed Innovation Framework","Lean Startup Methodology with Accessibility (Ries, 2011)","Accessible Design Sprint Methodology (Microsoft, 2019)"],researchEvidence:["Google Ventures 1000+ sprint case studies","ADP accessibility-first sprint ROI documentation","Microsoft inclusive design sprint effectiveness data","Salesforce accessibility sprint success metrics","Academic research on rapid accessible prototyping"],industryStandards:["Agile accessibility integration standards","WCAG 2.1 rapid compliance testing protocols","ISO/IEC 40500:2012 accessibility testing in sprints","Accessible prototyping tool standards","Sprint accessibility checkpoint frameworks"],academicSources:["ACM CHI Conference - Rapid accessible design papers","Design Issues - Sprint methodology research","International Journal of Human-Computer Studies","Universal Access in the Information Society","ACM Transactions on Accessible Computing"]},bestPractices:{preparation:["Include accessibility expert as core sprint team member","Pre-sprint accessibility constraint definition","Set up accessible prototyping tools and environments","Define accessibility success criteria for sprint","Recruit diverse user testing participants in advance"],execution:["Daily accessibility checkpoint reviews","Prototype with accessibility features from day one","Use accessible design components and patterns","Include assistive technology testing in daily validation","Document accessibility decisions in real-time"],analysis:["Validate prototype with diverse users including disability community","Test with multiple assistive technologies","Analyze accessibility alongside usability metrics","Document accessibility insights and improvements needed","Plan post-sprint accessibility iteration cycles"],deliverables:["Accessible prototype with WCAG 2.1 baseline compliance","Accessibility testing report with user feedback","Design system components with accessibility specifications","Implementation roadmap including accessibility requirements","Sprint retrospective including accessibility learnings"]},accessibilityProtocols:{inclusiveDesign:["Design for keyboard navigation from wireframe stage","Include screen reader compatibility in all design decisions","Consider cognitive accessibility in all user flow designs","Apply inclusive color and contrast standards throughout","Design mobile-first with accessibility considerations"],accessibilityGuidelines:["WCAG 2.1 A compliance minimum for sprint prototype","Platform accessibility guidelines adherence","Assistive technology compatibility verification","Color blindness and low vision accommodation","Motor accessibility considerations for all interactions"],diversityConsiderations:["Include diverse sprint team members from different backgrounds","Consider cultural differences in interaction patterns","Test with users across age, ability, and technology familiarity","Account for different device capabilities and internet speeds","Include non-English speaking users in testing when relevant"],ethicalGuidelines:["Ensure rapid decisions don't compromise accessibility standards","Include accessibility cost-benefit in all sprint decisions","Consider long-term accessibility maintenance in sprint outcomes","Respect participant accessibility needs in user testing","Document ethical accessibility decision-making process"]},qualityAssurance:{validationCriteria:["Prototype tested with assistive technologies","User testing includes diverse ability representation","Accessibility features validated through multiple testing methods","Sprint outcomes meet predefined accessibility criteria","Solution demonstrates clear accessibility improvement potential"],successMetrics:["Sprint completion within 5 days with accessibility milestones","Prototype achieves WCAG 2.1 A compliance minimum","User testing satisfaction 4.0/5.0 across diverse participants","Accessibility feature validation rate 90%","Team accessibility competency increase measurable post-sprint"],commonPitfalls:["Treating accessibility as post-sprint addition","Not including accessibility expert in core sprint team","Using inaccessible prototyping tools that limit final outcome","Rushing user testing without proper accessibility accommodations","Not planning for post-sprint accessibility iteration"],qualityChecklist:[" Accessibility expert included in sprint team from day one"," Accessible prototyping tools and methods used throughout"," Daily accessibility validation completed"," Diverse user testing participants recruited and accommodated"," Prototype demonstrates baseline accessibility compliance"," Post-sprint accessibility roadmap defined"," Sprint learnings include accessibility insights"]}},comprehensiveInstructions:{overview:"Design Sprint is a rapid 5-day process for answering critical business questions through design, prototyping, and user testing. This enhanced version integrates accessibility expertise and inclusive design practices to ensure rapid innovation doesn't compromise accessibility standards.",whenToUse:["Urgent business questions requiring rapid accessible solution validation","New product or feature concepts needing accessibility baseline","Team alignment needed on accessible design approach","Limited time available but accessibility cannot be compromised","Innovation challenges where inclusive design is competitive advantage","Proof-of-concept development with accessibility requirements"],whenNotToUse:["Problems requiring extensive user research before solution development","Highly technical implementation with complex accessibility requirements","Situations where team cannot commit to full 5-day intensive process","Projects where accessibility expertise is not available","Complex enterprise solutions requiring extensive stakeholder alignment"],prerequisites:["Leadership support for rapid accessible innovation","Accessibility expert available for full sprint duration","Diverse user testing participants pre-recruited","Accessible prototyping tools and environments ready","Clear business question focused on accessible solution","Team commitment to intensive 5-day process with accessibility focus"],expectedOutcomes:["Validated accessible prototype with user feedback","Clear direction on accessible solution feasibility","Team alignment on accessible design approach","Rapid learning about user needs including accessibility requirements","Foundation for accessible implementation roadmap","Demonstrated organizational capability for accessible rapid innovation"],timeInvestment:"5 intensive days with accessibility validation integrated throughout",teamComposition:["Sprint Facilitator experienced in accessible design sprints","Product/Business Decision Maker committed to accessibility","Accessibility Expert as core team member","Designer with accessible design system expertise","Developer familiar with accessible implementation","User Researcher skilled in accessible testing methods","Subject Matter Expert with inclusive domain knowledge"]}},Oye={"double-diamond-enhanced":Mye,"design-sprint-enhanced":Rye};class Qye{constructor(){Je(this,"enhancedFrameworks");Je(this,"frameworkMappings");this.enhancedFrameworks=new Map,this.frameworkMappings=new Map,this.initializeFrameworks()}initializeFrameworks(){Object.entries(wL.frameworks).forEach(([t,n])=>{this.enhancedFrameworks.set(t,n)}),Object.entries(Oye).forEach(([t,n])=>{this.enhancedFrameworks.set(t,n)}),this.frameworkMappings.set("design-thinking","design-thinking-enhanced"),this.frameworkMappings.set("double-diamond","double-diamond-enhanced"),this.frameworkMappings.set("design-sprint","design-sprint-enhanced")}getEnhancedFramework(t){let n=this.enhancedFrameworks.get(t);if(!n&&this.frameworkMappings.has(t)){const r=this.frameworkMappings.get(t);n=this.enhancedFrameworks.get(r)}return n||null}convertToLegacyFramework(t){return{id:t.id,name:t.name,description:t.description,color:t.color,characteristics:t.characteristics,stages:t.stages.map(n=>this.convertToLegacyStage(n))}}convertToLegacyStage(t){return{id:t.id,name:t.name,description:t.description,position:t.position,characteristics:t.characteristics,tools:t.tools.map(n=>this.convertToLegacyTool(n))}}convertToLegacyTool(t){return{id:t.id,name:t.name,description:t.description,category:t.category,icon:t.icon,characteristics:t.characteristics}}getFrameworkInstructions(t){const n=this.getEnhancedFramework(t);return(n==null?void 0:n.comprehensiveInstructions)||null}getFrameworkResearchBacking(t){const n=this.getEnhancedFramework(t);return(n==null?void 0:n.researchBacking)||null}getAccessibilityProtocols(t){const n=this.getEnhancedFramework(t);return(n==null?void 0:n.researchBacking.accessibilityProtocols)||null}generateEnhancedPromptContext(t,n,r,s={includeAccessibilityProtocols:!0,includeResearchBacking:!0,includeComprehensiveInstructions:!0,accessibilityLevel:"enhanced"}){const i=this.getEnhancedFramework(t);if(!i)return"";let o="";if(s.includeComprehensiveInstructions&&i.comprehensiveInstructions&&(o+=`## Framework Overview
${i.comprehensiveInstructions.overview}

`,o+=`## When to Use
${i.comprehensiveInstructions.whenToUse.map(c=>`- ${c}`).join(`
`)}

`,o+=`## Prerequisites
${i.comprehensiveInstructions.prerequisites.map(c=>`- ${c}`).join(`
`)}

`),s.includeResearchBacking&&i.researchBacking&&(o+=`## Methodology Foundation
`,o+=`### Foundational Theory
${i.researchBacking.methodology.foundationalTheory.map(c=>`- ${c}`).join(`
`)}

`,o+=`### Industry Standards
${i.researchBacking.methodology.industryStandards.map(c=>`- ${c}`).join(`
`)}

`),s.includeAccessibilityProtocols&&i.researchBacking.accessibilityProtocols){const c=i.researchBacking.accessibilityProtocols;o+=`## Accessibility Requirements
`,s.accessibilityLevel==="comprehensive"?(o+=`### Inclusive Design Principles
${c.inclusiveDesign.map(l=>`- ${l}`).join(`
`)}

`,o+=`### Accessibility Guidelines
${c.accessibilityGuidelines.map(l=>`- ${l}`).join(`
`)}

`,o+=`### Diversity Considerations
${c.diversityConsiderations.map(l=>`- ${l}`).join(`
`)}

`,o+=`### Ethical Guidelines
${c.ethicalGuidelines.map(l=>`- ${l}`).join(`
`)}

`):s.accessibilityLevel==="enhanced"?(o+=`### Key Accessibility Requirements
`,o+=`${c.accessibilityGuidelines.slice(0,3).map(l=>`- ${l}`).join(`
`)}

`,o+=`${c.inclusiveDesign.slice(0,2).map(l=>`- ${l}`).join(`
`)}

`):(o+=`### Basic Accessibility
`,o+=`- Follow WCAG 2.1 AA standards
`,o+=`- Include keyboard navigation
`,o+=`- Ensure proper color contrast

`)}return i.researchBacking.bestPractices&&(o+=`## Best Practices
`,o+=`### Preparation
${i.researchBacking.bestPractices.preparation.slice(0,3).map(c=>`- ${c}`).join(`
`)}

`,o+=`### Execution
${i.researchBacking.bestPractices.execution.slice(0,3).map(c=>`- ${c}`).join(`
`)}

`),o}getQualityAssuranceChecklist(t){const n=this.getEnhancedFramework(t);return(n==null?void 0:n.researchBacking.qualityAssurance.qualityChecklist)||[]}getSuccessMetrics(t){const n=this.getEnhancedFramework(t);return(n==null?void 0:n.researchBacking.qualityAssurance.successMetrics)||[]}getCommonPitfalls(t){const n=this.getEnhancedFramework(t);return(n==null?void 0:n.researchBacking.qualityAssurance.commonPitfalls)||[]}generateAccessibleToolGuidance(t){const n=wL.tools[t];if(!n)return this.generateBasicAccessibilityGuidance();let r=`## ${n.name}
`;return r+=`${n.comprehensiveGuidance.purpose}

`,r+=`### Accessibility Preparation
`,r+=`${n.comprehensiveGuidance.preparation.materials.filter(s=>s.toLowerCase().includes("accessible")||s.toLowerCase().includes("alternative")||s.toLowerCase().includes("format")).map(s=>`- ${s}`).join(`
`)}

`,r+=`### Inclusive Execution
`,r+=`${n.comprehensiveGuidance.execution.facilitationTips.map(s=>`- ${s}`).join(`
`)}

`,r+=`### Accessibility Validation
`,r+=`${n.researchBacking.qualityAssurance.qualityChecklist.map(s=>`${s}`).join(`
`)}

`,r}generateBasicAccessibilityGuidance(){return`## Accessibility Guidelines

### Preparation
- Ensure all materials are available in multiple formats
- Set up accessible meeting environments
- Recruit diverse participants including people with disabilities
- Test all technology with assistive devices

### Execution  
- Use inclusive language throughout
- Provide multiple ways to participate
- Allow extra time for responses and processing
- Document accessibility accommodations provided

### Validation
- Test outputs with assistive technologies
- Validate with diverse user groups
- Ensure WCAG 2.1 AA compliance where applicable
- Document accessibility considerations in deliverables`}getAllEnhancedFrameworks(){return Array.from(this.enhancedFrameworks.values())}hasEnhancedVersion(t){return this.getEnhancedFramework(t)!==null}}const i0=new Qye;class Hye{constructor(){Je(this,"contextCache",new Map);Je(this,"vectorSimilarityThreshold",.7);this.initializeProcessor()}initializeProcessor(){console.log("Enhanced Context Processor initialized")}async processContext(t,n,r,s,i=this.getDefaultOptions()){const o=this.generateCacheKey(t,n,r,s);if(this.contextCache.has(o))return this.contextCache.get(o);const c=await this.processKnowledgeBase(t.knowledgeBase,n,r,s,i),l=await this.processWorkflowContinuity(t.previousOutputs,t.workflowHistory,n,r,s,i),d=await this.processVariableEnhancement(t,n,r,s),u=await this.generateContextualInsights(c,l,t.projectContext),h=await this.generateRecommendedActions(u,n,r,s,t.userPreferences),A=await this.generateQualityCheckpoints(n,r,s,t.userPreferences),f=await this.synthesizeContext(c,l,d,u,h,t.projectContext,i),m={relevantKnowledge:c,workflowContinuity:l,enhancedVariables:d,contextualInsights:u,recommendedActions:h,qualityCheckpoints:A,synthesizedContext:f};return this.contextCache.set(o,m),m}async processKnowledgeBase(t,n,r,s,i){if(!t||t.length===0)return[];const o=[];for(const c of t.slice(0,i.maxKnowledgeEntries)){const l=await this.calculateRelevanceScore(c,n,r,s);if(l>=i.contextRelevanceThreshold){const d=await this.generateContextualTags(c,n,r,s),u=await this.extractInsights(c,n,r,s),h=await this.generateConnectionDescription(c,n,r,s);o.push({...c,relevanceScore:l,contextualTags:d,extractedInsights:u,connectionToCurrentTask:h})}}return o.sort((c,l)=>{if(i.prioritizeRecent){const h=c.relevanceScore*.7+this.getRecencyScore(c.created_at)*.3;return l.relevanceScore*.7+this.getRecencyScore(l.created_at)*.3-h}return l.relevanceScore-c.relevanceScore})}async processWorkflowContinuity(t,n,r,s,i,o){const c=this.filterPreviousStageOutputs(t,r,s),l=this.extractRelatedDecisions(n,r,s,i),d=await this.identifyWorkflowPatterns(n,r),u=await this.identifyUpcomingDependencies(r,s,i,n),h=await this.generateConsistencyChecks(c,r,s),A=await this.identifyIterationOpportunities(t,n,r,s,i);return{previousStageOutputs:c,relatedDecisions:l,identifiedPatterns:d,upcomingDependencies:u,consistencyChecks:h,iterationOpportunities:A}}async processVariableEnhancement(t,n,r,s){const i=this.extractBaseVariables(t),o=await this.generateContextualVariables(t,n,r,s),c=await this.generateSmartDefaults(t,n,r,s),l=await this.generateValidationRules(n,r,s);return{...i,...o,_smartDefaults:c,_validationRules:l,_contextMetadata:{framework:n.name,stage:r.name,tool:s.name,projectDomain:t.projectContext.domain,accessibilityLevel:t.userPreferences.accessibilityLevel,lastUpdate:new Date().toISOString()}}}async generateContextualInsights(t,n,r){const s=[];if(t.length>0){const i=t.flatMap(o=>o.extractedInsights).slice(0,5);s.push(...i.map(o=>` Knowledge: ${o}`))}return n.identifiedPatterns.length>0&&s.push(...n.identifiedPatterns.map(i=>` Pattern: ${i}`)),r.constraints.length>0&&s.push(` Constraints: Consider project constraints including ${r.constraints.slice(0,2).join(", ")}`),r.accessibility_requirements.length>0&&s.push(` Accessibility: Ensure compliance with ${r.accessibility_requirements.join(", ")}`),n.consistencyChecks.length>0&&s.push(...n.consistencyChecks.map(i=>` Consistency: ${i}`)),s.slice(0,10)}async generateRecommendedActions(t,n,r,s,i){const o=[];if(i0.hasEnhancedVersion(n.id)){const l=i0.getFrameworkResearchBacking(n.id);l&&o.push(...l.bestPractices.preparation.slice(0,2))}return i.accessibilityLevel==="comprehensive"&&(o.push("Conduct accessibility audit of current approach"),o.push("Include diverse user perspectives in validation")),i0.generateAccessibleToolGuidance(s.id)&&o.push("Apply enhanced tool guidance for inclusive outcomes"),t.some(l=>l.includes("Pattern"))&&o.push("Build on identified workflow patterns for consistency"),o.slice(0,8)}async generateQualityCheckpoints(t,n,r,s){const i=[],o=i0.getQualityAssuranceChecklist(t.id);return o.length>0&&i.push(...o.slice(0,5)),s.accessibilityLevel!=="basic"&&(i.push("Verify accessibility compliance at each step"),i.push("Test with assistive technologies"),i.push("Validate with diverse user groups")),i.push("Document decision rationale"),i.push("Review alignment with project goals"),i.push("Validate outputs with stakeholders"),i}async synthesizeContext(t,n,r,s,i,o,c){let l="";if(l+=`## Project Context
`,l+=`**Project:** ${o.name}
`,l+=`**Domain:** ${o.domain}
`,l+=`**Current Phase:** ${o.currentPhase}
`,l+=`**Target Audience:** ${o.targetAudience.join(", ")}
`,l+=`**Goals:** ${o.goals.slice(0,3).join(", ")}

`,t.length>0){l+=`## Relevant Knowledge Base
`;for(const d of t.slice(0,3))l+=`**${d.title}** (${d.relevanceScore.toFixed(2)} relevance)
`,l+=`${d.connectionToCurrentTask}
`,d.extractedInsights.length>0&&(l+=`Key insights: ${d.extractedInsights.slice(0,2).join(", ")}

`)}if(n.previousStageOutputs.length>0){l+=`## Previous Stage Outputs
`;for(const d of n.previousStageOutputs.slice(0,2))l+=`**${d.context.stage.name}:** ${d.content.substring(0,200)}...

`}return s.length>0&&(l+=`## Key Insights
`,s.slice(0,5).forEach(d=>{l+=`${d}
`}),l+=`
`),i.length>0&&(l+=`## Recommended Actions
`,i.slice(0,5).forEach((d,u)=>{l+=`${u+1}. ${d}
`}),l+=`
`),o.accessibility_requirements.length>0&&(l+=`## Accessibility Requirements
`,l+=`${o.accessibility_requirements.join(`
`)}

`),o.constraints.length>0&&(l+=`## Project Constraints
`,l+=`${o.constraints.join(`
`)}

`),c.summarizeContext&&l.length>5e3&&(l=this.summarizeContext(l)),l}getDefaultOptions(){return{maxKnowledgeEntries:10,includePreviousOutputs:!0,includeWorkflowHistory:!0,includeResearchBacking:!0,contextRelevanceThreshold:.5,summarizeContext:!0,prioritizeRecent:!0}}generateCacheKey(t,n,r,s){const i=t.knowledgeBase.map(c=>c.id).join("|"),o=t.previousOutputs.map(c=>c.id).join("|");return`${n.id}-${r.id}-${s.id}-${i}-${o}`}async calculateRelevanceScore(t,n,r,s){let i=0;const o=[n.name,r.name,s.name,s.category].map(d=>d.toLowerCase()),c=`${t.title} ${t.content}`.toLowerCase();return o.forEach(d=>{c.includes(d)&&(i+=.25)}),t.metadata&&t.metadata.tags&&(Array.isArray(t.metadata.tags)?t.metadata.tags:[t.metadata.tags]).forEach(u=>{o.some(h=>u.toLowerCase().includes(h))&&(i+=.1)}),(Date.now()-new Date(t.created_at).getTime())/(1e3*60*60*24)<7&&(i+=.1),Math.min(i,1)}async generateContextualTags(t,n,r,s){const i=[];return i.push(`framework:${n.id}`),i.push(`stage:${r.id}`),i.push(`tool:${s.id}`),i.push(`type:${t.type}`),i}async extractInsights(t,n,r,s){const i=[],c=t.content.split(/[.!?]+/).filter(l=>l.trim().length>20).filter(l=>{const d=l.toLowerCase();return[n.name,r.name,s.name].some(u=>d.includes(u.toLowerCase()))});return i.push(...c.slice(0,3).map(l=>l.trim())),i}async generateConnectionDescription(t,n,r,s){return`This knowledge entry relates to your current ${s.name} work in the ${r.name} stage of ${n.name}. It provides relevant context and insights that can inform your approach.`}getRecencyScore(t){const n=(Date.now()-new Date(t).getTime())/864e5;return Math.max(0,1-n/30)}filterPreviousStageOutputs(t,n,r){return t.filter(s=>s.context.framework.id===n.id&&s.context.stage.id!==r.id)}extractRelatedDecisions(t,n,r,s){return t.filter(i=>i.framework.id===n.id).flatMap(i=>i.decisions||[])}async identifyWorkflowPatterns(t,n){const r=[],s=new Map;return t.forEach(i=>{const o=s.get(i.tool.id)||0;s.set(i.tool.id,o+1)}),s.forEach((i,o)=>{i>2&&r.push(`Frequent use of ${o} suggests this is a key methodology for your project`)}),r}async identifyUpcomingDependencies(t,n,r,s){const i=[],o=t.stages.findIndex(c=>c.id===n.id);if(o<t.stages.length-1){const c=t.stages[o+1];i.push(`Next stage "${c.name}" will depend on outputs from current ${r.name} work`)}return i}async generateConsistencyChecks(t,n,r){const s=[];return t.length>0&&(s.push("Ensure current outputs align with previous stage findings"),s.push("Maintain consistent terminology and definitions"),s.push("Validate that user needs identified earlier are being addressed")),s}async identifyIterationOpportunities(t,n,r,s,i){const o=[];return t.filter(l=>l.context.framework.id===r.id).length>1&&o.push("Consider iterating on previous findings with new insights"),o}extractBaseVariables(t){return{projectName:t.projectContext.name,projectDomain:t.projectContext.domain,targetAudience:t.projectContext.targetAudience.join(", "),projectGoals:t.projectContext.goals.join(", "),timeline:t.projectContext.timeline,constraints:t.projectContext.constraints.join(", ")}}async generateContextualVariables(t,n,r,s){return{contextualBackground:`Working within ${n.name} framework, specifically in ${r.name} stage using ${s.name}`,accessibilityLevel:t.userPreferences.accessibilityLevel,industryFocus:t.userPreferences.industryFocus||t.projectContext.domain,outputDetailLevel:t.userPreferences.outputDetailLevel,stakeholderContext:t.projectContext.stakeholders.join(", ")}}async generateSmartDefaults(t,n,r,s){return{suggestedParticipants:this.suggestParticipants(r,s,t.projectContext),recommendedDuration:this.suggestDuration(s,t.userPreferences),suggestedDeliverables:this.suggestDeliverables(r,s)}}async generateValidationRules(t,n,r){return{requiredFields:["projectName","targetAudience"],minimumLength:{description:50,rationale:25},accessibilityRequirements:["keyboard navigation","screen reader compatibility"]}}suggestParticipants(t,n,r){const s=t.characteristics.participants,i=[];return r.accessibility_requirements.length>0&&i.push("accessibility specialist"),n.category==="Research"&&i.push("diverse user representatives"),[s,...i].join(", ")}suggestDuration(t,n){const r=t.characteristics.effort==="High"?"2-3 hours":"1-2 hours";return n.accessibilityLevel==="comprehensive"?`${r} (additional 30 minutes for accessibility review)`:r}suggestDeliverables(t,n){return`${t.characteristics.deliverables}, accessibility considerations document`}summarizeContext(t){return t.split("##").filter(s=>s.trim()).slice(0,5).map(s=>`##${s.split(`
`).filter(o=>o.trim()).slice(0,3).join(`
`)}`).join(`

`)+`

*Context has been summarized for brevity*`}clearCache(){this.contextCache.clear()}getProcessingStats(){return{cacheSize:this.contextCache.size,cacheHitRate:0}}}const bL=new Hye;class $ye{constructor(){Je(this,"activeSessions",new Map);Je(this,"stageTransitions",new Map);Je(this,"carryForwardItems",new Map);this.initializeManager()}initializeManager(){console.log("Workflow Continuity Manager initialized")}async startWorkflowSession(t,n,r){const s={id:this.generateSessionId(),projectId:t,frameworkId:n,startedAt:new Date,lastActivityAt:new Date,status:"active",metadata:r};return await this.saveSession(s),this.activeSessions.set(s.id,s),s}async transitionToStage(t,n,r,s=[]){const i=await this.getSession(t);if(!i)throw new Error("Session not found");const o=i.currentStageId||null,c=await this.extractInsights(r),l=await this.generateCarryForwardItems(r,s,n),d={id:this.generateTransitionId(),sessionId:t,fromStageId:o,toStageId:n,transitionedAt:new Date,outputs:r,decisions:s,insights:c,carryForwardItems:l,validationStatus:"pending"};i.currentStageId=n,i.lastActivityAt=new Date;const u=this.stageTransitions.get(t)||[];u.push(d),this.stageTransitions.set(t,u);const h=this.carryForwardItems.get(t)||[];return this.carryForwardItems.set(t,[...h,...l]),await this.saveTransition(d),await this.saveSession(i),d}async getWorkflowContinuity(t,n,r){const s=await this.getSession(t);if(!s)throw new Error("Session not found");const i=this.stageTransitions.get(t)||[],o=this.getRelevantCarryForwardItems(t,n),c=this.getPreviousStageOutputs(i,n),l=this.getRelevantDecisions(i,n),d=await this.generateConsistencyChecks(c,n),u=await this.generateNextSteps(s,n,r,c),h=await this.generateContextualConnections(c,n);return{session:s,previousStageOutputs:c,relevantDecisions:l,carryForwardItems:o,consistencyChecks:d,suggestedNextSteps:u,contextualConnections:h}}async recordDecision(t,n){const r={id:this.generateDecisionId(),timestamp:new Date,...n};return await this.saveDecision(t,r),r}async addCarryForwardItem(t,n){const r={id:this.generateCarryForwardId(),...n},s=this.carryForwardItems.get(t)||[];return s.push(r),this.carryForwardItems.set(t,s),await this.saveCarryForwardItem(t,r),r}async updateCarryForwardItem(t,n,r){const s=this.carryForwardItems.get(t)||[],i=s.findIndex(c=>c.id===n);if(i===-1)return null;const o={...s[i],...r};return s[i]=o,this.carryForwardItems.set(t,s),await this.updateCarryForwardItemInDB(t,o),o}async validateStageTransition(t,n,r,s){const o=(this.stageTransitions.get(t)||[]).find(c=>c.id===n);o&&(o.validationStatus="validated",await this.saveTransition(o))}async getSessionAnalytics(t){const n=await this.getSession(t),r=this.stageTransitions.get(t)||[],s=this.carryForwardItems.get(t)||[],i=n?Date.now()-n.startedAt.getTime():0,o=r.length,c=r.reduce((f,m)=>f+m.decisions.length,0),l=r.reduce((f,m)=>f+m.outputs.length,0),d=s.filter(f=>f.status==="active").length,u=s.length,h=s.filter(f=>f.status==="resolved").length,A=u>0?h/u*100:100;return{duration:i,stagesCompleted:o,decisionsCount:c,outputsGenerated:l,carryForwardItemsActive:d,consistencyScore:A}}async extractInsights(t){const n=[];return t.forEach(r=>{const s=r.content.split(/[.!?]+/).filter(c=>c.trim().length>30),i=["insight","finding","discovered","learned","important","key","significant"],o=s.filter(c=>i.some(l=>c.toLowerCase().includes(l)));n.push(...o.slice(0,2))}),n}async generateCarryForwardItems(t,n,r){const s=[];return t.forEach(i=>{const o=["constraint","limitation","requirement","must","cannot"];i.content.split(/[.!?]+/).forEach(l=>{o.forEach(d=>{l.toLowerCase().includes(d)&&l.length>20&&s.push({id:this.generateCarryForwardId(),type:l.includes("requirement")?"requirement":"constraint",content:l.trim(),source:`${i.context.stage.name} - ${i.context.tool.name}`,targetStages:[r],priority:"medium",status:"active",validation:{validated:!1,validatedBy:[]}})})})}),n.forEach(i=>{(i.impact==="high"||i.impact==="medium")&&s.push({id:this.generateCarryForwardId(),type:"requirement",content:`Decision: ${i.decision}. Rationale: ${i.rationale}`,source:"Decision Record",targetStages:[r],priority:i.impact==="high"?"high":"medium",status:"active",validation:{validated:!0,validatedBy:i.stakeholders,validatedAt:i.timestamp}})}),s}getRelevantCarryForwardItems(t,n){return(this.carryForwardItems.get(t)||[]).filter(s=>s.status==="active"&&(s.targetStages.includes(n)||s.targetStages.includes("all")))}getPreviousStageOutputs(t,n){return t.filter(r=>r.toStageId!==n).flatMap(r=>r.outputs).sort((r,s)=>s.timestamp-r.timestamp)}getRelevantDecisions(t,n){return t.flatMap(r=>r.decisions).filter(r=>r.followUpRequired||r.impact==="high").sort((r,s)=>s.timestamp.getTime()-r.timestamp.getTime())}async generateConsistencyChecks(t,n){const r=[],s=this.extractTerminology(t);return s.size>0&&s.forEach((i,o)=>{if(i.length>1){const c=[...new Set(i.map(l=>l.value))];c.length>1&&r.push({id:this.generateCheckId(),type:"terminology",description:`Inconsistent usage of term "${o}"`,currentValue:c[0],previousValues:i,status:"inconsistent",recommendation:`Standardize usage of "${o}" across all stages`})}}),r}async generateNextSteps(t,n,r,s){const i=[];return r.category==="Research"&&i.push({id:this.generateNextStepId(),description:"Synthesize research findings into actionable insights",rationale:"Research data needs to be analyzed and converted into design implications",dependencies:[],estimatedEffort:"medium",priority:"high",suggestedTools:["affinity-mapping","personas"],accessibility_considerations:["Ensure diverse participant representation in synthesis"]}),t.metadata.accessibilityFocus&&i.push({id:this.generateNextStepId(),description:"Conduct accessibility review of current outputs",rationale:"Accessibility focus requires regular checkpoint reviews",dependencies:[],estimatedEffort:"low",priority:"high",suggestedTools:["accessibility-audit"],accessibility_considerations:["Review with assistive technology users","Validate WCAG compliance"]}),i}async generateContextualConnections(t,n){const r=[];return t.forEach((s,i)=>{const o=Math.max(.3,1-i*.1);r.push({id:this.generateConnectionId(),fromOutput:s.id,toStage:n,connectionType:i===0?"dependency":"validation",description:`Output from ${s.context.stage.name} provides context for current stage work`,strength:o})}),r}extractTerminology(t){const n=new Map,r=["user","customer","stakeholder","requirement","constraint","goal"];return t.forEach(s=>{const i=s.content.toLowerCase();r.forEach(o=>{if(i.includes(o)){const c=n.get(o)||[];c.push({stageId:s.context.stage.id,value:o,timestamp:new Date(s.timestamp)}),n.set(o,c)}})}),n}async saveSession(t){try{const{error:n}=await rt.from("workflow_sessions").upsert({id:t.id,project_id:t.projectId,framework_id:t.frameworkId,started_at:t.startedAt.toISOString(),last_activity_at:t.lastActivityAt.toISOString(),current_stage_id:t.currentStageId,status:t.status,metadata:t.metadata});n&&console.error("Error saving session:",n)}catch(n){console.error("Error saving session:",n)}}async saveTransition(t){try{const{error:n}=await rt.from("workflow_transitions").upsert({id:t.id,session_id:t.sessionId,from_stage_id:t.fromStageId,to_stage_id:t.toStageId,transitioned_at:t.transitionedAt.toISOString(),outputs:t.outputs,decisions:t.decisions,insights:t.insights,carry_forward_items:t.carryForwardItems,validation_status:t.validationStatus});n&&console.error("Error saving transition:",n)}catch(n){console.error("Error saving transition:",n)}}async saveDecision(t,n){}async saveCarryForwardItem(t,n){}async updateCarryForwardItemInDB(t,n){}async getSession(t){const n=this.activeSessions.get(t);if(n)return n;try{const{data:r,error:s}=await rt.from("workflow_sessions").select("*").eq("id",t).single();if(s||!r)return null;const i={id:r.id,projectId:r.project_id,frameworkId:r.framework_id,startedAt:new Date(r.started_at),lastActivityAt:new Date(r.last_activity_at),currentStageId:r.current_stage_id,status:r.status,metadata:r.metadata};return this.activeSessions.set(t,i),i}catch(r){return console.error("Error loading session:",r),null}}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateTransitionId(){return`transition_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateDecisionId(){return`decision_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateCarryForwardId(){return`carryforward_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateCheckId(){return`check_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateNextStepId(){return`nextstep_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateConnectionId(){return`connection_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}const t1=new $ye;class zye{constructor(){Je(this,"variableCache",new Map);Je(this,"suggestionCache",new Map);this.initializeHandler()}initializeHandler(){console.log("Enhanced Variable Handler initialized")}async enhanceVariables(t,n){const r=[];for(const s of t){const i=this.generateCacheKey(s,n);if(this.variableCache.has(i)){r.push(this.variableCache.get(i));continue}const o=await this.enhanceSingleVariable(s,n);this.variableCache.set(i,o),r.push(o)}return r}async generateContextualSuggestions(t,n){const r=`suggestions_${t.id}_${n.framework.id}_${n.stage.id}`;if(this.suggestionCache.has(r))return this.suggestionCache.get(r);const s=[],i=await this.extractKnowledgeBasedSuggestions(t,n);s.push(...i);const o=await this.extractOutputBasedSuggestions(t,n);s.push(...o);const c=await this.generateContextBasedSuggestions(t,n);s.push(...c);const l=await this.generateAccessibilitySuggestions(t,n);s.push(...l);const d=[...new Set(s)].slice(0,8);return this.suggestionCache.set(r,d),d}async validateVariables(t,n,r){const s=new Map;for(const i of n){const o=t[i.id],c=await this.validateSingleVariable(i,o,t,r);s.set(i.id,c)}return s}async processTemplate(t,n,r,s){const i=new Map,o=[],c=[],l=[];let d=t;for(const h of r){const A=h.id,f=n[A];if(f!=null&&f!==""){const m=await this.processVariableValue(f,h,s),g=new RegExp(`\\{\\{${A}\\}\\}`,"g");d=d.replace(g,m),i.set(A,m),h.contextualSuggestions.length>0&&c.push(`${h.name}: Consider ${h.contextualSuggestions[0]}`),h.accessibility.requirements.length>0&&l.push(`${h.name}: ${h.accessibility.requirements[0]}`)}else if(h.required)o.push(A);else if(h.smartDefaults.confidence>.7){const m=h.smartDefaults.value,g=new RegExp(`\\{\\{${A}\\}\\}`,"g");d=d.replace(g,m),i.set(A,m),c.push(`${h.name}: Used smart default - ${h.smartDefaults.rationale}`)}else o.push(A)}const u=this.calculateQualityScore(t,d,i,o,l);return{originalTemplate:t,processedTemplate:d,variableMappings:i,unresolvedVariables:o,contextualEnhancements:c,accessibilityEnhancements:l,qualityScore:u}}async generateSmartDefaults(t,n){let r="",s=0,i="No context available for smart default";const o=await this.extractKnowledgeDefault(t,n);o.confidence>s&&(r=o.value,s=o.confidence,i=o.rationale);const c=await this.extractOutputDefault(t,n);c.confidence>s&&(r=c.value,s=c.confidence,i=c.rationale);const l=await this.extractProjectDefault(t,n);l.confidence>s&&(r=l.value,s=l.confidence,i=l.rationale);const d=await this.extractFrameworkDefault(t,n);return d.confidence>s&&(r=d.value,s=d.confidence,i=d.rationale),{value:r,confidence:s,rationale:i}}async enhanceSingleVariable(t,n){const r=await this.generateContextualSuggestions(t,n),s=await this.generateSmartDefaults(t,n),i=await this.generateValidationRules(t,n),o=await this.generateDependencies(t,n),c=await this.generateAccessibilityInfo(t,n),l=await this.generateKnowledgeConnections(t,n);return{...t,contextualSuggestions:r,smartDefaults:s,validationRules:i,dependencies:o,accessibility:c,knowledgeConnections:l}}async extractKnowledgeBasedSuggestions(t,n){const r=[];for(const s of n.knowledgeBase){const i=s.content.toLowerCase(),o=t.name.toLowerCase();if(i.includes(o)||t.description.toLowerCase().split(" ").some(c=>i.includes(c))){const l=s.content.split(/[.!?]+/).filter(d=>d.toLowerCase().includes(o)||t.description.toLowerCase().split(" ").some(u=>d.toLowerCase().includes(u)&&u.length>3));r.push(...l.slice(0,2))}}return r.slice(0,3)}async extractOutputBasedSuggestions(t,n){const r=[];for(const s of n.previousOutputs){const i=new RegExp(`${t.name}[:\\s]*([^.!?\\n]+)`,"gi"),o=s.content.match(i);o&&r.push(...o.slice(0,2))}return r.slice(0,2)}async generateContextBasedSuggestions(t,n){const r=[];return(t.id==="target_audience"||t.name.toLowerCase().includes("audience"))&&r.push(...n.projectContext.targetAudience),(t.id==="project_goals"||t.name.toLowerCase().includes("goal"))&&r.push(...n.projectContext.goals),(t.id==="constraints"||t.name.toLowerCase().includes("constraint"))&&r.push(...n.projectContext.constraints),n.stage.id==="empathize"&&t.name.toLowerCase().includes("user")&&r.push("Focus on understanding user emotions and motivations"),n.stage.id==="define"&&t.name.toLowerCase().includes("problem")&&r.push("Frame the problem from the user perspective"),r}async generateAccessibilitySuggestions(t,n){const r=[];return n.userPreferences.accessibilityLevel!=="basic"&&((t.name.toLowerCase().includes("user")||t.name.toLowerCase().includes("participant"))&&(r.push("Include users with diverse abilities and disabilities"),r.push("Consider assistive technology users")),(t.name.toLowerCase().includes("method")||t.name.toLowerCase().includes("approach"))&&(r.push("Ensure method is accessible to all participants"),r.push("Provide multiple ways to participate"))),r}async validateSingleVariable(t,n,r,s){const i=[],o=[],c=[],l=[];for(const d of t.validationRules){const u=this.executeValidationRule(d,n,r);u.passed||(d.severity==="error"?i.push({ruleId:d.id,message:d.message,severity:"error",suggestion:u.suggestion}):d.severity==="warning"&&o.push({ruleId:d.id,message:d.message,severity:"warning",suggestion:u.suggestion}))}if(s.userPreferences.accessibilityLevel!=="basic"){const d=this.checkAccessibility(t,n,s);l.push(...d)}return n&&typeof n=="string"&&n.length<10&&c.push("Consider providing more detail for better AI prompt quality"),t.contextualSuggestions.length>0&&c.push(`Consider: ${t.contextualSuggestions[0]}`),{variableId:t.id,isValid:i.length===0,errors:i,warnings:o,suggestions:c,accessibilityIssues:l}}executeValidationRule(t,n,r){switch(t.type){case"required":return{passed:n!=null&&n!=="",suggestion:"This field is required for quality prompt generation"};case"min_length":return{passed:typeof n=="string"&&n.length>=t.value,suggestion:`Provide at least ${t.value} characters for better context`};case"max_length":return{passed:typeof n=="string"&&n.length<=t.value,suggestion:`Keep under ${t.value} characters for optimal processing`};case"pattern":const s=new RegExp(t.value);return{passed:typeof n=="string"&&s.test(n),suggestion:"Please match the expected format"};case"accessibility":return this.validateAccessibilityRule(t,n,r);default:return{passed:!0}}}validateAccessibilityRule(t,n,r){return t.value==="inclusive_language"?{passed:!["disabled","handicapped","normal user","able-bodied"].some(o=>typeof n=="string"&&n.toLowerCase().includes(o.toLowerCase())),suggestion:"Use person-first language and avoid ableist terminology"}:{passed:!0}}checkAccessibility(t,n,r){const s=[];return(!t.accessibility.label||t.accessibility.label.length<3)&&s.push({type:"missing_label",message:"Variable lacks clear accessibility label",recommendation:"Provide descriptive label for screen readers"}),(!t.accessibility.description||t.accessibility.description.length<10)&&s.push({type:"unclear_description",message:"Variable description insufficient for accessibility",recommendation:"Add detailed description for assistive technologies"}),s}async processVariableValue(t,n,r){let s=String(t);return n.type==="textarea"&&r.userPreferences.outputDetailLevel==="comprehensive"&&(s=`${s}

[Context: ${r.framework.name} - ${r.stage.name}]`),r.userPreferences.accessibilityLevel==="comprehensive"&&n.accessibility.requirements.length>0&&(s=`${s}

Accessibility considerations: ${n.accessibility.requirements.join(", ")}`),s}calculateQualityScore(t,n,r,s,i){const o=(t.match(/\{\{[^}]+\}\}/g)||[]).length,c=o-s.length,l=o>0?c/o:1,u=Array.from(r.values()).some(f=>typeof f=="string"&&f.length>20)?.8:.5,h=i.length>0?.9:.6,A=l*.4+u*.3+h*.3;return{completeness:l,clarity:u,accessibility:h,overall:A}}async extractKnowledgeDefault(t,n){for(const r of n.knowledgeBase){const s=this.findRelevantSentence(r.content,t);if(s)return{value:s,confidence:.6,rationale:`Extracted from knowledge base entry: ${r.title}`}}return{value:"",confidence:0,rationale:"No relevant knowledge found"}}async extractOutputDefault(t,n){for(const r of n.previousOutputs){const s=this.findRelevantContent(r.content,t);if(s)return{value:s,confidence:.7,rationale:`Based on previous ${r.context.stage.name} output`}}return{value:"",confidence:0,rationale:"No relevant previous outputs"}}async extractProjectDefault(t,n){return t.id==="target_audience"&&n.projectContext.targetAudience.length>0?{value:n.projectContext.targetAudience.join(", "),confidence:.9,rationale:"From project target audience definition"}:t.id==="project_goals"&&n.projectContext.goals.length>0?{value:n.projectContext.goals.join(", "),confidence:.9,rationale:"From project goals definition"}:{value:"",confidence:0,rationale:"No matching project context"}}async extractFrameworkDefault(t,n){return n.framework.id==="design-thinking"&&t.name.toLowerCase().includes("empathy")?{value:"Focus on understanding user emotions, needs, and context through direct observation and engagement",confidence:.8,rationale:"Design Thinking empathy stage best practice"}:{value:"",confidence:0,rationale:"No framework-specific default"}}generateCacheKey(t,n){return`${t.id}_${n.framework.id}_${n.stage.id}_${n.tool.id}`}findRelevantSentence(t,n){const s=t.split(/[.!?]+/).find(i=>i.toLowerCase().includes(n.name.toLowerCase())||n.description.toLowerCase().split(" ").some(o=>o.length>3&&i.toLowerCase().includes(o)));return s?s.trim():null}findRelevantContent(t,n){const s=t.split(`

`).find(i=>i.toLowerCase().includes(n.name.toLowerCase())||n.description.toLowerCase().split(" ").some(o=>o.length>3&&i.toLowerCase().includes(o)));return s?s.trim().substring(0,200):null}async generateValidationRules(t,n){const r=[];return t.required&&r.push({id:`${t.id}_required`,type:"required",value:!0,message:`${t.name} is required`,severity:"error",context:"Basic validation"}),(t.type==="text"||t.type==="textarea")&&r.push({id:`${t.id}_min_length`,type:"min_length",value:t.type==="textarea"?20:5,message:`${t.name} should be at least ${t.type==="textarea"?20:5} characters`,severity:"warning",context:"Quality assurance"}),n.userPreferences.accessibilityLevel!=="basic"&&r.push({id:`${t.id}_inclusive_language`,type:"accessibility",value:"inclusive_language",message:"Use inclusive, person-first language",severity:"warning",context:"Accessibility compliance"}),r}async generateDependencies(t,n){const r=[];return t.id==="participants"&&n.tool.category==="Research"&&r.push({dependsOn:"research_method",condition:'value !== ""',effect:"required",message:"Participants are required when research method is specified"}),r}async generateAccessibilityInfo(t,n){return{label:t.name,description:t.description,requirements:n.userPreferences.accessibilityLevel==="comprehensive"?["Consider diverse user abilities","Use inclusive language","Ensure clear instructions"]:[],examples:[`Example for ${t.name}: [context-appropriate example]`]}}async generateKnowledgeConnections(t,n){const r=[];for(const s of n.knowledgeBase){const i=this.calculateKnowledgeRelevance(s,t);if(i>.5){const o=this.findRelevantSentence(s.content,t)||"";r.push({knowledgeEntryId:s.id,relevanceScore:i,extractedValue:o,confidence:i*.8,context:`From ${s.title}`})}}return r.slice(0,3)}calculateKnowledgeRelevance(t,n){const r=t.content.toLowerCase(),s=n.name.toLowerCase(),i=n.description.toLowerCase().split(" ").filter(c=>c.length>3);let o=0;return r.includes(s)&&(o+=.5),i.forEach(c=>{r.includes(c)&&(o+=.1)}),Math.min(o,1)}clearCaches(){this.variableCache.clear(),this.suggestionCache.clear()}}const S2=new zye,pa=cf((e,t)=>({entries:[],isLoading:!1,error:null,fetchEntries:async n=>{e({isLoading:!0,error:null});try{const{data:r,error:s}=await rt.from("knowledge_base").select("*").eq("project_id",n).order("created_at",{ascending:!1});if(s)throw s;e({entries:r||[],isLoading:!1})}catch(r){console.error("Error fetching knowledge entries:",r),e({error:r instanceof Error?r.message:"Failed to fetch knowledge entries",isLoading:!1})}},addTextEntry:async(n,r,s)=>{e({isLoading:!0,error:null});try{const{data:i,error:o}=await rt.from("knowledge_base").insert({project_id:n,title:r,content:s,type:"text",metadata:{}}).select().single();if(o)throw o;const c=i;return e(l=>({entries:[c,...l.entries],isLoading:!1})),console.log("Successfully added text entry:",c),c}catch(i){throw console.error("Error adding text entry:",i),e({error:i instanceof Error?i.message:"Failed to add text entry",isLoading:!1}),i}},uploadFile:async(n,r,s)=>{e({isLoading:!0,error:null});try{const{data:{user:i}}=await rt.auth.getUser();if(!i)throw new Error("User not authenticated");const o=`${Date.now()}_${r.name}`,c=`${i.id}/${o}`,{data:l,error:d}=await rt.storage.from("knowledge-base").upload(c,r);if(d)throw d;const{data:{publicUrl:u}}=rt.storage.from("knowledge-base").getPublicUrl(c),h=r.type.startsWith("image/"),A=["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","text/markdown"].includes(r.type);if(!h&&!A)throw new Error("Unsupported file type. Please upload images (jpg, png, jpeg) or documents (pdf, docx, txt, md).");const f=h?"process-image":"process-document",{data:m,error:g}=await rt.functions.invoke(f,{body:{fileUrl:u,storagePath:c,fileName:r.name,projectId:n,title:s||r.name}});if(g)throw g;if(!m.success)throw new Error(m.error||"Failed to process file");const b=m.knowledgeEntry;e(y=>({entries:[b,...y.entries],isLoading:!1}))}catch(i){console.error("Error uploading file:",i),e({error:i instanceof Error?i.message:"Failed to upload file",isLoading:!1})}},deleteEntry:async n=>{e({isLoading:!0,error:null});try{const{error:r}=await rt.from("knowledge_base").delete().eq("id",n);if(r)throw r;e(s=>({entries:s.entries.filter(i=>i.id!==n),isLoading:!1}))}catch(r){console.error("Error deleting entry:",r),e({error:r instanceof Error?r.message:"Failed to delete entry",isLoading:!1})}},updateEntry:async(n,r)=>{e({isLoading:!0,error:null});try{const{data:s,error:i}=await rt.from("knowledge_base").update(r).eq("id",n).select().single();if(i)throw i;const o=s;e(c=>({entries:c.entries.map(l=>l.id===n?o:l),isLoading:!1}))}catch(s){console.error("Error updating entry:",s),e({error:s instanceof Error?s.message:"Failed to update entry",isLoading:!1})}},clearError:()=>e({error:null})}));class Vye{constructor(){Je(this,"activeWorkflowSessions",new Map);Je(this,"contextCache",new Map);this.initializeService()}initializeService(){console.log("Enhanced Context Integration Service initialized")}async processIntegratedContext(t){const n=this.generateCacheKey(t);if(this.contextCache.has(n))return this.contextCache.get(n);try{const r=await this.gatherContextSources(t),s=await bL.processContext(r,t.framework,t.stage,t.tool,t.processingOptions),i=await this.getOrCreateWorkflowSession(t),o=await t1.getWorkflowContinuity(i,t.stage.id,t.tool),c=this.buildVariableContext(t,r),l=await S2.enhanceVariables(t.template.variables,c),d=await S2.processTemplate(t.template.template,t.userInputs,l,c),u=await this.synthesizeFinalPrompt(d,s,o,t),h=this.calculateQualityMetrics(s,o,d,t),{recommendations:A,warnings:f}=await this.generateRecommendationsAndWarnings(s,o,d,h,t),m={processedContext:s,workflowContinuity:o,enhancedVariables:l,processedTemplate:d,synthesizedPrompt:u,qualityMetrics:h,recommendations:A,warnings:f};return this.contextCache.set(n,m),m}catch(r){throw console.error("Error processing integrated context:",r),new Error(`Context processing failed: ${r instanceof Error?r.message:"Unknown error"}`)}}async recordWorkflowOutput(t,n,r=[],s){const i=this.activeWorkflowSessions.get(t);i&&(s&&await t1.transitionToStage(i,s,[n],r),this.clearProjectCache(t))}async getWorkflowAnalytics(t){const n=this.activeWorkflowSessions.get(t);return n?await t1.getSessionAnalytics(n):null}updateUserPreferences(t,n){this.clearProjectCache(t)}clearAllCaches(){this.contextCache.clear(),bL.clearCache(),S2.clearCaches()}async gatherContextSources(t){const n=pa.getState();await n.fetchEntries(t.projectId);const r=n.entries,s=ma.getState();await s.loadProjectPrompts(t.projectId);const i=s.prompts,o=i.map(l=>({id:l.id,timestamp:new Date(l.timestamp),framework:l.context.framework,stage:l.context.stage,tool:l.context.tool,variables:l.variables,output:l.content,conversation:l.conversation,insights:[],decisions:[]})),c={id:t.projectId,name:"Current Project",description:"Project description",domain:t.userPreferences.industryFocus||"general",targetAudience:[],constraints:[],goals:[],timeline:"ongoing",stakeholders:[],currentPhase:t.stage.name,accessibility_requirements:t.userPreferences.accessibilityLevel==="comprehensive"?["WCAG 2.1 AA compliance","Screen reader compatibility","Keyboard navigation"]:[]};return{knowledgeBase:r,previousOutputs:i,workflowHistory:o,projectContext:c,userPreferences:t.userPreferences}}async getOrCreateWorkflowSession(t){const n=this.activeWorkflowSessions.get(t.projectId);if(n)return n;const r=await t1.startWorkflowSession(t.projectId,t.framework.id,{participantCount:1,sessionType:"individual",qualityLevel:t.userPreferences.outputDetailLevel,accessibilityFocus:t.userPreferences.accessibilityLevel!=="basic"});return this.activeWorkflowSessions.set(t.projectId,r.id),r.id}buildVariableContext(t,n){return{framework:t.framework,stage:t.stage,tool:t.tool,projectContext:{domain:n.projectContext.domain,targetAudience:n.projectContext.targetAudience,constraints:n.projectContext.constraints,goals:n.projectContext.goals},knowledgeBase:n.knowledgeBase,previousOutputs:n.previousOutputs,userPreferences:t.userPreferences}}async synthesizeFinalPrompt(t,n,r,s){let i=t.processedTemplate;const c=["personas","empathy-maps","problem-statements","journey-maps","wireframes","affinity-mapping","job-statements","outcome-statements"].includes(s.tool.id);if(!c&&s.userPreferences.includeResearchBacking){const l=i0.generateEnhancedPromptContext(s.framework.id,s.stage.id,s.tool.id,{includeAccessibilityProtocols:s.userPreferences.accessibilityLevel!=="basic",includeResearchBacking:!0,includeComprehensiveInstructions:s.userPreferences.outputDetailLevel==="comprehensive",accessibilityLevel:s.userPreferences.accessibilityLevel});l&&(i=`${l}

## Task
${i}`)}if(!c){if(n.synthesizedContext&&(i=`${n.synthesizedContext}

## Generated Prompt
${i}`),r.previousStageOutputs.length>0){const l=`

## Previous Stage Context
`,u=r.previousStageOutputs.slice(0,2).map(h=>`**${h.context.stage.name}:** ${h.content.substring(0,200)}...`).join(`
`);i=`${i}${l}${u}`}if(n.contextualInsights.length>0){const l=`

## Key Insights
${n.contextualInsights.slice(0,5).join(`
`)}`;i=`${i}${l}`}if(n.recommendedActions.length>0){const l=`

## Recommended Actions
${n.recommendedActions.slice(0,3).map((d,u)=>`${u+1}. ${d}`).join(`
`)}`;i=`${i}${l}`}if(n.qualityCheckpoints.length>0){const l=`

## Quality Checkpoints
${n.qualityCheckpoints.slice(0,3).map(d=>` ${d}`).join(`
`)}`;i=`${i}${l}`}}return c||(s.userPreferences.communicationStyle==="conversational"?i=`Hey there! Let's work together on this UX challenge.

${i}`:s.userPreferences.communicationStyle==="formal"&&(i=`Please provide a comprehensive response to the following UX methodology request:

${i}`)),i}calculateQualityMetrics(t,n,r,s){const i=Math.min(t.relevantKnowledge.length/5,1),o=Math.min(t.contextualInsights.length/5,1),c=(i+o)/2,l=r.qualityScore.completeness,d=n.consistencyChecks.filter(x=>x.status==="consistent").length,u=n.consistencyChecks.length,h=u>0?d/u:1,A=r.qualityScore.accessibility,f=c*.25+l*.25+h*.25+A*.25,m=t.relevantKnowledge.length>0,g=n.previousStageOutputs.length>0,b=r.unresolvedVariables.length===0,y=[m,g,b],j=y.filter(Boolean).length/y.length;return{contextRichness:c,variableCompleteness:l,workflowConsistency:h,accessibilityCompliance:A,overallQuality:f,confidenceScore:j}}async generateRecommendationsAndWarnings(t,n,r,s,i){const o=[],c=[];return s.contextRichness<.5&&o.push("Consider adding more knowledge base entries to provide richer context"),s.variableCompleteness<.8&&o.push("Complete all required variables for optimal prompt quality"),s.accessibilityCompliance<.7&&i.userPreferences.accessibilityLevel!=="basic"&&o.push("Review accessibility considerations for inclusive outcomes"),n.consistencyChecks.some(l=>l.status==="inconsistent")&&c.push("Inconsistencies detected with previous stage outputs - review for alignment"),n.carryForwardItems.filter(l=>l.status==="active").length>5&&o.push("Consider resolving some carry-forward items to maintain workflow clarity"),r.unresolvedVariables.length>0&&c.push(`Unresolved variables: ${r.unresolvedVariables.join(", ")}`),t.recommendedActions.length>0&&o.push(`Consider: ${t.recommendedActions[0]}`),{recommendations:o,warnings:c}}generateCacheKey(t){const n=JSON.stringify(t.userInputs),r=JSON.stringify(t.userPreferences);return`${t.projectId}_${t.framework.id}_${t.stage.id}_${t.tool.id}_${n}_${r}`}clearProjectCache(t){Array.from(this.contextCache.keys()).forEach(n=>{n.startsWith(t)&&this.contextCache.delete(n)})}}const XN=new Vye;class gk{buildBasePrompt(t){return`
DESTINATION: ${t.destination}${t.aiProvider?` (${t.aiProvider})`:""}
USER INTENT: ${t.userIntent}

ORIGINAL PROMPT CONTEXT:
${t.originalPrompt}

${t.metadata?`
METADATA:
- Framework: ${t.metadata.framework||"Not specified"}
- Stage: ${t.metadata.stage||"Not specified"}  
- Tool: ${t.metadata.tool||"Not specified"}
- Industry: ${t.metadata.industry||"General"}
- Team Size: ${t.metadata.teamSize||"Not specified"}
- Experience Level: ${t.metadata.experience||"intermediate"}
- Time Constraints: ${t.metadata.timeConstraints||"standard"}
`:""}

${t.variables&&Object.keys(t.variables).length>0?`
VARIABLES PROVIDED:
${Object.entries(t.variables).map(([n,r])=>`- ${n}: ${r}`).join(`
`)}
`:""}`}addQualityGuards(t){return t+`

QUALITY GUARDS:
- If the user input is too short or ambiguous, infer reasonable defaults and clearly mark them as [INFERRED]
- Include validation checks for key assumptions
- Provide fallbacks for ambiguous inputs
- Ensure all outputs are structured and ready for downstream use
- Flag any risks or missing information that could impact quality

VALIDATION REQUIREMENTS:
- All outputs must be well-structured and actionable
- Include metadata about assumptions, risks, and evidence requirements
- Provide clear next steps where applicable
- Ensure content is appropriate for the target destination's workflow`}}class n1 extends Error{constructor(t,n,r){super(t),this.destination=n,this.validationErrors=r,this.name="DestinationTailoringError"}}function qye(e){return["AI Provider","Miro","FigJam","Figma"].includes(e)}function Kye(e){return{"AI Provider":"Structured AI response for analysis and insights",Miro:"Board-ready sticky notes and visual elements",FigJam:"Workshop-oriented brainstorming and collaboration",Figma:"UI-focused design blocks and components"}[e]}class Wye extends gk{constructor(){super(...arguments);Je(this,"destination","AI Provider")}tailorPrompt(n){const s=`${this.buildBasePrompt(n)}

TASK: Produce a structured analytical response optimized for ${n.aiProvider||"AI Provider"} consumption.

OUTPUT REQUIREMENTS:
1. SUMMARY: Concise restatement of user intent and key context (2-3 sentences)

2. STRUCTURED RESULT:
   - Organized sections with clear titles and priorities (high/medium/low)
   - Artifact list with specific deliverables and their priorities
   - Actionable insights ready for immediate use
   - Bullet points or numbered lists for easy consumption

3. NEXT STEPS: 
   - Clear, actionable checklist (3-7 items)
   - Prioritized by impact and feasibility
   - Include timeframes where relevant

4. VALIDATION METADATA:
   - Key assumptions made during analysis
   - Potential risks or limitations
   - Evidence needed to confirm/refute key points
   - Up to 5 clarifying questions if request was ambiguous

FORMAT: Structure your response as a comprehensive analysis that can be:
- Displayed directly in the application UI
- Passed to other systems for further processing  
- Used as input for decision-making

CONSTRAINTS:
- Be concise but thorough
- Focus on actionability over theory
- Include priority rankings for all recommendations
- Flag any inferences with [INFERRED] tags`;return this.addQualityGuards(s)}validateOutput(n){var i,o,c,l,d,u,h,A,f;const r=[];n.type!=="ai-provider"&&r.push('Output type must be "ai-provider"');const s=n;return(i=s.content)!=null&&i.summary||r.push("Missing required summary section"),(l=(c=(o=s.content)==null?void 0:o.structuredResult)==null?void 0:c.sections)!=null&&l.length||r.push("Missing structured result sections"),(h=(u=(d=s.content)==null?void 0:d.structuredResult)==null?void 0:u.nextSteps)!=null&&h.length||r.push("Missing next steps checklist"),(f=(A=s.content)==null?void 0:A.structuredResult)!=null&&f.validation||r.push("Missing validation metadata (assumptions, risks, evidence)"),{valid:r.length===0,errors:r}}getOutputTemplate(){return{type:"ai-provider",destination:"AI Provider",content:{summary:"",structuredResult:{sections:[],artifacts:[],nextSteps:[],validation:{assumptions:[],risks:[],evidenceRequired:[]}},metadata:{}}}}}class Gye extends gk{constructor(){super(...arguments);Je(this,"destination","Miro")}tailorPrompt(n){const s=`${this.buildBasePrompt(n)}

TASK: Create Miro board-ready content with sticky notes, text blocks, and shapes optimized for visual collaboration.

OUTPUT REQUIREMENTS:
1. BOARD SUMMARY: 2-3 sentence description of how to read and use the board

2. BOARD ITEMS:
   - STICKY NOTES: Key insights, tasks, or ideas (12 words each, one idea per sticky)
   - TEXT BLOCKS: Headers, instructions, or longer explanations  
   - SHAPES: Cluster labels, dividers, or grouping elements
   - Each item needs: type, concise text, theme tag, cluster assignment

3. CLUSTERS:
   - Logical groupings with clear names and descriptions
   - Suggested themes: Research, Persona, Pain-Point, Solution, Action, etc.
   - Map items to clusters for easy affinity mapping

4. LAYOUT HINTS:
   - Grid placement order (row-major: left-to-right, top-to-bottom)
   - Number of columns for optimal viewing
   - Spacing recommendations
   - Reading instructions for stakeholders

CONSTRAINTS:
- Sticky note text: Maximum 12 words, one clear idea each
- Maximum 100 items total (create "Deferred Items" list if needed)
- Include diverse themes for color coding
- Prioritize scanability and visual flow
- Consider remote collaboration needs

FORMAT: Output as structured list ready for board creation with positioning data.`;return this.addQualityGuards(s)}validateOutput(n){var i,o,c,l,d,u,h,A,f;const r=[];n.type!=="miro"&&r.push('Output type must be "miro"');const s=n;return(i=s.content)!=null&&i.boardSummary||r.push("Missing board summary"),(c=(o=s.content)==null?void 0:o.items)!=null&&c.length||r.push("Missing board items"),(d=(l=s.content)==null?void 0:l.items)==null||d.forEach((m,g)=>{m.type==="sticky"&&m.text.split(" ").length>12&&r.push(`Sticky note ${g} exceeds 12-word limit: "${m.text}"`)}),((h=(u=s.content)==null?void 0:u.items)==null?void 0:h.length)>100&&r.push("Too many items (max 100). Create deferred items list."),(f=(A=s.content)==null?void 0:A.layout)!=null&&f.columns||r.push("Missing layout column specification"),{valid:r.length===0,errors:r}}getOutputTemplate(){return{type:"miro",destination:"Miro",content:{boardSummary:"",items:[],clusters:[],layout:{columns:4,spacing:20,readingInstructions:""}}}}}class Yye extends gk{constructor(){super(...arguments);Je(this,"destination","FigJam")}tailorPrompt(n){const s=`${this.buildBasePrompt(n)}

TASK: Create FigJam workshop content optimized for collaborative brainstorming and facilitated sessions.

OUTPUT REQUIREMENTS:
1. WORKSHOP TITLE: Engaging, action-oriented session name

2. BRAINSTORMING ITEMS:
   - STICKY NOTES: Divergent ideas, "How might we..." statements (10 words each)
   - VARIED PERSPECTIVES: Multiple angles on the same challenge
   - AFFINITY MAPPING READY: Items with impact/effort ratings where applicable

3. FACILITATION SCRIPT:
   - Step-by-step instructions for 15-30 minute exercise
   - Timing for each activity
   - Materials needed
   - Warm-up activities or ice-breakers
   - Clear participant instructions

4. CLUSTERING FRAMEWORK:
   - Suggested affinity groupings with criteria
   - Impact vs. Effort mapping where relevant
   - Category labels for easy sorting
   - Instructions for participants on clustering

5. ASSUMPTIONS & CONTEXT:
   - Domain assumptions clearly marked
   - Required context for participants
   - Backup activities if primary approach fails

CONSTRAINTS:  
- Sticky text: Maximum 10 words, focus on generative thinking
- Emphasize divergent thinking over convergent analysis
- Include facilitation cues and timing
- Design for remote and in-person collaboration
- Provide clear participation guidelines

FORMAT: Ready-to-facilitate workshop with all materials and scripts included.`;return this.addQualityGuards(s)}validateOutput(n){var i,o,c,l,d,u,h,A,f;const r=[];n.type!=="figjam"&&r.push('Output type must be "figjam"');const s=n;return(i=s.content)!=null&&i.workshopTitle||r.push("Missing workshop title"),(c=(o=s.content)==null?void 0:o.items)!=null&&c.length||r.push("Missing workshop items"),(d=(l=s.content)==null?void 0:l.items)==null||d.forEach((m,g)=>{m.type==="sticky"&&m.text.split(" ").length>10&&r.push(`Sticky note ${g} exceeds 10-word limit: "${m.text}"`)}),(h=(u=s.content)==null?void 0:u.facilitationScript)!=null&&h.length||r.push("Missing facilitation script"),(f=(A=s.content)==null?void 0:A.clusters)!=null&&f.length||r.push("Missing clustering framework"),{valid:r.length===0,errors:r}}getOutputTemplate(){return{type:"figjam",destination:"FigJam",content:{workshopTitle:"",items:[],facilitationScript:[],clusters:[],assumptions:[]}}}}class Xye extends gk{constructor(){super(...arguments);Je(this,"destination","Figma")}tailorPrompt(n){const s=`${this.buildBasePrompt(n)}

TASK: Create Figma-ready UI design specifications with components, copy, and layout guidance.

OUTPUT REQUIREMENTS:
1. DESIGN SYSTEM CONTEXT: Brief description of design approach and style direction

2. UI BLOCKS/COMPONENTS:
   - COMPONENT TYPES: Hero, Card, Form Row, Navigation, Footer, Content Block, etc.
   - PURPOSE & DESCRIPTION: Clear functional description for each component
   - MICROCOPY: Button text, labels, helper text, placeholder content
   - SIZING SPECIFICATIONS: Preferred width/height, padding, spacing in pixels
   - PRIORITY RANKING: Implementation order and importance

3. LAYOUT RECOMMENDATIONS:
   - Column structure and responsive behavior
   - Spacing systems and grid alignment  
   - Component ordering and hierarchy
   - Auto-layout suggestions

4. CONTENT STYLE GUIDE:
   - Tone of voice and writing style
   - Reading level and accessibility requirements
   - Contrast requirements and label clarity
   - Alt text guidelines for images/icons

5. COPY BLOCKS:
   - Headlines, subheadings, body text
   - Call-to-action text options
   - Form labels and validation messages
   - Navigation and menu text

CONSTRAINTS:
- Focus on frames and text nodes (not sticky notes)
- Include specific pixel measurements for sizing
- Provide realistic copy that fits UI constraints
- Consider mobile and desktop responsive needs
- Include accessibility guidelines
- Handle research-only requests with appropriate UI reduction

FORMAT: Design-ready specifications that can be directly implemented in Figma components.`;return this.addQualityGuards(s)}validateOutput(n){var i,o,c,l,d,u,h,A;const r=[];n.type!=="figma"&&r.push('Output type must be "figma"');const s=n;return(i=s.content)!=null&&i.designSystem||r.push("Missing design system context"),(c=(o=s.content)==null?void 0:o.uiBlocks)!=null&&c.length||r.push("Missing UI blocks/components"),(d=(l=s.content)==null?void 0:l.uiBlocks)==null||d.forEach((f,m)=>{var g,b;(!((g=f.sizing)!=null&&g.preferredWidth)||!((b=f.sizing)!=null&&b.preferredHeight))&&r.push(`UI block ${m} missing sizing specifications`),(!f.copy||Object.keys(f.copy).length===0)&&r.push(`UI block ${m} missing copy specifications`)}),(u=s.content)!=null&&u.layout||r.push("Missing layout recommendations"),(A=(h=s.content)==null?void 0:h.contentStyle)!=null&&A.accessibility||r.push("Missing accessibility guidelines"),{valid:r.length===0,errors:r}}getOutputTemplate(){return{type:"figma",destination:"Figma",content:{designSystem:"",uiBlocks:[],layout:{columns:12,spacing:24,ordering:[]},contentStyle:{tone:"",readingLevel:"",accessibility:{contrastRequirements:"",labelClarity:[],altTextGuidelines:""}}}}}}function eV(e){switch(e){case"AI Provider":return new Wye;case"Miro":return new Gye;case"FigJam":return new Yye;case"Figma":return new Xye;default:throw new Error(`Unsupported destination: ${e}`)}}function Jye(e,t){return eV(t).validateOutput(e)}const _j=class _j{static getInstance(){return this.instance||(this.instance=new _j),this.instance}async tailorPromptForDestination(t){try{if(console.log(` Validating destination: '${t.context.destination}'`),console.log("Valid destinations: ['AI Provider', 'Miro', 'FigJam', 'Figma']"),!qye(t.context.destination))throw console.error(` Destination validation failed for: '${t.context.destination}'`),new n1(`Invalid destination: ${t.context.destination}`,t.context.destination);console.log(` Destination validation passed for: '${t.context.destination}'`);const n=eV(t.context.destination),r=n.tailorPrompt(t.context),s=n.getOutputTemplate();let i=[];t.enforceValidation&&(i=n.validateOutput(s).errors);const o=this.generateClarifyingQuestions(t.context);return{success:!0,tailoredPrompt:r,expectedOutput:s,validationErrors:i.length>0?i:void 0,clarifyingQuestions:o.length>0?o:void 0}}catch(n){throw console.error("Destination tailoring failed:",n),n instanceof n1?n:new n1(`Tailoring failed: ${n instanceof Error?n.message:"Unknown error"}`,t.context.destination)}}createContextFromPrompt(t,n,r,s){var i,o,c;return{destination:n,aiProvider:r,userIntent:s||`Generate insights for ${t.context.tool.name}`,originalPrompt:t.content,variables:t.variables,metadata:{framework:t.context.framework.name,stage:t.context.stage.name,tool:t.context.tool.name,industry:t.industry,teamSize:(i=t.context.enhancedContext)==null?void 0:i.teamSize,timeConstraints:(o=t.context.enhancedContext)==null?void 0:o.timeConstraints,experience:(c=t.context.enhancedContext)==null?void 0:c.experience}}}validateTailoredOutput(t,n,r=3){const s=Jye(t,n),i=["exceeds word limit","missing required section","incorrect format","validation failed"],o=r>0&&s.errors.some(c=>i.some(l=>c.toLowerCase().includes(l)));return{valid:s.valid,errors:s.errors,shouldRetry:o}}routeOutput(t){switch(t.type){case"ai-provider":return this.routeAIProviderOutput(t);case"miro":return this.routeMiroOutput(t);case"figjam":return this.routeFigJamOutput(t);case"figma":return this.routeFigmaOutput(t);default:throw new n1(`Unknown output type for routing: ${t.type}`,"AI Provider")}}getSupportedDestinations(){return["AI Provider","Miro","FigJam","Figma"]}getSupportedAIProviders(){return["ChatGPT","Claude","Gemini","DeepSeek","Other"]}requiresIntegration(t){return["Miro","FigJam","Figma"].includes(t)}async generateDeliveryPayload(t,n,r){console.log(" Starting payload generation from tailored output:",{hasOutput:!!t,outputType:t==null?void 0:t.type,hasContent:!!(t!=null&&t.content),contentType:typeof(t==null?void 0:t.content),contentKeys:t!=null&&t.content?Object.keys(t.content):[]});const s=this.normalizeToDeliveryItems(t);console.log(` Normalized ${s.length} delivery items from output`);const i=this.extractLayoutHints(t),o={id:`payload-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,destination:this.mapDestinationToDelivery(t.type),targetId:n,sourcePrompt:r,items:s,layoutHints:i,summary:this.generatePayloadSummary(t,s.length),itemCount:s.length,createdAt:new Date};return console.log(" Generated delivery payload:",{id:o.id,destination:o.destination,itemCount:o.itemCount,hasItems:o.items.length>0,summary:o.summary}),o}async validateDeliveryPayload(t){const n=[],r=[];switch((!t.items||t.items.length===0)&&n.push("Payload contains no items"),t.destination){case"miro":this.validateMiroPayload(t,n,r);break;case"figjam":this.validateFigJamPayload(t,n,r);break;case"figma":this.validateFigmaPayload(t,n,r);break}return{isValid:n.length===0,errors:n,warnings:r}}async optimizePayloadForDestination(t){let n=[...t.items];switch(t.destination){case"miro":n=this.optimizeForMiro(n);break;case"figjam":n=this.optimizeForFigJam(n);break;case"figma":n=this.optimizeForFigma(n);break}return{...t,items:n,itemCount:n.length,summary:this.generatePayloadSummary(t,n.length)}}generateClarifyingQuestions(t){var r,s,i,o,c;const n=[];return(!t.userIntent||t.userIntent.length<20)&&n.push("What specific outcome are you hoping to achieve?"),(r=t.metadata)!=null&&r.industry||n.push("What industry or domain is this for?"),(s=t.metadata)!=null&&s.teamSize||n.push("How large is your team or target audience?"),(!t.variables||Object.keys(t.variables).length===0)&&n.push("Are there any specific constraints or requirements we should consider?"),t.destination==="Miro"&&!((i=t.metadata)!=null&&i.teamSize)&&n.push("How many people will be collaborating on this Miro board?"),t.destination==="FigJam"&&!((o=t.metadata)!=null&&o.timeConstraints)&&n.push("How much time do you have for the workshop session?"),t.destination==="Figma"&&!((c=t.metadata)!=null&&c.experience)&&n.push("What is the technical expertise level of your target users?"),n.slice(0,5)}routeAIProviderOutput(t){const n=t;return{displayContent:`
# ${n.content.summary}

## Analysis Results
${n.content.structuredResult.sections.map(s=>`### ${s.title} (${s.priority})
${s.content}`).join(`

`)}

## Key Artifacts
${n.content.structuredResult.artifacts.map(s=>`- **${s.title}**: ${s.description} (Priority: ${s.priority})`).join(`
`)}

## Next Steps
${n.content.structuredResult.nextSteps.map((s,i)=>`${i+1}. ${s}`).join(`
`)}

## Validation Notes
**Assumptions**: ${n.content.structuredResult.validation.assumptions.join(", ")}
**Risks**: ${n.content.structuredResult.validation.risks.join(", ")}
**Evidence Required**: ${n.content.structuredResult.validation.evidenceRequired.join(", ")}
`,actionableData:n.content.structuredResult,integrationPayload:null}}routeMiroOutput(t){const n=t;return{displayContent:`
# Miro Board: ${n.content.boardSummary}

## Board Items (${n.content.items.length})
${n.content.items.map(s=>`- ${s.type.toUpperCase()}: "${s.text}" (${s.theme}, Cluster: ${s.cluster})`).join(`
`)}

## Clusters
${n.content.clusters.map(s=>`### ${s.name}
${s.description} (${s.itemIds.length} items)`).join(`

`)}

## Layout Instructions
- **Columns**: ${n.content.layout.columns}
- **Spacing**: ${n.content.layout.spacing}px
- **Reading**: ${n.content.layout.readingInstructions}
`,actionableData:n.content,integrationPayload:{type:"miro",items:n.content.items,clusters:n.content.clusters,layout:n.content.layout}}}routeFigJamOutput(t){const n=t;return{displayContent:`
# Workshop: ${n.content.workshopTitle}

## Facilitation Script
${n.content.facilitationScript.map(s=>`### Step ${s.step} (${s.duration})
${s.instruction}
*Materials: ${s.materials.join(", ")}*`).join(`

`)}

## Workshop Items (${n.content.items.length})
${n.content.items.map(s=>`- ${s.type.toUpperCase()}: "${s.text}" (${s.category})`).join(`
`)}

## Clustering Framework
${n.content.clusters.map(s=>`### ${s.name}
Criteria: ${s.criteria} (${s.itemIds.length} items)`).join(`

`)}

${n.content.assumptions.length>0?`
## Assumptions
${n.content.assumptions.map(s=>`- ${s}`).join(`
`)}
`:""}
`,actionableData:n.content,integrationPayload:{type:"figjam",workshopTitle:n.content.workshopTitle,items:n.content.items,script:n.content.facilitationScript,clusters:n.content.clusters}}}routeFigmaOutput(t){const n=t;return{displayContent:`
# Design System: ${n.content.designSystem}

## UI Components (${n.content.uiBlocks.length})
${n.content.uiBlocks.map(s=>`### ${s.title} (${s.type}, Priority: ${s.priority})
${s.description}
**Size**: ${s.sizing.preferredWidth}x${s.sizing.preferredHeight}px
**Copy**: ${Object.entries(s.copy).map(([i,o])=>`${i}: "${o}"`).join(", ")}`).join(`

`)}

## Layout Specifications
- **Columns**: ${n.content.layout.columns}
- **Spacing**: ${n.content.layout.spacing}px
- **Order**: ${n.content.layout.ordering.join("  ")}

## Content Style Guide
- **Tone**: ${n.content.contentStyle.tone}
- **Reading Level**: ${n.content.contentStyle.readingLevel}
- **Accessibility**: ${n.content.contentStyle.accessibility.contrastRequirements}
`,actionableData:n.content,integrationPayload:{type:"figma",designSystem:n.content.designSystem,components:n.content.uiBlocks,layout:n.content.layout,style:n.content.contentStyle}}}normalizeToDeliveryItems(t){var n,r;switch(console.log(` Normalizing ${t.type} output to delivery items:`,{outputType:t.type,hasContent:!!t.content,contentStructure:t.content?Object.keys(t.content):[],contentItems:(n=t.content)!=null&&n.items?`${t.content.items.length} items`:"no items property",contentUiBlocks:(r=t.content)!=null&&r.uiBlocks?`${t.content.uiBlocks.length} uiBlocks`:"no uiBlocks property",fullContent:t.content}),t.type){case"Miro":case"miro":return console.log(" Routing to Miro normalization"),this.normalizeMiroItems(t);case"FigJam":case"figjam":return console.log(" Routing to FigJam normalization"),this.normalizeFigJamItems(t);case"Figma":case"figma":return console.log(" Routing to Figma normalization"),this.normalizeFigmaItems(t);default:return console.error(` No normalization route found for output type: "${t.type}"`),console.log("Available routes: Miro, miro, FigJam, figjam, Figma, figma"),[]}}normalizeMiroItems(t){return t.content.items.map((n,r)=>{var s,i,o,c;return{id:n.id||`miro-item-${r}`,type:this.mapMiroType(n.type),text:n.text,x:((s=n.position)==null?void 0:s.x)||r%4*200+100,y:((i=n.position)==null?void 0:i.y)||Math.floor(r/4)*150+100,width:((o=n.size)==null?void 0:o.width)||180,height:((c=n.size)==null?void 0:c.height)||120,style:{backgroundColor:n.theme||"#FFE066",fontSize:14},clusterId:n.cluster}})}normalizeFigJamItems(t){var r,s,i,o,c,l,d,u,h;if(console.log(" Normalizing FigJam items:",{hasContent:!!t.content,contentKeys:t.content?Object.keys(t.content):[],hasItems:!!((r=t.content)!=null&&r.items),itemsCount:((i=(s=t.content)==null?void 0:s.items)==null?void 0:i.length)||0,itemsStructure:(c=(o=t.content)==null?void 0:o.items)==null?void 0:c.slice(0,2)}),t.content)for(const[A,f]of Object.entries(t.content))console.log(` Content property "${A}":`,{type:typeof f,isArray:Array.isArray(f),length:Array.isArray(f)?f.length:"not array",sample:Array.isArray(f)?f.slice(0,2):f});let n=[];if((l=t.content)!=null&&l.items&&t.content.items.length>0)n=t.content.items,console.log(" Using content.items");else if((d=t.content)!=null&&d.stickies&&t.content.stickies.length>0)n=t.content.stickies,console.log(" Using content.stickies");else if((u=t.content)!=null&&u.notes&&t.content.notes.length>0)n=t.content.notes,console.log(" Using content.notes");else if((h=t.content)!=null&&h.elements&&t.content.elements.length>0)n=t.content.elements,console.log(" Using content.elements");else for(const[A,f]of Object.entries(t.content||{}))if(Array.isArray(f)&&f.length>0){n=f,console.log(` Using content.${A} (found ${f.length} items)`);break}return n.length===0&&(console.warn(" FigJam output has no usable items to normalize"),console.log(" This likely means AI content generation returned empty arrays. Generating fallback demo content..."),n=[{id:"demo-1",type:"sticky",text:"Sample Insight: User needs better navigation",category:"insight"},{id:"demo-2",type:"sticky",text:"How might we improve user onboarding?",category:"hmw"},{id:"demo-3",type:"sticky",text:"Idea: Add interactive tutorial",category:"idea"},{id:"demo-4",type:"sticky",text:"Action: Prototype new flow",category:"action"},{id:"demo-5",type:"sticky",text:"Question: What metrics should we track?",category:"question"}],console.log(` Generated ${n.length} demo items for delivery testing`)),console.log(` Converting ${n.length} items to delivery format`),n.map((A,f)=>({id:A.id||`figjam-item-${f}`,type:this.mapFigJamType(A.type||"sticky"),text:A.text||A.content||A.description||`Item ${f+1}`,x:f%5*180+50,y:Math.floor(f/5)*140+50,width:160,height:100,style:{backgroundColor:this.getFigJamColor(A.category||A.type||"default"),fontSize:12},clusterId:A.category||A.cluster||A.group}))}normalizeFigmaItems(t){return t.content.uiBlocks.map((n,r)=>({id:n.id||`figma-block-${r}`,type:"frame",text:n.title,x:r%3*300+100,y:Math.floor(r/3)*200+100,width:n.sizing.preferredWidth||280,height:n.sizing.preferredHeight||180,style:{backgroundColor:"#FFFFFF",fontSize:16},metadata:{description:n.description,copy:n.copy,priority:n.priority}}))}extractLayoutHints(t){var n,r,s,i;switch(t.type){case"miro":const o=t;return{columns:((n=o.content.layout)==null?void 0:n.columns)||4,spacing:((r=o.content.layout)==null?void 0:r.spacing)||20,maxItems:50,arrangement:"clusters"};case"figjam":return{columns:5,spacing:20,maxItems:40,arrangement:"flow"};case"figma":const c=t;return{columns:((s=c.content.layout)==null?void 0:s.columns)||3,spacing:((i=c.content.layout)==null?void 0:i.spacing)||40,maxItems:20,arrangement:"grid"};default:return{columns:4,spacing:20,maxItems:30,arrangement:"grid"}}}mapDestinationToDelivery(t){switch(t){case"miro":return"miro";case"figjam":return"figjam";case"figma":return"figma";default:return"miro"}}generatePayloadSummary(t,n){var r;return(r=t.content)!=null&&r.summary?`${t.content.summary} (${n} items)`:`Generated ${n} items for delivery`}mapMiroType(t){switch(t){case"sticky_note":return"sticky";case"shape":return"shape";case"text":return"text";default:return"sticky"}}mapFigJamType(t){switch(t){case"sticky":return"sticky";case"text":return"text";case"instruction":return"text";default:return"sticky"}}getFigJamColor(t){return{idea:"#FFE066",hmw:"#FF6B66",insight:"#66D9FF",action:"#66FF66",question:"#FF9B66"}[t]||"#E6E6E6"}validateMiroPayload(t,n,r){t.items.length>50&&r.push("Large number of items may impact Miro board performance"),t.items.forEach((s,i)=>{s.text&&s.text.length>12*8&&r.push(`Item ${i}: Text exceeds Miro sticky note recommended length`)})}validateFigJamPayload(t,n,r){t.items.length>40&&r.push("Large number of items may clutter workshop interface"),t.items.some(i=>i.type==="text")||r.push("No facilitation instructions found - consider adding guidance text")}validateFigmaPayload(t,n,r){t.items.length>20&&r.push("Too many UI blocks may overwhelm the design system"),t.items.forEach((s,i)=>{var o;(o=s.metadata)!=null&&o.copy||r.push(`Item ${i}: Missing microcopy - important for UI components`)})}optimizeForMiro(t){return t.map(n=>({...n,text:n.text?this.truncateText(n.text,80):n.text,width:Math.min(n.width||180,200),height:Math.min(n.height||120,150)})).slice(0,50)}optimizeForFigJam(t){return t.map(n=>({...n,text:n.text?this.truncateText(n.text,100):n.text,width:Math.min(n.width||160,180),height:Math.min(n.height||100,120)})).slice(0,40)}optimizeForFigma(t){return t.map(n=>({...n,width:Math.max(n.width||280,200),height:Math.max(n.height||180,120)})).slice(0,20)}truncateText(t,n){return t.length<=n?t:t.substring(0,n-3)+"..."}};Je(_j,"instance");let c_=_j;const Ap=c_.getInstance(),MC={qualitySettings:{methodologyDepth:"intermediate",outputDetail:"comprehensive",timeConstraints:"standard",industryCompliance:!1,accessibilityFocus:!0},aiMethodSettings:{promptStructure:"framework-guided",creativityLevel:"balanced",reasoning:"step-by-step",adaptability:"context-aware",validation:"built-in",personalization:"user-preferences",temperature:.7,topP:.9,topK:50}};function Zye(e){const t={...MC.qualitySettings,...e},n=[];switch(n.push("- **Evidence-Based**: Every element must be backed by specific research findings from the Project Context"),t.methodologyDepth){case"basic":n.push("- **Clear & Simple**: Use straightforward explanations and avoid unnecessary jargon");break;case"intermediate":n.push("- **Balanced Detail**: Provide clear explanations with appropriate methodology context");break;case"advanced":n.push("- **Comprehensive Analysis**: Include detailed methodology, research citations, and advanced frameworks");break}switch(t.outputDetail){case"brief":n.push("- **Concise**: Focus on key insights and essential actionable recommendations only");break;case"moderate":n.push("- **Balanced**: Provide sufficient detail with clear structure and explanations");break;case"comprehensive":n.push("- **Thorough**: Include detailed analysis, examples, supporting documentation, and complete coverage");break}switch(t.timeConstraints){case"urgent":n.push("- **Rapid Delivery**: Prioritize speed while maintaining essential quality and actionable insights");break;case"standard":n.push("- **Balanced Approach**: Balance quality, depth, and efficiency appropriately");break;case"extended":n.push("- **Thorough Exploration**: Take time for deep analysis, multiple iterations, and comprehensive documentation");break}return t.industryCompliance&&n.push("- **Compliance-Aware**: Consider industry-specific regulations, standards, and compliance requirements"),t.accessibilityFocus&&n.push("- **Accessibility-First**: Prioritize WCAG guidelines, inclusive design principles, and universal usability"),n.push("- **Professional**: Use proper UX methodology, terminology, and industry best practices"),`## Quality Standards:
${n.join(`
`)}`}function e0e(e,t){const n={...MC.aiMethodSettings,...e},r=[];switch(n.promptStructure){case"framework-guided":r.push("Structure your response following established UX methodology frameworks. Use clear sections, systematic progression, and actionable insights.");break;case"open-ended":r.push("Provide a flexible, exploratory response that encourages creative thinking and multiple perspectives. Allow for innovation while maintaining structure.");break;case"structured-templates":r.push("Use a consistent, repeatable template format with predefined sections and standardized layouts for easy comparison and implementation.");break}switch(n.creativityLevel){case"conservative":r.push("Focus on proven, well-established approaches and industry best practices. Prioritize reliability and tested methods.");break;case"balanced":r.push("Balance proven methodologies with appropriate innovation. Include both established practices and thoughtful new approaches.");break;case"creative":r.push("Include innovative approaches and creative suggestions alongside proven methods. Encourage fresh perspectives and novel solutions.");break;case"experimental":r.push("Explore cutting-edge methods, experimental approaches, and forward-thinking solutions. Push boundaries while maintaining practicality.");break}switch(n.reasoning){case"step-by-step":r.push("Provide step-by-step explanations with clear reasoning and justification at each stage. Show your thinking process.");break;case"direct":r.push("Present direct, confident recommendations with concise justification. Focus on clarity and actionability.");break;case"exploratory":r.push("Explore multiple approaches, reasoning paths, and alternative perspectives. Present options with trade-offs.");break}switch(n.validation){case"comprehensive":r.push("Include comprehensive validation methods, testing criteria, quality assurance checks, and success metrics.");break;case"built-in":r.push("Incorporate validation checkpoints, quality indicators, and verification methods throughout.");break;case"basic":r.push("Include basic validation guidelines and quality checkpoints.");break}return(n.adaptability==="context-aware"||n.adaptability==="dynamic-learning")&&r.push("Adapt recommendations based on the specific project context, constraints, and user needs documented in the Project Context."),r.push("Use clear section headers, proper formatting, and professional presentation throughout."),`## Output Format:
${r.join(" ")}`}function t0e(e,t){let n=e;if(t!=null&&t.projectContext){const{targetAudience:r,primaryGoals:s,keyConstraints:i,successMetrics:o}=t.projectContext,c=[];r&&c.push(`- **Target Audience Focus**: ${r}`),s&&c.push(`- **Primary Goals**: ${s}`),i&&c.push(`- **Key Constraints**: ${i}`),o&&c.push(`- **Success Metrics**: ${o}`),c.length>0&&(n+=`

**Project Specifics to Prioritize:**
${c.join(`
`)}`)}return n}function l_(e){const t=[];if(t.push("# AI GENERATION PARAMETERS"),t.push(""),t.push("*These parameters influence how this prompt is structured and executed:*"),t.push(""),e!=null&&e.projectContext){const A=e.projectContext,f=[];A.primaryGoals&&f.push(`**Primary Goals:** ${A.primaryGoals}`),A.targetAudience&&f.push(`**Target Audience:** ${A.targetAudience}`),A.keyConstraints&&f.push(`**Key Constraints:** ${A.keyConstraints}`),A.successMetrics&&f.push(`**Success Metrics:** ${A.successMetrics}`),A.teamComposition&&f.push(`**Team Composition:** ${A.teamComposition}`),A.timeline&&f.push(`**Timeline:** ${A.timeline}`),f.length>0&&(t.push("## Project Context"),f.forEach(m=>t.push(`- ${m}`)),t.push(""))}const n={...MC.qualitySettings,...(e==null?void 0:e.qualitySettings)||{}};t.push("## Quality Preferences"),t.push(`- **Methodology Depth:** ${n.methodologyDepth.toUpperCase()}`);const r={basic:"Simple explanations without unnecessary jargon",intermediate:"Balanced detail with appropriate methodology context",advanced:"Comprehensive analysis with detailed methodology and research citations"};t.push(`  _${r[n.methodologyDepth]}_`),t.push(`- **Output Detail Level:** ${n.outputDetail.toUpperCase()}`);const s={brief:"Focus on key insights and essential recommendations",moderate:"Sufficient detail with clear structure and explanations",comprehensive:"Detailed analysis with examples and complete coverage"};t.push(`  _${s[n.outputDetail]}_`),t.push(`- **Time Constraints:** ${n.timeConstraints.toUpperCase()}`);const i={urgent:"Quick solutions with immediate actionability",standard:"Balanced approach with reasonable depth",extended:"Thorough exploration with comprehensive details"};t.push(`  _${i[n.timeConstraints]}_`),t.push(`- **Industry Compliance Required:** ${n.industryCompliance?"YES":"NO"}`),t.push(`- **Accessibility Focus:** ${n.accessibilityFocus?"YES (WCAG guidelines applied)":"NO"}`),t.push("");const o={...MC.aiMethodSettings,...(e==null?void 0:e.aiMethodSettings)||{}};t.push("## Prompt Structure Method"),t.push(`- **Selected Method:** ${o.promptStructure.toUpperCase()}`);const c={"framework-guided":"Follows UX methodology structure with stage-based organization and systematic progression","open-ended":"Flexible exploratory prompts that encourage creative thinking and diverse approaches","structured-templates":"Consistent format patterns with predefined sections and standardized layouts"};t.push(`  _${c[o.promptStructure]}_`),t.push("");const l=o.temperature!==void 0||o.topP!==void 0||o.topK!==void 0;if(t.push("## AI Creativity Level"),l)t.push("- **Mode:** ADVANCED PARAMETERS (overrides creativity level)"),o.temperature!==void 0&&(t.push(`- **Temperature:** ${o.temperature}`),t.push(`  _Controls randomness: ${o.temperature<.3?"Very focused":o.temperature<.7?"Balanced":o.temperature<1?"Creative":"Highly experimental"}_`)),o.topP!==void 0&&(t.push(`- **Top P (Nucleus Sampling):** ${o.topP}`),t.push(`  _Diversity control: ${o.topP<.5?"Narrow choices":o.topP<.9?"Balanced diversity":"Maximum diversity"}_`)),o.topK!==void 0&&(t.push(`- **Top K:** ${o.topK}`),t.push(`  _Consider top ${o.topK} most likely tokens_`));else{t.push(`- **Creativity Level:** ${o.creativityLevel.toUpperCase()}`);const A={conservative:"Proven, well-established approaches and industry best practices",balanced:"Mix of proven methodologies with appropriate innovation",creative:"Innovative approaches and creative suggestions alongside proven methods",experimental:"Cutting-edge methods and forward-thinking solutions"};t.push(`  _${A[o.creativityLevel]}_`)}t.push(""),t.push("## Reasoning Approach"),t.push(`- **Reasoning Style:** ${o.reasoning.toUpperCase()}`);const d={"step-by-step":"Clear step-by-step explanations with reasoning at each stage",direct:"Direct confident recommendations with concise justification",exploratory:"Multiple approaches and alternative perspectives with trade-offs"};t.push(`  _${d[o.reasoning]}_`),t.push(""),t.push("## Adaptability Method"),t.push(`- **Adaptability Level:** ${o.adaptability.toUpperCase()}`);const u={static:"Consistent approach following fixed patterns","context-aware":"Adapts based on specific project context and constraints","dynamic-learning":"Continuously adjusts based on patterns and user feedback"};t.push(`  _${u[o.adaptability]}_`),t.push(""),t.push("## Validation & Quality Control"),t.push(`- **Validation Level:** ${o.validation.toUpperCase()}`);const h={none:"No validation requirements - rapid output focused",basic:"Basic validation guidelines and quality checkpoints","built-in":"Validation checkpoints and verification methods throughout",comprehensive:"Comprehensive validation methods, testing criteria, and success metrics"};if(t.push(`  _${h[o.validation]}_`),t.push(""),o.personalization){t.push("## Personalization Level"),t.push(`- **Personalization:** ${o.personalization.toUpperCase()}`);const A={none:"Generic responses without personalization","basic-profile":"Uses basic user profile information","user-preferences":"Adapts to documented user preferences and project settings","adaptive-learning":"Learns from interactions and continuously improves recommendations"};t.push(`  _${A[o.personalization]}_`),t.push("")}return t.push("---"),t.push(""),t.join(`
`)}function n0e(e,t,n){let r=e;const s=l_(t);if(console.log("[buildDynamicPrompt] AI Parameters:",s==null?void 0:s.substring(0,200)),console.log("[buildDynamicPrompt] Project Settings:",t),s){const u=r.match(/^#\s+.+\n\n/);if(u){const h=u[0].length;r=r.slice(0,h)+`

`+s+`

`+r.slice(h),console.log("[buildDynamicPrompt] Inserted after title")}else r=s+`

`+r,console.log("[buildDynamicPrompt] Inserted at beginning")}console.log("[buildDynamicPrompt] Final prompt preview:",r.substring(0,400)),n&&(r=r.replace(/\$\{'\{knowledgeBase\}'\}/g,n));const i=r.match(/(## Instructions:[\s\S]*?)(?=\n---|\n##)/);if(i){const u=i[1],h=t0e(u,t);r=r.replace(u,h)}const o=Zye(t==null?void 0:t.qualitySettings),c=r.match(/## Quality Standards:[\s\S]*?(?=\n---|\n##|$)/);if(c)r=r.replace(c[0],o);else{const u=r.indexOf("## Output Format:");u>-1&&(r=r.slice(0,u)+o+`

---

`+r.slice(u))}const l=e0e(t==null?void 0:t.aiMethodSettings),d=r.match(/## Output Format:[\s\S]*?(?=\n---|\n##|$)/);if(d)r=r.replace(d[0],l);else{const u=r.lastIndexOf(`---

## Quality Standards:`);if(u>-1){const h=r.indexOf(`
---
`,u+10);h>-1&&(r=r.slice(0,h+1)+`
`+l+`
`+r.slice(h+1))}}return r}function r0e(e){const t=[];if(!e)return{isValid:!0,errors:[]};if(e.qualitySettings){const{methodologyDepth:n,outputDetail:r,timeConstraints:s}=e.qualitySettings;n&&!["basic","intermediate","advanced"].includes(n)&&t.push(`Invalid methodologyDepth: ${n}`),r&&!["brief","moderate","comprehensive"].includes(r)&&t.push(`Invalid outputDetail: ${r}`),s&&!["urgent","standard","extended"].includes(s)&&t.push(`Invalid timeConstraints: ${s}`)}if(e.aiMethodSettings){const{promptStructure:n,creativityLevel:r,reasoning:s,adaptability:i,validation:o}=e.aiMethodSettings;n&&!["framework-guided","open-ended","structured-templates"].includes(n)&&t.push(`Invalid promptStructure: ${n}`),r&&!["conservative","balanced","creative","experimental"].includes(r)&&t.push(`Invalid creativityLevel: ${r}`),s&&!["step-by-step","direct","exploratory"].includes(s)&&t.push(`Invalid reasoning: ${s}`),i&&!["static","context-aware","dynamic-learning"].includes(i)&&t.push(`Invalid adaptability: ${i}`),o&&!["none","basic","built-in","comprehensive"].includes(o)&&t.push(`Invalid validation: ${o}`)}return{isValid:t.length===0,errors:t}}const r1={"design-thinking":"Focus on empathy, ideation, and experimentation. Use iterative problem-solving and user validation.","double-diamond":"Follow the divergent-convergent thinking pattern. In Discovery and Development phases, explore broadly. In Define and Deliver phases, focus and synthesize insights into actionable solutions.","google-design-sprint":"Maintain the 5-day sprint methodology focus on rapid prototyping and validation. Emphasize time-boxed activities, collaborative decision-making, and quick user feedback.","human-centered-design":"Prioritize deep user understanding and contextual research. Focus on designing solutions that fit naturally into users' lives and address real human needs.","jobs-to-be-done":"Frame everything around the functional, emotional, and social jobs customers are trying to accomplish. Focus on outcomes rather than features.","lean-ux":"Apply lean startup principles with build-measure-learn cycles. Emphasize hypothesis-driven design, rapid experimentation, and continuous learning.","agile-ux":"Integrate UX work into agile development cycles. Focus on collaborative design, iterative delivery, and maintaining user-centricity within development constraints.","heart-framework":"Structure around Google's HEART metrics: Happiness, Engagement, Adoption, Retention, Task Success. Ensure all outputs are measurable and data-driven.","hooked-model":"Apply Nir Eyal's behavior design framework focusing on Trigger-Action-Variable Reward-Investment cycles to create habit-forming experiences."},s1={empathize:"Generate empathy-focused outputs that deeply understand user needs, emotions, and contexts. Use qualitative research methods and human-centered observation techniques.",define:"Synthesize research insights into clear, actionable problem statements. Create user-focused definitions that guide solution development.",ideate:"Generate diverse, creative solutions without initial constraints. Encourage quantity over quality and build on others' ideas.",prototype:"Create tangible, testable representations of solutions. Focus on learning-oriented prototypes that validate key assumptions.",test:"Design validation methods that generate actionable insights. Focus on user behavior observation and iterative improvement.",discover:"Explore the problem space broadly. Gather diverse perspectives and identify unexpected insights through comprehensive research.","define-dd":"Converge on a clear problem definition. Synthesize discoveries into focused opportunity areas and design challenges.",develop:"Generate and iterate on solution concepts. Create multiple approaches and refine through rapid experimentation.",deliver:"Implement and launch solutions. Focus on execution planning and post-launch optimization.",understand:"Rapidly gather expert knowledge and user insights. Build shared understanding of the challenge and constraints.",sketch:"Generate individual solution concepts quickly. Focus on UI-level ideas and specific interaction patterns.",decide:"Collaboratively select the most promising concepts. Use structured decision-making to choose what to prototype.","prototype-gds":"Build a realistic facade of the solution. Create something that feels real enough for meaningful user testing.",validate:"Test with real users to gather authentic feedback. Focus on learning and next steps rather than validation.",hear:"Deeply understand people and their contexts. Use immersive research methods to gather rich, contextual insights.",create:"Design solutions that fit naturally into people's lives. Iterate based on human feedback and real-world constraints.","deliver-hcd":"Implement solutions with ongoing user involvement. Plan for sustainable adoption and continuous improvement.","job-mapping":"Map the complete customer job process. Identify all steps, needs, and contexts involved in job execution.",outcomes:"Define desired outcomes and success metrics. Focus on what customers want to accomplish, not how.",solutions:"Design solutions that help customers get their jobs done better. Focus on job-step improvements and outcome achievement.",hypothesize:"Create testable assumptions about users, problems, and solutions. Structure as measurable hypotheses.",experiment:"Design rapid tests to validate or invalidate hypotheses. Focus on learning with minimal viable experiments.",learn:"Synthesize experimental results into actionable insights. Pivot or persevere based on validated learning.",plan:"Integrate UX work into sprint planning. Create user-centered backlogs and define UX success criteria.",design:"Create designs that support development velocity. Focus on collaboration and iterative refinement.",build:"Support development with ongoing design guidance. Ensure implementation matches design intent.","test-agile":"Validate designs with users within sprint timelines. Focus on quick feedback and rapid iteration.",iterate:"Continuously improve based on user feedback and usage data. Apply learnings to future sprints.",happiness:"Measure and improve user satisfaction and sentiment. Focus on qualitative feedback and emotional responses.",engagement:"Track and optimize user interaction patterns. Focus on meaningful usage and feature adoption.",adoption:"Measure new user acquisition and onboarding success. Focus on conversion and initial engagement.",retention:"Analyze and improve user return behavior. Focus on long-term value and continued usage.","task-success":"Measure task completion rates and efficiency. Focus on usability and user goal achievement.",trigger:"Design cues that prompt user action. Focus on external and internal triggers that drive engagement.",action:"Simplify and optimize the target behavior. Apply Fogg behavior model: motivation, ability, trigger.","variable-reward":"Create unpredictable, satisfying rewards. Use social approval, hunt, and self rewards.",investment:"Increase user commitment through investment. Focus on stored value, content, reputation, and skills."},i1={"user-interviews":"Generate open-ended questions uncovering user needs, behaviors, and contexts. Focus on why questions and emotional responses.",surveys:"Design quantitative and qualitative questions that can be analyzed statistically. Ensure proper sampling and avoid leading questions.",observations:"Create structured observation protocols that capture user behavior in natural contexts. Focus on actions, not just stated preferences.","contextual-inquiry":"Design immersive research that understands work environments and natural usage contexts. Combine observation with in-the-moment questioning.","empathy-maps":"Structure user insights into Says, Thinks, Does, Feels quadrants. Include pains and gains to complete the user perspective.","stakeholder-interviews":"Gather business requirements and constraints from key stakeholders. Understand organizational context and success criteria.","expert-interviews":"Design structured interviews with domain experts and specialists. Focus on gathering specialized knowledge and insights quickly.","affinity-mapping":"Group related insights to identify patterns and themes. Use inductive reasoning to discover unexpected connections.",personas:"Create archetypal users based on research data. Include goals, needs, behaviors, and contexts that guide design decisions.","journey-maps":"Map the complete user experience across touchpoints and time. Include emotions, pain points, and opportunities.","service-blueprints":"Map front-stage and back-stage service delivery processes. Include people, systems, and support processes.","problem-statements":"Define clear, actionable problem definitions that guide solution development. Use point-of-view format: User + Need + Insight.",brainstorming:"Generate diverse ideas without initial judgment. Focus on quantity, build on ideas, and encourage wild concepts.",scamper:"Apply systematic creativity techniques: Substitute, Combine, Adapt, Modify, Put to other uses, Eliminate, Reverse.","how-might-we":"Reframe problems as solution-oriented questions. Create multiple HMW questions to explore different solution angles.","crazy-8s-sprint":"Generate 8 ideas in 8 minutes through rapid sketching. Focus on quantity and diverse solution approaches.","concept-sketches":"Create rough visual representations of solution concepts. Focus on key interactions and user flows.",sketching:"Create low-fidelity visual representations of ideas. Focus on communication and rapid iteration over visual polish.",wireframes:"Design structural layouts of interfaces. Focus on information hierarchy and functional requirements.",mockups:"Create detailed visual designs that represent final appearance. Include typography, colors, and visual styling.","high-fidelity-prototypes":"Build interactive prototypes that simulate real functionality. Focus on realistic user interactions.","paper-prototypes":"Create testable interfaces using paper and simple materials. Focus on rapid testing and iteration.","digital-prototypes":"Build interactive digital prototypes for realistic testing. Use appropriate fidelity for testing goals.","usability-tests":"Design structured tests that evaluate interface usability. Focus on task completion, errors, and user satisfaction.","a-b-tests":"Create controlled experiments comparing solution variants. Ensure statistical significance and clear success metrics.","analytics-review":"Analyze user behavior data to understand usage patterns. Focus on actionable insights and user journey optimization.","heuristic-evaluation":"Apply usability principles to evaluate interface design. Use Nielsen's heuristics or relevant design principles.","cognitive-walkthroughs":"Evaluate user task flows for cognitive load and usability. Focus on new user experience and task efficiency.","business-model-canvas":"Map business model components and relationships. Focus on value propositions and customer relationships.","value-proposition-canvas":"Define how products create value for customers. Map customer jobs, pains, and gains to product features.","competitive-analysis":"Analyze competitor strengths, weaknesses, and market positioning. Identify opportunities and threats.","kano-model":"Categorize features by user satisfaction impact. Identify must-haves, performance features, and delighters.","user-story-mapping":"Organize user stories by user journey and priority. Create a visual backlog that maintains user perspective.","sprint-planning":"Plan UX work within agile development cycles. Balance discovery, design, and validation activities.","design-studios":"Facilitate collaborative design sessions with cross-functional teams. Generate and critique ideas together.",retrospectives:"Reflect on team process and identify improvements. Focus on actionable changes for future work.","nps-surveys":"Measure customer loyalty and satisfaction with Net Promoter Score methodology. Include follow-up questions for insights.","customer-satisfaction":"Design surveys that measure user satisfaction with specific experiences. Use appropriate rating scales.","task-completion-rates":"Measure user success in completing key tasks. Track completion rates, time, and error rates.","engagement-metrics":"Define and track user engagement indicators. Focus on meaningful interactions rather than vanity metrics.","job-statements":"Define customer jobs in functional language. Use: When [situation], I want to [motivation], so I can [expected outcome].","outcome-statements":"Define desired outcomes in measurable terms. Focus on speed, predictability, quality, and cost considerations.","job-mapping":"Map the complete process customers use to get a job done. Include job steps, needs, and emotional considerations.","notification-strategy":"Design external triggers that prompt user action. Consider timing, relevance, and user preferences.","onboarding-flows":"Create user introduction experiences that drive engagement. Focus on value demonstration and habit formation.","reward-systems":"Design variable reward mechanisms that maintain user interest. Use social, material, and intrinsic rewards.","habit-loops":"Design behavioral loops that encourage repeated usage. Apply trigger-action-reward-investment patterns."},s0e=[{id:"dt-empathize-interviews",framework:"design-thinking",stage:"empathize",tool:"user-interviews",template:`Generate user interview questions for {{projectName}} targeting {{targetUsers}} with research goals: {{researchGoals}}.
{{#if previousOutputs}}
Previous research: {{previousOutputs}}
{{/if}}

Reference the project knowledge base to understand existing context and avoid repeating covered areas.

Create warm-up questions covering background, role, and daily routines.

Design 8-10 core questions exploring pain points, workflows, decision-making processes, and desired outcomes.

Include follow-up probes for deeper insights.

Add scenario-based questions for specific situations and task completion.

End with priority ranking and solution gap identification.

Structure as 45-60 minute session with recording setup and note-taking approach.`,variables:["projectName","targetUsers","researchGoals"],description:"Generate user interview questions and guide",frameworkInstructions:r1["design-thinking"],stageInstructions:s1.empathize,toolInstructions:i1["user-interviews"]},{id:"dt-empathize-empathy-maps",framework:"design-thinking",stage:"empathize",tool:"empathy-maps",template:`Create empathy maps for {{projectName}} focusing on {{targetUser}} in scenario: {{userScenario}}.
{{#if previousOutputs}}
Research data: {{previousOutputs}}
{{/if}}

Use the project knowledge base to inform understanding of user context and existing insights.

Map user expressions including direct quotes, repeated phrases, problem descriptions, and language patterns.

Document internal thoughts covering beliefs, assumptions, concerns, and mental models.

Record observable actions including behaviors, workarounds, tools used, and process steps.

Capture emotional states identifying frustrations, satisfaction moments, anxiety triggers, and excitement drivers.

List pain points covering process breakdowns, time wasters, error-prone steps, and unmet needs.

Identify gains including desired outcomes, success metrics, and value sought.

Base all content on specific research data and real user examples.`,variables:["projectName","targetUser","userScenario"],description:"Create detailed user empathy maps",frameworkInstructions:r1["design-thinking"],stageInstructions:s1.empathize,toolInstructions:i1["empathy-maps"]},{id:"dt-define-personas",framework:"design-thinking",stage:"define",tool:"personas",template:`Create 2-3 user personas for {{projectName}} targeting {{targetMarket}} with {{productService}} for segments: {{userSegments}}.
{{#if previousOutputs}}
Research data: {{previousOutputs}}
{{/if}}

Build demographic profiles with specific background details.

Define goals, needs, and core motivations for each persona.

Document pain points and key frustrations.

Outline behaviors, preferences, and technology comfort levels.

Specify preferred communication channels.

Write day-in-the-life scenarios showing typical usage patterns.

Include authentic quotes that capture each persona's perspective.

Ensure personas feel like real people with distinct, specific characteristics.`,variables:["projectName","targetMarket","productService","userSegments"],description:"Create detailed user personas from research",frameworkInstructions:r1["design-thinking"],stageInstructions:s1.define,toolInstructions:i1.personas},{id:"gds-understand-expert",framework:"google-design-sprint",stage:"understand",tool:"expert-interviews",template:`Design expert interviews for the Google Design Sprint understanding phase for {{projectName}}.

Sprint Context:
- Sprint Goal: {{sprintGoal}}
- Target Users: {{targetUsers}}
- Business Challenge: {{businessChallenge}}

Expert Interview Plan:
1. Expert identification and recruitment:
   - Internal experts (product, engineering, customer support)
   - External experts (industry, users, competitors)
   - Subject matter specialists

2. Interview structure (15-20 minutes each):
   - Expert background and perspective
   - Problem understanding and insights
   - Current solutions and alternatives
   - Opportunities and barriers
   - Key success factors

3. Lightning talks format:
   - 5-minute expert presentations
   - Key insights capture
   - Questions and clarifications
   - Insight prioritization

Focus on gathering diverse perspectives quickly to build comprehensive problem understanding.`,variables:["projectName","sprintGoal","targetUsers","businessChallenge"],description:"Design expert interviews for Design Sprint",frameworkInstructions:r1["google-design-sprint"],stageInstructions:s1.understand,toolInstructions:i1["expert-interviews"]},{id:"gds-sketch-crazy8s",framework:"google-design-sprint",stage:"sketch",tool:"crazy-8s-sprint",template:`Facilitate a Crazy 8s sketching session for {{projectName}} to generate rapid solution ideas.

Challenge Statement:
{{challengeStatement}}

How Might We Questions:
{{#if previousOutputs}}
{{previousOutputs}}
{{/if}}

Crazy 8s Instructions:
1. Setup (5 minutes):
   - Fold paper into 8 sections
   - Set timer for 8 minutes
   - One idea per section

2. Sketching Rules:
   - Focus on UI/screen ideas
   - Don't worry about quality
   - Build on previous ideas
   - Go for volume

3. Ideas to explore:
   - Different entry points
   - Various interaction patterns
   - Alternative user flows
   - Creative solutions to {{specificProblem}}

4. Follow-up:
   - Quick idea sharing (30 seconds each)
   - Dot voting on promising concepts
   - Note interesting patterns
   - Set up for solution sketching

Generate 20+ diverse UI concepts that address the core challenge.`,variables:["projectName","challengeStatement","specificProblem"],description:"Facilitate rapid idea sketching session"},{id:"hcd-hear-contextual",framework:"human-centered-design",stage:"hear",tool:"contextual-interviews",template:`Design contextual interviews for {{projectName}} to understand users in their natural environment.

Research Context:
- Location: {{researchLocation}}
- User Activities: {{userActivities}}
- Research Questions: {{researchQuestions}}

Contextual Interview Plan:
1. Pre-visit preparation:
   - Site logistics and permissions
   - Equipment and materials needed
   - Safety considerations
   - Cultural sensitivity guidelines

2. Interview structure:
   - Introduction and rapport building (10 min)
   - Environment tour and observation (20 min)
   - Task demonstration and narration (30 min)
   - Reflection and deeper discussion (20 min)
   - Wrap-up and next steps (10 min)

3. Observation areas:
   - Physical environment and constraints
   - Social dynamics and interactions
   - Tools and technology usage
   - Workflow and process patterns
   - Workarounds and adaptations

4. Documentation approach:
   - Photo/video permissions
   - Note-taking strategies
   - Real-time insight capture
   - Follow-up question tracking

Focus on understanding the context that shapes user behavior and needs.`,variables:["projectName","researchLocation","userActivities","researchQuestions"],description:"Plan in-context user research"},{id:"jtbd-mapping-steps",framework:"jobs-to-be-done",stage:"job-mapping",tool:"job-steps",template:`Map the job steps for {{customerJob}} in the context of {{projectName}}.

Job Context:
- Core Functional Job: {{customerJob}}
- Job Executor: {{jobExecutor}}
- Job Context: {{jobContext}}

Job Mapping Structure:
Create a detailed map of the customer job with these elements:

1. Job Steps (8-12 main steps):
   - Define the beginning (job trigger)
   - Map the middle (execution steps)
   - Define the end (job completion)

2. For each step, identify:
   - What the customer is trying to accomplish
   - Current solutions and tools used
   - Information needed at this step
   - Success criteria for this step
   - Common failures or inefficiencies

3. Emotional job layers:
   - How customers want to feel
   - What they want to avoid feeling
   - Social perceptions and status

4. Related jobs:
   - Jobs that happen before/after
   - Competing jobs for attention
   - Supporting jobs that enable success

Focus on creating a comprehensive view of the customer's job process.`,variables:["customerJob","projectName","jobExecutor","jobContext"],description:"Map detailed customer job steps"},{id:"lean-hypothesize-canvas",framework:"lean-ux",stage:"hypothesize",tool:"hypothesis-canvas",template:`Create hypothesis statements for {{projectName}} using the Lean UX hypothesis format.

Project Context:
- Business Goal: {{businessGoal}}
- Target User: {{targetUser}}
- User Problem: {{userProblem}}

Hypothesis Structure:
We believe that [building this feature/solution]
For [these people/personas]
Will achieve [this outcome]
We will know this is true when [we see this signal/metric]

Generate 5-7 hypotheses covering:

1. Problem Hypothesis:
   - What problem are we solving?
   - Who has this problem?
   - How do we know it's a real problem?

2. Solution Hypothesis:
   - What solution will address the problem?
   - Why will this solution work?
   - What alternatives did we consider?

3. Value Hypothesis:
   - What value will users get?
   - Why will they choose our solution?
   - What's the job-to-be-done?

4. Growth Hypothesis:
   - How will users discover our solution?
   - What will drive adoption?
   - How will it spread?

Include success metrics and validation methods for each hypothesis.`,variables:["projectName","businessGoal","targetUser","userProblem"],description:"Create testable hypothesis statements"},{id:"agile-plan-story-mapping",framework:"agile-ux",stage:"plan",tool:"user-story-mapping",template:`Create a user story map for {{projectName}} to visualize the user journey and prioritize features.

Product Context:
- Product Vision: {{productVision}}
- Target Users: {{targetUsers}}
- Core User Journey: {{coreJourney}}

Story Mapping Structure:

1. User Activities (Top Level):
   - High-level activities users perform
   - Organized left to right in sequence
   - Represent the user's workflow

2. User Tasks (Second Level):
   - Specific tasks within each activity
   - More detailed breakdown of activities
   - Still in chronological order

3. User Stories (Bottom Levels):
   - Detailed stories for each task
   - Include acceptance criteria
   - Organized by priority/release

4. Story Details:
   - As a [user type]
   - I want [functionality]
   - So that [benefit/value]

5. Release Planning:
   - Walking skeleton (MVP)
   - Release 1, 2, 3 priorities
   - Nice-to-have features

6. Story Acceptance Criteria:
   - Given [context]
   - When [action]
   - Then [expected outcome]

Create a comprehensive story map that guides development priorities.`,variables:["projectName","productVision","targetUsers","coreJourney"],description:"Create user story map for feature prioritization"},{id:"heart-happiness-nps",framework:"heart-framework",stage:"happiness",tool:"nps-surveys",template:`Design NPS surveys and happiness metrics for {{projectName}}.

Measurement Context:
- Product Type: {{productType}}
- Key User Touchpoints: {{userTouchpoints}}
- Business Goals: {{businessGoals}}

NPS Survey Design:

1. Core NPS Question:
   "How likely are you to recommend {{productName}} to a friend or colleague?"
   (0-10 scale with follow-up)

2. Follow-up Questions by Score:
   
   Promoters (9-10):
   - What do you love most about {{productName}}?
   - What features are most valuable to you?
   - How has {{productName}} helped you achieve your goals?

   Passives (7-8):
   - What would make you more likely to recommend us?
   - What's missing from your experience?
   - How could we better serve your needs?

   Detractors (0-6):
   - What's your biggest frustration with {{productName}}?
   - What would need to change for you to recommend us?
   - What alternatives are you considering?

3. Additional Happiness Metrics:
   - Customer satisfaction (CSAT) scores
   - Customer effort score (CES)
   - Emotional response tracking
   - Feature satisfaction ratings

4. Implementation Plan:
   - Survey timing and triggers
   - Response rate optimization
   - Analysis and reporting cadence
   - Action planning based on results

Create a comprehensive happiness measurement system.`,variables:["projectName","productType","userTouchpoints","businessGoals","productName"],description:"Design NPS and happiness measurement system"},{id:"hooked-trigger-notifications",framework:"hooked-model",stage:"trigger",tool:"notification-strategy",template:`Design a notification strategy for {{projectName}} to create effective external triggers.

Product Context:
- App Type: {{appType}}
- User Behavior Goal: {{behaviorGoal}}
- Current User Patterns: {{userPatterns}}

Notification Strategy:

1. External Trigger Types:
   
   Paid Triggers:
   - Advertising and promotional content
   - Sponsored content and placements
   - Email marketing campaigns
   
   Earned Triggers:
   - Social media mentions and shares
   - Press coverage and reviews
   - Word-of-mouth referrals
   
   Relationship Triggers:
   - App notifications and alerts
   - Email communications
   - SMS and push notifications
   
   Owned Triggers:
   - App icons and visual cues
   - Website and landing pages
   - In-app messaging

2. Notification Framework:
   - Trigger timing and frequency
   - Personalization strategies
   - Content and messaging
   - Call-to-action design

3. Behavioral Triggers:
   - Time-based triggers (daily, weekly)
   - Activity-based triggers (milestone reached)
   - Social triggers (friend activity)
   - Location-based triggers (geofencing)

4. Optimization Approach:
   - A/B testing framework
   - Opt-out and preference management
   - Performance metrics tracking
   - User feedback integration

Design triggers that motivate action without causing notification fatigue.`,variables:["projectName","appType","behaviorGoal","userPatterns"],description:"Create comprehensive notification trigger strategy"}],ma=cf((e,t)=>({prompts:[],templates:[],enhancedTemplates:[],currentPrompt:null,isGenerating:!1,isValidating:!1,isTailoring:!1,promptVersions:{},isLoadingVersions:!1,loadProjectPrompts:async n=>{try{const{data:r,error:s}=await rt.from("prompts").select("*").eq("project_id",n).order("created_at",{ascending:!1});if(s)throw s;console.log("Loaded prompts from database:",(r==null?void 0:r.length)||0);const i=(r||[]).map(o=>{let c,l=o.ai_response;if(o.conversation_history&&Array.isArray(o.conversation_history))console.log(" Loading conversation from conversation_history field:",o.conversation_history.length,"messages"),c=o.conversation_history.map(d=>({id:d.id,type:d.type,content:d.content,timestamp:new Date(d.timestamp)}));else if(o.ai_response&&typeof o.ai_response=="string")try{const d=JSON.parse(o.ai_response);d.type==="conversation"&&Array.isArray(d.messages)&&(console.log(" Loading conversation from ai_response field (fallback):",d.messages.length,"messages"),c=d.messages.map(u=>({id:u.id,type:u.type,content:u.content,timestamp:new Date(u.timestamp)})),l=void 0)}catch{l=o.ai_response}return{id:o.id,workflowId:"current-workflow",projectId:o.project_id,content:o.prompt_content,context:{framework:{id:o.framework_name,name:o.framework_name},stage:{id:o.stage_name,name:o.stage_name},tool:{id:o.tool_name,name:o.tool_name}},variables:o.variables&&typeof o.variables=="object"&&!Array.isArray(o.variables)?o.variables:{},output:l||void 0,conversation:c,timestamp:new Date(o.created_at).getTime()}});console.log("Setting prompts in store:",i.length),e({prompts:i})}catch(r){console.error("Error loading project prompts:",r)}},generatePrompt:async(n,r,s,i,o,c,l,d,u,h)=>{var b,y,j;if(h){const x=r0e(h);x.isValid||(console.warn("Invalid project settings, using defaults:",x.errors),h=void 0)}const A=t().enhancedTemplates.find(x=>x.id===i.id);if(A){const x={projectName:(u==null?void 0:u.projectName)||"Current Project",projectDescription:(u==null?void 0:u.projectDescription)||"",knowledgeBase:d||"No project context available",framework:r.name,stage:s.name,tool:i.name,...c};return A.variables.forEach(C=>{var S,_;if(C.required&&!x[C.id])switch(C.type){case"number":C.id==="sampleSize"?x[C.id]=50:x[C.id]=((S=C.validation)==null?void 0:S.min)||1;break;case"select":x[C.id]=((_=C.options)==null?void 0:_[0])||"";break;case"textarea":C.id==="dataSources"?x[C.id]="User interviews, surveys, analytics data, support tickets":C.id==="researchMethods"?x[C.id]="User interviews, behavioral analytics, survey data, usability testing":C.id==="primaryGoal"?x[C.id]="Complete the main task efficiently and successfully":x[C.id]=`Default ${C.name.toLowerCase()}`;break;case"text":C.id==="personaName"?x[C.id]="Primary User":x[C.id]=`Default ${C.name.toLowerCase()}`;break;default:x[C.id]=`Default ${C.name.toLowerCase()}`}}),t().generateEnhancedPrompt(A.id,x,u)}const f=t().templates.find(x=>x.framework===r.id&&x.stage===s.id&&x.tool===i.id);let m="";if(f)m=n0e(f.template,h,d),console.log("[Dynamic Prompt] Applied project settings:",{hasSettings:!!h,quality:((b=h==null?void 0:h.qualitySettings)==null?void 0:b.methodologyDepth)||"default",outputDetail:((y=h==null?void 0:h.qualitySettings)==null?void 0:y.outputDetail)||"default",promptStructure:((j=h==null?void 0:h.aiMethodSettings)==null?void 0:j.promptStructure)||"default"});else try{m=Ex({framework:r,stage:s,tool:i,projectContext:d}).promptTemplate,d&&(m=m.replace(/\[Insert all relevant project knowledge base content here[^\]]*\]/gi,d),m=m.replace(/\{\{knowledgeBase\}\}/gi,d));const C=l_(h);console.log("[Tool-Specific Instructions] AI Parameters generated:",C==null?void 0:C.substring(0,200)),console.log("[Tool-Specific Instructions] Project settings:",h),C&&(m=`${C}

${m}`),console.log("[Tool-Specific Instructions] Using AI instructions for:",i.id),console.log("[Tool-Specific Instructions] Added AI parameters:",!!C),console.log("[Tool-Specific Instructions] Final template preview:",m.substring(0,300))}catch(x){console.error("[Tool-Specific Instructions] Error loading instructions:",x),m=`Create ${i.name} deliverable for the project. Generate actionable outputs for immediate use.`,d&&(m=`Project Knowledge Base:
${d}

${m}`);const C=l_(h);C&&(m=`${C}

${m}`)}const g={id:`prompt-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,workflowId:"current-workflow",projectId:n,content:m,context:{framework:r,stage:s,tool:i,connectedNodes:o,nodeCustomizations:c,previousOutputs:l},variables:(f==null?void 0:f.variables.reduce((x,C)=>(x[C]="",x),{}))||{},timestamp:Date.now()};try{const{data:{user:x}}=await rt.auth.getUser();if(!x)throw new Error("User not authenticated");const{error:C}=await rt.from("prompts").insert({project_id:n,user_id:x.id,framework_name:r.name,stage_name:s.name,tool_name:i.name,prompt_content:m,variables:g.variables});if(C)throw C}catch(x){console.error("Error saving prompt to database:",x)}return e(x=>({prompts:[...x.prompts,g],currentPrompt:g})),m},generateEnhancedPrompt:async(n,r,s)=>{e({isGenerating:!0});try{const i=T4(n);if(!i)throw new Error(`Enhanced template ${n} not found`);const o=xL(n,r||{});if(!o||!o.isValid){const A=(o==null?void 0:o.errors)||["Unknown validation error"];throw new Error(`Variable validation failed: ${A.join(", ")}`)}let c=i.template||"",l=[...i.instructions||[]];if(s!=null&&s.industry){const A=Iye(n,s.industry);A&&(c=A.template||c,l=[...l,...A.instructions||[]])}s!=null&&s.customizations&&i.customizationOptions&&i.customizationOptions.forEach(A=>{const f=s.customizations[A.id];f!==void 0&&(c=c.replace(new RegExp(`{{${A.id}}}`,"g"),String(f)))});let d=c;Object.entries(r||{}).forEach(([A,f])=>{if(A&&f!==void 0&&f!==null){const m=new RegExp(`{{${A}}}`,"g");d=d.replace(m,String(f))}});const u=d,h={id:`enhanced-prompt-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,workflowId:"current-workflow",projectId:"current-project",content:u,context:{framework:{id:"enhanced",name:"Enhanced Template"},stage:{id:"enhanced",name:"Enhanced Stage"},tool:{id:n,name:i.name},enhancedContext:s},variables:r,timestamp:Date.now(),templateVersion:"2.0",industry:s==null?void 0:s.industry};return e(A=>({prompts:[...A.prompts,h],currentPrompt:h})),u}catch(i){throw console.error("Error generating enhanced prompt:",i),i}finally{e({isGenerating:!1})}},validatePromptQuality:async n=>{e({isValidating:!0});try{const r=t().prompts.find(i=>i.id===n);if(!r)throw new Error("Prompt not found");const s=await Dye.validatePrompt(r.content,r.context.tool.id,r.industry);return e(i=>{var o;return{prompts:i.prompts.map(c=>c.id===n?{...c,qualityScore:s}:c),currentPrompt:((o=i.currentPrompt)==null?void 0:o.id)===n?{...i.currentPrompt,qualityScore:s}:i.currentPrompt}}),s}catch(r){throw console.error("Error validating prompt quality:",r),r}finally{e({isValidating:!1})}},executePrompt:async n=>{e({isGenerating:!0});try{const r=t().prompts.find(l=>l.id===n);if(!r)return;let s=r.content;Object.entries(r.variables).forEach(([l,d])=>{s=s.replace(new RegExp(`{{${l}}}`,"g"),d)}),r.context.previousOutputs&&r.context.previousOutputs.length>0?s=s.replace(/{{#if previousOutputs}}(.*?){{\/if}}/gs,(l,d)=>d.replace("{{previousOutputs}}",r.context.previousOutputs.join(`

`))):s=s.replace(/{{#if previousOutputs}}(.*?){{\/if}}/gs,""),console.log(" Calling AI generation service for prompt:",n);const{data:i,error:o}=await rt.functions.invoke("generate-ai-prompt",{body:{promptContent:s,variables:r.variables,projectId:r.projectId,frameworkName:r.context.framework.name,stageName:r.context.stage.name,toolName:r.context.tool.name,knowledgeContext:null}});if(o)throw console.error("AI generation failed:",o),new Error(`AI generation failed: ${o.message}`);if(!(i!=null&&i.success))throw new Error(`AI generation failed: ${(i==null?void 0:i.error)||"Unknown error"}`);const c=i.aiResponse;console.log(" AI response generated successfully"),e(l=>({prompts:l.prompts.map(d=>d.id===n?{...d,output:{type:"generated",content:{items:[],rawOutput:c,generatedAt:new Date().toISOString(),model:"gpt-4o-mini",tokens:c.length},summary:`Generated ${r.context.tool.name} output`,metadata:{framework:r.context.framework.name,stage:r.context.stage.name,tool:r.context.tool.name,generatedAt:new Date().toISOString()}},execution:{status:"completed",startedAt:new Date().toISOString(),completedAt:new Date().toISOString(),model:"gpt-4o-mini",usage:{promptTokens:s.length,completionTokens:c.length,totalTokens:s.length+c.length}}}:d)}))}catch(r){console.error("Error executing prompt:",r)}finally{e({isGenerating:!1})}},updatePromptVariables:(n,r)=>{e(s=>({prompts:s.prompts.map(i=>i.id===n?{...i,variables:{...i.variables,...r}}:i)}))},setCurrentPrompt:n=>e({currentPrompt:n}),addPromptOutput:(n,r)=>{e(s=>({prompts:s.prompts.map(i=>i.id===n?{...i,output:r}:i)}))},updatePromptConversation:(n,r)=>{e(s=>{var i;return{prompts:s.prompts.map(o=>o.id===n?{...o,conversation:r}:o),currentPrompt:((i=s.currentPrompt)==null?void 0:i.id)===n?{...s.currentPrompt,conversation:r}:s.currentPrompt}})},addConversationMessage:(n,r)=>{e(s=>{var i;return{prompts:s.prompts.map(o=>o.id===n?{...o,conversation:[...o.conversation||[],r]}:o),currentPrompt:((i=s.currentPrompt)==null?void 0:i.id)===n?{...s.currentPrompt,conversation:[...s.currentPrompt.conversation||[],r]}:s.currentPrompt}})},clearProjectPrompts:()=>{console.log("Clearing project prompts"),e({prompts:[],currentPrompt:null})},initializeTemplates:()=>e({templates:s0e}),initializeEnhancedTemplates:()=>e({enhancedTemplates:_ye()}),getEnhancedTemplate:n=>t().enhancedTemplates.find(s=>s.id===n),validateTemplateVariables:(n,r)=>xL(n,r),generateEnhancedContextPrompt:async n=>{e({isGenerating:!0});try{const r=await XN.processIntegratedContext(n),s={id:`enhanced_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,workflowId:"enhanced-context",projectId:n.projectId,content:r.synthesizedPrompt,context:{framework:n.framework,stage:n.stage,tool:n.tool,enhancedContext:{industry:n.userPreferences.industryFocus,qualityLevel:n.userPreferences.outputDetailLevel,customizations:{accessibilityLevel:n.userPreferences.accessibilityLevel,includeResearchBacking:n.userPreferences.includeResearchBacking,communicationStyle:n.userPreferences.communicationStyle}}},variables:n.userInputs,timestamp:Date.now(),qualityScore:{overallScore:Math.round(r.qualityMetrics.overallQuality*100),category:r.qualityMetrics.overallQuality>.8?"excellent":r.qualityMetrics.overallQuality>.6?"good":r.qualityMetrics.overallQuality>.4?"fair":"needs_improvement",summary:{strengths:[r.qualityMetrics.contextRichness>.7?"Rich contextual information":null,r.qualityMetrics.variableCompleteness>.8?"Complete variable processing":null,r.qualityMetrics.accessibilityCompliance>.7?"Strong accessibility compliance":null,r.qualityMetrics.workflowConsistency>.7?"Good workflow consistency":null].filter(Boolean),recommendations:r.recommendations.slice(0,3),issues:r.warnings}}};return e(i=>({prompts:[s,...i.prompts],currentPrompt:s,isGenerating:!1})),r}catch(r){throw console.error("Enhanced context prompt generation failed:",r),e({isGenerating:!1}),r}},recordWorkflowOutput:async(n,r,s=[],i)=>{try{await XN.recordWorkflowOutput(n,r,s,i)}catch(o){console.error("Error recording workflow output:",o)}},getWorkflowAnalytics:async n=>{try{return await XN.getWorkflowAnalytics(n)}catch(r){return console.error("Error getting workflow analytics:",r),null}},tailorPromptForDestination:async(n,r)=>{var s,i,o;console.log(" Store: Starting tailoring for prompt:",n),console.log(" Store: Destination context:",r),e({isTailoring:!0});try{const c=t().prompts.find(u=>u.id===n);if(!c)throw console.error(" Store: Prompt not found:",n),new Error("Prompt not found");console.log(" Store: Found prompt:",c.id,c.content.substring(0,100));const l={...r,originalPrompt:c.content,variables:c.variables,metadata:{...r.metadata,framework:c.context.framework.name,stage:c.context.stage.name,tool:c.context.tool.name,industry:c.industry,teamSize:(s=c.context.enhancedContext)==null?void 0:s.teamSize,timeConstraints:(i=c.context.enhancedContext)==null?void 0:i.timeConstraints,experience:(o=c.context.enhancedContext)==null?void 0:o.experience}};console.log(" Store: Calling destination tailoring service with context:",l);const d=await Ap.tailorPromptForDestination({context:l,enforceValidation:!0,maxRetries:3});if(console.log(" Store: Tailoring response:",d),d.success){console.log(" Store: Routing output for:",d.expectedOutput);const u=Ap.routeOutput(d.expectedOutput);console.log(" Store: Routed output:",u),console.log(" Store: Updating prompt with destination info");const h={type:l.destination,aiProvider:l.aiProvider,userIntent:l.userIntent,tailoredPrompt:d.tailoredPrompt,tailoredOutput:d.expectedOutput,displayContent:u.displayContent,integrationPayload:u.integrationPayload};return console.log(" Store: Destination info to set:",h),e(A=>{var g;const f=A.prompts.map(b=>b.id===n?{...b,destination:h}:b),m=f.find(b=>b.id===n);return console.log(" Store: Updated prompt after setting destination:",m==null?void 0:m.destination),{prompts:f,currentPrompt:((g=A.currentPrompt)==null?void 0:g.id)===n?{...A.currentPrompt,destination:h}:A.currentPrompt}}),{success:!0,errors:d.validationErrors,clarifyingQuestions:d.clarifyingQuestions}}else return{success:!1,errors:["Tailoring failed"],clarifyingQuestions:d.clarifyingQuestions}}catch(c){return console.error("Error tailoring prompt for destination:",c),{success:!1,errors:[c instanceof Error?c.message:"Unknown error occurred"]}}finally{e({isTailoring:!1})}},getSupportedDestinations:()=>Ap.getSupportedDestinations(),getSupportedAIProviders:()=>Ap.getSupportedAIProviders(),clearDestination:n=>{e(r=>{var s;return{prompts:r.prompts.map(i=>i.id===n?{...i,destination:void 0}:i),currentPrompt:((s=r.currentPrompt)==null?void 0:s.id)===n?{...r.currentPrompt,destination:void 0}:r.currentPrompt}})},loadPromptVersions:async n=>{e({isLoadingVersions:!0});try{const{data:r,error:s}=await rt.from("prompt_versions").select("*").eq("prompt_id",n).order("version_number",{ascending:!0});if(s)throw s;const i=(r||[]).map(o=>({id:o.id,promptId:o.prompt_id,versionNumber:o.version_number,versionTitle:o.version_title,isActive:o.is_active,content:o.prompt_content,variables:o.variables||{},conversation:o.conversation?Array.isArray(o.conversation)?o.conversation.map(c=>({...c,timestamp:new Date(c.timestamp)})):[]:[],changeSummary:o.change_summary,parentVersionId:o.parent_version_id,aiResponse:o.ai_response,createdAt:o.created_at}));e(o=>({promptVersions:{...o.promptVersions,[n]:i},isLoadingVersions:!1}))}catch(r){console.error("Error loading prompt versions:",r),e({isLoadingVersions:!1})}},createPromptVersion:async(n,r,s,i,o,c,l)=>{try{const{data:{user:d}}=await rt.auth.getUser();if(!d)throw new Error("User not authenticated");const{data:u,error:h}=await rt.rpc("get_next_version_number",{p_prompt_id:n});if(h)throw h;const A=u||1;await rt.from("prompt_versions").update({is_active:!1}).eq("prompt_id",n);const{data:f,error:m}=await rt.from("prompt_versions").insert({prompt_id:n,user_id:d.id,version_number:A,version_title:r,is_active:!0,prompt_content:s,variables:i||{},conversation:o||[],change_summary:c,parent_version_id:l}).select().single();if(m)throw m;const g={id:f.id,promptId:f.prompt_id,versionNumber:f.version_number,versionTitle:f.version_title,isActive:f.is_active,content:f.prompt_content,variables:f.variables||{},conversation:f.conversation?Array.isArray(f.conversation)?f.conversation.map(b=>({...b,timestamp:new Date(b.timestamp)})):[]:[],changeSummary:f.change_summary,parentVersionId:f.parent_version_id,aiResponse:f.ai_response,createdAt:f.created_at};return e(b=>({promptVersions:{...b.promptVersions,[n]:[...(b.promptVersions[n]||[]).map(y=>({...y,isActive:!1})),g]}})),g}catch(d){throw console.error("Error creating prompt version:",d),d}},switchToVersion:async(n,r)=>{var s;try{await rt.from("prompt_versions").update({is_active:!1}).eq("prompt_id",n);const{error:i}=await rt.from("prompt_versions").update({is_active:!0}).eq("id",r);if(i)throw i;e(c=>({promptVersions:{...c.promptVersions,[n]:(c.promptVersions[n]||[]).map(l=>({...l,isActive:l.id===r}))}}));const o=(s=t().promptVersions[n])==null?void 0:s.find(c=>c.id===r);o&&e(c=>{var l;return{prompts:c.prompts.map(d=>d.id===n?{...d,content:o.content,variables:o.variables}:d),currentPrompt:((l=c.currentPrompt)==null?void 0:l.id)===n?{...c.currentPrompt,content:o.content,variables:o.variables}:c.currentPrompt}})}catch(i){throw console.error("Error switching to version:",i),i}},deleteVersion:async n=>{try{const r=Object.values(t().promptVersions).flat().find(o=>o.id===n);if(!r)throw new Error("Version not found");const s=t().promptVersions[r.promptId]||[];if(s.length<=1)throw new Error("Cannot delete the last version of a prompt");if(r.isActive&&s.length>1){const c=[...s].sort((l,d)=>d.versionNumber-l.versionNumber).find(l=>l.id!==n);c&&await t().switchToVersion(r.promptId,c.id)}const{error:i}=await rt.from("prompt_versions").delete().eq("id",n);if(i)throw i;e(o=>({promptVersions:{...o.promptVersions,[r.promptId]:(o.promptVersions[r.promptId]||[]).filter(c=>c.id!==n)}}))}catch(r){throw console.error("Error deleting version:",r),r}},getVersionHistory:n=>t().promptVersions[n]||[],getActiveVersion:n=>(t().promptVersions[n]||[]).find(s=>s.isActive)||null})),i0e=Object.freeze(Object.defineProperty({__proto__:null,usePromptStore:ma},Symbol.toStringTag,{value:"Module"})),a0e=[{id:"design-thinking",name:"Design Thinking",description:"Human-centered approach to innovation with 5 stages of problem-solving",color:"#8B5CF6",characteristics:{focus:"Human-centered innovation",timeline:"2-6 months",complexity:"Medium",teamSize:"3-8 people",outcome:"Validated solutions"},stages:[{id:"empathize",name:"Empathize",description:"Understand user needs and context through deep research",position:{x:0,y:0},characteristics:{duration:"2-4 weeks",participants:"Researchers, designers, stakeholders",deliverables:"User insights, empathy maps, personas",skills:["user research","interviewing","observation","empathy building"],dependencies:["stakeholder buy-in","user access","research plan"]},tools:[{id:"user-interviews",name:"User Interviews",description:"Conduct in-depth user interviews to understand needs and motivations",category:"Research",icon:"MessageCircle",characteristics:{effort:"High",expertise:"Research skills",resources:["interview guide","recording equipment","transcription tools"],output:"User insights and quotes",when:"Beginning of project"}},{id:"observations",name:"Field Observations",description:"Observe users in their natural environment and context",category:"Research",icon:"Eye",characteristics:{effort:"High",expertise:"Ethnographic research",resources:["observation protocols","field access","documentation tools"],output:"Behavioral insights and contextual understanding",when:"Context exploration phase"}},{id:"empathy-maps",name:"Empathy Maps",description:"Visualize user thoughts, feelings, actions, and motivations",category:"Analysis",icon:"Heart",characteristics:{effort:"Medium",expertise:"Synthesis skills",resources:["research data","mapping templates","workshop materials"],output:"User empathy visualization",when:"After research data collection"}},{id:"stakeholder-interviews",name:"Stakeholder Interviews",description:"Understand business context and organizational constraints",category:"Research",icon:"Users",characteristics:{effort:"Medium",expertise:"Interview facilitation",resources:["interview guides","stakeholder mapping"],output:"Business context and requirements",when:"Project initiation and throughout"}},{id:"surveys",name:"User Surveys",description:"Collect quantitative data on user behaviors and preferences",category:"Research",icon:"BarChart",characteristics:{effort:"Medium",expertise:"Survey design and analysis",resources:["survey platform","user database","analysis tools"],output:"Quantitative user insights",when:"Broad user understanding needed"}}]},{id:"define",name:"Define",description:"Synthesize observations into clear problem statements and user needs",position:{x:200,y:0},characteristics:{duration:"1-2 weeks",participants:"Design team, researchers, key stakeholders",deliverables:"Problem statements, personas, POV statements, user needs",skills:["synthesis","problem framing","storytelling","prioritization"],dependencies:["research insights","stakeholder alignment","data analysis"]},tools:[{id:"affinity-mapping",name:"Affinity Mapping",description:"Group related insights to identify patterns and themes",category:"Analysis",icon:"Grid3X3",characteristics:{effort:"Medium",expertise:"Synthesis and pattern recognition",resources:["sticky notes","wall space","research data","facilitation materials"],output:"Insight clusters and key themes",when:"After research data collection"}},{id:"personas",name:"User Personas",description:"Create detailed user archetypes based on research insights",category:"Analysis",icon:"User",characteristics:{effort:"Medium",expertise:"User modeling and storytelling",resources:["research data","design tools","persona templates"],output:"Detailed user persona documents",when:"After insight synthesis"}},{id:"problem-statements",name:"Problem Statements",description:"Define clear, actionable problem statements using POV format",category:"Strategy",icon:"Target",characteristics:{effort:"Low",expertise:"Problem framing and communication",resources:["synthesis insights","POV templates"],output:"Clear problem definitions",when:"After user need identification"}},{id:"journey-maps",name:"User Journey Maps",description:"Map the complete user experience across touchpoints and time",category:"Analysis",icon:"Route",characteristics:{effort:"High",expertise:"Journey mapping and visualization",resources:["user research","journey templates","collaboration tools"],output:"Comprehensive user journey visualization",when:"Understanding user experience flow"}}]},{id:"ideate",name:"Ideate",description:"Generate creative solutions through divergent thinking and ideation",position:{x:400,y:0},characteristics:{duration:"1-3 weeks",participants:"Multidisciplinary team, stakeholders, external experts",deliverables:"Solution concepts, feature ideas, creative alternatives",skills:["creative thinking","brainstorming","facilitation","idea evaluation"],dependencies:["clear problem definition","diverse team perspectives","ideation space"]},tools:[{id:"brainstorming",name:"Brainstorming Sessions",description:"Generate diverse ideas rapidly through structured group ideation",category:"Ideation",icon:"Lightbulb",characteristics:{effort:"Low",expertise:"Facilitation and creative thinking",resources:["workshop space","ideation materials","timer"],output:"Raw ideas and solution concepts",when:"Divergent thinking phase"}},{id:"how-might-we",name:"How Might We Questions",description:"Reframe problems as actionable opportunities for innovation",category:"Ideation",icon:"HelpCircle",characteristics:{effort:"Low",expertise:"Problem reframing and question design",resources:["problem statements","HMW templates"],output:"Opportunity-focused questions",when:"Problem to solution transition"}},{id:"crazy-eights",name:"Crazy Eights",description:"Rapid sketching exercise to generate 8 ideas in 8 minutes",category:"Ideation",icon:"Zap",characteristics:{effort:"Low",expertise:"Sketching and rapid ideation",resources:["paper","pens","timer"],output:"Quick visual solution concepts",when:"Need for rapid idea generation"}},{id:"scamper",name:"SCAMPER Technique",description:"Systematic creativity using Substitute, Combine, Adapt, Modify, Put to other uses, Eliminate, Reverse",category:"Ideation",icon:"Shuffle",characteristics:{effort:"Medium",expertise:"Creative thinking frameworks",resources:["SCAMPER templates","existing solutions for reference"],output:"Systematically generated solution variations",when:"Need for structured creative exploration"}},{id:"storyboarding",name:"Solution Storyboarding",description:"Create visual narratives showing solution concepts in use",category:"Ideation",icon:"BookOpen",characteristics:{effort:"Medium",expertise:"Visual storytelling and communication",resources:["drawing materials","storyboard templates"],output:"Visual solution narratives",when:"Communicating complex solution concepts"}}]},{id:"prototype",name:"Prototype",description:"Build testable representations of solutions for validation",position:{x:600,y:0},characteristics:{duration:"2-4 weeks",participants:"Designers, developers, product managers",deliverables:"Prototypes, mockups, wireframes, interactive demos",skills:["prototyping","design tools","technical skills","user flow design"],dependencies:["selected concepts","technical constraints","testing plan"]},tools:[{id:"wireframes",name:"Wireframes",description:"Create low-fidelity structural layouts and information architecture",category:"Prototyping",icon:"Layout",characteristics:{effort:"Medium",expertise:"Information architecture and layout design",resources:["wireframing tools","content inventory","user flow maps"],output:"Structural interface layouts",when:"Information architecture definition"}},{id:"paper-prototypes",name:"Paper Prototypes",description:"Create rapid, low-cost prototypes using paper and simple materials",category:"Prototyping",icon:"FileText",characteristics:{effort:"Low",expertise:"Basic design and construction skills",resources:["paper","scissors","tape","markers"],output:"Tangible, testable solution representations",when:"Early concept validation"}},{id:"digital-prototypes",name:"Digital Prototypes",description:"Build interactive digital prototypes for realistic user testing",category:"Prototyping",icon:"Smartphone",characteristics:{effort:"High",expertise:"Digital design and prototyping tools",resources:["design software","prototyping platforms","device testing"],output:"Interactive digital experiences",when:"Detailed interaction testing needed"}},{id:"service-blueprints",name:"Service Blueprints",description:"Map front-stage and back-stage service delivery processes",category:"Prototyping",icon:"Map",characteristics:{effort:"High",expertise:"Service design and process mapping",resources:["service mapping tools","stakeholder input","process documentation"],output:"Comprehensive service delivery maps",when:"Service experience design"}}]},{id:"test",name:"Test",description:"Validate solutions with users and gather feedback for iteration",position:{x:800,y:0},characteristics:{duration:"2-3 weeks",participants:"Researchers, designers, users, stakeholders",deliverables:"Test results, insights, recommendations, iteration plan",skills:["usability testing","data analysis","facilitation","insight synthesis"],dependencies:["testable prototypes","user access","testing environment"]},tools:[{id:"usability-tests",name:"Usability Testing",description:"Test prototypes with users to evaluate usability and effectiveness",category:"Testing",icon:"Users",characteristics:{effort:"High",expertise:"Usability testing and research facilitation",resources:["testing lab","recording equipment","test participants","analysis tools"],output:"Usability findings and recommendations",when:"Prototype validation phase"}},{id:"a-b-testing",name:"A/B Testing",description:"Compare different solution variants to identify optimal approaches",category:"Testing",icon:"GitBranch",characteristics:{effort:"Medium",expertise:"Experimental design and statistical analysis",resources:["testing platforms","traffic splitting tools","analytics"],output:"Statistically validated design decisions",when:"Comparing solution alternatives"}},{id:"feedback-sessions",name:"User Feedback Sessions",description:"Gather qualitative feedback through structured user discussions",category:"Testing",icon:"MessageSquare",characteristics:{effort:"Medium",expertise:"Interview facilitation and feedback synthesis",resources:["session space","recording equipment","discussion guides"],output:"Qualitative user feedback and insights",when:"Need for detailed user opinions"}},{id:"analytics-review",name:"Analytics Review",description:"Analyze user behavior data to understand solution performance",category:"Testing",icon:"BarChart3",characteristics:{effort:"Medium",expertise:"Data analysis and interpretation",resources:["analytics tools","tracking implementation","reporting dashboards"],output:"Behavioral insights and performance metrics",when:"Quantitative performance evaluation"}}]}]},{id:"double-diamond",name:"Double Diamond",description:"British Design Council's 4-stage divergent-convergent thinking process",color:"#EF4444",characteristics:{focus:"Problem and solution exploration",timeline:"3-6 months",complexity:"Medium-High",teamSize:"4-10 people",outcome:"Well-defined solutions"},stages:[{id:"discover",name:"Discover",description:"Explore and understand the problem space broadly (Divergent)",position:{x:0,y:0},characteristics:{duration:"3-6 weeks",participants:"Researchers, stakeholders, users, domain experts",deliverables:"Research insights, opportunity areas, problem understanding",skills:["research","stakeholder management","observation","data collection"],dependencies:["project brief","stakeholder access","research resources"]},tools:[{id:"stakeholder-interviews",name:"Stakeholder Interviews",description:"Understand business context and organizational constraints",category:"Research",icon:"Users",characteristics:{effort:"Medium",expertise:"Interview facilitation and stakeholder management",resources:["interview guides","stakeholder mapping","scheduling tools"],output:"Business context and stakeholder perspectives",when:"Project initiation phase"}},{id:"contextual-inquiry",name:"Contextual Inquiry",description:"Observe users in their natural environment and context",category:"Research",icon:"Search",characteristics:{effort:"High",expertise:"Ethnographic research and observation",resources:["field access","observation protocols","documentation tools"],output:"Contextual user insights and environmental understanding",when:"Problem space exploration"}},{id:"desk-research",name:"Desk Research",description:"Gather existing knowledge through secondary research and analysis",category:"Research",icon:"BookOpen",characteristics:{effort:"Medium",expertise:"Research and information synthesis",resources:["research databases","analysis tools","documentation systems"],output:"Market insights and existing knowledge compilation",when:"Foundation building phase"}},{id:"expert-interviews",name:"Expert Interviews",description:"Learn from domain specialists and industry experts",category:"Research",icon:"GraduationCap",characteristics:{effort:"Medium",expertise:"Expert interview facilitation",resources:["expert network access","structured interview guides"],output:"Specialized domain knowledge and insights",when:"Domain understanding needed"}}]},{id:"define-dd",name:"Define",description:"Synthesize insights into focused design brief (Convergent)",position:{x:200,y:0},characteristics:{duration:"2-3 weeks",participants:"Design team, key stakeholders, decision makers",deliverables:"Design brief, focused problem definition, success criteria",skills:["synthesis","problem definition","prioritization","strategic thinking"],dependencies:["research insights","stakeholder alignment","organizational buy-in"]},tools:[{id:"synthesis-workshops",name:"Synthesis Workshops",description:"Collaborative sessions to analyze and synthesize research findings",category:"Analysis",icon:"Target",characteristics:{effort:"High",expertise:"Workshop facilitation and synthesis",resources:["workshop space","research data","facilitation materials","collaboration tools"],output:"Key insights, themes, and opportunity areas",when:"After comprehensive research phase"}},{id:"opportunity-mapping",name:"Opportunity Mapping",description:"Identify and prioritize design opportunities from research insights",category:"Strategy",icon:"MapPin",characteristics:{effort:"Medium",expertise:"Strategic thinking and opportunity assessment",resources:["synthesis insights","prioritization frameworks","stakeholder input"],output:"Prioritized opportunity areas and focus selection",when:"Strategic direction setting"}},{id:"design-principles",name:"Design Principles",description:"Define guiding principles that will inform solution development",category:"Strategy",icon:"Compass",characteristics:{effort:"Medium",expertise:"Strategic design thinking and principle formulation",resources:["synthesis insights","organizational values","stakeholder alignment"],output:"Clear design principles and guidelines",when:"Solution direction guidance needed"}}]},{id:"develop",name:"Develop",description:"Generate and iterate on solution concepts (Divergent)",position:{x:400,y:0},characteristics:{duration:"4-8 weeks",participants:"Designers, developers, product managers, users",deliverables:"Solution concepts, prototypes, tested alternatives",skills:["ideation","prototyping","iteration","user feedback integration"],dependencies:["design brief","technical resources","user access for testing"]},tools:[{id:"co-design-workshops",name:"Co-Design Workshops",description:"Collaborative design sessions with users and stakeholders",category:"Ideation",icon:"Users",characteristics:{effort:"High",expertise:"Workshop facilitation and collaborative design",resources:["workshop space","design materials","diverse participants"],output:"User-informed solution concepts and feedback",when:"Solution co-creation needed"}},{id:"rapid-prototyping",name:"Rapid Prototyping",description:"Quick creation of testable solution representations",category:"Prototyping",icon:"Zap",characteristics:{effort:"Medium",expertise:"Rapid prototyping techniques and tools",resources:["prototyping materials","design tools","testing resources"],output:"Fast iteration cycles and testable prototypes",when:"Quick validation of multiple concepts"}},{id:"concept-testing",name:"Concept Testing",description:"Test early solution concepts with target users",category:"Testing",icon:"TestTube",characteristics:{effort:"Medium",expertise:"Concept testing and user research",resources:["test participants","concept materials","feedback tools"],output:"Concept validation and improvement insights",when:"Early solution validation"}}]},{id:"deliver",name:"Deliver",description:"Implement and launch solutions with optimization (Convergent)",position:{x:600,y:0},characteristics:{duration:"4-8 weeks",participants:"Full delivery team, stakeholders, end users",deliverables:"Final solution, launch plan, success metrics, iteration roadmap",skills:["implementation","project management","launch coordination","performance monitoring"],dependencies:["validated solution","implementation resources","launch readiness"]},tools:[{id:"implementation-planning",name:"Implementation Planning",description:"Create detailed plans for solution rollout and launch",category:"Planning",icon:"Calendar",characteristics:{effort:"High",expertise:"Project management and implementation planning",resources:["planning tools","resource allocation","timeline management"],output:"Comprehensive implementation and launch plans",when:"Solution launch preparation"}},{id:"pilot-testing",name:"Pilot Testing",description:"Small-scale testing to validate solution before full launch",category:"Testing",icon:"PlayCircle",characteristics:{effort:"High",expertise:"Pilot program management and evaluation",resources:["pilot environment","test users","measurement tools"],output:"Pilot results and optimization recommendations",when:"Pre-launch validation"}},{id:"performance-monitoring",name:"Performance Monitoring",description:"Track solution performance and user adoption post-launch",category:"Measurement",icon:"Activity",characteristics:{effort:"Medium",expertise:"Analytics and performance measurement",resources:["monitoring tools","analytics platforms","reporting systems"],output:"Performance insights and optimization opportunities",when:"Post-launch optimization"}}]}]},{id:"google-design-sprint",name:"Google Design Sprint",description:"Google Ventures 5-day rapid prototyping and validation process",color:"#F59E0B",characteristics:{focus:"Rapid validation and decision making",timeline:"1 week (5 days)",complexity:"Low-Medium",teamSize:"5-7 people",outcome:"Validated prototype and clear next steps"},stages:[{id:"understand",name:"Understand (Monday)",description:"Map the problem and pick target for the week",position:{x:0,y:0},characteristics:{duration:"1 day",participants:"Sprint team, subject matter experts, decider",deliverables:"Problem map, target selection, long-term goal",skills:["facilitation","problem mapping","prioritization","expert interviewing"],dependencies:["defined challenge","committed sprint team","expert access"]},tools:[{id:"expert-interviews-sprint",name:"Expert Interviews",description:"Lightning talks with domain experts to build understanding",category:"Research",icon:"GraduationCap",characteristics:{effort:"Medium",expertise:"Interview facilitation and expert coordination",resources:["expert access","structured interview format","note-taking system"],output:"Expert insights and domain knowledge",when:"Monday morning sprint session"}},{id:"problem-mapping-sprint",name:"Problem Mapping",description:"Visual map of the problem space and user journey",category:"Analysis",icon:"Map",characteristics:{effort:"Low",expertise:"Visual mapping and process documentation",resources:["whiteboard","sticky notes","markers"],output:"Visual problem space map",when:"Monday sprint session"}},{id:"target-selection",name:"Target Selection",description:"Choose specific target customer and moment to focus on",category:"Strategy",icon:"Target",characteristics:{effort:"Low",expertise:"Strategic decision making and prioritization",resources:["problem map","team discussion","decision framework"],output:"Focused target selection for sprint week",when:"Monday afternoon decision"}}]},{id:"sketch",name:"Sketch (Tuesday)",description:"Generate solution ideas through individual sketching",position:{x:200,y:0},characteristics:{duration:"1 day",participants:"Sprint team members working individually",deliverables:"Solution sketches, detailed concepts, crazy 8s variations",skills:["sketching","creative thinking","solution development","visual communication"],dependencies:["clear problem understanding","target selection","inspiration research"]},tools:[{id:"four-step-sketching",name:"Four-Step Sketching",description:"Structured sketching process: Notes, Ideas, Crazy 8s, Solution Sketch",category:"Ideation",icon:"PenTool",characteristics:{effort:"Medium",expertise:"Sketching and visual ideation",resources:["paper","pens","timer","reference materials"],output:"Detailed solution sketches and concepts",when:"Tuesday structured sketching sessions"}},{id:"crazy-8s-sprint",name:"Crazy 8s",description:"Rapid sketching exercise - 8 variations in 8 minutes",category:"Ideation",icon:"Zap",characteristics:{effort:"Low",expertise:"Rapid ideation and sketching",resources:["paper","pens","timer"],output:"Multiple quick solution variations",when:"Tuesday afternoon ideation"}},{id:"solution-sketching",name:"Solution Sketching",description:"Detailed three-panel solution sketch with key interactions",category:"Ideation",icon:"FileText",characteristics:{effort:"Medium",expertise:"Detailed sketching and interaction design",resources:["large paper","detailed drawing tools","reference materials"],output:"Comprehensive solution concept sketches",when:"Tuesday final sketching session"}}]},{id:"decide",name:"Decide (Wednesday)",description:"Make decisions on best solutions and create storyboard",position:{x:400,y:0},characteristics:{duration:"1 day",participants:"Full sprint team with decider having final say",deliverables:"Selected solution, detailed storyboard, prototype plan",skills:["decision making","storyboarding","conflict resolution","planning"],dependencies:["solution sketches","decider availability","evaluation criteria"]},tools:[{id:"art-museum",name:"Art Museum",description:"Display all solution sketches for team review and discussion",category:"Evaluation",icon:"Image",characteristics:{effort:"Low",expertise:"Presentation and discussion facilitation",resources:["wall space","sketches display","review materials"],output:"Comprehensive solution overview and initial reactions",when:"Wednesday morning review"}},{id:"heat-map-voting",name:"Heat Map Voting",description:"Team members place dots on interesting parts of solutions",category:"Evaluation",icon:"MousePointer",characteristics:{effort:"Low",expertise:"Voting facilitation and preference collection",resources:["dot stickers","solution sketches","voting guidelines"],output:"Visual representation of team interest and preferences",when:"Wednesday solution evaluation"}},{id:"speed-critique",name:"Speed Critique",description:"Quick 3-minute discussions of each solution concept",category:"Evaluation",icon:"MessageCircle",characteristics:{effort:"Medium",expertise:"Critique facilitation and time management",resources:["timer","discussion framework","note-taking system"],output:"Structured feedback on each solution concept",when:"Wednesday solution review"}},{id:"straw-poll-vote",name:"Straw Poll Vote",description:"Each team member votes for their preferred solution",category:"Evaluation",icon:"Vote",characteristics:{effort:"Low",expertise:"Voting coordination and preference aggregation",resources:["voting materials","preference collection system"],output:"Team preference ranking and discussion points",when:"Wednesday decision process"}},{id:"supervote",name:"Supervote",description:"Decider makes final selection with special supervote",category:"Decision",icon:"Crown",characteristics:{effort:"Low",expertise:"Decision making and rationale communication",resources:["decision framework","selection materials"],output:"Final solution selection and decision rationale",when:"Wednesday final decision"}},{id:"storyboarding",name:"Storyboarding",description:"Create step-by-step storyboard for prototype creation",category:"Planning",icon:"BookOpen",characteristics:{effort:"Medium",expertise:"Storyboarding and flow design",resources:["storyboard template","selected solution","flow planning materials"],output:"Detailed prototype storyboard and user flow",when:"Wednesday afternoon planning"}}]},{id:"prototype",name:"Prototype (Thursday)",description:"Build realistic prototype of selected solution",position:{x:600,y:0},characteristics:{duration:"1 day",participants:"Makers (designers/developers), decider for key decisions",deliverables:"High-fidelity prototype, test script, interview guide",skills:["rapid prototyping","design tools","content creation","user flow implementation"],dependencies:["storyboard","prototyping tools","content and assets","technical setup"]},tools:[{id:"facade-prototyping",name:"Facade Prototyping",description:"Create realistic-looking prototype that simulates final experience",category:"Prototyping",icon:"Smartphone",characteristics:{effort:"High",expertise:"Rapid prototyping and design tool proficiency",resources:["design tools","prototyping software","content materials","technical setup"],output:"High-fidelity interactive prototype",when:"Thursday full-day build session"}},{id:"content-creation",name:"Content Creation",description:"Create realistic content and copy for prototype",category:"Content",icon:"Type",characteristics:{effort:"Medium",expertise:"Content writing and realistic data creation",resources:["content templates","realistic data sources","writing tools"],output:"Realistic prototype content and copy",when:"Thursday prototype building"}},{id:"interview-script",name:"Interview Script",description:"Create script and guide for Friday user testing",category:"Planning",icon:"Script",characteristics:{effort:"Low",expertise:"User testing and interview design",resources:["interview templates","testing objectives","question frameworks"],output:"Complete user testing script and guide",when:"Thursday end-of-day preparation"}}]},{id:"validate",name:"Validate (Friday)",description:"Test prototype with real users and gather feedback",position:{x:800,y:0},characteristics:{duration:"1 day",participants:"Sprint team, 5 target users, facilitator",deliverables:"User feedback, testing insights, next steps recommendations",skills:["user testing","interview facilitation","observation","insight synthesis"],dependencies:["working prototype","recruited test users","testing setup","observation tools"]},tools:[{id:"five-act-interview",name:"Five-Act Interview",description:"Structured user testing format: Welcome, Context, Introduce, Tasks, Debrief",category:"Testing",icon:"Users",characteristics:{effort:"High",expertise:"User testing facilitation and interview skills",resources:["testing environment","prototype setup","observation tools","recording equipment"],output:"Structured user feedback and behavioral observations",when:"Friday testing sessions"}},{id:"observation-capture",name:"Observation Capture",description:"Systematic capture of user behavior and feedback during testing",category:"Research",icon:"Eye",characteristics:{effort:"Medium",expertise:"User observation and note-taking",resources:["observation templates","note-taking tools","behavior tracking systems"],output:"Detailed user behavior observations and quotes",when:"Friday during user testing"}},{id:"five-whys-validation",name:"Five Whys Validation",description:"Deep diving into user responses to understand root motivations",category:"Research",icon:"HelpCircle",characteristics:{effort:"Medium",expertise:"Deep questioning and insight extraction",resources:["questioning frameworks","follow-up protocols"],output:"Deep user insights and root cause understanding",when:"Friday user interview deep dives"}},{id:"pattern-identification",name:"Pattern Identification",description:"Identify patterns across user testing sessions for actionable insights",category:"Analysis",icon:"TrendingUp",characteristics:{effort:"Medium",expertise:"Pattern recognition and insight synthesis",resources:["analysis tools","pattern templates","synthesis materials"],output:"Key patterns and actionable next steps",when:"Friday afternoon synthesis"}},{id:"next-steps-planning",name:"Next Steps Planning",description:"Define clear next steps based on sprint learnings",category:"Planning",icon:"ArrowRight",characteristics:{effort:"Low",expertise:"Strategic planning and decision making",resources:["planning templates","decision frameworks"],output:"Clear next steps and future direction",when:"Friday wrap-up session"}}]}]},{id:"human-centered-design",name:"Human-Centered Design",description:"IDEO methodology focused on deep human understanding and impactful solutions",color:"#10B981",characteristics:{focus:"Human needs and experiences",timeline:"3-9 months",complexity:"Medium-High",teamSize:"4-12 people",outcome:"Impactful, human-centered solutions"},stages:[{id:"hear",name:"Hear",description:"Understand people and their context through deep empathy and research",position:{x:0,y:0},characteristics:{duration:"4-8 weeks",participants:"Researchers, community members, local partners",deliverables:"Deep user insights, stories, cultural understanding",skills:["empathy","listening","cultural sensitivity","community engagement"],dependencies:["community access","trust building","local partnerships"]},tools:[{id:"immersion",name:"Immersion",description:"Spend extended time in the community to understand context deeply",category:"Research",icon:"Heart",characteristics:{effort:"High",expertise:"Cultural sensitivity and community engagement",resources:["time commitment","local access","community trust"],output:"Deep contextual understanding and authentic relationships",when:"Beginning of HCD process"}},{id:"individual-interviews-hcd",name:"Individual Interviews",description:"One-on-one conversations to understand personal experiences and needs",category:"Research",icon:"MessageCircle",characteristics:{effort:"High",expertise:"Empathetic interviewing and active listening",resources:["interview guides","translation support","safe spaces"],output:"Personal stories and individual perspectives",when:"Deep understanding phase"}},{id:"group-interviews",name:"Group Interviews",description:"Facilitated discussions with multiple community members",category:"Research",icon:"Users",characteristics:{effort:"Medium",expertise:"Group facilitation and community dynamics",resources:["meeting spaces","facilitation materials","cultural protocols"],output:"Community perspectives and group dynamics insights",when:"Community understanding phase"}},{id:"self-documentation",name:"Self-Documentation",description:"Tools for community members to document their own experiences",category:"Research",icon:"Camera",characteristics:{effort:"Medium",expertise:"Tool design and community training",resources:["documentation tools","training materials","ongoing support"],output:"Authentic self-reported experiences and perspectives",when:"Empowering community voice"}},{id:"guided-tours",name:"Guided Tours",description:"Community members show researchers their environment and daily routines",category:"Research",icon:"Map",characteristics:{effort:"Medium",expertise:"Observational skills and environmental analysis",resources:["time allocation","documentation tools","respectful protocols"],output:"Environmental insights and spatial understanding",when:"Context exploration phase"}}]},{id:"create",name:"Create",description:"Turn insights into innovative solutions through collaborative ideation",position:{x:200,y:0},characteristics:{duration:"3-6 weeks",participants:"Design team, community representatives, stakeholders",deliverables:"Solution concepts, prototypes, tested ideas",skills:["ideation","co-creation","prototyping","iteration"],dependencies:["synthesized insights","community partnership","creative resources"]},tools:[{id:"downloadable-insights",name:"Downloadable Insights",description:"Extract key insights and patterns from research for ideation",category:"Analysis",icon:"Download",characteristics:{effort:"Medium",expertise:"Insight synthesis and pattern recognition",resources:["analysis tools","synthesis frameworks","collaborative spaces"],output:"Clear, actionable insights and opportunity areas",when:"Transition from research to ideation"}},{id:"brainstorm-solutions",name:"Brainstorm Solutions",description:"Generate diverse solution ideas based on insights",category:"Ideation",icon:"Lightbulb",characteristics:{effort:"Medium",expertise:"Creative facilitation and solution development",resources:["ideation materials","diverse perspectives","creative environments"],output:"Wide range of potential solution concepts",when:"Solution generation phase"}},{id:"bundle-ideas",name:"Bundle Ideas",description:"Group related ideas into coherent solution concepts",category:"Analysis",icon:"Package",characteristics:{effort:"Low",expertise:"Categorization and conceptual thinking",resources:["idea organization tools","grouping materials"],output:"Organized solution concepts and themes",when:"Idea synthesis and organization"}},{id:"make-prototypes",name:"Make Prototypes",description:"Create tangible representations of solution concepts",category:"Prototyping",icon:"Wrench",characteristics:{effort:"High",expertise:"Prototyping and making skills",resources:["prototyping materials","making tools","testing environments"],output:"Testable prototypes and tangible concepts",when:"Solution development and testing"}},{id:"get-feedback",name:"Get Feedback",description:"Test prototypes with community members and gather input",category:"Testing",icon:"MessageSquare",characteristics:{effort:"Medium",expertise:"Feedback facilitation and community engagement",resources:["feedback tools","community access","testing protocols"],output:"Community feedback and solution validation",when:"Prototype testing and refinement"}}]},{id:"deliver",name:"Deliver",description:"Implement solutions with financial sustainability and long-term impact",position:{x:400,y:0},characteristics:{duration:"6-12 weeks",participants:"Implementation team, community, local organizations",deliverables:"Launched solution, sustainability plan, impact measurement",skills:["implementation","business planning","community mobilization","impact measurement"],dependencies:["validated solution","implementation resources","community buy-in"]},tools:[{id:"revenue-streams",name:"Revenue Streams",description:"Develop sustainable business models and funding approaches",category:"Business",icon:"DollarSign",characteristics:{effort:"High",expertise:"Business model development and financial planning",resources:["financial modeling tools","market research","stakeholder input"],output:"Viable business model and revenue strategy",when:"Sustainability planning phase"}},{id:"capabilities-assessment",name:"Capabilities Assessment",description:"Evaluate organizational capacity for solution delivery",category:"Analysis",icon:"CheckCircle",characteristics:{effort:"Medium",expertise:"Organizational assessment and capacity building",resources:["assessment frameworks","organizational analysis tools"],output:"Capacity assessment and development plan",when:"Implementation planning phase"}},{id:"implementation-timeline",name:"Implementation Timeline",description:"Create detailed timeline for solution rollout and scaling",category:"Planning",icon:"Calendar",characteristics:{effort:"Medium",expertise:"Project planning and timeline management",resources:["planning tools","resource allocation","stakeholder coordination"],output:"Detailed implementation plan and timeline",when:"Launch preparation phase"}},{id:"pilot-implementation",name:"Pilot Implementation",description:"Launch small-scale version to test and refine before full rollout",category:"Implementation",icon:"PlayCircle",characteristics:{effort:"High",expertise:"Pilot program management and evaluation",resources:["pilot resources","monitoring systems","feedback mechanisms"],output:"Pilot results and refinement recommendations",when:"Initial solution launch"}},{id:"impact-measurement",name:"Impact Measurement",description:"Track and measure solution impact on target community",category:"Measurement",icon:"BarChart",characteristics:{effort:"Medium",expertise:"Impact assessment and data analysis",resources:["measurement tools","data collection systems","analysis capabilities"],output:"Impact metrics and success indicators",when:"Post-launch evaluation and iteration"}}]}]},{id:"jobs-to-be-done",name:"Jobs-to-Be-Done",description:"Clayton Christensen methodology focusing on customer job completion",color:"#8B5CF6",characteristics:{focus:"Customer job completion and outcomes",timeline:"2-4 months",complexity:"Medium",teamSize:"3-6 people",outcome:"Job-centered solutions and innovations"},stages:[{id:"job-mapping",name:"Job Mapping",description:"Map the complete customer job process and context",position:{x:0,y:0},characteristics:{duration:"2-4 weeks",participants:"Researchers, product team, customer representatives",deliverables:"Job maps, job statements, customer journey analysis",skills:["job analysis","process mapping","customer research","journey mapping"],dependencies:["customer access","job definition","research resources"]},tools:[{id:"job-steps",name:"Job Steps Analysis",description:"Break down customer job into discrete, sequential steps",category:"Analysis",icon:"List",characteristics:{effort:"High",expertise:"Process analysis and customer job understanding",resources:["customer interviews","observation data","analysis frameworks"],output:"Detailed job step documentation and process maps",when:"Initial job understanding phase"}},{id:"job-statements",name:"Job Statements",description:"Define customer jobs in functional language and context",category:"Definition",icon:"FileText",characteristics:{effort:"Medium",expertise:"Job definition and functional language development",resources:["customer research","job statement templates","validation methods"],output:"Clear, functional job statements and definitions",when:"Job definition and validation phase"}},{id:"job-context-analysis",name:"Job Context Analysis",description:"Understand when, where, and why customers perform jobs",category:"Research",icon:"MapPin",characteristics:{effort:"Medium",expertise:"Contextual analysis and situational research",resources:["contextual inquiry","environmental mapping","situational data"],output:"Comprehensive job context understanding",when:"Environmental and situational analysis"}},{id:"emotional-job-mapping",name:"Emotional Job Mapping",description:"Map emotional and social dimensions of customer jobs",category:"Analysis",icon:"Heart",characteristics:{effort:"Medium",expertise:"Emotional analysis and social dynamics understanding",resources:["emotional research methods","social mapping tools"],output:"Emotional and social job dimension maps",when:"Comprehensive job understanding phase"}}]},{id:"outcomes",name:"Outcomes",description:"Define desired outcomes and success metrics for each job step",position:{x:200,y:0},characteristics:{duration:"2-3 weeks",participants:"Product team, customers, outcome measurement specialists",deliverables:"Outcome statements, success metrics, opportunity areas",skills:["outcome definition","metrics development","opportunity assessment"],dependencies:["job map completion","customer validation","measurement capabilities"]},tools:[{id:"outcome-statements",name:"Outcome Statements",description:"Define measurable desired outcomes for each job step",category:"Definition",icon:"Target",characteristics:{effort:"High",expertise:"Outcome definition and measurement design",resources:["outcome frameworks","customer input","measurement tools"],output:"Clear, measurable outcome statements",when:"Outcome definition phase"}},{id:"opportunity-scoring",name:"Opportunity Scoring",description:"Score outcomes based on importance and satisfaction gaps",category:"Analysis",icon:"TrendingUp",characteristics:{effort:"Medium",expertise:"Quantitative analysis and opportunity assessment",resources:["scoring frameworks","customer surveys","analysis tools"],output:"Prioritized opportunity areas and innovation targets",when:"Opportunity identification and prioritization"}},{id:"underserved-outcomes",name:"Underserved Outcomes",description:"Identify outcomes that are important but poorly satisfied",category:"Analysis",icon:"AlertTriangle",characteristics:{effort:"Medium",expertise:"Gap analysis and innovation opportunity identification",resources:["satisfaction measurement","importance rating","gap analysis tools"],output:"Underserved outcome identification and innovation opportunities",when:"Innovation opportunity discovery"}},{id:"outcome-validation",name:"Outcome Validation",description:"Validate outcome importance and current satisfaction with customers",category:"Research",icon:"CheckCircle",characteristics:{effort:"High",expertise:"Customer research and validation methods",resources:["validation surveys","customer interviews","statistical analysis"],output:"Validated outcome importance and satisfaction data",when:"Outcome validation and confirmation"}}]},{id:"solutions",name:"Solutions",description:"Design solutions that help customers achieve desired outcomes",position:{x:400,y:0},characteristics:{duration:"3-6 weeks",participants:"Product team, designers, developers, customers",deliverables:"Solution concepts, job-centered designs, validation results",skills:["solution design","job-centered innovation","outcome optimization"],dependencies:["outcome priorities","solution resources","validation capabilities"]},tools:[{id:"solution-ideation",name:"Job-Centered Solution Ideation",description:"Generate solutions focused on helping customers get jobs done better",category:"Ideation",icon:"Lightbulb",characteristics:{effort:"Medium",expertise:"Job-centered thinking and solution development",resources:["ideation frameworks","job insights","creative tools"],output:"Job-focused solution concepts and ideas",when:"Solution generation phase"}},{id:"outcome-driven-features",name:"Outcome-Driven Features",description:"Design features that directly address underserved outcomes",category:"Design",icon:"Settings",characteristics:{effort:"High",expertise:"Feature design and outcome optimization",resources:["design tools","outcome data","development resources"],output:"Features designed to improve specific outcomes",when:"Feature definition and design"}},{id:"job-story-creation",name:"Job Story Creation",description:"Create job stories that guide solution development",category:"Planning",icon:"BookOpen",characteristics:{effort:"Medium",expertise:"Job story development and narrative design",resources:["story templates","job context data","outcome information"],output:"Compelling job stories and development guidance",when:"Solution planning and development guidance"}},{id:"solution-validation",name:"Job-Centered Solution Validation",description:"Test solutions against job completion effectiveness",category:"Testing",icon:"TestTube",characteristics:{effort:"High",expertise:"Job-centered testing and outcome measurement",resources:["testing environments","outcome metrics","customer access"],output:"Solution effectiveness and job completion improvement data",when:"Solution testing and optimization"}}]}]},{id:"lean-ux",name:"Lean UX",description:"Jeff Gothelf methodology combining Lean Startup principles with UX design",color:"#06B6D4",characteristics:{focus:"Rapid experimentation and validated learning",timeline:"2-4 months (iterative cycles)",complexity:"Medium",teamSize:"3-8 people",outcome:"Validated design decisions and user insights"},stages:[{id:"hypothesize",name:"Hypothesize",description:"Form testable assumptions about users, business, and solutions",position:{x:0,y:0},characteristics:{duration:"1-2 weeks",participants:"Product team, stakeholders, domain experts",deliverables:"Hypothesis statements, assumptions map, experiment plan",skills:["hypothesis formation","assumption mapping","risk assessment","experiment design"],dependencies:["problem understanding","team alignment","baseline metrics"]},tools:[{id:"hypothesis-canvas",name:"Hypothesis Canvas",description:"Structure testable assumptions using problem/solution/outcome format",category:"Strategy",icon:"TestTube2",characteristics:{effort:"Medium",expertise:"Hypothesis formation and structured thinking",resources:["hypothesis templates","team collaboration tools","assumption frameworks"],output:"Clear, testable hypothesis statements",when:"Beginning of each iteration cycle"}},{id:"assumption-mapping",name:"Assumption Mapping",description:"Map and prioritize assumptions based on risk and knowledge",category:"Analysis",icon:"Map",characteristics:{effort:"Medium",expertise:"Risk assessment and assumption analysis",resources:["mapping tools","prioritization frameworks","team input"],output:"Prioritized assumption map and testing roadmap",when:"Hypothesis prioritization phase"}},{id:"proto-personas",name:"Proto-Personas",description:"Create provisional personas based on assumptions to be validated",category:"Research",icon:"UserCircle",characteristics:{effort:"Low",expertise:"User modeling and persona creation",resources:["persona templates","assumption data","team knowledge"],output:"Provisional user personas for testing",when:"User assumption definition"}},{id:"problem-statements-lean",name:"Problem Statements",description:"Define clear problem statements based on assumptions",category:"Strategy",icon:"Target",characteristics:{effort:"Low",expertise:"Problem definition and strategic thinking",resources:["problem templates","user assumptions","business context"],output:"Clear problem definitions for validation",when:"Problem assumption formulation"}}]},{id:"experiment",name:"Experiment",description:"Design and run experiments to test hypotheses rapidly",position:{x:200,y:0},characteristics:{duration:"2-4 weeks",participants:"Design team, developers, researchers, test users",deliverables:"MVPs, prototypes, experiment results, user feedback",skills:["experiment design","rapid prototyping","user testing","data collection"],dependencies:["clear hypotheses","testing resources","user access","measurement tools"]},tools:[{id:"mvp-creation",name:"MVP Creation",description:"Build minimum viable products to test core assumptions",category:"Prototyping",icon:"Rocket",characteristics:{effort:"High",expertise:"Rapid development and MVP design",resources:["development tools","prototyping resources","testing environments"],output:"Functional MVPs for user testing",when:"Solution hypothesis testing"}},{id:"split-testing",name:"A/B Split Testing",description:"Test different variations to validate design decisions",category:"Testing",icon:"GitBranch",characteristics:{effort:"Medium",expertise:"Experimental design and statistical analysis",resources:["testing platforms","traffic splitting","analytics tools"],output:"Statistically significant test results",when:"Comparative hypothesis testing"}},{id:"fake-door-testing",name:"Fake Door Testing",description:"Test feature demand before building full functionality",category:"Testing",icon:"DoorOpen",characteristics:{effort:"Low",expertise:"Demand testing and user behavior analysis",resources:["landing page tools","analytics tracking","user communication"],output:"Feature demand validation and user interest metrics",when:"Feature demand hypothesis testing"}},{id:"usability-testing-lean",name:"Rapid Usability Testing",description:"Quick usability tests with minimal setup and maximum learning",category:"Testing",icon:"Users",characteristics:{effort:"Medium",expertise:"Rapid testing and insight extraction",resources:["testing tools","user access","observation methods"],output:"Quick usability insights and behavior observations",when:"Usability hypothesis validation"}},{id:"wizard-of-oz",name:"Wizard of Oz Testing",description:"Simulate functionality manually to test user behavior",category:"Testing",icon:"Wand2",characteristics:{effort:"Medium",expertise:"Service simulation and user interaction design",resources:["manual process setup","user interaction tools","backend simulation"],output:"User behavior insights without full development",when:"Complex functionality hypothesis testing"}}]},{id:"learn",name:"Learn",description:"Analyze results and apply learnings to inform next iteration",position:{x:400,y:0},characteristics:{duration:"1-2 weeks",participants:"Full team, stakeholders, data analysts",deliverables:"Learning synthesis, validated insights, next iteration plan",skills:["data analysis","insight synthesis","decision making","iteration planning"],dependencies:["experiment completion","data collection","analysis tools","team reflection"]},tools:[{id:"learning-synthesis",name:"Learning Synthesis",description:"Synthesize experiment results into actionable insights",category:"Analysis",icon:"Brain",characteristics:{effort:"High",expertise:"Data analysis and insight synthesis",resources:["analysis tools","synthesis frameworks","collaboration spaces"],output:"Clear learning statements and validated insights",when:"Post-experiment analysis phase"}},{id:"validated-learning",name:"Validated Learning",description:"Document what was learned and what assumptions were validated",category:"Documentation",icon:"CheckCircle",characteristics:{effort:"Medium",expertise:"Learning documentation and knowledge capture",resources:["documentation tools","learning templates","validation criteria"],output:"Documented validated learning and assumption updates",when:"Learning capture and documentation"}},{id:"pivot-or-persevere",name:"Pivot or Persevere Decision",description:"Decide whether to continue current direction or pivot based on learning",category:"Strategy",icon:"RotateCcw",characteristics:{effort:"Medium",expertise:"Strategic decision making and direction setting",resources:["decision frameworks","learning analysis","stakeholder input"],output:"Clear strategic direction and rationale",when:"Strategic direction assessment"}},{id:"next-iteration-planning",name:"Next Iteration Planning",description:"Plan next cycle based on validated learning and new hypotheses",category:"Planning",icon:"RefreshCw",characteristics:{effort:"Medium",expertise:"Iterative planning and hypothesis evolution",resources:["planning tools","learning insights","team coordination"],output:"Next iteration plan and updated hypotheses",when:"Cycle transition and planning"}},{id:"metrics-review",name:"Metrics Review",description:"Review key metrics and success criteria based on learning",category:"Measurement",icon:"BarChart3",characteristics:{effort:"Medium",expertise:"Metrics analysis and performance assessment",resources:["analytics tools","measurement frameworks","performance data"],output:"Metrics insights and measurement plan updates",when:"Performance assessment and metrics evolution"}}]}]},{id:"agile-ux",name:"Agile UX",description:"UX methodology integrated with Agile development processes",color:"#8B5CF6",characteristics:{focus:"Continuous UX improvement in Agile sprints",timeline:"Ongoing (2-week sprint cycles)",complexity:"Medium-High",teamSize:"4-12 people",outcome:"Continuously improved user experience"},stages:[{id:"plan",name:"Plan",description:"Plan UX work within sprint cycles and align with development",position:{x:0,y:0},characteristics:{duration:"1-2 days",participants:"UX team, product owner, scrum master, developers",deliverables:"Sprint UX goals, task breakdown, design requirements",skills:["sprint planning","task estimation","prioritization","team coordination"],dependencies:["product backlog","sprint goals","team capacity","user research insights"]},tools:[{id:"user-story-mapping",name:"User Story Mapping",description:"Map user journey to features and development tasks",category:"Planning",icon:"MapPin",characteristics:{effort:"High",expertise:"Story mapping and journey visualization",resources:["mapping tools","user journey data","feature requirements"],output:"Visual user story maps and feature prioritization",when:"Sprint and release planning"}},{id:"design-debt-tracking",name:"Design Debt Tracking",description:"Track and prioritize UX improvements and design technical debt",category:"Planning",icon:"AlertCircle",characteristics:{effort:"Medium",expertise:"Design quality assessment and debt management",resources:["tracking tools","design audits","prioritization frameworks"],output:"Design debt backlog and improvement roadmap",when:"Continuous design quality management"}},{id:"ux-sprint-goals",name:"UX Sprint Goals",description:"Define specific UX objectives for each sprint cycle",category:"Planning",icon:"Target",characteristics:{effort:"Low",expertise:"Goal setting and UX strategy alignment",resources:["goal templates","success metrics","team input"],output:"Clear UX objectives and success criteria for sprint",when:"Sprint planning and goal setting"}},{id:"design-system-planning",name:"Design System Planning",description:"Plan design system contributions and updates for sprint",category:"Planning",icon:"Package",characteristics:{effort:"Medium",expertise:"Design system management and component planning",resources:["design system tools","component libraries","usage analytics"],output:"Design system roadmap and component development plan",when:"Design system evolution and maintenance"}}]},{id:"design",name:"Design",description:"Create designs that integrate with development workflow",position:{x:200,y:0},characteristics:{duration:"3-8 days (parallel to development)",participants:"UX designers, UI designers, developers, product owner",deliverables:"Designs, prototypes, specifications, design system updates",skills:["rapid design","design systems","developer collaboration","specification creation"],dependencies:["design requirements","technical constraints","design system","user research"]},tools:[{id:"design-sprints-micro",name:"Micro Design Sprints",description:"Shortened design sprints focused on specific features or problems",category:"Design",icon:"Zap",characteristics:{effort:"High",expertise:"Rapid design thinking and sprint facilitation",resources:["sprint materials","time-boxed sessions","cross-functional team"],output:"Quick design solutions and validated concepts",when:"Feature design and problem solving"}},{id:"component-design",name:"Component Design",description:"Design reusable components for design system and development",category:"Design",icon:"Puzzle",characteristics:{effort:"Medium",expertise:"Component thinking and design system development",resources:["design tools","component libraries","developer collaboration"],output:"Reusable design components and specifications",when:"Design system building and feature development"}},{id:"collaborative-design",name:"Collaborative Design Sessions",description:"Real-time design sessions with developers and stakeholders",category:"Design",icon:"Users",characteristics:{effort:"Medium",expertise:"Collaborative design and facilitation",resources:["collaborative tools","shared design spaces","real-time communication"],output:"Collaboratively created designs and shared understanding",when:"Cross-functional design and problem solving"}},{id:"responsive-design",name:"Responsive Design",description:"Design adaptive experiences across devices and screen sizes",category:"Design",icon:"Monitor",characteristics:{effort:"High",expertise:"Responsive design and multi-device thinking",resources:["design tools","device testing","responsive frameworks"],output:"Multi-device design solutions and specifications",when:"Cross-platform feature development"}}]},{id:"build",name:"Build",description:"Collaborate with development during implementation phase",position:{x:400,y:0},characteristics:{duration:"5-10 days (parallel to design)",participants:"Developers, UX designers, QA testers",deliverables:"Implemented features, design QA, developer guidance",skills:["design QA","developer collaboration","implementation guidance","design handoff"],dependencies:["finalized designs","developer resources","technical specifications"]},tools:[{id:"design-handoff",name:"Design Handoff",description:"Systematic transfer of designs to development with specifications",category:"Collaboration",icon:"ArrowRight",characteristics:{effort:"Medium",expertise:"Design specification and developer communication",resources:["handoff tools","specification templates","design assets"],output:"Complete design specifications and developer resources",when:"Design to development transition"}},{id:"design-qa",name:"Design QA",description:"Quality assurance review of implemented designs",category:"Quality",icon:"CheckSquare",characteristics:{effort:"Medium",expertise:"Design quality assessment and feedback",resources:["QA tools","design comparison","testing devices"],output:"Design implementation feedback and improvement recommendations",when:"Implementation review and quality assurance"}},{id:"developer-pairing",name:"Developer Pairing",description:"Work directly with developers during complex implementation",category:"Collaboration",icon:"Code",characteristics:{effort:"High",expertise:"Technical collaboration and problem solving",resources:["development environment access","pairing tools","shared workspace"],output:"High-quality implementation and shared technical understanding",when:"Complex feature implementation"}},{id:"implementation-documentation",name:"Implementation Documentation",description:"Document design decisions and implementation guidance",category:"Documentation",icon:"FileText",characteristics:{effort:"Low",expertise:"Technical writing and design documentation",resources:["documentation tools","design rationale","implementation notes"],output:"Implementation guides and design decision records",when:"Knowledge capture and team learning"}}]},{id:"test",name:"Test",description:"Test implemented features with users and stakeholders",position:{x:600,y:0},characteristics:{duration:"2-5 days",participants:"UX researchers, users, QA testers, stakeholders",deliverables:"Test results, user feedback, improvement recommendations",skills:["rapid testing","feedback collection","usability assessment","data analysis"],dependencies:["implemented features","test users","testing environment","measurement tools"]},tools:[{id:"guerrilla-testing",name:"Guerrilla Testing",description:"Quick, informal usability testing with minimal setup",category:"Testing",icon:"Zap",characteristics:{effort:"Low",expertise:"Rapid testing and informal research",resources:["mobile testing setup","quick access to users","simple recording"],output:"Quick usability insights and immediate feedback",when:"Fast feedback and early validation"}},{id:"stakeholder-review",name:"Stakeholder Review",description:"Structured review sessions with key stakeholders",category:"Testing",icon:"Users",characteristics:{effort:"Medium",expertise:"Stakeholder management and presentation",resources:["presentation tools","demo environment","feedback collection"],output:"Stakeholder feedback and approval or change requests",when:"Stakeholder validation and buy-in"}},{id:"analytics-review",name:"Analytics Review",description:"Review user behavior analytics for implemented features",category:"Measurement",icon:"BarChart",characteristics:{effort:"Medium",expertise:"Analytics interpretation and behavioral analysis",resources:["analytics tools","data dashboards","reporting systems"],output:"User behavior insights and performance metrics",when:"Post-implementation performance assessment"}},{id:"accessibility-testing",name:"Accessibility Testing",description:"Test features for accessibility compliance and usability",category:"Testing",icon:"Eye",characteristics:{effort:"Medium",expertise:"Accessibility standards and assistive technology",resources:["accessibility tools","screen readers","testing guidelines"],output:"Accessibility assessment and compliance recommendations",when:"Inclusive design validation"}}]},{id:"iterate",name:"Iterate",description:"Apply learnings and continuously improve based on feedback",position:{x:800,y:0},characteristics:{duration:"1-3 days",participants:"Full team, stakeholders, product owner",deliverables:"Iteration plan, backlog updates, improvement roadmap",skills:["retrospective analysis","continuous improvement","backlog management","team learning"],dependencies:["test results","team feedback","stakeholder input","iteration capacity"]},tools:[{id:"sprint-retrospective",name:"UX Sprint Retrospective",description:"Reflect on UX work and identify improvements for next sprint",category:"Process",icon:"RotateCcw",characteristics:{effort:"Medium",expertise:"Retrospective facilitation and team improvement",resources:["retrospective formats","feedback tools","improvement frameworks"],output:"Process improvements and team learning outcomes",when:"End of sprint reflection and planning"}},{id:"backlog-refinement",name:"UX Backlog Refinement",description:"Update UX backlog based on learnings and new priorities",category:"Planning",icon:"List",characteristics:{effort:"Medium",expertise:"Backlog management and UX prioritization",resources:["backlog tools","prioritization criteria","team input"],output:"Refined UX backlog and updated priorities",when:"Continuous backlog maintenance and planning"}},{id:"continuous-research",name:"Continuous Research Planning",description:"Plan ongoing research based on sprint learnings and gaps",category:"Research",icon:"Search",characteristics:{effort:"Low",expertise:"Research planning and gap analysis",resources:["research tools","knowledge gaps assessment","user access"],output:"Research plan and continuous learning strategy",when:"Ongoing research planning and execution"}},{id:"design-system-updates",name:"Design System Updates",description:"Update design system based on sprint learnings and new patterns",category:"Design",icon:"RefreshCw",characteristics:{effort:"Medium",expertise:"Design system evolution and pattern recognition",resources:["design system tools","pattern libraries","usage data"],output:"Updated design system and improved patterns",when:"Design system maintenance and evolution"}}]}]},{id:"heart-framework",name:"HEART Framework",description:"Google UX measurement framework for comprehensive user experience metrics",color:"#EF4444",characteristics:{focus:"UX measurement and metrics-driven improvement",timeline:"2-6 months (ongoing measurement)",complexity:"Medium-High",teamSize:"3-8 people",outcome:"Data-driven UX insights and continuous improvement"},stages:[{id:"happiness",name:"Happiness",description:"Measure user satisfaction, attitudes, and perceived quality of experience",position:{x:0,y:0},characteristics:{duration:"2-4 weeks setup + ongoing",participants:"UX researchers, data analysts, product team",deliverables:"Satisfaction metrics, user sentiment data, happiness trends",skills:["survey design","sentiment analysis","data interpretation","user feedback collection"],dependencies:["user access","measurement tools","baseline data"]},tools:[{id:"nps-surveys",name:"Net Promoter Score (NPS)",description:"Measure user loyalty and likelihood to recommend",category:"Measurement",icon:"Heart",characteristics:{effort:"Low",expertise:"Survey design and NPS analysis",resources:["survey tools","user contact list","analysis platforms"],output:"NPS scores and user loyalty insights",when:"Regular intervals and post-experience"}},{id:"satisfaction-surveys",name:"User Satisfaction Surveys",description:"Detailed surveys to understand user satisfaction drivers",category:"Measurement",icon:"ClipboardList",characteristics:{effort:"Medium",expertise:"Survey methodology and satisfaction measurement",resources:["survey platforms","question libraries","statistical analysis tools"],output:"Comprehensive satisfaction data and improvement areas",when:"Post-interaction and periodic assessment"}},{id:"sentiment-analysis",name:"Sentiment Analysis",description:"Analyze user reviews, feedback, and social mentions for sentiment",category:"Analysis",icon:"MessageCircle",characteristics:{effort:"Medium",expertise:"Text analysis and sentiment interpretation",resources:["sentiment analysis tools","text data sources","natural language processing"],output:"Sentiment trends and emotional response insights",when:"Continuous monitoring and analysis"}},{id:"app-store-ratings",name:"App Store Ratings Analysis",description:"Monitor and analyze app store ratings and reviews",category:"Measurement",icon:"Star",characteristics:{effort:"Low",expertise:"Rating analysis and review interpretation",resources:["app store analytics","review monitoring tools"],output:"Rating trends and user feedback insights",when:"Continuous monitoring and regular reporting"}}]},{id:"engagement",name:"Engagement",description:"Measure user activity levels and depth of product interaction",position:{x:200,y:0},characteristics:{duration:"1-2 weeks setup + ongoing",participants:"Data analysts, product managers, UX team",deliverables:"Engagement metrics, usage patterns, activity trends",skills:["analytics setup","user behavior analysis","engagement measurement"],dependencies:["analytics tools","tracking implementation","user activity data"]},tools:[{id:"session-analytics",name:"Session Analytics",description:"Track session length, frequency, and user activity patterns",category:"Analytics",icon:"Clock",characteristics:{effort:"Medium",expertise:"Analytics setup and session analysis",resources:["analytics platforms","tracking implementation","data visualization"],output:"Session insights and usage pattern analysis",when:"Continuous tracking and regular analysis"}},{id:"feature-usage-tracking",name:"Feature Usage Tracking",description:"Measure which features users engage with most frequently",category:"Analytics",icon:"BarChart3",characteristics:{effort:"High",expertise:"Feature tracking and usage analysis",resources:["event tracking tools","feature instrumentation","analytics dashboards"],output:"Feature popularity and usage insights",when:"Feature release and ongoing optimization"}},{id:"user-flow-analysis",name:"User Flow Analysis",description:"Analyze common user paths and navigation patterns",category:"Analytics",icon:"GitBranch",characteristics:{effort:"Medium",expertise:"Flow analysis and path visualization",resources:["user flow tools","path analysis software","funnel tracking"],output:"User journey insights and navigation optimization opportunities",when:"User journey optimization and flow improvement"}},{id:"content-engagement",name:"Content Engagement Metrics",description:"Track user interaction with content, uploads, shares, and contributions",category:"Analytics",icon:"Share2",characteristics:{effort:"Medium",expertise:"Content analytics and engagement measurement",resources:["content tracking tools","social analytics","interaction monitoring"],output:"Content performance and user contribution insights",when:"Content strategy optimization and community building"}}]},{id:"adoption",name:"Adoption",description:"Measure new user acquisition and feature adoption rates",position:{x:400,y:0},characteristics:{duration:"1-2 weeks setup + ongoing",participants:"Product managers, marketing team, data analysts",deliverables:"Adoption metrics, conversion rates, onboarding effectiveness",skills:["conversion tracking","cohort analysis","adoption measurement"],dependencies:["user acquisition data","conversion tracking","feature usage analytics"]},tools:[{id:"new-user-onboarding",name:"New User Onboarding Metrics",description:"Track how effectively new users complete initial setup and first use",category:"Analytics",icon:"UserPlus",characteristics:{effort:"High",expertise:"Onboarding analysis and conversion tracking",resources:["funnel tracking","onboarding analytics","user journey mapping"],output:"Onboarding success rates and improvement opportunities",when:"Onboarding optimization and new user experience improvement"}},{id:"feature-adoption-rates",name:"Feature Adoption Rates",description:"Measure percentage of users who adopt new features",category:"Analytics",icon:"TrendingUp",characteristics:{effort:"Medium",expertise:"Feature adoption analysis and trend tracking",resources:["feature tracking","adoption analytics","cohort analysis tools"],output:"Feature adoption insights and launch effectiveness",when:"Feature launch and adoption improvement"}},{id:"conversion-funnels",name:"Conversion Funnels",description:"Track user progression through key conversion paths",category:"Analytics",icon:"Filter",characteristics:{effort:"High",expertise:"Funnel analysis and conversion optimization",resources:["funnel tracking tools","conversion analytics","A/B testing platforms"],output:"Conversion insights and optimization opportunities",when:"Conversion optimization and user journey improvement"}},{id:"time-to-value",name:"Time to Value",description:"Measure how quickly users reach their first meaningful interaction",category:"Analytics",icon:"Zap",characteristics:{effort:"Medium",expertise:"Value measurement and time-based analysis",resources:["event tracking","time analysis tools","user journey analytics"],output:"Time to value insights and onboarding optimization",when:"User experience optimization and value delivery improvement"}}]},{id:"retention",name:"Retention",description:"Measure user return rates and long-term engagement patterns",position:{x:600,y:0},characteristics:{duration:"1-2 weeks setup + ongoing",participants:"Data analysts, product team, customer success",deliverables:"Retention metrics, churn analysis, loyalty insights",skills:["cohort analysis","churn prediction","loyalty measurement"],dependencies:["user tracking","longitudinal data","segmentation capabilities"]},tools:[{id:"cohort-analysis",name:"Cohort Analysis",description:"Track user retention patterns across different time periods and user groups",category:"Analytics",icon:"Users",characteristics:{effort:"High",expertise:"Cohort analysis and retention modeling",resources:["cohort analysis tools","longitudinal data","segmentation platforms"],output:"Retention patterns and user lifecycle insights",when:"Retention optimization and user lifecycle management"}},{id:"churn-analysis",name:"Churn Analysis",description:"Identify patterns and predictors of user churn",category:"Analytics",icon:"UserMinus",characteristics:{effort:"High",expertise:"Churn modeling and predictive analysis",resources:["churn analysis tools","machine learning platforms","user behavior data"],output:"Churn insights and retention improvement strategies",when:"Churn prevention and retention strategy development"}},{id:"repeat-usage-tracking",name:"Repeat Usage Tracking",description:"Monitor frequency of user returns and usage consistency",category:"Analytics",icon:"RefreshCw",characteristics:{effort:"Medium",expertise:"Usage pattern analysis and frequency tracking",resources:["usage analytics","frequency tracking tools","user behavior platforms"],output:"Usage consistency insights and engagement patterns",when:"Engagement optimization and habit formation analysis"}},{id:"lifecycle-value",name:"Customer Lifecycle Value",description:"Calculate long-term value and engagement over user lifecycle",category:"Analytics",icon:"DollarSign",characteristics:{effort:"High",expertise:"Lifecycle analysis and value calculation",resources:["value tracking tools","lifecycle analytics","business intelligence platforms"],output:"Lifecycle value insights and retention ROI",when:"Business value optimization and retention investment prioritization"}}]},{id:"task-success",name:"Task Success",description:"Measure user effectiveness, efficiency, and error rates in completing key tasks",position:{x:800,y:0},characteristics:{duration:"2-4 weeks setup + ongoing",participants:"UX researchers, data analysts, product team",deliverables:"Task completion metrics, efficiency data, error analysis",skills:["task analysis","efficiency measurement","error tracking"],dependencies:["task definition","completion tracking","error monitoring"]},tools:[{id:"task-completion-rates",name:"Task Completion Rates",description:"Track percentage of users who successfully complete key tasks",category:"Analytics",icon:"CheckCircle",characteristics:{effort:"Medium",expertise:"Task tracking and success measurement",resources:["task tracking tools","completion analytics","goal funnel analysis"],output:"Task success insights and completion optimization opportunities",when:"Task optimization and user flow improvement"}},{id:"task-efficiency",name:"Task Efficiency Metrics",description:"Measure time-to-completion and steps required for key tasks",category:"Analytics",icon:"Clock",characteristics:{effort:"High",expertise:"Efficiency measurement and time analysis",resources:["time tracking tools","task analytics","efficiency benchmarking"],output:"Efficiency insights and task optimization opportunities",when:"User experience optimization and workflow improvement"}},{id:"error-tracking",name:"Error Tracking",description:"Monitor user errors, failed attempts, and recovery patterns",category:"Analytics",icon:"AlertTriangle",characteristics:{effort:"Medium",expertise:"Error analysis and failure pattern recognition",resources:["error tracking tools","failure analytics","recovery monitoring"],output:"Error insights and user experience improvement recommendations",when:"Error reduction and user experience quality improvement"}},{id:"usability-benchmarking",name:"Usability Benchmarking",description:"Compare task performance against benchmarks and competitors",category:"Analytics",icon:"BarChart",characteristics:{effort:"High",expertise:"Benchmarking analysis and competitive comparison",resources:["benchmarking tools","competitive data","performance comparison platforms"],output:"Performance benchmarks and competitive positioning insights",when:"Competitive analysis and performance optimization"}}]}]},{id:"hooked-model",name:"Hooked Model",description:"Nir Eyal methodology for creating habit-forming products through behavioral loops",color:"#10B981",characteristics:{focus:"Habit formation and user retention through behavioral design",timeline:"3-6 months (iterative cycles)",complexity:"Medium-High",teamSize:"4-8 people",outcome:"Habit-forming product experiences and increased user retention"},stages:[{id:"trigger",name:"Trigger",description:"Create external and internal triggers that prompt user action",position:{x:0,y:0},characteristics:{duration:"2-4 weeks",participants:"Product designers, marketers, behavioral specialists",deliverables:"Trigger strategies, notification systems, internal trigger identification",skills:["trigger design","behavioral psychology","notification strategy","user psychology"],dependencies:["user behavior analysis","communication channels","trigger platforms"]},tools:[{id:"external-triggers",name:"External Triggers",description:"Design paid, earned, relationship, and owned triggers to prompt action",category:"Engagement",icon:"Bell",characteristics:{effort:"High",expertise:"Trigger design and multi-channel engagement",resources:["notification platforms","marketing channels","communication tools"],output:"Comprehensive external trigger strategy and implementation",when:"User acquisition and re-engagement campaigns"}},{id:"internal-trigger-mapping",name:"Internal Trigger Mapping",description:"Identify emotional states and contexts that naturally prompt product use",category:"Research",icon:"Heart",characteristics:{effort:"High",expertise:"Behavioral psychology and emotional trigger identification",resources:["user research","behavioral analysis tools","emotional mapping"],output:"Internal trigger insights and emotional context understanding",when:"User psychology research and habit formation analysis"}},{id:"notification-strategy",name:"Notification Strategy",description:"Design contextual and timely notifications that enhance rather than annoy",category:"Engagement",icon:"MessageSquare",characteristics:{effort:"High",expertise:"Notification design and user experience optimization",resources:["push notification systems","personalization tools","timing optimization"],output:"Effective notification strategy and delivery optimization",when:"User engagement and retention optimization"}},{id:"contextual-triggers",name:"Contextual Triggers",description:"Create location, time, and situation-based triggers",category:"Engagement",icon:"MapPin",characteristics:{effort:"Medium",expertise:"Context awareness and environmental trigger design",resources:["location services","context detection","environmental data"],output:"Contextual trigger strategy and implementation",when:"Context-aware engagement and personalized experiences"}}]},{id:"action",name:"Action",description:"Design simple actions users can take in anticipation of reward",position:{x:200,y:0},characteristics:{duration:"2-3 weeks",participants:"UX designers, product managers, developers",deliverables:"Simplified user actions, reduced friction, clear action paths",skills:["interaction design","friction reduction","motivation design","ability optimization"],dependencies:["trigger implementation","user flow analysis","technical capabilities"]},tools:[{id:"fogg-behavior-model",name:"Fogg Behavior Model (B=MAP)",description:"Apply Behavior = Motivation  Ability  Prompt model to optimize actions",category:"Design",icon:"Zap",characteristics:{effort:"Medium",expertise:"Behavioral model application and action optimization",resources:["behavior analysis tools","motivation research","ability assessment"],output:"Optimized user actions and behavior design",when:"Action design and user behavior optimization"}},{id:"friction-reduction",name:"Friction Reduction",description:"Identify and eliminate barriers to action completion",category:"Optimization",icon:"Minimize2",characteristics:{effort:"High",expertise:"User experience optimization and barrier identification",resources:["user testing","analytics tools","conversion optimization"],output:"Reduced friction and improved action completion rates",when:"User experience optimization and conversion improvement"}},{id:"micro-commitments",name:"Micro-Commitments",description:"Design small, easy actions that build toward larger commitments",category:"Design",icon:"ChevronRight",characteristics:{effort:"Medium",expertise:"Progressive engagement design and commitment escalation",resources:["engagement design tools","user journey mapping","progression frameworks"],output:"Progressive action design and commitment building strategy",when:"User onboarding and engagement progression"}},{id:"ability-enhancement",name:"Ability Enhancement",description:"Increase user ability through simplification, guidance, and skill building",category:"Design",icon:"TrendingUp",characteristics:{effort:"High",expertise:"Skill building design and user empowerment",resources:["educational design tools","guidance systems","skill tracking"],output:"Enhanced user capability and action success rates",when:"User empowerment and skill development"}}]},{id:"variable-reward",name:"Variable Reward",description:"Provide unpredictable rewards that satisfy user needs and create anticipation",position:{x:400,y:0},characteristics:{duration:"3-4 weeks",participants:"Game designers, product managers, behavioral specialists",deliverables:"Reward systems, variable reinforcement patterns, satisfaction mechanisms",skills:["reward design","variable reinforcement","satisfaction psychology","gamification"],dependencies:["user motivation research","reward platforms","content systems"]},tools:[{id:"rewards-of-tribe",name:"Rewards of the Tribe",description:"Design social rewards based on connection, acceptance, and community",category:"Engagement",icon:"Users",characteristics:{effort:"High",expertise:"Social reward design and community building",resources:["social features","community platforms","social recognition systems"],output:"Social reward systems and community engagement",when:"Community building and social engagement"}},{id:"rewards-of-hunt",name:"Rewards of the Hunt",description:"Create discovery rewards through search, exploration, and acquisition",category:"Engagement",icon:"Search",characteristics:{effort:"Medium",expertise:"Discovery design and exploration rewards",resources:["content systems","discovery algorithms","exploration features"],output:"Discovery reward systems and exploration engagement",when:"Content discovery and exploration features"}},{id:"rewards-of-self",name:"Rewards of the Self",description:"Design mastery and self-actualization rewards through achievement",category:"Engagement",icon:"Award",characteristics:{effort:"High",expertise:"Achievement design and personal growth rewards",resources:["progression systems","skill tracking","achievement platforms"],output:"Personal achievement systems and mastery rewards",when:"Skill development and personal growth features"}},{id:"variable-ratio-scheduling",name:"Variable Ratio Scheduling",description:"Implement unpredictable reward timing for maximum engagement",category:"Psychology",icon:"Shuffle",characteristics:{effort:"Medium",expertise:"Behavioral psychology and reinforcement scheduling",resources:["randomization systems","reward timing algorithms","engagement analytics"],output:"Optimized reward timing and variable reinforcement",when:"Engagement optimization and habit formation"}}]},{id:"investment",name:"Investment",description:"Enable user investment that increases future reward likelihood and switching costs",position:{x:600,y:0},characteristics:{duration:"2-4 weeks",participants:"Product designers, developers, data specialists",deliverables:"Investment mechanisms, user data collection, preference systems",skills:["investment design","data collection","personalization","switching cost creation"],dependencies:["user data systems","personalization platforms","content creation tools"]},tools:[{id:"data-investment",name:"Data Investment",description:"Collect user data and preferences that improve future experiences",category:"Personalization",icon:"Database",characteristics:{effort:"High",expertise:"Data collection design and personalization systems",resources:["data platforms","preference systems","machine learning tools"],output:"User data collection and personalization improvement",when:"Personalization and user experience customization"}},{id:"content-investment",name:"Content Investment",description:"Enable users to create content that increases product value",category:"Content",icon:"Edit",characteristics:{effort:"High",expertise:"Content creation design and user-generated content systems",resources:["content platforms","creation tools","publishing systems"],output:"User content creation and platform value increase",when:"User-generated content and community building"}},{id:"social-investment",name:"Social Investment",description:"Build social connections and reputation that increase switching costs",category:"Social",icon:"Network",characteristics:{effort:"High",expertise:"Social system design and network effect creation",resources:["social platforms","connection systems","reputation tracking"],output:"Social investment systems and network effects",when:"Social network building and community engagement"}},{id:"skill-investment",name:"Skill Investment",description:"Help users develop skills and expertise that increase product value",category:"Education",icon:"BookOpen",characteristics:{effort:"Medium",expertise:"Skill building design and progress tracking",resources:["learning systems","skill tracking","progress visualization"],output:"User skill development and expertise building",when:"User education and capability building"}}]}]}],o0e=a0e,Us=cf((e,t)=>({nodes:[],edges:[],selectedFramework:null,selectedStage:null,selectedNode:null,nodeCustomizations:{},frameworks:[],expandedPromptId:null,toolToPromptMapping:{},toolToPromptIdMapping:{},setNodes:n=>e({nodes:n}),setEdges:n=>e({edges:n}),addNode:n=>{e(r=>{const s=r.nodes.findIndex(o=>o.id===n.id);let i;return s>=0?(i=[...r.nodes],i[s]=n,console.log("Replacing existing node:",n.id)):(i=[...r.nodes,n],console.log("Adding new node:",n.id)),localStorage.setItem("workflow-nodes",JSON.stringify(i)),localStorage.setItem("workflow-edges",JSON.stringify(r.edges)),{nodes:i}})},addEdge:n=>{e(r=>{const s=[...r.edges,n];return localStorage.setItem("workflow-nodes",JSON.stringify(r.nodes)),localStorage.setItem("workflow-edges",JSON.stringify(s)),{edges:s}})},loadCanvasData:n=>{n&&n.nodes&&n.edges&&(e({nodes:n.nodes||[],edges:n.edges||[],toolToPromptIdMapping:n.toolToPromptIdMapping||{}}),console.log("[Workflow Store] Loaded canvas data with mapping:",n.toolToPromptIdMapping))},updateNode:(n,r)=>e(s=>({nodes:s.nodes.map(i=>i.id===n?{...i,data:{...i.data,...r}}:i)})),updateNodePosition:(n,r)=>{e(s=>{const i=s.nodes.map(o=>o.id===n?{...o,position:r}:o);return localStorage.setItem("workflow-nodes",JSON.stringify(i)),localStorage.setItem("workflow-edges",JSON.stringify(s.edges)),{nodes:i}})},updateNodeDimensions:(n,r)=>{e(s=>{const i=s.nodes.map(o=>o.id===n?{...o,width:r.width,height:r.height}:o);return localStorage.setItem("workflow-nodes",JSON.stringify(i)),localStorage.setItem("workflow-edges",JSON.stringify(s.edges)),{nodes:i}})},addKnowledgeDocumentNode:(n,r)=>{const s=t(),i=`knowledge-document-${n.id}-${Date.now()}`,o=r||(()=>{const l=s.nodes.filter(u=>u.type==="tool");if(l.length>0){const u=l.reduce((h,A)=>A.position.x<h.position.x?A:h);return{x:u.position.x-400,y:u.position.y+(Math.random()-.5)*200}}return{x:100,y:100+s.nodes.filter(u=>u.type==="knowledge-document").length*150}})(),c={id:i,type:"knowledge-document",position:o,data:{knowledgeEntry:n,size:"preview",connectedTools:[],isEditing:!1},draggable:!0,selectable:!0};s.addNode(c),console.log("Added knowledge document node:",i,n.title)},saveWorkflowToStorage:()=>{const n=t();localStorage.setItem("workflow-nodes",JSON.stringify(n.nodes)),localStorage.setItem("workflow-edges",JSON.stringify(n.edges))},loadWorkflowFromStorage:()=>{try{const n=localStorage.getItem("workflow-nodes"),r=localStorage.getItem("workflow-edges");n&&r&&e({nodes:JSON.parse(n),edges:JSON.parse(r)})}catch(n){console.error("Failed to load workflow from storage:",n)}},updateNodeCustomization:(n,r)=>e(s=>({nodeCustomizations:{...s.nodeCustomizations,[n]:{...s.nodeCustomizations[n],...r}}})),getConnectedNodes:n=>{const r=t(),i=r.edges.filter(c=>c.source===n||c.target===n).map(c=>c.source===n?c.target:c.source),o=r.nodes.filter(c=>i.includes(c.id));return{frameworks:o.filter(c=>c.type==="framework"),stages:o.filter(c=>c.type==="stage"),tools:o.filter(c=>c.type==="tool")}},selectFramework:n=>e({selectedFramework:n}),selectStage:n=>e({selectedStage:n}),selectNode:n=>e({selectedNode:n}),setExpandedPromptId:n=>{console.log("[Workflow Store] setExpandedPromptId called:",n,"Stack:",new Error().stack),e({expandedPromptId:n})},initializeFrameworks:()=>e({frameworks:o0e}),getPromptNodeForTool:n=>t().toolToPromptMapping[n]||null,setToolPromptMapping:(n,r)=>{e(s=>({toolToPromptMapping:{...s.toolToPromptMapping,[n]:r}})),console.log("[Workflow Store] Mapped tool",n,"to prompt node",r)},getPromptIdForTool:n=>t().toolToPromptIdMapping[n]||null,setToolPromptIdMapping:(n,r)=>{e(s=>({toolToPromptIdMapping:{...s.toolToPromptIdMapping,[n]:r}})),console.log("[Workflow Store] Mapped tool",n,"to prompt ID",r)},...(()=>{try{const n=localStorage.getItem("workflow-nodes"),r=localStorage.getItem("workflow-edges");if(n&&r)return{nodes:JSON.parse(n),edges:JSON.parse(r)}}catch(n){console.error("Failed to load workflow from storage:",n)}return{}})()})),F4=Mv("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-200 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline","gradient-primary":"bg-gradient-button-primary text-white font-semibold shadow-md hover:bg-gradient-button-primary-hover hover:shadow-lg transform hover:scale-[1.02] active:scale-[0.98]","gradient-secondary":"bg-gradient-button-secondary text-white font-semibold shadow-md hover:bg-gradient-button-secondary-hover hover:shadow-lg transform hover:scale-[1.02] active:scale-[0.98]","gradient-tertiary":"bg-gradient-button-tertiary text-white font-semibold shadow-md hover:bg-gradient-button-tertiary-hover hover:shadow-lg transform hover:scale-[1.02] active:scale-[0.98]","gradient-primary-subtle":"bg-gradient-to-r from-celestial-blue-50 to-celestial-blue-100 text-celestial-blue-800 border border-celestial-blue-200 hover:from-celestial-blue-100 hover:to-celestial-blue-200 hover:border-celestial-blue-300","gradient-secondary-subtle":"bg-gradient-to-r from-indigo-dye-50 to-indigo-dye-100 text-indigo-dye-800 border border-indigo-dye-200 hover:from-indigo-dye-100 hover:to-indigo-dye-200 hover:border-indigo-dye-300","gradient-tertiary-subtle":"bg-gradient-to-r from-malachite-50 to-malachite-100 text-malachite-800 border border-malachite-200 hover:from-malachite-100 hover:to-malachite-200 hover:border-malachite-300"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10",xl:"h-12 rounded-lg px-10 text-base"}},defaultVariants:{variant:"default",size:"default"}}),fe=w.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},i)=>{const o=r?ple:"button";return a.jsx(o,{className:$e(F4({variant:t,size:n,className:e})),ref:i,...s})});fe.displayName="Button";const c0e=Mv("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-semibold ring-offset-background transition-all duration-300 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 shadow-lg hover:shadow-xl",{variants:{variant:{primary:["bg-gradient-button-primary","text-white","hover:bg-gradient-button-primary-hover","focus-visible:ring-celestial-blue-500","active:scale-[0.98]","hover:scale-[1.02]","transform"].join(" "),secondary:["bg-gradient-button-secondary","text-white","hover:bg-gradient-button-secondary-hover","focus-visible:ring-indigo-dye-500","active:scale-[0.98]","hover:scale-[1.02]","transform"].join(" "),tertiary:["bg-gradient-button-tertiary","text-white","hover:bg-gradient-button-tertiary-hover","focus-visible:ring-malachite-500","active:scale-[0.98]","hover:scale-[1.02]","transform"].join(" "),"primary-outline":["border-2 border-celestial-blue-500","bg-gradient-to-r from-transparent to-transparent","text-celestial-blue-700 dark:text-celestial-blue-300","hover:bg-gradient-to-r hover:from-celestial-blue-50 hover:to-celestial-blue-100","dark:hover:from-celestial-blue-950/20 dark:hover:to-celestial-blue-900/20","focus-visible:ring-celestial-blue-500"].join(" "),"secondary-outline":["border-2 border-indigo-dye-500","bg-gradient-to-r from-transparent to-transparent","text-indigo-dye-700 dark:text-indigo-dye-300","hover:bg-gradient-to-r hover:from-indigo-dye-50 hover:to-indigo-dye-100","dark:hover:from-indigo-dye-950/20 dark:hover:to-indigo-dye-900/20","focus-visible:ring-indigo-dye-500"].join(" "),"tertiary-outline":["border-2 border-malachite-500","bg-gradient-to-r from-transparent to-transparent","text-malachite-700 dark:text-malachite-300","hover:bg-gradient-to-r hover:from-malachite-50 hover:to-malachite-100","dark:hover:from-malachite-950/20 dark:hover:to-malachite-900/20","focus-visible:ring-malachite-500"].join(" "),"primary-subtle":["bg-gradient-to-r from-celestial-blue-50 to-celestial-blue-100","dark:from-celestial-blue-950/30 dark:to-celestial-blue-900/30","text-celestial-blue-800 dark:text-celestial-blue-200","border border-celestial-blue-200 dark:border-celestial-blue-800","hover:from-celestial-blue-100 hover:to-celestial-blue-200","dark:hover:from-celestial-blue-900/40 dark:hover:to-celestial-blue-800/40","shadow-sm hover:shadow-md"].join(" "),"secondary-subtle":["bg-gradient-to-r from-indigo-dye-50 to-indigo-dye-100","dark:from-indigo-dye-950/30 dark:to-indigo-dye-900/30","text-indigo-dye-800 dark:text-indigo-dye-200","border border-indigo-dye-200 dark:border-indigo-dye-800","hover:from-indigo-dye-100 hover:to-indigo-dye-200","dark:hover:from-indigo-dye-900/40 dark:hover:to-indigo-dye-800/40","shadow-sm hover:shadow-md"].join(" "),"tertiary-subtle":["bg-gradient-to-r from-malachite-50 to-malachite-100","dark:from-malachite-950/30 dark:to-malachite-900/30","text-malachite-800 dark:text-malachite-200","border border-malachite-200 dark:border-malachite-800","hover:from-malachite-100 hover:to-malachite-200","dark:hover:from-malachite-900/40 dark:hover:to-malachite-800/40","shadow-sm hover:shadow-md"].join(" ")},size:{sm:"h-8 px-3 text-xs rounded-md",default:"h-10 px-4 py-2",lg:"h-11 px-8 rounded-xl",xl:"h-12 px-10 text-base rounded-xl",icon:"h-10 w-10 rounded-lg","icon-sm":"h-8 w-8 rounded-md","icon-lg":"h-12 w-12 rounded-xl"}},defaultVariants:{variant:"primary",size:"default"}}),D4=w.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},i)=>{const o=r?"span":"button";return a.jsx(o,{className:$e(c0e({variant:t,size:n,className:e})),ref:i,...s})});D4.displayName="GradientButton";const U4=w.createContext({});function L4(e){const t=w.useRef(null);return t.current===null&&(t.current=e()),t.current}const M4=typeof window<"u",tV=M4?w.useLayoutEffect:w.useEffect,vk=w.createContext(null);function R4(e,t){e.indexOf(t)===-1&&e.push(t)}function O4(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const eh=(e,t,n)=>n>t?t:n<e?e:n;let RC=()=>{};const th={},nV=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function rV(e){return typeof e=="object"&&e!==null}const sV=e=>/^0[^.\s]+$/u.test(e);function Q4(e){let t;return()=>(t===void 0&&(t=e()),t)}const Nc=e=>e,l0e=(e,t)=>n=>t(e(n)),ww=(...e)=>e.reduce(l0e),_x=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class H4{constructor(){this.subscriptions=[]}add(t){return R4(this.subscriptions,t),()=>O4(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Fd=e=>e*1e3,Dd=e=>e/1e3;function iV(e,t){return t?e*(1e3/t):0}const aV=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,d0e=1e-7,u0e=12;function h0e(e,t,n,r,s){let i,o,c=0;do o=t+(n-t)/2,i=aV(o,r,s)-e,i>0?n=o:t=o;while(Math.abs(i)>d0e&&++c<u0e);return o}function bw(e,t,n,r){if(e===t&&n===r)return Nc;const s=i=>h0e(i,0,1,e,n);return i=>i===0||i===1?i:aV(s(i),t,r)}const oV=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,cV=e=>t=>1-e(1-t),lV=bw(.33,1.53,.69,.99),$4=cV(lV),dV=oV($4),uV=e=>(e*=2)<1?.5*$4(e):.5*(2-Math.pow(2,-10*(e-1))),z4=e=>1-Math.sin(Math.acos(e)),hV=cV(z4),AV=oV(z4),A0e=bw(.42,0,1,1),f0e=bw(0,0,.58,1),fV=bw(.42,0,.58,1),p0e=e=>Array.isArray(e)&&typeof e[0]!="number",pV=e=>Array.isArray(e)&&typeof e[0]=="number",CL={linear:Nc,easeIn:A0e,easeInOut:fV,easeOut:f0e,circIn:z4,circInOut:AV,circOut:hV,backIn:$4,backInOut:dV,backOut:lV,anticipate:uV},m0e=e=>typeof e=="string",jL=e=>{if(pV(e)){RC(e.length===4);const[t,n,r,s]=e;return bw(t,n,r,s)}else if(m0e(e))return RC(CL[e]!==void 0),CL[e];return e},a1=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],kL={value:null,addProjectionMetrics:null};function g0e(e,t){let n=new Set,r=new Set,s=!1,i=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1},l=0;function d(h){o.has(h)&&(u.schedule(h),e()),l++,h(c)}const u={schedule:(h,A=!1,f=!1)=>{const g=f&&s?n:r;return A&&o.add(h),g.has(h)||g.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(c=h,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(d),t&&kL.value&&kL.value.frameloop[t].push(l),l=0,n.clear(),s=!1,i&&(i=!1,u.process(h))}};return u}const v0e=40;function mV(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=a1.reduce((x,C)=>(x[C]=g0e(i,t?C:void 0),x),{}),{setup:c,read:l,resolveKeyframes:d,preUpdate:u,update:h,preRender:A,render:f,postRender:m}=o,g=()=>{const x=th.useManualTiming?s.timestamp:performance.now();n=!1,th.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(x-s.timestamp,v0e),1)),s.timestamp=x,s.isProcessing=!0,c.process(s),l.process(s),d.process(s),u.process(s),h.process(s),A.process(s),f.process(s),m.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(g))},b=()=>{n=!0,r=!0,s.isProcessing||e(g)};return{schedule:a1.reduce((x,C)=>{const S=o[C];return x[C]=(_,N=!1,L=!1)=>(n||b(),S.schedule(_,N,L)),x},{}),cancel:x=>{for(let C=0;C<a1.length;C++)o[a1[C]].cancel(x)},state:s,steps:o}}const{schedule:ds,cancel:ZA,state:Mi,steps:JN}=mV(typeof requestAnimationFrame<"u"?requestAnimationFrame:Nc,!0);let N2;function y0e(){N2=void 0}const ho={now:()=>(N2===void 0&&ho.set(Mi.isProcessing||th.useManualTiming?Mi.timestamp:performance.now()),N2),set:e=>{N2=e,queueMicrotask(y0e)}},gV=e=>t=>typeof t=="string"&&t.startsWith(e),V4=gV("--"),x0e=gV("var(--"),q4=e=>x0e(e)?w0e.test(e.split("/*")[0].trim()):!1,w0e=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Gv={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ix={...Gv,transform:e=>eh(0,1,e)},o1={...Gv,default:1},R0=e=>Math.round(e*1e5)/1e5,K4=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function b0e(e){return e==null}const C0e=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,W4=(e,t)=>n=>!!(typeof n=="string"&&C0e.test(n)&&n.startsWith(e)||t&&!b0e(n)&&Object.prototype.hasOwnProperty.call(n,t)),vV=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,c]=r.match(K4);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},j0e=e=>eh(0,255,e),ZN={...Gv,transform:e=>Math.round(j0e(e))},fp={test:W4("rgb","red"),parse:vV("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+ZN.transform(e)+", "+ZN.transform(t)+", "+ZN.transform(n)+", "+R0(Ix.transform(r))+")"};function k0e(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const d_={test:W4("#"),parse:k0e,transform:fp.transform},Cw=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),rA=Cw("deg"),Ud=Cw("%"),mn=Cw("px"),S0e=Cw("vh"),N0e=Cw("vw"),SL={...Ud,parse:e=>Ud.parse(e)/100,transform:e=>Ud.transform(e*100)},jg={test:W4("hsl","hue"),parse:vV("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Ud.transform(R0(t))+", "+Ud.transform(R0(n))+", "+R0(Ix.transform(r))+")"},ei={test:e=>fp.test(e)||d_.test(e)||jg.test(e),parse:e=>fp.test(e)?fp.parse(e):jg.test(e)?jg.parse(e):d_.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?fp.transform(e):jg.transform(e),getAnimatableNone:e=>{const t=ei.parse(e);return t.alpha=0,ei.transform(t)}},B0e=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function E0e(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(K4))==null?void 0:t.length)||0)+(((n=e.match(B0e))==null?void 0:n.length)||0)>0}const yV="number",xV="color",_0e="var",I0e="var(",NL="${}",P0e=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Px(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const c=t.replace(P0e,l=>(ei.test(l)?(r.color.push(i),s.push(xV),n.push(ei.parse(l))):l.startsWith(I0e)?(r.var.push(i),s.push(_0e),n.push(l)):(r.number.push(i),s.push(yV),n.push(parseFloat(l))),++i,NL)).split(NL);return{values:n,split:c,indexes:r,types:s}}function wV(e){return Px(e).values}function bV(e){const{split:t,types:n}=Px(e),r=t.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=t[o],s[o]!==void 0){const c=n[o];c===yV?i+=R0(s[o]):c===xV?i+=ei.transform(s[o]):i+=s[o]}return i}}const T0e=e=>typeof e=="number"?0:ei.test(e)?ei.getAnimatableNone(e):e;function F0e(e){const t=wV(e);return bV(e)(t.map(T0e))}const ef={test:E0e,parse:wV,createTransformer:bV,getAnimatableNone:F0e};function eB(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function D0e({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,o=0;if(!t)s=i=o=n;else{const c=n<.5?n*(1+t):n+t-n*t,l=2*n-c;s=eB(l,c,e+1/3),i=eB(l,c,e),o=eB(l,c,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function OC(e,t){return n=>n>0?t:e}const ys=(e,t,n)=>e+(t-e)*n,tB=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},U0e=[d_,fp,jg],L0e=e=>U0e.find(t=>t.test(e));function BL(e){const t=L0e(e);if(!t)return!1;let n=t.parse(e);return t===jg&&(n=D0e(n)),n}const EL=(e,t)=>{const n=BL(e),r=BL(t);if(!n||!r)return OC(e,t);const s={...n};return i=>(s.red=tB(n.red,r.red,i),s.green=tB(n.green,r.green,i),s.blue=tB(n.blue,r.blue,i),s.alpha=ys(n.alpha,r.alpha,i),fp.transform(s))},u_=new Set(["none","hidden"]);function M0e(e,t){return u_.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function R0e(e,t){return n=>ys(e,t,n)}function G4(e){return typeof e=="number"?R0e:typeof e=="string"?q4(e)?OC:ei.test(e)?EL:H0e:Array.isArray(e)?CV:typeof e=="object"?ei.test(e)?EL:O0e:OC}function CV(e,t){const n=[...e],r=n.length,s=e.map((i,o)=>G4(i)(i,t[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function O0e(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=G4(e[s])(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function Q0e(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],o=e.indexes[i][r[i]],c=e.values[o]??0;n[s]=c,r[i]++}return n}const H0e=(e,t)=>{const n=ef.createTransformer(t),r=Px(e),s=Px(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?u_.has(e)&&!s.values.length||u_.has(t)&&!r.values.length?M0e(e,t):ww(CV(Q0e(r,s),s.values),n):OC(e,t)};function jV(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?ys(e,t,n):G4(e)(e,t)}const $0e=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>ds.update(t,n),stop:()=>ZA(t),now:()=>Mi.isProcessing?Mi.timestamp:ho.now()}},kV=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let i=0;i<s;i++)r+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},QC=2e4;function Y4(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<QC;)t+=n,r=e.next(t);return t>=QC?1/0:t}function z0e(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(Y4(r),QC);return{type:"keyframes",ease:i=>r.next(s*i).value/t,duration:Dd(s)}}const V0e=5;function SV(e,t,n){const r=Math.max(t-V0e,0);return iV(n-e(r),t-r)}const Ts={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},nB=.001;function q0e({duration:e=Ts.duration,bounce:t=Ts.bounce,velocity:n=Ts.velocity,mass:r=Ts.mass}){let s,i,o=1-t;o=eh(Ts.minDamping,Ts.maxDamping,o),e=eh(Ts.minDuration,Ts.maxDuration,Dd(e)),o<1?(s=d=>{const u=d*o,h=u*e,A=u-n,f=h_(d,o),m=Math.exp(-h);return nB-A/f*m},i=d=>{const h=d*o*e,A=h*n+n,f=Math.pow(o,2)*Math.pow(d,2)*e,m=Math.exp(-h),g=h_(Math.pow(d,2),o);return(-s(d)+nB>0?-1:1)*((A-f)*m)/g}):(s=d=>{const u=Math.exp(-d*e),h=(d-n)*e+1;return-nB+u*h},i=d=>{const u=Math.exp(-d*e),h=(n-d)*(e*e);return u*h});const c=5/e,l=W0e(s,i,c);if(e=Fd(e),isNaN(l))return{stiffness:Ts.stiffness,damping:Ts.damping,duration:e};{const d=Math.pow(l,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:e}}}const K0e=12;function W0e(e,t,n){let r=n;for(let s=1;s<K0e;s++)r=r-e(r)/t(r);return r}function h_(e,t){return e*Math.sqrt(1-t*t)}const G0e=["duration","bounce"],Y0e=["stiffness","damping","mass"];function _L(e,t){return t.some(n=>e[n]!==void 0)}function X0e(e){let t={velocity:Ts.velocity,stiffness:Ts.stiffness,damping:Ts.damping,mass:Ts.mass,isResolvedFromDuration:!1,...e};if(!_L(e,Y0e)&&_L(e,G0e))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*eh(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:Ts.mass,stiffness:s,damping:i}}else{const n=q0e(e);t={...t,...n,mass:Ts.mass},t.isResolvedFromDuration=!0}return t}function HC(e=Ts.visualDuration,t=Ts.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],c={done:!1,value:i},{stiffness:l,damping:d,mass:u,duration:h,velocity:A,isResolvedFromDuration:f}=X0e({...n,velocity:-Dd(n.velocity||0)}),m=A||0,g=d/(2*Math.sqrt(l*u)),b=o-i,y=Dd(Math.sqrt(l/u)),j=Math.abs(b)<5;r||(r=j?Ts.restSpeed.granular:Ts.restSpeed.default),s||(s=j?Ts.restDelta.granular:Ts.restDelta.default);let x;if(g<1){const S=h_(y,g);x=_=>{const N=Math.exp(-g*y*_);return o-N*((m+g*y*b)/S*Math.sin(S*_)+b*Math.cos(S*_))}}else if(g===1)x=S=>o-Math.exp(-y*S)*(b+(m+y*b)*S);else{const S=y*Math.sqrt(g*g-1);x=_=>{const N=Math.exp(-g*y*_),L=Math.min(S*_,300);return o-N*((m+g*y*b)*Math.sinh(L)+S*b*Math.cosh(L))/S}}const C={calculatedDuration:f&&h||null,next:S=>{const _=x(S);if(f)c.done=S>=h;else{let N=S===0?m:0;g<1&&(N=S===0?Fd(m):SV(x,S,_));const L=Math.abs(N)<=r,P=Math.abs(o-_)<=s;c.done=L&&P}return c.value=c.done?o:_,c},toString:()=>{const S=Math.min(Y4(C),QC),_=kV(N=>C.next(S*N).value,S,30);return S+"ms "+_},toTransition:()=>{}};return C}HC.applyToOptions=e=>{const t=z0e(e,100,HC);return e.ease=t.ease,e.duration=Fd(t.duration),e.type="keyframes",e};function A_({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:c,max:l,restDelta:d=.5,restSpeed:u}){const h=e[0],A={done:!1,value:h},f=L=>c!==void 0&&L<c||l!==void 0&&L>l,m=L=>c===void 0?l:l===void 0||Math.abs(c-L)<Math.abs(l-L)?c:l;let g=n*t;const b=h+g,y=o===void 0?b:o(b);y!==b&&(g=y-h);const j=L=>-g*Math.exp(-L/r),x=L=>y+j(L),C=L=>{const P=j(L),F=x(L);A.done=Math.abs(P)<=d,A.value=A.done?y:F};let S,_;const N=L=>{f(A.value)&&(S=L,_=HC({keyframes:[A.value,m(A.value)],velocity:SV(x,L,A.value),damping:s,stiffness:i,restDelta:d,restSpeed:u}))};return N(0),{calculatedDuration:null,next:L=>{let P=!1;return!_&&S===void 0&&(P=!0,C(L),N(L)),S!==void 0&&L>=S?_.next(L-S):(!P&&C(L),A)}}}function J0e(e,t,n){const r=[],s=n||th.mix||jV,i=e.length-1;for(let o=0;o<i;o++){let c=s(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||Nc:t;c=ww(l,c)}r.push(c)}return r}function Z0e(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(RC(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const c=J0e(t,r,s),l=c.length,d=u=>{if(o&&u<e[0])return t[0];let h=0;if(l>1)for(;h<e.length-2&&!(u<e[h+1]);h++);const A=_x(e[h],e[h+1],u);return c[h](A)};return n?u=>d(eh(e[0],e[i-1],u)):d}function exe(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=_x(0,t,r);e.push(ys(n,1,s))}}function txe(e){const t=[0];return exe(t,e.length-1),t}function nxe(e,t){return e.map(n=>n*t)}function rxe(e,t){return e.map(()=>t||fV).splice(0,e.length-1)}function O0({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=p0e(r)?r.map(jL):jL(r),i={done:!1,value:t[0]},o=nxe(n&&n.length===t.length?n:txe(t),e),c=Z0e(o,t,{ease:Array.isArray(s)?s:rxe(t,s)});return{calculatedDuration:e,next:l=>(i.value=c(l),i.done=l>=e,i)}}const sxe=e=>e!==null;function X4(e,{repeat:t,repeatType:n="loop"},r,s=1){const i=e.filter(sxe),c=s<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!c||r===void 0?i[c]:r}const ixe={decay:A_,inertia:A_,tween:O0,keyframes:O0,spring:HC};function NV(e){typeof e.type=="string"&&(e.type=ixe[e.type])}class J4{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const axe=e=>e/100;class Z4 extends J4{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==ho.now()&&this.tick(ho.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;NV(t);const{type:n=O0,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=t;let{keyframes:c}=t;const l=n||O0;l!==O0&&typeof c[0]!="number"&&(this.mixKeyframes=ww(axe,jV(c[0],c[1])),c=[0,100]);const d=l({...t,keyframes:c});i==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...c].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=Y4(d));const{calculatedDuration:u}=d;this.calculatedDuration=u,this.resolvedDuration=u+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=d}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:u,repeat:h,repeatType:A,repeatDelay:f,type:m,onUpdate:g,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const y=this.currentTime-d*(this.playbackSpeed>=0?1:-1),j=this.playbackSpeed>=0?y<0:y>s;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let x=this.currentTime,C=r;if(h){const L=Math.min(this.currentTime,s)/c;let P=Math.floor(L),F=L%1;!F&&L>=1&&(F=1),F===1&&P--,P=Math.min(P,h+1),!!(P%2)&&(A==="reverse"?(F=1-F,f&&(F-=f/c)):A==="mirror"&&(C=o)),x=eh(0,1,F)*c}const S=j?{done:!1,value:u[0]}:C.next(x);i&&(S.value=i(S.value));let{done:_}=S;!j&&l!==null&&(_=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const N=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return N&&m!==A_&&(S.value=X4(u,this.options,b,this.speed)),g&&g(S.value),N&&this.finish(),S}then(t,n){return this.finished.then(t,n)}get duration(){return Dd(this.calculatedDuration)}get time(){return Dd(this.currentTime)}set time(t){var n;t=Fd(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(ho.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Dd(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:t=$0e,startTime:n}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ho.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function oxe(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const pp=e=>e*180/Math.PI,f_=e=>{const t=pp(Math.atan2(e[1],e[0]));return p_(t)},cxe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:f_,rotateZ:f_,skewX:e=>pp(Math.atan(e[1])),skewY:e=>pp(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},p_=e=>(e=e%360,e<0&&(e+=360),e),IL=f_,PL=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),TL=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),lxe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:PL,scaleY:TL,scale:e=>(PL(e)+TL(e))/2,rotateX:e=>p_(pp(Math.atan2(e[6],e[5]))),rotateY:e=>p_(pp(Math.atan2(-e[2],e[0]))),rotateZ:IL,rotate:IL,skewX:e=>pp(Math.atan(e[4])),skewY:e=>pp(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function m_(e){return e.includes("scale")?1:0}function g_(e,t){if(!e||e==="none")return m_(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=lxe,s=n;else{const c=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=cxe,s=c}if(!s)return m_(t);const i=r[t],o=s[1].split(",").map(uxe);return typeof i=="function"?i(o):o[i]}const dxe=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return g_(n,t)};function uxe(e){return parseFloat(e.trim())}const Yv=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Xv=new Set(Yv),FL=e=>e===Gv||e===mn,hxe=new Set(["x","y","z"]),Axe=Yv.filter(e=>!hxe.has(e));function fxe(e){const t=[];return Axe.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Pp={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>g_(t,"x"),y:(e,{transform:t})=>g_(t,"y")};Pp.translateX=Pp.x;Pp.translateY=Pp.y;const Tp=new Set;let v_=!1,y_=!1,x_=!1;function BV(){if(y_){const e=Array.from(Tp).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=fxe(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var c;(c=r.getValue(i))==null||c.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}y_=!1,v_=!1,Tp.forEach(e=>e.complete(x_)),Tp.clear()}function EV(){Tp.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(y_=!0)})}function pxe(){x_=!0,EV(),BV(),x_=!1}class eT{constructor(t,n,r,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Tp.add(this),v_||(v_=!0,ds.read(EV),ds.resolveKeyframes(BV))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const i=s==null?void 0:s.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const c=r.readValue(n,o);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=o),s&&i===void 0&&s.set(t[0])}oxe(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Tp.delete(this)}cancel(){this.state==="scheduled"&&(Tp.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const mxe=e=>e.startsWith("--");function gxe(e,t,n){mxe(t)?e.style.setProperty(t,n):e.style[t]=n}const vxe=Q4(()=>window.ScrollTimeline!==void 0),yxe={};function xxe(e,t){const n=Q4(e);return()=>yxe[t]??n()}const _V=xxe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),a0=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,DL={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:a0([0,.65,.55,1]),circOut:a0([.55,0,1,.45]),backIn:a0([.31,.01,.66,-.59]),backOut:a0([.33,1.53,.69,.99])};function IV(e,t){if(e)return typeof e=="function"?_V()?kV(e,t):"ease-out":pV(e)?a0(e):Array.isArray(e)?e.map(n=>IV(n,t)||DL.easeOut):DL[e]}function wxe(e,t,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:c="easeOut",times:l}={},d=void 0){const u={[t]:n};l&&(u.offset=l);const h=IV(c,s);Array.isArray(h)&&(u.easing=h);const A={delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return d&&(A.pseudoElement=d),e.animate(u,A)}function PV(e){return typeof e=="function"&&"applyToOptions"in e}function bxe({type:e,...t}){return PV(e)&&_V()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class Cxe extends J4{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:c,onComplete:l}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,RC(typeof t.type!="string");const d=bxe(t);this.animation=wxe(n,r,s,d,i),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const u=X4(s,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(u):gxe(n,r,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Dd(Number(t))}get time(){return Dd(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Fd(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&vxe()?(this.animation.timeline=t,Nc):n(this)}}const TV={anticipate:uV,backInOut:dV,circInOut:AV};function jxe(e){return e in TV}function kxe(e){typeof e.ease=="string"&&jxe(e.ease)&&(e.ease=TV[e.ease])}const UL=10;class Sxe extends Cxe{constructor(t){kxe(t),NV(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const c=new Z4({...o,autoplay:!1}),l=Fd(this.finishedTime??this.time);n.setWithVelocity(c.sample(l-UL).value,c.sample(l).value,UL),c.stop()}}const LL=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ef.test(e)||e==="0")&&!e.startsWith("url("));function Nxe(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function Bxe(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=LL(s,t),c=LL(i,t);return!o||!c?!1:Nxe(e)||(n==="spring"||PV(n))&&r}function w_(e){e.duration=0,e.type}const Exe=new Set(["opacity","clipPath","filter","transform"]),_xe=Q4(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Ixe(e){var u;const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:i,type:o}=e;if(!(((u=t==null?void 0:t.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:d}=t.owner.getProps();return _xe()&&n&&Exe.has(n)&&(n!=="transform"||!d)&&!l&&!r&&s!=="mirror"&&i!==0&&o!=="inertia"}const Pxe=40;class Txe extends J4{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:c,name:l,motionValue:d,element:u,...h}){var m;super(),this.stop=()=>{var g,b;this._animation&&(this._animation.stop(),(g=this.stopTimeline)==null||g.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=ho.now();const A={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,name:l,motionValue:d,element:u,...h},f=(u==null?void 0:u.KeyframeResolver)||eT;this.keyframeResolver=new f(c,(g,b,y)=>this.onKeyframesResolved(g,b,A,!y),l,d,u),(m=this.keyframeResolver)==null||m.scheduleResolve()}onKeyframesResolved(t,n,r,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:c,delay:l,isHandoff:d,onUpdate:u}=r;this.resolvedAt=ho.now(),Bxe(t,i,o,c)||((th.instantAnimations||!l)&&(u==null||u(X4(t,r,n))),t[0]=t[t.length-1],w_(r),r.repeat=0);const A={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>Pxe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},f=!d&&Ixe(A)?new Sxe({...A,element:A.motionValue.owner.current}):new Z4(A);f.finished.then(()=>this.notifyFinished()).catch(Nc),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),pxe()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const Fxe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Dxe(e){const t=Fxe.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function FV(e,t,n=1){const[r,s]=Dxe(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return nV(o)?parseFloat(o):o}return q4(s)?FV(s,t,n+1):s}function tT(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const DV=new Set(["width","height","top","left","right","bottom",...Yv]),Uxe={test:e=>e==="auto",parse:e=>e},UV=e=>t=>t.test(e),LV=[Gv,mn,Ud,rA,N0e,S0e,Uxe],ML=e=>LV.find(UV(e));function Lxe(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||sV(e):!0}const Mxe=new Set(["brightness","contrast","saturate","opacity"]);function Rxe(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(K4)||[];if(!r)return e;const s=n.replace(r,"");let i=Mxe.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const Oxe=/\b([a-z-]*)\(.*?\)/gu,b_={...ef,getAnimatableNone:e=>{const t=e.match(Oxe);return t?t.map(Rxe).join(" "):e}},RL={...Gv,transform:Math.round},Qxe={rotate:rA,rotateX:rA,rotateY:rA,rotateZ:rA,scale:o1,scaleX:o1,scaleY:o1,scaleZ:o1,skew:rA,skewX:rA,skewY:rA,distance:mn,translateX:mn,translateY:mn,translateZ:mn,x:mn,y:mn,z:mn,perspective:mn,transformPerspective:mn,opacity:Ix,originX:SL,originY:SL,originZ:mn},nT={borderWidth:mn,borderTopWidth:mn,borderRightWidth:mn,borderBottomWidth:mn,borderLeftWidth:mn,borderRadius:mn,radius:mn,borderTopLeftRadius:mn,borderTopRightRadius:mn,borderBottomRightRadius:mn,borderBottomLeftRadius:mn,width:mn,maxWidth:mn,height:mn,maxHeight:mn,top:mn,right:mn,bottom:mn,left:mn,padding:mn,paddingTop:mn,paddingRight:mn,paddingBottom:mn,paddingLeft:mn,margin:mn,marginTop:mn,marginRight:mn,marginBottom:mn,marginLeft:mn,backgroundPositionX:mn,backgroundPositionY:mn,...Qxe,zIndex:RL,fillOpacity:Ix,strokeOpacity:Ix,numOctaves:RL},Hxe={...nT,color:ei,backgroundColor:ei,outlineColor:ei,fill:ei,stroke:ei,borderColor:ei,borderTopColor:ei,borderRightColor:ei,borderBottomColor:ei,borderLeftColor:ei,filter:b_,WebkitFilter:b_},MV=e=>Hxe[e];function RV(e,t){let n=MV(e);return n!==b_&&(n=ef),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const $xe=new Set(["auto","none","0"]);function zxe(e,t,n){let r=0,s;for(;r<e.length&&!s;){const i=e[r];typeof i=="string"&&!$xe.has(i)&&Px(i).values.length&&(s=e[r]),r++}if(s&&n)for(const i of t)e[i]=RV(n,s)}class Vxe extends eT{constructor(t,n,r,s,i){super(t,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let d=t[l];if(typeof d=="string"&&(d=d.trim(),q4(d))){const u=FV(d,n.current);u!==void 0&&(t[l]=u),l===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!DV.has(r)||t.length!==2)return;const[s,i]=t,o=ML(s),c=ML(i);if(o!==c)if(FL(o)&&FL(c))for(let l=0;l<t.length;l++){const d=t[l];typeof d=="string"&&(t[l]=parseFloat(d))}else Pp[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||Lxe(t[s]))&&r.push(s);r.length&&zxe(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Pp[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var c;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=Pp[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([l,d])=>{t.getValue(l).set(d)}),this.resolveNoneKeyframes()}}function qxe(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){const s=document.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const OV=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function QV(e){return rV(e)&&"offsetHeight"in e}const OL=30,Kxe=e=>!isNaN(parseFloat(e));class Wxe{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const s=ho.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=ho.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Kxe(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new H4);const r=this.events[t].add(n);return t==="change"?()=>{r(),ds.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=ho.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>OL)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,OL);return iV(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function vv(e,t){return new Wxe(e,t)}const{schedule:rT,cancel:nqe}=mV(queueMicrotask,!1),cl={x:!1,y:!1};function HV(){return cl.x||cl.y}function Gxe(e){return e==="x"||e==="y"?cl[e]?null:(cl[e]=!0,()=>{cl[e]=!1}):cl.x||cl.y?null:(cl.x=cl.y=!0,()=>{cl.x=cl.y=!1})}function $V(e,t){const n=qxe(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function QL(e){return!(e.pointerType==="touch"||HV())}function Yxe(e,t,n={}){const[r,s,i]=$V(e,n),o=c=>{if(!QL(c))return;const{target:l}=c,d=t(l,c);if(typeof d!="function"||!l)return;const u=h=>{QL(h)&&(d(h),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,s)};return r.forEach(c=>{c.addEventListener("pointerenter",o,s)}),i}const zV=(e,t)=>t?e===t?!0:zV(e,t.parentElement):!1,sT=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,Xxe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Jxe(e){return Xxe.has(e.tagName)||e.tabIndex!==-1}const B2=new WeakSet;function HL(e){return t=>{t.key==="Enter"&&e(t)}}function rB(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Zxe=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=HL(()=>{if(B2.has(n))return;rB(n,"down");const s=HL(()=>{rB(n,"up")}),i=()=>rB(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function $L(e){return sT(e)&&!HV()}function ewe(e,t,n={}){const[r,s,i]=$V(e,n),o=c=>{const l=c.currentTarget;if(!$L(c))return;B2.add(l);const d=t(l,c),u=(f,m)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",A),B2.has(l)&&B2.delete(l),$L(f)&&typeof d=="function"&&d(f,{success:m})},h=f=>{u(f,l===window||l===document||n.useGlobalTarget||zV(l,f.target))},A=f=>{u(f,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",A,s)};return r.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",o,s),QV(c)&&(c.addEventListener("focus",d=>Zxe(d,s)),!Jxe(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),i}function VV(e){return rV(e)&&"ownerSVGElement"in e}function twe(e){return VV(e)&&e.tagName==="svg"}const ua=e=>!!(e&&e.getVelocity),nwe=[...LV,ei,ef],rwe=e=>nwe.find(UV(e)),iT=w.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class swe extends w.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=QV(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function iwe({children:e,isPresent:t,anchorX:n,root:r}){const s=w.useId(),i=w.useRef(null),o=w.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=w.useContext(iT);return w.useInsertionEffect(()=>{const{width:l,height:d,top:u,left:h,right:A}=o.current;if(t||!i.current||!l||!d)return;const f=n==="left"?`left: ${h}`:`right: ${A}`;i.current.dataset.motionPopId=s;const m=document.createElement("style");c&&(m.nonce=c);const g=r??document.head;return g.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${d}px !important;
            ${f}px !important;
            top: ${u}px !important;
          }
        `),()=>{g.contains(m)&&g.removeChild(m)}},[t]),a.jsx(swe,{isPresent:t,childRef:i,sizeRef:o,children:w.cloneElement(e,{ref:i})})}const awe=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o,anchorX:c,root:l})=>{const d=L4(owe),u=w.useId();let h=!0,A=w.useMemo(()=>(h=!1,{id:u,initial:t,isPresent:n,custom:s,onExitComplete:f=>{d.set(f,!0);for(const m of d.values())if(!m)return;r&&r()},register:f=>(d.set(f,!1),()=>d.delete(f))}),[n,d,r]);return i&&h&&(A={...A}),w.useMemo(()=>{d.forEach((f,m)=>d.set(m,!1))},[n]),w.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),o==="popLayout"&&(e=a.jsx(iwe,{isPresent:n,anchorX:c,root:l,children:e})),a.jsx(vk.Provider,{value:A,children:e})};function owe(){return new Map}function qV(e=!0){const t=w.useContext(vk);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,i=w.useId();w.useEffect(()=>{if(e)return s(i)},[e]);const o=w.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,o]:[!0]}const c1=e=>e.key||"";function zL(e){const t=[];return w.Children.forEach(e,n=>{w.isValidElement(n)&&t.push(n)}),t}const Pr=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:c="left",root:l})=>{const[d,u]=qV(o),h=w.useMemo(()=>zL(e),[e]),A=o&&!d?[]:h.map(c1),f=w.useRef(!0),m=w.useRef(h),g=L4(()=>new Map),[b,y]=w.useState(h),[j,x]=w.useState(h);tV(()=>{f.current=!1,m.current=h;for(let _=0;_<j.length;_++){const N=c1(j[_]);A.includes(N)?g.delete(N):g.get(N)!==!0&&g.set(N,!1)}},[j,A.length,A.join("-")]);const C=[];if(h!==b){let _=[...h];for(let N=0;N<j.length;N++){const L=j[N],P=c1(L);A.includes(P)||(_.splice(N,0,L),C.push(L))}return i==="wait"&&C.length&&(_=C),x(zL(_)),y(h),null}const{forceRender:S}=w.useContext(U4);return a.jsx(a.Fragment,{children:j.map(_=>{const N=c1(_),L=o&&!d?!1:h===j||A.includes(N),P=()=>{if(g.has(N))g.set(N,!0);else return;let F=!0;g.forEach(I=>{I||(F=!1)}),F&&(S==null||S(),x(m.current),o&&(u==null||u()),r&&r())};return a.jsx(awe,{isPresent:L,initial:!f.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:i,root:l,onExitComplete:L?void 0:P,anchorX:c,children:_},N)})})},KV=w.createContext({strict:!1}),VL={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yv={};for(const e in VL)yv[e]={isEnabled:t=>VL[e].some(n=>!!t[n])};function cwe(e){for(const t in e)yv[t]={...yv[t],...e[t]}}const lwe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function $C(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||lwe.has(e)}let WV=e=>!$C(e);function dwe(e){typeof e=="function"&&(WV=t=>t.startsWith("on")?!$C(t):e(t))}try{dwe(require("@emotion/is-prop-valid").default)}catch{}function uwe(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(WV(s)||n===!0&&$C(s)||!t&&!$C(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}const yk=w.createContext({});function xk(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Tx(e){return typeof e=="string"||Array.isArray(e)}const aT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],oT=["initial",...aT];function wk(e){return xk(e.animate)||oT.some(t=>Tx(e[t]))}function GV(e){return!!(wk(e)||e.variants)}function hwe(e,t){if(wk(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Tx(n)?n:void 0,animate:Tx(r)?r:void 0}}return e.inherit!==!1?t:{}}function Awe(e){const{initial:t,animate:n}=hwe(e,w.useContext(yk));return w.useMemo(()=>({initial:t,animate:n}),[qL(t),qL(n)])}function qL(e){return Array.isArray(e)?e.join(" "):e}const Fx={};function fwe(e){for(const t in e)Fx[t]=e[t],V4(t)&&(Fx[t].isCSSVariable=!0)}function YV(e,{layout:t,layoutId:n}){return Xv.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Fx[e]||e==="opacity")}const pwe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},mwe=Yv.length;function gwe(e,t,n){let r="",s=!0;for(let i=0;i<mwe;i++){const o=Yv[i],c=e[o];if(c===void 0)continue;let l=!0;if(typeof c=="number"?l=c===(o.startsWith("scale")?1:0):l=parseFloat(c)===0,!l||n){const d=OV(c,nT[o]);if(!l){s=!1;const u=pwe[o]||o;r+=`${u}(${d}) `}n&&(t[o]=d)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function cT(e,t,n){const{style:r,vars:s,transformOrigin:i}=e;let o=!1,c=!1;for(const l in t){const d=t[l];if(Xv.has(l)){o=!0;continue}else if(V4(l)){s[l]=d;continue}else{const u=OV(d,nT[l]);l.startsWith("origin")?(c=!0,i[l]=u):r[l]=u}}if(t.transform||(o||n?r.transform=gwe(t,e.transform,n):r.transform&&(r.transform="none")),c){const{originX:l="50%",originY:d="50%",originZ:u=0}=i;r.transformOrigin=`${l} ${d} ${u}`}}const lT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function XV(e,t,n){for(const r in t)!ua(t[r])&&!YV(r,n)&&(e[r]=t[r])}function vwe({transformTemplate:e},t){return w.useMemo(()=>{const n=lT();return cT(n,t,e),Object.assign({},n.vars,n.style)},[t])}function ywe(e,t){const n=e.style||{},r={};return XV(r,n,e),Object.assign(r,vwe(e,t)),r}function xwe(e,t){const n={},r=ywe(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const wwe={offset:"stroke-dashoffset",array:"stroke-dasharray"},bwe={offset:"strokeDashoffset",array:"strokeDasharray"};function Cwe(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?wwe:bwe;e[i.offset]=mn.transform(-r);const o=mn.transform(t),c=mn.transform(n);e[i.array]=`${o} ${c}`}function JV(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...c},l,d,u){if(cT(e,c,d),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:A}=e;h.transform&&(A.transform=h.transform,delete h.transform),(A.transform||h.transformOrigin)&&(A.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),A.transform&&(A.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&Cwe(h,s,i,o,!1)}const ZV=()=>({...lT(),attrs:{}}),eq=e=>typeof e=="string"&&e.toLowerCase()==="svg";function jwe(e,t,n,r){const s=w.useMemo(()=>{const i=ZV();return JV(i,t,eq(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};XV(i,e.style,e),s.style={...i,...s.style}}return s}const kwe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function dT(e){return typeof e!="string"||e.includes("-")?!1:!!(kwe.indexOf(e)>-1||/[A-Z]/u.test(e))}function Swe(e,t,n,{latestValues:r},s,i=!1){const c=(dT(e)?jwe:xwe)(t,r,s,e),l=uwe(t,typeof e=="string",i),d=e!==w.Fragment?{...l,...c,ref:n}:{},{children:u}=t,h=w.useMemo(()=>ua(u)?u.get():u,[u]);return w.createElement(e,{...d,children:h})}function KL(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function uT(e,t,n,r){if(typeof t=="function"){const[s,i]=KL(r);t=t(n!==void 0?n:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=KL(r);t=t(n!==void 0?n:e.custom,s,i)}return t}function E2(e){return ua(e)?e.get():e}function Nwe({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:Bwe(n,r,s,e),renderState:t()}}function Bwe(e,t,n,r){const s={},i=r(e,{});for(const A in i)s[A]=E2(i[A]);let{initial:o,animate:c}=e;const l=wk(e),d=GV(e);t&&d&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),c===void 0&&(c=t.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const h=u?c:o;if(h&&typeof h!="boolean"&&!xk(h)){const A=Array.isArray(h)?h:[h];for(let f=0;f<A.length;f++){const m=uT(e,A[f]);if(m){const{transitionEnd:g,transition:b,...y}=m;for(const j in y){let x=y[j];if(Array.isArray(x)){const C=u?x.length-1:0;x=x[C]}x!==null&&(s[j]=x)}for(const j in g)s[j]=g[j]}}}return s}const tq=e=>(t,n)=>{const r=w.useContext(yk),s=w.useContext(vk),i=()=>Nwe(e,t,r,s);return n?i():L4(i)};function hT(e,t,n){var i;const{style:r}=e,s={};for(const o in r)(ua(r[o])||t.style&&ua(t.style[o])||YV(o,e)||((i=n==null?void 0:n.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}const Ewe=tq({scrapeMotionValuesFromProps:hT,createRenderState:lT});function nq(e,t,n){const r=hT(e,t,n);for(const s in e)if(ua(e[s])||ua(t[s])){const i=Yv.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=e[s]}return r}const _we=tq({scrapeMotionValuesFromProps:nq,createRenderState:ZV}),Iwe=Symbol.for("motionComponentSymbol");function kg(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Pwe(e,t,n){return w.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):kg(n)&&(n.current=r))},[t])}const AT=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Twe="framerAppearId",rq="data-"+AT(Twe),sq=w.createContext({});function Fwe(e,t,n,r,s){var g,b;const{visualElement:i}=w.useContext(yk),o=w.useContext(KV),c=w.useContext(vk),l=w.useContext(iT).reducedMotion,d=w.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:i,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:l}));const u=d.current,h=w.useContext(sq);u&&!u.projection&&s&&(u.type==="html"||u.type==="svg")&&Dwe(d.current,n,s,h);const A=w.useRef(!1);w.useInsertionEffect(()=>{u&&A.current&&u.update(n,c)});const f=n[rq],m=w.useRef(!!f&&!((g=window.MotionHandoffIsComplete)!=null&&g.call(window,f))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,f)));return tV(()=>{u&&(A.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),m.current&&u.animationState&&u.animationState.animateChanges())}),w.useEffect(()=>{u&&(!m.current&&u.animationState&&u.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)==null||y.call(window,f)}),m.current=!1),u.enteringChildren=void 0)}),u}function Dwe(e,t,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:c,layoutScroll:l,layoutRoot:d,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:iq(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||c&&kg(c),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:d})}function iq(e){if(e)return e.options.allowProjection!==!1?e.projection:iq(e.parent)}function sB(e,{forwardMotionProps:t=!1}={},n,r){n&&cwe(n);const s=dT(e)?_we:Ewe;function i(c,l){let d;const u={...w.useContext(iT),...c,layoutId:Uwe(c)},{isStatic:h}=u,A=Awe(c),f=s(c,h);if(!h&&M4){Lwe();const m=Mwe(u);d=m.MeasureLayout,A.visualElement=Fwe(e,f,u,r,m.ProjectionNode)}return a.jsxs(yk.Provider,{value:A,children:[d&&A.visualElement?a.jsx(d,{visualElement:A.visualElement,...u}):null,Swe(e,c,Pwe(f,A.visualElement,l),f,h,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=w.forwardRef(i);return o[Iwe]=e,o}function Uwe({layoutId:e}){const t=w.useContext(U4).id;return t&&e!==void 0?t+"-"+e:e}function Lwe(e,t){w.useContext(KV).strict}function Mwe(e){const{drag:t,layout:n}=yv;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Rwe(e,t){if(typeof Proxy>"u")return sB;const n=new Map,r=(i,o)=>sB(i,o,e,t),s=(i,o)=>r(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?r:(n.has(o)||n.set(o,sB(o,void 0,e,t)),n.get(o))})}function aq({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function Owe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Qwe(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function iB(e){return e===void 0||e===1}function C_({scale:e,scaleX:t,scaleY:n}){return!iB(e)||!iB(t)||!iB(n)}function tp(e){return C_(e)||oq(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function oq(e){return WL(e.x)||WL(e.y)}function WL(e){return e&&e!=="0%"}function zC(e,t,n){const r=e-n,s=t*r;return n+s}function GL(e,t,n,r,s){return s!==void 0&&(e=zC(e,s,r)),zC(e,n,r)+t}function j_(e,t=0,n=1,r,s){e.min=GL(e.min,t,n,r,s),e.max=GL(e.max,t,n,r,s)}function cq(e,{x:t,y:n}){j_(e.x,t.translate,t.scale,t.originPoint),j_(e.y,n.translate,n.scale,n.originPoint)}const YL=.999999999999,XL=1.0000000000001;function Hwe(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,o;for(let c=0;c<s;c++){i=n[c],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Ng(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,cq(e,o)),r&&tp(i.latestValues)&&Ng(e,i.latestValues))}t.x<XL&&t.x>YL&&(t.x=1),t.y<XL&&t.y>YL&&(t.y=1)}function Sg(e,t){e.min=e.min+t,e.max=e.max+t}function JL(e,t,n,r,s=.5){const i=ys(e.min,e.max,s);j_(e,t,n,i,r)}function Ng(e,t){JL(e.x,t.x,t.scaleX,t.scale,t.originX),JL(e.y,t.y,t.scaleY,t.scale,t.originY)}function lq(e,t){return aq(Qwe(e.getBoundingClientRect(),t))}function $we(e,t,n){const r=lq(e,n),{scroll:s}=t;return s&&(Sg(r.x,s.offset.x),Sg(r.y,s.offset.y)),r}const ZL=()=>({translate:0,scale:1,origin:0,originPoint:0}),Bg=()=>({x:ZL(),y:ZL()}),eM=()=>({min:0,max:0}),$s=()=>({x:eM(),y:eM()}),k_={current:null},dq={current:!1};function zwe(){if(dq.current=!0,!!M4)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>k_.current=e.matches;e.addEventListener("change",t),t()}else k_.current=!1}const Vwe=new WeakMap;function qwe(e,t,n){for(const r in t){const s=t[r],i=n[r];if(ua(s))e.addValue(r,s);else if(ua(i))e.addValue(r,vv(s,{owner:e}));else if(i!==s)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=e.getStaticValue(r);e.addValue(r,vv(o!==void 0?o:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const tM=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Kwe{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=eT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const A=ho.now();this.renderScheduledAt<A&&(this.renderScheduledAt=A,ds.render(this.render,!1,!0))};const{latestValues:l,renderState:d}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=d,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!i,this.isControllingVariants=wk(n),this.isVariantNode=GV(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const A in h){const f=h[A];l[A]!==void 0&&ua(f)&&f.set(l[A])}}mount(t){var n;this.current=t,Vwe.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),dq.current||zwe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:k_.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),ZA(this.notifyUpdate),ZA(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Xv.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&ds.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in yv){const n=yv[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):$s()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<tM.length;r++){const s=tM[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=t[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=qwe(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=vv(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(nV(r)||sV(r))?r=parseFloat(r):!rwe(r)&&ef.test(n)&&(r=RV(t,n)),this.setBaseTarget(t,ua(r)?r.get():r)),ua(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=uT(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!ua(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new H4),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){rT.render(this.render)}}class uq extends Kwe{constructor(){super(...arguments),this.KeyframeResolver=Vxe}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ua(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function hq(e,{style:t,vars:n},r,s){const i=e.style;let o;for(o in t)i[o]=t[o];s==null||s.applyProjectionStyles(i,r);for(o in n)i.setProperty(o,n[o])}function Wwe(e){return window.getComputedStyle(e)}class Gwe extends uq{constructor(){super(...arguments),this.type="html",this.renderInstance=hq}readValueFromInstance(t,n){var r;if(Xv.has(n))return(r=this.projection)!=null&&r.isProjecting?m_(n):dxe(t,n);{const s=Wwe(t),i=(V4(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return lq(t,n)}build(t,n,r){cT(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return hT(t,n,r)}}const Aq=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ywe(e,t,n,r){hq(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(Aq.has(s)?s:AT(s),t.attrs[s])}class Xwe extends uq{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=$s}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Xv.has(n)){const r=MV(n);return r&&r.default||0}return n=Aq.has(n)?n:AT(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return nq(t,n,r)}build(t,n,r){JV(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){Ywe(t,n,r,s)}mount(t){this.isSVGTag=eq(t.tagName),super.mount(t)}}const Jwe=(e,t)=>dT(e)?new Xwe(t):new Gwe(t,{allowProjection:e!==w.Fragment});function Hg(e,t,n){const r=e.getProps();return uT(r,t,n!==void 0?n:r.custom,e)}const S_=e=>Array.isArray(e);function Zwe(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,vv(n))}function ebe(e){return S_(e)?e[e.length-1]||0:e}function tbe(e,t){const n=Hg(e,t);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const c=ebe(i[o]);Zwe(e,o,c)}}function nbe(e){return!!(ua(e)&&e.add)}function N_(e,t){const n=e.getValue("willChange");if(nbe(n))return n.add(t);if(!n&&th.WillChange){const r=new th.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function fq(e){return e.props[rq]}const rbe=e=>e!==null;function sbe(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(rbe),i=t&&n!=="loop"&&t%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const ibe={type:"spring",stiffness:500,damping:25,restSpeed:10},abe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),obe={type:"keyframes",duration:.8},cbe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},lbe=(e,{keyframes:t})=>t.length>2?obe:Xv.has(e)?e.startsWith("scale")?abe(t[1]):ibe:cbe;function dbe({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:c,from:l,elapsed:d,...u}){return!!Object.keys(u).length}const fT=(e,t,n,r={},s,i)=>o=>{const c=tT(r,e)||{},l=c.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Fd(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-d,onUpdate:A=>{t.set(A),c.onUpdate&&c.onUpdate(A)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:e,motionValue:t,element:i?void 0:s};dbe(c)||Object.assign(u,lbe(e,u)),u.duration&&(u.duration=Fd(u.duration)),u.repeatDelay&&(u.repeatDelay=Fd(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(w_(u),u.delay===0&&(h=!0)),(th.instantAnimations||th.skipAnimations)&&(h=!0,w_(u),u.delay=0),u.allowFlatten=!c.type&&!c.ease,h&&!i&&t.get()!==void 0){const A=sbe(u.keyframes,c);if(A!==void 0){ds.update(()=>{u.onUpdate(A),u.onComplete()});return}}return c.isSync?new Z4(u):new Txe(u)};function ube({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function pq(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...c}=t;r&&(i=r);const l=[],d=s&&e.animationState&&e.animationState.getState()[s];for(const u in c){const h=e.getValue(u,e.latestValues[u]??null),A=c[u];if(A===void 0||d&&ube(d,u))continue;const f={delay:n,...tT(i||{},u)},m=h.get();if(m!==void 0&&!h.isAnimating&&!Array.isArray(A)&&A===m&&!f.velocity)continue;let g=!1;if(window.MotionHandoffAnimation){const y=fq(e);if(y){const j=window.MotionHandoffAnimation(y,u,ds);j!==null&&(f.startTime=j,g=!0)}}N_(e,u),h.start(fT(u,h,A,e.shouldReduceMotion&&DV.has(u)?{type:!1}:f,e,g));const b=h.animation;b&&l.push(b)}return o&&Promise.all(l).then(()=>{ds.update(()=>{o&&tbe(e,o)})}),l}function mq(e,t,n,r=0,s=1){const i=Array.from(e).sort((d,u)=>d.sortNodePosition(u)).indexOf(t),o=e.size,c=(o-1)*r;return typeof n=="function"?n(i,o):s===1?i*r:c-i*r}function B_(e,t,n={}){var l;const r=Hg(e,t,n.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(pq(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(d=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:A}=s;return hbe(e,t,d,u,h,A,n)}:()=>Promise.resolve(),{when:c}=s;if(c){const[d,u]=c==="beforeChildren"?[i,o]:[o,i];return d().then(()=>u())}else return Promise.all([i(),o(n.delay)])}function hbe(e,t,n=0,r=0,s=0,i=1,o){const c=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),c.push(B_(l,t,{...o,delay:n+(typeof r=="function"?0:r)+mq(e.variantChildren,l,r,s,i)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(c)}function Abe(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>B_(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=B_(e,t,n);else{const s=typeof t=="function"?Hg(e,t,n.custom):t;r=Promise.all(pq(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function gq(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const fbe=oT.length;function vq(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?vq(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<fbe;n++){const r=oT[n],s=e.props[r];(Tx(s)||s===!1)&&(t[r]=s)}return t}const pbe=[...aT].reverse(),mbe=aT.length;function gbe(e){return t=>Promise.all(t.map(({animation:n,options:r})=>Abe(e,n,r)))}function vbe(e){let t=gbe(e),n=nM(),r=!0;const s=l=>(d,u)=>{var A;const h=Hg(e,u,l==="exit"?(A=e.presenceContext)==null?void 0:A.custom:void 0);if(h){const{transition:f,transitionEnd:m,...g}=h;d={...d,...g,...m}}return d};function i(l){t=l(e)}function o(l){const{props:d}=e,u=vq(e.parent)||{},h=[],A=new Set;let f={},m=1/0;for(let b=0;b<mbe;b++){const y=pbe[b],j=n[y],x=d[y]!==void 0?d[y]:u[y],C=Tx(x),S=y===l?j.isActive:null;S===!1&&(m=b);let _=x===u[y]&&x!==d[y]&&C;if(_&&r&&e.manuallyAnimateOnMount&&(_=!1),j.protectedKeys={...f},!j.isActive&&S===null||!x&&!j.prevProp||xk(x)||typeof x=="boolean")continue;const N=ybe(j.prevProp,x);let L=N||y===l&&j.isActive&&!_&&C||b>m&&C,P=!1;const F=Array.isArray(x)?x:[x];let I=F.reduce(s(y),{});S===!1&&(I={});const{prevResolvedValues:T={}}=j,Q={...T,...I},D=H=>{L=!0,A.has(H)&&(P=!0,A.delete(H)),j.needsAnimating[H]=!0;const $=e.getValue(H);$&&($.liveStyle=!1)};for(const H in Q){const $=I[H],R=T[H];if(f.hasOwnProperty(H))continue;let Y=!1;S_($)&&S_(R)?Y=!gq($,R):Y=$!==R,Y?$!=null?D(H):A.add(H):$!==void 0&&A.has(H)?D(H):j.protectedKeys[H]=!0}j.prevProp=x,j.prevResolvedValues=I,j.isActive&&(f={...f,...I}),r&&e.blockInitialAnimation&&(L=!1);const M=_&&N;L&&(!M||P)&&h.push(...F.map(H=>{const $={type:y};if(typeof H=="string"&&r&&!M&&e.manuallyAnimateOnMount&&e.parent){const{parent:R}=e,Y=Hg(R,H);if(R.enteringChildren&&Y){const{delayChildren:X}=Y.transition||{};$.delay=mq(R.enteringChildren,e,X)}}return{animation:H,options:$}}))}if(A.size){const b={};if(typeof d.initial!="boolean"){const y=Hg(e,Array.isArray(d.initial)?d.initial[0]:d.initial);y&&y.transition&&(b.transition=y.transition)}A.forEach(y=>{const j=e.getBaseTarget(y),x=e.getValue(y);x&&(x.liveStyle=!0),b[y]=j??null}),h.push({animation:b})}let g=!!h.length;return r&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(g=!1),r=!1,g?t(h):Promise.resolve()}function c(l,d){var h;if(n[l].isActive===d)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(A=>{var f;return(f=A.animationState)==null?void 0:f.setActive(l,d)}),n[l].isActive=d;const u=o(l);for(const A in n)n[A].protectedKeys={};return u}return{animateChanges:o,setActive:c,setAnimateFunction:i,getState:()=>n,reset:()=>{n=nM(),r=!0}}}function ybe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!gq(t,e):!1}function Gf(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function nM(){return{animate:Gf(!0),whileInView:Gf(),whileHover:Gf(),whileTap:Gf(),whileDrag:Gf(),whileFocus:Gf(),exit:Gf()}}class df{constructor(t){this.isMounted=!1,this.node=t}update(){}}class xbe extends df{constructor(t){super(t),t.animationState||(t.animationState=vbe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();xk(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let wbe=0;class bbe extends df{constructor(){super(...arguments),this.id=wbe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Cbe={animation:{Feature:xbe},exit:{Feature:bbe}};function Dx(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function jw(e){return{point:{x:e.pageX,y:e.pageY}}}const jbe=e=>t=>sT(t)&&e(t,jw(t));function Q0(e,t,n,r){return Dx(e,t,jbe(n),r)}const yq=1e-4,kbe=1-yq,Sbe=1+yq,xq=.01,Nbe=0-xq,Bbe=0+xq;function Oa(e){return e.max-e.min}function Ebe(e,t,n){return Math.abs(e-t)<=n}function rM(e,t,n,r=.5){e.origin=r,e.originPoint=ys(t.min,t.max,e.origin),e.scale=Oa(n)/Oa(t),e.translate=ys(n.min,n.max,e.origin)-e.originPoint,(e.scale>=kbe&&e.scale<=Sbe||isNaN(e.scale))&&(e.scale=1),(e.translate>=Nbe&&e.translate<=Bbe||isNaN(e.translate))&&(e.translate=0)}function H0(e,t,n,r){rM(e.x,t.x,n.x,r?r.originX:void 0),rM(e.y,t.y,n.y,r?r.originY:void 0)}function sM(e,t,n){e.min=n.min+t.min,e.max=e.min+Oa(t)}function _be(e,t,n){sM(e.x,t.x,n.x),sM(e.y,t.y,n.y)}function iM(e,t,n){e.min=t.min-n.min,e.max=e.min+Oa(t)}function $0(e,t,n){iM(e.x,t.x,n.x),iM(e.y,t.y,n.y)}function pc(e){return[e("x"),e("y")]}const wq=({current:e})=>e?e.ownerDocument.defaultView:null,aM=(e,t)=>Math.abs(e-t);function Ibe(e,t){const n=aM(e.x,t.x),r=aM(e.y,t.y);return Math.sqrt(n**2+r**2)}class bq{constructor(t,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=oB(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=Ibe(A.offset,{x:0,y:0})>=this.distanceThreshold;if(!f&&!m)return;const{point:g}=A,{timestamp:b}=Mi;this.history.push({...g,timestamp:b});const{onStart:y,onMove:j}=this.handlers;f||(y&&y(this.lastMoveEvent,A),this.startEvent=this.lastMoveEvent),j&&j(this.lastMoveEvent,A)},this.handlePointerMove=(A,f)=>{this.lastMoveEvent=A,this.lastMoveEventInfo=aB(f,this.transformPagePoint),ds.update(this.updatePoint,!0)},this.handlePointerUp=(A,f)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=oB(A.type==="pointercancel"?this.lastMoveEventInfo:aB(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(A,y),g&&g(A,y)},!sT(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=s||window;const c=jw(t),l=aB(c,this.transformPagePoint),{point:d}=l,{timestamp:u}=Mi;this.history=[{...d,timestamp:u}];const{onSessionStart:h}=n;h&&h(t,oB(l,this.history)),this.removeListeners=ww(Q0(this.contextWindow,"pointermove",this.handlePointerMove),Q0(this.contextWindow,"pointerup",this.handlePointerUp),Q0(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ZA(this.updatePoint)}}function aB(e,t){return t?{point:t(e.point)}:e}function oM(e,t){return{x:e.x-t.x,y:e.y-t.y}}function oB({point:e},t){return{point:e,delta:oM(e,Cq(t)),offset:oM(e,Pbe(t)),velocity:Tbe(t,.1)}}function Pbe(e){return e[0]}function Cq(e){return e[e.length-1]}function Tbe(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=Cq(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>Fd(t)));)n--;if(!r)return{x:0,y:0};const i=Dd(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Fbe(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?ys(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?ys(n,e,r.max):Math.min(e,n)),e}function cM(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function Dbe(e,{top:t,left:n,bottom:r,right:s}){return{x:cM(e.x,n,s),y:cM(e.y,t,r)}}function lM(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function Ube(e,t){return{x:lM(e.x,t.x),y:lM(e.y,t.y)}}function Lbe(e,t){let n=.5;const r=Oa(e),s=Oa(t);return s>r?n=_x(t.min,t.max-r,e.min):r>s&&(n=_x(e.min,e.max-s,t.min)),eh(0,1,n)}function Mbe(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const E_=.35;function Rbe(e=E_){return e===!1?e=0:e===!0&&(e=E_),{x:dM(e,"left","right"),y:dM(e,"top","bottom")}}function dM(e,t,n){return{min:uM(e,t),max:uM(e,n)}}function uM(e,t){return typeof e=="number"?e:e[t]||0}const Obe=new WeakMap;class Qbe{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=$s(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:A}=this.getProps();A?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(jw(h).point)},o=(h,A)=>{const{drag:f,dragPropagation:m,onDragStart:g}=this.getProps();if(f&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Gxe(f),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=A,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),pc(y=>{let j=this.getAxisMotionValue(y).get()||0;if(Ud.test(j)){const{projection:x}=this.visualElement;if(x&&x.layout){const C=x.layout.layoutBox[y];C&&(j=Oa(C)*(parseFloat(j)/100))}}this.originPoint[y]=j}),g&&ds.postRender(()=>g(h,A)),N_(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},c=(h,A)=>{this.latestPointerEvent=h,this.latestPanInfo=A;const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:g,onDrag:b}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:y}=A;if(m&&this.currentDirection===null){this.currentDirection=Hbe(y),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",A.point,y),this.updateAxis("y",A.point,y),this.visualElement.render(),b&&b(h,A)},l=(h,A)=>{this.latestPointerEvent=h,this.latestPanInfo=A,this.stop(h,A),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>pc(h=>{var A;return this.getAnimationState(h)==="paused"&&((A=this.getAxisMotionValue(h).animation)==null?void 0:A.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new bq(t,{onSessionStart:i,onStart:o,onMove:c,onSessionEnd:l,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:wq(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&ds.postRender(()=>c(r,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!l1(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=Fbe(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;t&&kg(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=Dbe(r.layoutBox,t):this.constraints=!1,this.elastic=Rbe(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&pc(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Mbe(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!kg(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=$we(r,s.root,this.visualElement.getTransformPagePoint());let o=Ube(s.layout.layoutBox,i);if(n){const c=n(Owe(o));this.hasMutatedConstraints=!!c,c&&(o=aq(c))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),l=this.constraints||{},d=pc(u=>{if(!l1(u,n,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const A=s?200:1e6,f=s?40:1e7,m={type:"inertia",velocity:r?t[u]:0,bounceStiffness:A,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,m)});return Promise.all(d).then(c)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return N_(this.visualElement,t),r.start(fT(t,r,0,n,this.visualElement,!1))}stopAnimation(){pc(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){pc(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){pc(n=>{const{drag:r}=this.getProps();if(!l1(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:c}=s.layout.layoutBox[n];i.set(t[n]-ys(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!kg(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};pc(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const l=c.get();s[o]=Lbe({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),pc(o=>{if(!l1(o,t,null))return;const c=this.getAxisMotionValue(o),{min:l,max:d}=this.constraints[o];c.set(ys(l,d,s[o]))})}addListeners(){if(!this.visualElement.current)return;Obe.set(this.visualElement,this);const t=this.visualElement.current,n=Q0(t,"pointerdown",l=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();kg(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),ds.read(r);const o=Dx(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:d})=>{this.isDragging&&d&&(pc(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=E_,dragMomentum:c=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:c}}}function l1(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Hbe(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class $be extends df{constructor(t){super(t),this.removeGroupControls=Nc,this.removeListeners=Nc,this.controls=new Qbe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Nc}unmount(){this.removeGroupControls(),this.removeListeners()}}const hM=e=>(t,n)=>{e&&ds.postRender(()=>e(t,n))};class zbe extends df{constructor(){super(...arguments),this.removePointerDownListener=Nc}onPointerDown(t){this.session=new bq(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:wq(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:hM(t),onStart:hM(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&ds.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=Q0(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const _2={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function AM(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Hy={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(mn.test(e))e=parseFloat(e);else return e;const n=AM(e,t.target.x),r=AM(e,t.target.y);return`${n}% ${r}%`}},Vbe={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=ef.parse(e);if(s.length>5)return r;const i=ef.createTransformer(e),o=typeof s[0]!="number"?1:0,c=n.x.scale*t.x,l=n.y.scale*t.y;s[0+o]/=c,s[1+o]/=l;const d=ys(c,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=d),typeof s[3+o]=="number"&&(s[3+o]/=d),i(s)}};let cB=!1;class qbe extends w.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;fwe(Kbe),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),cB&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),_2.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,cB=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||ds.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),rT.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;cB=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function jq(e){const[t,n]=qV(),r=w.useContext(U4);return a.jsx(qbe,{...e,layoutGroup:r,switchLayoutGroup:w.useContext(sq),isPresent:t,safeToRemove:n})}const Kbe={borderRadius:{...Hy,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Hy,borderTopRightRadius:Hy,borderBottomLeftRadius:Hy,borderBottomRightRadius:Hy,boxShadow:Vbe};function Wbe(e,t,n){const r=ua(e)?e:vv(e);return r.start(fT("",r,t,n)),r.animation}const Gbe=(e,t)=>e.depth-t.depth;class Ybe{constructor(){this.children=[],this.isDirty=!1}add(t){R4(this.children,t),this.isDirty=!0}remove(t){O4(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Gbe),this.isDirty=!1,this.children.forEach(t)}}function Xbe(e,t){const n=ho.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(ZA(r),e(i-t))};return ds.setup(r,!0),()=>ZA(r)}const kq=["TopLeft","TopRight","BottomLeft","BottomRight"],Jbe=kq.length,fM=e=>typeof e=="string"?parseFloat(e):e,pM=e=>typeof e=="number"||mn.test(e);function Zbe(e,t,n,r,s,i){s?(e.opacity=ys(0,n.opacity??1,e1e(r)),e.opacityExit=ys(t.opacity??1,0,t1e(r))):i&&(e.opacity=ys(t.opacity??1,n.opacity??1,r));for(let o=0;o<Jbe;o++){const c=`border${kq[o]}Radius`;let l=mM(t,c),d=mM(n,c);if(l===void 0&&d===void 0)continue;l||(l=0),d||(d=0),l===0||d===0||pM(l)===pM(d)?(e[c]=Math.max(ys(fM(l),fM(d),r),0),(Ud.test(d)||Ud.test(l))&&(e[c]+="%")):e[c]=d}(t.rotate||n.rotate)&&(e.rotate=ys(t.rotate||0,n.rotate||0,r))}function mM(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const e1e=Sq(0,.5,hV),t1e=Sq(.5,.95,Nc);function Sq(e,t,n){return r=>r<e?0:r>t?1:n(_x(e,t,r))}function gM(e,t){e.min=t.min,e.max=t.max}function fc(e,t){gM(e.x,t.x),gM(e.y,t.y)}function vM(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function yM(e,t,n,r,s){return e-=t,e=zC(e,1/n,r),s!==void 0&&(e=zC(e,1/s,r)),e}function n1e(e,t=0,n=1,r=.5,s,i=e,o=e){if(Ud.test(t)&&(t=parseFloat(t),t=ys(o.min,o.max,t/100)-o.min),typeof t!="number")return;let c=ys(i.min,i.max,r);e===i&&(c-=t),e.min=yM(e.min,t,n,c,s),e.max=yM(e.max,t,n,c,s)}function xM(e,t,[n,r,s],i,o){n1e(e,t[n],t[r],t[s],t.scale,i,o)}const r1e=["x","scaleX","originX"],s1e=["y","scaleY","originY"];function wM(e,t,n,r){xM(e.x,t,r1e,n?n.x:void 0,r?r.x:void 0),xM(e.y,t,s1e,n?n.y:void 0,r?r.y:void 0)}function bM(e){return e.translate===0&&e.scale===1}function Nq(e){return bM(e.x)&&bM(e.y)}function CM(e,t){return e.min===t.min&&e.max===t.max}function i1e(e,t){return CM(e.x,t.x)&&CM(e.y,t.y)}function jM(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Bq(e,t){return jM(e.x,t.x)&&jM(e.y,t.y)}function kM(e){return Oa(e.x)/Oa(e.y)}function SM(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class a1e{constructor(){this.members=[]}add(t){R4(this.members,t),t.scheduleRender()}remove(t){if(O4(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function o1e(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:d,rotate:u,rotateX:h,rotateY:A,skewX:f,skewY:m}=n;d&&(r=`perspective(${d}px) ${r}`),u&&(r+=`rotate(${u}deg) `),h&&(r+=`rotateX(${h}deg) `),A&&(r+=`rotateY(${A}deg) `),f&&(r+=`skewX(${f}deg) `),m&&(r+=`skewY(${m}deg) `)}const c=e.x.scale*t.x,l=e.y.scale*t.y;return(c!==1||l!==1)&&(r+=`scale(${c}, ${l})`),r||"none"}const lB=["","X","Y","Z"],c1e=1e3;let l1e=0;function dB(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Eq(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=fq(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",ds,!(s||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Eq(r)}function _q({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},c=t==null?void 0:t()){this.id=l1e++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(h1e),this.nodes.forEach(m1e),this.nodes.forEach(g1e),this.nodes.forEach(A1e)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ybe)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new H4),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const l=this.eventHandlers.get(o);l&&l.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=VV(o)&&!twe(o),this.instance=o;const{layoutId:c,layout:l,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||c)&&(this.isLayoutDirty=!0),e){let u,h=0;const A=()=>this.root.updateBlockedByResize=!1;ds.read(()=>{h=window.innerWidth}),e(o,()=>{const f=window.innerWidth;f!==h&&(h=f,this.root.updateBlockedByResize=!0,u&&u(),u=Xbe(A,250),_2.hasAnimatedSinceResize&&(_2.hasAnimatedSinceResize=!1,this.nodes.forEach(EM)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:A,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||d.getDefaultTransition()||b1e,{onLayoutAnimationStart:g,onLayoutAnimationComplete:b}=d.getProps(),y=!this.targetLayout||!Bq(this.targetLayout,f),j=!h&&A;if(this.options.layoutRoot||this.resumeFrom||j||h&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const x={...tT(m,"layout"),onPlay:g,onComplete:b};(d.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x),this.setAnimationOrigin(u,j)}else h||EM(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ZA(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(v1e),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Eq(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:c,layout:l}=this.options;if(c===void 0&&!l)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(NM);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(BM);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(p1e),this.nodes.forEach(d1e),this.nodes.forEach(u1e)):this.nodes.forEach(BM),this.clearAllSnapshots();const c=ho.now();Mi.delta=eh(0,1e3/60,c-Mi.timestamp),Mi.timestamp=c,Mi.isProcessing=!0,JN.update.process(Mi),JN.preRender.process(Mi),JN.render.process(Mi),Mi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,rT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(f1e),this.sharedNodes.forEach(y1e)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ds.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ds.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Oa(this.snapshot.measuredBox.x)&&!Oa(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=$s(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!Nq(this.projectionDelta),l=this.getTransformTemplate(),d=l?l(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;o&&this.instance&&(c||tp(this.latestValues)||u)&&(s(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let l=this.removeElementScroll(c);return o&&(l=this.removeTransform(l)),C1e(l),{animationId:this.root.animationId,measuredBox:c,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:o}=this.options;if(!o)return $s();const c=o.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(j1e))){const{scroll:u}=this.root;u&&(Sg(c.x,u.offset.x),Sg(c.y,u.offset.y))}return c}removeElementScroll(o){var l;const c=$s();if(fc(c,o),(l=this.scroll)!=null&&l.wasRoot)return c;for(let d=0;d<this.path.length;d++){const u=this.path[d],{scroll:h,options:A}=u;u!==this.root&&h&&A.layoutScroll&&(h.wasRoot&&fc(c,o),Sg(c.x,h.offset.x),Sg(c.y,h.offset.y))}return c}applyTransform(o,c=!1){const l=$s();fc(l,o);for(let d=0;d<this.path.length;d++){const u=this.path[d];!c&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Ng(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),tp(u.latestValues)&&Ng(l,u.latestValues)}return tp(this.latestValues)&&Ng(l,this.latestValues),l}removeTransform(o){const c=$s();fc(c,o);for(let l=0;l<this.path.length;l++){const d=this.path[l];if(!d.instance||!tp(d.latestValues))continue;C_(d.latestValues)&&d.updateSnapshot();const u=$s(),h=d.measurePageBox();fc(u,h),wM(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return tp(this.latestValues)&&wM(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Mi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var A;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==c;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(A=this.parent)!=null&&A.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:h}=this.options;if(!(!this.layout||!(u||h))){if(this.resolvedRelativeTargetAt=Mi.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$s(),this.relativeTargetOrigin=$s(),$0(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),fc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=$s(),this.targetWithTransforms=$s()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),_be(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):fc(this.target,this.layout.layoutBox),cq(this.target,this.targetDelta)):fc(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$s(),this.relativeTargetOrigin=$s(),$0(this.relativeTargetOrigin,this.target,f.target),fc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||C_(this.parent.latestValues)||oq(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var m;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty)&&(l=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Mi.timestamp&&(l=!1),l)return;const{layout:d,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||u))return;fc(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,A=this.treeScale.y;Hwe(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=$s());const{target:f}=o;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(vM(this.prevProjectionDelta.x,this.projectionDelta.x),vM(this.prevProjectionDelta.y,this.projectionDelta.y)),H0(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==A||!SM(this.projectionDelta.x,this.prevProjectionDelta.x)||!SM(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Bg(),this.projectionDelta=Bg(),this.projectionDeltaWithTransform=Bg()}setAnimationOrigin(o,c=!1){const l=this.snapshot,d=l?l.latestValues:{},u={...this.latestValues},h=Bg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const A=$s(),f=l?l.source:void 0,m=this.layout?this.layout.source:void 0,g=f!==m,b=this.getStack(),y=!b||b.members.length<=1,j=!!(g&&!y&&this.options.crossfade===!0&&!this.path.some(w1e));this.animationProgress=0;let x;this.mixTargetDelta=C=>{const S=C/1e3;_M(h.x,o.x,S),_M(h.y,o.y,S),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&($0(A,this.layout.layoutBox,this.relativeParent.layout.layoutBox),x1e(this.relativeTarget,this.relativeTargetOrigin,A,S),x&&i1e(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=$s()),fc(x,this.relativeTarget)),g&&(this.animationValues=u,Zbe(u,d,this.latestValues,S,j,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var c,l,d;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(),(d=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||d.stop(),this.pendingAnimation&&(ZA(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ds.update(()=>{_2.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=vv(0)),this.currentAnimation=Wbe(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(c1e),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:l,layout:d,latestValues:u}=o;if(!(!c||!l||!d)){if(this!==o&&this.layout&&d&&Iq(this.options.animationType,this.layout.layoutBox,d.layoutBox)){l=this.target||$s();const h=Oa(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const A=Oa(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+A}fc(c,l),Ng(c,u),H0(this.projectionDeltaWithTransform,this.layoutCorrected,c,u)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new a1e),this.sharedNodes.get(o).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var c;const{layoutId:o}=this.options;return o?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:o}=this.options;return o?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:l}={}){const d=this.getStack();d&&d.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(c=!0),!c)return;const d={};l.z&&dB("z",o,d,this.animationValues);for(let u=0;u<lB.length;u++)dB(`rotate${lB[u]}`,o,d,this.animationValues),dB(`skew${lB[u]}`,o,d,this.animationValues);o.render();for(const u in d)o.setStaticValue(u,d[u]),this.animationValues&&(this.animationValues[u]=d[u]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=E2(c==null?void 0:c.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=E2(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!tp(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const u=d.animationValues||d.latestValues;this.applyTransformsToTarget();let h=o1e(this.projectionDeltaWithTransform,this.treeScale,u);l&&(h=l(u,h)),o.transform=h;const{x:A,y:f}=this.projectionDelta;o.transformOrigin=`${A.origin*100}% ${f.origin*100}% 0`,d.animationValues?o.opacity=d===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=d===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const m in Fx){if(u[m]===void 0)continue;const{correct:g,applyTo:b,isCSSVariable:y}=Fx[m],j=h==="none"?u[m]:g(u[m],d);if(b){const x=b.length;for(let C=0;C<x;C++)o[b[C]]=j}else y?this.options.visualElement.renderState.vars[m]=j:o[m]=j}this.options.layoutId&&(o.pointerEvents=d===this?E2(c==null?void 0:c.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var c;return(c=o.currentAnimation)==null?void 0:c.stop()}),this.root.nodes.forEach(NM),this.root.sharedNodes.clear()}}}function d1e(e){e.updateLayout()}function u1e(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,o=t.source!==e.layout.source;i==="size"?pc(h=>{const A=o?t.measuredBox[h]:t.layoutBox[h],f=Oa(A);A.min=r[h].min,A.max=A.min+f}):Iq(i,t.layoutBox,r)&&pc(h=>{const A=o?t.measuredBox[h]:t.layoutBox[h],f=Oa(r[h]);A.max=A.min+f,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+f)});const c=Bg();H0(c,r,t.layoutBox);const l=Bg();o?H0(l,e.applyTransform(s,!0),t.measuredBox):H0(l,r,t.layoutBox);const d=!Nq(c);let u=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:A,layout:f}=h;if(A&&f){const m=$s();$0(m,t.layoutBox,A.layoutBox);const g=$s();$0(g,r,f.layoutBox),Bq(m,g)||(u=!0),h.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=m,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:c,hasLayoutChanged:d,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function h1e(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function A1e(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function f1e(e){e.clearSnapshot()}function NM(e){e.clearMeasurements()}function BM(e){e.isLayoutDirty=!1}function p1e(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function EM(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function m1e(e){e.resolveTargetDelta()}function g1e(e){e.calcProjection()}function v1e(e){e.resetSkewAndRotation()}function y1e(e){e.removeLeadSnapshot()}function _M(e,t,n){e.translate=ys(t.translate,0,n),e.scale=ys(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function IM(e,t,n,r){e.min=ys(t.min,n.min,r),e.max=ys(t.max,n.max,r)}function x1e(e,t,n,r){IM(e.x,t.x,n.x,r),IM(e.y,t.y,n.y,r)}function w1e(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const b1e={duration:.45,ease:[.4,0,.1,1]},PM=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),TM=PM("applewebkit/")&&!PM("chrome/")?Math.round:Nc;function FM(e){e.min=TM(e.min),e.max=TM(e.max)}function C1e(e){FM(e.x),FM(e.y)}function Iq(e,t,n){return e==="position"||e==="preserve-aspect"&&!Ebe(kM(t),kM(n),.2)}function j1e(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const k1e=_q({attachResizeListener:(e,t)=>Dx(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),uB={current:void 0},Pq=_q({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!uB.current){const e=new k1e({});e.mount(window),e.setOptions({layoutScroll:!0}),uB.current=e}return uB.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),S1e={pan:{Feature:zbe},drag:{Feature:$be,ProjectionNode:Pq,MeasureLayout:jq}};function DM(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&ds.postRender(()=>i(t,jw(t)))}class N1e extends df{mount(){const{current:t}=this.node;t&&(this.unmount=Yxe(t,(n,r)=>(DM(this.node,r,"Start"),s=>DM(this.node,s,"End"))))}unmount(){}}class B1e extends df{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ww(Dx(this.node.current,"focus",()=>this.onFocus()),Dx(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function UM(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&ds.postRender(()=>i(t,jw(t)))}class E1e extends df{mount(){const{current:t}=this.node;t&&(this.unmount=ewe(t,(n,r)=>(UM(this.node,r,"Start"),(s,{success:i})=>UM(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const __=new WeakMap,hB=new WeakMap,_1e=e=>{const t=__.get(e.target);t&&t(e)},I1e=e=>{e.forEach(_1e)};function P1e({root:e,...t}){const n=e||document;hB.has(n)||hB.set(n,{});const r=hB.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(I1e,{root:e,...t})),r[s]}function T1e(e,t,n){const r=P1e(t);return __.set(e,n),r.observe(e),()=>{__.delete(e),r.unobserve(e)}}const F1e={some:0,all:1};class D1e extends df{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:F1e[s]},c=l=>{const{isIntersecting:d}=l;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),A=d?u:h;A&&A(l)};return T1e(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(U1e(t,n))&&this.startObserver()}unmount(){}}function U1e({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const L1e={inView:{Feature:D1e},tap:{Feature:E1e},focus:{Feature:B1e},hover:{Feature:N1e}},M1e={layout:{ProjectionNode:Pq,MeasureLayout:jq}},R1e={...Cbe,...L1e,...S1e,...M1e},ot=Rwe(R1e,Jwe),Dc=()=>{const[e,t]=w.useState(null),[n,r]=w.useState(null),[s,i]=w.useState(!0);return w.useEffect(()=>{const{data:{subscription:u}}=rt.auth.onAuthStateChange((h,A)=>{r(A),t((A==null?void 0:A.user)??null),i(!1)});return rt.auth.getSession().then(({data:{session:h}})=>{r(h),t((h==null?void 0:h.user)??null),i(!1)}),()=>u.unsubscribe()},[]),{user:e,session:n,loading:s,signUp:async(u,h,A)=>{const f=`${window.location.origin}/`,{error:m}=await rt.auth.signUp({email:u,password:h,options:{emailRedirectTo:f,data:{display_name:A}}});return{error:m}},signIn:async(u,h)=>{const{error:A}=await rt.auth.signInWithPassword({email:u,password:h});return{error:A}},signOut:async()=>{const{error:u}=await rt.auth.signOut();return{error:u}},signInWithGoogle:async()=>{const{error:u}=await rt.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/`}});return{error:u}}}},js=cf((e,t)=>({projects:[],currentProject:null,isLoading:!1,error:null,fetchProjects:async()=>{e({isLoading:!0,error:null});try{const{data:{user:n}}=await rt.auth.getUser();if(!n)throw new Error("User not authenticated");const{data:r,error:s}=await rt.from("projects").select("*").eq("user_id",n.id);if(s)throw s;const{data:i,error:o}=await rt.from("project_members").select(`
          project_id,
          role,
          projects (*)
        `).eq("user_id",n.id);o&&o.code!=="PGRST116"&&console.warn("Error fetching member projects:",o);const c=[...r||[]];return i&&i.forEach(l=>{l.projects&&(c.find(u=>u.id===l.projects.id)||c.push(l.projects))}),c.sort((l,d)=>new Date(d.updated_at).getTime()-new Date(l.updated_at).getTime()),e({projects:c,isLoading:!1}),c}catch(n){return console.error("Error fetching projects:",n),e({error:n instanceof Error?n.message:"Failed to fetch projects",isLoading:!1}),[]}},createProject:async(n,r)=>{e({isLoading:!0,error:null});try{const{data:{user:s}}=await rt.auth.getUser();if(!s)throw new Error("User not authenticated");const{data:i,error:o}=await rt.from("projects").insert([{name:n,description:r,canvas_data:{nodes:[],edges:[]},user_id:s.id}]).select().single();if(o)throw o;const c=i;return e(l=>({projects:[c,...l.projects],currentProject:c,isLoading:!1})),c}catch(s){throw console.error("Error creating project:",s),e({error:s instanceof Error?s.message:"Failed to create project",isLoading:!1}),s}},updateProject:async(n,r)=>{e({isLoading:!0,error:null});try{const{data:s,error:i}=await rt.from("projects").update(r).eq("id",n).select().single();if(i)throw i;const o=s;e(c=>{var l;return{projects:c.projects.map(d=>d.id===n?o:d),currentProject:((l=c.currentProject)==null?void 0:l.id)===n?o:c.currentProject,isLoading:!1}})}catch(s){console.error("Error updating project:",s),e({error:s instanceof Error?s.message:"Failed to update project",isLoading:!1})}},deleteProject:async n=>{e({isLoading:!0,error:null});try{const{error:r}=await rt.from("projects").delete().eq("id",n);if(r)throw r;e(s=>{var i;return{projects:s.projects.filter(o=>o.id!==n),currentProject:((i=s.currentProject)==null?void 0:i.id)===n?null:s.currentProject,isLoading:!1}})}catch(r){console.error("Error deleting project:",r),e({error:r instanceof Error?r.message:"Failed to delete project",isLoading:!1})}},setCurrentProject:async n=>{if(e({currentProject:n}),n)try{const r=new Date().toISOString();await rt.from("projects").update({last_opened:r}).eq("id",n.id);const s={...n,last_opened:r};e(i=>({currentProject:s,projects:i.projects.map(o=>o.id===n.id?s:o)}))}catch(r){console.error("Failed to update last_opened timestamp:",r)}},saveCanvasData:async(n,r,s,i,o)=>{try{const c=r.map(A=>({...A,data:A.data?JSON.parse(JSON.stringify(A.data)):null})),l=s.map(A=>({...A,data:A.data?JSON.parse(JSON.stringify(A.data)):null})),d={nodes:c,edges:l,toolToPromptIdMapping:i||{},lastUpdated:new Date().toISOString()},u={canvas_data:d};o&&(u.last_modified_by=o);const{error:h}=await rt.from("projects").update(u).eq("id",n);if(h)throw console.error("Supabase canvas save error:",h),console.error("Canvas data being sent:",d),h;e(A=>{var f;return{projects:A.projects.map(m=>m.id===n?{...m,canvas_data:{nodes:r,edges:s,toolToPromptIdMapping:i}}:m),currentProject:((f=A.currentProject)==null?void 0:f.id)===n?{...A.currentProject,canvas_data:{nodes:r,edges:s,toolToPromptIdMapping:i}}:A.currentProject}})}catch(c){console.error("Error saving canvas data:",c),e({error:c instanceof Error?c.message:"Failed to save canvas data"})}},saveMiroToken:async(n,r)=>{try{const i=t().projects.find(l=>l.id===n);if(!i)throw new Error("Project not found");const o={...i.miro_settings,accessToken:r},{error:c}=await rt.from("projects").update({miro_settings:o}).eq("id",n);if(c)throw c;e(l=>{var d;return{projects:l.projects.map(u=>u.id===n?{...u,miro_settings:o}:u),currentProject:((d=l.currentProject)==null?void 0:d.id)===n?{...l.currentProject,miro_settings:o}:l.currentProject}})}catch(s){throw console.error("Error saving Miro token:",s),e({error:s instanceof Error?s.message:"Failed to save Miro token"}),s}},addConnectedBoard:async(n,r,s)=>{var i;try{const c=t().projects.find(f=>f.id===n);if(!c)throw new Error("Project not found");const l=((i=c.miro_settings)==null?void 0:i.connectedBoards)||[],d=l.findIndex(f=>f.id===r);let u;d>=0?(u=[...l],u[d]={id:r,name:s,lastUsed:new Date().toISOString()}):u=[{id:r,name:s,lastUsed:new Date().toISOString()},...l];const h={...c.miro_settings,connectedBoards:u.slice(0,10)},{error:A}=await rt.from("projects").update({miro_settings:h}).eq("id",n);if(A)throw A;e(f=>{var m;return{projects:f.projects.map(g=>g.id===n?{...g,miro_settings:h}:g),currentProject:((m=f.currentProject)==null?void 0:m.id)===n?{...f.currentProject,miro_settings:h}:f.currentProject}})}catch(o){throw console.error("Error adding connected board:",o),e({error:o instanceof Error?o.message:"Failed to save connected board"}),o}},setDefaultBoard:async(n,r)=>{try{const i=t().projects.find(l=>l.id===n);if(!i)throw new Error("Project not found");const o={...i.miro_settings,defaultBoardId:r},{error:c}=await rt.from("projects").update({miro_settings:o}).eq("id",n);if(c)throw c;e(l=>{var d;return{projects:l.projects.map(u=>u.id===n?{...u,miro_settings:o}:u),currentProject:((d=l.currentProject)==null?void 0:d.id)===n?{...l.currentProject,miro_settings:o}:l.currentProject}})}catch(s){throw console.error("Error setting default board:",s),e({error:s instanceof Error?s.message:"Failed to set default board"}),s}},getMiroToken:n=>{var i;const r=t(),s=r.projects.find(o=>o.id===n)||r.currentProject;return((i=s==null?void 0:s.miro_settings)==null?void 0:i.accessToken)||null},getConnectedBoards:n=>{var i;const r=t(),s=r.projects.find(o=>o.id===n)||r.currentProject;return((i=s==null?void 0:s.miro_settings)==null?void 0:i.connectedBoards)||[]},saveEnhancedSettings:async(n,r)=>{try{const{error:s}=await rt.from("projects").update({enhanced_settings:r}).eq("id",n);if(s){if(s.code==="PGRST204"&&s.message.includes("enhanced_settings")){console.warn("Enhanced settings column not found, using localStorage fallback"),localStorage.setItem(`enhanced_settings_${n}`,JSON.stringify(r)),e(i=>{var o;return{projects:i.projects.map(c=>c.id===n?{...c,enhanced_settings:r}:c),currentProject:((o=i.currentProject)==null?void 0:o.id)===n?{...i.currentProject,enhanced_settings:r}:i.currentProject}});return}throw s}e(i=>{var o;return{projects:i.projects.map(c=>c.id===n?{...c,enhanced_settings:r}:c),currentProject:((o=i.currentProject)==null?void 0:o.id)===n?{...i.currentProject,enhanced_settings:r}:i.currentProject}})}catch(s){throw console.error("Error saving enhanced settings:",s),e({error:s instanceof Error?s.message:"Failed to save enhanced settings"}),s}},getEnhancedSettings:n=>{const r=t(),s=r.projects.find(i=>i.id===n)||r.currentProject;if(console.log("[getEnhancedSettings] Debug:",{projectId:n,hasProject:!!s,hasEnhancedSettings:!!(s!=null&&s.enhanced_settings),projectName:s==null?void 0:s.name}),s!=null&&s.enhanced_settings)return console.log("[getEnhancedSettings] Found in project data"),s.enhanced_settings;try{const i=localStorage.getItem(`enhanced_settings_${n}`);return i?(console.log("[getEnhancedSettings] Found in localStorage"),JSON.parse(i)):(console.log("[getEnhancedSettings] No settings found, returning null"),null)}catch(i){return console.error("[getEnhancedSettings] Error reading from localStorage:",i),null}},clearError:()=>e({error:null})})),O1e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAABzhJREFUeJy1V32oZVUVX2vtvc859857T0eFFyHUxNOeo/lHH0MUA33w/jApFLMwiTCUsg8xZjSnDwqJmIhAkpIBCUIrRC36Q1Ea6INKsGJwVBi1sZkGqRlj5lm+9+7cc89erbX2Pud+vCf0R+7Hevvce8/Zv99a67fW3sdDHku7rq6KXu8aX5RfBKSdgL5i8sDoIZJamcxXEJ1aD1ivfYUx6HUJHMo8B4ihAC4KmQOAJ26CewUc/YkBvuUH9ROn97yZFdfrvwvftnJOb1vvIXThfYiCiAjc/YEY5jlfI4khRMzXMDkDxHyvzfKZSf4RXMAerxDE3aOquEd+ut0ILO36yFzZ6z2GRO/WR1ifsIUEnPMC3YKYjEnA1bwZk5NH9LPLRBLBZPKcEIiOAJwi4hw5vG3h/n942OC93nt3IxHtYla+ZFD2x7wWiWslEWWVRi2DK0gUV6KsGA1QgTO4GsnvNCYREapIUBkBMZa4E+Fn5PoX3jn3aWCBasE5juq62ScLPTwEGOpCjS7oBNBFyblYk2Yo5P6oUWONHVjIIKdPI4jqlND2bi4i38wOb0HPmmQhCX2R1u1eHrnInkteQz0c7Hn+jw9+H/7/49byvpf+KSS+DSThlEiIht7jxZtKRafhZ24GEoFHXwdwGxLHewX0VoFfNKETb/eae5Z4WPgQVdjN60XgfB/XXkZcyzoHjYTP0U9ftNcTI7z/3iAKfmckdx6Q1DSpggoRUwAUXaAP8lWQj2FE3p0SJ44v9qrTf7v7ss0McGQCNbmROsypD2juERmSjqYZxMLvYOcOimz7CTwYeDsrAfTyvXfacEbo6alTFB/s33z47vV7Ll+fWsyJICkJFMy0ljKeASNsGlHdQ+yLuzBtNGHaaKz8PDr3DghiFV1T3Xbk2sF3l4+PI3BW7nNGQg2o0QjwOPJxcwQMzDqZt4enTJsLoYU1dbtU/6ifC/cumfdfuv/5Tzx7x8VpUXc2ryNRIGlpSqCFyxnYIm/JQzbm2vW84NI6OlpTIJnVnBA6V1JFLKlAS4c0qUBXvlDTe2WV35uTSkB6iRJATYdownd570QYtyBA5nEiIR3E0x7pbo+p95gUTd7jjoHDLzeOViwyXkgHnMcCd7cE0AioDmImMJECIwKp/0/jUwLObVaJ9At/4uSPdh+bidWLi3ccOXba0ZEYpNcJAQjWdt/S3sBhPYk2hx9h1FYBdBHAmUTodgxEWTwuX9NWyYKT+5eP9u48+tzZQJdCkJUKiZCHhc4ZtybLhAQuFZBS0CGlrTfOCqEFnADH1yBw1Q/+7h5ZrRdZPIdCIyCLOf5Pd4NXAt4iABJ+2WVaEaZ9d0sROjcm4LTeRTb63czYcedR/6sz9efrki5QcFRwbyF9YezMmiwXrAIIteGqBmzDnz5wbCJgonLZPKw6f/22vU/vhCAIgWDksHqJ4O11wBWQJqm5z96viuB/18naUlBayakAdQ/1LXA6BaUDxOTQMjOPrbwU0MMw+OuGSNfpXm8V4jCFvEjCswbvrLsedKvNk6MuAoMkHxOgdsQuBRlc9sjZnYi7NisWxAqfZiUk3kupWRQSgey9rkp8hCJ/9ewtF3dLrrl/k3PRWSeE3IolG8LU2fkunXBmGCgBS0HynkNLhjJwqnnLt5qzPn/Ij/jq+oal41NLBV4gN5wnbPtO84pvcm9P5zkV2LQUMSQNGHDIwI4OycbzVw09ugQq86sC/CIyH1yo4ckzNy3NdDTtwqMVT3SebnzJz+Y539jWWlqzYQz5HDwpQk0BWeiNROE0wvvqry89PpWqieszs8gyLnz6xkII71H1W8KFQcOjX3s944MroH0H2DQs5G0VpHBLB97YAuM1xxsOXyvbiLvJIV9uBOzEzRsR6p8KgSIR0PCjKmhGBALMnsY5D5S20v9xbD98BZZh+0cDue/ZYcteEaQAMf52UJ98xjOp92WKgMwighkCNLaQS23rRrhpLD7zqbKk8rMB3XcEtBznnjfqONh76rJfRt8U8yJ+T1FOONH3ew3NfSh87Oc/ieU8cCXnEMSL2MotKz5wOk5NjPN/88m+kCtQ0uODI9lw5qXePxyIviC835pfVVrwWnK/79jyj581/2J57glpNG/iRABjMX8X9ua+ggLOVU+OZHROCn1uMiH1nnZcf+iAO7j+1F8o0ILtW072TOR5KZw5Qs4dJk6AN98cxo0fdgFuwtwjGMLn7M1GXzLLbR7K6o1cSmrKYF5zR4DTPJkCwiBRWrZTmQDawchuiV17s7pP4F8bxsFdxy75Wd0RYKi+EUP1AfDFctQ326IHTaFzsJLjYrLLYepyOD41yMbCmlvbrzqP0yE3XzfyvvHnmodfOnrJ/U/M6sS/+vAN/+p//IEPclEeiEV/JRZV2Xlfupx329c1YZr/MzXHl9sFei4MZW8/KQeWxdZbsjJrVuXV7A+S7wM1rz9+YudDw62E+l+Blu+uSrwkEAAAAABJRU5ErkJggg==";function rr(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}var Q1e=w.createContext(void 0);function uf(e){const t=w.useContext(Q1e);return e||t||"ltr"}var H1e="DismissableLayer",I_="dismissableLayer.update",$1e="dismissableLayer.pointerDownOutside",z1e="dismissableLayer.focusOutside",LM,Tq=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Fq=w.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:c,...l}=e,d=w.useContext(Tq),[u,h]=w.useState(null),A=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=w.useState({}),m=Wt(t,N=>h(N)),g=Array.from(d.layers),[b]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(b),j=u?g.indexOf(u):-1,x=d.layersWithOutsidePointerEventsDisabled.size>0,C=j>=y,S=K1e(N=>{const L=N.target,P=[...d.branches].some(F=>F.contains(L));!C||P||(s==null||s(N),o==null||o(N),N.defaultPrevented||c==null||c())},A),_=W1e(N=>{const L=N.target;[...d.branches].some(F=>F.contains(L))||(i==null||i(N),o==null||o(N),N.defaultPrevented||c==null||c())},A);return KP(N=>{j===d.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&c&&(N.preventDefault(),c()))},A),w.useEffect(()=>{if(u)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(LM=A.body.style.pointerEvents,A.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),MM(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(A.body.style.pointerEvents=LM)}},[u,A,n,d]),w.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),MM())},[u,d]),w.useEffect(()=>{const N=()=>f({});return document.addEventListener(I_,N),()=>document.removeEventListener(I_,N)},[]),a.jsx(gt.div,{...l,ref:m,style:{pointerEvents:x?C?"auto":"none":void 0,...e.style},onFocusCapture:rr(e.onFocusCapture,_.onFocusCapture),onBlurCapture:rr(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:rr(e.onPointerDownCapture,S.onPointerDownCapture)})});Fq.displayName=H1e;var V1e="DismissableLayerBranch",q1e=w.forwardRef((e,t)=>{const n=w.useContext(Tq),r=w.useRef(null),s=Wt(t,r);return w.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),a.jsx(gt.div,{...e,ref:s})});q1e.displayName=V1e;function K1e(e,t=globalThis==null?void 0:globalThis.document){const n=Nr(e),r=w.useRef(!1),s=w.useRef(()=>{});return w.useEffect(()=>{const i=c=>{if(c.target&&!r.current){let l=function(){Dq($1e,n,d,{discrete:!0})};const d={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=l,t.addEventListener("click",s.current,{once:!0})):l()}else t.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function W1e(e,t=globalThis==null?void 0:globalThis.document){const n=Nr(e),r=w.useRef(!1);return w.useEffect(()=>{const s=i=>{i.target&&!r.current&&Dq(z1e,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function MM(){const e=new CustomEvent(I_);document.dispatchEvent(e)}function Dq(e,t,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Aw(s,i):s.dispatchEvent(i)}var AB=0;function G1e(){w.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??RM()),document.body.insertAdjacentElement("beforeend",e[1]??RM()),AB++,()=>{AB===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),AB--}},[])}function RM(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var fB="focusScope.autoFocusOnMount",pB="focusScope.autoFocusOnUnmount",OM={bubbles:!1,cancelable:!0},Y1e="FocusScope",kw=w.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=e,[c,l]=w.useState(null),d=Nr(s),u=Nr(i),h=w.useRef(null),A=Wt(t,g=>l(g)),f=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(r){let g=function(x){if(f.paused||!c)return;const C=x.target;c.contains(C)?h.current=C:sA(h.current,{select:!0})},b=function(x){if(f.paused||!c)return;const C=x.relatedTarget;C!==null&&(c.contains(C)||sA(h.current,{select:!0}))},y=function(x){if(document.activeElement===document.body)for(const S of x)S.removedNodes.length>0&&sA(c)};document.addEventListener("focusin",g),document.addEventListener("focusout",b);const j=new MutationObserver(y);return c&&j.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",b),j.disconnect()}}},[r,c,f.paused]),w.useEffect(()=>{if(c){HM.add(f);const g=document.activeElement;if(!c.contains(g)){const y=new CustomEvent(fB,OM);c.addEventListener(fB,d),c.dispatchEvent(y),y.defaultPrevented||(X1e(n2e(Uq(c)),{select:!0}),document.activeElement===g&&sA(c))}return()=>{c.removeEventListener(fB,d),setTimeout(()=>{const y=new CustomEvent(pB,OM);c.addEventListener(pB,u),c.dispatchEvent(y),y.defaultPrevented||sA(g??document.body,{select:!0}),c.removeEventListener(pB,u),HM.remove(f)},0)}}},[c,d,u,f]);const m=w.useCallback(g=>{if(!n&&!r||f.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,y=document.activeElement;if(b&&y){const j=g.currentTarget,[x,C]=J1e(j);x&&C?!g.shiftKey&&y===C?(g.preventDefault(),n&&sA(x,{select:!0})):g.shiftKey&&y===x&&(g.preventDefault(),n&&sA(C,{select:!0})):y===j&&g.preventDefault()}},[n,r,f.paused]);return a.jsx(gt.div,{tabIndex:-1,...o,ref:A,onKeyDown:m})});kw.displayName=Y1e;function X1e(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(sA(r,{select:t}),document.activeElement!==n)return}function J1e(e){const t=Uq(e),n=QM(t,e),r=QM(t.reverse(),e);return[n,r]}function Uq(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function QM(e,t){for(const n of e)if(!Z1e(n,{upTo:t}))return n}function Z1e(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function e2e(e){return e instanceof HTMLInputElement&&"select"in e}function sA(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&e2e(e)&&t&&e.select()}}var HM=t2e();function t2e(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=$M(e,t),e.unshift(t)},remove(t){var n;e=$M(e,t),(n=e[0])==null||n.resume()}}}function $M(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function n2e(e){return e.filter(t=>t.tagName!=="A")}var pT="Popper",[Lq,Mq]=Cs(pT),[r2e,Rq]=Lq(pT),Oq=e=>{const{__scopePopper:t,children:n}=e,[r,s]=w.useState(null);return a.jsx(r2e,{scope:t,anchor:r,onAnchorChange:s,children:n})};Oq.displayName=pT;var Qq="PopperAnchor",Hq=w.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,i=Rq(Qq,n),o=w.useRef(null),c=Wt(t,o),l=w.useRef(null);return w.useEffect(()=>{const d=l.current;l.current=(r==null?void 0:r.current)||o.current,d!==l.current&&i.onAnchorChange(l.current)}),r?null:a.jsx(gt.div,{...s,ref:c})});Hq.displayName=Qq;var mT="PopperContent",[s2e,i2e]=Lq(mT),$q=w.forwardRef((e,t)=>{var ae,ce,Ae,pe,be,Ne;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:c=0,avoidCollisions:l=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:A=!1,updatePositionStrategy:f="optimized",onPlaced:m,...g}=e,b=Rq(mT,n),[y,j]=w.useState(null),x=Wt(t,Pe=>j(Pe)),[C,S]=w.useState(null),_=$v(C),N=(_==null?void 0:_.width)??0,L=(_==null?void 0:_.height)??0,P=r+(i!=="center"?"-"+i:""),F=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},I=Array.isArray(d)?d:[d],T=I.length>0,Q={padding:F,boundary:I.filter(o2e),altBoundary:T},{refs:D,floatingStyles:M,placement:U,isPositioned:H,middlewareData:$}=l4({strategy:"fixed",placement:P,whileElementsMounted:(...Pe)=>c4(...Pe,{animationFrame:f==="always"}),elements:{reference:b.anchor},middleware:[d4({mainAxis:s+L,alignmentAxis:o}),l&&u4({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?h4():void 0,...Q}),l&&A4({...Q}),f4({...Q,apply:({elements:Pe,rects:xe,availableWidth:ue,availableHeight:yt})=>{const{width:ht,height:Ct}=xe.reference,Me=Pe.floating.style;Me.setProperty("--radix-popper-available-width",`${ue}px`),Me.setProperty("--radix-popper-available-height",`${yt}px`),Me.setProperty("--radix-popper-anchor-width",`${ht}px`),Me.setProperty("--radix-popper-anchor-height",`${Ct}px`)}}),C&&m4({element:C,padding:c}),c2e({arrowWidth:N,arrowHeight:L}),A&&p4({strategy:"referenceHidden",...Q})]}),[R,Y]=qq(U),X=Nr(m);Tr(()=>{H&&(X==null||X())},[H,X]);const q=(ae=$.arrow)==null?void 0:ae.x,K=(ce=$.arrow)==null?void 0:ce.y,J=((Ae=$.arrow)==null?void 0:Ae.centerOffset)!==0,[W,ne]=w.useState();return Tr(()=>{y&&ne(window.getComputedStyle(y).zIndex)},[y]),a.jsx("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:{...M,transform:H?M.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:W,"--radix-popper-transform-origin":[(pe=$.transformOrigin)==null?void 0:pe.x,(be=$.transformOrigin)==null?void 0:be.y].join(" "),...((Ne=$.hide)==null?void 0:Ne.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:a.jsx(s2e,{scope:n,placedSide:R,onArrowChange:S,arrowX:q,arrowY:K,shouldHideArrow:J,children:a.jsx(gt.div,{"data-side":R,"data-align":Y,...g,ref:x,style:{...g.style,animation:H?void 0:"none"}})})})});$q.displayName=mT;var zq="PopperArrow",a2e={top:"bottom",right:"left",bottom:"top",left:"right"},Vq=w.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,i=i2e(zq,r),o=a2e[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(g4,{...s,ref:n,style:{...s.style,display:"block"}})})});Vq.displayName=zq;function o2e(e){return e!==null}var c2e=e=>({name:"transformOrigin",options:e,fn(t){var b,y,j;const{placement:n,rects:r,middlewareData:s}=t,o=((b=s.arrow)==null?void 0:b.centerOffset)!==0,c=o?0:e.arrowWidth,l=o?0:e.arrowHeight,[d,u]=qq(n),h={start:"0%",center:"50%",end:"100%"}[u],A=(((y=s.arrow)==null?void 0:y.x)??0)+c/2,f=(((j=s.arrow)==null?void 0:j.y)??0)+l/2;let m="",g="";return d==="bottom"?(m=o?h:`${A}px`,g=`${-l}px`):d==="top"?(m=o?h:`${A}px`,g=`${r.floating.height+l}px`):d==="right"?(m=`${-l}px`,g=o?h:`${f}px`):d==="left"&&(m=`${r.floating.width+l}px`,g=o?h:`${f}px`),{data:{x:m,y:g}}}});function qq(e){const[t,n="center"]=e.split("-");return[t,n]}var l2e=Oq,d2e=Hq,u2e=$q,h2e=Vq;function A2e(e,t){return w.useReducer((n,r)=>t[n][r]??n,e)}var Sw=e=>{const{present:t,children:n}=e,r=f2e(t),s=typeof n=="function"?n({present:r.isPresent}):w.Children.only(n),i=Wt(r.ref,p2e(s));return typeof n=="function"||r.isPresent?w.cloneElement(s,{ref:i}):null};Sw.displayName="Presence";function f2e(e){const[t,n]=w.useState(),r=w.useRef(null),s=w.useRef(e),i=w.useRef("none"),o=e?"mounted":"unmounted",[c,l]=A2e(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const d=d1(r.current);i.current=c==="mounted"?d:"none"},[c]),Tr(()=>{const d=r.current,u=s.current;if(u!==e){const A=i.current,f=d1(d);e?l("MOUNT"):f==="none"||(d==null?void 0:d.display)==="none"?l("UNMOUNT"):l(u&&A!==f?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,l]),Tr(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,h=f=>{const g=d1(r.current).includes(CSS.escape(f.animationName));if(f.target===t&&g&&(l("ANIMATION_END"),!s.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},A=f=>{f.target===t&&(i.current=d1(r.current))};return t.addEventListener("animationstart",A),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",A),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:w.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function d1(e){return(e==null?void 0:e.animationName)||"none"}function p2e(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var mB="rovingFocusGroup.onEntryFocus",m2e={bubbles:!1,cancelable:!0},Nw="RovingFocusGroup",[P_,Kq,g2e]=hm(Nw),[v2e,Wq]=Cs(Nw,[g2e]),[y2e,x2e]=v2e(Nw),Gq=w.forwardRef((e,t)=>a.jsx(P_.Provider,{scope:e.__scopeRovingFocusGroup,children:a.jsx(P_.Slot,{scope:e.__scopeRovingFocusGroup,children:a.jsx(w2e,{...e,ref:t})})}));Gq.displayName=Nw;var w2e=w.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:l,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...h}=e,A=w.useRef(null),f=Wt(t,A),m=uf(i),[g,b]=fa({prop:o,defaultProp:c??null,onChange:l,caller:Nw}),[y,j]=w.useState(!1),x=Nr(d),C=Kq(n),S=w.useRef(!1),[_,N]=w.useState(0);return w.useEffect(()=>{const L=A.current;if(L)return L.addEventListener(mB,x),()=>L.removeEventListener(mB,x)},[x]),a.jsx(y2e,{scope:n,orientation:r,dir:m,loop:s,currentTabStopId:g,onItemFocus:w.useCallback(L=>b(L),[b]),onItemShiftTab:w.useCallback(()=>j(!0),[]),onFocusableItemAdd:w.useCallback(()=>N(L=>L+1),[]),onFocusableItemRemove:w.useCallback(()=>N(L=>L-1),[]),children:a.jsx(gt.div,{tabIndex:y||_===0?-1:0,"data-orientation":r,...h,ref:f,style:{outline:"none",...e.style},onMouseDown:rr(e.onMouseDown,()=>{S.current=!0}),onFocus:rr(e.onFocus,L=>{const P=!S.current;if(L.target===L.currentTarget&&P&&!y){const F=new CustomEvent(mB,m2e);if(L.currentTarget.dispatchEvent(F),!F.defaultPrevented){const I=C().filter(U=>U.focusable),T=I.find(U=>U.active),Q=I.find(U=>U.id===g),M=[T,Q,...I].filter(Boolean).map(U=>U.ref.current);Jq(M,u)}}S.current=!1}),onBlur:rr(e.onBlur,()=>j(!1))})})}),Yq="RovingFocusGroupItem",Xq=w.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...c}=e,l=$a(),d=i||l,u=x2e(Yq,n),h=u.currentTabStopId===d,A=Kq(n),{onFocusableItemAdd:f,onFocusableItemRemove:m,currentTabStopId:g}=u;return w.useEffect(()=>{if(r)return f(),()=>m()},[r,f,m]),a.jsx(P_.ItemSlot,{scope:n,id:d,focusable:r,active:s,children:a.jsx(gt.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...c,ref:t,onMouseDown:rr(e.onMouseDown,b=>{r?u.onItemFocus(d):b.preventDefault()}),onFocus:rr(e.onFocus,()=>u.onItemFocus(d)),onKeyDown:rr(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){u.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const y=j2e(b,u.orientation,u.dir);if(y!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let x=A().filter(C=>C.focusable).map(C=>C.ref.current);if(y==="last")x.reverse();else if(y==="prev"||y==="next"){y==="prev"&&x.reverse();const C=x.indexOf(b.currentTarget);x=u.loop?k2e(x,C+1):x.slice(C+1)}setTimeout(()=>Jq(x))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:g!=null}):o})})});Xq.displayName=Yq;var b2e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function C2e(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function j2e(e,t,n){const r=C2e(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return b2e[r]}function Jq(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function k2e(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var S2e=Gq,N2e=Xq,B2e=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},$m=new WeakMap,u1=new WeakMap,h1={},gB=0,Zq=function(e){return e&&(e.host||Zq(e.parentNode))},E2e=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Zq(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},_2e=function(e,t,n,r){var s=E2e(t,Array.isArray(e)?e:[e]);h1[n]||(h1[n]=new WeakMap);var i=h1[n],o=[],c=new Set,l=new Set(s),d=function(h){!h||c.has(h)||(c.add(h),d(h.parentNode))};s.forEach(d);var u=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(A){if(c.has(A))u(A);else try{var f=A.getAttribute(r),m=f!==null&&f!=="false",g=($m.get(A)||0)+1,b=(i.get(A)||0)+1;$m.set(A,g),i.set(A,b),o.push(A),g===1&&m&&u1.set(A,!0),b===1&&A.setAttribute(n,"true"),m||A.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",A,y)}})};return u(t),c.clear(),gB++,function(){o.forEach(function(h){var A=$m.get(h)-1,f=i.get(h)-1;$m.set(h,A),i.set(h,f),A||(u1.has(h)||h.removeAttribute(r),u1.delete(h)),f||h.removeAttribute(n)}),gB--,gB||($m=new WeakMap,$m=new WeakMap,u1=new WeakMap,h1={})}},bk=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=B2e(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),_2e(r,s,n,"aria-hidden")):function(){return null}},Cd=function(){return Cd=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Cd.apply(this,arguments)};function e9(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function I2e(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var I2="right-scroll-bar-position",P2="width-before-scroll-bar",P2e="with-scroll-bars-hidden",T2e="--removed-body-scroll-bar-size";function vB(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function F2e(e,t){var n=w.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var D2e=typeof window<"u"?w.useLayoutEffect:w.useEffect,zM=new WeakMap;function U2e(e,t){var n=F2e(null,function(r){return e.forEach(function(s){return vB(s,r)})});return D2e(function(){var r=zM.get(n);if(r){var s=new Set(r),i=new Set(e),o=n.current;s.forEach(function(c){i.has(c)||vB(c,null)}),i.forEach(function(c){s.has(c)||vB(c,o)})}zM.set(n,e)},[e]),n}function L2e(e){return e}function M2e(e,t){t===void 0&&(t=L2e);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,r);return n.push(o),function(){n=n.filter(function(c){return c!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(c){return i(c)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var c=n;n=[],c.forEach(i),o=n}var l=function(){var u=o;o=[],u.forEach(i)},d=function(){return Promise.resolve().then(l)};d(),n={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),n}}}};return s}function R2e(e){e===void 0&&(e={});var t=M2e(null);return t.options=Cd({async:!0,ssr:!1},e),t}var t9=function(e){var t=e.sideCar,n=e9(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return w.createElement(r,Cd({},n))};t9.isSideCarExport=!0;function O2e(e,t){return e.useMedium(t),t9}var n9=R2e(),yB=function(){},Ck=w.forwardRef(function(e,t){var n=w.useRef(null),r=w.useState({onScrollCapture:yB,onWheelCapture:yB,onTouchMoveCapture:yB}),s=r[0],i=r[1],o=e.forwardProps,c=e.children,l=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,A=e.sideCar,f=e.noRelative,m=e.noIsolation,g=e.inert,b=e.allowPinchZoom,y=e.as,j=y===void 0?"div":y,x=e.gapMode,C=e9(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=A,_=U2e([n,t]),N=Cd(Cd({},C),s);return w.createElement(w.Fragment,null,u&&w.createElement(S,{sideCar:n9,removeScrollBar:d,shards:h,noRelative:f,noIsolation:m,inert:g,setCallbacks:i,allowPinchZoom:!!b,lockRef:n,gapMode:x}),o?w.cloneElement(w.Children.only(c),Cd(Cd({},N),{ref:_})):w.createElement(j,Cd({},N,{className:l,ref:_}),c))});Ck.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ck.classNames={fullWidth:P2,zeroRight:I2};var Q2e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function H2e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Q2e();return t&&e.setAttribute("nonce",t),e}function $2e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function z2e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var V2e=function(){var e=0,t=null;return{add:function(n){e==0&&(t=H2e())&&($2e(t,n),z2e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},q2e=function(){var e=V2e();return function(t,n){w.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},r9=function(){var e=q2e(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},K2e={left:0,top:0,right:0,gap:0},xB=function(e){return parseInt(e||"",10)||0},W2e=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[xB(n),xB(r),xB(s)]},G2e=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return K2e;var t=W2e(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Y2e=r9(),$g="data-scroll-locked",X2e=function(e,t,n,r){var s=e.left,i=e.top,o=e.right,c=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(P2e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat($g,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(I2,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(P2,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(I2," .").concat(I2,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(P2," .").concat(P2,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat($g,`] {
    `).concat(T2e,": ").concat(c,`px;
  }
`)},VM=function(){var e=parseInt(document.body.getAttribute($g)||"0",10);return isFinite(e)?e:0},J2e=function(){w.useEffect(function(){return document.body.setAttribute($g,(VM()+1).toString()),function(){var e=VM()-1;e<=0?document.body.removeAttribute($g):document.body.setAttribute($g,e.toString())}},[])},Z2e=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;J2e();var i=w.useMemo(function(){return G2e(s)},[s]);return w.createElement(Y2e,{styles:X2e(i,!t,s,n?"":"!important")})},T_=!1;if(typeof window<"u")try{var A1=Object.defineProperty({},"passive",{get:function(){return T_=!0,!0}});window.addEventListener("test",A1,A1),window.removeEventListener("test",A1,A1)}catch{T_=!1}var zm=T_?{passive:!1}:!1,eCe=function(e){return e.tagName==="TEXTAREA"},s9=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!eCe(e)&&n[t]==="visible")},tCe=function(e){return s9(e,"overflowY")},nCe=function(e){return s9(e,"overflowX")},qM=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=i9(e,r);if(s){var i=a9(e,r),o=i[1],c=i[2];if(o>c)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},rCe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},sCe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},i9=function(e,t){return e==="v"?tCe(t):nCe(t)},a9=function(e,t){return e==="v"?rCe(t):sCe(t)},iCe=function(e,t){return e==="h"&&t==="rtl"?-1:1},aCe=function(e,t,n,r,s){var i=iCe(e,window.getComputedStyle(t).direction),o=i*r,c=n.target,l=t.contains(c),d=!1,u=o>0,h=0,A=0;do{if(!c)break;var f=a9(e,c),m=f[0],g=f[1],b=f[2],y=g-b-i*m;(m||y)&&i9(e,c)&&(h+=y,A+=m);var j=c.parentNode;c=j&&j.nodeType===Node.DOCUMENT_FRAGMENT_NODE?j.host:j}while(!l&&c!==document.body||l&&(t.contains(c)||t===c));return(u&&(Math.abs(h)<1||!s)||!u&&(Math.abs(A)<1||!s))&&(d=!0),d},f1=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},KM=function(e){return[e.deltaX,e.deltaY]},WM=function(e){return e&&"current"in e?e.current:e},oCe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},cCe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},lCe=0,Vm=[];function dCe(e){var t=w.useRef([]),n=w.useRef([0,0]),r=w.useRef(),s=w.useState(lCe++)[0],i=w.useState(r9)[0],o=w.useRef(e);w.useEffect(function(){o.current=e},[e]),w.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var g=I2e([e.lockRef.current],(e.shards||[]).map(WM),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var c=w.useCallback(function(g,b){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var y=f1(g),j=n.current,x="deltaX"in g?g.deltaX:j[0]-y[0],C="deltaY"in g?g.deltaY:j[1]-y[1],S,_=g.target,N=Math.abs(x)>Math.abs(C)?"h":"v";if("touches"in g&&N==="h"&&_.type==="range")return!1;var L=qM(N,_);if(!L)return!0;if(L?S=N:(S=N==="v"?"h":"v",L=qM(N,_)),!L)return!1;if(!r.current&&"changedTouches"in g&&(x||C)&&(r.current=S),!S)return!0;var P=r.current||S;return aCe(P,b,g,P==="h"?x:C,!0)},[]),l=w.useCallback(function(g){var b=g;if(!(!Vm.length||Vm[Vm.length-1]!==i)){var y="deltaY"in b?KM(b):f1(b),j=t.current.filter(function(S){return S.name===b.type&&(S.target===b.target||b.target===S.shadowParent)&&oCe(S.delta,y)})[0];if(j&&j.should){b.cancelable&&b.preventDefault();return}if(!j){var x=(o.current.shards||[]).map(WM).filter(Boolean).filter(function(S){return S.contains(b.target)}),C=x.length>0?c(b,x[0]):!o.current.noIsolation;C&&b.cancelable&&b.preventDefault()}}},[]),d=w.useCallback(function(g,b,y,j){var x={name:g,delta:b,target:y,should:j,shadowParent:uCe(y)};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(C){return C!==x})},1)},[]),u=w.useCallback(function(g){n.current=f1(g),r.current=void 0},[]),h=w.useCallback(function(g){d(g.type,KM(g),g.target,c(g,e.lockRef.current))},[]),A=w.useCallback(function(g){d(g.type,f1(g),g.target,c(g,e.lockRef.current))},[]);w.useEffect(function(){return Vm.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:A}),document.addEventListener("wheel",l,zm),document.addEventListener("touchmove",l,zm),document.addEventListener("touchstart",u,zm),function(){Vm=Vm.filter(function(g){return g!==i}),document.removeEventListener("wheel",l,zm),document.removeEventListener("touchmove",l,zm),document.removeEventListener("touchstart",u,zm)}},[]);var f=e.removeScrollBar,m=e.inert;return w.createElement(w.Fragment,null,m?w.createElement(i,{styles:cCe(s)}):null,f?w.createElement(Z2e,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function uCe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const hCe=O2e(n9,dCe);var Bw=w.forwardRef(function(e,t){return w.createElement(Ck,Cd({},e,{ref:t,sideCar:hCe}))});Bw.classNames=Ck.classNames;var F_=["Enter"," "],ACe=["ArrowDown","PageUp","Home"],o9=["ArrowUp","PageDown","End"],fCe=[...ACe,...o9],pCe={ltr:[...F_,"ArrowRight"],rtl:[...F_,"ArrowLeft"]},mCe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ew="Menu",[Ux,gCe,vCe]=hm(Ew),[fm,c9]=Cs(Ew,[vCe,Mq,Wq]),jk=Mq(),l9=Wq(),[yCe,pm]=fm(Ew),[xCe,_w]=fm(Ew),d9=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=e,c=jk(t),[l,d]=w.useState(null),u=w.useRef(!1),h=Nr(i),A=uf(s);return w.useEffect(()=>{const f=()=>{u.current=!0,document.addEventListener("pointerdown",m,{capture:!0,once:!0}),document.addEventListener("pointermove",m,{capture:!0,once:!0})},m=()=>u.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",m,{capture:!0}),document.removeEventListener("pointermove",m,{capture:!0})}},[]),a.jsx(l2e,{...c,children:a.jsx(yCe,{scope:t,open:n,onOpenChange:h,content:l,onContentChange:d,children:a.jsx(xCe,{scope:t,onClose:w.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:u,dir:A,modal:o,children:r})})})};d9.displayName=Ew;var wCe="MenuAnchor",gT=w.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=jk(n);return a.jsx(d2e,{...s,...r,ref:t})});gT.displayName=wCe;var vT="MenuPortal",[bCe,u9]=fm(vT,{forceMount:void 0}),h9=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,i=pm(vT,t);return a.jsx(bCe,{scope:t,forceMount:n,children:a.jsx(Sw,{present:n||i.open,children:a.jsx(Lv,{asChild:!0,container:s,children:r})})})};h9.displayName=vT;var Bc="MenuContent",[CCe,yT]=fm(Bc),A9=w.forwardRef((e,t)=>{const n=u9(Bc,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,i=pm(Bc,e.__scopeMenu),o=_w(Bc,e.__scopeMenu);return a.jsx(Ux.Provider,{scope:e.__scopeMenu,children:a.jsx(Sw,{present:r||i.open,children:a.jsx(Ux.Slot,{scope:e.__scopeMenu,children:o.modal?a.jsx(jCe,{...s,ref:t}):a.jsx(kCe,{...s,ref:t})})})})}),jCe=w.forwardRef((e,t)=>{const n=pm(Bc,e.__scopeMenu),r=w.useRef(null),s=Wt(t,r);return w.useEffect(()=>{const i=r.current;if(i)return bk(i)},[]),a.jsx(xT,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:rr(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),kCe=w.forwardRef((e,t)=>{const n=pm(Bc,e.__scopeMenu);return a.jsx(xT,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),SCe=GA("MenuContent.ScrollLock"),xT=w.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:c,onEntryFocus:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:A,onDismiss:f,disableOutsideScroll:m,...g}=e,b=pm(Bc,n),y=_w(Bc,n),j=jk(n),x=l9(n),C=gCe(n),[S,_]=w.useState(null),N=w.useRef(null),L=Wt(t,N,b.onContentChange),P=w.useRef(0),F=w.useRef(""),I=w.useRef(0),T=w.useRef(null),Q=w.useRef("right"),D=w.useRef(0),M=m?Bw:w.Fragment,U=m?{as:SCe,allowPinchZoom:!0}:void 0,H=R=>{var ae,ce;const Y=F.current+R,X=C().filter(Ae=>!Ae.disabled),q=document.activeElement,K=(ae=X.find(Ae=>Ae.ref.current===q))==null?void 0:ae.textValue,J=X.map(Ae=>Ae.textValue),W=MCe(J,Y,K),ne=(ce=X.find(Ae=>Ae.textValue===W))==null?void 0:ce.ref.current;(function Ae(pe){F.current=pe,window.clearTimeout(P.current),pe!==""&&(P.current=window.setTimeout(()=>Ae(""),1e3))})(Y),ne&&setTimeout(()=>ne.focus())};w.useEffect(()=>()=>window.clearTimeout(P.current),[]),G1e();const $=w.useCallback(R=>{var X,q;return Q.current===((X=T.current)==null?void 0:X.side)&&OCe(R,(q=T.current)==null?void 0:q.area)},[]);return a.jsx(CCe,{scope:n,searchRef:F,onItemEnter:w.useCallback(R=>{$(R)&&R.preventDefault()},[$]),onItemLeave:w.useCallback(R=>{var Y;$(R)||((Y=N.current)==null||Y.focus(),_(null))},[$]),onTriggerLeave:w.useCallback(R=>{$(R)&&R.preventDefault()},[$]),pointerGraceTimerRef:I,onPointerGraceIntentChange:w.useCallback(R=>{T.current=R},[]),children:a.jsx(M,{...U,children:a.jsx(kw,{asChild:!0,trapped:s,onMountAutoFocus:rr(i,R=>{var Y;R.preventDefault(),(Y=N.current)==null||Y.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:a.jsx(Fq,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:A,onDismiss:f,children:a.jsx(S2e,{asChild:!0,...x,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:S,onCurrentTabStopIdChange:_,onEntryFocus:rr(l,R=>{y.isUsingKeyboardRef.current||R.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx(u2e,{role:"menu","aria-orientation":"vertical","data-state":E9(b.open),"data-radix-menu-content":"",dir:y.dir,...j,...g,ref:L,style:{outline:"none",...g.style},onKeyDown:rr(g.onKeyDown,R=>{const X=R.target.closest("[data-radix-menu-content]")===R.currentTarget,q=R.ctrlKey||R.altKey||R.metaKey,K=R.key.length===1;X&&(R.key==="Tab"&&R.preventDefault(),!q&&K&&H(R.key));const J=N.current;if(R.target!==J||!fCe.includes(R.key))return;R.preventDefault();const ne=C().filter(ae=>!ae.disabled).map(ae=>ae.ref.current);o9.includes(R.key)&&ne.reverse(),UCe(ne)}),onBlur:rr(e.onBlur,R=>{R.currentTarget.contains(R.target)||(window.clearTimeout(P.current),F.current="")}),onPointerMove:rr(e.onPointerMove,Lx(R=>{const Y=R.target,X=D.current!==R.clientX;if(R.currentTarget.contains(Y)&&X){const q=R.clientX>D.current?"right":"left";Q.current=q,D.current=R.clientX}}))})})})})})})});A9.displayName=Bc;var NCe="MenuGroup",wT=w.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return a.jsx(gt.div,{role:"group",...r,ref:t})});wT.displayName=NCe;var BCe="MenuLabel",f9=w.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return a.jsx(gt.div,{...r,ref:t})});f9.displayName=BCe;var VC="MenuItem",GM="menu.itemSelect",kk=w.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,i=w.useRef(null),o=_w(VC,e.__scopeMenu),c=yT(VC,e.__scopeMenu),l=Wt(t,i),d=w.useRef(!1),u=()=>{const h=i.current;if(!n&&h){const A=new CustomEvent(GM,{bubbles:!0,cancelable:!0});h.addEventListener(GM,f=>r==null?void 0:r(f),{once:!0}),Aw(h,A),A.defaultPrevented?d.current=!1:o.onClose()}};return a.jsx(p9,{...s,ref:l,disabled:n,onClick:rr(e.onClick,u),onPointerDown:h=>{var A;(A=e.onPointerDown)==null||A.call(e,h),d.current=!0},onPointerUp:rr(e.onPointerUp,h=>{var A;d.current||(A=h.currentTarget)==null||A.click()}),onKeyDown:rr(e.onKeyDown,h=>{const A=c.searchRef.current!=="";n||A&&h.key===" "||F_.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});kk.displayName=VC;var p9=w.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=e,o=yT(VC,n),c=l9(n),l=w.useRef(null),d=Wt(t,l),[u,h]=w.useState(!1),[A,f]=w.useState("");return w.useEffect(()=>{const m=l.current;m&&f((m.textContent??"").trim())},[i.children]),a.jsx(Ux.ItemSlot,{scope:n,disabled:r,textValue:s??A,children:a.jsx(N2e,{asChild:!0,...c,focusable:!r,children:a.jsx(gt.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:d,onPointerMove:rr(e.onPointerMove,Lx(m=>{r?o.onItemLeave(m):(o.onItemEnter(m),m.defaultPrevented||m.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:rr(e.onPointerLeave,Lx(m=>o.onItemLeave(m))),onFocus:rr(e.onFocus,()=>h(!0)),onBlur:rr(e.onBlur,()=>h(!1))})})})}),ECe="MenuCheckboxItem",m9=w.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return a.jsx(w9,{scope:e.__scopeMenu,checked:n,children:a.jsx(kk,{role:"menuitemcheckbox","aria-checked":qC(n)?"mixed":n,...s,ref:t,"data-state":CT(n),onSelect:rr(s.onSelect,()=>r==null?void 0:r(qC(n)?!0:!n),{checkForDefaultPrevented:!1})})})});m9.displayName=ECe;var g9="MenuRadioGroup",[_Ce,ICe]=fm(g9,{value:void 0,onValueChange:()=>{}}),v9=w.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,i=Nr(r);return a.jsx(_Ce,{scope:e.__scopeMenu,value:n,onValueChange:i,children:a.jsx(wT,{...s,ref:t})})});v9.displayName=g9;var y9="MenuRadioItem",x9=w.forwardRef((e,t)=>{const{value:n,...r}=e,s=ICe(y9,e.__scopeMenu),i=n===s.value;return a.jsx(w9,{scope:e.__scopeMenu,checked:i,children:a.jsx(kk,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":CT(i),onSelect:rr(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});x9.displayName=y9;var bT="MenuItemIndicator",[w9,PCe]=fm(bT,{checked:!1}),b9=w.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,i=PCe(bT,n);return a.jsx(Sw,{present:r||qC(i.checked)||i.checked===!0,children:a.jsx(gt.span,{...s,ref:t,"data-state":CT(i.checked)})})});b9.displayName=bT;var TCe="MenuSeparator",C9=w.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return a.jsx(gt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});C9.displayName=TCe;var FCe="MenuArrow",j9=w.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=jk(n);return a.jsx(h2e,{...s,...r,ref:t})});j9.displayName=FCe;var DCe="MenuSub",[sqe,k9]=fm(DCe),o0="MenuSubTrigger",S9=w.forwardRef((e,t)=>{const n=pm(o0,e.__scopeMenu),r=_w(o0,e.__scopeMenu),s=k9(o0,e.__scopeMenu),i=yT(o0,e.__scopeMenu),o=w.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:l}=i,d={__scopeMenu:e.__scopeMenu},u=w.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return w.useEffect(()=>u,[u]),w.useEffect(()=>{const h=c.current;return()=>{window.clearTimeout(h),l(null)}},[c,l]),a.jsx(gT,{asChild:!0,...d,children:a.jsx(p9,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":E9(n.open),...e,ref:Yj(t,s.onTriggerChange),onClick:h=>{var A;(A=e.onClick)==null||A.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:rr(e.onPointerMove,Lx(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:rr(e.onPointerLeave,Lx(h=>{var f,m;u();const A=(f=n.content)==null?void 0:f.getBoundingClientRect();if(A){const g=(m=n.content)==null?void 0:m.dataset.side,b=g==="right",y=b?-5:5,j=A[b?"left":"right"],x=A[b?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+y,y:h.clientY},{x:j,y:A.top},{x,y:A.top},{x,y:A.bottom},{x:j,y:A.bottom}],side:g}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:rr(e.onKeyDown,h=>{var f;const A=i.searchRef.current!=="";e.disabled||A&&h.key===" "||pCe[r.dir].includes(h.key)&&(n.onOpenChange(!0),(f=n.content)==null||f.focus(),h.preventDefault())})})})});S9.displayName=o0;var N9="MenuSubContent",B9=w.forwardRef((e,t)=>{const n=u9(Bc,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,i=pm(Bc,e.__scopeMenu),o=_w(Bc,e.__scopeMenu),c=k9(N9,e.__scopeMenu),l=w.useRef(null),d=Wt(t,l);return a.jsx(Ux.Provider,{scope:e.__scopeMenu,children:a.jsx(Sw,{present:r||i.open,children:a.jsx(Ux.Slot,{scope:e.__scopeMenu,children:a.jsx(xT,{id:c.contentId,"aria-labelledby":c.triggerId,...s,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var h;o.isUsingKeyboardRef.current&&((h=l.current)==null||h.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:rr(e.onFocusOutside,u=>{u.target!==c.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:rr(e.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:rr(e.onKeyDown,u=>{var f;const h=u.currentTarget.contains(u.target),A=mCe[o.dir].includes(u.key);h&&A&&(i.onOpenChange(!1),(f=c.trigger)==null||f.focus(),u.preventDefault())})})})})})});B9.displayName=N9;function E9(e){return e?"open":"closed"}function qC(e){return e==="indeterminate"}function CT(e){return qC(e)?"indeterminate":e?"checked":"unchecked"}function UCe(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function LCe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function MCe(e,t,n){const s=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=LCe(e,Math.max(i,0));s.length===1&&(o=o.filter(d=>d!==n));const l=o.find(d=>d.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function RCe(e,t){const{x:n,y:r}=e;let s=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const c=t[i],l=t[o],d=c.x,u=c.y,h=l.x,A=l.y;u>r!=A>r&&n<(h-d)*(r-u)/(A-u)+d&&(s=!s)}return s}function OCe(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return RCe(n,t)}function Lx(e){return t=>t.pointerType==="mouse"?e(t):void 0}var QCe=d9,HCe=gT,$Ce=h9,zCe=A9,VCe=wT,qCe=f9,KCe=kk,WCe=m9,GCe=v9,YCe=x9,XCe=b9,JCe=C9,ZCe=j9,eje=S9,tje=B9,Sk="DropdownMenu",[nje,iqe]=Cs(Sk,[c9]),Xa=c9(),[rje,_9]=nje(Sk),I9=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:o,modal:c=!0}=e,l=Xa(t),d=w.useRef(null),[u,h]=fa({prop:s,defaultProp:i??!1,onChange:o,caller:Sk});return a.jsx(rje,{scope:t,triggerId:$a(),triggerRef:d,contentId:$a(),open:u,onOpenChange:h,onOpenToggle:w.useCallback(()=>h(A=>!A),[h]),modal:c,children:a.jsx(QCe,{...l,open:u,onOpenChange:h,dir:r,modal:c,children:n})})};I9.displayName=Sk;var P9="DropdownMenuTrigger",T9=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,i=_9(P9,n),o=Xa(n);return a.jsx(HCe,{asChild:!0,...o,children:a.jsx(gt.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Yj(t,i.triggerRef),onPointerDown:rr(e.onPointerDown,c=>{!r&&c.button===0&&c.ctrlKey===!1&&(i.onOpenToggle(),i.open||c.preventDefault())}),onKeyDown:rr(e.onKeyDown,c=>{r||(["Enter"," "].includes(c.key)&&i.onOpenToggle(),c.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});T9.displayName=P9;var sje="DropdownMenuPortal",F9=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Xa(t);return a.jsx($Ce,{...r,...n})};F9.displayName=sje;var D9="DropdownMenuContent",U9=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=_9(D9,n),i=Xa(n),o=w.useRef(!1);return a.jsx(zCe,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:t,onCloseAutoFocus:rr(e.onCloseAutoFocus,c=>{var l;o.current||(l=s.triggerRef.current)==null||l.focus(),o.current=!1,c.preventDefault()}),onInteractOutside:rr(e.onInteractOutside,c=>{const l=c.detail.originalEvent,d=l.button===0&&l.ctrlKey===!0,u=l.button===2||d;(!s.modal||u)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});U9.displayName=D9;var ije="DropdownMenuGroup",aje=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Xa(n);return a.jsx(VCe,{...s,...r,ref:t})});aje.displayName=ije;var oje="DropdownMenuLabel",L9=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Xa(n);return a.jsx(qCe,{...s,...r,ref:t})});L9.displayName=oje;var cje="DropdownMenuItem",M9=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Xa(n);return a.jsx(KCe,{...s,...r,ref:t})});M9.displayName=cje;var lje="DropdownMenuCheckboxItem",R9=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Xa(n);return a.jsx(WCe,{...s,...r,ref:t})});R9.displayName=lje;var dje="DropdownMenuRadioGroup",uje=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Xa(n);return a.jsx(GCe,{...s,...r,ref:t})});uje.displayName=dje;var hje="DropdownMenuRadioItem",O9=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Xa(n);return a.jsx(YCe,{...s,...r,ref:t})});O9.displayName=hje;var Aje="DropdownMenuItemIndicator",Q9=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Xa(n);return a.jsx(XCe,{...s,...r,ref:t})});Q9.displayName=Aje;var fje="DropdownMenuSeparator",H9=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Xa(n);return a.jsx(JCe,{...s,...r,ref:t})});H9.displayName=fje;var pje="DropdownMenuArrow",mje=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Xa(n);return a.jsx(ZCe,{...s,...r,ref:t})});mje.displayName=pje;var gje="DropdownMenuSubTrigger",$9=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Xa(n);return a.jsx(eje,{...s,...r,ref:t})});$9.displayName=gje;var vje="DropdownMenuSubContent",z9=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Xa(n);return a.jsx(tje,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});z9.displayName=vje;var yje=I9,xje=T9,wje=F9,V9=U9,q9=L9,K9=M9,W9=R9,G9=O9,Y9=Q9,X9=H9,J9=$9,Z9=z9;const xv=yje,wv=xje,bje=w.forwardRef(({className:e,inset:t,children:n,...r},s)=>a.jsxs(J9,{ref:s,className:$e("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,a.jsx(_r,{className:"ml-auto h-4 w-4"})]}));bje.displayName=J9.displayName;const Cje=w.forwardRef(({className:e,...t},n)=>a.jsx(Z9,{ref:n,className:$e("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));Cje.displayName=Z9.displayName;const Wp=w.forwardRef(({className:e,sideOffset:t=4,...n},r)=>a.jsx(wje,{children:a.jsx(V9,{ref:r,sideOffset:t,className:$e("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Wp.displayName=V9.displayName;const Or=w.forwardRef(({className:e,inset:t,...n},r)=>a.jsx(K9,{ref:r,className:$e("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));Or.displayName=K9.displayName;const jje=w.forwardRef(({className:e,children:t,checked:n,...r},s)=>a.jsxs(W9,{ref:s,className:$e("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(Y9,{children:a.jsx(YA,{className:"h-4 w-4"})})}),t]}));jje.displayName=W9.displayName;const kje=w.forwardRef(({className:e,children:t,...n},r)=>a.jsxs(G9,{ref:r,className:$e("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(Y9,{children:a.jsx(A7,{className:"h-2 w-2 fill-current"})})}),t]}));kje.displayName=G9.displayName;const Sje=w.forwardRef(({className:e,inset:t,...n},r)=>a.jsx(q9,{ref:r,className:$e("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));Sje.displayName=q9.displayName;const Gp=w.forwardRef(({className:e,...t},n)=>a.jsx(X9,{ref:n,className:$e("-mx-1 my-1 h-px bg-muted",e),...t}));Gp.displayName=X9.displayName;function Lr({className:e}){var c;const{user:t,signOut:n,loading:r}=Dc();js();const s=Vi();ah();const{toast:i}=ii(),o=async()=>{const{error:l}=await n();l?i({title:"Error signing out",description:l.message,variant:"destructive"}):(i({title:"Signed out successfully"}),s("/"))};return a.jsx(ot.nav,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,ease:"easeOut"},className:$e("w-full bg-background/80 backdrop-blur-lg border-b border-border relative",e),style:{zIndex:20},children:a.jsx("div",{className:"container mx-auto px-4 py-6",children:a.jsxs("div",{className:"grid grid-cols-3 items-center",children:[a.jsx("div",{className:"flex items-center",children:a.jsxs(Fa,{to:"/",className:"flex items-center space-x-2 hover:opacity-80 transition-opacity",children:[a.jsx("img",{src:O1e,alt:"FramePromptly Logo",className:"h-8 w-auto"}),a.jsx("span",{className:"text-xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:"FramePromptly"})]})}),a.jsx("div",{className:"hidden md:flex items-center justify-center space-x-6",children:t?a.jsxs(a.Fragment,{children:[a.jsx(fe,{variant:"ghost",size:"sm",asChild:!0,children:a.jsx(Fa,{to:"/projects",children:"Projects"})}),a.jsx(fe,{variant:"ghost",size:"sm",asChild:!0,children:a.jsx(Fa,{to:"/frameworks",children:"Frameworks"})}),a.jsx(fe,{variant:"ghost",size:"sm",asChild:!0,children:a.jsx(Fa,{to:"/library",children:"Library"})}),a.jsx(fe,{variant:"ghost",size:"sm",asChild:!0,children:a.jsx(Fa,{to:"/prompt-builder",children:"Prompt Builder"})})]}):a.jsxs(a.Fragment,{children:[a.jsx(fe,{variant:"ghost",size:"sm",children:"Features"}),a.jsx(fe,{variant:"ghost",size:"sm",children:"Pricing"}),a.jsx(fe,{variant:"ghost",size:"sm",children:"About"})]})}),a.jsxs("div",{className:"flex items-center justify-end space-x-4",children:[r?a.jsx("div",{className:"h-9 w-20 bg-muted animate-pulse rounded"}):t?a.jsxs(xv,{children:[a.jsx(wv,{asChild:!0,children:a.jsxs(fe,{variant:"outline",size:"sm",className:"gap-2",children:[a.jsx(Qd,{className:"h-4 w-4"}),((c=t.email)==null?void 0:c.split("@")[0])||"User"]})}),a.jsxs(Wp,{align:"end",children:[a.jsx(Or,{asChild:!0,children:a.jsxs(Fa,{to:"/profile",className:"flex items-center",children:[a.jsx(Qd,{className:"mr-2 h-4 w-4"}),"Profile"]})}),a.jsx(Or,{asChild:!0,children:a.jsxs(Fa,{to:"/profile",className:"flex items-center",children:[a.jsx(us,{className:"mr-2 h-4 w-4"}),"Settings"]})}),a.jsx(Gp,{}),a.jsx(Or,{asChild:!0,children:a.jsxs(Fa,{to:"/metrics",className:"flex items-center",children:[a.jsx(Ide,{className:"mr-2 h-4 w-4"}),"Metrics"]})}),a.jsx(Or,{asChild:!0,children:a.jsxs(Fa,{to:"/aistresstest",className:"flex items-center",children:[a.jsx(iue,{className:"mr-2 h-4 w-4"}),"AI Stress Test"]})}),a.jsx(Gp,{}),a.jsxs(Or,{onClick:o,children:[a.jsx(Iue,{className:"mr-2 h-4 w-4"}),"Sign out"]})]})]}):a.jsxs(a.Fragment,{children:[a.jsx(fe,{variant:"outline",size:"sm",asChild:!0,children:a.jsx(Fa,{to:"/auth",children:"Sign In"})}),a.jsx(D4,{variant:"primary",size:"sm",asChild:!0,children:a.jsx(Fa,{to:"/auth",children:"Get Started"})})]}),a.jsx(fe,{variant:"ghost",size:"sm",className:"md:hidden",children:a.jsx(Lue,{className:"w-4 h-4"})})]})]})})})}const De=w.forwardRef(({className:e,variant:t="default",...n},r)=>a.jsx("div",{ref:r,className:$e("rounded-lg border text-card-foreground shadow-sm transition-all duration-200",{"bg-card":t==="default","bg-gradient-card":t==="gradient","bg-card border-l-4 border-l-celestial-blue-500":t==="accent-primary","bg-card border-l-4 border-l-indigo-dye-500":t==="accent-secondary","bg-card border-l-4 border-l-malachite-500":t==="accent-tertiary"},e),...n}));De.displayName="Card";const dt=w.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:$e("flex flex-col space-y-1.5 p-6",e),...t}));dt.displayName="CardHeader";const ft=w.forwardRef(({className:e,...t},n)=>a.jsx("h3",{ref:n,className:$e("text-2xl font-semibold leading-none tracking-tight",e),...t}));ft.displayName="CardTitle";const Kt=w.forwardRef(({className:e,...t},n)=>a.jsx("p",{ref:n,className:$e("text-sm text-muted-foreground",e),...t}));Kt.displayName="CardDescription";const et=w.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:$e("p-6 pt-0",e),...t}));et.displayName="CardContent";const Nje=w.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:$e("flex items-center p-6 pt-0",e),...t}));Nje.displayName="CardFooter";const Bje=Mv("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground","glass-dark":"bg-[hsl(228,100%,7%)]/90 text-white border-[hsl(206,95%,43%)]/50 font-medium shadow-sm backdrop-blur-sm hover:bg-[hsl(228,100%,7%)]/95","glass-light":"bg-white/95 text-[hsl(228,100%,7%)] border-[hsl(212,40%,25%)]/10 font-medium shadow-sm backdrop-blur-sm hover:bg-white/98","glass-brand":"bg-[hsl(211,96%,39%)]/90 text-white border-[hsl(206,95%,43%)]/30 font-medium shadow-sm backdrop-blur-sm hover:bg-[hsl(211,96%,39%)]/95","glass-gradient":"bg-gradient-to-r from-[hsl(211,96%,39%)]/85 to-[hsl(212,40%,25%)]/85 text-white border-[hsl(206,95%,43%)]/40 font-medium shadow-sm backdrop-blur-sm hover:from-[hsl(211,96%,39%)]/90 hover:to-[hsl(212,40%,25%)]/90","blue-steel":"bg-[hsl(206,95%,43%)] text-white border-transparent font-medium shadow-sm hover:bg-[hsl(206,95%,38%)]","blue-denim":"bg-[hsl(211,96%,39%)] text-white border-transparent font-medium shadow-sm hover:bg-[hsl(211,96%,34%)]","blue-prussian":"bg-[hsl(212,40%,25%)] text-white border-transparent font-medium shadow-sm hover:bg-[hsl(212,40%,20%)]","blue-oxford":"bg-[hsl(228,100%,7%)] text-white border-transparent font-medium shadow-sm hover:bg-[hsl(228,100%,12%)]","celestial-blue":"bg-celestial-blue-500 text-white border-transparent font-medium shadow-sm hover:bg-celestial-blue-600","celestial-blue-subtle":"bg-celestial-blue-100 text-celestial-blue-800 border-celestial-blue-200 font-medium hover:bg-celestial-blue-200","indigo-dye":"bg-indigo-dye-900 text-white border-transparent font-medium shadow-sm hover:bg-indigo-dye-800","indigo-dye-subtle":"bg-indigo-dye-100 text-indigo-dye-800 border-indigo-dye-200 font-medium hover:bg-indigo-dye-200",malachite:"bg-malachite-500 text-white border-transparent font-medium shadow-sm hover:bg-malachite-600","malachite-subtle":"bg-malachite-100 text-malachite-800 border-malachite-200 font-medium hover:bg-malachite-200","cobalt-blue":"bg-cobalt-blue-800 text-white border-transparent font-medium shadow-sm hover:bg-cobalt-blue-900","cobalt-blue-subtle":"bg-cobalt-blue-100 text-cobalt-blue-800 border-cobalt-blue-200 font-medium hover:bg-cobalt-blue-200"}},defaultVariants:{variant:"default"}});function _e({className:e,variant:t,...n}){return a.jsx("div",{className:$e(Bje({variant:t}),e),...n})}function Eje({className:e=""}){const t=w.useRef(null),[n,r]=w.useState(!1);return w.useEffect(()=>{const s=/Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent);r(s);const i=t.current;if(!i)return;let o=i.getContext("2d"),c;const l=(C,S,_,N,L,P,F)=>{C.save();const I=C.createRadialGradient(S,_,0,S,_,N+L);I.addColorStop(0,P),I.addColorStop(.8,F),I.addColorStop(1,"rgba(0,0,0,0)"),C.fillStyle=I,C.beginPath(),C.arc(S,_,N+L,0,Math.PI*2),C.fill(),C.restore()},d=(C,S)=>Math.random()*(S-C)+C,u=()=>{i.width=window.innerWidth,i.height=window.innerHeight,o=i.getContext("2d"),o&&(o.globalCompositeOperation=n?"screen":"lighter")};u(),window.addEventListener("resize",u);const h=n?30:70,A=n?[15,35]:[30,70],f=n?[5,60]:[10,120],m=["#000000","#18181b"],g=[["#002aff","#009ff2"],["#0054ff","#27e49b"],["#202bc5","#873dcc"]];if(!o)return;o.clearRect(0,0,i.width,i.height),o.globalCompositeOperation=n?"screen":"lighter";const b=o.createLinearGradient(0,i.height,i.width,0);b.addColorStop(0,m[0]),b.addColorStop(1,m[1]),o.fillStyle=b,o.fillRect(0,0,i.width,i.height);const y=[];let j=h;for(;j--;){const C=d(f[0],f[1]),S=d(A[0],A[1]),_=d(-100,i.width+100),N=d(-100,i.height+100),L=Math.floor(d(0,299)/100),P=g[L][0],F=g[L][1];l(o,_,N,C,S*.8,P,F),o.beginPath();const I=o.createLinearGradient(_-C/2,N-C/2,_+C,N+C);I.addColorStop(0,P),I.addColorStop(1,F),o.fillStyle=I,o.arc(_,N,C*.8,0,Math.PI*2),o.fill(),o.closePath();const T=Math.round(d(-99,99)/100),Q=Math.round(d(-99,99)/100);y.push({x:_,y:N,blur:S,radius:C,initialXDirection:T,initialYDirection:Q,initialBlurDirection:T,colorOne:P,colorTwo:F,gradient:[_-C/2,N-C/2,_+C,N+C]})}function x(){if(!o)return;o.clearRect(0,0,i.width,i.height);const C=2,S=2,_=1;y.forEach(function(N){(N.x+N.initialXDirection*C>=i.width&&N.initialXDirection!==0||N.x+N.initialXDirection*C<=0&&N.initialXDirection!==0)&&(N.initialXDirection=N.initialXDirection*-1),(N.y+N.initialYDirection*S>=i.height&&N.initialYDirection!==0||N.y+N.initialYDirection*S<=0&&N.initialYDirection!==0)&&(N.initialYDirection=N.initialYDirection*-1),(N.blur+N.initialBlurDirection*_>=f[1]&&N.initialBlurDirection!==0||N.blur+N.initialBlurDirection*_<=f[0]&&N.initialBlurDirection!==0)&&(N.initialBlurDirection*=-1),N.x+=N.initialXDirection*C,N.y+=N.initialYDirection*S,N.blur+=N.initialBlurDirection*_,o.beginPath(),o.filter=`blur(${N.blur}px)`;const L=o.createLinearGradient(N.gradient[0],N.gradient[1],N.gradient[2],N.gradient[3]);L.addColorStop(0,N.colorOne),L.addColorStop(1,N.colorTwo),o.fillStyle=L,o.arc(N.x,N.y,N.radius,0,Math.PI*2),o.fill(),o.closePath()}),c=window.requestAnimationFrame(x)}return c=window.requestAnimationFrame(x),()=>{window.cancelAnimationFrame(c),window.removeEventListener("resize",u)}},[n]),a.jsx("canvas",{ref:t,className:"absolute left-0 top-0 w-full h-full object-cover z-0 "+e,"aria-hidden":"true",tabIndex:-1,style:{pointerEvents:"none",minHeight:"100vh",transform:"translateZ(0)",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",backgroundColor:"#000000",willChange:"transform",imageRendering:n?"crisp-edges":"auto"}})}function _je(){return a.jsxs("section",{className:"relative overflow-hidden",style:{minHeight:"100vh"},children:[a.jsx("div",{className:"absolute inset-0 w-full h-full z-0 backdrop-blur-md",style:{background:"#0a174eCC"},"aria-hidden":"true"}),a.jsx(Eje,{className:"z-10"}),a.jsx("div",{className:"relative container mx-auto px-6 py-32 lg:py-40",style:{zIndex:20},children:a.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[a.jsx(ot.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,delay:.2},children:a.jsxs(_e,{variant:"celestial-blue-subtle",className:"mb-6 text-sm font-medium",children:[a.jsx(gr,{className:"w-3 h-3 mr-1"}),"AI-Powered UX Workflow Platform"]})}),a.jsxs(ot.h1,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,delay:.3},className:"text-5xl lg:text-7xl font-bold mb-8 bg-gradient-to-r from-blue-400 via-cyan-400 to-green-400 bg-clip-text text-transparent leading-tight",children:["Build UX Workflows",a.jsx("br",{}),a.jsx("span",{className:"text-white",children:"with AI Intelligence"})]}),a.jsx(ot.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,delay:.4},className:"text-xl text-gray-300 mb-12 max-w-2xl mx-auto leading-relaxed",children:a.jsx(De,{className:"p-6 bg-white/10 backdrop-blur-sm border-white/20 hover:shadow-lg transition-all duration-300",children:a.jsx("p",{className:"text-lg font-semibold mb-2 text-white",children:"Streamline your UX process with intelligent frameworks, automated prompt generation, and AI-powered tools. From Design Thinking to Agile UX - build better experiences faster."})})}),a.jsx(ot.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,delay:.5},className:"flex justify-center mb-16",children:a.jsx(D4,{variant:"primary",size:"xl",asChild:!0,children:a.jsxs("a",{className:"flex items-center",href:"/auth",children:["Start Building",a.jsx(u7,{className:"w-5 h-5 ml-2"})]})})}),a.jsxs(ot.div,{initial:{y:40,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.6},className:"grid md:grid-cols-3 gap-6 max-w-4xl mx-auto",children:[a.jsxs(De,{className:"p-6 bg-white/10 backdrop-blur-sm border-white/20 hover:shadow-lg transition-all duration-300",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-primary rounded-lg flex items-center justify-center mb-4",children:a.jsx(j7,{className:"w-6 h-6 text-primary-foreground"})}),a.jsx("h3",{className:"text-lg font-semibold mb-2 text-white",children:"Visual Workflow Builder"}),a.jsx("p",{className:"text-gray-300 text-sm",children:"Drag-and-drop interface to build complex UX workflows with multiple frameworks"})]}),a.jsxs(De,{className:"p-6 bg-white/10 backdrop-blur-sm border-white/20 hover:shadow-lg transition-all duration-300",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-primary rounded-lg flex items-center justify-center mb-4",children:a.jsx(Gs,{className:"w-6 h-6 text-primary-foreground"})}),a.jsx("h3",{className:"text-lg font-semibold mb-2 text-white",children:"AI Prompt Generation"}),a.jsx("p",{className:"text-gray-300 text-sm",children:"Intelligent prompt creation with context awareness and framework-specific templates"})]}),a.jsxs(De,{className:"p-6 bg-white/10 backdrop-blur-sm border-white/20 hover:shadow-lg transition-all duration-300",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-primary rounded-lg flex items-center justify-center mb-4",children:a.jsx(gr,{className:"w-6 h-6 text-primary-foreground"})}),a.jsx("h3",{className:"text-lg font-semibold mb-2 text-white",children:"UX Framework Library"}),a.jsx("p",{className:"text-gray-300 text-sm",children:"Comprehensive collection of proven methodologies from Design Thinking to Agile UX"})]})]})]})})]})}const Ije=()=>{const{loading:e}=Dc();return e?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(Cr,{className:"h-8 w-8 animate-spin"})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:[a.jsx(Lr,{}),a.jsx(_je,{})]})};function ai(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=ai(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Pje={value:()=>{}};function Nk(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new T2(n)}function T2(e){this._=e}function Tje(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}T2.prototype=Nk.prototype={constructor:T2,on:function(e,t){var n=this._,r=Tje(e+"",n),s,i=-1,o=r.length;if(arguments.length<2){for(;++i<o;)if((s=(e=r[i]).type)&&(s=Fje(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(s=(e=r[i]).type)n[s]=YM(n[s],e.name,t);else if(t==null)for(s in n)n[s]=YM(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new T2(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,i;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],s=0,i=r.length;s<i;++s)r[s].value.apply(t,n)}};function Fje(e,t){for(var n=0,r=e.length,s;n<r;++n)if((s=e[n]).name===t)return s.value}function YM(e,t,n){for(var r=0,s=e.length;r<s;++r)if(e[r].name===t){e[r]=Pje,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var D_="http://www.w3.org/1999/xhtml";const XM={svg:"http://www.w3.org/2000/svg",xhtml:D_,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Bk(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),XM.hasOwnProperty(t)?{space:XM[t],local:e}:e}function Dje(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===D_&&t.documentElement.namespaceURI===D_?t.createElement(e):t.createElementNS(n,e)}}function Uje(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function eK(e){var t=Bk(e);return(t.local?Uje:Dje)(t)}function Lje(){}function jT(e){return e==null?Lje:function(){return this.querySelector(e)}}function Mje(e){typeof e!="function"&&(e=jT(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,c=r[s]=new Array(o),l,d,u=0;u<o;++u)(l=i[u])&&(d=e.call(l,l.__data__,u,i))&&("__data__"in l&&(d.__data__=l.__data__),c[u]=d);return new Zo(r,this._parents)}function Rje(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Oje(){return[]}function tK(e){return e==null?Oje:function(){return this.querySelectorAll(e)}}function Qje(e){return function(){return Rje(e.apply(this,arguments))}}function Hje(e){typeof e=="function"?e=Qje(e):e=tK(e);for(var t=this._groups,n=t.length,r=[],s=[],i=0;i<n;++i)for(var o=t[i],c=o.length,l,d=0;d<c;++d)(l=o[d])&&(r.push(e.call(l,l.__data__,d,o)),s.push(l));return new Zo(r,s)}function nK(e){return function(){return this.matches(e)}}function rK(e){return function(t){return t.matches(e)}}var $je=Array.prototype.find;function zje(e){return function(){return $je.call(this.children,e)}}function Vje(){return this.firstElementChild}function qje(e){return this.select(e==null?Vje:zje(typeof e=="function"?e:rK(e)))}var Kje=Array.prototype.filter;function Wje(){return Array.from(this.children)}function Gje(e){return function(){return Kje.call(this.children,e)}}function Yje(e){return this.selectAll(e==null?Wje:Gje(typeof e=="function"?e:rK(e)))}function Xje(e){typeof e!="function"&&(e=nK(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,c=r[s]=[],l,d=0;d<o;++d)(l=i[d])&&e.call(l,l.__data__,d,i)&&c.push(l);return new Zo(r,this._parents)}function sK(e){return new Array(e.length)}function Jje(){return new Zo(this._enter||this._groups.map(sK),this._parents)}function KC(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}KC.prototype={constructor:KC,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Zje(e){return function(){return e}}function eke(e,t,n,r,s,i){for(var o=0,c,l=t.length,d=i.length;o<d;++o)(c=t[o])?(c.__data__=i[o],r[o]=c):n[o]=new KC(e,i[o]);for(;o<l;++o)(c=t[o])&&(s[o]=c)}function tke(e,t,n,r,s,i,o){var c,l,d=new Map,u=t.length,h=i.length,A=new Array(u),f;for(c=0;c<u;++c)(l=t[c])&&(A[c]=f=o.call(l,l.__data__,c,t)+"",d.has(f)?s[c]=l:d.set(f,l));for(c=0;c<h;++c)f=o.call(e,i[c],c,i)+"",(l=d.get(f))?(r[c]=l,l.__data__=i[c],d.delete(f)):n[c]=new KC(e,i[c]);for(c=0;c<u;++c)(l=t[c])&&d.get(A[c])===l&&(s[c]=l)}function nke(e){return e.__data__}function rke(e,t){if(!arguments.length)return Array.from(this,nke);var n=t?tke:eke,r=this._parents,s=this._groups;typeof e!="function"&&(e=Zje(e));for(var i=s.length,o=new Array(i),c=new Array(i),l=new Array(i),d=0;d<i;++d){var u=r[d],h=s[d],A=h.length,f=ske(e.call(u,u&&u.__data__,d,r)),m=f.length,g=c[d]=new Array(m),b=o[d]=new Array(m),y=l[d]=new Array(A);n(u,h,g,b,y,f,t);for(var j=0,x=0,C,S;j<m;++j)if(C=g[j]){for(j>=x&&(x=j+1);!(S=b[x])&&++x<m;);C._next=S||null}}return o=new Zo(o,r),o._enter=c,o._exit=l,o}function ske(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ike(){return new Zo(this._exit||this._groups.map(sK),this._parents)}function ake(e,t,n){var r=this.enter(),s=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?i.remove():n(i),r&&s?r.merge(s).order():s}function oke(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,s=n.length,i=r.length,o=Math.min(s,i),c=new Array(s),l=0;l<o;++l)for(var d=n[l],u=r[l],h=d.length,A=c[l]=new Array(h),f,m=0;m<h;++m)(f=d[m]||u[m])&&(A[m]=f);for(;l<s;++l)c[l]=n[l];return new Zo(c,this._parents)}function cke(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],s=r.length-1,i=r[s],o;--s>=0;)(o=r[s])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function lke(e){e||(e=dke);function t(h,A){return h&&A?e(h.__data__,A.__data__):!h-!A}for(var n=this._groups,r=n.length,s=new Array(r),i=0;i<r;++i){for(var o=n[i],c=o.length,l=s[i]=new Array(c),d,u=0;u<c;++u)(d=o[u])&&(l[u]=d);l.sort(t)}return new Zo(s,this._parents).order()}function dke(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function uke(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function hke(){return Array.from(this)}function Ake(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length;s<i;++s){var o=r[s];if(o)return o}return null}function fke(){let e=0;for(const t of this)++e;return e}function pke(){return!this.node()}function mke(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var s=t[n],i=0,o=s.length,c;i<o;++i)(c=s[i])&&e.call(c,c.__data__,i,s);return this}function gke(e){return function(){this.removeAttribute(e)}}function vke(e){return function(){this.removeAttributeNS(e.space,e.local)}}function yke(e,t){return function(){this.setAttribute(e,t)}}function xke(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function wke(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function bke(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Cke(e,t){var n=Bk(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?vke:gke:typeof t=="function"?n.local?bke:wke:n.local?xke:yke)(n,t))}function iK(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function jke(e){return function(){this.style.removeProperty(e)}}function kke(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ske(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Nke(e,t,n){return arguments.length>1?this.each((t==null?jke:typeof t=="function"?Ske:kke)(e,t,n??"")):bv(this.node(),e)}function bv(e,t){return e.style.getPropertyValue(t)||iK(e).getComputedStyle(e,null).getPropertyValue(t)}function Bke(e){return function(){delete this[e]}}function Eke(e,t){return function(){this[e]=t}}function _ke(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ike(e,t){return arguments.length>1?this.each((t==null?Bke:typeof t=="function"?_ke:Eke)(e,t)):this.node()[e]}function aK(e){return e.trim().split(/^|\s+/)}function kT(e){return e.classList||new oK(e)}function oK(e){this._node=e,this._names=aK(e.getAttribute("class")||"")}oK.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function cK(e,t){for(var n=kT(e),r=-1,s=t.length;++r<s;)n.add(t[r])}function lK(e,t){for(var n=kT(e),r=-1,s=t.length;++r<s;)n.remove(t[r])}function Pke(e){return function(){cK(this,e)}}function Tke(e){return function(){lK(this,e)}}function Fke(e,t){return function(){(t.apply(this,arguments)?cK:lK)(this,e)}}function Dke(e,t){var n=aK(e+"");if(arguments.length<2){for(var r=kT(this.node()),s=-1,i=n.length;++s<i;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?Fke:t?Pke:Tke)(n,t))}function Uke(){this.textContent=""}function Lke(e){return function(){this.textContent=e}}function Mke(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Rke(e){return arguments.length?this.each(e==null?Uke:(typeof e=="function"?Mke:Lke)(e)):this.node().textContent}function Oke(){this.innerHTML=""}function Qke(e){return function(){this.innerHTML=e}}function Hke(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function $ke(e){return arguments.length?this.each(e==null?Oke:(typeof e=="function"?Hke:Qke)(e)):this.node().innerHTML}function zke(){this.nextSibling&&this.parentNode.appendChild(this)}function Vke(){return this.each(zke)}function qke(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Kke(){return this.each(qke)}function Wke(e){var t=typeof e=="function"?e:eK(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Gke(){return null}function Yke(e,t){var n=typeof e=="function"?e:eK(e),r=t==null?Gke:typeof t=="function"?t:jT(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Xke(){var e=this.parentNode;e&&e.removeChild(this)}function Jke(){return this.each(Xke)}function Zke(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function eSe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function tSe(e){return this.select(e?eSe:Zke)}function nSe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function rSe(e){return function(t){e.call(this,t,this.__data__)}}function sSe(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function iSe(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,s=t.length,i;n<s;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function aSe(e,t,n){return function(){var r=this.__on,s,i=rSe(t);if(r){for(var o=0,c=r.length;o<c;++o)if((s=r[o]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=i,s.options=n),s.value=t;return}}this.addEventListener(e.type,i,n),s={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(s):this.__on=[s]}}function oSe(e,t,n){var r=sSe(e+""),s,i=r.length,o;if(arguments.length<2){var c=this.node().__on;if(c){for(var l=0,d=c.length,u;l<d;++l)for(s=0,u=c[l];s<i;++s)if((o=r[s]).type===u.type&&o.name===u.name)return u.value}return}for(c=t?aSe:iSe,s=0;s<i;++s)this.each(c(r[s],t,n));return this}function dK(e,t,n){var r=iK(e),s=r.CustomEvent;typeof s=="function"?s=new s(t,n):(s=r.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function cSe(e,t){return function(){return dK(this,e,t)}}function lSe(e,t){return function(){return dK(this,e,t.apply(this,arguments))}}function dSe(e,t){return this.each((typeof t=="function"?lSe:cSe)(e,t))}function*uSe(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length,o;s<i;++s)(o=r[s])&&(yield o)}var uK=[null];function Zo(e,t){this._groups=e,this._parents=t}function Iw(){return new Zo([[document.documentElement]],uK)}function hSe(){return this}Zo.prototype=Iw.prototype={constructor:Zo,select:Mje,selectAll:Hje,selectChild:qje,selectChildren:Yje,filter:Xje,data:rke,enter:Jje,exit:ike,join:ake,merge:oke,selection:hSe,order:cke,sort:lke,call:uke,nodes:hke,node:Ake,size:fke,empty:pke,each:mke,attr:Cke,style:Nke,property:Ike,classed:Dke,text:Rke,html:$ke,raise:Vke,lower:Kke,append:Wke,insert:Yke,remove:Jke,clone:tSe,datum:nSe,on:oSe,dispatch:dSe,[Symbol.iterator]:uSe};function zo(e){return typeof e=="string"?new Zo([[document.querySelector(e)]],[document.documentElement]):new Zo([[e]],uK)}function ASe(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ml(e,t){if(e=ASe(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const fSe={passive:!1},Mx={capture:!0,passive:!1};function wB(e){e.stopImmediatePropagation()}function zg(e){e.preventDefault(),e.stopImmediatePropagation()}function hK(e){var t=e.document.documentElement,n=zo(e).on("dragstart.drag",zg,Mx);"onselectstart"in t?n.on("selectstart.drag",zg,Mx):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function AK(e,t){var n=e.document.documentElement,r=zo(e).on("dragstart.drag",null);t&&(r.on("click.drag",zg,Mx),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const p1=e=>()=>e;function U_(e,{sourceEvent:t,subject:n,target:r,identifier:s,active:i,x:o,y:c,dx:l,dy:d,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:u}})}U_.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function pSe(e){return!e.ctrlKey&&!e.button}function mSe(){return this.parentNode}function gSe(e,t){return t??{x:e.x,y:e.y}}function vSe(){return navigator.maxTouchPoints||"ontouchstart"in this}function fK(){var e=pSe,t=mSe,n=gSe,r=vSe,s={},i=Nk("start","drag","end"),o=0,c,l,d,u,h=0;function A(C){C.on("mousedown.drag",f).filter(r).on("touchstart.drag",b).on("touchmove.drag",y,fSe).on("touchend.drag touchcancel.drag",j).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(C,S){if(!(u||!e.call(this,C,S))){var _=x(this,t.call(this,C,S),C,S,"mouse");_&&(zo(C.view).on("mousemove.drag",m,Mx).on("mouseup.drag",g,Mx),hK(C.view),wB(C),d=!1,c=C.clientX,l=C.clientY,_("start",C))}}function m(C){if(zg(C),!d){var S=C.clientX-c,_=C.clientY-l;d=S*S+_*_>h}s.mouse("drag",C)}function g(C){zo(C.view).on("mousemove.drag mouseup.drag",null),AK(C.view,d),zg(C),s.mouse("end",C)}function b(C,S){if(e.call(this,C,S)){var _=C.changedTouches,N=t.call(this,C,S),L=_.length,P,F;for(P=0;P<L;++P)(F=x(this,N,C,S,_[P].identifier,_[P]))&&(wB(C),F("start",C,_[P]))}}function y(C){var S=C.changedTouches,_=S.length,N,L;for(N=0;N<_;++N)(L=s[S[N].identifier])&&(zg(C),L("drag",C,S[N]))}function j(C){var S=C.changedTouches,_=S.length,N,L;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),N=0;N<_;++N)(L=s[S[N].identifier])&&(wB(C),L("end",C,S[N]))}function x(C,S,_,N,L,P){var F=i.copy(),I=ml(P||_,S),T,Q,D;if((D=n.call(C,new U_("beforestart",{sourceEvent:_,target:A,identifier:L,active:o,x:I[0],y:I[1],dx:0,dy:0,dispatch:F}),N))!=null)return T=D.x-I[0]||0,Q=D.y-I[1]||0,function M(U,H,$){var R=I,Y;switch(U){case"start":s[L]=M,Y=o++;break;case"end":delete s[L],--o;case"drag":I=ml($||H,S),Y=o;break}F.call(U,C,new U_(U,{sourceEvent:H,subject:D,target:A,identifier:L,active:Y,x:I[0]+T,y:I[1]+Q,dx:I[0]-R[0],dy:I[1]-R[1],dispatch:F}),N)}}return A.filter=function(C){return arguments.length?(e=typeof C=="function"?C:p1(!!C),A):e},A.container=function(C){return arguments.length?(t=typeof C=="function"?C:p1(C),A):t},A.subject=function(C){return arguments.length?(n=typeof C=="function"?C:p1(C),A):n},A.touchable=function(C){return arguments.length?(r=typeof C=="function"?C:p1(!!C),A):r},A.on=function(){var C=i.on.apply(i,arguments);return C===i?A:C},A.clickDistance=function(C){return arguments.length?(h=(C=+C)*C,A):Math.sqrt(h)},A}function ST(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function pK(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Pw(){}var Rx=.7,WC=1/Rx,Vg="\\s*([+-]?\\d+)\\s*",Ox="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ld="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ySe=/^#([0-9a-f]{3,8})$/,xSe=new RegExp(`^rgb\\(${Vg},${Vg},${Vg}\\)$`),wSe=new RegExp(`^rgb\\(${Ld},${Ld},${Ld}\\)$`),bSe=new RegExp(`^rgba\\(${Vg},${Vg},${Vg},${Ox}\\)$`),CSe=new RegExp(`^rgba\\(${Ld},${Ld},${Ld},${Ox}\\)$`),jSe=new RegExp(`^hsl\\(${Ox},${Ld},${Ld}\\)$`),kSe=new RegExp(`^hsla\\(${Ox},${Ld},${Ld},${Ox}\\)$`),JM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ST(Pw,Yp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ZM,formatHex:ZM,formatHex8:SSe,formatHsl:NSe,formatRgb:eR,toString:eR});function ZM(){return this.rgb().formatHex()}function SSe(){return this.rgb().formatHex8()}function NSe(){return mK(this).formatHsl()}function eR(){return this.rgb().formatRgb()}function Yp(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ySe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?tR(t):n===3?new Ao(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?m1(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?m1(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=xSe.exec(e))?new Ao(t[1],t[2],t[3],1):(t=wSe.exec(e))?new Ao(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=bSe.exec(e))?m1(t[1],t[2],t[3],t[4]):(t=CSe.exec(e))?m1(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=jSe.exec(e))?sR(t[1],t[2]/100,t[3]/100,1):(t=kSe.exec(e))?sR(t[1],t[2]/100,t[3]/100,t[4]):JM.hasOwnProperty(e)?tR(JM[e]):e==="transparent"?new Ao(NaN,NaN,NaN,0):null}function tR(e){return new Ao(e>>16&255,e>>8&255,e&255,1)}function m1(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ao(e,t,n,r)}function BSe(e){return e instanceof Pw||(e=Yp(e)),e?(e=e.rgb(),new Ao(e.r,e.g,e.b,e.opacity)):new Ao}function L_(e,t,n,r){return arguments.length===1?BSe(e):new Ao(e,t,n,r??1)}function Ao(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ST(Ao,L_,pK(Pw,{brighter(e){return e=e==null?WC:Math.pow(WC,e),new Ao(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Rx:Math.pow(Rx,e),new Ao(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ao(Fp(this.r),Fp(this.g),Fp(this.b),GC(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:nR,formatHex:nR,formatHex8:ESe,formatRgb:rR,toString:rR}));function nR(){return`#${mp(this.r)}${mp(this.g)}${mp(this.b)}`}function ESe(){return`#${mp(this.r)}${mp(this.g)}${mp(this.b)}${mp((isNaN(this.opacity)?1:this.opacity)*255)}`}function rR(){const e=GC(this.opacity);return`${e===1?"rgb(":"rgba("}${Fp(this.r)}, ${Fp(this.g)}, ${Fp(this.b)}${e===1?")":`, ${e})`}`}function GC(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Fp(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function mp(e){return e=Fp(e),(e<16?"0":"")+e.toString(16)}function sR(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new vl(e,t,n,r)}function mK(e){if(e instanceof vl)return new vl(e.h,e.s,e.l,e.opacity);if(e instanceof Pw||(e=Yp(e)),!e)return new vl;if(e instanceof vl)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,c=i-s,l=(i+s)/2;return c?(t===i?o=(n-r)/c+(n<r)*6:n===i?o=(r-t)/c+2:o=(t-n)/c+4,c/=l<.5?i+s:2-i-s,o*=60):c=l>0&&l<1?0:o,new vl(o,c,l,e.opacity)}function _Se(e,t,n,r){return arguments.length===1?mK(e):new vl(e,t,n,r??1)}function vl(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ST(vl,_Se,pK(Pw,{brighter(e){return e=e==null?WC:Math.pow(WC,e),new vl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Rx:Math.pow(Rx,e),new vl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new Ao(bB(e>=240?e-240:e+120,s,r),bB(e,s,r),bB(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new vl(iR(this.h),g1(this.s),g1(this.l),GC(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=GC(this.opacity);return`${e===1?"hsl(":"hsla("}${iR(this.h)}, ${g1(this.s)*100}%, ${g1(this.l)*100}%${e===1?")":`, ${e})`}`}}));function iR(e){return e=(e||0)%360,e<0?e+360:e}function g1(e){return Math.max(0,Math.min(1,e||0))}function bB(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const NT=e=>()=>e;function ISe(e,t){return function(n){return e+n*t}}function PSe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function TSe(e){return(e=+e)==1?gK:function(t,n){return n-t?PSe(t,n,e):NT(isNaN(t)?n:t)}}function gK(e,t){var n=t-e;return n?ISe(e,n):NT(isNaN(e)?t:e)}const YC=function e(t){var n=TSe(t);function r(s,i){var o=n((s=L_(s)).r,(i=L_(i)).r),c=n(s.g,i.g),l=n(s.b,i.b),d=gK(s.opacity,i.opacity);return function(u){return s.r=o(u),s.g=c(u),s.b=l(u),s.opacity=d(u),s+""}}return r.gamma=e,r}(1);function FSe(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),s;return function(i){for(s=0;s<n;++s)r[s]=e[s]*(1-i)+t[s]*i;return r}}function DSe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function USe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,s=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)s[o]=z0(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(c){for(o=0;o<r;++o)i[o]=s[o](c);return i}}function LSe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function wd(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function MSe(e,t){var n={},r={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=z0(e[s],t[s]):r[s]=t[s];return function(i){for(s in n)r[s]=n[s](i);return r}}var M_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,CB=new RegExp(M_.source,"g");function RSe(e){return function(){return e}}function OSe(e){return function(t){return e(t)+""}}function vK(e,t){var n=M_.lastIndex=CB.lastIndex=0,r,s,i,o=-1,c=[],l=[];for(e=e+"",t=t+"";(r=M_.exec(e))&&(s=CB.exec(t));)(i=s.index)>n&&(i=t.slice(n,i),c[o]?c[o]+=i:c[++o]=i),(r=r[0])===(s=s[0])?c[o]?c[o]+=s:c[++o]=s:(c[++o]=null,l.push({i:o,x:wd(r,s)})),n=CB.lastIndex;return n<t.length&&(i=t.slice(n),c[o]?c[o]+=i:c[++o]=i),c.length<2?l[0]?OSe(l[0].x):RSe(t):(t=l.length,function(d){for(var u=0,h;u<t;++u)c[(h=l[u]).i]=h.x(d);return c.join("")})}function z0(e,t){var n=typeof t,r;return t==null||n==="boolean"?NT(t):(n==="number"?wd:n==="string"?(r=Yp(t))?(t=r,YC):vK:t instanceof Yp?YC:t instanceof Date?LSe:DSe(t)?FSe:Array.isArray(t)?USe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?MSe:wd)(e,t)}var aR=180/Math.PI,R_={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function yK(e,t,n,r,s,i){var o,c,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(c=Math.sqrt(n*n+r*r))&&(n/=c,r/=c,l/=c),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:s,translateY:i,rotate:Math.atan2(t,e)*aR,skewX:Math.atan(l)*aR,scaleX:o,scaleY:c}}var v1;function QSe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?R_:yK(t.a,t.b,t.c,t.d,t.e,t.f)}function HSe(e){return e==null||(v1||(v1=document.createElementNS("http://www.w3.org/2000/svg","g")),v1.setAttribute("transform",e),!(e=v1.transform.baseVal.consolidate()))?R_:(e=e.matrix,yK(e.a,e.b,e.c,e.d,e.e,e.f))}function xK(e,t,n,r){function s(d){return d.length?d.pop()+" ":""}function i(d,u,h,A,f,m){if(d!==h||u!==A){var g=f.push("translate(",null,t,null,n);m.push({i:g-4,x:wd(d,h)},{i:g-2,x:wd(u,A)})}else(h||A)&&f.push("translate("+h+t+A+n)}function o(d,u,h,A){d!==u?(d-u>180?u+=360:u-d>180&&(d+=360),A.push({i:h.push(s(h)+"rotate(",null,r)-2,x:wd(d,u)})):u&&h.push(s(h)+"rotate("+u+r)}function c(d,u,h,A){d!==u?A.push({i:h.push(s(h)+"skewX(",null,r)-2,x:wd(d,u)}):u&&h.push(s(h)+"skewX("+u+r)}function l(d,u,h,A,f,m){if(d!==h||u!==A){var g=f.push(s(f)+"scale(",null,",",null,")");m.push({i:g-4,x:wd(d,h)},{i:g-2,x:wd(u,A)})}else(h!==1||A!==1)&&f.push(s(f)+"scale("+h+","+A+")")}return function(d,u){var h=[],A=[];return d=e(d),u=e(u),i(d.translateX,d.translateY,u.translateX,u.translateY,h,A),o(d.rotate,u.rotate,h,A),c(d.skewX,u.skewX,h,A),l(d.scaleX,d.scaleY,u.scaleX,u.scaleY,h,A),d=u=null,function(f){for(var m=-1,g=A.length,b;++m<g;)h[(b=A[m]).i]=b.x(f);return h.join("")}}}var $Se=xK(QSe,"px, ","px)","deg)"),zSe=xK(HSe,", ",")",")"),VSe=1e-12;function oR(e){return((e=Math.exp(e))+1/e)/2}function qSe(e){return((e=Math.exp(e))-1/e)/2}function KSe(e){return((e=Math.exp(2*e))-1)/(e+1)}const F2=function e(t,n,r){function s(i,o){var c=i[0],l=i[1],d=i[2],u=o[0],h=o[1],A=o[2],f=u-c,m=h-l,g=f*f+m*m,b,y;if(g<VSe)y=Math.log(A/d)/t,b=function(N){return[c+N*f,l+N*m,d*Math.exp(t*N*y)]};else{var j=Math.sqrt(g),x=(A*A-d*d+r*g)/(2*d*n*j),C=(A*A-d*d-r*g)/(2*A*n*j),S=Math.log(Math.sqrt(x*x+1)-x),_=Math.log(Math.sqrt(C*C+1)-C);y=(_-S)/t,b=function(N){var L=N*y,P=oR(S),F=d/(n*j)*(P*KSe(t*L+S)-qSe(S));return[c+F*f,l+F*m,d*P/oR(t*L+S)]}}return b.duration=y*1e3*t/Math.SQRT2,b}return s.rho=function(i){var o=Math.max(.001,+i),c=o*o,l=c*c;return e(o,c,l)},s}(Math.SQRT2,2,4);var Cv=0,c0=0,$y=0,wK=1e3,XC,l0,JC=0,Xp=0,Ek=0,Qx=typeof performance=="object"&&performance.now?performance:Date,bK=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function BT(){return Xp||(bK(WSe),Xp=Qx.now()+Ek)}function WSe(){Xp=0}function ZC(){this._call=this._time=this._next=null}ZC.prototype=CK.prototype={constructor:ZC,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?BT():+n)+(t==null?0:+t),!this._next&&l0!==this&&(l0?l0._next=this:XC=this,l0=this),this._call=e,this._time=n,O_()},stop:function(){this._call&&(this._call=null,this._time=1/0,O_())}};function CK(e,t,n){var r=new ZC;return r.restart(e,t,n),r}function GSe(){BT(),++Cv;for(var e=XC,t;e;)(t=Xp-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Cv}function cR(){Xp=(JC=Qx.now())+Ek,Cv=c0=0;try{GSe()}finally{Cv=0,XSe(),Xp=0}}function YSe(){var e=Qx.now(),t=e-JC;t>wK&&(Ek-=t,JC=e)}function XSe(){for(var e,t=XC,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:XC=n);l0=e,O_(r)}function O_(e){if(!Cv){c0&&(c0=clearTimeout(c0));var t=e-Xp;t>24?(e<1/0&&(c0=setTimeout(cR,e-Qx.now()-Ek)),$y&&($y=clearInterval($y))):($y||(JC=Qx.now(),$y=setInterval(YSe,wK)),Cv=1,bK(cR))}}function lR(e,t,n){var r=new ZC;return t=t==null?0:+t,r.restart(s=>{r.stop(),e(s+t)},t,n),r}var JSe=Nk("start","end","cancel","interrupt"),ZSe=[],jK=0,dR=1,Q_=2,D2=3,uR=4,H_=5,U2=6;function _k(e,t,n,r,s,i){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;eNe(e,n,{name:t,index:r,group:s,on:JSe,tween:ZSe,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:jK})}function ET(e,t){var n=Dl(e,t);if(n.state>jK)throw new Error("too late; already scheduled");return n}function Gd(e,t){var n=Dl(e,t);if(n.state>D2)throw new Error("too late; already running");return n}function Dl(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function eNe(e,t,n){var r=e.__transition,s;r[t]=n,n.timer=CK(i,0,n.time);function i(d){n.state=dR,n.timer.restart(o,n.delay,n.time),n.delay<=d&&o(d-n.delay)}function o(d){var u,h,A,f;if(n.state!==dR)return l();for(u in r)if(f=r[u],f.name===n.name){if(f.state===D2)return lR(o);f.state===uR?(f.state=U2,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete r[u]):+u<t&&(f.state=U2,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete r[u])}if(lR(function(){n.state===D2&&(n.state=uR,n.timer.restart(c,n.delay,n.time),c(d))}),n.state=Q_,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Q_){for(n.state=D2,s=new Array(A=n.tween.length),u=0,h=-1;u<A;++u)(f=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(s[++h]=f);s.length=h+1}}function c(d){for(var u=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(l),n.state=H_,1),h=-1,A=s.length;++h<A;)s[h].call(e,u);n.state===H_&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=U2,n.timer.stop(),delete r[t];for(var d in r)return;delete e.__transition}}function L2(e,t){var n=e.__transition,r,s,i=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){i=!1;continue}s=r.state>Q_&&r.state<H_,r.state=U2,r.timer.stop(),r.on.call(s?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}i&&delete e.__transition}}function tNe(e){return this.each(function(){L2(this,e)})}function nNe(e,t){var n,r;return function(){var s=Gd(this,e),i=s.tween;if(i!==n){r=n=i;for(var o=0,c=r.length;o<c;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}s.tween=r}}function rNe(e,t,n){var r,s;if(typeof n!="function")throw new Error;return function(){var i=Gd(this,e),o=i.tween;if(o!==r){s=(r=o).slice();for(var c={name:t,value:n},l=0,d=s.length;l<d;++l)if(s[l].name===t){s[l]=c;break}l===d&&s.push(c)}i.tween=s}}function sNe(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Dl(this.node(),n).tween,s=0,i=r.length,o;s<i;++s)if((o=r[s]).name===e)return o.value;return null}return this.each((t==null?nNe:rNe)(n,e,t))}function _T(e,t,n){var r=e._id;return e.each(function(){var s=Gd(this,r);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return Dl(s,r).value[t]}}function kK(e,t){var n;return(typeof t=="number"?wd:t instanceof Yp?YC:(n=Yp(t))?(t=n,YC):vK)(e,t)}function iNe(e){return function(){this.removeAttribute(e)}}function aNe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function oNe(e,t,n){var r,s=n+"",i;return function(){var o=this.getAttribute(e);return o===s?null:o===r?i:i=t(r=o,n)}}function cNe(e,t,n){var r,s=n+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===s?null:o===r?i:i=t(r=o,n)}}function lNe(e,t,n){var r,s,i;return function(){var o,c=n(this),l;return c==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=c+"",o===l?null:o===r&&l===s?i:(s=l,i=t(r=o,c)))}}function dNe(e,t,n){var r,s,i;return function(){var o,c=n(this),l;return c==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=c+"",o===l?null:o===r&&l===s?i:(s=l,i=t(r=o,c)))}}function uNe(e,t){var n=Bk(e),r=n==="transform"?zSe:kK;return this.attrTween(e,typeof t=="function"?(n.local?dNe:lNe)(n,r,_T(this,"attr."+e,t)):t==null?(n.local?aNe:iNe)(n):(n.local?cNe:oNe)(n,r,t))}function hNe(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ANe(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function fNe(e,t){var n,r;function s(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&ANe(e,i)),n}return s._value=t,s}function pNe(e,t){var n,r;function s(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&hNe(e,i)),n}return s._value=t,s}function mNe(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Bk(e);return this.tween(n,(r.local?fNe:pNe)(r,t))}function gNe(e,t){return function(){ET(this,e).delay=+t.apply(this,arguments)}}function vNe(e,t){return t=+t,function(){ET(this,e).delay=t}}function yNe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?gNe:vNe)(t,e)):Dl(this.node(),t).delay}function xNe(e,t){return function(){Gd(this,e).duration=+t.apply(this,arguments)}}function wNe(e,t){return t=+t,function(){Gd(this,e).duration=t}}function bNe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?xNe:wNe)(t,e)):Dl(this.node(),t).duration}function CNe(e,t){if(typeof t!="function")throw new Error;return function(){Gd(this,e).ease=t}}function jNe(e){var t=this._id;return arguments.length?this.each(CNe(t,e)):Dl(this.node(),t).ease}function kNe(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Gd(this,e).ease=n}}function SNe(e){if(typeof e!="function")throw new Error;return this.each(kNe(this._id,e))}function NNe(e){typeof e!="function"&&(e=nK(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,c=r[s]=[],l,d=0;d<o;++d)(l=i[d])&&e.call(l,l.__data__,d,i)&&c.push(l);return new nh(r,this._parents,this._name,this._id)}function BNe(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,s=n.length,i=Math.min(r,s),o=new Array(r),c=0;c<i;++c)for(var l=t[c],d=n[c],u=l.length,h=o[c]=new Array(u),A,f=0;f<u;++f)(A=l[f]||d[f])&&(h[f]=A);for(;c<r;++c)o[c]=t[c];return new nh(o,this._parents,this._name,this._id)}function ENe(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function _Ne(e,t,n){var r,s,i=ENe(t)?ET:Gd;return function(){var o=i(this,e),c=o.on;c!==r&&(s=(r=c).copy()).on(t,n),o.on=s}}function INe(e,t){var n=this._id;return arguments.length<2?Dl(this.node(),n).on.on(e):this.each(_Ne(n,e,t))}function PNe(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function TNe(){return this.on("end.remove",PNe(this._id))}function FNe(e){var t=this._name,n=this._id;typeof e!="function"&&(e=jT(e));for(var r=this._groups,s=r.length,i=new Array(s),o=0;o<s;++o)for(var c=r[o],l=c.length,d=i[o]=new Array(l),u,h,A=0;A<l;++A)(u=c[A])&&(h=e.call(u,u.__data__,A,c))&&("__data__"in u&&(h.__data__=u.__data__),d[A]=h,_k(d[A],t,n,A,d,Dl(u,n)));return new nh(i,this._parents,t,n)}function DNe(e){var t=this._name,n=this._id;typeof e!="function"&&(e=tK(e));for(var r=this._groups,s=r.length,i=[],o=[],c=0;c<s;++c)for(var l=r[c],d=l.length,u,h=0;h<d;++h)if(u=l[h]){for(var A=e.call(u,u.__data__,h,l),f,m=Dl(u,n),g=0,b=A.length;g<b;++g)(f=A[g])&&_k(f,t,n,g,A,m);i.push(A),o.push(u)}return new nh(i,o,t,n)}var UNe=Iw.prototype.constructor;function LNe(){return new UNe(this._groups,this._parents)}function MNe(e,t){var n,r,s;return function(){var i=bv(this,e),o=(this.style.removeProperty(e),bv(this,e));return i===o?null:i===n&&o===r?s:s=t(n=i,r=o)}}function SK(e){return function(){this.style.removeProperty(e)}}function RNe(e,t,n){var r,s=n+"",i;return function(){var o=bv(this,e);return o===s?null:o===r?i:i=t(r=o,n)}}function ONe(e,t,n){var r,s,i;return function(){var o=bv(this,e),c=n(this),l=c+"";return c==null&&(l=c=(this.style.removeProperty(e),bv(this,e))),o===l?null:o===r&&l===s?i:(s=l,i=t(r=o,c))}}function QNe(e,t){var n,r,s,i="style."+t,o="end."+i,c;return function(){var l=Gd(this,e),d=l.on,u=l.value[i]==null?c||(c=SK(t)):void 0;(d!==n||s!==u)&&(r=(n=d).copy()).on(o,s=u),l.on=r}}function HNe(e,t,n){var r=(e+="")=="transform"?$Se:kK;return t==null?this.styleTween(e,MNe(e,r)).on("end.style."+e,SK(e)):typeof t=="function"?this.styleTween(e,ONe(e,r,_T(this,"style."+e,t))).each(QNe(this._id,e)):this.styleTween(e,RNe(e,r,t),n).on("end.style."+e,null)}function $Ne(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function zNe(e,t,n){var r,s;function i(){var o=t.apply(this,arguments);return o!==s&&(r=(s=o)&&$Ne(e,o,n)),r}return i._value=t,i}function VNe(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,zNe(e,t,n??""))}function qNe(e){return function(){this.textContent=e}}function KNe(e){return function(){var t=e(this);this.textContent=t??""}}function WNe(e){return this.tween("text",typeof e=="function"?KNe(_T(this,"text",e)):qNe(e==null?"":e+""))}function GNe(e){return function(t){this.textContent=e.call(this,t)}}function YNe(e){var t,n;function r(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&GNe(s)),t}return r._value=e,r}function XNe(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,YNe(e))}function JNe(){for(var e=this._name,t=this._id,n=NK(),r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],c=o.length,l,d=0;d<c;++d)if(l=o[d]){var u=Dl(l,t);_k(l,e,n,d,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new nh(r,this._parents,e,n)}function ZNe(){var e,t,n=this,r=n._id,s=n.size();return new Promise(function(i,o){var c={value:o},l={value:function(){--s===0&&i()}};n.each(function(){var d=Gd(this,r),u=d.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(c),t._.interrupt.push(c),t._.end.push(l)),d.on=t}),s===0&&i()})}var eBe=0;function nh(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function NK(){return++eBe}var wu=Iw.prototype;nh.prototype={constructor:nh,select:FNe,selectAll:DNe,selectChild:wu.selectChild,selectChildren:wu.selectChildren,filter:NNe,merge:BNe,selection:LNe,transition:JNe,call:wu.call,nodes:wu.nodes,node:wu.node,size:wu.size,empty:wu.empty,each:wu.each,on:INe,attr:uNe,attrTween:mNe,style:HNe,styleTween:VNe,text:WNe,textTween:XNe,remove:TNe,tween:sNe,delay:yNe,duration:bNe,ease:jNe,easeVarying:SNe,end:ZNe,[Symbol.iterator]:wu[Symbol.iterator]};function tBe(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var nBe={time:null,delay:0,duration:250,ease:tBe};function rBe(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function sBe(e){var t,n;e instanceof nh?(t=e._id,e=e._name):(t=NK(),(n=nBe).time=BT(),e=e==null?null:e+"");for(var r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],c=o.length,l,d=0;d<c;++d)(l=o[d])&&_k(l,e,t,d,o,n||rBe(l,t));return new nh(r,this._parents,e,t)}Iw.prototype.interrupt=tNe;Iw.prototype.transition=sBe;const y1=e=>()=>e;function iBe(e,{sourceEvent:t,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function Ou(e,t,n){this.k=e,this.x=t,this.y=n}Ou.prototype={constructor:Ou,scale:function(e){return e===1?this:new Ou(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ou(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ik=new Ou(1,0,0);BK.prototype=Ou.prototype;function BK(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Ik;return e.__zoom}function jB(e){e.stopImmediatePropagation()}function zy(e){e.preventDefault(),e.stopImmediatePropagation()}function aBe(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function oBe(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function hR(){return this.__zoom||Ik}function cBe(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function lBe(){return navigator.maxTouchPoints||"ontouchstart"in this}function dBe(e,t,n){var r=e.invertX(t[0][0])-n[0][0],s=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function EK(){var e=aBe,t=oBe,n=dBe,r=cBe,s=lBe,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],c=250,l=F2,d=Nk("start","zoom","end"),u,h,A,f=500,m=150,g=0,b=10;function y(D){D.property("__zoom",hR).on("wheel.zoom",L,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",F).filter(s).on("touchstart.zoom",I).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",Q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(D,M,U,H){var $=D.selection?D.selection():D;$.property("__zoom",hR),D!==$?S(D,M,U,H):$.interrupt().each(function(){_(this,arguments).event(H).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},y.scaleBy=function(D,M,U,H){y.scaleTo(D,function(){var $=this.__zoom.k,R=typeof M=="function"?M.apply(this,arguments):M;return $*R},U,H)},y.scaleTo=function(D,M,U,H){y.transform(D,function(){var $=t.apply(this,arguments),R=this.__zoom,Y=U==null?C($):typeof U=="function"?U.apply(this,arguments):U,X=R.invert(Y),q=typeof M=="function"?M.apply(this,arguments):M;return n(x(j(R,q),Y,X),$,o)},U,H)},y.translateBy=function(D,M,U,H){y.transform(D,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof U=="function"?U.apply(this,arguments):U),t.apply(this,arguments),o)},null,H)},y.translateTo=function(D,M,U,H,$){y.transform(D,function(){var R=t.apply(this,arguments),Y=this.__zoom,X=H==null?C(R):typeof H=="function"?H.apply(this,arguments):H;return n(Ik.translate(X[0],X[1]).scale(Y.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof U=="function"?-U.apply(this,arguments):-U),R,o)},H,$)};function j(D,M){return M=Math.max(i[0],Math.min(i[1],M)),M===D.k?D:new Ou(M,D.x,D.y)}function x(D,M,U){var H=M[0]-U[0]*D.k,$=M[1]-U[1]*D.k;return H===D.x&&$===D.y?D:new Ou(D.k,H,$)}function C(D){return[(+D[0][0]+ +D[1][0])/2,(+D[0][1]+ +D[1][1])/2]}function S(D,M,U,H){D.on("start.zoom",function(){_(this,arguments).event(H).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(H).end()}).tween("zoom",function(){var $=this,R=arguments,Y=_($,R).event(H),X=t.apply($,R),q=U==null?C(X):typeof U=="function"?U.apply($,R):U,K=Math.max(X[1][0]-X[0][0],X[1][1]-X[0][1]),J=$.__zoom,W=typeof M=="function"?M.apply($,R):M,ne=l(J.invert(q).concat(K/J.k),W.invert(q).concat(K/W.k));return function(ae){if(ae===1)ae=W;else{var ce=ne(ae),Ae=K/ce[2];ae=new Ou(Ae,q[0]-ce[0]*Ae,q[1]-ce[1]*Ae)}Y.zoom(null,ae)}})}function _(D,M,U){return!U&&D.__zooming||new N(D,M)}function N(D,M){this.that=D,this.args=M,this.active=0,this.sourceEvent=null,this.extent=t.apply(D,M),this.taps=0}N.prototype={event:function(D){return D&&(this.sourceEvent=D),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(D,M){return this.mouse&&D!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&D!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&D!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(D){var M=zo(this.that).datum();d.call(D,this.that,new iBe(D,{sourceEvent:this.sourceEvent,target:y,type:D,transform:this.that.__zoom,dispatch:d}),M)}};function L(D,...M){if(!e.apply(this,arguments))return;var U=_(this,M).event(D),H=this.__zoom,$=Math.max(i[0],Math.min(i[1],H.k*Math.pow(2,r.apply(this,arguments)))),R=ml(D);if(U.wheel)(U.mouse[0][0]!==R[0]||U.mouse[0][1]!==R[1])&&(U.mouse[1]=H.invert(U.mouse[0]=R)),clearTimeout(U.wheel);else{if(H.k===$)return;U.mouse=[R,H.invert(R)],L2(this),U.start()}zy(D),U.wheel=setTimeout(Y,m),U.zoom("mouse",n(x(j(H,$),U.mouse[0],U.mouse[1]),U.extent,o));function Y(){U.wheel=null,U.end()}}function P(D,...M){if(A||!e.apply(this,arguments))return;var U=D.currentTarget,H=_(this,M,!0).event(D),$=zo(D.view).on("mousemove.zoom",q,!0).on("mouseup.zoom",K,!0),R=ml(D,U),Y=D.clientX,X=D.clientY;hK(D.view),jB(D),H.mouse=[R,this.__zoom.invert(R)],L2(this),H.start();function q(J){if(zy(J),!H.moved){var W=J.clientX-Y,ne=J.clientY-X;H.moved=W*W+ne*ne>g}H.event(J).zoom("mouse",n(x(H.that.__zoom,H.mouse[0]=ml(J,U),H.mouse[1]),H.extent,o))}function K(J){$.on("mousemove.zoom mouseup.zoom",null),AK(J.view,H.moved),zy(J),H.event(J).end()}}function F(D,...M){if(e.apply(this,arguments)){var U=this.__zoom,H=ml(D.changedTouches?D.changedTouches[0]:D,this),$=U.invert(H),R=U.k*(D.shiftKey?.5:2),Y=n(x(j(U,R),H,$),t.apply(this,M),o);zy(D),c>0?zo(this).transition().duration(c).call(S,Y,H,D):zo(this).call(y.transform,Y,H,D)}}function I(D,...M){if(e.apply(this,arguments)){var U=D.touches,H=U.length,$=_(this,M,D.changedTouches.length===H).event(D),R,Y,X,q;for(jB(D),Y=0;Y<H;++Y)X=U[Y],q=ml(X,this),q=[q,this.__zoom.invert(q),X.identifier],$.touch0?!$.touch1&&$.touch0[2]!==q[2]&&($.touch1=q,$.taps=0):($.touch0=q,R=!0,$.taps=1+!!u);u&&(u=clearTimeout(u)),R&&($.taps<2&&(h=q[0],u=setTimeout(function(){u=null},f)),L2(this),$.start())}}function T(D,...M){if(this.__zooming){var U=_(this,M).event(D),H=D.changedTouches,$=H.length,R,Y,X,q;for(zy(D),R=0;R<$;++R)Y=H[R],X=ml(Y,this),U.touch0&&U.touch0[2]===Y.identifier?U.touch0[0]=X:U.touch1&&U.touch1[2]===Y.identifier&&(U.touch1[0]=X);if(Y=U.that.__zoom,U.touch1){var K=U.touch0[0],J=U.touch0[1],W=U.touch1[0],ne=U.touch1[1],ae=(ae=W[0]-K[0])*ae+(ae=W[1]-K[1])*ae,ce=(ce=ne[0]-J[0])*ce+(ce=ne[1]-J[1])*ce;Y=j(Y,Math.sqrt(ae/ce)),X=[(K[0]+W[0])/2,(K[1]+W[1])/2],q=[(J[0]+ne[0])/2,(J[1]+ne[1])/2]}else if(U.touch0)X=U.touch0[0],q=U.touch0[1];else return;U.zoom("touch",n(x(Y,X,q),U.extent,o))}}function Q(D,...M){if(this.__zooming){var U=_(this,M).event(D),H=D.changedTouches,$=H.length,R,Y;for(jB(D),A&&clearTimeout(A),A=setTimeout(function(){A=null},f),R=0;R<$;++R)Y=H[R],U.touch0&&U.touch0[2]===Y.identifier?delete U.touch0:U.touch1&&U.touch1[2]===Y.identifier&&delete U.touch1;if(U.touch1&&!U.touch0&&(U.touch0=U.touch1,delete U.touch1),U.touch0)U.touch0[1]=this.__zoom.invert(U.touch0[0]);else if(U.end(),U.taps===2&&(Y=ml(Y,this),Math.hypot(h[0]-Y[0],h[1]-Y[1])<b)){var X=zo(this).on("dblclick.zoom");X&&X.apply(this,arguments)}}}return y.wheelDelta=function(D){return arguments.length?(r=typeof D=="function"?D:y1(+D),y):r},y.filter=function(D){return arguments.length?(e=typeof D=="function"?D:y1(!!D),y):e},y.touchable=function(D){return arguments.length?(s=typeof D=="function"?D:y1(!!D),y):s},y.extent=function(D){return arguments.length?(t=typeof D=="function"?D:y1([[+D[0][0],+D[0][1]],[+D[1][0],+D[1][1]]]),y):t},y.scaleExtent=function(D){return arguments.length?(i[0]=+D[0],i[1]=+D[1],y):[i[0],i[1]]},y.translateExtent=function(D){return arguments.length?(o[0][0]=+D[0][0],o[1][0]=+D[1][0],o[0][1]=+D[0][1],o[1][1]=+D[1][1],y):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},y.constrain=function(D){return arguments.length?(n=D,y):n},y.duration=function(D){return arguments.length?(c=+D,y):c},y.interpolate=function(D){return arguments.length?(l=D,y):l},y.on=function(){var D=d.on.apply(d,arguments);return D===d?y:D},y.clickDistance=function(D){return arguments.length?(g=(D=+D)*D,y):Math.sqrt(g)},y.tapDistance=function(D){return arguments.length?(b=+D,y):b},y}const $d={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Hx=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],_K=["Enter"," ","Escape"],IK={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Jp;(function(e){e.Strict="strict",e.Loose="loose"})(Jp||(Jp={}));var Dp;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Dp||(Dp={}));var Zp;(function(e){e.Partial="partial",e.Full="full"})(Zp||(Zp={}));const PK={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var fA;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(fA||(fA={}));var ej;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(ej||(ej={}));var Yt;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Yt||(Yt={}));const AR={[Yt.Left]:Yt.Right,[Yt.Right]:Yt.Left,[Yt.Top]:Yt.Bottom,[Yt.Bottom]:Yt.Top};function TK(e){return e===null?null:e?"valid":"invalid"}const FK=e=>"id"in e&&"source"in e&&"target"in e,uBe=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),IT=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Tw=(e,t=[0,0])=>{const{width:n,height:r}=oh(e),s=e.origin??t,i=n*s[0],o=r*s[1];return{x:e.position.x-i,y:e.position.y-o}},hBe=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,s)=>{const i=typeof s=="string";let o=!t.nodeLookup&&!i?s:void 0;t.nodeLookup&&(o=i?t.nodeLookup.get(s):IT(s)?s:t.nodeLookup.get(s.id));const c=o?tj(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Pk(r,c)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Tk(n)},Fw=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const s=tj(r);n=Pk(n,s)}}),Tk(n)},PT=(e,t,[n,r,s]=[0,0,1],i=!1,o=!1)=>{const c={...Uw(t,[n,r,s]),width:t.width/s,height:t.height/s},l=[];for(const d of e.values()){const{measured:u,selectable:h=!0,hidden:A=!1}=d;if(o&&!h||A)continue;const f=u.width??d.width??d.initialWidth??null,m=u.height??d.height??d.initialHeight??null,g=$x(c,kv(d)),b=(f??0)*(m??0),y=i&&g>0;(!d.internals.handleBounds||y||g>=b||d.dragging)&&l.push(d)}return l},ABe=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function fBe(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(s=>s.id)):null;return e.forEach(s=>{s.measured.width&&s.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!s.hidden)&&(!r||r.has(s.id))&&n.set(s.id,s)}),n}async function pBe({nodes:e,width:t,height:n,panZoom:r,minZoom:s,maxZoom:i},o){if(e.size===0)return Promise.resolve(!0);const c=fBe(e,o),l=Fw(c),d=TT(l,t,n,(o==null?void 0:o.minZoom)??s,(o==null?void 0:o.maxZoom)??i,(o==null?void 0:o.padding)??.1);return await r.setViewport(d,{duration:o==null?void 0:o.duration,ease:o==null?void 0:o.ease,interpolate:o==null?void 0:o.interpolate}),Promise.resolve(!0)}function DK({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:s,onError:i}){const o=n.get(e),c=o.parentId?n.get(o.parentId):void 0,{x:l,y:d}=c?c.internals.positionAbsolute:{x:0,y:0},u=o.origin??r;let h=o.extent||s;if(o.extent==="parent"&&!o.expandParent)if(!c)i==null||i("005",$d.error005());else{const f=c.measured.width,m=c.measured.height;f&&m&&(h=[[l,d],[l+f,d+m]])}else c&&Sv(o.extent)&&(h=[[o.extent[0][0]+l,o.extent[0][1]+d],[o.extent[1][0]+l,o.extent[1][1]+d]]);const A=Sv(h)?em(t,h,o.measured):t;return(o.measured.width===void 0||o.measured.height===void 0)&&(i==null||i("015",$d.error015())),{position:{x:A.x-l+(o.measured.width??0)*u[0],y:A.y-d+(o.measured.height??0)*u[1]},positionAbsolute:A}}async function mBe({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:s}){const i=new Set(e.map(A=>A.id)),o=[];for(const A of n){if(A.deletable===!1)continue;const f=i.has(A.id),m=!f&&A.parentId&&o.find(g=>g.id===A.parentId);(f||m)&&o.push(A)}const c=new Set(t.map(A=>A.id)),l=r.filter(A=>A.deletable!==!1),u=ABe(o,l);for(const A of l)c.has(A.id)&&!u.find(m=>m.id===A.id)&&u.push(A);if(!s)return{edges:u,nodes:o};const h=await s({nodes:o,edges:u});return typeof h=="boolean"?h?{edges:u,nodes:o}:{edges:[],nodes:[]}:h}const jv=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),em=(e={x:0,y:0},t,n)=>({x:jv(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:jv(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function UK(e,t,n){const{width:r,height:s}=oh(n),{x:i,y:o}=n.internals.positionAbsolute;return em(e,[[i,o],[i+r,o+s]],t)}const fR=(e,t,n)=>e<t?jv(Math.abs(e-t),1,t)/t:e>n?-jv(Math.abs(e-n),1,t)/t:0,LK=(e,t,n=15,r=40)=>{const s=fR(e.x,r,t.width-r)*n,i=fR(e.y,r,t.height-r)*n;return[s,i]},Pk=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),$_=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Tk=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),kv=(e,t=[0,0])=>{var s,i;const{x:n,y:r}=IT(e)?e.internals.positionAbsolute:Tw(e,t);return{x:n,y:r,width:((s=e.measured)==null?void 0:s.width)??e.width??e.initialWidth??0,height:((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0}},tj=(e,t=[0,0])=>{var s,i;const{x:n,y:r}=IT(e)?e.internals.positionAbsolute:Tw(e,t);return{x:n,y:r,x2:n+(((s=e.measured)==null?void 0:s.width)??e.width??e.initialWidth??0),y2:r+(((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0)}},MK=(e,t)=>Tk(Pk($_(e),$_(t))),$x=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},pR=e=>xl(e.width)&&xl(e.height)&&xl(e.x)&&xl(e.y),xl=e=>!isNaN(e)&&isFinite(e),gBe=(e,t)=>{},Dw=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Uw=({x:e,y:t},[n,r,s],i=!1,o=[1,1])=>{const c={x:(e-n)/s,y:(t-r)/s};return i?Dw(c,o):c},nj=({x:e,y:t},[n,r,s])=>({x:e*s+n,y:t*s+r});function qm(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function vBe(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=qm(e,n),s=qm(e,t);return{top:r,right:s,bottom:r,left:s,x:s*2,y:r*2}}if(typeof e=="object"){const r=qm(e.top??e.y??0,n),s=qm(e.bottom??e.y??0,n),i=qm(e.left??e.x??0,t),o=qm(e.right??e.x??0,t);return{top:r,right:o,bottom:s,left:i,x:i+o,y:r+s}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function yBe(e,t,n,r,s,i){const{x:o,y:c}=nj(e,[t,n,r]),{x:l,y:d}=nj({x:e.x+e.width,y:e.y+e.height},[t,n,r]),u=s-l,h=i-d;return{left:Math.floor(o),top:Math.floor(c),right:Math.floor(u),bottom:Math.floor(h)}}const TT=(e,t,n,r,s,i)=>{const o=vBe(i,t,n),c=(t-o.x)/e.width,l=(n-o.y)/e.height,d=Math.min(c,l),u=jv(d,r,s),h=e.x+e.width/2,A=e.y+e.height/2,f=t/2-h*u,m=n/2-A*u,g=yBe(e,f,m,u,t,n),b={left:Math.min(g.left-o.left,0),top:Math.min(g.top-o.top,0),right:Math.min(g.right-o.right,0),bottom:Math.min(g.bottom-o.bottom,0)};return{x:f-b.left+b.right,y:m-b.top+b.bottom,zoom:u}},zx=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Sv(e){return e!==void 0&&e!=="parent"}function oh(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function RK(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function OK(e,t={width:0,height:0},n,r,s){const i={...e},o=r.get(n);if(o){const c=o.origin||s;i.x+=o.internals.positionAbsolute.x-(t.width??0)*c[0],i.y+=o.internals.positionAbsolute.y-(t.height??0)*c[1]}return i}function mR(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function xBe(){let e,t;return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}function wBe(e){return{...IK,...e||{}}}function V0(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:s}){const{x:i,y:o}=Bd(e),c=Uw({x:i-((s==null?void 0:s.left)??0),y:o-((s==null?void 0:s.top)??0)},r),{x:l,y:d}=n?Dw(c,t):c;return{xSnapped:l,ySnapped:d,...c}}const FT=e=>({width:e.offsetWidth,height:e.offsetHeight}),QK=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},bBe=["INPUT","SELECT","TEXTAREA"];function HK(e){var r,s;const t=((s=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:s[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:bBe.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const $K=e=>"clientX"in e,Bd=(e,t)=>{var i,o;const n=$K(e),r=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,s=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:s-((t==null?void 0:t.top)??0)}},gR=(e,t,n,r,s)=>{const i=t.querySelectorAll(`.${e}`);return!i||!i.length?null:Array.from(i).map(o=>{const c=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:e,nodeId:s,position:o.getAttribute("data-handlepos"),x:(c.left-n.left)/r,y:(c.top-n.top)/r,...FT(o)}})};function zK({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:s,sourceControlY:i,targetControlX:o,targetControlY:c}){const l=e*.125+s*.375+o*.375+n*.125,d=t*.125+i*.375+c*.375+r*.125,u=Math.abs(l-e),h=Math.abs(d-t);return[l,d,u,h]}function x1(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function vR({pos:e,x1:t,y1:n,x2:r,y2:s,c:i}){switch(e){case Yt.Left:return[t-x1(t-r,i),n];case Yt.Right:return[t+x1(r-t,i),n];case Yt.Top:return[t,n-x1(n-s,i)];case Yt.Bottom:return[t,n+x1(s-n,i)]}}function VK({sourceX:e,sourceY:t,sourcePosition:n=Yt.Bottom,targetX:r,targetY:s,targetPosition:i=Yt.Top,curvature:o=.25}){const[c,l]=vR({pos:n,x1:e,y1:t,x2:r,y2:s,c:o}),[d,u]=vR({pos:i,x1:r,y1:s,x2:e,y2:t,c:o}),[h,A,f,m]=zK({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:c,sourceControlY:l,targetControlX:d,targetControlY:u});return[`M${e},${t} C${c},${l} ${d},${u} ${r},${s}`,h,A,f,m]}function qK({sourceX:e,sourceY:t,targetX:n,targetY:r}){const s=Math.abs(n-e)/2,i=n<e?n+s:n-s,o=Math.abs(r-t)/2,c=r<t?r+o:r-o;return[i,c,s,o]}function CBe({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r,elevateOnSelect:s=!1}){if(r!==void 0)return r;const i=s&&n?1e3:0,o=Math.max(e.parentId?e.internals.z:0,t.parentId?t.internals.z:0);return i+o}function jBe({sourceNode:e,targetNode:t,width:n,height:r,transform:s}){const i=Pk(tj(e),tj(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const o={x:-s[0]/s[2],y:-s[1]/s[2],width:n/s[2],height:r/s[2]};return $x(o,Tk(i))>0}const kBe=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,SBe=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),KK=(e,t)=>{if(!e.source||!e.target)return t;let n;return FK(e)?n={...e}:n={...e,id:kBe(e)},SBe(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function WK({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[s,i,o,c]=qK({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,s,i,o,c]}const yR={[Yt.Left]:{x:-1,y:0},[Yt.Right]:{x:1,y:0},[Yt.Top]:{x:0,y:-1},[Yt.Bottom]:{x:0,y:1}},NBe=({source:e,sourcePosition:t=Yt.Bottom,target:n})=>t===Yt.Left||t===Yt.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},xR=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function BBe({source:e,sourcePosition:t=Yt.Bottom,target:n,targetPosition:r=Yt.Top,center:s,offset:i,stepPosition:o}){const c=yR[t],l=yR[r],d={x:e.x+c.x*i,y:e.y+c.y*i},u={x:n.x+l.x*i,y:n.y+l.y*i},h=NBe({source:d,sourcePosition:t,target:u}),A=h.x!==0?"x":"y",f=h[A];let m=[],g,b;const y={x:0,y:0},j={x:0,y:0},[,,x,C]=qK({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(c[A]*l[A]===-1){A==="x"?(g=s.x??d.x+(u.x-d.x)*o,b=s.y??(d.y+u.y)/2):(g=s.x??(d.x+u.x)/2,b=s.y??d.y+(u.y-d.y)*o);const _=[{x:g,y:d.y},{x:g,y:u.y}],N=[{x:d.x,y:b},{x:u.x,y:b}];c[A]===f?m=A==="x"?_:N:m=A==="x"?N:_}else{const _=[{x:d.x,y:u.y}],N=[{x:u.x,y:d.y}];if(A==="x"?m=c.x===f?N:_:m=c.y===f?_:N,t===r){const T=Math.abs(e[A]-n[A]);if(T<=i){const Q=Math.min(i-1,i-T);c[A]===f?y[A]=(d[A]>e[A]?-1:1)*Q:j[A]=(u[A]>n[A]?-1:1)*Q}}if(t!==r){const T=A==="x"?"y":"x",Q=c[A]===l[T],D=d[T]>u[T],M=d[T]<u[T];(c[A]===1&&(!Q&&D||Q&&M)||c[A]!==1&&(!Q&&M||Q&&D))&&(m=A==="x"?_:N)}const L={x:d.x+y.x,y:d.y+y.y},P={x:u.x+j.x,y:u.y+j.y},F=Math.max(Math.abs(L.x-m[0].x),Math.abs(P.x-m[0].x)),I=Math.max(Math.abs(L.y-m[0].y),Math.abs(P.y-m[0].y));F>=I?(g=(L.x+P.x)/2,b=m[0].y):(g=m[0].x,b=(L.y+P.y)/2)}return[[e,{x:d.x+y.x,y:d.y+y.y},...m,{x:u.x+j.x,y:u.y+j.y},n],g,b,x,C]}function EBe(e,t,n,r){const s=Math.min(xR(e,t)/2,xR(t,n)/2,r),{x:i,y:o}=t;if(e.x===i&&i===n.x||e.y===o&&o===n.y)return`L${i} ${o}`;if(e.y===o){const d=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${i+s*d},${o}Q ${i},${o} ${i},${o+s*u}`}const c=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${i},${o+s*l}Q ${i},${o} ${i+s*c},${o}`}function z_({sourceX:e,sourceY:t,sourcePosition:n=Yt.Bottom,targetX:r,targetY:s,targetPosition:i=Yt.Top,borderRadius:o=5,centerX:c,centerY:l,offset:d=20,stepPosition:u=.5}){const[h,A,f,m,g]=BBe({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:s},targetPosition:i,center:{x:c,y:l},offset:d,stepPosition:u});return[h.reduce((y,j,x)=>{let C="";return x>0&&x<h.length-1?C=EBe(h[x-1],j,h[x+1],o):C=`${x===0?"M":"L"}${j.x} ${j.y}`,y+=C,y},""),A,f,m,g]}function wR(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function _Be(e){var h;const{sourceNode:t,targetNode:n}=e;if(!wR(t)||!wR(n))return null;const r=t.internals.handleBounds||bR(t.handles),s=n.internals.handleBounds||bR(n.handles),i=CR((r==null?void 0:r.source)??[],e.sourceHandle),o=CR(e.connectionMode===Jp.Strict?(s==null?void 0:s.target)??[]:((s==null?void 0:s.target)??[]).concat((s==null?void 0:s.source)??[]),e.targetHandle);if(!i||!o)return(h=e.onError)==null||h.call(e,"008",$d.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const c=(i==null?void 0:i.position)||Yt.Bottom,l=(o==null?void 0:o.position)||Yt.Top,d=Vx(t,i,c),u=Vx(n,o,l);return{sourceX:d.x,sourceY:d.y,targetX:u.x,targetY:u.y,sourcePosition:c,targetPosition:l}}function bR(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function Vx(e,t,n=Yt.Left,r=!1){const s=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,i=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:o,height:c}=t??oh(e);if(r)return{x:s+o/2,y:i+c/2};switch((t==null?void 0:t.position)??n){case Yt.Top:return{x:s+o/2,y:i};case Yt.Right:return{x:s+o,y:i+c/2};case Yt.Bottom:return{x:s+o/2,y:i+c};case Yt.Left:return{x:s,y:i+c/2}}}function CR(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function V_(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function IBe(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:s}){const i=new Set;return e.reduce((o,c)=>([c.markerStart||r,c.markerEnd||s].forEach(l=>{if(l&&typeof l=="object"){const d=V_(l,t);i.has(d)||(o.push({id:d,color:l.color||n,...l}),i.add(d))}}),o),[]).sort((o,c)=>o.id.localeCompare(c.id))}const DT={nodeOrigin:[0,0],nodeExtent:Hx,elevateNodesOnSelect:!0,defaults:{}},PBe={...DT,checkEquality:!0};function UT(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function TBe(e,t,n){const r=UT(DT,n);for(const s of e.values())if(s.parentId)LT(s,e,t,r);else{const i=Tw(s,r.nodeOrigin),o=Sv(s.extent)?s.extent:r.nodeExtent,c=em(i,o,oh(s));s.internals.positionAbsolute=c}}function q_(e,t,n,r){var l,d;const s=UT(PBe,r);let i=e.length>0;const o=new Map(t),c=s!=null&&s.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const u of e){let h=o.get(u.id);if(s.checkEquality&&u===(h==null?void 0:h.internals.userNode))t.set(u.id,h);else{const A=Tw(u,s.nodeOrigin),f=Sv(u.extent)?u.extent:s.nodeExtent,m=em(A,f,oh(u));h={...s.defaults,...u,measured:{width:(l=u.measured)==null?void 0:l.width,height:(d=u.measured)==null?void 0:d.height},internals:{positionAbsolute:m,handleBounds:u.measured?h==null?void 0:h.internals.handleBounds:void 0,z:GK(u,c),userNode:u}},t.set(u.id,h)}(h.measured===void 0||h.measured.width===void 0||h.measured.height===void 0)&&!h.hidden&&(i=!1),u.parentId&&LT(h,t,n,r)}return i}function FBe(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function LT(e,t,n,r){const{elevateNodesOnSelect:s,nodeOrigin:i,nodeExtent:o}=UT(DT,r),c=e.parentId,l=t.get(c);if(!l){console.warn(`Parent node ${c} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}FBe(e,n);const d=s?1e3:0,{x:u,y:h,z:A}=DBe(e,l,i,o,d),{positionAbsolute:f}=e.internals,m=u!==f.x||h!==f.y;(m||A!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:m?{x:u,y:h}:f,z:A}})}function GK(e,t){return(xl(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function DBe(e,t,n,r,s){const{x:i,y:o}=t.internals.positionAbsolute,c=oh(e),l=Tw(e,n),d=Sv(e.extent)?em(l,e.extent,c):l;let u=em({x:i+d.x,y:o+d.y},r,c);e.extent==="parent"&&(u=UK(u,c,t));const h=GK(e,s),A=t.internals.z??0;return{x:u.x,y:u.y,z:A>=h?A+1:h}}function MT(e,t,n,r=[0,0]){var o;const s=[],i=new Map;for(const c of e){const l=t.get(c.parentId);if(!l)continue;const d=((o=i.get(c.parentId))==null?void 0:o.expandedRect)??kv(l),u=MK(d,c.rect);i.set(c.parentId,{expandedRect:u,parent:l})}return i.size>0&&i.forEach(({expandedRect:c,parent:l},d)=>{var x;const u=l.internals.positionAbsolute,h=oh(l),A=l.origin??r,f=c.x<u.x?Math.round(Math.abs(u.x-c.x)):0,m=c.y<u.y?Math.round(Math.abs(u.y-c.y)):0,g=Math.max(h.width,Math.round(c.width)),b=Math.max(h.height,Math.round(c.height)),y=(g-h.width)*A[0],j=(b-h.height)*A[1];(f>0||m>0||y||j)&&(s.push({id:d,type:"position",position:{x:l.position.x-f+y,y:l.position.y-m+j}}),(x=n.get(d))==null||x.forEach(C=>{e.some(S=>S.id===C.id)||s.push({id:C.id,type:"position",position:{x:C.position.x+f,y:C.position.y+m}})})),(h.width<c.width||h.height<c.height||f||m)&&s.push({id:d,type:"dimensions",setAttributes:!0,dimensions:{width:g+(f?A[0]*f-y:0),height:b+(m?A[1]*m-j:0)}})}),s}function UBe(e,t,n,r,s,i){const o=r==null?void 0:r.querySelector(".xyflow__viewport");let c=!1;if(!o)return{changes:[],updatedInternals:c};const l=[],d=window.getComputedStyle(o),{m22:u}=new window.DOMMatrixReadOnly(d.transform),h=[];for(const A of e.values()){const f=t.get(A.id);if(!f)continue;if(f.hidden){t.set(f.id,{...f,internals:{...f.internals,handleBounds:void 0}}),c=!0;continue}const m=FT(A.nodeElement),g=f.measured.width!==m.width||f.measured.height!==m.height;if(!!(m.width&&m.height&&(g||!f.internals.handleBounds||A.force))){const y=A.nodeElement.getBoundingClientRect(),j=Sv(f.extent)?f.extent:i;let{positionAbsolute:x}=f.internals;f.parentId&&f.extent==="parent"?x=UK(x,m,t.get(f.parentId)):j&&(x=em(x,j,m));const C={...f,measured:m,internals:{...f.internals,positionAbsolute:x,handleBounds:{source:gR("source",A.nodeElement,y,u,f.id),target:gR("target",A.nodeElement,y,u,f.id)}}};t.set(f.id,C),f.parentId&&LT(C,t,n,{nodeOrigin:s}),c=!0,g&&(l.push({id:f.id,type:"dimensions",dimensions:m}),f.expandParent&&f.parentId&&h.push({id:f.id,parentId:f.parentId,rect:kv(C,s)}))}}if(h.length>0){const A=MT(h,t,n,s);l.push(...A)}return{changes:l,updatedInternals:c}}async function LBe({delta:e,panZoom:t,transform:n,translateExtent:r,width:s,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const o=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[s,i]],r),c=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(c)}function jR(e,t,n,r,s,i){let o=s;const c=r.get(o)||new Map;r.set(o,c.set(n,t)),o=`${s}-${e}`;const l=r.get(o)||new Map;if(r.set(o,l.set(n,t)),i){o=`${s}-${e}-${i}`;const d=r.get(o)||new Map;r.set(o,d.set(n,t))}}function YK(e,t,n){e.clear(),t.clear();for(const r of n){const{source:s,target:i,sourceHandle:o=null,targetHandle:c=null}=r,l={edgeId:r.id,source:s,target:i,sourceHandle:o,targetHandle:c},d=`${s}-${o}--${i}-${c}`,u=`${i}-${c}--${s}-${o}`;jR("source",l,u,e,s,o),jR("target",l,d,e,i,c),t.set(r.id,r)}}function XK(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:XK(n,t):!1}function kR(e,t,n){var s;let r=e;do{if((s=r==null?void 0:r.matches)!=null&&s.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function MBe(e,t,n,r){const s=new Map;for(const[i,o]of e)if((o.selected||o.id===r)&&(!o.parentId||!XK(o,e))&&(o.draggable||t&&typeof o.draggable>"u")){const c=e.get(i);c&&s.set(i,{id:i,position:c.position||{x:0,y:0},distance:{x:n.x-c.internals.positionAbsolute.x,y:n.y-c.internals.positionAbsolute.y},extent:c.extent,parentId:c.parentId,origin:c.origin,expandParent:c.expandParent,internals:{positionAbsolute:c.internals.positionAbsolute||{x:0,y:0}},measured:{width:c.measured.width??0,height:c.measured.height??0}})}return s}function kB({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var o,c,l;const s=[];for(const[d,u]of t){const h=(o=n.get(d))==null?void 0:o.internals.userNode;h&&s.push({...h,position:u.position,dragging:r})}if(!e)return[s[0],s];const i=(c=n.get(e))==null?void 0:c.internals.userNode;return[i?{...i,position:((l=t.get(e))==null?void 0:l.position)||i.position,dragging:r}:s[0],s]}function RBe({dragItems:e,snapGrid:t,x:n,y:r}){const s=e.values().next().value;if(!s)return null;const i={x:n-s.distance.x,y:r-s.distance.y},o=Dw(i,t);return{x:o.x-i.x,y:o.y-i.y}}function OBe({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:s}){let i={x:null,y:null},o=0,c=new Map,l=!1,d={x:0,y:0},u=null,h=!1,A=null,f=!1,m=!1,g=null;function b({noDragClassName:j,handleSelector:x,domNode:C,isSelectable:S,nodeId:_,nodeClickDistance:N=0}){A=zo(C);function L({x:T,y:Q}){const{nodeLookup:D,nodeExtent:M,snapGrid:U,snapToGrid:H,nodeOrigin:$,onNodeDrag:R,onSelectionDrag:Y,onError:X,updateNodePositions:q}=t();i={x:T,y:Q};let K=!1;const J=c.size>1,W=J&&M?$_(Fw(c)):null,ne=J&&H?RBe({dragItems:c,snapGrid:U,x:T,y:Q}):null;for(const[ae,ce]of c){if(!D.has(ae))continue;let Ae={x:T-ce.distance.x,y:Q-ce.distance.y};H&&(Ae=ne?{x:Ae.x+ne.x,y:Ae.y+ne.y}:Dw(Ae,U));let pe=null;if(J&&M&&!ce.extent&&W){const{positionAbsolute:Pe}=ce.internals,xe=Pe.x-W.x+M[0][0],ue=Pe.x+ce.measured.width-W.x2+M[1][0],yt=Pe.y-W.y+M[0][1],ht=Pe.y+ce.measured.height-W.y2+M[1][1];pe=[[xe,yt],[ue,ht]]}const{position:be,positionAbsolute:Ne}=DK({nodeId:ae,nextPosition:Ae,nodeLookup:D,nodeExtent:pe||M,nodeOrigin:$,onError:X});K=K||ce.position.x!==be.x||ce.position.y!==be.y,ce.position=be,ce.internals.positionAbsolute=Ne}if(m=m||K,!!K&&(q(c,!0),g&&(r||R||!_&&Y))){const[ae,ce]=kB({nodeId:_,dragItems:c,nodeLookup:D});r==null||r(g,c,ae,ce),R==null||R(g,ae,ce),_||Y==null||Y(g,ce)}}async function P(){if(!u)return;const{transform:T,panBy:Q,autoPanSpeed:D,autoPanOnNodeDrag:M}=t();if(!M){l=!1,cancelAnimationFrame(o);return}const[U,H]=LK(d,u,D);(U!==0||H!==0)&&(i.x=(i.x??0)-U/T[2],i.y=(i.y??0)-H/T[2],await Q({x:U,y:H})&&L(i)),o=requestAnimationFrame(P)}function F(T){var J;const{nodeLookup:Q,multiSelectionActive:D,nodesDraggable:M,transform:U,snapGrid:H,snapToGrid:$,selectNodesOnDrag:R,onNodeDragStart:Y,onSelectionDragStart:X,unselectNodesAndEdges:q}=t();h=!0,(!R||!S)&&!D&&_&&((J=Q.get(_))!=null&&J.selected||q()),S&&R&&_&&(e==null||e(_));const K=V0(T.sourceEvent,{transform:U,snapGrid:H,snapToGrid:$,containerBounds:u});if(i=K,c=MBe(Q,M,K,_),c.size>0&&(n||Y||!_&&X)){const[W,ne]=kB({nodeId:_,dragItems:c,nodeLookup:Q});n==null||n(T.sourceEvent,c,W,ne),Y==null||Y(T.sourceEvent,W,ne),_||X==null||X(T.sourceEvent,ne)}}const I=fK().clickDistance(N).on("start",T=>{const{domNode:Q,nodeDragThreshold:D,transform:M,snapGrid:U,snapToGrid:H}=t();u=(Q==null?void 0:Q.getBoundingClientRect())||null,f=!1,m=!1,g=T.sourceEvent,D===0&&F(T),i=V0(T.sourceEvent,{transform:M,snapGrid:U,snapToGrid:H,containerBounds:u}),d=Bd(T.sourceEvent,u)}).on("drag",T=>{const{autoPanOnNodeDrag:Q,transform:D,snapGrid:M,snapToGrid:U,nodeDragThreshold:H,nodeLookup:$}=t(),R=V0(T.sourceEvent,{transform:D,snapGrid:M,snapToGrid:U,containerBounds:u});if(g=T.sourceEvent,(T.sourceEvent.type==="touchmove"&&T.sourceEvent.touches.length>1||_&&!$.has(_))&&(f=!0),!f){if(!l&&Q&&h&&(l=!0,P()),!h){const Y=R.xSnapped-(i.x??0),X=R.ySnapped-(i.y??0);Math.sqrt(Y*Y+X*X)>H&&F(T)}(i.x!==R.xSnapped||i.y!==R.ySnapped)&&c&&h&&(d=Bd(T.sourceEvent,u),L(R))}}).on("end",T=>{if(!(!h||f)&&(l=!1,h=!1,cancelAnimationFrame(o),c.size>0)){const{nodeLookup:Q,updateNodePositions:D,onNodeDragStop:M,onSelectionDragStop:U}=t();if(m&&(D(c,!1),m=!1),s||M||!_&&U){const[H,$]=kB({nodeId:_,dragItems:c,nodeLookup:Q,dragging:!1});s==null||s(T.sourceEvent,c,H,$),M==null||M(T.sourceEvent,H,$),_||U==null||U(T.sourceEvent,$)}}}).filter(T=>{const Q=T.target;return!T.button&&(!j||!kR(Q,`.${j}`,C))&&(!x||kR(Q,x,C))});A.call(I)}function y(){A==null||A.on(".drag",null)}return{update:b,destroy:y}}function QBe(e,t,n){const r=[],s={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const i of t.values())$x(s,kv(i))>0&&r.push(i);return r}const HBe=250;function $Be(e,t,n,r){var c,l;let s=[],i=1/0;const o=QBe(e,n,t+HBe);for(const d of o){const u=[...((c=d.internals.handleBounds)==null?void 0:c.source)??[],...((l=d.internals.handleBounds)==null?void 0:l.target)??[]];for(const h of u){if(r.nodeId===h.nodeId&&r.type===h.type&&r.id===h.id)continue;const{x:A,y:f}=Vx(d,h,h.position,!0),m=Math.sqrt(Math.pow(A-e.x,2)+Math.pow(f-e.y,2));m>t||(m<i?(s=[{...h,x:A,y:f}],i=m):m===i&&s.push({...h,x:A,y:f}))}}if(!s.length)return null;if(s.length>1){const d=r.type==="source"?"target":"source";return s.find(u=>u.type===d)??s[0]}return s[0]}function JK(e,t,n,r,s,i=!1){var d,u,h;const o=r.get(e);if(!o)return null;const c=s==="strict"?(d=o.internals.handleBounds)==null?void 0:d[t]:[...((u=o.internals.handleBounds)==null?void 0:u.source)??[],...((h=o.internals.handleBounds)==null?void 0:h.target)??[]],l=(n?c==null?void 0:c.find(A=>A.id===n):c==null?void 0:c[0])??null;return l&&i?{...l,...Vx(o,l,l.position,!0)}:l}function ZK(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function zBe(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const eW=()=>!0;function VBe(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:s,edgeUpdaterType:i,isTarget:o,domNode:c,nodeLookup:l,lib:d,autoPanOnConnect:u,flowId:h,panBy:A,cancelConnection:f,onConnectStart:m,onConnect:g,onConnectEnd:b,isValidConnection:y=eW,onReconnectEnd:j,updateConnection:x,getTransform:C,getFromHandle:S,autoPanSpeed:_,dragThreshold:N=1,handleDomNode:L}){const P=QK(e.target);let F=0,I;const{x:T,y:Q}=Bd(e),D=ZK(i,L),M=c==null?void 0:c.getBoundingClientRect();let U=!1;if(!M||!D)return;const H=JK(s,D,r,l,t);if(!H)return;let $=Bd(e,M),R=!1,Y=null,X=!1,q=null;function K(){if(!u||!M)return;const[be,Ne]=LK($,M,_);A({x:be,y:Ne}),F=requestAnimationFrame(K)}const J={...H,nodeId:s,type:D,position:H.position},W=l.get(s);let ae={inProgress:!0,isValid:null,from:Vx(W,J,Yt.Left,!0),fromHandle:J,fromPosition:J.position,fromNode:W,to:$,toHandle:null,toPosition:AR[J.position],toNode:null};function ce(){U=!0,x(ae),m==null||m(e,{nodeId:s,handleId:r,handleType:D})}N===0&&ce();function Ae(be){if(!U){const{x:ue,y:yt}=Bd(be),ht=ue-T,Ct=yt-Q;if(!(ht*ht+Ct*Ct>N*N))return;ce()}if(!S()||!J){pe(be);return}const Ne=C();$=Bd(be,M),I=$Be(Uw($,Ne,!1,[1,1]),n,l,J),R||(K(),R=!0);const Pe=tW(be,{handle:I,connectionMode:t,fromNodeId:s,fromHandleId:r,fromType:o?"target":"source",isValidConnection:y,doc:P,lib:d,flowId:h,nodeLookup:l});q=Pe.handleDomNode,Y=Pe.connection,X=zBe(!!I,Pe.isValid);const xe={...ae,isValid:X,to:Pe.toHandle&&X?nj({x:Pe.toHandle.x,y:Pe.toHandle.y},Ne):$,toHandle:Pe.toHandle,toPosition:X&&Pe.toHandle?Pe.toHandle.position:AR[J.position],toNode:Pe.toHandle?l.get(Pe.toHandle.nodeId):null};X&&I&&ae.toHandle&&xe.toHandle&&ae.toHandle.type===xe.toHandle.type&&ae.toHandle.nodeId===xe.toHandle.nodeId&&ae.toHandle.id===xe.toHandle.id&&ae.to.x===xe.to.x&&ae.to.y===xe.to.y||(x(xe),ae=xe)}function pe(be){if(U){(I||q)&&Y&&X&&(g==null||g(Y));const{inProgress:Ne,...Pe}=ae,xe={...Pe,toPosition:ae.toHandle?ae.toPosition:null};b==null||b(be,xe),i&&(j==null||j(be,xe))}f(),cancelAnimationFrame(F),R=!1,X=!1,Y=null,q=null,P.removeEventListener("mousemove",Ae),P.removeEventListener("mouseup",pe),P.removeEventListener("touchmove",Ae),P.removeEventListener("touchend",pe)}P.addEventListener("mousemove",Ae),P.addEventListener("mouseup",pe),P.addEventListener("touchmove",Ae),P.addEventListener("touchend",pe)}function tW(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:s,fromType:i,doc:o,lib:c,flowId:l,isValidConnection:d=eW,nodeLookup:u}){const h=i==="target",A=t?o.querySelector(`.${c}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:f,y:m}=Bd(e),g=o.elementFromPoint(f,m),b=g!=null&&g.classList.contains(`${c}-flow__handle`)?g:A,y={handleDomNode:b,isValid:!1,connection:null,toHandle:null};if(b){const j=ZK(void 0,b),x=b.getAttribute("data-nodeid"),C=b.getAttribute("data-handleid"),S=b.classList.contains("connectable"),_=b.classList.contains("connectableend");if(!x||!j)return y;const N={source:h?x:r,sourceHandle:h?C:s,target:h?r:x,targetHandle:h?s:C};y.connection=N;const P=S&&_&&(n===Jp.Strict?h&&j==="source"||!h&&j==="target":x!==r||C!==s);y.isValid=P&&d(N),y.toHandle=JK(x,j,C,u,n,!0)}return y}const K_={onPointerDown:VBe,isValid:tW};function qBe({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const s=zo(e);function i({translateExtent:c,width:l,height:d,zoomStep:u=1,pannable:h=!0,zoomable:A=!0,inversePan:f=!1}){const m=x=>{if(x.sourceEvent.type!=="wheel"||!t)return;const C=n(),S=x.sourceEvent.ctrlKey&&zx()?10:1,_=-x.sourceEvent.deltaY*(x.sourceEvent.deltaMode===1?.05:x.sourceEvent.deltaMode?1:.002)*u,N=C[2]*Math.pow(2,_*S);t.scaleTo(N)};let g=[0,0];const b=x=>{(x.sourceEvent.type==="mousedown"||x.sourceEvent.type==="touchstart")&&(g=[x.sourceEvent.clientX??x.sourceEvent.touches[0].clientX,x.sourceEvent.clientY??x.sourceEvent.touches[0].clientY])},y=x=>{const C=n();if(x.sourceEvent.type!=="mousemove"&&x.sourceEvent.type!=="touchmove"||!t)return;const S=[x.sourceEvent.clientX??x.sourceEvent.touches[0].clientX,x.sourceEvent.clientY??x.sourceEvent.touches[0].clientY],_=[S[0]-g[0],S[1]-g[1]];g=S;const N=r()*Math.max(C[2],Math.log(C[2]))*(f?-1:1),L={x:C[0]-_[0]*N,y:C[1]-_[1]*N},P=[[0,0],[l,d]];t.setViewportConstrained({x:L.x,y:L.y,zoom:C[2]},P,c)},j=EK().on("start",b).on("zoom",h?y:null).on("zoom.wheel",A?m:null);s.call(j,{})}function o(){s.on("zoom",null)}return{update:i,destroy:o,pointer:ml}}const KBe=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Fk=e=>({x:e.x,y:e.y,zoom:e.k}),SB=({x:e,y:t,zoom:n})=>Ik.translate(e,t).scale(n),Eg=(e,t)=>e.target.closest(`.${t}`),nW=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),WBe=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,NB=(e,t=0,n=WBe,r=()=>{})=>{const s=typeof t=="number"&&t>0;return s||r(),s?e.transition().duration(t).ease(n).on("end",r):e},rW=e=>{const t=e.ctrlKey&&zx()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function GBe({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:s,panOnScrollSpeed:i,zoomOnPinch:o,onPanZoomStart:c,onPanZoom:l,onPanZoomEnd:d}){return u=>{if(Eg(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(u.ctrlKey&&o){const b=ml(u),y=rW(u),j=h*Math.pow(2,y);r.scaleTo(n,j,b,u);return}const A=u.deltaMode===1?20:1;let f=s===Dp.Vertical?0:u.deltaX*A,m=s===Dp.Horizontal?0:u.deltaY*A;!zx()&&u.shiftKey&&s!==Dp.Vertical&&(f=u.deltaY*A,m=0),r.translateBy(n,-(f/h)*i,-(m/h)*i,{internal:!0});const g=Fk(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,c==null||c(u,g)),e.isPanScrolling&&(l==null||l(u,g),e.panScrollTimeout=setTimeout(()=>{d==null||d(u,g),e.isPanScrolling=!1},150))}}function YBe({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,s){const i=r.type==="wheel",o=!t&&i&&!r.ctrlKey,c=Eg(r,e);if(r.ctrlKey&&i&&c&&r.preventDefault(),o||c)return null;r.preventDefault(),n.call(this,r,s)}}function XBe({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var i,o,c;if((i=r.sourceEvent)!=null&&i.internal)return;const s=Fk(r.transform);e.mouseButton=((o=r.sourceEvent)==null?void 0:o.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=s,((c=r.sourceEvent)==null?void 0:c.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,s))}}function JBe({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:s}){return i=>{var o,c;e.usedRightMouseButton=!!(n&&nW(t,e.mouseButton??0)),(o=i.sourceEvent)!=null&&o.sync||r([i.transform.x,i.transform.y,i.transform.k]),s&&!((c=i.sourceEvent)!=null&&c.internal)&&(s==null||s(i.sourceEvent,Fk(i.transform)))}}function ZBe({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:s,onPaneContextMenu:i}){return o=>{var c;if(!((c=o.sourceEvent)!=null&&c.internal)&&(e.isZoomingOrPanning=!1,i&&nW(t,e.mouseButton??0)&&!e.usedRightMouseButton&&o.sourceEvent&&i(o.sourceEvent),e.usedRightMouseButton=!1,r(!1),s&&KBe(e.prevViewport,o.transform))){const l=Fk(o.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{s==null||s(o.sourceEvent,l)},n?150:0)}}}function eEe({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:s,zoomOnDoubleClick:i,userSelectionActive:o,noWheelClassName:c,noPanClassName:l,lib:d}){return u=>{var m;const h=e||t,A=n&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(Eg(u,`${d}-flow__node`)||Eg(u,`${d}-flow__edge`)))return!0;if(!r&&!h&&!s&&!i&&!n||o||Eg(u,c)&&u.type==="wheel"||Eg(u,l)&&(u.type!=="wheel"||s&&u.type==="wheel"&&!e)||!n&&u.ctrlKey&&u.type==="wheel")return!1;if(!n&&u.type==="touchstart"&&((m=u.touches)==null?void 0:m.length)>1)return u.preventDefault(),!1;if(!h&&!s&&!A&&u.type==="wheel"||!r&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(r)&&!r.includes(u.button)&&u.type==="mousedown")return!1;const f=Array.isArray(r)&&r.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&f}}function tEe({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:s,viewport:i,onPanZoom:o,onPanZoomStart:c,onPanZoomEnd:l,onDraggingChange:d}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=e.getBoundingClientRect(),A=EK().clickDistance(!xl(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(s),f=zo(e).call(A);x({x:i.x,y:i.y,zoom:jv(i.zoom,t,n)},[[0,0],[h.width,h.height]],s);const m=f.on("wheel.zoom"),g=f.on("dblclick.zoom");A.wheelDelta(rW);function b(T,Q){return f?new Promise(D=>{A==null||A.interpolate((Q==null?void 0:Q.interpolate)==="linear"?z0:F2).transform(NB(f,Q==null?void 0:Q.duration,Q==null?void 0:Q.ease,()=>D(!0)),T)}):Promise.resolve(!1)}function y({noWheelClassName:T,noPanClassName:Q,onPaneContextMenu:D,userSelectionActive:M,panOnScroll:U,panOnDrag:H,panOnScrollMode:$,panOnScrollSpeed:R,preventScrolling:Y,zoomOnPinch:X,zoomOnScroll:q,zoomOnDoubleClick:K,zoomActivationKeyPressed:J,lib:W,onTransformChange:ne}){M&&!u.isZoomingOrPanning&&j();const ce=U&&!J&&!M?GBe({zoomPanValues:u,noWheelClassName:T,d3Selection:f,d3Zoom:A,panOnScrollMode:$,panOnScrollSpeed:R,zoomOnPinch:X,onPanZoomStart:c,onPanZoom:o,onPanZoomEnd:l}):YBe({noWheelClassName:T,preventScrolling:Y,d3ZoomHandler:m});if(f.on("wheel.zoom",ce,{passive:!1}),!M){const pe=XBe({zoomPanValues:u,onDraggingChange:d,onPanZoomStart:c});A.on("start",pe);const be=JBe({zoomPanValues:u,panOnDrag:H,onPaneContextMenu:!!D,onPanZoom:o,onTransformChange:ne});A.on("zoom",be);const Ne=ZBe({zoomPanValues:u,panOnDrag:H,panOnScroll:U,onPaneContextMenu:D,onPanZoomEnd:l,onDraggingChange:d});A.on("end",Ne)}const Ae=eEe({zoomActivationKeyPressed:J,panOnDrag:H,zoomOnScroll:q,panOnScroll:U,zoomOnDoubleClick:K,zoomOnPinch:X,userSelectionActive:M,noPanClassName:Q,noWheelClassName:T,lib:W});A.filter(Ae),K?f.on("dblclick.zoom",g):f.on("dblclick.zoom",null)}function j(){A.on("zoom",null)}async function x(T,Q,D){const M=SB(T),U=A==null?void 0:A.constrain()(M,Q,D);return U&&await b(U),new Promise(H=>H(U))}async function C(T,Q){const D=SB(T);return await b(D,Q),new Promise(M=>M(D))}function S(T){if(f){const Q=SB(T),D=f.property("__zoom");(D.k!==T.zoom||D.x!==T.x||D.y!==T.y)&&(A==null||A.transform(f,Q,null,{sync:!0}))}}function _(){const T=f?BK(f.node()):{x:0,y:0,k:1};return{x:T.x,y:T.y,zoom:T.k}}function N(T,Q){return f?new Promise(D=>{A==null||A.interpolate((Q==null?void 0:Q.interpolate)==="linear"?z0:F2).scaleTo(NB(f,Q==null?void 0:Q.duration,Q==null?void 0:Q.ease,()=>D(!0)),T)}):Promise.resolve(!1)}function L(T,Q){return f?new Promise(D=>{A==null||A.interpolate((Q==null?void 0:Q.interpolate)==="linear"?z0:F2).scaleBy(NB(f,Q==null?void 0:Q.duration,Q==null?void 0:Q.ease,()=>D(!0)),T)}):Promise.resolve(!1)}function P(T){A==null||A.scaleExtent(T)}function F(T){A==null||A.translateExtent(T)}function I(T){const Q=!xl(T)||T<0?0:T;A==null||A.clickDistance(Q)}return{update:y,destroy:j,setViewport:C,setViewportConstrained:x,getViewport:_,scaleTo:N,scaleBy:L,setScaleExtent:P,setTranslateExtent:F,syncViewport:S,setClickDistance:I}}var tm;(function(e){e.Line="line",e.Handle="handle"})(tm||(tm={}));const nEe=["top-left","top-right","bottom-left","bottom-right"],rEe=["top","right","bottom","left"];function sEe({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:s,affectsY:i}){const o=e-t,c=n-r,l=[o>0?1:o<0?-1:0,c>0?1:c<0?-1:0];return o&&s&&(l[0]=l[0]*-1),c&&i&&(l[1]=l[1]*-1),l}function iEe(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),s=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:s}}function Xh(e,t){return Math.max(0,t-e)}function Jh(e,t){return Math.max(0,e-t)}function w1(e,t,n){return Math.max(0,t-e,e-n)}function SR(e,t){return e?!t:t}function aEe(e,t,n,r,s,i,o,c){let{affectsX:l,affectsY:d}=t;const{isHorizontal:u,isVertical:h}=t,A=u&&h,{xSnapped:f,ySnapped:m}=n,{minWidth:g,maxWidth:b,minHeight:y,maxHeight:j}=r,{x,y:C,width:S,height:_,aspectRatio:N}=e;let L=Math.floor(u?f-e.pointerX:0),P=Math.floor(h?m-e.pointerY:0);const F=S+(l?-L:L),I=_+(d?-P:P),T=-i[0]*S,Q=-i[1]*_;let D=w1(F,g,b),M=w1(I,y,j);if(o){let $=0,R=0;l&&L<0?$=Xh(x+L+T,o[0][0]):!l&&L>0&&($=Jh(x+F+T,o[1][0])),d&&P<0?R=Xh(C+P+Q,o[0][1]):!d&&P>0&&(R=Jh(C+I+Q,o[1][1])),D=Math.max(D,$),M=Math.max(M,R)}if(c){let $=0,R=0;l&&L>0?$=Jh(x+L,c[0][0]):!l&&L<0&&($=Xh(x+F,c[1][0])),d&&P>0?R=Jh(C+P,c[0][1]):!d&&P<0&&(R=Xh(C+I,c[1][1])),D=Math.max(D,$),M=Math.max(M,R)}if(s){if(u){const $=w1(F/N,y,j)*N;if(D=Math.max(D,$),o){let R=0;!l&&!d||l&&!d&&A?R=Jh(C+Q+F/N,o[1][1])*N:R=Xh(C+Q+(l?L:-L)/N,o[0][1])*N,D=Math.max(D,R)}if(c){let R=0;!l&&!d||l&&!d&&A?R=Xh(C+F/N,c[1][1])*N:R=Jh(C+(l?L:-L)/N,c[0][1])*N,D=Math.max(D,R)}}if(h){const $=w1(I*N,g,b)/N;if(M=Math.max(M,$),o){let R=0;!l&&!d||d&&!l&&A?R=Jh(x+I*N+T,o[1][0])/N:R=Xh(x+(d?P:-P)*N+T,o[0][0])/N,M=Math.max(M,R)}if(c){let R=0;!l&&!d||d&&!l&&A?R=Xh(x+I*N,c[1][0])/N:R=Jh(x+(d?P:-P)*N,c[0][0])/N,M=Math.max(M,R)}}}P=P+(P<0?M:-M),L=L+(L<0?D:-D),s&&(A?F>I*N?P=(SR(l,d)?-L:L)/N:L=(SR(l,d)?-P:P)*N:u?(P=L/N,d=l):(L=P*N,l=d));const U=l?x+L:x,H=d?C+P:C;return{width:S+(l?-L:L),height:_+(d?-P:P),x:i[0]*L*(l?-1:1)+U,y:i[1]*P*(d?-1:1)+H}}const sW={width:0,height:0,x:0,y:0},oEe={...sW,pointerX:0,pointerY:0,aspectRatio:1};function cEe(e){return[[0,0],[e.measured.width,e.measured.height]]}function lEe(e,t,n){const r=t.position.x+e.position.x,s=t.position.y+e.position.y,i=e.measured.width??0,o=e.measured.height??0,c=n[0]*i,l=n[1]*o;return[[r-c,s-l],[r+i-c,s+o-l]]}function dEe({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:s}){const i=zo(e);function o({controlPosition:l,boundaries:d,keepAspectRatio:u,resizeDirection:h,onResizeStart:A,onResize:f,onResizeEnd:m,shouldResize:g}){let b={...sW},y={...oEe};const j=iEe(l);let x,C=null,S=[],_,N,L;const P=fK().on("start",F=>{const{nodeLookup:I,transform:T,snapGrid:Q,snapToGrid:D,nodeOrigin:M,paneDomNode:U}=n();if(x=I.get(t),!x)return;C=(U==null?void 0:U.getBoundingClientRect())??null;const{xSnapped:H,ySnapped:$}=V0(F.sourceEvent,{transform:T,snapGrid:Q,snapToGrid:D,containerBounds:C});b={width:x.measured.width??0,height:x.measured.height??0,x:x.position.x??0,y:x.position.y??0},y={...b,pointerX:H,pointerY:$,aspectRatio:b.width/b.height},_=void 0,x.parentId&&(x.extent==="parent"||x.expandParent)&&(_=I.get(x.parentId),N=_&&x.extent==="parent"?cEe(_):void 0),S=[],L=void 0;for(const[R,Y]of I)if(Y.parentId===t&&(S.push({id:R,position:{...Y.position},extent:Y.extent}),Y.extent==="parent"||Y.expandParent)){const X=lEe(Y,x,Y.origin??M);L?L=[[Math.min(X[0][0],L[0][0]),Math.min(X[0][1],L[0][1])],[Math.max(X[1][0],L[1][0]),Math.max(X[1][1],L[1][1])]]:L=X}A==null||A(F,{...b})}).on("drag",F=>{const{transform:I,snapGrid:T,snapToGrid:Q,nodeOrigin:D}=n(),M=V0(F.sourceEvent,{transform:I,snapGrid:T,snapToGrid:Q,containerBounds:C}),U=[];if(!x)return;const{x:H,y:$,width:R,height:Y}=b,X={},q=x.origin??D,{width:K,height:J,x:W,y:ne}=aEe(y,j,M,d,u,q,N,L),ae=K!==R,ce=J!==Y,Ae=W!==H&&ae,pe=ne!==$&&ce;if(!Ae&&!pe&&!ae&&!ce)return;if((Ae||pe||q[0]===1||q[1]===1)&&(X.x=Ae?W:b.x,X.y=pe?ne:b.y,b.x=X.x,b.y=X.y,S.length>0)){const xe=W-H,ue=ne-$;for(const yt of S)yt.position={x:yt.position.x-xe+q[0]*(K-R),y:yt.position.y-ue+q[1]*(J-Y)},U.push(yt)}if((ae||ce)&&(X.width=ae&&(!h||h==="horizontal")?K:b.width,X.height=ce&&(!h||h==="vertical")?J:b.height,b.width=X.width,b.height=X.height),_&&x.expandParent){const xe=q[0]*(X.width??0);X.x&&X.x<xe&&(b.x=xe,y.x=y.x-(X.x-xe));const ue=q[1]*(X.height??0);X.y&&X.y<ue&&(b.y=ue,y.y=y.y-(X.y-ue))}const be=sEe({width:b.width,prevWidth:R,height:b.height,prevHeight:Y,affectsX:j.affectsX,affectsY:j.affectsY}),Ne={...b,direction:be};(g==null?void 0:g(F,Ne))!==!1&&(f==null||f(F,Ne),r(X,U))}).on("end",F=>{m==null||m(F,{...b}),s==null||s({...b})});i.call(P)}function c(){i.on(".drag",null)}return{update:o,destroy:c}}var iW={exports:{}},aW={},oW={exports:{}},cW={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nv=w;function uEe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var hEe=typeof Object.is=="function"?Object.is:uEe,AEe=Nv.useState,fEe=Nv.useEffect,pEe=Nv.useLayoutEffect,mEe=Nv.useDebugValue;function gEe(e,t){var n=t(),r=AEe({inst:{value:n,getSnapshot:t}}),s=r[0].inst,i=r[1];return pEe(function(){s.value=n,s.getSnapshot=t,BB(s)&&i({inst:s})},[e,n,t]),fEe(function(){return BB(s)&&i({inst:s}),e(function(){BB(s)&&i({inst:s})})},[e]),mEe(n),n}function BB(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!hEe(e,n)}catch{return!0}}function vEe(e,t){return t()}var yEe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?vEe:gEe;cW.useSyncExternalStore=Nv.useSyncExternalStore!==void 0?Nv.useSyncExternalStore:yEe;oW.exports=cW;var lW=oW.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dk=w,xEe=lW;function wEe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bEe=typeof Object.is=="function"?Object.is:wEe,CEe=xEe.useSyncExternalStore,jEe=Dk.useRef,kEe=Dk.useEffect,SEe=Dk.useMemo,NEe=Dk.useDebugValue;aW.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var i=jEe(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=SEe(function(){function l(f){if(!d){if(d=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var m=o.value;if(s(m,f))return h=m}return h=f}if(m=h,bEe(u,f))return m;var g=r(f);return s!==void 0&&s(m,g)?(u=f,m):(u=f,h=g)}var d=!1,u,h,A=n===void 0?null:n;return[function(){return l(t())},A===null?void 0:function(){return l(A())}]},[t,n,r,s]);var c=CEe(e,i[0],i[1]);return kEe(function(){o.hasValue=!0,o.value=c},[c]),NEe(c),c};iW.exports=aW;var BEe=iW.exports;const EEe=Tj(BEe),_Ee={BASE_URL:"/framepromptly-v4/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_URL:"http://localhost:8080",VITE_MIRO_ACCESS_TOKEN:"",VITE_MIRO_CLIENT_ID:"",VITE_MIRO_CLIENT_SECRET:"",VITE_OAUTH_ENCRYPTION_KEY:"development-key-change-in-production",VITE_SUPABASE_ANON_KEY:"your_supabase_anon_key",VITE_SUPABASE_PROJECT_ID:"drfaomantrtmtydbelxe",VITE_SUPABASE_PUBLISHABLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRyZmFvbWFudHJ0bXR5ZGJlbHhlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1NTczNTAsImV4cCI6MjA3MTEzMzM1MH0.6oQtHv6OcLkdHvmBPkTnTHEIuF0_GudFxhebVg9atq0",VITE_SUPABASE_URL:"your_supabase_url"},NR=e=>{let t;const n=new Set,r=(u,h)=>{const A=typeof u=="function"?u(t):u;if(!Object.is(A,t)){const f=t;t=h??(typeof A!="object"||A===null)?A:Object.assign({},t,A),n.forEach(m=>m(t,f))}},s=()=>t,l={setState:r,getState:s,getInitialState:()=>d,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(_Ee?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(r,s,l);return l},IEe=e=>e?NR(e):NR,{useDebugValue:PEe}=nt,{useSyncExternalStoreWithSelector:TEe}=EEe,FEe=e=>e;function dW(e,t=FEe,n){const r=TEe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return PEe(r),r}const BR=(e,t)=>{const n=IEe(e),r=(s,i=t)=>dW(n,s,i);return Object.assign(r,n),r},DEe=(e,t)=>e?BR(e,t):BR;function bs(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const Uk=w.createContext(null),UEe=Uk.Provider,uW=$d.error001();function sr(e,t){const n=w.useContext(Uk);if(n===null)throw new Error(uW);return dW(n,e,t)}function hs(){const e=w.useContext(Uk);if(e===null)throw new Error(uW);return w.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const ER={display:"none"},LEe={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},hW="react-flow__node-desc",AW="react-flow__edge-desc",MEe="react-flow__aria-live",REe=e=>e.ariaLiveMessage,OEe=e=>e.ariaLabelConfig;function QEe({rfId:e}){const t=sr(REe);return a.jsx("div",{id:`${MEe}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:LEe,children:t})}function HEe({rfId:e,disableKeyboardA11y:t}){const n=sr(OEe);return a.jsxs(a.Fragment,{children:[a.jsx("div",{id:`${hW}-${e}`,style:ER,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),a.jsx("div",{id:`${AW}-${e}`,style:ER,children:n["edge.a11yDescription.default"]}),!t&&a.jsx(QEe,{rfId:e})]})}const Lk=w.forwardRef(({position:e="top-left",children:t,className:n,style:r,...s},i)=>{const o=`${e}`.split("-");return a.jsx("div",{className:ai(["react-flow__panel",n,...o]),style:r,ref:i,...s,children:t})});Lk.displayName="Panel";function $Ee({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:a.jsx(Lk,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:a.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const zEe=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},b1=e=>e.id;function VEe(e,t){return bs(e.selectedNodes.map(b1),t.selectedNodes.map(b1))&&bs(e.selectedEdges.map(b1),t.selectedEdges.map(b1))}function qEe({onSelectionChange:e}){const t=hs(),{selectedNodes:n,selectedEdges:r}=sr(zEe,VEe);return w.useEffect(()=>{const s={nodes:n,edges:r};e==null||e(s),t.getState().onSelectionChangeHandlers.forEach(i=>i(s))},[n,r,e]),null}const KEe=e=>!!e.onSelectionChangeHandlers;function WEe({onSelectionChange:e}){const t=sr(KEe);return e||t?a.jsx(qEe,{onSelectionChange:e}):null}const fW=[0,0],GEe={x:0,y:0,zoom:1},YEe=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig"],_R=[...YEe,"rfId"],XEe=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),IR={translateExtent:Hx,nodeOrigin:fW,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function JEe(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:s,setTranslateExtent:i,setNodeExtent:o,reset:c,setDefaultNodesAndEdges:l,setPaneClickDistance:d}=sr(XEe,bs),u=hs();w.useEffect(()=>(l(e.defaultNodes,e.defaultEdges),()=>{h.current=IR,c()}),[]);const h=w.useRef(IR);return w.useEffect(()=>{for(const A of _R){const f=e[A],m=h.current[A];f!==m&&(typeof e[A]>"u"||(A==="nodes"?t(f):A==="edges"?n(f):A==="minZoom"?r(f):A==="maxZoom"?s(f):A==="translateExtent"?i(f):A==="nodeExtent"?o(f):A==="paneClickDistance"?d(f):A==="ariaLabelConfig"?u.setState({ariaLabelConfig:wBe(f)}):A==="fitView"?u.setState({fitViewQueued:f}):A==="fitViewOptions"?u.setState({fitViewOptions:f}):u.setState({[A]:f})))}h.current=e},_R.map(A=>e[A])),null}function PR(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function ZEe(e){var r;const[t,n]=w.useState(e==="system"?null:e);return w.useEffect(()=>{if(e!=="system"){n(e);return}const s=PR(),i=()=>n(s!=null&&s.matches?"dark":"light");return i(),s==null||s.addEventListener("change",i),()=>{s==null||s.removeEventListener("change",i)}},[e]),t!==null?t:(r=PR())!=null&&r.matches?"dark":"light"}const TR=typeof document<"u"?document:null;function qx(e=null,t={target:TR,actInsideInputWithModifier:!0}){const[n,r]=w.useState(!1),s=w.useRef(!1),i=w.useRef(new Set([])),[o,c]=w.useMemo(()=>{if(e!==null){const d=(Array.isArray(e)?e:[e]).filter(h=>typeof h=="string").map(h=>h.replace("+",`
`).replace(`

`,`
+`).split(`
`)),u=d.reduce((h,A)=>h.concat(...A),[]);return[d,u]}return[[],[]]},[e]);return w.useEffect(()=>{const l=(t==null?void 0:t.target)??TR,d=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(e!==null){const u=f=>{var b,y;if(s.current=f.ctrlKey||f.metaKey||f.shiftKey||f.altKey,(!s.current||s.current&&!d)&&HK(f))return!1;const g=DR(f.code,c);if(i.current.add(f[g]),FR(o,i.current,!1)){const j=((y=(b=f.composedPath)==null?void 0:b.call(f))==null?void 0:y[0])||f.target,x=(j==null?void 0:j.nodeName)==="BUTTON"||(j==null?void 0:j.nodeName)==="A";t.preventDefault!==!1&&(s.current||!x)&&f.preventDefault(),r(!0)}},h=f=>{const m=DR(f.code,c);FR(o,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(f[m]),f.key==="Meta"&&i.current.clear(),s.current=!1},A=()=>{i.current.clear(),r(!1)};return l==null||l.addEventListener("keydown",u),l==null||l.addEventListener("keyup",h),window.addEventListener("blur",A),window.addEventListener("contextmenu",A),()=>{l==null||l.removeEventListener("keydown",u),l==null||l.removeEventListener("keyup",h),window.removeEventListener("blur",A),window.removeEventListener("contextmenu",A)}}},[e,r]),n}function FR(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(s=>t.has(s)))}function DR(e,t){return t.includes(e)?"code":"key"}const e5e=()=>{const e=hs();return w.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,s,i],panZoom:o}=e.getState();return o?(await o.setViewport({x:t.x??r,y:t.y??s,zoom:t.zoom??i},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:s,minZoom:i,maxZoom:o,panZoom:c}=e.getState(),l=TT(t,r,s,i,o,(n==null?void 0:n.padding)??.1);return c?(await c.setViewport(l,{duration:n==null?void 0:n.duration,ease:n==null?void 0:n.ease,interpolate:n==null?void 0:n.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:s,snapToGrid:i,domNode:o}=e.getState();if(!o)return t;const{x:c,y:l}=o.getBoundingClientRect(),d={x:t.x-c,y:t.y-l},u=n.snapGrid??s,h=n.snapToGrid??i;return Uw(d,r,h,u)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:s,y:i}=r.getBoundingClientRect(),o=nj(t,n);return{x:o.x+s,y:o.y+i}}}),[])};function pW(e,t){const n=[],r=new Map,s=[];for(const i of e)if(i.type==="add"){s.push(i);continue}else if(i.type==="remove"||i.type==="replace")r.set(i.id,[i]);else{const o=r.get(i.id);o?o.push(i):r.set(i.id,[i])}for(const i of t){const o=r.get(i.id);if(!o){n.push(i);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const c={...i};for(const l of o)t5e(l,c);n.push(c)}return s.length&&s.forEach(i=>{i.index!==void 0?n.splice(i.index,0,{...i.item}):n.push({...i.item})}),n}function t5e(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function mW(e,t){return pW(e,t)}function gW(e,t){return pW(e,t)}function np(e,t){return{id:e,type:"select",selected:t}}function _g(e,t=new Set,n=!1){const r=[];for(const[s,i]of e){const o=t.has(s);!(i.selected===void 0&&!o)&&i.selected!==o&&(n&&(i.selected=o),r.push(np(i.id,o)))}return r}function UR({items:e=[],lookup:t}){var s;const n=[],r=new Map(e.map(i=>[i.id,i]));for(const[i,o]of e.entries()){const c=t.get(o.id),l=((s=c==null?void 0:c.internals)==null?void 0:s.userNode)??c;l!==void 0&&l!==o&&n.push({id:o.id,item:o,type:"replace"}),l===void 0&&n.push({item:o,type:"add",index:i})}for(const[i]of t)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function LR(e){return{id:e.id,type:"remove"}}const MR=e=>uBe(e),n5e=e=>FK(e);function vW(e){return w.forwardRef(e)}const r5e=typeof window<"u"?w.useLayoutEffect:w.useEffect;function RR(e){const[t,n]=w.useState(BigInt(0)),[r]=w.useState(()=>s5e(()=>n(s=>s+BigInt(1))));return r5e(()=>{const s=r.get();s.length&&(e(s),r.reset())},[t]),r}function s5e(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const yW=w.createContext(null);function i5e({children:e}){const t=hs(),n=w.useCallback(c=>{const{nodes:l=[],setNodes:d,hasDefaultNodes:u,onNodesChange:h,nodeLookup:A,fitViewQueued:f}=t.getState();let m=l;for(const b of c)m=typeof b=="function"?b(m):b;const g=UR({items:m,lookup:A});u&&d(m),g.length>0?h==null||h(g):f&&window.requestAnimationFrame(()=>{const{fitViewQueued:b,nodes:y,setNodes:j}=t.getState();b&&j(y)})},[]),r=RR(n),s=w.useCallback(c=>{const{edges:l=[],setEdges:d,hasDefaultEdges:u,onEdgesChange:h,edgeLookup:A}=t.getState();let f=l;for(const m of c)f=typeof m=="function"?m(f):m;u?d(f):h&&h(UR({items:f,lookup:A}))},[]),i=RR(s),o=w.useMemo(()=>({nodeQueue:r,edgeQueue:i}),[]);return a.jsx(yW.Provider,{value:o,children:e})}function a5e(){const e=w.useContext(yW);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const o5e=e=>!!e.panZoom;function RT(){const e=e5e(),t=hs(),n=a5e(),r=sr(o5e),s=w.useMemo(()=>{const i=h=>t.getState().nodeLookup.get(h),o=h=>{n.nodeQueue.push(h)},c=h=>{n.edgeQueue.push(h)},l=h=>{var y,j;const{nodeLookup:A,nodeOrigin:f}=t.getState(),m=MR(h)?h:A.get(h.id),g=m.parentId?OK(m.position,m.measured,m.parentId,A,f):m.position,b={...m,position:g,width:((y=m.measured)==null?void 0:y.width)??m.width,height:((j=m.measured)==null?void 0:j.height)??m.height};return kv(b)},d=(h,A,f={replace:!1})=>{o(m=>m.map(g=>{if(g.id===h){const b=typeof A=="function"?A(g):A;return f.replace&&MR(b)?b:{...g,...b}}return g}))},u=(h,A,f={replace:!1})=>{c(m=>m.map(g=>{if(g.id===h){const b=typeof A=="function"?A(g):A;return f.replace&&n5e(b)?b:{...g,...b}}return g}))};return{getNodes:()=>t.getState().nodes.map(h=>({...h})),getNode:h=>{var A;return(A=i(h))==null?void 0:A.internals.userNode},getInternalNode:i,getEdges:()=>{const{edges:h=[]}=t.getState();return h.map(A=>({...A}))},getEdge:h=>t.getState().edgeLookup.get(h),setNodes:o,setEdges:c,addNodes:h=>{const A=Array.isArray(h)?h:[h];n.nodeQueue.push(f=>[...f,...A])},addEdges:h=>{const A=Array.isArray(h)?h:[h];n.edgeQueue.push(f=>[...f,...A])},toObject:()=>{const{nodes:h=[],edges:A=[],transform:f}=t.getState(),[m,g,b]=f;return{nodes:h.map(y=>({...y})),edges:A.map(y=>({...y})),viewport:{x:m,y:g,zoom:b}}},deleteElements:async({nodes:h=[],edges:A=[]})=>{const{nodes:f,edges:m,onNodesDelete:g,onEdgesDelete:b,triggerNodeChanges:y,triggerEdgeChanges:j,onDelete:x,onBeforeDelete:C}=t.getState(),{nodes:S,edges:_}=await mBe({nodesToRemove:h,edgesToRemove:A,nodes:f,edges:m,onBeforeDelete:C}),N=_.length>0,L=S.length>0;if(N){const P=_.map(LR);b==null||b(_),j(P)}if(L){const P=S.map(LR);g==null||g(S),y(P)}return(L||N)&&(x==null||x({nodes:S,edges:_})),{deletedNodes:S,deletedEdges:_}},getIntersectingNodes:(h,A=!0,f)=>{const m=pR(h),g=m?h:l(h),b=f!==void 0;return g?(f||t.getState().nodes).filter(y=>{const j=t.getState().nodeLookup.get(y.id);if(j&&!m&&(y.id===h.id||!j.internals.positionAbsolute))return!1;const x=kv(b?y:j),C=$x(x,g);return A&&C>0||C>=x.width*x.height||C>=g.width*g.height}):[]},isNodeIntersecting:(h,A,f=!0)=>{const g=pR(h)?h:l(h);if(!g)return!1;const b=$x(g,A);return f&&b>0||b>=g.width*g.height},updateNode:d,updateNodeData:(h,A,f={replace:!1})=>{d(h,m=>{const g=typeof A=="function"?A(m):A;return f.replace?{...m,data:g}:{...m,data:{...m.data,...g}}},f)},updateEdge:u,updateEdgeData:(h,A,f={replace:!1})=>{u(h,m=>{const g=typeof A=="function"?A(m):A;return f.replace?{...m,data:g}:{...m,data:{...m.data,...g}}},f)},getNodesBounds:h=>{const{nodeLookup:A,nodeOrigin:f}=t.getState();return hBe(h,{nodeLookup:A,nodeOrigin:f})},getHandleConnections:({type:h,id:A,nodeId:f})=>{var m;return Array.from(((m=t.getState().connectionLookup.get(`${f}-${h}${A?`-${A}`:""}`))==null?void 0:m.values())??[])},getNodeConnections:({type:h,handleId:A,nodeId:f})=>{var m;return Array.from(((m=t.getState().connectionLookup.get(`${f}${h?A?`-${h}-${A}`:`-${h}`:""}`))==null?void 0:m.values())??[])},fitView:async h=>{const A=t.getState().fitViewResolver??xBe();return t.setState({fitViewQueued:!0,fitViewOptions:h,fitViewResolver:A}),n.nodeQueue.push(f=>[...f]),A.promise}}},[]);return w.useMemo(()=>({...s,...e,viewportInitialized:r}),[r])}const OR=e=>e.selected,c5e=typeof window<"u"?window:void 0;function l5e({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=hs(),{deleteElements:r}=RT(),s=qx(e,{actInsideInputWithModifier:!1}),i=qx(t,{target:c5e});w.useEffect(()=>{if(s){const{edges:o,nodes:c}=n.getState();r({nodes:c.filter(OR),edges:o.filter(OR)}),n.setState({nodesSelectionActive:!1})}},[s]),w.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])}function d5e(e){const t=hs();w.useEffect(()=>{const n=()=>{var s,i;if(!e.current)return!1;const r=FT(e.current);(r.height===0||r.width===0)&&((i=(s=t.getState()).onError)==null||i.call(s,"004",$d.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const Mk={position:"absolute",width:"100%",height:"100%",top:0,left:0},u5e=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function h5e({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:s=.5,panOnScrollMode:i=Dp.Free,zoomOnDoubleClick:o=!0,panOnDrag:c=!0,defaultViewport:l,translateExtent:d,minZoom:u,maxZoom:h,zoomActivationKeyCode:A,preventScrolling:f=!0,children:m,noWheelClassName:g,noPanClassName:b,onViewportChange:y,isControlledViewport:j,paneClickDistance:x}){const C=hs(),S=w.useRef(null),{userSelectionActive:_,lib:N}=sr(u5e,bs),L=qx(A),P=w.useRef();d5e(S);const F=w.useCallback(I=>{y==null||y({x:I[0],y:I[1],zoom:I[2]}),j||C.setState({transform:I})},[y,j]);return w.useEffect(()=>{if(S.current){P.current=tEe({domNode:S.current,minZoom:u,maxZoom:h,translateExtent:d,viewport:l,paneClickDistance:x,onDraggingChange:D=>C.setState({paneDragging:D}),onPanZoomStart:(D,M)=>{const{onViewportChangeStart:U,onMoveStart:H}=C.getState();H==null||H(D,M),U==null||U(M)},onPanZoom:(D,M)=>{const{onViewportChange:U,onMove:H}=C.getState();H==null||H(D,M),U==null||U(M)},onPanZoomEnd:(D,M)=>{const{onViewportChangeEnd:U,onMoveEnd:H}=C.getState();H==null||H(D,M),U==null||U(M)}});const{x:I,y:T,zoom:Q}=P.current.getViewport();return C.setState({panZoom:P.current,transform:[I,T,Q],domNode:S.current.closest(".react-flow")}),()=>{var D;(D=P.current)==null||D.destroy()}}},[]),w.useEffect(()=>{var I;(I=P.current)==null||I.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:s,panOnScrollMode:i,zoomOnDoubleClick:o,panOnDrag:c,zoomActivationKeyPressed:L,preventScrolling:f,noPanClassName:b,userSelectionActive:_,noWheelClassName:g,lib:N,onTransformChange:F})},[e,t,n,r,s,i,o,c,L,f,b,_,g,N,F]),a.jsx("div",{className:"react-flow__renderer",ref:S,style:Mk,children:m})}const A5e=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function f5e(){const{userSelectionActive:e,userSelectionRect:t}=sr(A5e,bs);return e&&t?a.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const EB=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},p5e=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function m5e({isSelecting:e,selectionKeyPressed:t,selectionMode:n=Zp.Full,panOnDrag:r,selectionOnDrag:s,onSelectionStart:i,onSelectionEnd:o,onPaneClick:c,onPaneContextMenu:l,onPaneScroll:d,onPaneMouseEnter:u,onPaneMouseMove:h,onPaneMouseLeave:A,children:f}){const m=hs(),{userSelectionActive:g,elementsSelectable:b,dragging:y,connectionInProgress:j}=sr(p5e,bs),x=b&&(e||g),C=w.useRef(null),S=w.useRef(),_=w.useRef(new Set),N=w.useRef(new Set),L=w.useRef(!1),P=w.useRef(!1),F=H=>{if(L.current||j){L.current=!1;return}c==null||c(H),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},I=H=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){H.preventDefault();return}l==null||l(H)},T=d?H=>d(H):void 0,Q=H=>{var q,K;const{resetSelectedElements:$,domNode:R}=m.getState();if(S.current=R==null?void 0:R.getBoundingClientRect(),!b||!e||H.button!==0||H.target!==C.current||!S.current)return;(K=(q=H.target)==null?void 0:q.setPointerCapture)==null||K.call(q,H.pointerId),P.current=!0,L.current=!1;const{x:Y,y:X}=Bd(H.nativeEvent,S.current);$(),m.setState({userSelectionRect:{width:0,height:0,startX:Y,startY:X,x:Y,y:X}}),i==null||i(H)},D=H=>{const{userSelectionRect:$,transform:R,nodeLookup:Y,edgeLookup:X,connectionLookup:q,triggerNodeChanges:K,triggerEdgeChanges:J,defaultEdgeOptions:W}=m.getState();if(!S.current||!$)return;L.current=!0;const{x:ne,y:ae}=Bd(H.nativeEvent,S.current),{startX:ce,startY:Ae}=$,pe={startX:ce,startY:Ae,x:ne<ce?ne:ce,y:ae<Ae?ae:Ae,width:Math.abs(ne-ce),height:Math.abs(ae-Ae)},be=_.current,Ne=N.current;_.current=new Set(PT(Y,pe,R,n===Zp.Partial,!0).map(xe=>xe.id)),N.current=new Set;const Pe=(W==null?void 0:W.selectable)??!0;for(const xe of _.current){const ue=q.get(xe);if(ue)for(const{edgeId:yt}of ue.values()){const ht=X.get(yt);ht&&(ht.selectable??Pe)&&N.current.add(yt)}}if(!mR(be,_.current)){const xe=_g(Y,_.current,!0);K(xe)}if(!mR(Ne,N.current)){const xe=_g(X,N.current);J(xe)}m.setState({userSelectionRect:pe,userSelectionActive:!0,nodesSelectionActive:!1})},M=H=>{var R,Y;if(H.button!==0||!P.current)return;(Y=(R=H.target)==null?void 0:R.releasePointerCapture)==null||Y.call(R,H.pointerId);const{userSelectionRect:$}=m.getState();!g&&$&&H.target===C.current&&(F==null||F(H)),m.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:_.current.size>0}),o==null||o(H),(t||s)&&(L.current=!1),P.current=!1},U=r===!0||Array.isArray(r)&&r.includes(0);return a.jsxs("div",{className:ai(["react-flow__pane",{draggable:U,dragging:y,selection:e}]),onClick:x?void 0:EB(F,C),onContextMenu:EB(I,C),onWheel:EB(T,C),onPointerEnter:x?void 0:u,onPointerDown:x?Q:h,onPointerMove:x?D:h,onPointerUp:x?M:void 0,onPointerLeave:A,ref:C,style:Mk,children:[f,a.jsx(f5e,{})]})}function W_({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:i,multiSelectionActive:o,nodeLookup:c,onError:l}=t.getState(),d=c.get(e);if(!d){l==null||l("012",$d.error012(e));return}t.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&o)&&(i({nodes:[d],edges:[]}),requestAnimationFrame(()=>{var u;return(u=r==null?void 0:r.current)==null?void 0:u.blur()})):s([e])}function xW({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:i,nodeClickDistance:o}){const c=hs(),[l,d]=w.useState(!1),u=w.useRef();return w.useEffect(()=>{u.current=OBe({getStoreItems:()=>c.getState(),onNodeMouseDown:h=>{W_({id:h,store:c,nodeRef:e})},onDragStart:()=>{d(!0)},onDragStop:()=>{d(!1)}})},[]),w.useEffect(()=>{var h,A;if(t)(h=u.current)==null||h.destroy();else if(e.current)return(A=u.current)==null||A.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:i,nodeId:s,nodeClickDistance:o}),()=>{var f;(f=u.current)==null||f.destroy()}},[n,r,t,i,e,s]),l}const g5e=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function wW(){const e=hs();return w.useCallback(n=>{const{nodeExtent:r,snapToGrid:s,snapGrid:i,nodesDraggable:o,onError:c,updateNodePositions:l,nodeLookup:d,nodeOrigin:u}=e.getState(),h=new Map,A=g5e(o),f=s?i[0]:5,m=s?i[1]:5,g=n.direction.x*f*n.factor,b=n.direction.y*m*n.factor;for(const[,y]of d){if(!A(y))continue;let j={x:y.internals.positionAbsolute.x+g,y:y.internals.positionAbsolute.y+b};s&&(j=Dw(j,i));const{position:x,positionAbsolute:C}=DK({nodeId:y.id,nextPosition:j,nodeLookup:d,nodeExtent:r,nodeOrigin:u,onError:c});y.position=x,y.internals.positionAbsolute=C,h.set(y.id,y)}l(h)},[])}const OT=w.createContext(null),v5e=OT.Provider;OT.Consumer;const bW=()=>w.useContext(OT),y5e=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),x5e=(e,t,n)=>r=>{const{connectionClickStartHandle:s,connectionMode:i,connection:o}=r,{fromHandle:c,toHandle:l,isValid:d}=o,u=(l==null?void 0:l.nodeId)===e&&(l==null?void 0:l.id)===t&&(l==null?void 0:l.type)===n;return{connectingFrom:(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===t&&(c==null?void 0:c.type)===n,connectingTo:u,clickConnecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.id)===t&&(s==null?void 0:s.type)===n,isPossibleEndHandle:i===Jp.Strict?(c==null?void 0:c.type)!==n:e!==(c==null?void 0:c.nodeId)||t!==(c==null?void 0:c.id),connectionInProcess:!!c,clickConnectionInProcess:!!s,valid:u&&d}};function w5e({type:e="source",position:t=Yt.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:i=!0,id:o,onConnect:c,children:l,className:d,onMouseDown:u,onTouchStart:h,...A},f){var M,U;const m=o||null,g=e==="target",b=hs(),y=bW(),{connectOnClick:j,noPanClassName:x,rfId:C}=sr(y5e,bs),{connectingFrom:S,connectingTo:_,clickConnecting:N,isPossibleEndHandle:L,connectionInProcess:P,clickConnectionInProcess:F,valid:I}=sr(x5e(y,m,e),bs);y||(U=(M=b.getState()).onError)==null||U.call(M,"010",$d.error010());const T=H=>{const{defaultEdgeOptions:$,onConnect:R,hasDefaultEdges:Y}=b.getState(),X={...$,...H};if(Y){const{edges:q,setEdges:K}=b.getState();K(KK(X,q))}R==null||R(X),c==null||c(X)},Q=H=>{if(!y)return;const $=$K(H.nativeEvent);if(s&&($&&H.button===0||!$)){const R=b.getState();K_.onPointerDown(H.nativeEvent,{handleDomNode:H.currentTarget,autoPanOnConnect:R.autoPanOnConnect,connectionMode:R.connectionMode,connectionRadius:R.connectionRadius,domNode:R.domNode,nodeLookup:R.nodeLookup,lib:R.lib,isTarget:g,handleId:m,nodeId:y,flowId:R.rfId,panBy:R.panBy,cancelConnection:R.cancelConnection,onConnectStart:R.onConnectStart,onConnectEnd:R.onConnectEnd,updateConnection:R.updateConnection,onConnect:T,isValidConnection:n||R.isValidConnection,getTransform:()=>b.getState().transform,getFromHandle:()=>b.getState().connection.fromHandle,autoPanSpeed:R.autoPanSpeed,dragThreshold:R.connectionDragThreshold})}$?u==null||u(H):h==null||h(H)},D=H=>{const{onClickConnectStart:$,onClickConnectEnd:R,connectionClickStartHandle:Y,connectionMode:X,isValidConnection:q,lib:K,rfId:J,nodeLookup:W,connection:ne}=b.getState();if(!y||!Y&&!s)return;if(!Y){$==null||$(H.nativeEvent,{nodeId:y,handleId:m,handleType:e}),b.setState({connectionClickStartHandle:{nodeId:y,type:e,id:m}});return}const ae=QK(H.target),ce=n||q,{connection:Ae,isValid:pe}=K_.isValid(H.nativeEvent,{handle:{nodeId:y,id:m,type:e},connectionMode:X,fromNodeId:Y.nodeId,fromHandleId:Y.id||null,fromType:Y.type,isValidConnection:ce,flowId:J,doc:ae,lib:K,nodeLookup:W});pe&&Ae&&T(Ae);const be=structuredClone(ne);delete be.inProgress,be.toPosition=be.toHandle?be.toHandle.position:null,R==null||R(H,be),b.setState({connectionClickStartHandle:null})};return a.jsx("div",{"data-handleid":m,"data-nodeid":y,"data-handlepos":t,"data-id":`${C}-${y}-${m}-${e}`,className:ai(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",x,d,{source:!g,target:g,connectable:r,connectablestart:s,connectableend:i,clickconnecting:N,connectingfrom:S,connectingto:_,valid:I,connectionindicator:r&&(!P||L)&&(P||F?i:s)}]),onMouseDown:Q,onTouchStart:Q,onClick:j?D:void 0,ref:f,...A,children:l})}const wl=w.memo(vW(w5e));function b5e({data:e,isConnectable:t,sourcePosition:n=Yt.Bottom}){return a.jsxs(a.Fragment,{children:[e==null?void 0:e.label,a.jsx(wl,{type:"source",position:n,isConnectable:t})]})}function C5e({data:e,isConnectable:t,targetPosition:n=Yt.Top,sourcePosition:r=Yt.Bottom}){return a.jsxs(a.Fragment,{children:[a.jsx(wl,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,a.jsx(wl,{type:"source",position:r,isConnectable:t})]})}function j5e(){return null}function k5e({data:e,isConnectable:t,targetPosition:n=Yt.Top}){return a.jsxs(a.Fragment,{children:[a.jsx(wl,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const rj={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},QR={input:b5e,default:C5e,output:k5e,group:j5e};function S5e(e){var t,n,r,s;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((s=e.style)==null?void 0:s.height)}}const N5e=e=>{const{width:t,height:n,x:r,y:s}=Fw(e.nodeLookup,{filter:i=>!!i.selected});return{width:xl(t)?t:null,height:xl(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${s}px)`}};function B5e({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=hs(),{width:s,height:i,transformString:o,userSelectionActive:c}=sr(N5e,bs),l=wW(),d=w.useRef(null);if(w.useEffect(()=>{var A;n||(A=d.current)==null||A.focus({preventScroll:!0})},[n]),xW({nodeRef:d}),c||!s||!i)return null;const u=e?A=>{const f=r.getState().nodes.filter(m=>m.selected);e(A,f)}:void 0,h=A=>{Object.prototype.hasOwnProperty.call(rj,A.key)&&(A.preventDefault(),l({direction:rj[A.key],factor:A.shiftKey?4:1}))};return a.jsx("div",{className:ai(["react-flow__nodesselection","react-flow__container",t]),style:{transform:o},children:a.jsx("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:u,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:s,height:i}})})}const HR=typeof window<"u"?window:void 0,E5e=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function CW({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:i,onPaneScroll:o,paneClickDistance:c,deleteKeyCode:l,selectionKeyCode:d,selectionOnDrag:u,selectionMode:h,onSelectionStart:A,onSelectionEnd:f,multiSelectionKeyCode:m,panActivationKeyCode:g,zoomActivationKeyCode:b,elementsSelectable:y,zoomOnScroll:j,zoomOnPinch:x,panOnScroll:C,panOnScrollSpeed:S,panOnScrollMode:_,zoomOnDoubleClick:N,panOnDrag:L,defaultViewport:P,translateExtent:F,minZoom:I,maxZoom:T,preventScrolling:Q,onSelectionContextMenu:D,noWheelClassName:M,noPanClassName:U,disableKeyboardA11y:H,onViewportChange:$,isControlledViewport:R}){const{nodesSelectionActive:Y,userSelectionActive:X}=sr(E5e),q=qx(d,{target:HR}),K=qx(g,{target:HR}),J=K||L,W=K||C,ne=u&&J!==!0,ae=q||X||ne;return l5e({deleteKeyCode:l,multiSelectionKeyCode:m}),a.jsx(h5e,{onPaneContextMenu:i,elementsSelectable:y,zoomOnScroll:j,zoomOnPinch:x,panOnScroll:W,panOnScrollSpeed:S,panOnScrollMode:_,zoomOnDoubleClick:N,panOnDrag:!q&&J,defaultViewport:P,translateExtent:F,minZoom:I,maxZoom:T,zoomActivationKeyCode:b,preventScrolling:Q,noWheelClassName:M,noPanClassName:U,onViewportChange:$,isControlledViewport:R,paneClickDistance:c,children:a.jsxs(m5e,{onSelectionStart:A,onSelectionEnd:f,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:i,onPaneScroll:o,panOnDrag:J,isSelecting:!!ae,selectionMode:h,selectionKeyPressed:q,selectionOnDrag:ne,children:[e,Y&&a.jsx(B5e,{onSelectionContextMenu:D,noPanClassName:U,disableKeyboardA11y:H})]})})}CW.displayName="FlowRenderer";const _5e=w.memo(CW),I5e=e=>t=>e?PT(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function P5e(e){return sr(w.useCallback(I5e(e),[e]),bs)}const T5e=e=>e.updateNodeInternals;function F5e(){const e=sr(T5e),[t]=w.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(s=>{const i=s.target.getAttribute("data-id");r.set(i,{id:i,nodeElement:s.target,force:!0})}),e(r)}));return w.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function D5e({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const s=hs(),i=w.useRef(null),o=w.useRef(null),c=w.useRef(e.sourcePosition),l=w.useRef(e.targetPosition),d=w.useRef(t),u=n&&!!e.internals.handleBounds;return w.useEffect(()=>{i.current&&!e.hidden&&(!u||o.current!==i.current)&&(o.current&&(r==null||r.unobserve(o.current)),r==null||r.observe(i.current),o.current=i.current)},[u,e.hidden]),w.useEffect(()=>()=>{o.current&&(r==null||r.unobserve(o.current),o.current=null)},[]),w.useEffect(()=>{if(i.current){const h=d.current!==t,A=c.current!==e.sourcePosition,f=l.current!==e.targetPosition;(h||A||f)&&(d.current=t,c.current=e.sourcePosition,l.current=e.targetPosition,s.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),i}function U5e({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:s,onContextMenu:i,onDoubleClick:o,nodesDraggable:c,elementsSelectable:l,nodesConnectable:d,nodesFocusable:u,resizeObserver:h,noDragClassName:A,noPanClassName:f,disableKeyboardA11y:m,rfId:g,nodeTypes:b,nodeClickDistance:y,onError:j}){const{node:x,internals:C,isParent:S}=sr(ce=>{const Ae=ce.nodeLookup.get(e),pe=ce.parentLookup.has(e);return{node:Ae,internals:Ae.internals,isParent:pe}},bs);let _=x.type||"default",N=(b==null?void 0:b[_])||QR[_];N===void 0&&(j==null||j("003",$d.error003(_)),_="default",N=(b==null?void 0:b.default)||QR.default);const L=!!(x.draggable||c&&typeof x.draggable>"u"),P=!!(x.selectable||l&&typeof x.selectable>"u"),F=!!(x.connectable||d&&typeof x.connectable>"u"),I=!!(x.focusable||u&&typeof x.focusable>"u"),T=hs(),Q=RK(x),D=D5e({node:x,nodeType:_,hasDimensions:Q,resizeObserver:h}),M=xW({nodeRef:D,disabled:x.hidden||!L,noDragClassName:A,handleSelector:x.dragHandle,nodeId:e,isSelectable:P,nodeClickDistance:y}),U=wW();if(x.hidden)return null;const H=oh(x),$=S5e(x),R=P||L||t||n||r||s,Y=n?ce=>n(ce,{...C.userNode}):void 0,X=r?ce=>r(ce,{...C.userNode}):void 0,q=s?ce=>s(ce,{...C.userNode}):void 0,K=i?ce=>i(ce,{...C.userNode}):void 0,J=o?ce=>o(ce,{...C.userNode}):void 0,W=ce=>{const{selectNodesOnDrag:Ae,nodeDragThreshold:pe}=T.getState();P&&(!Ae||!L||pe>0)&&W_({id:e,store:T,nodeRef:D}),t&&t(ce,{...C.userNode})},ne=ce=>{if(!(HK(ce.nativeEvent)||m)){if(_K.includes(ce.key)&&P){const Ae=ce.key==="Escape";W_({id:e,store:T,unselect:Ae,nodeRef:D})}else if(L&&x.selected&&Object.prototype.hasOwnProperty.call(rj,ce.key)){ce.preventDefault();const{ariaLabelConfig:Ae}=T.getState();T.setState({ariaLiveMessage:Ae["node.a11yDescription.ariaLiveMessage"]({direction:ce.key.replace("Arrow","").toLowerCase(),x:~~C.positionAbsolute.x,y:~~C.positionAbsolute.y})}),U({direction:rj[ce.key],factor:ce.shiftKey?4:1})}}},ae=()=>{var xe;if(m||!((xe=D.current)!=null&&xe.matches(":focus-visible")))return;const{transform:ce,width:Ae,height:pe,autoPanOnNodeFocus:be,setCenter:Ne}=T.getState();if(!be)return;PT(new Map([[e,x]]),{x:0,y:0,width:Ae,height:pe},ce,!0).length>0||Ne(x.position.x+H.width/2,x.position.y+H.height/2,{zoom:ce[2]})};return a.jsx("div",{className:ai(["react-flow__node",`react-flow__node-${_}`,{[f]:L},x.className,{selected:x.selected,selectable:P,parent:S,draggable:L,dragging:M}]),ref:D,style:{zIndex:C.z,transform:`translate(${C.positionAbsolute.x}px,${C.positionAbsolute.y}px)`,pointerEvents:R?"all":"none",visibility:Q?"visible":"hidden",...x.style,...$},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:Y,onMouseMove:X,onMouseLeave:q,onContextMenu:K,onClick:W,onDoubleClick:J,onKeyDown:I?ne:void 0,tabIndex:I?0:void 0,onFocus:I?ae:void 0,role:x.ariaRole??(I?"group":void 0),"aria-roledescription":"node","aria-describedby":m?void 0:`${hW}-${g}`,"aria-label":x.ariaLabel,...x.domAttributes,children:a.jsx(v5e,{value:e,children:a.jsx(N,{id:e,data:x.data,type:_,positionAbsoluteX:C.positionAbsolute.x,positionAbsoluteY:C.positionAbsolute.y,selected:x.selected??!1,selectable:P,draggable:L,deletable:x.deletable??!0,isConnectable:F,sourcePosition:x.sourcePosition,targetPosition:x.targetPosition,dragging:M,dragHandle:x.dragHandle,zIndex:C.z,parentId:x.parentId,...H})})})}const L5e=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function jW(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,onError:i}=sr(L5e,bs),o=P5e(e.onlyRenderVisibleElements),c=F5e();return a.jsx("div",{className:"react-flow__nodes",style:Mk,children:o.map(l=>a.jsx(U5e,{id:l,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:c,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,nodeClickDistance:e.nodeClickDistance,onError:i},l))})}jW.displayName="NodeRenderer";const M5e=w.memo(jW);function R5e(e){return sr(w.useCallback(n=>{if(!e)return n.edges.map(s=>s.id);const r=[];if(n.width&&n.height)for(const s of n.edges){const i=n.nodeLookup.get(s.source),o=n.nodeLookup.get(s.target);i&&o&&jBe({sourceNode:i,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(s.id)}return r},[e]),bs)}const O5e=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return a.jsx("polyline",{style:n,strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"})},Q5e=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return a.jsx("polyline",{style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},$R={[ej.Arrow]:O5e,[ej.ArrowClosed]:Q5e};function H5e(e){const t=hs();return w.useMemo(()=>{var s,i;return Object.prototype.hasOwnProperty.call($R,e)?$R[e]:((i=(s=t.getState()).onError)==null||i.call(s,"009",$d.error009(e)),null)},[e])}const $5e=({id:e,type:t,color:n,width:r=12.5,height:s=12.5,markerUnits:i="strokeWidth",strokeWidth:o,orient:c="auto-start-reverse"})=>{const l=H5e(t);return l?a.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:c,refX:"0",refY:"0",children:a.jsx(l,{color:n,strokeWidth:o})}):null},kW=({defaultColor:e,rfId:t})=>{const n=sr(i=>i.edges),r=sr(i=>i.defaultEdgeOptions),s=w.useMemo(()=>IBe(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return s.length?a.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:a.jsx("defs",{children:s.map(i=>a.jsx($5e,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id))})}):null};kW.displayName="MarkerDefinitions";var z5e=w.memo(kW);function SW({x:e,y:t,label:n,labelStyle:r,labelShowBg:s=!0,labelBgStyle:i,labelBgPadding:o=[2,4],labelBgBorderRadius:c=2,children:l,className:d,...u}){const[h,A]=w.useState({x:1,y:0,width:0,height:0}),f=ai(["react-flow__edge-textwrapper",d]),m=w.useRef(null);return w.useEffect(()=>{if(m.current){const g=m.current.getBBox();A({x:g.x,y:g.y,width:g.width,height:g.height})}},[n]),n?a.jsxs("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:f,visibility:h.width?"visible":"hidden",...u,children:[s&&a.jsx("rect",{width:h.width+2*o[0],x:-o[0],y:-o[1],height:h.height+2*o[1],className:"react-flow__edge-textbg",style:i,rx:c,ry:c}),a.jsx("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:m,style:r,children:n}),l]}):null}SW.displayName="EdgeText";const V5e=w.memo(SW);function Rk({path:e,labelX:t,labelY:n,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:l,interactionWidth:d=20,...u}){return a.jsxs(a.Fragment,{children:[a.jsx("path",{...u,d:e,fill:"none",className:ai(["react-flow__edge-path",u.className])}),d?a.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}):null,r&&xl(t)&&xl(n)?a.jsx(V5e,{x:t,y:n,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:l}):null]})}function zR({pos:e,x1:t,y1:n,x2:r,y2:s}){return e===Yt.Left||e===Yt.Right?[.5*(t+r),n]:[t,.5*(n+s)]}function NW({sourceX:e,sourceY:t,sourcePosition:n=Yt.Bottom,targetX:r,targetY:s,targetPosition:i=Yt.Top}){const[o,c]=zR({pos:n,x1:e,y1:t,x2:r,y2:s}),[l,d]=zR({pos:i,x1:r,y1:s,x2:e,y2:t}),[u,h,A,f]=zK({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:o,sourceControlY:c,targetControlX:l,targetControlY:d});return[`M${e},${t} C${o},${c} ${l},${d} ${r},${s}`,u,h,A,f]}function BW(e){return w.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:i,sourcePosition:o,targetPosition:c,label:l,labelStyle:d,labelShowBg:u,labelBgStyle:h,labelBgPadding:A,labelBgBorderRadius:f,style:m,markerEnd:g,markerStart:b,interactionWidth:y})=>{const[j,x,C]=NW({sourceX:n,sourceY:r,sourcePosition:o,targetX:s,targetY:i,targetPosition:c}),S=e.isInternal?void 0:t;return a.jsx(Rk,{id:S,path:j,labelX:x,labelY:C,label:l,labelStyle:d,labelShowBg:u,labelBgStyle:h,labelBgPadding:A,labelBgBorderRadius:f,style:m,markerEnd:g,markerStart:b,interactionWidth:y})})}const q5e=BW({isInternal:!1}),EW=BW({isInternal:!0});q5e.displayName="SimpleBezierEdge";EW.displayName="SimpleBezierEdgeInternal";function _W(e){return w.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:i,label:o,labelStyle:c,labelShowBg:l,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:A,sourcePosition:f=Yt.Bottom,targetPosition:m=Yt.Top,markerEnd:g,markerStart:b,pathOptions:y,interactionWidth:j})=>{const[x,C,S]=z_({sourceX:n,sourceY:r,sourcePosition:f,targetX:s,targetY:i,targetPosition:m,borderRadius:y==null?void 0:y.borderRadius,offset:y==null?void 0:y.offset,stepPosition:y==null?void 0:y.stepPosition}),_=e.isInternal?void 0:t;return a.jsx(Rk,{id:_,path:x,labelX:C,labelY:S,label:o,labelStyle:c,labelShowBg:l,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:A,markerEnd:g,markerStart:b,interactionWidth:j})})}const IW=_W({isInternal:!1}),PW=_W({isInternal:!0});IW.displayName="SmoothStepEdge";PW.displayName="SmoothStepEdgeInternal";function TW(e){return w.memo(({id:t,...n})=>{var s;const r=e.isInternal?void 0:t;return a.jsx(IW,{...n,id:r,pathOptions:w.useMemo(()=>{var i;return{borderRadius:0,offset:(i=n.pathOptions)==null?void 0:i.offset}},[(s=n.pathOptions)==null?void 0:s.offset])})})}const K5e=TW({isInternal:!1}),FW=TW({isInternal:!0});K5e.displayName="StepEdge";FW.displayName="StepEdgeInternal";function DW(e){return w.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:i,label:o,labelStyle:c,labelShowBg:l,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:A,markerEnd:f,markerStart:m,interactionWidth:g})=>{const[b,y,j]=WK({sourceX:n,sourceY:r,targetX:s,targetY:i}),x=e.isInternal?void 0:t;return a.jsx(Rk,{id:x,path:b,labelX:y,labelY:j,label:o,labelStyle:c,labelShowBg:l,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:A,markerEnd:f,markerStart:m,interactionWidth:g})})}const W5e=DW({isInternal:!1}),UW=DW({isInternal:!0});W5e.displayName="StraightEdge";UW.displayName="StraightEdgeInternal";function LW(e){return w.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:i,sourcePosition:o=Yt.Bottom,targetPosition:c=Yt.Top,label:l,labelStyle:d,labelShowBg:u,labelBgStyle:h,labelBgPadding:A,labelBgBorderRadius:f,style:m,markerEnd:g,markerStart:b,pathOptions:y,interactionWidth:j})=>{const[x,C,S]=VK({sourceX:n,sourceY:r,sourcePosition:o,targetX:s,targetY:i,targetPosition:c,curvature:y==null?void 0:y.curvature}),_=e.isInternal?void 0:t;return a.jsx(Rk,{id:_,path:x,labelX:C,labelY:S,label:l,labelStyle:d,labelShowBg:u,labelBgStyle:h,labelBgPadding:A,labelBgBorderRadius:f,style:m,markerEnd:g,markerStart:b,interactionWidth:j})})}const G5e=LW({isInternal:!1}),MW=LW({isInternal:!0});G5e.displayName="BezierEdge";MW.displayName="BezierEdgeInternal";const VR={default:MW,straight:UW,step:FW,smoothstep:PW,simplebezier:EW},qR={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Y5e=(e,t,n)=>n===Yt.Left?e-t:n===Yt.Right?e+t:e,X5e=(e,t,n)=>n===Yt.Top?e-t:n===Yt.Bottom?e+t:e,KR="react-flow__edgeupdater";function WR({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:i,onMouseOut:o,type:c}){return a.jsx("circle",{onMouseDown:s,onMouseEnter:i,onMouseOut:o,className:ai([KR,`${KR}-${c}`]),cx:Y5e(t,r,e),cy:X5e(n,r,e),r,stroke:"transparent",fill:"transparent"})}function J5e({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:s,targetX:i,targetY:o,sourcePosition:c,targetPosition:l,onReconnect:d,onReconnectStart:u,onReconnectEnd:h,setReconnecting:A,setUpdateHover:f}){const m=hs(),g=(C,S)=>{if(C.button!==0)return;const{autoPanOnConnect:_,domNode:N,isValidConnection:L,connectionMode:P,connectionRadius:F,lib:I,onConnectStart:T,onConnectEnd:Q,cancelConnection:D,nodeLookup:M,rfId:U,panBy:H,updateConnection:$}=m.getState(),R=S.type==="target",Y=(K,J)=>{A(!1),h==null||h(K,n,S.type,J)},X=K=>d==null?void 0:d(n,K),q=(K,J)=>{A(!0),u==null||u(C,n,S.type),T==null||T(K,J)};K_.onPointerDown(C.nativeEvent,{autoPanOnConnect:_,connectionMode:P,connectionRadius:F,domNode:N,handleId:S.id,nodeId:S.nodeId,nodeLookup:M,isTarget:R,edgeUpdaterType:S.type,lib:I,flowId:U,cancelConnection:D,panBy:H,isValidConnection:L,onConnect:X,onConnectStart:q,onConnectEnd:Q,onReconnectEnd:Y,updateConnection:$,getTransform:()=>m.getState().transform,getFromHandle:()=>m.getState().connection.fromHandle,dragThreshold:m.getState().connectionDragThreshold,handleDomNode:C.currentTarget})},b=C=>g(C,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),y=C=>g(C,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),j=()=>f(!0),x=()=>f(!1);return a.jsxs(a.Fragment,{children:[(e===!0||e==="source")&&a.jsx(WR,{position:c,centerX:r,centerY:s,radius:t,onMouseDown:b,onMouseEnter:j,onMouseOut:x,type:"source"}),(e===!0||e==="target")&&a.jsx(WR,{position:l,centerX:i,centerY:o,radius:t,onMouseDown:y,onMouseEnter:j,onMouseOut:x,type:"target"})]})}function Z5e({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:s,onDoubleClick:i,onContextMenu:o,onMouseEnter:c,onMouseMove:l,onMouseLeave:d,reconnectRadius:u,onReconnect:h,onReconnectStart:A,onReconnectEnd:f,rfId:m,edgeTypes:g,noPanClassName:b,onError:y,disableKeyboardA11y:j}){let x=sr(Ne=>Ne.edgeLookup.get(e));const C=sr(Ne=>Ne.defaultEdgeOptions);x=C?{...C,...x}:x;let S=x.type||"default",_=(g==null?void 0:g[S])||VR[S];_===void 0&&(y==null||y("011",$d.error011(S)),S="default",_=(g==null?void 0:g.default)||VR.default);const N=!!(x.focusable||t&&typeof x.focusable>"u"),L=typeof h<"u"&&(x.reconnectable||n&&typeof x.reconnectable>"u"),P=!!(x.selectable||r&&typeof x.selectable>"u"),F=w.useRef(null),[I,T]=w.useState(!1),[Q,D]=w.useState(!1),M=hs(),{zIndex:U,sourceX:H,sourceY:$,targetX:R,targetY:Y,sourcePosition:X,targetPosition:q}=sr(w.useCallback(Ne=>{const Pe=Ne.nodeLookup.get(x.source),xe=Ne.nodeLookup.get(x.target);if(!Pe||!xe)return{zIndex:x.zIndex,...qR};const ue=_Be({id:e,sourceNode:Pe,targetNode:xe,sourceHandle:x.sourceHandle||null,targetHandle:x.targetHandle||null,connectionMode:Ne.connectionMode,onError:y});return{zIndex:CBe({selected:x.selected,zIndex:x.zIndex,sourceNode:Pe,targetNode:xe,elevateOnSelect:Ne.elevateEdgesOnSelect}),...ue||qR}},[x.source,x.target,x.sourceHandle,x.targetHandle,x.selected,x.zIndex]),bs),K=w.useMemo(()=>x.markerStart?`url('#${V_(x.markerStart,m)}')`:void 0,[x.markerStart,m]),J=w.useMemo(()=>x.markerEnd?`url('#${V_(x.markerEnd,m)}')`:void 0,[x.markerEnd,m]);if(x.hidden||H===null||$===null||R===null||Y===null)return null;const W=Ne=>{var yt;const{addSelectedEdges:Pe,unselectNodesAndEdges:xe,multiSelectionActive:ue}=M.getState();P&&(M.setState({nodesSelectionActive:!1}),x.selected&&ue?(xe({nodes:[],edges:[x]}),(yt=F.current)==null||yt.blur()):Pe([e])),s&&s(Ne,x)},ne=i?Ne=>{i(Ne,{...x})}:void 0,ae=o?Ne=>{o(Ne,{...x})}:void 0,ce=c?Ne=>{c(Ne,{...x})}:void 0,Ae=l?Ne=>{l(Ne,{...x})}:void 0,pe=d?Ne=>{d(Ne,{...x})}:void 0,be=Ne=>{var Pe;if(!j&&_K.includes(Ne.key)&&P){const{unselectNodesAndEdges:xe,addSelectedEdges:ue}=M.getState();Ne.key==="Escape"?((Pe=F.current)==null||Pe.blur(),xe({edges:[x]})):ue([e])}};return a.jsx("svg",{style:{zIndex:U},children:a.jsxs("g",{className:ai(["react-flow__edge",`react-flow__edge-${S}`,x.className,b,{selected:x.selected,animated:x.animated,inactive:!P&&!s,updating:I,selectable:P}]),onClick:W,onDoubleClick:ne,onContextMenu:ae,onMouseEnter:ce,onMouseMove:Ae,onMouseLeave:pe,onKeyDown:N?be:void 0,tabIndex:N?0:void 0,role:x.ariaRole??(N?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":x.ariaLabel===null?void 0:x.ariaLabel||`Edge from ${x.source} to ${x.target}`,"aria-describedby":N?`${AW}-${m}`:void 0,ref:F,...x.domAttributes,children:[!Q&&a.jsx(_,{id:e,source:x.source,target:x.target,type:x.type,selected:x.selected,animated:x.animated,selectable:P,deletable:x.deletable??!0,label:x.label,labelStyle:x.labelStyle,labelShowBg:x.labelShowBg,labelBgStyle:x.labelBgStyle,labelBgPadding:x.labelBgPadding,labelBgBorderRadius:x.labelBgBorderRadius,sourceX:H,sourceY:$,targetX:R,targetY:Y,sourcePosition:X,targetPosition:q,data:x.data,style:x.style,sourceHandleId:x.sourceHandle,targetHandleId:x.targetHandle,markerStart:K,markerEnd:J,pathOptions:"pathOptions"in x?x.pathOptions:void 0,interactionWidth:x.interactionWidth}),L&&a.jsx(J5e,{edge:x,isReconnectable:L,reconnectRadius:u,onReconnect:h,onReconnectStart:A,onReconnectEnd:f,sourceX:H,sourceY:$,targetX:R,targetY:Y,sourcePosition:X,targetPosition:q,setUpdateHover:T,setReconnecting:D})]})})}const e_e=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function RW({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:s,onReconnect:i,onEdgeContextMenu:o,onEdgeMouseEnter:c,onEdgeMouseMove:l,onEdgeMouseLeave:d,onEdgeClick:u,reconnectRadius:h,onEdgeDoubleClick:A,onReconnectStart:f,onReconnectEnd:m,disableKeyboardA11y:g}){const{edgesFocusable:b,edgesReconnectable:y,elementsSelectable:j,onError:x}=sr(e_e,bs),C=R5e(t);return a.jsxs("div",{className:"react-flow__edges",children:[a.jsx(z5e,{defaultColor:e,rfId:n}),C.map(S=>a.jsx(Z5e,{id:S,edgesFocusable:b,edgesReconnectable:y,elementsSelectable:j,noPanClassName:s,onReconnect:i,onContextMenu:o,onMouseEnter:c,onMouseMove:l,onMouseLeave:d,onClick:u,reconnectRadius:h,onDoubleClick:A,onReconnectStart:f,onReconnectEnd:m,rfId:n,onError:x,edgeTypes:r,disableKeyboardA11y:g},S))]})}RW.displayName="EdgeRenderer";const t_e=w.memo(RW),n_e=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function r_e({children:e}){const t=sr(n_e);return a.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function s_e(e){const t=RT(),n=w.useRef(!1);w.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const i_e=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function a_e(e){const t=sr(i_e),n=hs();return w.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function o_e(e){return e.connection.inProgress?{...e.connection,to:Uw(e.connection.to,e.transform)}:{...e.connection}}function c_e(e){return o_e}function l_e(e){const t=c_e();return sr(t,bs)}const d_e=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function u_e({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:s,width:i,height:o,isValid:c,inProgress:l}=sr(d_e,bs);return!(i&&s&&l)?null:a.jsx("svg",{style:e,width:i,height:o,className:"react-flow__connectionline react-flow__container",children:a.jsx("g",{className:ai(["react-flow__connection",TK(c)]),children:a.jsx(OW,{style:t,type:n,CustomComponent:r,isValid:c})})})}const OW=({style:e,type:t=fA.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:s,from:i,fromNode:o,fromHandle:c,fromPosition:l,to:d,toNode:u,toHandle:h,toPosition:A}=l_e();if(!s)return;if(n)return a.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:o,fromHandle:c,fromX:i.x,fromY:i.y,toX:d.x,toY:d.y,fromPosition:l,toPosition:A,connectionStatus:TK(r),toNode:u,toHandle:h});let f="";const m={sourceX:i.x,sourceY:i.y,sourcePosition:l,targetX:d.x,targetY:d.y,targetPosition:A};switch(t){case fA.Bezier:[f]=VK(m);break;case fA.SimpleBezier:[f]=NW(m);break;case fA.Step:[f]=z_({...m,borderRadius:0});break;case fA.SmoothStep:[f]=z_(m);break;default:[f]=WK(m)}return a.jsx("path",{d:f,fill:"none",className:"react-flow__connection-path",style:e})};OW.displayName="ConnectionLine";const h_e={};function GR(e=h_e){w.useRef(e),hs(),w.useEffect(()=>{},[e])}function A_e(){hs(),w.useRef(!1),w.useEffect(()=>{},[])}function QW({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:s,onNodeDoubleClick:i,onEdgeDoubleClick:o,onNodeMouseEnter:c,onNodeMouseMove:l,onNodeMouseLeave:d,onNodeContextMenu:u,onSelectionContextMenu:h,onSelectionStart:A,onSelectionEnd:f,connectionLineType:m,connectionLineStyle:g,connectionLineComponent:b,connectionLineContainerStyle:y,selectionKeyCode:j,selectionOnDrag:x,selectionMode:C,multiSelectionKeyCode:S,panActivationKeyCode:_,zoomActivationKeyCode:N,deleteKeyCode:L,onlyRenderVisibleElements:P,elementsSelectable:F,defaultViewport:I,translateExtent:T,minZoom:Q,maxZoom:D,preventScrolling:M,defaultMarkerColor:U,zoomOnScroll:H,zoomOnPinch:$,panOnScroll:R,panOnScrollSpeed:Y,panOnScrollMode:X,zoomOnDoubleClick:q,panOnDrag:K,onPaneClick:J,onPaneMouseEnter:W,onPaneMouseMove:ne,onPaneMouseLeave:ae,onPaneScroll:ce,onPaneContextMenu:Ae,paneClickDistance:pe,nodeClickDistance:be,onEdgeContextMenu:Ne,onEdgeMouseEnter:Pe,onEdgeMouseMove:xe,onEdgeMouseLeave:ue,reconnectRadius:yt,onReconnect:ht,onReconnectStart:Ct,onReconnectEnd:Me,noDragClassName:kt,noWheelClassName:ct,noPanClassName:Nt,disableKeyboardA11y:bt,nodeExtent:An,rfId:$t,viewport:Rt,onViewportChange:Le}){return GR(e),GR(t),A_e(),s_e(n),a_e(Rt),a.jsx(_5e,{onPaneClick:J,onPaneMouseEnter:W,onPaneMouseMove:ne,onPaneMouseLeave:ae,onPaneContextMenu:Ae,onPaneScroll:ce,paneClickDistance:pe,deleteKeyCode:L,selectionKeyCode:j,selectionOnDrag:x,selectionMode:C,onSelectionStart:A,onSelectionEnd:f,multiSelectionKeyCode:S,panActivationKeyCode:_,zoomActivationKeyCode:N,elementsSelectable:F,zoomOnScroll:H,zoomOnPinch:$,zoomOnDoubleClick:q,panOnScroll:R,panOnScrollSpeed:Y,panOnScrollMode:X,panOnDrag:K,defaultViewport:I,translateExtent:T,minZoom:Q,maxZoom:D,onSelectionContextMenu:h,preventScrolling:M,noDragClassName:kt,noWheelClassName:ct,noPanClassName:Nt,disableKeyboardA11y:bt,onViewportChange:Le,isControlledViewport:!!Rt,children:a.jsxs(r_e,{children:[a.jsx(t_e,{edgeTypes:t,onEdgeClick:s,onEdgeDoubleClick:o,onReconnect:ht,onReconnectStart:Ct,onReconnectEnd:Me,onlyRenderVisibleElements:P,onEdgeContextMenu:Ne,onEdgeMouseEnter:Pe,onEdgeMouseMove:xe,onEdgeMouseLeave:ue,reconnectRadius:yt,defaultMarkerColor:U,noPanClassName:Nt,disableKeyboardA11y:bt,rfId:$t}),a.jsx(u_e,{style:g,type:m,component:b,containerStyle:y}),a.jsx("div",{className:"react-flow__edgelabel-renderer"}),a.jsx(M5e,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:i,onNodeMouseEnter:c,onNodeMouseMove:l,onNodeMouseLeave:d,onNodeContextMenu:u,nodeClickDistance:be,onlyRenderVisibleElements:P,noPanClassName:Nt,noDragClassName:kt,disableKeyboardA11y:bt,nodeExtent:An,rfId:$t}),a.jsx("div",{className:"react-flow__viewport-portal"})]})})}QW.displayName="GraphView";const f_e=w.memo(QW),YR=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:s,height:i,fitView:o,fitViewOptions:c,minZoom:l=.5,maxZoom:d=2,nodeOrigin:u,nodeExtent:h}={})=>{const A=new Map,f=new Map,m=new Map,g=new Map,b=r??t??[],y=n??e??[],j=u??[0,0],x=h??Hx;YK(m,g,b);const C=q_(y,A,f,{nodeOrigin:j,nodeExtent:x,elevateNodesOnSelect:!1});let S=[0,0,1];if(o&&s&&i){const _=Fw(A,{filter:F=>!!((F.width||F.initialWidth)&&(F.height||F.initialHeight))}),{x:N,y:L,zoom:P}=TT(_,s,i,l,d,(c==null?void 0:c.padding)??.1);S=[N,L,P]}return{rfId:"1",width:0,height:0,transform:S,nodes:y,nodesInitialized:C,nodeLookup:A,parentLookup:f,edges:b,edgeLookup:g,connectionLookup:m,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:l,maxZoom:d,translateExtent:Hx,nodeExtent:x,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Jp.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:j,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:o??!1,fitViewOptions:c,fitViewResolver:null,connection:{...PK},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:gBe,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:IK}},p_e=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:s,height:i,fitView:o,fitViewOptions:c,minZoom:l,maxZoom:d,nodeOrigin:u,nodeExtent:h})=>DEe((A,f)=>{async function m(){const{nodeLookup:g,panZoom:b,fitViewOptions:y,fitViewResolver:j,width:x,height:C,minZoom:S,maxZoom:_}=f();b&&(await pBe({nodes:g,width:x,height:C,panZoom:b,minZoom:S,maxZoom:_},y),j==null||j.resolve(!0),A({fitViewResolver:null}))}return{...YR({nodes:e,edges:t,width:s,height:i,fitView:o,fitViewOptions:c,minZoom:l,maxZoom:d,nodeOrigin:u,nodeExtent:h,defaultNodes:n,defaultEdges:r}),setNodes:g=>{const{nodeLookup:b,parentLookup:y,nodeOrigin:j,elevateNodesOnSelect:x,fitViewQueued:C}=f(),S=q_(g,b,y,{nodeOrigin:j,nodeExtent:h,elevateNodesOnSelect:x,checkEquality:!0});C&&S?(m(),A({nodes:g,nodesInitialized:S,fitViewQueued:!1,fitViewOptions:void 0})):A({nodes:g,nodesInitialized:S})},setEdges:g=>{const{connectionLookup:b,edgeLookup:y}=f();YK(b,y,g),A({edges:g})},setDefaultNodesAndEdges:(g,b)=>{if(g){const{setNodes:y}=f();y(g),A({hasDefaultNodes:!0})}if(b){const{setEdges:y}=f();y(b),A({hasDefaultEdges:!0})}},updateNodeInternals:g=>{const{triggerNodeChanges:b,nodeLookup:y,parentLookup:j,domNode:x,nodeOrigin:C,nodeExtent:S,debug:_,fitViewQueued:N}=f(),{changes:L,updatedInternals:P}=UBe(g,y,j,x,C,S);P&&(TBe(y,j,{nodeOrigin:C,nodeExtent:S}),N?(m(),A({fitViewQueued:!1,fitViewOptions:void 0})):A({}),(L==null?void 0:L.length)>0&&(_&&console.log("React Flow: trigger node changes",L),b==null||b(L)))},updateNodePositions:(g,b=!1)=>{const y=[],j=[],{nodeLookup:x,triggerNodeChanges:C}=f();for(const[S,_]of g){const N=x.get(S),L=!!(N!=null&&N.expandParent&&(N!=null&&N.parentId)&&(_!=null&&_.position)),P={id:S,type:"position",position:L?{x:Math.max(0,_.position.x),y:Math.max(0,_.position.y)}:_.position,dragging:b};L&&N.parentId&&y.push({id:S,parentId:N.parentId,rect:{..._.internals.positionAbsolute,width:_.measured.width??0,height:_.measured.height??0}}),j.push(P)}if(y.length>0){const{parentLookup:S,nodeOrigin:_}=f(),N=MT(y,x,S,_);j.push(...N)}C(j)},triggerNodeChanges:g=>{const{onNodesChange:b,setNodes:y,nodes:j,hasDefaultNodes:x,debug:C}=f();if(g!=null&&g.length){if(x){const S=mW(g,j);y(S)}C&&console.log("React Flow: trigger node changes",g),b==null||b(g)}},triggerEdgeChanges:g=>{const{onEdgesChange:b,setEdges:y,edges:j,hasDefaultEdges:x,debug:C}=f();if(g!=null&&g.length){if(x){const S=gW(g,j);y(S)}C&&console.log("React Flow: trigger edge changes",g),b==null||b(g)}},addSelectedNodes:g=>{const{multiSelectionActive:b,edgeLookup:y,nodeLookup:j,triggerNodeChanges:x,triggerEdgeChanges:C}=f();if(b){const S=g.map(_=>np(_,!0));x(S);return}x(_g(j,new Set([...g]),!0)),C(_g(y))},addSelectedEdges:g=>{const{multiSelectionActive:b,edgeLookup:y,nodeLookup:j,triggerNodeChanges:x,triggerEdgeChanges:C}=f();if(b){const S=g.map(_=>np(_,!0));C(S);return}C(_g(y,new Set([...g]))),x(_g(j,new Set,!0))},unselectNodesAndEdges:({nodes:g,edges:b}={})=>{const{edges:y,nodes:j,nodeLookup:x,triggerNodeChanges:C,triggerEdgeChanges:S}=f(),_=g||j,N=b||y,L=_.map(F=>{const I=x.get(F.id);return I&&(I.selected=!1),np(F.id,!1)}),P=N.map(F=>np(F.id,!1));C(L),S(P)},setMinZoom:g=>{const{panZoom:b,maxZoom:y}=f();b==null||b.setScaleExtent([g,y]),A({minZoom:g})},setMaxZoom:g=>{const{panZoom:b,minZoom:y}=f();b==null||b.setScaleExtent([y,g]),A({maxZoom:g})},setTranslateExtent:g=>{var b;(b=f().panZoom)==null||b.setTranslateExtent(g),A({translateExtent:g})},setPaneClickDistance:g=>{var b;(b=f().panZoom)==null||b.setClickDistance(g)},resetSelectedElements:()=>{const{edges:g,nodes:b,triggerNodeChanges:y,triggerEdgeChanges:j,elementsSelectable:x}=f();if(!x)return;const C=b.reduce((_,N)=>N.selected?[..._,np(N.id,!1)]:_,[]),S=g.reduce((_,N)=>N.selected?[..._,np(N.id,!1)]:_,[]);y(C),j(S)},setNodeExtent:g=>{const{nodes:b,nodeLookup:y,parentLookup:j,nodeOrigin:x,elevateNodesOnSelect:C,nodeExtent:S}=f();g[0][0]===S[0][0]&&g[0][1]===S[0][1]&&g[1][0]===S[1][0]&&g[1][1]===S[1][1]||(q_(b,y,j,{nodeOrigin:x,nodeExtent:g,elevateNodesOnSelect:C,checkEquality:!1}),A({nodeExtent:g}))},panBy:g=>{const{transform:b,width:y,height:j,panZoom:x,translateExtent:C}=f();return LBe({delta:g,panZoom:x,transform:b,translateExtent:C,width:y,height:j})},setCenter:async(g,b,y)=>{const{width:j,height:x,maxZoom:C,panZoom:S}=f();if(!S)return Promise.resolve(!1);const _=typeof(y==null?void 0:y.zoom)<"u"?y.zoom:C;return await S.setViewport({x:j/2-g*_,y:x/2-b*_,zoom:_},{duration:y==null?void 0:y.duration,ease:y==null?void 0:y.ease,interpolate:y==null?void 0:y.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{A({connection:{...PK}})},updateConnection:g=>{A({connection:g})},reset:()=>A({...YR()})}},Object.is);function m_e({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:s,initialHeight:i,initialMinZoom:o,initialMaxZoom:c,initialFitViewOptions:l,fitView:d,nodeOrigin:u,nodeExtent:h,children:A}){const[f]=w.useState(()=>p_e({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:s,height:i,fitView:d,minZoom:o,maxZoom:c,fitViewOptions:l,nodeOrigin:u,nodeExtent:h}));return a.jsx(UEe,{value:f,children:a.jsx(i5e,{children:A})})}function g_e({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:s,width:i,height:o,fitView:c,fitViewOptions:l,minZoom:d,maxZoom:u,nodeOrigin:h,nodeExtent:A}){return w.useContext(Uk)?a.jsx(a.Fragment,{children:e}):a.jsx(m_e,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:s,initialWidth:i,initialHeight:o,fitView:c,initialFitViewOptions:l,initialMinZoom:d,initialMaxZoom:u,nodeOrigin:h,nodeExtent:A,children:e})}const v_e={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function y_e({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:i,edgeTypes:o,onNodeClick:c,onEdgeClick:l,onInit:d,onMove:u,onMoveStart:h,onMoveEnd:A,onConnect:f,onConnectStart:m,onConnectEnd:g,onClickConnectStart:b,onClickConnectEnd:y,onNodeMouseEnter:j,onNodeMouseMove:x,onNodeMouseLeave:C,onNodeContextMenu:S,onNodeDoubleClick:_,onNodeDragStart:N,onNodeDrag:L,onNodeDragStop:P,onNodesDelete:F,onEdgesDelete:I,onDelete:T,onSelectionChange:Q,onSelectionDragStart:D,onSelectionDrag:M,onSelectionDragStop:U,onSelectionContextMenu:H,onSelectionStart:$,onSelectionEnd:R,onBeforeDelete:Y,connectionMode:X,connectionLineType:q=fA.Bezier,connectionLineStyle:K,connectionLineComponent:J,connectionLineContainerStyle:W,deleteKeyCode:ne="Backspace",selectionKeyCode:ae="Shift",selectionOnDrag:ce=!1,selectionMode:Ae=Zp.Full,panActivationKeyCode:pe="Space",multiSelectionKeyCode:be=zx()?"Meta":"Control",zoomActivationKeyCode:Ne=zx()?"Meta":"Control",snapToGrid:Pe,snapGrid:xe,onlyRenderVisibleElements:ue=!1,selectNodesOnDrag:yt,nodesDraggable:ht,autoPanOnNodeFocus:Ct,nodesConnectable:Me,nodesFocusable:kt,nodeOrigin:ct=fW,edgesFocusable:Nt,edgesReconnectable:bt,elementsSelectable:An=!0,defaultViewport:$t=GEe,minZoom:Rt=.5,maxZoom:Le=2,translateExtent:Ke=Hx,preventScrolling:it=!0,nodeExtent:pt,defaultMarkerColor:At="#b1b1b7",zoomOnScroll:rn=!0,zoomOnPinch:vt=!0,panOnScroll:Bt=!1,panOnScrollSpeed:Xt=.5,panOnScrollMode:bn=Dp.Free,zoomOnDoubleClick:Qt=!0,panOnDrag:on=!0,onPaneClick:It,onPaneMouseEnter:Ut,onPaneMouseMove:Wn,onPaneMouseLeave:Nn,onPaneScroll:en,onPaneContextMenu:wt,paneClickDistance:Gn=0,nodeClickDistance:Bn=0,children:ir,onReconnect:rs,onReconnectStart:St,onReconnectEnd:pr,onEdgeContextMenu:Vr,onEdgeDoubleClick:nr,onEdgeMouseEnter:Re,onEdgeMouseMove:mt,onEdgeMouseLeave:Ht,reconnectRadius:sn=10,onNodesChange:wn,onEdgesChange:jr,noDragClassName:ur="nodrag",noWheelClassName:ar="nowheel",noPanClassName:ss="nopan",fitView:Xs,fitViewOptions:qr,connectOnClick:bo,attributionPosition:ks,proOptions:yi,defaultEdgeOptions:Ja,elevateNodesOnSelect:qi,elevateEdgesOnSelect:va,disableKeyboardA11y:lh=!1,autoPanOnConnect:nc,autoPanOnNodeDrag:dh,autoPanSpeed:uh,connectionRadius:Ki,isValidConnection:Hl,onError:eu,style:$l,id:tu,nodeDragThreshold:hh,connectionDragThreshold:Ah,viewport:zl,onViewportChange:fh,width:Kr,height:nu,colorMode:Vl="light",debug:Co,onScroll:ya,ariaLabelConfig:xi,...rc},Wr){const sc=tu||"1",ph=ZEe(Vl),ru=w.useCallback(mh=>{mh.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),ya==null||ya(mh)},[ya]);return a.jsx("div",{"data-testid":"rf__wrapper",...rc,onScroll:ru,style:{...$l,...v_e},ref:Wr,className:ai(["react-flow",s,ph]),id:tu,role:"application",children:a.jsxs(g_e,{nodes:e,edges:t,width:Kr,height:nu,fitView:Xs,fitViewOptions:qr,minZoom:Rt,maxZoom:Le,nodeOrigin:ct,nodeExtent:pt,children:[a.jsx(f_e,{onInit:d,onNodeClick:c,onEdgeClick:l,onNodeMouseEnter:j,onNodeMouseMove:x,onNodeMouseLeave:C,onNodeContextMenu:S,onNodeDoubleClick:_,nodeTypes:i,edgeTypes:o,connectionLineType:q,connectionLineStyle:K,connectionLineComponent:J,connectionLineContainerStyle:W,selectionKeyCode:ae,selectionOnDrag:ce,selectionMode:Ae,deleteKeyCode:ne,multiSelectionKeyCode:be,panActivationKeyCode:pe,zoomActivationKeyCode:Ne,onlyRenderVisibleElements:ue,defaultViewport:$t,translateExtent:Ke,minZoom:Rt,maxZoom:Le,preventScrolling:it,zoomOnScroll:rn,zoomOnPinch:vt,zoomOnDoubleClick:Qt,panOnScroll:Bt,panOnScrollSpeed:Xt,panOnScrollMode:bn,panOnDrag:on,onPaneClick:It,onPaneMouseEnter:Ut,onPaneMouseMove:Wn,onPaneMouseLeave:Nn,onPaneScroll:en,onPaneContextMenu:wt,paneClickDistance:Gn,nodeClickDistance:Bn,onSelectionContextMenu:H,onSelectionStart:$,onSelectionEnd:R,onReconnect:rs,onReconnectStart:St,onReconnectEnd:pr,onEdgeContextMenu:Vr,onEdgeDoubleClick:nr,onEdgeMouseEnter:Re,onEdgeMouseMove:mt,onEdgeMouseLeave:Ht,reconnectRadius:sn,defaultMarkerColor:At,noDragClassName:ur,noWheelClassName:ar,noPanClassName:ss,rfId:sc,disableKeyboardA11y:lh,nodeExtent:pt,viewport:zl,onViewportChange:fh}),a.jsx(JEe,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:f,onConnectStart:m,onConnectEnd:g,onClickConnectStart:b,onClickConnectEnd:y,nodesDraggable:ht,autoPanOnNodeFocus:Ct,nodesConnectable:Me,nodesFocusable:kt,edgesFocusable:Nt,edgesReconnectable:bt,elementsSelectable:An,elevateNodesOnSelect:qi,elevateEdgesOnSelect:va,minZoom:Rt,maxZoom:Le,nodeExtent:pt,onNodesChange:wn,onEdgesChange:jr,snapToGrid:Pe,snapGrid:xe,connectionMode:X,translateExtent:Ke,connectOnClick:bo,defaultEdgeOptions:Ja,fitView:Xs,fitViewOptions:qr,onNodesDelete:F,onEdgesDelete:I,onDelete:T,onNodeDragStart:N,onNodeDrag:L,onNodeDragStop:P,onSelectionDrag:M,onSelectionDragStart:D,onSelectionDragStop:U,onMove:u,onMoveStart:h,onMoveEnd:A,noPanClassName:ss,nodeOrigin:ct,rfId:sc,autoPanOnConnect:nc,autoPanOnNodeDrag:dh,autoPanSpeed:uh,onError:eu,connectionRadius:Ki,isValidConnection:Hl,selectNodesOnDrag:yt,nodeDragThreshold:hh,connectionDragThreshold:Ah,onBeforeDelete:Y,paneClickDistance:Gn,debug:Co,ariaLabelConfig:xi}),a.jsx(WEe,{onSelectionChange:Q}),ir,a.jsx($Ee,{proOptions:yi,position:ks}),a.jsx(HEe,{rfId:sc,disableKeyboardA11y:lh})]})})}var x_e=vW(y_e);function w_e(e){const[t,n]=w.useState(e),r=w.useCallback(s=>n(i=>mW(s,i)),[]);return[t,n,r]}function b_e(e){const[t,n]=w.useState(e),r=w.useCallback(s=>n(i=>gW(s,i)),[]);return[t,n,r]}function C_e({dimensions:e,lineWidth:t,variant:n,className:r}){return a.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:ai(["react-flow__background-pattern",n,r])})}function j_e({radius:e,className:t}){return a.jsx("circle",{cx:e,cy:e,r:e,className:ai(["react-flow__background-pattern","dots",t])})}var $u;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})($u||($u={}));const k_e={[$u.Dots]:1,[$u.Lines]:1,[$u.Cross]:6},S_e=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function HW({id:e,variant:t=$u.Dots,gap:n=20,size:r,lineWidth:s=1,offset:i=0,color:o,bgColor:c,style:l,className:d,patternClassName:u}){const h=w.useRef(null),{transform:A,patternId:f}=sr(S_e,bs),m=r||k_e[t],g=t===$u.Dots,b=t===$u.Cross,y=Array.isArray(n)?n:[n,n],j=[y[0]*A[2]||1,y[1]*A[2]||1],x=m*A[2],C=Array.isArray(i)?i:[i,i],S=b?[x,x]:j,_=[C[0]*A[2]||1+S[0]/2,C[1]*A[2]||1+S[1]/2],N=`${f}${e||""}`;return a.jsxs("svg",{className:ai(["react-flow__background",d]),style:{...l,...Mk,"--xy-background-color-props":c,"--xy-background-pattern-color-props":o},ref:h,"data-testid":"rf__background",children:[a.jsx("pattern",{id:N,x:A[0]%j[0],y:A[1]%j[1],width:j[0],height:j[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${_[0]},-${_[1]})`,children:g?a.jsx(j_e,{radius:x/2,className:u}):a.jsx(C_e,{dimensions:S,lineWidth:s,variant:t,className:u})}),a.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${N})`})]})}HW.displayName="Background";const N_e=w.memo(HW);function B_e(){return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:a.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function E_e(){return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:a.jsx("path",{d:"M0 0h32v4.2H0z"})})}function __e(){return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:a.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function I_e(){return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:a.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function P_e(){return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:a.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function C1({children:e,className:t,...n}){return a.jsx("button",{type:"button",className:ai(["react-flow__controls-button",t]),...n,children:e})}const T_e=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function $W({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:i,onZoomOut:o,onFitView:c,onInteractiveChange:l,className:d,children:u,position:h="bottom-left",orientation:A="vertical","aria-label":f}){const m=hs(),{isInteractive:g,minZoomReached:b,maxZoomReached:y,ariaLabelConfig:j}=sr(T_e,bs),{zoomIn:x,zoomOut:C,fitView:S}=RT(),_=()=>{x(),i==null||i()},N=()=>{C(),o==null||o()},L=()=>{S(s),c==null||c()},P=()=>{m.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),l==null||l(!g)},F=A==="horizontal"?"horizontal":"vertical";return a.jsxs(Lk,{className:ai(["react-flow__controls",F,d]),position:h,style:e,"data-testid":"rf__controls","aria-label":f??j["controls.ariaLabel"],children:[t&&a.jsxs(a.Fragment,{children:[a.jsx(C1,{onClick:_,className:"react-flow__controls-zoomin",title:j["controls.zoomIn.ariaLabel"],"aria-label":j["controls.zoomIn.ariaLabel"],disabled:y,children:a.jsx(B_e,{})}),a.jsx(C1,{onClick:N,className:"react-flow__controls-zoomout",title:j["controls.zoomOut.ariaLabel"],"aria-label":j["controls.zoomOut.ariaLabel"],disabled:b,children:a.jsx(E_e,{})})]}),n&&a.jsx(C1,{className:"react-flow__controls-fitview",onClick:L,title:j["controls.fitView.ariaLabel"],"aria-label":j["controls.fitView.ariaLabel"],children:a.jsx(__e,{})}),r&&a.jsx(C1,{className:"react-flow__controls-interactive",onClick:P,title:j["controls.interactive.ariaLabel"],"aria-label":j["controls.interactive.ariaLabel"],children:g?a.jsx(P_e,{}):a.jsx(I_e,{})}),u]})}$W.displayName="Controls";w.memo($W);function F_e({id:e,x:t,y:n,width:r,height:s,style:i,color:o,strokeColor:c,strokeWidth:l,className:d,borderRadius:u,shapeRendering:h,selected:A,onClick:f}){const{background:m,backgroundColor:g}=i||{},b=o||m||g;return a.jsx("rect",{className:ai(["react-flow__minimap-node",{selected:A},d]),x:t,y:n,rx:u,ry:u,width:r,height:s,style:{fill:b,stroke:c,strokeWidth:l},shapeRendering:h,onClick:f?y=>f(y,e):void 0})}const D_e=w.memo(F_e),U_e=e=>e.nodes.map(t=>t.id),_B=e=>e instanceof Function?e:()=>e;function L_e({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:s,nodeComponent:i=D_e,onClick:o}){const c=sr(U_e,bs),l=_B(t),d=_B(e),u=_B(n),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return a.jsx(a.Fragment,{children:c.map(A=>a.jsx(R_e,{id:A,nodeColorFunc:l,nodeStrokeColorFunc:d,nodeClassNameFunc:u,nodeBorderRadius:r,nodeStrokeWidth:s,NodeComponent:i,onClick:o,shapeRendering:h},A))})}function M_e({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:s,nodeStrokeWidth:i,shapeRendering:o,NodeComponent:c,onClick:l}){const{node:d,x:u,y:h,width:A,height:f}=sr(m=>{const{internals:g}=m.nodeLookup.get(e),b=g.userNode,{x:y,y:j}=g.positionAbsolute,{width:x,height:C}=oh(b);return{node:b,x:y,y:j,width:x,height:C}},bs);return!d||d.hidden||!RK(d)?null:a.jsx(c,{x:u,y:h,width:A,height:f,style:d.style,selected:!!d.selected,className:r(d),color:t(d),borderRadius:s,strokeColor:n(d),strokeWidth:i,shapeRendering:o,onClick:l,id:d.id})}const R_e=w.memo(M_e);var O_e=w.memo(L_e);const Q_e=200,H_e=150,$_e=e=>!e.hidden,z_e=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?MK(Fw(e.nodeLookup,{filter:$_e}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},V_e="react-flow__minimap-desc";function zW({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:s="",nodeBorderRadius:i=5,nodeStrokeWidth:o,nodeComponent:c,bgColor:l,maskColor:d,maskStrokeColor:u,maskStrokeWidth:h,position:A="bottom-right",onClick:f,onNodeClick:m,pannable:g=!1,zoomable:b=!1,ariaLabel:y,inversePan:j,zoomStep:x=1,offsetScale:C=5}){const S=hs(),_=w.useRef(null),{boundingRect:N,viewBB:L,rfId:P,panZoom:F,translateExtent:I,flowWidth:T,flowHeight:Q,ariaLabelConfig:D}=sr(z_e,bs),M=(e==null?void 0:e.width)??Q_e,U=(e==null?void 0:e.height)??H_e,H=N.width/M,$=N.height/U,R=Math.max(H,$),Y=R*M,X=R*U,q=C*R,K=N.x-(Y-N.width)/2-q,J=N.y-(X-N.height)/2-q,W=Y+q*2,ne=X+q*2,ae=`${V_e}-${P}`,ce=w.useRef(0),Ae=w.useRef();ce.current=R,w.useEffect(()=>{if(_.current&&F)return Ae.current=qBe({domNode:_.current,panZoom:F,getTransform:()=>S.getState().transform,getViewScale:()=>ce.current}),()=>{var Pe;(Pe=Ae.current)==null||Pe.destroy()}},[F]),w.useEffect(()=>{var Pe;(Pe=Ae.current)==null||Pe.update({translateExtent:I,width:T,height:Q,inversePan:j,pannable:g,zoomStep:x,zoomable:b})},[g,b,j,x,I,T,Q]);const pe=f?Pe=>{var yt;const[xe,ue]=((yt=Ae.current)==null?void 0:yt.pointer(Pe))||[0,0];f(Pe,{x:xe,y:ue})}:void 0,be=m?w.useCallback((Pe,xe)=>{const ue=S.getState().nodeLookup.get(xe).internals.userNode;m(Pe,ue)},[]):void 0,Ne=y??D["minimap.ariaLabel"];return a.jsx(Lk,{position:A,style:{...e,"--xy-minimap-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-width-props":typeof h=="number"?h*R:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="number"?o:void 0},className:ai(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:a.jsxs("svg",{width:M,height:U,viewBox:`${K} ${J} ${W} ${ne}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ae,ref:_,onClick:pe,children:[Ne&&a.jsx("title",{id:ae,children:Ne}),a.jsx(O_e,{onClick:be,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:s,nodeStrokeWidth:o,nodeComponent:c}),a.jsx("path",{className:"react-flow__minimap-mask",d:`M${K-q},${J-q}h${W+q*2}v${ne+q*2}h${-W-q*2}z
        M${L.x},${L.y}h${L.width}v${L.height}h${-L.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}zW.displayName="MiniMap";w.memo(zW);const q_e=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,K_e={[tm.Line]:"right",[tm.Handle]:"bottom-right"};function W_e({nodeId:e,position:t,variant:n=tm.Handle,className:r,style:s=void 0,children:i,color:o,minWidth:c=10,minHeight:l=10,maxWidth:d=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:h=!1,resizeDirection:A,autoScale:f=!0,shouldResize:m,onResizeStart:g,onResize:b,onResizeEnd:y}){const j=bW(),x=typeof e=="string"?e:j,C=hs(),S=w.useRef(null),_=n===tm.Handle,N=sr(w.useCallback(q_e(_&&f),[_,f]),bs),L=w.useRef(null),P=t??K_e[n];w.useEffect(()=>{if(!(!S.current||!x))return L.current||(L.current=dEe({domNode:S.current,nodeId:x,getStoreItems:()=>{const{nodeLookup:I,transform:T,snapGrid:Q,snapToGrid:D,nodeOrigin:M,domNode:U}=C.getState();return{nodeLookup:I,transform:T,snapGrid:Q,snapToGrid:D,nodeOrigin:M,paneDomNode:U}},onChange:(I,T)=>{const{triggerNodeChanges:Q,nodeLookup:D,parentLookup:M,nodeOrigin:U}=C.getState(),H=[],$={x:I.x,y:I.y},R=D.get(x);if(R&&R.expandParent&&R.parentId){const Y=R.origin??U,X=I.width??R.measured.width??0,q=I.height??R.measured.height??0,K={id:R.id,parentId:R.parentId,rect:{width:X,height:q,...OK({x:I.x??R.position.x,y:I.y??R.position.y},{width:X,height:q},R.parentId,D,Y)}},J=MT([K],D,M,U);H.push(...J),$.x=I.x?Math.max(Y[0]*X,I.x):void 0,$.y=I.y?Math.max(Y[1]*q,I.y):void 0}if($.x!==void 0&&$.y!==void 0){const Y={id:x,type:"position",position:{...$}};H.push(Y)}if(I.width!==void 0&&I.height!==void 0){const X={id:x,type:"dimensions",resizing:!0,setAttributes:A?A==="horizontal"?"width":"height":!0,dimensions:{width:I.width,height:I.height}};H.push(X)}for(const Y of T){const X={...Y,type:"position"};H.push(X)}Q(H)},onEnd:({width:I,height:T})=>{const Q={id:x,type:"dimensions",resizing:!1,dimensions:{width:I,height:T}};C.getState().triggerNodeChanges([Q])}})),L.current.update({controlPosition:P,boundaries:{minWidth:c,minHeight:l,maxWidth:d,maxHeight:u},keepAspectRatio:h,resizeDirection:A,onResizeStart:g,onResize:b,onResizeEnd:y,shouldResize:m}),()=>{var I;(I=L.current)==null||I.destroy()}},[P,c,l,d,u,h,g,b,y,m]);const F=P.split("-");return a.jsx("div",{className:ai(["react-flow__resize-control","nodrag",...F,n,r]),ref:S,style:{...s,scale:N,...o&&{[_?"backgroundColor":"borderColor"]:o}},children:i})}const XR=w.memo(W_e);function G_e({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:r,lineClassName:s,lineStyle:i,color:o,minWidth:c=10,minHeight:l=10,maxWidth:d=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:h=!1,autoScale:A=!0,shouldResize:f,onResizeStart:m,onResize:g,onResizeEnd:b}){return t?a.jsxs(a.Fragment,{children:[rEe.map(y=>a.jsx(XR,{className:s,style:i,nodeId:e,position:y,variant:tm.Line,color:o,minWidth:c,minHeight:l,maxWidth:d,maxHeight:u,onResizeStart:m,keepAspectRatio:h,autoScale:A,shouldResize:f,onResize:g,onResizeEnd:b},y)),nEe.map(y=>a.jsx(XR,{className:n,style:r,nodeId:e,position:y,color:o,minWidth:c,minHeight:l,maxWidth:d,maxHeight:u,onResizeStart:m,keepAspectRatio:h,autoScale:A,shouldResize:f,onResize:g,onResizeEnd:b},y))]}):null}const IB=e=>{const t=["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F7DC6F","#BB8FCE","#85C1E2","#F8B88B","#ABEBC6"],n=e.split("").reduce((r,s)=>s.charCodeAt(0)+((r<<5)-r),0);return t[Math.abs(n)%t.length]};function Y_e(e){const{user:t}=Dc(),[n,r]=w.useState([]),[s,i]=w.useState(!1),o=w.useRef(null),[c,l]=w.useState({});return w.useEffect(()=>{if(!e||!t){r([]),i(!1);return}console.log(" Connecting to presence channel for project:",e);const h=rt.channel(`project:${e}`,{config:{presence:{key:t.id}}});return h.on("presence",{event:"sync"},()=>{const A=h.presenceState();console.log(" Presence synced:",Object.keys(A).length,"collaborators");const f=[];Object.keys(A).forEach(m=>{const g=A[m];if(g&&g.length>0){const b=g[0];b.userId!==t.id&&f.push({userId:b.userId,email:b.email,displayName:b.displayName,avatarUrl:b.avatarUrl,color:b.color||IB(b.userId),cursorX:b.cursorX,cursorY:b.cursorY,selectedNodeIds:b.selectedNodeIds,lastActive:b.lastActive})}}),r(f),i(!0)}).on("presence",{event:"join"},({key:A,newPresences:f})=>{console.log(" User joined:",A,f)}).on("presence",{event:"leave"},({key:A,leftPresences:f})=>{console.log(" User left:",A,f)}).subscribe(async A=>{var f;if(console.log(" Channel status:",A),A==="SUBSCRIBED"){const{data:m}=await rt.from("profiles").select("display_name, avatar_url, email").eq("user_id",t.id).single(),g={userId:t.id,email:(m==null?void 0:m.email)||t.email||"",displayName:(m==null?void 0:m.display_name)||((f=t.email)==null?void 0:f.split("@")[0])||"Anonymous",avatarUrl:(m==null?void 0:m.avatar_url)||void 0,color:IB(t.id),lastActive:Date.now()};await h.track(g),console.log(" Initial presence sent:",g)}}),o.current=h,()=>{console.log(" Disconnecting from presence channel"),h.unsubscribe(),o.current=null,i(!1),r([])}},[e,t]),{collaborators:n,isConnected:s,updateCursor:async(h,A)=>{if(!o.current||!s)return;const f={cursorX:h,cursorY:A,lastActive:Date.now()};l(m=>({...m,...f})),await o.current.track(f)},updateSelection:async h=>{if(!o.current||!s)return;const A={selectedNodeIds:h,lastActive:Date.now()};l(f=>({...f,...A})),await o.current.track(A)},myColor:t?IB(t.id):"#666666"}}var PB=0;function VW(){w.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??JR()),document.body.insertAdjacentElement("beforeend",e[1]??JR()),PB++,()=>{PB===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),PB--}},[])}function JR(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ok="Dialog",[qW,KW]=Cs(Ok),[X_e,Ul]=qW(Ok),WW=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=e,c=w.useRef(null),l=w.useRef(null),[d,u]=fa({prop:r,defaultProp:s??!1,onChange:i,caller:Ok});return a.jsx(X_e,{scope:t,triggerRef:c,contentRef:l,contentId:$a(),titleId:$a(),descriptionId:$a(),open:d,onOpenChange:u,onOpenToggle:w.useCallback(()=>u(h=>!h),[u]),modal:o,children:n})};WW.displayName=Ok;var GW="DialogTrigger",YW=w.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Ul(GW,n),i=Wt(t,s.triggerRef);return a.jsx(gt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":$T(s.open),...r,ref:i,onClick:nn(e.onClick,s.onOpenToggle)})});YW.displayName=GW;var QT="DialogPortal",[J_e,XW]=qW(QT,{forceMount:void 0}),JW=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,i=Ul(QT,t);return a.jsx(J_e,{scope:t,forceMount:n,children:w.Children.map(r,o=>a.jsx(Ya,{present:n||i.open,children:a.jsx(Lv,{asChild:!0,container:s,children:o})}))})};JW.displayName=QT;var sj="DialogOverlay",ZW=w.forwardRef((e,t)=>{const n=XW(sj,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,i=Ul(sj,e.__scopeDialog);return i.modal?a.jsx(Ya,{present:r||i.open,children:a.jsx(eIe,{...s,ref:t})}):null});ZW.displayName=sj;var Z_e=GA("DialogOverlay.RemoveScroll"),eIe=w.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Ul(sj,n);return a.jsx(Bw,{as:Z_e,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(gt.div,{"data-state":$T(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),nm="DialogContent",eG=w.forwardRef((e,t)=>{const n=XW(nm,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,i=Ul(nm,e.__scopeDialog);return a.jsx(Ya,{present:r||i.open,children:i.modal?a.jsx(tIe,{...s,ref:t}):a.jsx(nIe,{...s,ref:t})})});eG.displayName=nm;var tIe=w.forwardRef((e,t)=>{const n=Ul(nm,e.__scopeDialog),r=w.useRef(null),s=Wt(t,n.contentRef,r);return w.useEffect(()=>{const i=r.current;if(i)return bk(i)},[]),a.jsx(tG,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:nn(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:nn(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0;(o.button===2||c)&&i.preventDefault()}),onFocusOutside:nn(e.onFocusOutside,i=>i.preventDefault())})}),nIe=w.forwardRef((e,t)=>{const n=Ul(nm,e.__scopeDialog),r=w.useRef(!1),s=w.useRef(!1);return a.jsx(tG,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,c;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(c=n.triggerRef.current)==null||c.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,d;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),tG=w.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=e,c=Ul(nm,n),l=w.useRef(null),d=Wt(t,l);return VW(),a.jsxs(a.Fragment,{children:[a.jsx(kw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(fw,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":$T(c.open),...o,ref:d,onDismiss:()=>c.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(sIe,{titleId:c.titleId}),a.jsx(aIe,{contentRef:l,descriptionId:c.descriptionId})]})]})}),HT="DialogTitle",nG=w.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Ul(HT,n);return a.jsx(gt.h2,{id:s.titleId,...r,ref:t})});nG.displayName=HT;var rG="DialogDescription",sG=w.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Ul(rG,n);return a.jsx(gt.p,{id:s.descriptionId,...r,ref:t})});sG.displayName=rG;var iG="DialogClose",aG=w.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Ul(iG,n);return a.jsx(gt.button,{type:"button",...r,ref:t,onClick:nn(e.onClick,()=>s.onOpenChange(!1))})});aG.displayName=iG;function $T(e){return e?"open":"closed"}var oG="DialogTitleWarning",[rIe,cG]=Ale(oG,{contentName:nm,titleName:HT,docsSlug:"dialog"}),sIe=({titleId:e})=>{const t=cG(oG),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return w.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},iIe="DialogDescriptionWarning",aIe=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${cG(iIe).contentName}}.`;return w.useEffect(()=>{var i;const s=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},lG=WW,dG=YW,uG=JW,zT=ZW,VT=eG,qT=nG,KT=sG,WT=aG;const zd=lG,GT=dG,oIe=uG,hG=w.forwardRef(({className:e,...t},n)=>a.jsx(zT,{ref:n,className:$e("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));hG.displayName=zT.displayName;const _l=w.forwardRef(({className:e,children:t,...n},r)=>a.jsxs(oIe,{children:[a.jsx(hG,{}),a.jsxs(VT,{ref:r,className:$e("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,a.jsxs(WT,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(_i,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));_l.displayName=VT.displayName;const Il=({className:e,...t})=>a.jsx("div",{className:$e("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Il.displayName="DialogHeader";const YT=({className:e,...t})=>a.jsx("div",{className:$e("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});YT.displayName="DialogFooter";const Pl=w.forwardRef(({className:e,...t},n)=>a.jsx(qT,{ref:n,className:$e("text-lg font-semibold leading-none tracking-tight",e),...t}));Pl.displayName=qT.displayName;const Vd=w.forwardRef(({className:e,...t},n)=>a.jsx(KT,{ref:n,className:$e("text-sm text-muted-foreground",e),...t}));Vd.displayName=KT.displayName;const ln=w.forwardRef(({className:e,type:t,...n},r)=>a.jsx("input",{type:t,className:$e("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));ln.displayName="Input";var cIe="Label",AG=w.forwardRef((e,t)=>a.jsx(gt.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));AG.displayName=cIe;var fG=AG;const lIe=Mv("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),at=w.forwardRef(({className:e,...t},n)=>a.jsx(fG,{ref:n,className:$e(lIe(),e),...t}));at.displayName=fG.displayName;const Qr=w.forwardRef(({className:e,...t},n)=>a.jsx("textarea",{className:$e("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Qr.displayName="Textarea";const Pu={horizontal:420,vertical:280,framework:{width:320,height:200},stage:{width:280,height:180},tool:{width:280,height:160},prompt:{width:800,height:300},"custom-prompt":{width:320,height:200},"ai-builder":{width:600,height:400}};function XT(e=Pu){const t=c=>{switch(c){case"framework":return e.framework;case"stage":return e.stage;case"tool":return e.tool;case"prompt":return e.prompt;case"custom-prompt":return e["custom-prompt"];case"ai-builder":return e["ai-builder"];default:return e.tool}},n=(c,l,d,u,h=80)=>{const A=t(d);return u.some(f=>{const m=t(f.type||"tool"),g=f.position.x,b=f.position.y,y=c<g+m.width+h&&c+A.width+h>g,j=l<b+m.height+h&&l+A.height+h>b;return y&&j})},r=(c,l,d)=>({x:l*e.horizontal,y:c*e.vertical}),s=(c,l,d=0,u=0)=>{let h=d,A=u;return n(h,A,c,l)?o(c,l,h,A):{x:h,y:A}},i=(c,l,d)=>{const u=t(c.type||"tool"),h=t(l);if(l==="prompt"){const f=d.filter(m=>{var g;return m.type==="prompt"&&((g=m.data)==null?void 0:g.sourceToolId)===c.id});if(f.length>0){const g=c.position.y+(u.height-h.height)/2+f.length*(h.height+80),b={x:c.position.x+u.width+e.horizontal*.8,y:g};if(!n(b.x,b.y,l,d))return b}}const A=[{x:c.position.x+u.width+e.horizontal*.8,y:c.position.y+(u.height-h.height)/2},{x:c.position.x+(u.width-h.width)/2,y:c.position.y+u.height+e.vertical*.6},{x:c.position.x+(u.width-h.width)/2,y:c.position.y-h.height-e.vertical*.6},{x:c.position.x-h.width-e.horizontal*.8,y:c.position.y+(u.height-h.height)/2}];for(const f of A){const m=Math.max(f.x,0),g=Math.max(f.y,0);if(!n(m,g,l,d))return{x:m,y:g}}return o(l,d,c.position.x,c.position.y)},o=(c,l,d=0,u=0)=>{const f=d||100,m=u||100;for(let b=0;b<25;b++)for(let y=0;y<15;y++){const j=f+y*e.horizontal,x=m+b*e.vertical;if(!n(j,x,c,l))return{x:j,y:x}}const g=Math.max(e.horizontal,e.vertical);for(let b=1;b<=10;b++)for(let y=0;y<360;y+=45){const j=f+Math.cos(y*Math.PI/180)*b*g,x=m+Math.sin(y*Math.PI/180)*b*g;if(j>=0&&x>=0&&!n(j,x,c,l))return{x:Math.round(j),y:Math.round(x)}}return{x:Math.max(100,l.length*200),y:Math.max(100,l.length*150)}};return{getNextPosition:s,getGridPosition:r,getConnectedPosition:i,getAvailablePosition:o}}function dIe(e,t=Pu){const n=uIe(e);return hIe(n,t)}function uIe(e){const t=e.filter(h=>h.type==="framework"),n=e.filter(h=>h.type==="stage"),r=e.filter(h=>h.type==="tool"),s=e.filter(h=>h.type==="prompt"),i=new Map;n.forEach(h=>{const A=t.find(f=>{var m,g,b,y,j;return((g=(m=h.data)==null?void 0:m.framework)==null?void 0:g.id)===((y=(b=f.data)==null?void 0:b.framework)==null?void 0:y.id)||((j=h.data)==null?void 0:j.frameworkId)===f.id})||t[0];A&&i.set(h.id,A)});const o=new Map;r.forEach(h=>{const A=n.find(f=>{var m,g,b,y,j,x,C,S,_;return((m=h.data)==null?void 0:m.stageId)===f.id||((b=(g=h.data)==null?void 0:g.stage)==null?void 0:b.id)===((j=(y=f.data)==null?void 0:y.stage)==null?void 0:j.id)||((C=(x=h.data)==null?void 0:x.tool)==null?void 0:C.stageId)&&((_=(S=f.data)==null?void 0:S.stage)==null?void 0:_.id)===h.data.tool.stageId})||n[0];A&&o.set(h.id,A)});const c=new Map;s.forEach(h=>{const A=r.find(f=>{var m,g;return((m=h.data)==null?void 0:m.sourceToolId)===f.id||((g=h.data)==null?void 0:g.toolId)===f.id})||r[0];A&&c.set(h.id,A)});const l=new Map;t.forEach(h=>{const A=n.filter(f=>{var m;return((m=i.get(f.id))==null?void 0:m.id)===h.id});l.set(h.id,A)});const d=new Map;n.forEach(h=>{const A=r.filter(f=>{var m;return((m=o.get(f.id))==null?void 0:m.id)===h.id});d.set(h.id,A)});const u=new Map;return r.forEach(h=>{const A=s.filter(f=>{var m;return((m=c.get(f.id))==null?void 0:m.id)===h.id});u.set(h.id,A)}),{frameworks:t,stages:n,tools:r,prompts:s,stageToFramework:i,toolToStage:o,promptToTool:c,frameworkToStages:l,stageToTools:d,toolToPrompts:u,orphanedNodes:e.filter(h=>!["framework","stage","tool","prompt"].includes(h.type||""))}}function hIe(e,t){const n=[],{frameworks:r,frameworkToStages:s,stageToTools:i,toolToPrompts:o,orphanedNodes:c}=e,l=XT(t),d=100,u=100,h=j=>{switch(j){case"framework":return t.framework;case"stage":return t.stage;case"tool":return t.tool;case"prompt":return t.prompt;case"custom-prompt":return t["custom-prompt"];case"ai-builder":return t["ai-builder"];default:return t.tool}},A=(j,x,C)=>{const S=h(j),_=80;return n.some(L=>{const P=h(L.type||"tool"),F=L.position.x,I=L.position.y,T=x<F+P.width+_&&x+S.width+_>F,Q=C<I+P.height+_&&C+S.height+_>I;return T&&Q})?l.getAvailablePosition(j,n,x,C):{x,y:C}},f={framework:d,stage:0,tool:0,prompt:0};let m=u;r.forEach((j,x)=>{const C=A("framework",f.framework,m);n.push({...j,position:C}),m=C.y+t.framework.height+t.vertical});const g=Math.max(...n.filter(j=>j.type==="framework").map(j=>j.position.x+t.framework.width),f.framework);f.stage=g+t.horizontal,r.forEach(j=>{const x=n.find(_=>_.id===j.id);if(!x)return;const C=s.get(j.id)||[];let S=x.position.y;C.forEach((_,N)=>{const L=S+N*(t.stage.height+t.vertical*.7),P=A("stage",f.stage,L);n.push({..._,position:P}),S=Math.max(S,P.y+t.stage.height+t.vertical*.7)})});const b=Math.max(...n.filter(j=>j.type==="stage").map(j=>j.position.x+t.stage.width),f.stage);f.tool=b+t.horizontal,n.filter(j=>j.type==="stage").forEach(j=>{const x=i.get(j.id)||[];let C=j.position.y;x.forEach((S,_)=>{const N=C+_*(t.tool.height+t.vertical*.5),L=A("tool",f.tool,N);n.push({...S,position:L}),C=Math.max(C,L.y+t.tool.height+t.vertical*.5)})});const y=Math.max(...n.filter(j=>j.type==="tool").map(j=>j.position.x+t.tool.width),f.tool);return f.prompt=y+t.horizontal,n.filter(j=>j.type==="tool").forEach(j=>{const x=o.get(j.id)||[];let C=j.position.y;x.forEach((S,_)=>{const N=C+_*(t.prompt.height+t.vertical*.4),L=A("prompt",f.prompt,N);n.push({...S,position:L}),C=Math.max(C,L.y+t.prompt.height+t.vertical*.4)})}),c.forEach(j=>{const{x,y:C}=l.getAvailablePosition(j.type||"tool",n);n.push({...j,position:{x,y:C}})}),n}function fo(e,t,n){const r=XT();if(n!=null&&n.sourceNodeId){const c=t.find(l=>l.id===n.sourceNodeId);if(c)return r.getConnectedPosition(c,e,t)}if(e==="ai-builder"){if(t.length===0)return{x:100,y:100};const c=u=>{switch(u){case"framework":return Pu.framework.height;case"stage":return Pu.stage.height;case"tool":return Pu.tool.height;case"prompt":return Pu.prompt.height;case"custom-prompt":return Pu["custom-prompt"].height;case"ai-builder":return Pu["ai-builder"].height;default:return Pu.framework.height}};let l=0;return t.forEach(u=>{const h=c(u.type||"framework"),A=u.position.y+h;A>l&&(l=A)}),{x:100,y:l+100}}const s=t.filter(c=>c.type===e),i=Math.floor(s.length/3),o=s.length%3;return r.getGridPosition(i,o,e)}function Jv({nodeId:e,nodeType:t,nodeData:n,position:r}){var S;const{toast:s}=ii(),{nodes:i,addNode:o,setNodes:c}=Us(),{entries:l}=pa();js();const[d,u]=w.useState(!1),[h,A]=w.useState(!1),[f,m]=w.useState({name:g(n,t),description:b(n,t),customProperties:{}});function g(_,N){var L,P,F,I,T,Q,D;switch(N){case"framework":return((L=_.framework)==null?void 0:L.name)||"Framework";case"stage":return((P=_.stage)==null?void 0:P.name)||"Stage";case"tool":return((F=_.tool)==null?void 0:F.name)||"Tool";case"prompt":return((Q=(T=(I=_.prompt)==null?void 0:I.context)==null?void 0:T.tool)==null?void 0:Q.name)||"Generated Prompt";case"custom-prompt":return((D=_.prompt)==null?void 0:D.title)||"Custom Prompt";default:return"Node"}}function b(_,N){var L,P,F,I,T,Q,D;switch(N){case"framework":return((L=_.framework)==null?void 0:L.description)||"";case"stage":return((P=_.stage)==null?void 0:P.description)||"";case"tool":return((F=_.tool)==null?void 0:F.description)||"";case"prompt":return"AI-generated prompt for "+(((Q=(T=(I=_.prompt)==null?void 0:I.context)==null?void 0:T.tool)==null?void 0:Q.name)||"workflow");case"custom-prompt":return((D=_.prompt)==null?void 0:D.description)||"Custom prompt from library";default:return""}}const y=()=>{const _=fo(t,i,{sourceNodeId:e,workflowType:"duplicate"}),N={id:`${t}-${Date.now()}`,type:t,position:{x:_.x+20,y:_.y+20},data:{...n,isDuplicate:!0,originalId:e}};o(N),s({title:"Node Duplicated",description:`${g(n,t)} has been duplicated`})},j=()=>{c(i.filter(_=>_.id!==e)),s({title:"Node Deleted",description:`${g(n,t)} has been removed from workflow`})},x=()=>{c(i.map(_=>_.id===e?{..._,data:{..._.data,customName:f.name,customDescription:f.description,customProperties:f.customProperties,isModified:!0}}:_)),u(!1),s({title:"Node Modified",description:"Node properties have been updated"})},C=_=>{const N=l.find(L=>L.id===_);N&&(c(i.map(L=>L.id===e?{...L,data:{...L.data,linkedKnowledge:N,hasKnowledgeLink:!0}}:L)),A(!1),s({title:"Knowledge Linked",description:`Linked to: ${N.title}`}))};return a.jsxs(a.Fragment,{children:[a.jsxs(xv,{children:[a.jsx(wv,{asChild:!0,children:a.jsx(fe,{size:"sm",variant:"ghost",className:"w-8 h-8 p-0 hover:bg-accent",onClick:_=>_.stopPropagation(),children:a.jsx(us,{className:"w-3 h-3"})})}),a.jsxs(Wp,{align:"end",className:"w-48",children:[a.jsxs(Or,{onClick:()=>u(!0),children:[a.jsx(Xu,{className:"w-4 h-4 mr-2"}),"Modify Node"]}),a.jsxs(Or,{onClick:y,children:[a.jsx(Ii,{className:"w-4 h-4 mr-2"}),"Duplicate Node"]}),a.jsxs(Or,{onClick:()=>A(!0),children:[a.jsx(fv,{className:"w-4 h-4 mr-2"}),"Link to Knowledge"]}),a.jsx(Gp,{}),a.jsxs(Or,{onClick:j,className:"text-destructive focus:text-destructive",children:[a.jsx(Pc,{className:"w-4 h-4 mr-2"}),"Delete Node"]})]})]}),a.jsx(zd,{open:d,onOpenChange:u,children:a.jsxs(_l,{className:"max-w-md",children:[a.jsxs(Il,{children:[a.jsxs(Pl,{children:["Modify ",t.charAt(0).toUpperCase()+t.slice(1)]}),a.jsx(Vd,{children:"Update the properties and configuration of this workflow node."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(at,{htmlFor:"node-name",children:"Name"}),a.jsx(ln,{id:"node-name",value:f.name,onChange:_=>m(N=>({...N,name:_.target.value})),placeholder:"Enter node name"})]}),a.jsxs("div",{children:[a.jsx(at,{htmlFor:"node-description",children:"Description"}),a.jsx(Qr,{id:"node-description",value:f.description,onChange:_=>m(N=>({...N,description:_.target.value})),placeholder:"Enter node description",rows:3})]}),(n==null?void 0:n.hasKnowledgeLink)&&a.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(xo,{className:"w-4 h-4 text-primary"}),a.jsx("span",{className:"text-sm font-medium",children:"Linked Knowledge"})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:(S=n.linkedKnowledge)==null?void 0:S.title})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsxs(fe,{variant:"outline",onClick:()=>u(!1),children:[a.jsx(_i,{className:"w-4 h-4 mr-2"}),"Cancel"]}),a.jsxs(fe,{onClick:x,children:[a.jsx(Od,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})]})}),a.jsx(zd,{open:h,onOpenChange:A,children:a.jsxs(_l,{className:"max-w-md",children:[a.jsxs(Il,{children:[a.jsx(Pl,{children:"Link to Knowledge Base"}),a.jsx(Vd,{children:"Connect this node to knowledge entries to provide context for AI prompt generation."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Select a knowledge base entry to link with this node. This will provide additional context for AI prompt generation."}),l.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(xo,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"No knowledge base entries found. Add some content to your project's knowledge base first."})]}):a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:l.map(_=>a.jsx("div",{className:"p-3 border rounded-lg cursor-pointer hover:bg-accent transition-colors",onClick:()=>C(_.id),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-sm truncate",children:_.title}),a.jsx("div",{className:"text-xs text-muted-foreground mt-1 max-h-8 overflow-hidden",children:a.jsxs("p",{className:"break-words",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:[_.content.substring(0,100),"..."]})})]}),a.jsx(_e,{variant:"secondary",className:"ml-2 text-xs",children:_.type})]})},_.id))}),a.jsx("div",{className:"flex justify-end",children:a.jsx(fe,{variant:"outline",onClick:()=>A(!1),children:"Cancel"})})]})]})})]})}const AIe={top:Yt.Top,right:Yt.Right,bottom:Yt.Bottom,left:Yt.Left},fIe={top:{x:"50%",y:"0%"},right:{x:"100%",y:"50%"},bottom:{x:"50%",y:"100%"},left:{x:"0%",y:"50%"}},Ds=({id:e,type:t,initialPosition:n="right",onPositionChange:r,className:s,nodeId:i})=>{const[o,c]=w.useState(n),[l,d]=w.useState(!1),[u,h]=w.useState({x:0,y:0}),A=w.useRef(null),f=w.useCallback(()=>{d(!0)},[]),m=w.useCallback((j,x)=>{const{x:C,y:S}=x.offset,_=30;let N=o;const L=Math.abs(C),P=Math.abs(S);(L>_||P>_)&&(L>P?N=C>0?"right":"left":N=S>0?"bottom":"top"),N!==o&&c(N),h({x:C,y:S})},[o]),g=w.useCallback(()=>{d(!1),h({x:0,y:0}),r==null||r(o)},[o,r]),b=fIe[o],y=j=>{switch(j){case"top":return"translate(-50%, -50%)";case"right":return"translate(-50%, -50%)";case"bottom":return"translate(-50%, -50%)";case"left":return"translate(-50%, -50%)";default:return"translate(-50%, -50%)"}};return a.jsxs(a.Fragment,{children:[a.jsx(ot.div,{ref:A,className:"absolute inset-0 pointer-events-none",style:{width:"100%",height:"100%"}}),a.jsxs(ot.div,{drag:!0,dragConstraints:A,dragElastic:.1,dragMomentum:!1,onDragStart:f,onDrag:m,onDragEnd:g,className:$e("absolute z-10 cursor-move",l&&"cursor-grabbing scale-125"),style:{left:b.x,top:b.y,transform:y(o),x:l?u.x:0,y:l?u.y:0},whileHover:{scale:1.1},whileDrag:{scale:1.2},animate:{left:b.x,top:b.y,transform:y(o),x:l?u.x:0,y:l?u.y:0},transition:{type:"spring",stiffness:500,damping:30},children:[a.jsx(wl,{type:t,position:AIe[o],id:e,className:$e("w-4 h-4 border-2 border-background transition-all duration-200","hover:scale-110 active:scale-125",l?"bg-primary-foreground ring-2 ring-primary ring-offset-1":"bg-primary",s)}),l&&a.jsx(ot.div,{className:"absolute -inset-2 rounded-full border-2 border-primary/50 bg-primary/10",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8}})]}),l&&a.jsxs(a.Fragment,{children:[a.jsx(ot.div,{className:"absolute w-12 h-1 bg-primary/50 rounded-full",style:{top:"0%",left:"50%",transform:"translate(-50%, -50%)"},initial:{opacity:0,scale:.8},animate:{opacity:o==="top"?1:.3,scale:o==="top"?1.2:1}}),a.jsx(ot.div,{className:"absolute w-1 h-12 bg-primary/50 rounded-full",style:{top:"50%",right:"0%",transform:"translate(50%, -50%)"},initial:{opacity:0,scale:.8},animate:{opacity:o==="right"?1:.3,scale:o==="right"?1.2:1}}),a.jsx(ot.div,{className:"absolute w-12 h-1 bg-primary/50 rounded-full",style:{bottom:"0%",left:"50%",transform:"translate(-50%, 50%)"},initial:{opacity:0,scale:.8},animate:{opacity:o==="bottom"?1:.3,scale:o==="bottom"?1.2:1}}),a.jsx(ot.div,{className:"absolute w-1 h-12 bg-primary/50 rounded-full",style:{top:"50%",left:"0%",transform:"translate(-50%, -50%)"},initial:{opacity:0,scale:.8},animate:{opacity:o==="left"?1:.3,scale:o==="left"?1.2:1}})]})]})},Zv=e=>{const[t,n]=w.useState({source:"right",target:"left"}),r=w.useCallback((s,i)=>{if(n(o=>({...o,[s]:i})),e){const o=`handle-positions-${e}`,c={...t,[s]:i};localStorage.setItem(o,JSON.stringify(c))}},[t,e]);return w.useEffect(()=>{if(e){const s=`handle-positions-${e}`,i=localStorage.getItem(s);if(i)try{const o=JSON.parse(i);n(o)}catch(o){console.warn("Failed to load handle positions:",o)}}},[e]),{handlePositions:t,updateHandlePosition:r}},bu=(e,t)=>{const r={denim:{h:211,s:96,l:39},steel:{h:206,s:95,l:43},prussian:{h:212,s:40,l:25}}[e],s=Math.max(25,Math.min(50,r.l+t*2));return{primary:`hsl(${r.h}, ${r.s}%, ${s}%)`,secondary:`hsl(${r.h}, ${Math.max(30,r.s-40)}%, ${Math.min(95,85+t)})`,tertiary:`hsl(${r.h}, 20%, 97%)`,accent:`hsl(${r.h}, ${r.s}%, ${Math.max(30,s-10)})`,text:{primary:"#FFFFFF",secondary:"hsl(228, 100%, 7%)",light:`hsl(${r.h}, 20%, 45%)`,hover:"#FFFFFF"},background:{primary:`hsl(${r.h}, ${r.s}%, ${s}%)`,secondary:`hsl(${r.h}, ${Math.max(20,r.s-60)}%, 96%)`,tertiary:"#FFFFFF",hover:`hsl(${r.h}, ${r.s}%, ${Math.max(20,s-8)})`},border:{primary:`hsl(${r.h}, ${r.s}%, ${s}%)`,secondary:`hsl(${r.h}, 30%, 80%)`,tertiary:`hsl(${r.h}, 20%, 90%)`},tailwind:{framework:[`bg-[hsl(${r.h},${r.s}%,${s}%)]`,`border-[hsl(${r.h},${r.s}%,${s}%)]`,"text-white",`hover:bg-[hsl(${r.h},${r.s}%,${Math.max(20,s-8)}%)]`],stage:[`bg-[hsl(${r.h},${Math.max(20,r.s-60)}%,96%)]`,`border-[hsl(${r.h},30%,80%)]`,"text-[hsl(228,100%,7%)]",`hover:bg-[hsl(${r.h},${Math.max(30,r.s-50)}%,92%)]`],tool:["bg-white",`border-[hsl(${r.h},20%,90%)]`,"text-[hsl(228,100%,7%)]",`hover:bg-[hsl(${r.h},20%,97%)]`]}}},ZR={"design-thinking":bu("denim",0),"double-diamond":bu("steel",2),"google-design-sprint":bu("denim",4),"human-centered-design":bu("prussian",8),"jobs-to-be-done":bu("steel",1),"lean-ux":bu("denim",2),"agile-ux":bu("steel",3),"heart-framework":bu("prussian",6),"hooked-model":bu("denim",3)};function rm(e){return ZR[e]||ZR["design-thinking"]}function d0(e,t){return rm(e).tailwind[t]}const pG=w.memo(({data:e,selected:t,id:n})=>{var g;const{stage:r,framework:s,isActive:i,isCompleted:o}=e,{addNode:c,addEdge:l,nodes:d}=Us(),{handlePositions:u,updateHandlePosition:h}=Zv(n),A=rm((s==null?void 0:s.id)||"design-thinking"),f=b=>{const y=fo("tool",d,{sourceNodeId:n,workflowType:"stage-to-tool"}),j={id:`tool-${b.id}-${Date.now()}`,type:"tool",position:y,data:{tool:b,stage:r,framework:s}};if(c(j),n){const x={id:`edge-${n}-${j.id}`,source:n,target:j.id,type:"smoothstep",animated:!0,style:{stroke:"hsl(var(--primary))"}};l(x)}},m=()=>{d.filter(y=>{var j;return y.type==="tool"&&y.data&&((j=y.data.stage)==null?void 0:j.id)===r.id}).length===0&&r.tools&&r.tools.forEach((y,j)=>{const x=fo("tool",d,{sourceNodeId:n,workflowType:"stage-to-tool"}),C={id:`tool-${y.id}-${Date.now()}-${j}`,type:"tool",position:x,data:{tool:y,stage:r,framework:s}};if(c(C),n){const S={id:`edge-${n}-${C.id}`,source:n,target:C.id,type:"smoothstep",animated:!0,style:{stroke:"hsl(var(--primary))"}};l(S)}})};return a.jsxs(ot.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},className:"w-72",children:[a.jsx(Ds,{id:"target-1",type:"target",initialPosition:u["target-1"]||"top",onPositionChange:b=>h("target-1",b),nodeId:n}),a.jsx(Ds,{id:"target-2",type:"target",initialPosition:u["target-2"]||"left",onPositionChange:b=>h("target-2",b),nodeId:n}),a.jsxs(De,{className:`w-full p-4 transition-all duration-300 shadow-lg hover:shadow-xl flex flex-col ${t?"ring-2 ring-offset-2":""}`,style:{backgroundColor:i?A.background.hover:A.background.secondary,borderTopWidth:"2px",borderRightWidth:"2px",borderBottomWidth:"2px",borderLeftWidth:"4px",borderTopColor:t?A.border.primary:o?"#10B981":A.border.tertiary,borderRightColor:t?A.border.primary:o?"#10B981":A.border.tertiary,borderBottomColor:t?A.border.primary:o?"#10B981":A.border.tertiary,borderLeftColor:A.border.secondary,borderStyle:"solid",...t&&{"--tw-ring-color":A.border.primary,"--tw-ring-offset-shadow":`0 0 0 2px ${A.background.secondary}`,"--tw-ring-shadow":`0 0 0 calc(2px + 2px) ${A.border.primary}`}},children:[a.jsxs("div",{className:"flex items-center justify-between flex-shrink-0 mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:o?"#10B981":i?A.background.primary:A.border.tertiary}}),a.jsx("h3",{className:"font-semibold text-sm",style:{color:A.text.secondary},children:r.name})]}),a.jsx(fe,{variant:"ghost",size:"sm",className:"w-6 h-6 p-0",children:a.jsx(yx,{className:"w-3 h-3"})})]}),a.jsx("div",{className:"flex-shrink-0 mb-3 max-h-12 overflow-hidden",children:a.jsx("p",{className:"text-xs leading-relaxed line-clamp-2",style:{color:A.text.light},children:r.description})}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs mb-2 flex-shrink-0",children:[a.jsx("span",{style:{color:A.text.light},children:"Tools"}),a.jsx(_e,{className:"text-xs font-medium",style:{backgroundColor:A.background.primary,color:A.text.primary,borderColor:A.border.primary},children:((g=r.tools)==null?void 0:g.length)||0})]}),a.jsx("div",{className:"space-y-1",children:(r.tools||[]).map(b=>a.jsxs("div",{className:"flex items-center justify-between p-1 rounded cursor-pointer group text-xs flex-shrink-0 transition-colors duration-200",style:{backgroundColor:A.background.tertiary,borderLeft:`2px solid ${A.border.tertiary}`},onMouseEnter:y=>{y.currentTarget.style.backgroundColor=A.background.hover;const j=y.currentTarget.querySelector("[data-tool-item-title]");j&&(j.style.color=A.text.hover)},onMouseLeave:y=>{y.currentTarget.style.backgroundColor=A.background.tertiary;const j=y.currentTarget.querySelector("[data-tool-item-title]");j&&(j.style.color=A.text.secondary)},onClick:()=>f(b),children:[a.jsx("span",{"data-tool-item-title":!0,className:"font-medium",style:{color:A.text.secondary},children:b.name}),a.jsx(ha,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity",style:{color:A.text.secondary}})]},b.id))})]}),a.jsxs("div",{className:"flex items-center space-x-2 mt-3 flex-shrink-0",children:[a.jsxs(fe,{size:"sm",className:"flex-1 text-xs h-7",style:{backgroundColor:A.background.primary,color:A.text.primary,borderColor:A.border.primary},onMouseEnter:b=>{b.currentTarget.style.backgroundColor=A.background.hover,b.currentTarget.style.color=A.text.hover},onMouseLeave:b=>{b.currentTarget.style.backgroundColor=A.background.primary,b.currentTarget.style.color=A.text.primary},onClick:m,children:[a.jsx(Kd,{className:"w-3 h-3 mr-1"}),"Run Stage"]}),a.jsx(Jv,{nodeId:n||"",nodeType:"stage",nodeData:e,position:{x:0,y:0}})]})]}),a.jsx(Ds,{id:"source-1",type:"source",initialPosition:u["source-1"]||"right",onPositionChange:b=>h("source-1",b),nodeId:n}),a.jsx(Ds,{id:"source-2",type:"source",initialPosition:u["source-2"]||"bottom",onPositionChange:b=>h("source-2",b),nodeId:n})]})});pG.displayName="StageNode";const mG=w.memo(({data:e,selected:t,id:n})=>{var f,m;const{framework:r,isSelected:s}=e,{addNode:i,addEdge:o,nodes:c}=Us(),{handlePositions:l,updateHandlePosition:d}=Zv(n),u=rm(r.id),h=g=>{const b=fo("stage",c,{sourceNodeId:n,workflowType:"framework-to-stage"}),y={id:`stage-${g.id}-${Date.now()}`,type:"stage",position:b,data:{stage:g,framework:r}};if(i(y),n){const j={id:`edge-${n}-${y.id}`,source:n,target:y.id,type:"smoothstep",animated:!0,style:{stroke:"hsl(var(--primary))"}};o(j)}},A=()=>{r.stages&&r.stages.forEach((g,b)=>{const y=fo("stage",c,{sourceNodeId:n,workflowType:"framework-to-stage"}),j={id:`stage-${g.id}-${Date.now()}-${b}`,type:"stage",position:y,data:{stage:g,framework:r}};if(i(j),n){const x={id:`edge-${n}-${j.id}`,source:n,target:j.id,type:"smoothstep",animated:!0,style:{stroke:"hsl(var(--primary))"}};o(x)}})};return a.jsxs(ot.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},className:"w-80",children:[a.jsxs(De,{className:`
        w-full p-6 transition-all duration-300 shadow-lg hover:shadow-xl flex flex-col
        ${t||s?"ring-2 ring-offset-2":""}
      `,style:{backgroundColor:u.background.tertiary,borderTopWidth:"2px",borderRightWidth:"2px",borderBottomWidth:"2px",borderLeftWidth:"6px",borderTopColor:t||s?u.border.primary:u.border.secondary,borderRightColor:t||s?u.border.primary:u.border.secondary,borderBottomColor:t||s?u.border.primary:u.border.secondary,borderLeftColor:u.border.primary,borderStyle:"solid",...t||s&&{"--tw-ring-color":u.border.primary,"--tw-ring-offset-shadow":`0 0 0 2px ${u.background.tertiary}`,"--tw-ring-shadow":`0 0 0 calc(2px + 2px) ${u.border.primary}`}},children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 flex-shrink-0",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:u.background.primary},children:a.jsx(Gu,{className:"w-5 h-5",style:{color:u.text.primary}})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg",style:{color:u.text.secondary},children:r.name}),a.jsxs("p",{className:"text-sm",style:{color:u.text.light},children:[((f=r.stages)==null?void 0:f.length)||0," stages"]})]})]}),a.jsx(fe,{variant:"ghost",size:"sm",className:"w-8 h-8 p-0",children:a.jsx(yx,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"flex-shrink-0 mb-4 max-h-20 overflow-hidden",children:a.jsx("p",{className:"text-sm leading-relaxed line-clamp-3",style:{color:u.text.light},children:r.description})}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm mb-3 flex-shrink-0",children:[a.jsx("span",{style:{color:u.text.light},children:"Stages"}),a.jsx(_e,{className:"font-medium",style:{backgroundColor:u.background.primary,color:u.text.primary,borderColor:u.border.primary},children:((m=r.stages)==null?void 0:m.length)||0})]}),a.jsx("div",{className:"space-y-2 p-1",children:(r.stages||[]).map(g=>a.jsx("div",{className:"p-2 rounded-md text-xs transition-colors cursor-pointer group flex-shrink-0",style:{backgroundColor:u.background.secondary,borderLeft:`3px solid ${u.border.secondary}`},onMouseEnter:b=>{b.currentTarget.style.backgroundColor=u.background.hover;const y=b.currentTarget.querySelector("[data-stage-item-title]"),j=b.currentTarget.querySelector("[data-stage-item-tools]");y&&(y.style.color=u.text.hover),j&&(j.style.color=u.text.hover)},onMouseLeave:b=>{b.currentTarget.style.backgroundColor=u.background.secondary;const y=b.currentTarget.querySelector("[data-stage-item-title]"),j=b.currentTarget.querySelector("[data-stage-item-tools]");y&&(y.style.color=u.text.secondary),j&&(j.style.color=u.text.light)},onClick:()=>h(g),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{"data-stage-item-title":!0,className:"font-medium",style:{color:u.text.secondary},children:g.name}),a.jsxs("div",{"data-stage-item-tools":!0,style:{color:u.text.light},children:[g.tools.length," tools"]})]}),a.jsx(ha,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity",style:{color:u.text.secondary}})]})},g.id))})]}),a.jsxs("div",{className:"flex items-center space-x-2 mt-4 flex-shrink-0",children:[a.jsxs(fe,{variant:"gradient-primary-subtle",className:"flex-1 text-sm h-8",onClick:A,children:[a.jsx(Gu,{className:"w-4 h-4 mr-2"}),"Use Framework"]}),a.jsx(Jv,{nodeId:n||"",nodeType:"framework",nodeData:e,position:{x:0,y:0}})]})]}),a.jsx(Ds,{id:"target-1",type:"target",initialPosition:l["target-1"]||"top",onPositionChange:g=>d("target-1",g),nodeId:n}),a.jsx(Ds,{id:"target-2",type:"target",initialPosition:l["target-2"]||"left",onPositionChange:g=>d("target-2",g),nodeId:n}),a.jsx(Ds,{id:"source-1",type:"source",initialPosition:l["source-1"]||"right",onPositionChange:g=>d("source-1",g),nodeId:n}),a.jsx(Ds,{id:"source-2",type:"source",initialPosition:l["source-2"]||"bottom",onPositionChange:g=>d("source-2",g),nodeId:n})]})});mG.displayName="FrameworkNode";var JT="Progress",ZT=100,[pIe,aqe]=Cs(JT),[mIe,gIe]=pIe(JT),gG=w.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:i=vIe,...o}=e;(s||s===0)&&!eO(s)&&console.error(yIe(`${s}`,"Progress"));const c=eO(s)?s:ZT;r!==null&&!tO(r,c)&&console.error(xIe(`${r}`,"Progress"));const l=tO(r,c)?r:null,d=ij(l)?i(l,c):void 0;return a.jsx(mIe,{scope:n,value:l,max:c,children:a.jsx(gt.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":ij(l)?l:void 0,"aria-valuetext":d,role:"progressbar","data-state":xG(l,c),"data-value":l??void 0,"data-max":c,...o,ref:t})})});gG.displayName=JT;var vG="ProgressIndicator",yG=w.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=gIe(vG,n);return a.jsx(gt.div,{"data-state":xG(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});yG.displayName=vG;function vIe(e,t){return`${Math.round(e/t*100)}%`}function xG(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function ij(e){return typeof e=="number"}function eO(e){return ij(e)&&!isNaN(e)&&e>0}function tO(e,t){return ij(e)&&!isNaN(e)&&e<=t&&e>=0}function yIe(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${ZT}\`.`}function xIe(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${ZT} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var wG=gG,wIe=yG;const bl=w.forwardRef(({className:e,value:t,...n},r)=>a.jsx(wG,{ref:r,className:$e("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:a.jsx(wIe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));bl.displayName=wG.displayName;function bG({isVisible:e,currentStep:t,totalSteps:n,onComplete:r}){const[s,i]=w.useState([{id:"analyzing",label:"Analyzing Context",description:"Processing framework, stage, and tool requirements",icon:a.jsx(Gs,{className:"w-4 h-4"}),status:"pending"},{id:"knowledge",label:"Gathering Knowledge",description:"Retrieving project context and knowledge base",icon:a.jsx(In,{className:"w-4 h-4"}),status:"pending"},{id:"generating",label:"Generating Prompt",description:"Creating AI-optimized prompt using expert frameworks",icon:a.jsx(gr,{className:"w-4 h-4"}),status:"pending"},{id:"saving",label:"Saving Prompt",description:"Storing generated prompt to database",icon:a.jsx(In,{className:"w-4 h-4"}),status:"pending"},{id:"executing",label:"Executing Prompt",description:"Auto-executing prompt to get deliverable",icon:a.jsx(Cr,{className:"w-4 h-4 animate-spin"}),status:"pending"},{id:"creating",label:"Updating Canvas",description:"Creating or updating prompt node with result",icon:a.jsx(br,{className:"w-4 h-4"}),status:"pending"}]),o=t/n*100;return w.useEffect(()=>{i(c=>c.map((l,d)=>({...l,status:d<t?"completed":d===t?"active":"pending"})))},[t]),w.useEffect(()=>{if(t>=n&&r){const c=setTimeout(r,1e3);return()=>clearTimeout(c)}},[t,n,r]),w.useEffect(()=>()=>{document.body.style.overflow="",document.body.style.pointerEvents=""},[]),Fl.createPortal(a.jsx(Pr,{children:e&&a.jsx(ot.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center pointer-events-none",children:a.jsx(ot.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",duration:.5},className:"w-96 max-w-sm pointer-events-auto",children:a.jsx(De,{className:"p-4 shadow-2xl bg-white/95 backdrop-blur-sm border border-gray-200/50",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(ot.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"inline-flex items-center justify-center w-10 h-10 rounded-full bg-gradient-to-br from-blue-500/20 to-purple-500/20 mb-3 border border-blue-200/50",children:a.jsx(gr,{className:"w-5 h-5 text-blue-600"})}),a.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:"Generating AI Prompt"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Creating intelligent prompts for your workflow"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600 font-medium",children:"Progress"}),a.jsxs("span",{className:"font-bold text-blue-600",children:[Math.round(o),"%"]})]}),a.jsx(bl,{value:o,className:"h-2 bg-gray-100"})]}),a.jsx("div",{className:"space-y-2",children:s.map((c,l)=>a.jsxs(ot.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:l*.1},className:`flex items-center gap-2 p-2 rounded-md transition-colors ${c.status==="active"?"bg-primary/5 border border-primary/20":c.status==="completed"?"bg-success/5 border border-success/20":"bg-muted/30"}`,children:[a.jsx("div",{className:`flex items-center justify-center w-6 h-6 rounded-full ${c.status==="active"?"bg-primary text-primary-foreground":c.status==="completed"?"bg-success text-success-foreground":"bg-muted text-muted-foreground"}`,children:c.status==="completed"?a.jsx(br,{className:"w-3 h-3"}):c.status==="active"&&c.id==="executing"?a.jsx(Cr,{className:"w-3 h-3 animate-spin"}):c.icon}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("p",{className:`font-medium text-xs ${c.status==="active"?"text-primary":c.status==="completed"?"text-success":"text-muted-foreground"}`,children:c.label})}),c.status==="active"&&a.jsx(ot.div,{animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0},className:"w-2 h-2 bg-primary rounded-full flex-shrink-0"})]},c.id))}),t>=n&&a.jsxs(ot.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center p-3 bg-success/10 rounded-lg border border-success/20",children:[a.jsx(br,{className:"w-5 h-5 text-success mx-auto mb-1"}),a.jsx("p",{className:"font-medium text-sm text-success",children:"Generated Successfully!"}),a.jsx("p",{className:"text-xs text-success/80",children:"Switching to prompt panel..."})]})]})})})})}),document.body)}function Kx(e,[t,n]){return Math.min(n,Math.max(t,e))}function bIe(e,t){return w.useReducer((n,r)=>t[n][r]??n,e)}var eF="ScrollArea",[CG,oqe]=Cs(eF),[CIe,Uc]=CG(eF),jG=w.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...o}=e,[c,l]=w.useState(null),[d,u]=w.useState(null),[h,A]=w.useState(null),[f,m]=w.useState(null),[g,b]=w.useState(null),[y,j]=w.useState(0),[x,C]=w.useState(0),[S,_]=w.useState(!1),[N,L]=w.useState(!1),P=Wt(t,I=>l(I)),F=uf(s);return a.jsx(CIe,{scope:n,type:r,dir:F,scrollHideDelay:i,scrollArea:c,viewport:d,onViewportChange:u,content:h,onContentChange:A,scrollbarX:f,onScrollbarXChange:m,scrollbarXEnabled:S,onScrollbarXEnabledChange:_,scrollbarY:g,onScrollbarYChange:b,scrollbarYEnabled:N,onScrollbarYEnabledChange:L,onCornerWidthChange:j,onCornerHeightChange:C,children:a.jsx(gt.div,{dir:F,...o,ref:P,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":x+"px",...e.style}})})});jG.displayName=eF;var kG="ScrollAreaViewport",SG=w.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=e,o=Uc(kG,n),c=w.useRef(null),l=Wt(t,c,o.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),a.jsx(gt.div,{"data-radix-scroll-area-viewport":"",...i,ref:l,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:a.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});SG.displayName=kG;var Yd="ScrollAreaScrollbar",tF=w.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Uc(Yd,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,c=e.orientation==="horizontal";return w.useEffect(()=>(c?i(!0):o(!0),()=>{c?i(!1):o(!1)}),[c,i,o]),s.type==="hover"?a.jsx(jIe,{...r,ref:t,forceMount:n}):s.type==="scroll"?a.jsx(kIe,{...r,ref:t,forceMount:n}):s.type==="auto"?a.jsx(NG,{...r,ref:t,forceMount:n}):s.type==="always"?a.jsx(nF,{...r,ref:t}):null});tF.displayName=Yd;var jIe=w.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Uc(Yd,e.__scopeScrollArea),[i,o]=w.useState(!1);return w.useEffect(()=>{const c=s.scrollArea;let l=0;if(c){const d=()=>{window.clearTimeout(l),o(!0)},u=()=>{l=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return c.addEventListener("pointerenter",d),c.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),c.removeEventListener("pointerenter",d),c.removeEventListener("pointerleave",u)}}},[s.scrollArea,s.scrollHideDelay]),a.jsx(Ya,{present:n||i,children:a.jsx(NG,{"data-state":i?"visible":"hidden",...r,ref:t})})}),kIe=w.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Uc(Yd,e.__scopeScrollArea),i=e.orientation==="horizontal",o=Hk(()=>l("SCROLL_END"),100),[c,l]=bIe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return w.useEffect(()=>{if(c==="idle"){const d=window.setTimeout(()=>l("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(d)}},[c,s.scrollHideDelay,l]),w.useEffect(()=>{const d=s.viewport,u=i?"scrollLeft":"scrollTop";if(d){let h=d[u];const A=()=>{const f=d[u];h!==f&&(l("SCROLL"),o()),h=f};return d.addEventListener("scroll",A),()=>d.removeEventListener("scroll",A)}},[s.viewport,i,l,o]),a.jsx(Ya,{present:n||c!=="hidden",children:a.jsx(nF,{"data-state":c==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:nn(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:nn(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),NG=w.forwardRef((e,t)=>{const n=Uc(Yd,e.__scopeScrollArea),{forceMount:r,...s}=e,[i,o]=w.useState(!1),c=e.orientation==="horizontal",l=Hk(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;o(c?d:u)}},10);return Bv(n.viewport,l),Bv(n.content,l),a.jsx(Ya,{present:r||i,children:a.jsx(nF,{"data-state":i?"visible":"hidden",...s,ref:t})})}),nF=w.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=Uc(Yd,e.__scopeScrollArea),i=w.useRef(null),o=w.useRef(0),[c,l]=w.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=PG(c.viewport,c.content),u={...r,sizes:c,onSizesChange:l,hasThumb:d>0&&d<1,onThumbChange:A=>i.current=A,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:A=>o.current=A};function h(A,f){return IIe(A,o.current,c,f)}return n==="horizontal"?a.jsx(SIe,{...u,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const A=s.viewport.scrollLeft,f=nO(A,c,s.dir);i.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:A=>{s.viewport&&(s.viewport.scrollLeft=A)},onDragScroll:A=>{s.viewport&&(s.viewport.scrollLeft=h(A,s.dir))}}):n==="vertical"?a.jsx(NIe,{...u,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const A=s.viewport.scrollTop,f=nO(A,c);i.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:A=>{s.viewport&&(s.viewport.scrollTop=A)},onDragScroll:A=>{s.viewport&&(s.viewport.scrollTop=h(A))}}):null}),SIe=w.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,i=Uc(Yd,e.__scopeScrollArea),[o,c]=w.useState(),l=w.useRef(null),d=Wt(t,l,i.onScrollbarXChange);return w.useEffect(()=>{l.current&&c(getComputedStyle(l.current))},[l]),a.jsx(EG,{"data-orientation":"horizontal",...s,ref:d,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Qk(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,h)=>{if(i.viewport){const A=i.viewport.scrollLeft+u.deltaX;e.onWheelScroll(A),FG(A,h)&&u.preventDefault()}},onResize:()=>{l.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:oj(o.paddingLeft),paddingEnd:oj(o.paddingRight)}})}})}),NIe=w.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,i=Uc(Yd,e.__scopeScrollArea),[o,c]=w.useState(),l=w.useRef(null),d=Wt(t,l,i.onScrollbarYChange);return w.useEffect(()=>{l.current&&c(getComputedStyle(l.current))},[l]),a.jsx(EG,{"data-orientation":"vertical",...s,ref:d,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Qk(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,h)=>{if(i.viewport){const A=i.viewport.scrollTop+u.deltaY;e.onWheelScroll(A),FG(A,h)&&u.preventDefault()}},onResize:()=>{l.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:oj(o.paddingTop),paddingEnd:oj(o.paddingBottom)}})}})}),[BIe,BG]=CG(Yd),EG=w.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:c,onThumbPositionChange:l,onDragScroll:d,onWheelScroll:u,onResize:h,...A}=e,f=Uc(Yd,n),[m,g]=w.useState(null),b=Wt(t,P=>g(P)),y=w.useRef(null),j=w.useRef(""),x=f.viewport,C=r.content-r.viewport,S=Nr(u),_=Nr(l),N=Hk(h,10);function L(P){if(y.current){const F=P.clientX-y.current.left,I=P.clientY-y.current.top;d({x:F,y:I})}}return w.useEffect(()=>{const P=F=>{const I=F.target;(m==null?void 0:m.contains(I))&&S(F,C)};return document.addEventListener("wheel",P,{passive:!1}),()=>document.removeEventListener("wheel",P,{passive:!1})},[x,m,C,S]),w.useEffect(_,[r,_]),Bv(m,N),Bv(f.content,N),a.jsx(BIe,{scope:n,scrollbar:m,hasThumb:s,onThumbChange:Nr(i),onThumbPointerUp:Nr(o),onThumbPositionChange:_,onThumbPointerDown:Nr(c),children:a.jsx(gt.div,{...A,ref:b,style:{position:"absolute",...A.style},onPointerDown:nn(e.onPointerDown,P=>{P.button===0&&(P.target.setPointerCapture(P.pointerId),y.current=m.getBoundingClientRect(),j.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),L(P))}),onPointerMove:nn(e.onPointerMove,L),onPointerUp:nn(e.onPointerUp,P=>{const F=P.target;F.hasPointerCapture(P.pointerId)&&F.releasePointerCapture(P.pointerId),document.body.style.webkitUserSelect=j.current,f.viewport&&(f.viewport.style.scrollBehavior=""),y.current=null})})})}),aj="ScrollAreaThumb",_G=w.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=BG(aj,e.__scopeScrollArea);return a.jsx(Ya,{present:n||s.hasThumb,children:a.jsx(EIe,{ref:t,...r})})}),EIe=w.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,i=Uc(aj,n),o=BG(aj,n),{onThumbPositionChange:c}=o,l=Wt(t,h=>o.onThumbChange(h)),d=w.useRef(void 0),u=Hk(()=>{d.current&&(d.current(),d.current=void 0)},100);return w.useEffect(()=>{const h=i.viewport;if(h){const A=()=>{if(u(),!d.current){const f=PIe(h,c);d.current=f,c()}};return c(),h.addEventListener("scroll",A),()=>h.removeEventListener("scroll",A)}},[i.viewport,u,c]),a.jsx(gt.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:nn(e.onPointerDownCapture,h=>{const f=h.target.getBoundingClientRect(),m=h.clientX-f.left,g=h.clientY-f.top;o.onThumbPointerDown({x:m,y:g})}),onPointerUp:nn(e.onPointerUp,o.onThumbPointerUp)})});_G.displayName=aj;var rF="ScrollAreaCorner",IG=w.forwardRef((e,t)=>{const n=Uc(rF,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?a.jsx(_Ie,{...e,ref:t}):null});IG.displayName=rF;var _Ie=w.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=Uc(rF,n),[i,o]=w.useState(0),[c,l]=w.useState(0),d=!!(i&&c);return Bv(s.scrollbarX,()=>{var h;const u=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(u),l(u)}),Bv(s.scrollbarY,()=>{var h;const u=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(u),o(u)}),d?a.jsx(gt.div,{...r,ref:t,style:{width:i,height:c,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function oj(e){return e?parseInt(e,10):0}function PG(e,t){const n=e/t;return isNaN(n)?0:n}function Qk(e){const t=PG(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function IIe(e,t,n,r="ltr"){const s=Qk(n),i=s/2,o=t||i,c=s-o,l=n.scrollbar.paddingStart+o,d=n.scrollbar.size-n.scrollbar.paddingEnd-c,u=n.content-n.viewport,h=r==="ltr"?[0,u]:[u*-1,0];return TG([l,d],h)(e)}function nO(e,t,n="ltr"){const r=Qk(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-s,o=t.content-t.viewport,c=i-r,l=n==="ltr"?[0,o]:[o*-1,0],d=Kx(e,l);return TG([0,o],[0,c])(d)}function TG(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function FG(e,t){return e>0&&e<t}var PIe=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const i={left:e.scrollLeft,top:e.scrollTop},o=n.left!==i.left,c=n.top!==i.top;(o||c)&&t(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function Hk(e,t){const n=Nr(e),r=w.useRef(0);return w.useEffect(()=>()=>window.clearTimeout(r.current),[]),w.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Bv(e,t){const n=Nr(t);Tr(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var DG=jG,TIe=SG,FIe=IG;const ns=w.forwardRef(({className:e,children:t,...n},r)=>a.jsxs(DG,{ref:r,className:$e("relative overflow-hidden",e),...n,children:[a.jsx(TIe,{className:"h-full w-full rounded-[inherit]",children:t}),a.jsx($k,{}),a.jsx(FIe,{})]}));ns.displayName=DG.displayName;const $k=w.forwardRef(({className:e,orientation:t="vertical",...n},r)=>a.jsx(tF,{ref:r,orientation:t,className:$e("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:a.jsx(_G,{className:"relative flex-1 rounded-full bg-border"})}));$k.displayName=tF.displayName;var TB="rovingFocusGroup.onEntryFocus",DIe={bubbles:!1,cancelable:!0},Lw="RovingFocusGroup",[G_,UG,UIe]=hm(Lw),[LIe,LG]=Cs(Lw,[UIe]),[MIe,RIe]=LIe(Lw),MG=w.forwardRef((e,t)=>a.jsx(G_.Provider,{scope:e.__scopeRovingFocusGroup,children:a.jsx(G_.Slot,{scope:e.__scopeRovingFocusGroup,children:a.jsx(OIe,{...e,ref:t})})}));MG.displayName=Lw;var OIe=w.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:l,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...h}=e,A=w.useRef(null),f=Wt(t,A),m=uf(i),[g,b]=fa({prop:o,defaultProp:c??null,onChange:l,caller:Lw}),[y,j]=w.useState(!1),x=Nr(d),C=UG(n),S=w.useRef(!1),[_,N]=w.useState(0);return w.useEffect(()=>{const L=A.current;if(L)return L.addEventListener(TB,x),()=>L.removeEventListener(TB,x)},[x]),a.jsx(MIe,{scope:n,orientation:r,dir:m,loop:s,currentTabStopId:g,onItemFocus:w.useCallback(L=>b(L),[b]),onItemShiftTab:w.useCallback(()=>j(!0),[]),onFocusableItemAdd:w.useCallback(()=>N(L=>L+1),[]),onFocusableItemRemove:w.useCallback(()=>N(L=>L-1),[]),children:a.jsx(gt.div,{tabIndex:y||_===0?-1:0,"data-orientation":r,...h,ref:f,style:{outline:"none",...e.style},onMouseDown:nn(e.onMouseDown,()=>{S.current=!0}),onFocus:nn(e.onFocus,L=>{const P=!S.current;if(L.target===L.currentTarget&&P&&!y){const F=new CustomEvent(TB,DIe);if(L.currentTarget.dispatchEvent(F),!F.defaultPrevented){const I=C().filter(U=>U.focusable),T=I.find(U=>U.active),Q=I.find(U=>U.id===g),M=[T,Q,...I].filter(Boolean).map(U=>U.ref.current);QG(M,u)}}S.current=!1}),onBlur:nn(e.onBlur,()=>j(!1))})})}),RG="RovingFocusGroupItem",OG=w.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...c}=e,l=$a(),d=i||l,u=RIe(RG,n),h=u.currentTabStopId===d,A=UG(n),{onFocusableItemAdd:f,onFocusableItemRemove:m,currentTabStopId:g}=u;return w.useEffect(()=>{if(r)return f(),()=>m()},[r,f,m]),a.jsx(G_.ItemSlot,{scope:n,id:d,focusable:r,active:s,children:a.jsx(gt.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...c,ref:t,onMouseDown:nn(e.onMouseDown,b=>{r?u.onItemFocus(d):b.preventDefault()}),onFocus:nn(e.onFocus,()=>u.onItemFocus(d)),onKeyDown:nn(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){u.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const y=$Ie(b,u.orientation,u.dir);if(y!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let x=A().filter(C=>C.focusable).map(C=>C.ref.current);if(y==="last")x.reverse();else if(y==="prev"||y==="next"){y==="prev"&&x.reverse();const C=x.indexOf(b.currentTarget);x=u.loop?zIe(x,C+1):x.slice(C+1)}setTimeout(()=>QG(x))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:g!=null}):o})})});OG.displayName=RG;var QIe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function HIe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function $Ie(e,t,n){const r=HIe(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return QIe[r]}function QG(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function zIe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var VIe=MG,qIe=OG,zk="Tabs",[KIe,cqe]=Cs(zk,[LG]),HG=LG(),[WIe,sF]=KIe(zk),$G=w.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:c,activationMode:l="automatic",...d}=e,u=uf(c),[h,A]=fa({prop:r,onChange:s,defaultProp:i??"",caller:zk});return a.jsx(WIe,{scope:n,baseId:$a(),value:h,onValueChange:A,orientation:o,dir:u,activationMode:l,children:a.jsx(gt.div,{dir:u,"data-orientation":o,...d,ref:t})})});$G.displayName=zk;var zG="TabsList",VG=w.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,i=sF(zG,n),o=HG(n);return a.jsx(VIe,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:a.jsx(gt.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:t})})});VG.displayName=zG;var qG="TabsTrigger",KG=w.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=e,o=sF(qG,n),c=HG(n),l=YG(o.baseId,r),d=XG(o.baseId,r),u=r===o.value;return a.jsx(qIe,{asChild:!0,...c,focusable:!s,active:u,children:a.jsx(gt.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...i,ref:t,onMouseDown:nn(e.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:nn(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:nn(e.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!s&&h&&o.onValueChange(r)})})})});KG.displayName=qG;var WG="TabsContent",GG=w.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=e,c=sF(WG,n),l=YG(c.baseId,r),d=XG(c.baseId,r),u=r===c.value,h=w.useRef(u);return w.useEffect(()=>{const A=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(A)},[]),a.jsx(Ya,{present:s||u,children:({present:A})=>a.jsx(gt.div,{"data-state":u?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":l,hidden:!A,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:A&&i})})});GG.displayName=WG;function YG(e,t){return`${e}-trigger-${t}`}function XG(e,t){return`${e}-content-${t}`}var GIe=$G,JG=VG,ZG=KG,eY=GG;const Ka=GIe,ga=w.forwardRef(({className:e,...t},n)=>a.jsx(JG,{ref:n,className:$e("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));ga.displayName=JG.displayName;const xn=w.forwardRef(({className:e,...t},n)=>a.jsx(ZG,{ref:n,className:$e("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));xn.displayName=ZG.displayName;const jn=w.forwardRef(({className:e,...t},n)=>a.jsx(eY,{ref:n,className:$e("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));jn.displayName=eY.displayName;function sm(e,t,n={}){const{sourceHandle:r=`${e}-source-1`,targetHandle:s=`${t}-target-1`,type:i="default",animated:o=!0,style:c={stroke:"hsl(var(--primary))",strokeWidth:2},id:l=`edge-${e}-${t}`}=n;return{id:l,source:e,sourceHandle:r,target:t,targetHandle:s,type:i,animated:o,style:c}}const tY=({isOpen:e,onClose:t,onKnowledgeSelected:n,toolName:r,toolId:s})=>{const{currentProject:i}=js(),{nodes:o,addNode:c,addEdge:l}=Us(),{entries:d,fetchEntries:u,addTextEntry:h,uploadFile:A,isLoading:f}=pa(),[m,g]=w.useState([]),[b,y]=w.useState("existing"),[j,x]=w.useState(""),[C,S]=w.useState(""),[_,N]=w.useState(""),[L,P]=w.useState(null),[F,I]=w.useState(!1);w.useEffect(()=>{e&&(i!=null&&i.id)&&u(i.id)},[e,i==null?void 0:i.id,u]);const T=$=>{g(R=>R.includes($)?R.filter(Y=>Y!==$):[...R,$])},Q=async()=>{if(!(!i||!j.trim()||!C.trim()))try{await h(i.id,j.trim(),C.trim()),x(""),S(""),Ue.success("Text entry created successfully"),await u(i.id)}catch($){Ue.error("Failed to create text entry"),console.error("Error creating text entry:",$)}},D=async()=>{if(!(!i||!L))try{await A(i.id,L,_.trim()||void 0),P(null),N(""),Ue.success("File uploaded and processed successfully"),await u(i.id)}catch($){Ue.error("Failed to upload file"),console.error("Error uploading file:",$)}},M=()=>{if(m.length===0){Ue.error("Please select at least one knowledge file to provide context");return}if(F&&s){const $=fo("context",o,{sourceNodeId:s,workflowType:"tool-to-context"}),R={id:`context-${Date.now()}`,type:"context",position:$,data:{knowledgeEntries:m,toolName:r,title:`${r} Context`,isActive:!0}};c(R);const Y=sm(s,R.id);l(Y)}n(m),t()},U=$=>{switch($){case"image":return a.jsx(XP,{className:"h-4 w-4"});case"document":return a.jsx(In,{className:"h-4 w-4"});default:return a.jsx(In,{className:"h-4 w-4"})}},H=d.length>0;return a.jsx(zd,{open:e,onOpenChange:t,children:a.jsxs(_l,{className:"max-w-2xl max-h-[80vh]",children:[a.jsxs(Il,{children:[a.jsxs(Pl,{className:"flex items-center gap-2",children:[a.jsx(Xo,{className:"h-5 w-5"}),"Select Knowledge for ",r]}),a.jsx(Vd,{children:"Link one or more knowledge entries to provide rich context for AI prompt generation. Selected files will be included in the generated prompt."})]}),H?a.jsxs("div",{className:"space-y-6",children:[a.jsxs(Ka,{value:b,onValueChange:$=>y($),children:[a.jsxs(ga,{className:"grid w-full grid-cols-3",children:[a.jsx(xn,{value:"existing",children:"Select Existing"}),a.jsx(xn,{value:"create",children:"Create New"}),a.jsx(xn,{value:"upload",children:"Upload File"})]}),a.jsxs(jn,{value:"existing",className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Select one or more knowledge entries to provide context for ",r]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(fe,{variant:"ghost",size:"sm",onClick:$=>{$.stopPropagation(),g(m.length===d.length?[]:d.map(R=>R.id))},className:"h-6 px-2 text-xs",children:m.length===d.length?"Deselect All":"Select All"}),a.jsxs(_e,{variant:"outline",children:[m.length," selected"]})]})]}),a.jsx(ns,{className:"h-60",children:a.jsx("div",{className:"space-y-2",children:d.map($=>a.jsx(De,{className:`p-3 cursor-pointer transition-all hover:shadow-sm ${m.includes($.id)?"border-primary bg-primary/5":"hover:border-primary/50"}`,onClick:()=>T($.id),children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[U($.type),a.jsx("input",{type:"checkbox",checked:m.includes($.id),onChange:R=>{R.stopPropagation(),T($.id)},onClick:R=>R.stopPropagation(),className:"h-4 w-4"})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-sm truncate",children:$.title}),a.jsx("div",{className:"text-xs text-muted-foreground mt-1 max-h-8 overflow-hidden",children:a.jsx("p",{className:"break-words",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:$.content})}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx(_e,{variant:"secondary",className:"text-xs",children:$.type}),a.jsx("span",{className:"text-xs text-muted-foreground",children:new Date($.created_at).toLocaleDateString()})]})]})]})},$.id))})}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"create-context-node",checked:F,onChange:$=>I($.target.checked),className:"h-4 w-4"}),a.jsx(at,{htmlFor:"create-context-node",className:"text-sm",children:"Create a context node for this knowledge"})]}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["This will create a visual node showing the knowledge linked to ",r]})]})]}),a.jsxs(jn,{value:"create",className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(at,{htmlFor:"new-text-title",children:"Title"}),a.jsx(ln,{id:"new-text-title",value:j,onChange:$=>x($.target.value),placeholder:`Context for ${r}`})]}),a.jsxs("div",{children:[a.jsx(at,{htmlFor:"new-text-content",children:"Content"}),a.jsx(Qr,{id:"new-text-content",value:C,onChange:$=>S($.target.value),placeholder:"Add context, requirements, examples, or any relevant information...",rows:6})]}),a.jsxs(fe,{onClick:$=>{$.stopPropagation(),Q()},disabled:!j.trim()||!C.trim()||f,className:"w-full",children:[a.jsx(ha,{className:"h-4 w-4 mr-2"}),"Create Knowledge Entry"]})]}),a.jsxs(jn,{value:"upload",className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(at,{htmlFor:"upload-title",children:"Title (optional)"}),a.jsx(ln,{id:"upload-title",value:_,onChange:$=>N($.target.value),placeholder:`Context for ${r}`})]}),a.jsxs("div",{children:[a.jsx(at,{htmlFor:"file-upload",children:"File"}),a.jsx(ln,{id:"file-upload",type:"file",onChange:$=>{var R;return P(((R=$.target.files)==null?void 0:R[0])||null)},accept:".pdf,.docx,.txt,.md,.jpg,.jpeg,.png"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Supported: PDF, DOCX, TXT, MD, JPG, PNG"})]}),a.jsxs(fe,{onClick:$=>{$.stopPropagation(),D()},disabled:!L||f,className:"w-full",children:[a.jsx(xx,{className:"h-4 w-4 mr-2"}),f?"Processing...":"Upload & Process"]})]})]}),H&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx(fe,{variant:"outline",onClick:$=>{$.stopPropagation(),t()},children:"Cancel"}),a.jsxs(fe,{onClick:$=>{$.stopPropagation(),M()},disabled:m.length===0,children:[a.jsx(fv,{className:"h-4 w-4 mr-2"}),"Link ",m.length," ",m.length===1?"File":"Files"]})]})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ts,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Knowledge Base Found"}),a.jsx("p",{className:"text-muted-foreground text-sm",children:"This project doesn't have any knowledge entries yet. Create some context to improve prompt generation."})]}),a.jsxs(Ka,{value:b,onValueChange:$=>y($),children:[a.jsxs(ga,{className:"grid w-full grid-cols-2",children:[a.jsx(xn,{value:"create",children:"Create Text"}),a.jsx(xn,{value:"upload",children:"Upload File"})]}),a.jsxs(jn,{value:"create",className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(at,{htmlFor:"new-text-title",children:"Title"}),a.jsx(ln,{id:"new-text-title",value:j,onChange:$=>x($.target.value),placeholder:`Context for ${r}`})]}),a.jsxs("div",{children:[a.jsx(at,{htmlFor:"new-text-content",children:"Content"}),a.jsx(Qr,{id:"new-text-content",value:C,onChange:$=>S($.target.value),placeholder:"Add context, requirements, examples, or any relevant information...",rows:6})]}),a.jsxs(fe,{onClick:$=>{$.stopPropagation(),Q()},disabled:!j.trim()||!C.trim()||f,className:"w-full",children:[a.jsx(ha,{className:"h-4 w-4 mr-2"}),"Create Knowledge Entry"]})]}),a.jsxs(jn,{value:"upload",className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(at,{htmlFor:"upload-title",children:"Title (optional)"}),a.jsx(ln,{id:"upload-title",value:_,onChange:$=>N($.target.value),placeholder:`Context for ${r}`})]}),a.jsxs("div",{children:[a.jsx(at,{htmlFor:"file-upload",children:"File"}),a.jsx(ln,{id:"file-upload",type:"file",onChange:$=>{var R;return P(((R=$.target.files)==null?void 0:R[0])||null)},accept:".pdf,.docx,.txt,.md,.jpg,.jpeg,.png"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Supported: PDF, DOCX, TXT, MD, JPG, PNG"})]}),a.jsxs(fe,{onClick:$=>{$.stopPropagation(),D()},disabled:!L||f,className:"w-full",children:[a.jsx(xx,{className:"h-4 w-4 mr-2"}),f?"Processing...":"Upload & Process"]})]})]})]})]})})};function ti(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}var YIe="DismissableLayer",Y_="dismissableLayer.update",XIe="dismissableLayer.pointerDownOutside",JIe="dismissableLayer.focusOutside",rO,nY=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),rY=w.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:c,...l}=e,d=w.useContext(nY),[u,h]=w.useState(null),A=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=w.useState({}),m=Wt(t,N=>h(N)),g=Array.from(d.layers),[b]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(b),j=u?g.indexOf(u):-1,x=d.layersWithOutsidePointerEventsDisabled.size>0,C=j>=y,S=tPe(N=>{const L=N.target,P=[...d.branches].some(F=>F.contains(L));!C||P||(s==null||s(N),o==null||o(N),N.defaultPrevented||c==null||c())},A),_=nPe(N=>{const L=N.target;[...d.branches].some(F=>F.contains(L))||(i==null||i(N),o==null||o(N),N.defaultPrevented||c==null||c())},A);return KP(N=>{j===d.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&c&&(N.preventDefault(),c()))},A),w.useEffect(()=>{if(u)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(rO=A.body.style.pointerEvents,A.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),sO(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(A.body.style.pointerEvents=rO)}},[u,A,n,d]),w.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),sO())},[u,d]),w.useEffect(()=>{const N=()=>f({});return document.addEventListener(Y_,N),()=>document.removeEventListener(Y_,N)},[]),a.jsx(gt.div,{...l,ref:m,style:{pointerEvents:x?C?"auto":"none":void 0,...e.style},onFocusCapture:ti(e.onFocusCapture,_.onFocusCapture),onBlurCapture:ti(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:ti(e.onPointerDownCapture,S.onPointerDownCapture)})});rY.displayName=YIe;var ZIe="DismissableLayerBranch",ePe=w.forwardRef((e,t)=>{const n=w.useContext(nY),r=w.useRef(null),s=Wt(t,r);return w.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),a.jsx(gt.div,{...e,ref:s})});ePe.displayName=ZIe;function tPe(e,t=globalThis==null?void 0:globalThis.document){const n=Nr(e),r=w.useRef(!1),s=w.useRef(()=>{});return w.useEffect(()=>{const i=c=>{if(c.target&&!r.current){let l=function(){sY(XIe,n,d,{discrete:!0})};const d={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=l,t.addEventListener("click",s.current,{once:!0})):l()}else t.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function nPe(e,t=globalThis==null?void 0:globalThis.document){const n=Nr(e),r=w.useRef(!1);return w.useEffect(()=>{const s=i=>{i.target&&!r.current&&sY(JIe,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function sO(){const e=new CustomEvent(Y_);document.dispatchEvent(e)}function sY(e,t,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Aw(s,i):s.dispatchEvent(i)}var FB=0;function rPe(){w.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??iO()),document.body.insertAdjacentElement("beforeend",e[1]??iO()),FB++,()=>{FB===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),FB--}},[])}function iO(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var iF="Popper",[iY,aY]=Cs(iF),[sPe,oY]=iY(iF),cY=e=>{const{__scopePopper:t,children:n}=e,[r,s]=w.useState(null);return a.jsx(sPe,{scope:t,anchor:r,onAnchorChange:s,children:n})};cY.displayName=iF;var lY="PopperAnchor",dY=w.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,i=oY(lY,n),o=w.useRef(null),c=Wt(t,o),l=w.useRef(null);return w.useEffect(()=>{const d=l.current;l.current=(r==null?void 0:r.current)||o.current,d!==l.current&&i.onAnchorChange(l.current)}),r?null:a.jsx(gt.div,{...s,ref:c})});dY.displayName=lY;var aF="PopperContent",[iPe,aPe]=iY(aF),uY=w.forwardRef((e,t)=>{var ae,ce,Ae,pe,be,Ne;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:c=0,avoidCollisions:l=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:A=!1,updatePositionStrategy:f="optimized",onPlaced:m,...g}=e,b=oY(aF,n),[y,j]=w.useState(null),x=Wt(t,Pe=>j(Pe)),[C,S]=w.useState(null),_=$v(C),N=(_==null?void 0:_.width)??0,L=(_==null?void 0:_.height)??0,P=r+(i!=="center"?"-"+i:""),F=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},I=Array.isArray(d)?d:[d],T=I.length>0,Q={padding:F,boundary:I.filter(cPe),altBoundary:T},{refs:D,floatingStyles:M,placement:U,isPositioned:H,middlewareData:$}=l4({strategy:"fixed",placement:P,whileElementsMounted:(...Pe)=>c4(...Pe,{animationFrame:f==="always"}),elements:{reference:b.anchor},middleware:[d4({mainAxis:s+L,alignmentAxis:o}),l&&u4({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?h4():void 0,...Q}),l&&A4({...Q}),f4({...Q,apply:({elements:Pe,rects:xe,availableWidth:ue,availableHeight:yt})=>{const{width:ht,height:Ct}=xe.reference,Me=Pe.floating.style;Me.setProperty("--radix-popper-available-width",`${ue}px`),Me.setProperty("--radix-popper-available-height",`${yt}px`),Me.setProperty("--radix-popper-anchor-width",`${ht}px`),Me.setProperty("--radix-popper-anchor-height",`${Ct}px`)}}),C&&m4({element:C,padding:c}),lPe({arrowWidth:N,arrowHeight:L}),A&&p4({strategy:"referenceHidden",...Q})]}),[R,Y]=fY(U),X=Nr(m);Tr(()=>{H&&(X==null||X())},[H,X]);const q=(ae=$.arrow)==null?void 0:ae.x,K=(ce=$.arrow)==null?void 0:ce.y,J=((Ae=$.arrow)==null?void 0:Ae.centerOffset)!==0,[W,ne]=w.useState();return Tr(()=>{y&&ne(window.getComputedStyle(y).zIndex)},[y]),a.jsx("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:{...M,transform:H?M.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:W,"--radix-popper-transform-origin":[(pe=$.transformOrigin)==null?void 0:pe.x,(be=$.transformOrigin)==null?void 0:be.y].join(" "),...((Ne=$.hide)==null?void 0:Ne.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:a.jsx(iPe,{scope:n,placedSide:R,onArrowChange:S,arrowX:q,arrowY:K,shouldHideArrow:J,children:a.jsx(gt.div,{"data-side":R,"data-align":Y,...g,ref:x,style:{...g.style,animation:H?void 0:"none"}})})})});uY.displayName=aF;var hY="PopperArrow",oPe={top:"bottom",right:"left",bottom:"top",left:"right"},AY=w.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,i=aPe(hY,r),o=oPe[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(g4,{...s,ref:n,style:{...s.style,display:"block"}})})});AY.displayName=hY;function cPe(e){return e!==null}var lPe=e=>({name:"transformOrigin",options:e,fn(t){var b,y,j;const{placement:n,rects:r,middlewareData:s}=t,o=((b=s.arrow)==null?void 0:b.centerOffset)!==0,c=o?0:e.arrowWidth,l=o?0:e.arrowHeight,[d,u]=fY(n),h={start:"0%",center:"50%",end:"100%"}[u],A=(((y=s.arrow)==null?void 0:y.x)??0)+c/2,f=(((j=s.arrow)==null?void 0:j.y)??0)+l/2;let m="",g="";return d==="bottom"?(m=o?h:`${A}px`,g=`${-l}px`):d==="top"?(m=o?h:`${A}px`,g=`${r.floating.height+l}px`):d==="right"?(m=`${-l}px`,g=o?h:`${f}px`):d==="left"&&(m=`${r.floating.width+l}px`,g=o?h:`${f}px`),{data:{x:m,y:g}}}});function fY(e){const[t,n="center"]=e.split("-");return[t,n]}var dPe=cY,uPe=dY,hPe=uY,APe=AY;function Vk(e){const t=w.useRef({value:e,previous:e});return w.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var fPe=[" ","Enter","ArrowUp","ArrowDown"],pPe=[" ","Enter"],im="Select",[qk,Kk,mPe]=hm(im),[ey,lqe]=Cs(im,[mPe,aY]),Wk=aY(),[gPe,hf]=ey(im),[vPe,yPe]=ey(im),pY=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:c,onValueChange:l,dir:d,name:u,autoComplete:h,disabled:A,required:f,form:m}=e,g=Wk(t),[b,y]=w.useState(null),[j,x]=w.useState(null),[C,S]=w.useState(!1),_=uf(d),[N,L]=fa({prop:r,defaultProp:s??!1,onChange:i,caller:im}),[P,F]=fa({prop:o,defaultProp:c,onChange:l,caller:im}),I=w.useRef(null),T=b?m||!!b.closest("form"):!0,[Q,D]=w.useState(new Set),M=Array.from(Q).map(U=>U.props.value).join(";");return a.jsx(dPe,{...g,children:a.jsxs(gPe,{required:f,scope:t,trigger:b,onTriggerChange:y,valueNode:j,onValueNodeChange:x,valueNodeHasChildren:C,onValueNodeHasChildrenChange:S,contentId:$a(),value:P,onValueChange:F,open:N,onOpenChange:L,dir:_,triggerPointerDownPosRef:I,disabled:A,children:[a.jsx(qk.Provider,{scope:t,children:a.jsx(vPe,{scope:e.__scopeSelect,onNativeOptionAdd:w.useCallback(U=>{D(H=>new Set(H).add(U))},[]),onNativeOptionRemove:w.useCallback(U=>{D(H=>{const $=new Set(H);return $.delete(U),$})},[]),children:n})}),T?a.jsxs(RY,{"aria-hidden":!0,required:f,tabIndex:-1,name:u,autoComplete:h,value:P,onChange:U=>F(U.target.value),disabled:A,form:m,children:[P===void 0?a.jsx("option",{value:""}):null,Array.from(Q)]},M):null]})})};pY.displayName=im;var mY="SelectTrigger",gY=w.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,i=Wk(n),o=hf(mY,n),c=o.disabled||r,l=Wt(t,o.onTriggerChange),d=Kk(n),u=w.useRef("touch"),[h,A,f]=QY(g=>{const b=d().filter(x=>!x.disabled),y=b.find(x=>x.value===o.value),j=HY(b,g,y);j!==void 0&&o.onValueChange(j.value)}),m=g=>{c||(o.onOpenChange(!0),f()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return a.jsx(uPe,{asChild:!0,...i,children:a.jsx(gt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":OY(o.value)?"":void 0,...s,ref:l,onClick:ti(s.onClick,g=>{g.currentTarget.focus(),u.current!=="mouse"&&m(g)}),onPointerDown:ti(s.onPointerDown,g=>{u.current=g.pointerType;const b=g.target;b.hasPointerCapture(g.pointerId)&&b.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(m(g),g.preventDefault())}),onKeyDown:ti(s.onKeyDown,g=>{const b=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&A(g.key),!(b&&g.key===" ")&&fPe.includes(g.key)&&(m(),g.preventDefault())})})})});gY.displayName=mY;var vY="SelectValue",yY=w.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...c}=e,l=hf(vY,n),{onValueNodeHasChildrenChange:d}=l,u=i!==void 0,h=Wt(t,l.onValueNodeChange);return Tr(()=>{d(u)},[d,u]),a.jsx(gt.span,{...c,ref:h,style:{pointerEvents:"none"},children:OY(l.value)?a.jsx(a.Fragment,{children:o}):i})});yY.displayName=vY;var xPe="SelectIcon",xY=w.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return a.jsx(gt.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});xY.displayName=xPe;var wPe="SelectPortal",wY=e=>a.jsx(Lv,{asChild:!0,...e});wY.displayName=wPe;var am="SelectContent",bY=w.forwardRef((e,t)=>{const n=hf(am,e.__scopeSelect),[r,s]=w.useState();if(Tr(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Fl.createPortal(a.jsx(CY,{scope:e.__scopeSelect,children:a.jsx(qk.Slot,{scope:e.__scopeSelect,children:a.jsx("div",{children:e.children})})}),i):null}return a.jsx(jY,{...e,ref:t})});bY.displayName=am;var ll=10,[CY,Af]=ey(am),bPe="SelectContentImpl",CPe=GA("SelectContent.RemoveScroll"),jY=w.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:c,sideOffset:l,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:A,collisionPadding:f,sticky:m,hideWhenDetached:g,avoidCollisions:b,...y}=e,j=hf(am,n),[x,C]=w.useState(null),[S,_]=w.useState(null),N=Wt(t,ae=>C(ae)),[L,P]=w.useState(null),[F,I]=w.useState(null),T=Kk(n),[Q,D]=w.useState(!1),M=w.useRef(!1);w.useEffect(()=>{if(x)return bk(x)},[x]),rPe();const U=w.useCallback(ae=>{const[ce,...Ae]=T().map(Ne=>Ne.ref.current),[pe]=Ae.slice(-1),be=document.activeElement;for(const Ne of ae)if(Ne===be||(Ne==null||Ne.scrollIntoView({block:"nearest"}),Ne===ce&&S&&(S.scrollTop=0),Ne===pe&&S&&(S.scrollTop=S.scrollHeight),Ne==null||Ne.focus(),document.activeElement!==be))return},[T,S]),H=w.useCallback(()=>U([L,x]),[U,L,x]);w.useEffect(()=>{Q&&H()},[Q,H]);const{onOpenChange:$,triggerPointerDownPosRef:R}=j;w.useEffect(()=>{if(x){let ae={x:0,y:0};const ce=pe=>{var be,Ne;ae={x:Math.abs(Math.round(pe.pageX)-(((be=R.current)==null?void 0:be.x)??0)),y:Math.abs(Math.round(pe.pageY)-(((Ne=R.current)==null?void 0:Ne.y)??0))}},Ae=pe=>{ae.x<=10&&ae.y<=10?pe.preventDefault():x.contains(pe.target)||$(!1),document.removeEventListener("pointermove",ce),R.current=null};return R.current!==null&&(document.addEventListener("pointermove",ce),document.addEventListener("pointerup",Ae,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ce),document.removeEventListener("pointerup",Ae,{capture:!0})}}},[x,$,R]),w.useEffect(()=>{const ae=()=>$(!1);return window.addEventListener("blur",ae),window.addEventListener("resize",ae),()=>{window.removeEventListener("blur",ae),window.removeEventListener("resize",ae)}},[$]);const[Y,X]=QY(ae=>{const ce=T().filter(be=>!be.disabled),Ae=ce.find(be=>be.ref.current===document.activeElement),pe=HY(ce,ae,Ae);pe&&setTimeout(()=>pe.ref.current.focus())}),q=w.useCallback((ae,ce,Ae)=>{const pe=!M.current&&!Ae;(j.value!==void 0&&j.value===ce||pe)&&(P(ae),pe&&(M.current=!0))},[j.value]),K=w.useCallback(()=>x==null?void 0:x.focus(),[x]),J=w.useCallback((ae,ce,Ae)=>{const pe=!M.current&&!Ae;(j.value!==void 0&&j.value===ce||pe)&&I(ae)},[j.value]),W=r==="popper"?X_:kY,ne=W===X_?{side:c,sideOffset:l,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:A,collisionPadding:f,sticky:m,hideWhenDetached:g,avoidCollisions:b}:{};return a.jsx(CY,{scope:n,content:x,viewport:S,onViewportChange:_,itemRefCallback:q,selectedItem:L,onItemLeave:K,itemTextRefCallback:J,focusSelectedItem:H,selectedItemText:F,position:r,isPositioned:Q,searchRef:Y,children:a.jsx(Bw,{as:CPe,allowPinchZoom:!0,children:a.jsx(kw,{asChild:!0,trapped:j.open,onMountAutoFocus:ae=>{ae.preventDefault()},onUnmountAutoFocus:ti(s,ae=>{var ce;(ce=j.trigger)==null||ce.focus({preventScroll:!0}),ae.preventDefault()}),children:a.jsx(rY,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:ae=>ae.preventDefault(),onDismiss:()=>j.onOpenChange(!1),children:a.jsx(W,{role:"listbox",id:j.contentId,"data-state":j.open?"open":"closed",dir:j.dir,onContextMenu:ae=>ae.preventDefault(),...y,...ne,onPlaced:()=>D(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:ti(y.onKeyDown,ae=>{const ce=ae.ctrlKey||ae.altKey||ae.metaKey;if(ae.key==="Tab"&&ae.preventDefault(),!ce&&ae.key.length===1&&X(ae.key),["ArrowUp","ArrowDown","Home","End"].includes(ae.key)){let pe=T().filter(be=>!be.disabled).map(be=>be.ref.current);if(["ArrowUp","End"].includes(ae.key)&&(pe=pe.slice().reverse()),["ArrowUp","ArrowDown"].includes(ae.key)){const be=ae.target,Ne=pe.indexOf(be);pe=pe.slice(Ne+1)}setTimeout(()=>U(pe)),ae.preventDefault()}})})})})})})});jY.displayName=bPe;var jPe="SelectItemAlignedPosition",kY=w.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,i=hf(am,n),o=Af(am,n),[c,l]=w.useState(null),[d,u]=w.useState(null),h=Wt(t,N=>u(N)),A=Kk(n),f=w.useRef(!1),m=w.useRef(!0),{viewport:g,selectedItem:b,selectedItemText:y,focusSelectedItem:j}=o,x=w.useCallback(()=>{if(i.trigger&&i.valueNode&&c&&d&&g&&b&&y){const N=i.trigger.getBoundingClientRect(),L=d.getBoundingClientRect(),P=i.valueNode.getBoundingClientRect(),F=y.getBoundingClientRect();if(i.dir!=="rtl"){const be=F.left-L.left,Ne=P.left-be,Pe=N.left-Ne,xe=N.width+Pe,ue=Math.max(xe,L.width),yt=window.innerWidth-ll,ht=Kx(Ne,[ll,Math.max(ll,yt-ue)]);c.style.minWidth=xe+"px",c.style.left=ht+"px"}else{const be=L.right-F.right,Ne=window.innerWidth-P.right-be,Pe=window.innerWidth-N.right-Ne,xe=N.width+Pe,ue=Math.max(xe,L.width),yt=window.innerWidth-ll,ht=Kx(Ne,[ll,Math.max(ll,yt-ue)]);c.style.minWidth=xe+"px",c.style.right=ht+"px"}const I=A(),T=window.innerHeight-ll*2,Q=g.scrollHeight,D=window.getComputedStyle(d),M=parseInt(D.borderTopWidth,10),U=parseInt(D.paddingTop,10),H=parseInt(D.borderBottomWidth,10),$=parseInt(D.paddingBottom,10),R=M+U+Q+$+H,Y=Math.min(b.offsetHeight*5,R),X=window.getComputedStyle(g),q=parseInt(X.paddingTop,10),K=parseInt(X.paddingBottom,10),J=N.top+N.height/2-ll,W=T-J,ne=b.offsetHeight/2,ae=b.offsetTop+ne,ce=M+U+ae,Ae=R-ce;if(ce<=J){const be=I.length>0&&b===I[I.length-1].ref.current;c.style.bottom="0px";const Ne=d.clientHeight-g.offsetTop-g.offsetHeight,Pe=Math.max(W,ne+(be?K:0)+Ne+H),xe=ce+Pe;c.style.height=xe+"px"}else{const be=I.length>0&&b===I[0].ref.current;c.style.top="0px";const Pe=Math.max(J,M+g.offsetTop+(be?q:0)+ne)+Ae;c.style.height=Pe+"px",g.scrollTop=ce-J+g.offsetTop}c.style.margin=`${ll}px 0`,c.style.minHeight=Y+"px",c.style.maxHeight=T+"px",r==null||r(),requestAnimationFrame(()=>f.current=!0)}},[A,i.trigger,i.valueNode,c,d,g,b,y,i.dir,r]);Tr(()=>x(),[x]);const[C,S]=w.useState();Tr(()=>{d&&S(window.getComputedStyle(d).zIndex)},[d]);const _=w.useCallback(N=>{N&&m.current===!0&&(x(),j==null||j(),m.current=!1)},[x,j]);return a.jsx(SPe,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:f,onScrollButtonChange:_,children:a.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:a.jsx(gt.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});kY.displayName=jPe;var kPe="SelectPopperPosition",X_=w.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=ll,...i}=e,o=Wk(n);return a.jsx(hPe,{...o,...i,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});X_.displayName=kPe;var[SPe,oF]=ey(am,{}),J_="SelectViewport",SY=w.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,i=Af(J_,n),o=oF(J_,n),c=Wt(t,i.onViewportChange),l=w.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(qk.Slot,{scope:n,children:a.jsx(gt.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ti(s.onScroll,d=>{const u=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:A}=o;if(A!=null&&A.current&&h){const f=Math.abs(l.current-u.scrollTop);if(f>0){const m=window.innerHeight-ll*2,g=parseFloat(h.style.minHeight),b=parseFloat(h.style.height),y=Math.max(g,b);if(y<m){const j=y+f,x=Math.min(m,j),C=j-x;h.style.height=x+"px",h.style.bottom==="0px"&&(u.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});SY.displayName=J_;var NY="SelectGroup",[NPe,BPe]=ey(NY),EPe=w.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=$a();return a.jsx(NPe,{scope:n,id:s,children:a.jsx(gt.div,{role:"group","aria-labelledby":s,...r,ref:t})})});EPe.displayName=NY;var BY="SelectLabel",EY=w.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=BPe(BY,n);return a.jsx(gt.div,{id:s.id,...r,ref:t})});EY.displayName=BY;var cj="SelectItem",[_Pe,_Y]=ey(cj),IY=w.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=e,c=hf(cj,n),l=Af(cj,n),d=c.value===r,[u,h]=w.useState(i??""),[A,f]=w.useState(!1),m=Wt(t,j=>{var x;return(x=l.itemRefCallback)==null?void 0:x.call(l,j,r,s)}),g=$a(),b=w.useRef("touch"),y=()=>{s||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(_Pe,{scope:n,value:r,disabled:s,textId:g,isSelected:d,onItemTextChange:w.useCallback(j=>{h(x=>x||((j==null?void 0:j.textContent)??"").trim())},[]),children:a.jsx(qk.ItemSlot,{scope:n,value:r,disabled:s,textValue:u,children:a.jsx(gt.div,{role:"option","aria-labelledby":g,"data-highlighted":A?"":void 0,"aria-selected":d&&A,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:m,onFocus:ti(o.onFocus,()=>f(!0)),onBlur:ti(o.onBlur,()=>f(!1)),onClick:ti(o.onClick,()=>{b.current!=="mouse"&&y()}),onPointerUp:ti(o.onPointerUp,()=>{b.current==="mouse"&&y()}),onPointerDown:ti(o.onPointerDown,j=>{b.current=j.pointerType}),onPointerMove:ti(o.onPointerMove,j=>{var x;b.current=j.pointerType,s?(x=l.onItemLeave)==null||x.call(l):b.current==="mouse"&&j.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ti(o.onPointerLeave,j=>{var x;j.currentTarget===document.activeElement&&((x=l.onItemLeave)==null||x.call(l))}),onKeyDown:ti(o.onKeyDown,j=>{var C;((C=l.searchRef)==null?void 0:C.current)!==""&&j.key===" "||(pPe.includes(j.key)&&y(),j.key===" "&&j.preventDefault())})})})})});IY.displayName=cj;var u0="SelectItemText",PY=w.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...i}=e,o=hf(u0,n),c=Af(u0,n),l=_Y(u0,n),d=yPe(u0,n),[u,h]=w.useState(null),A=Wt(t,y=>h(y),l.onItemTextChange,y=>{var j;return(j=c.itemTextRefCallback)==null?void 0:j.call(c,y,l.value,l.disabled)}),f=u==null?void 0:u.textContent,m=w.useMemo(()=>a.jsx("option",{value:l.value,disabled:l.disabled,children:f},l.value),[l.disabled,l.value,f]),{onNativeOptionAdd:g,onNativeOptionRemove:b}=d;return Tr(()=>(g(m),()=>b(m)),[g,b,m]),a.jsxs(a.Fragment,{children:[a.jsx(gt.span,{id:l.textId,...i,ref:A}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Fl.createPortal(i.children,o.valueNode):null]})});PY.displayName=u0;var TY="SelectItemIndicator",FY=w.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return _Y(TY,n).isSelected?a.jsx(gt.span,{"aria-hidden":!0,...r,ref:t}):null});FY.displayName=TY;var Z_="SelectScrollUpButton",DY=w.forwardRef((e,t)=>{const n=Af(Z_,e.__scopeSelect),r=oF(Z_,e.__scopeSelect),[s,i]=w.useState(!1),o=Wt(t,r.onScrollButtonChange);return Tr(()=>{if(n.viewport&&n.isPositioned){let c=function(){const d=l.scrollTop>0;i(d)};const l=n.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),s?a.jsx(LY,{...e,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:l}=n;c&&l&&(c.scrollTop=c.scrollTop-l.offsetHeight)}}):null});DY.displayName=Z_;var eI="SelectScrollDownButton",UY=w.forwardRef((e,t)=>{const n=Af(eI,e.__scopeSelect),r=oF(eI,e.__scopeSelect),[s,i]=w.useState(!1),o=Wt(t,r.onScrollButtonChange);return Tr(()=>{if(n.viewport&&n.isPositioned){let c=function(){const d=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<d;i(u)};const l=n.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),s?a.jsx(LY,{...e,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:l}=n;c&&l&&(c.scrollTop=c.scrollTop+l.offsetHeight)}}):null});UY.displayName=eI;var LY=w.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,i=Af("SelectScrollButton",n),o=w.useRef(null),c=Kk(n),l=w.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return w.useEffect(()=>()=>l(),[l]),Tr(()=>{var u;const d=c().find(h=>h.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[c]),a.jsx(gt.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:ti(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ti(s.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ti(s.onPointerLeave,()=>{l()})})}),IPe="SelectSeparator",MY=w.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return a.jsx(gt.div,{"aria-hidden":!0,...r,ref:t})});MY.displayName=IPe;var tI="SelectArrow",PPe=w.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Wk(n),i=hf(tI,n),o=Af(tI,n);return i.open&&o.position==="popper"?a.jsx(APe,{...s,...r,ref:t}):null});PPe.displayName=tI;var TPe="SelectBubbleInput",RY=w.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const s=w.useRef(null),i=Wt(r,s),o=Vk(t);return w.useEffect(()=>{const c=s.current;if(!c)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==t&&u){const h=new Event("change",{bubbles:!0});u.call(c,t),c.dispatchEvent(h)}},[o,t]),a.jsx(gt.select,{...n,style:{...H$,...n.style},ref:i,defaultValue:t})});RY.displayName=TPe;function OY(e){return e===""||e===void 0}function QY(e){const t=Nr(e),n=w.useRef(""),r=w.useRef(0),s=w.useCallback(o=>{const c=n.current+o;t(c),function l(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(c)},[t]),i=w.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return w.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function HY(e,t,n){const s=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=FPe(e,Math.max(i,0));s.length===1&&(o=o.filter(d=>d!==n));const l=o.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function FPe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var DPe=pY,$Y=gY,UPe=yY,LPe=xY,MPe=wY,zY=bY,RPe=SY,VY=EY,qY=IY,OPe=PY,QPe=FY,KY=DY,WY=UY,GY=MY;const Vn=DPe,qn=UPe,Qn=w.forwardRef(({className:e,children:t,...n},r)=>a.jsxs($Y,{ref:r,className:$e("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,a.jsx(LPe,{asChild:!0,children:a.jsx(Ic,{className:"h-4 w-4 opacity-50"})})]}));Qn.displayName=$Y.displayName;const YY=w.forwardRef(({className:e,...t},n)=>a.jsx(KY,{ref:n,className:$e("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(Zj,{className:"h-4 w-4"})}));YY.displayName=KY.displayName;const XY=w.forwardRef(({className:e,...t},n)=>a.jsx(WY,{ref:n,className:$e("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(Ic,{className:"h-4 w-4"})}));XY.displayName=WY.displayName;const Hn=w.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>a.jsx(MPe,{children:a.jsxs(zY,{ref:s,className:$e("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[a.jsx(YY,{}),a.jsx(RPe,{className:$e("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),a.jsx(XY,{})]})}));Hn.displayName=zY.displayName;const HPe=w.forwardRef(({className:e,...t},n)=>a.jsx(VY,{ref:n,className:$e("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));HPe.displayName=VY.displayName;const qe=w.forwardRef(({className:e,children:t,...n},r)=>a.jsxs(qY,{ref:r,className:$e("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(QPe,{children:a.jsx(YA,{className:"h-4 w-4"})})}),a.jsx(OPe,{children:t})]}));qe.displayName=qY.displayName;const $Pe=w.forwardRef(({className:e,...t},n)=>a.jsx(GY,{ref:n,className:$e("-mx-1 my-1 h-px bg-muted",e),...t}));$Pe.displayName=GY.displayName;var Gk="Checkbox",[zPe,dqe]=Cs(Gk),[VPe,cF]=zPe(Gk);function qPe(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:s,disabled:i,form:o,name:c,onCheckedChange:l,required:d,value:u="on",internal_do_not_use_render:h}=e,[A,f]=fa({prop:n,defaultProp:s??!1,onChange:l,caller:Gk}),[m,g]=w.useState(null),[b,y]=w.useState(null),j=w.useRef(!1),x=m?!!o||!!m.closest("form"):!0,C={checked:A,disabled:i,setChecked:f,control:m,setControl:g,name:c,form:o,value:u,hasConsumerStoppedPropagationRef:j,required:d,defaultChecked:OA(s)?!1:s,isFormControl:x,bubbleInput:b,setBubbleInput:y};return a.jsx(VPe,{scope:t,...C,children:KPe(h)?h(C):r})}var JY="CheckboxTrigger",ZY=w.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},s)=>{const{control:i,value:o,disabled:c,checked:l,required:d,setControl:u,setChecked:h,hasConsumerStoppedPropagationRef:A,isFormControl:f,bubbleInput:m}=cF(JY,e),g=Wt(s,u),b=w.useRef(l);return w.useEffect(()=>{const y=i==null?void 0:i.form;if(y){const j=()=>h(b.current);return y.addEventListener("reset",j),()=>y.removeEventListener("reset",j)}},[i,h]),a.jsx(gt.button,{type:"button",role:"checkbox","aria-checked":OA(l)?"mixed":l,"aria-required":d,"data-state":sX(l),"data-disabled":c?"":void 0,disabled:c,value:o,...r,ref:g,onKeyDown:nn(t,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:nn(n,y=>{h(j=>OA(j)?!0:!j),m&&f&&(A.current=y.isPropagationStopped(),A.current||y.stopPropagation())})})});ZY.displayName=JY;var lF=w.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:c,value:l,onCheckedChange:d,form:u,...h}=e;return a.jsx(qPe,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:c,required:o,onCheckedChange:d,name:r,form:u,value:l,internal_do_not_use_render:({isFormControl:A})=>a.jsxs(a.Fragment,{children:[a.jsx(ZY,{...h,ref:t,__scopeCheckbox:n}),A&&a.jsx(rX,{__scopeCheckbox:n})]})})});lF.displayName=Gk;var eX="CheckboxIndicator",tX=w.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,i=cF(eX,n);return a.jsx(Ya,{present:r||OA(i.checked)||i.checked===!0,children:a.jsx(gt.span,{"data-state":sX(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});tX.displayName=eX;var nX="CheckboxBubbleInput",rX=w.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:c,disabled:l,name:d,value:u,form:h,bubbleInput:A,setBubbleInput:f}=cF(nX,e),m=Wt(n,f),g=Vk(i),b=$v(r);w.useEffect(()=>{const j=A;if(!j)return;const x=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(x,"checked").set,_=!s.current;if(g!==i&&S){const N=new Event("click",{bubbles:_});j.indeterminate=OA(i),S.call(j,OA(i)?!1:i),j.dispatchEvent(N)}},[A,g,i,s]);const y=w.useRef(OA(i)?!1:i);return a.jsx(gt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??y.current,required:c,disabled:l,name:d,value:u,form:h,...t,tabIndex:-1,ref:m,style:{...t.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});rX.displayName=nX;function KPe(e){return typeof e=="function"}function OA(e){return e==="indeterminate"}function sX(e){return OA(e)?"indeterminate":e?"checked":"unchecked"}const Wx=w.forwardRef(({className:e,...t},n)=>a.jsx(lF,{ref:n,className:$e("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:a.jsx(tX,{className:$e("flex items-center justify-center text-current"),children:a.jsx(YA,{className:"h-4 w-4"})})}));Wx.displayName=lF.displayName;var Yk="Collapsible",[WPe,iX]=Cs(Yk),[GPe,dF]=WPe(Yk),aX=w.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:i,onOpenChange:o,...c}=e,[l,d]=fa({prop:r,defaultProp:s??!1,onChange:o,caller:Yk});return a.jsx(GPe,{scope:n,disabled:i,contentId:$a(),open:l,onOpenToggle:w.useCallback(()=>d(u=>!u),[d]),children:a.jsx(gt.div,{"data-state":fF(l),"data-disabled":i?"":void 0,...c,ref:t})})});aX.displayName=Yk;var oX="CollapsibleTrigger",uF=w.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,s=dF(oX,n);return a.jsx(gt.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":fF(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:t,onClick:nn(e.onClick,s.onOpenToggle)})});uF.displayName=oX;var hF="CollapsibleContent",AF=w.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=dF(hF,e.__scopeCollapsible);return a.jsx(Ya,{present:n||s.open,children:({present:i})=>a.jsx(YPe,{...r,ref:t,present:i})})});AF.displayName=hF;var YPe=w.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:s,...i}=e,o=dF(hF,n),[c,l]=w.useState(r),d=w.useRef(null),u=Wt(t,d),h=w.useRef(0),A=h.current,f=w.useRef(0),m=f.current,g=o.open||c,b=w.useRef(g),y=w.useRef(void 0);return w.useEffect(()=>{const j=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(j)},[]),Tr(()=>{const j=d.current;if(j){y.current=y.current||{transitionDuration:j.style.transitionDuration,animationName:j.style.animationName},j.style.transitionDuration="0s",j.style.animationName="none";const x=j.getBoundingClientRect();h.current=x.height,f.current=x.width,b.current||(j.style.transitionDuration=y.current.transitionDuration,j.style.animationName=y.current.animationName),l(r)}},[o.open,r]),a.jsx(gt.div,{"data-state":fF(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...i,ref:u,style:{"--radix-collapsible-content-height":A?`${A}px`:void 0,"--radix-collapsible-content-width":m?`${m}px`:void 0,...e.style},children:g&&s})});function fF(e){return e?"open":"closed"}var cX=aX,XPe=uF,JPe=AF,Ll="Accordion",ZPe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[pF,e4e,t4e]=hm(Ll),[Xk,uqe]=Cs(Ll,[t4e,iX]),mF=iX(),lX=nt.forwardRef((e,t)=>{const{type:n,...r}=e,s=r,i=r;return a.jsx(pF.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?a.jsx(i4e,{...i,ref:t}):a.jsx(s4e,{...s,ref:t})})});lX.displayName=Ll;var[dX,n4e]=Xk(Ll),[uX,r4e]=Xk(Ll,{collapsible:!1}),s4e=nt.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},collapsible:i=!1,...o}=e,[c,l]=fa({prop:n,defaultProp:r??"",onChange:s,caller:Ll});return a.jsx(dX,{scope:e.__scopeAccordion,value:nt.useMemo(()=>c?[c]:[],[c]),onItemOpen:l,onItemClose:nt.useCallback(()=>i&&l(""),[i,l]),children:a.jsx(uX,{scope:e.__scopeAccordion,collapsible:i,children:a.jsx(hX,{...o,ref:t})})})}),i4e=nt.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...i}=e,[o,c]=fa({prop:n,defaultProp:r??[],onChange:s,caller:Ll}),l=nt.useCallback(u=>c((h=[])=>[...h,u]),[c]),d=nt.useCallback(u=>c((h=[])=>h.filter(A=>A!==u)),[c]);return a.jsx(dX,{scope:e.__scopeAccordion,value:o,onItemOpen:l,onItemClose:d,children:a.jsx(uX,{scope:e.__scopeAccordion,collapsible:!0,children:a.jsx(hX,{...i,ref:t})})})}),[a4e,Jk]=Xk(Ll),hX=nt.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:r,dir:s,orientation:i="vertical",...o}=e,c=nt.useRef(null),l=Wt(c,t),d=e4e(n),h=uf(s)==="ltr",A=nn(e.onKeyDown,f=>{var L;if(!ZPe.includes(f.key))return;const m=f.target,g=d().filter(P=>{var F;return!((F=P.ref.current)!=null&&F.disabled)}),b=g.findIndex(P=>P.ref.current===m),y=g.length;if(b===-1)return;f.preventDefault();let j=b;const x=0,C=y-1,S=()=>{j=b+1,j>C&&(j=x)},_=()=>{j=b-1,j<x&&(j=C)};switch(f.key){case"Home":j=x;break;case"End":j=C;break;case"ArrowRight":i==="horizontal"&&(h?S():_());break;case"ArrowDown":i==="vertical"&&S();break;case"ArrowLeft":i==="horizontal"&&(h?_():S());break;case"ArrowUp":i==="vertical"&&_();break}const N=j%y;(L=g[N].ref.current)==null||L.focus()});return a.jsx(a4e,{scope:n,disabled:r,direction:s,orientation:i,children:a.jsx(pF.Slot,{scope:n,children:a.jsx(gt.div,{...o,"data-orientation":i,ref:l,onKeyDown:r?void 0:A})})})}),lj="AccordionItem",[o4e,gF]=Xk(lj),AX=nt.forwardRef((e,t)=>{const{__scopeAccordion:n,value:r,...s}=e,i=Jk(lj,n),o=n4e(lj,n),c=mF(n),l=$a(),d=r&&o.value.includes(r)||!1,u=i.disabled||e.disabled;return a.jsx(o4e,{scope:n,open:d,disabled:u,triggerId:l,children:a.jsx(cX,{"data-orientation":i.orientation,"data-state":yX(d),...c,...s,ref:t,disabled:u,open:d,onOpenChange:h=>{h?o.onItemOpen(r):o.onItemClose(r)}})})});AX.displayName=lj;var fX="AccordionHeader",pX=nt.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,s=Jk(Ll,n),i=gF(fX,n);return a.jsx(gt.h3,{"data-orientation":s.orientation,"data-state":yX(i.open),"data-disabled":i.disabled?"":void 0,...r,ref:t})});pX.displayName=fX;var nI="AccordionTrigger",mX=nt.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,s=Jk(Ll,n),i=gF(nI,n),o=r4e(nI,n),c=mF(n);return a.jsx(pF.ItemSlot,{scope:n,children:a.jsx(XPe,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":s.orientation,id:i.triggerId,...c,...r,ref:t})})});mX.displayName=nI;var gX="AccordionContent",vX=nt.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,s=Jk(Ll,n),i=gF(gX,n),o=mF(n);return a.jsx(JPe,{role:"region","aria-labelledby":i.triggerId,"data-orientation":s.orientation,...o,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});vX.displayName=gX;function yX(e){return e?"open":"closed"}var c4e=lX,l4e=AX,d4e=pX,xX=mX,wX=vX;const u4e=c4e,M2=w.forwardRef(({className:e,...t},n)=>a.jsx(l4e,{ref:n,className:$e("border-b",e),...t}));M2.displayName="AccordionItem";const R2=w.forwardRef(({className:e,children:t,...n},r)=>a.jsx(d4e,{className:"flex",children:a.jsxs(xX,{ref:r,className:$e("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,a.jsx(Ic,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));R2.displayName=xX.displayName;const O2=w.forwardRef(({className:e,children:t,...n},r)=>a.jsx(wX,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:a.jsx("div",{className:$e("pb-4 pt-0",e),children:t})}));O2.displayName=wX.displayName;const h4e=Mv("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),za=w.forwardRef(({className:e,variant:t,...n},r)=>a.jsx("div",{ref:r,role:"alert",className:$e(h4e({variant:t}),e),...n}));za.displayName="Alert";const A4e=w.forwardRef(({className:e,...t},n)=>a.jsx("h5",{ref:n,className:$e("mb-1 font-medium leading-none tracking-tight",e),...t}));A4e.displayName="AlertTitle";const Va=w.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:$e("text-sm [&_p]:leading-relaxed",e),...t}));Va.displayName="AlertDescription";var f4e="Separator",aO="horizontal",p4e=["horizontal","vertical"],bX=w.forwardRef((e,t)=>{const{decorative:n,orientation:r=aO,...s}=e,i=m4e(r)?r:aO,c=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return a.jsx(gt.div,{"data-orientation":i,...c,...s,ref:t})});bX.displayName=f4e;function m4e(e){return p4e.includes(e)}var CX=bX;const qd=w.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},s)=>a.jsx(CX,{ref:s,decorative:n,orientation:t,className:$e("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));qd.displayName=CX.displayName;const g4e={"zero-shot":{id:"zero-shot",name:"Zero-Shot",description:"Direct task execution without examples or training",category:"instruction",complexity:"basic",bestFor:["simple tasks","clear instructions","well-defined problems"],parameters:{temperature:{type:"number",default:.7,description:"Controls randomness in responses (0.0-1.0)"},maxTokens:{type:"number",default:1e3,description:"Maximum response length"}},template:`{systemRole}

Task: {task}

{context}

{basePrompt}

{constraints}

Please provide a comprehensive response.`,examples:[{context:"UX Research Planning",input:"Create a user interview guide for a mobile banking app",output:"Comprehensive interview guide with structured questions"}]},"few-shot":{id:"few-shot",name:"Few-Shot Learning",description:"Learning from a few examples to understand the pattern",category:"context",complexity:"intermediate",bestFor:["pattern recognition","specific formats","consistent outputs"],parameters:{exampleCount:{type:"number",default:3,description:"Number of examples to provide",required:!0},temperature:{type:"number",default:.5,description:"Lower temperature for more consistent pattern following"},shuffleExamples:{type:"boolean",default:!1,description:"Randomize example order to reduce bias"}},template:`{systemRole}

Task: {task}

Here are some examples of how to approach this task:

{examples}

{context}

Now, please apply the same approach to:
{basePrompt}

{constraints}

Follow the pattern demonstrated in the examples above.`,examples:[{context:"Persona Creation",input:"Create personas based on user research data",output:"Structured personas following established format"}]},"chain-of-thought":{id:"chain-of-thought",name:"Chain-of-Thought",description:"Step-by-step reasoning process for complex problem solving",category:"reasoning",complexity:"advanced",bestFor:["complex analysis","multi-step processes","logical reasoning"],parameters:{reasoning_steps:{type:"number",default:5,description:"Number of reasoning steps to include"},show_work:{type:"boolean",default:!0,description:"Show detailed reasoning process"},verify_logic:{type:"boolean",default:!0,description:"Include logic verification steps"}},template:`{systemRole}

Task: {task}

{context}

{basePrompt}

Let's approach this step by step:

1. **Analysis**: First, I'll analyze the problem and identify key components
2. **Planning**: Next, I'll develop a structured approach 
3. **Execution**: Then, I'll work through each component systematically
4. **Synthesis**: After that, I'll combine the results into a coherent solution
5. **Validation**: Finally, I'll verify the solution meets requirements

{constraints}

Please work through this systematically, showing your reasoning at each step.`,examples:[{context:"Usability Testing Design",input:"Design a comprehensive usability testing protocol",output:"Step-by-step protocol with detailed reasoning"}]},"tree-of-thought":{id:"tree-of-thought",name:"Tree-of-Thought",description:"Explores multiple reasoning paths and selects the best approach",category:"reasoning",complexity:"advanced",bestFor:["complex decisions","multiple solutions","strategic thinking"],parameters:{branches:{type:"number",default:3,description:"Number of reasoning branches to explore"},depth:{type:"number",default:3,description:"Depth of exploration for each branch"},evaluation_criteria:{type:"array",default:["feasibility","effectiveness","efficiency"],description:"Criteria for evaluating different approaches"}},template:`{systemRole}

Task: {task}

{context}

{basePrompt}

I'll explore multiple approaches to solve this problem:

**Approach 1**: [First reasoning path]
- Step 1.1: [Initial consideration]
- Step 1.2: [Development]
- Step 1.3: [Conclusion]
- Evaluation: [Pros/Cons based on criteria]

**Approach 2**: [Second reasoning path]
- Step 2.1: [Initial consideration]
- Step 2.2: [Development] 
- Step 2.3: [Conclusion]
- Evaluation: [Pros/Cons based on criteria]

**Approach 3**: [Third reasoning path]
- Step 3.1: [Initial consideration]
- Step 3.2: [Development]
- Step 3.3: [Conclusion]
- Evaluation: [Pros/Cons based on criteria]

**Final Decision**: Based on the evaluation criteria ({evaluation_criteria}), I recommend [chosen approach] because [reasoning].

{constraints}`,examples:[{context:"UX Strategy Planning",input:"Develop UX strategy for a new product launch",output:"Multiple strategic approaches with evaluation and recommendation"}]},"role-playing":{id:"role-playing",name:"Role-Playing",description:"Adopts specific professional personas with domain expertise",category:"creative",complexity:"intermediate",bestFor:["domain expertise","perspective-taking","specialized knowledge"],parameters:{role:{type:"string",default:"Senior UX Researcher",description:"Professional role to adopt",required:!0},experience_level:{type:"string",default:"10+ years",description:"Level of experience for the role"},industry_focus:{type:"string",default:"technology",description:"Industry specialization"},personality_traits:{type:"array",default:["analytical","detail-oriented","user-focused"],description:"Key personality characteristics"}},template:`I am a {role} with {experience_level} of experience in {industry_focus}. My approach is characterized by being {personality_traits}.

Given my expertise and background, I'll address this task:

Task: {task}

{context}

{basePrompt}

Drawing from my professional experience, here's how I would approach this:

[Perspective from the adopted role]

{constraints}

*Responding as a {role} with deep expertise in {industry_focus}*`,examples:[{context:"Research Planning",input:"Plan user research for a healthcare application",output:"Expert perspective with healthcare-specific considerations"}]},"instruction-tuning":{id:"instruction-tuning",name:"Instruction Tuning",description:"Highly structured instructions with specific formatting requirements",category:"instruction",complexity:"intermediate",bestFor:["precise outputs","consistent formatting","specific requirements"],parameters:{format_requirements:{type:"array",default:["structured sections","bullet points","clear headings"],description:"Specific formatting requirements"},output_length:{type:"string",default:"comprehensive",description:"Expected output length (brief, moderate, comprehensive, detailed)"},include_examples:{type:"boolean",default:!0,description:"Include practical examples in output"}},template:`{systemRole}

**INSTRUCTIONS**: Follow these precise guidelines:

1. **Task**: {task}
2. **Context**: {context}
3. **Requirements**: {format_requirements}
4. **Output Length**: {output_length}
5. **Include Examples**: {include_examples}

**SPECIFIC REQUEST**:
{basePrompt}

**FORMAT REQUIREMENTS**:
- Use clear section headers
- Include bullet points for key items
- Provide specific, actionable guidance
- {include_examples ? 'Include practical examples' : 'Focus on principles without examples'}

**CONSTRAINTS**:
{constraints}

**OUTPUT**: Provide a {output_length} response following all specified requirements.`,examples:[{context:"Documentation Creation",input:"Create UX process documentation",output:"Structured documentation with specific formatting"}]},"step-by-step":{id:"step-by-step",name:"Step-by-Step",description:"Sequential process breakdown with clear progression",category:"instruction",complexity:"basic",bestFor:["process documentation","tutorials","implementation guides"],parameters:{step_numbering:{type:"boolean",default:!0,description:"Use numbered steps"},include_substeps:{type:"boolean",default:!0,description:"Break down complex steps into sub-steps"},time_estimates:{type:"boolean",default:!1,description:"Include time estimates for each step"},prerequisites:{type:"boolean",default:!0,description:"List prerequisites before steps"}},template:`{systemRole}

Task: {task}

{context}

{prerequisites ? '**Prerequisites**: [List any requirements before starting]' : ''}

**Step-by-Step Process**:

{basePrompt}

Please break this down into clear, sequential steps:

Step 1: [First action]
{include_substeps ? '  1.1: [Sub-step if needed]
  1.2: [Sub-step if needed]' : ''}
{time_estimates ? '   Estimated time: [X minutes/hours]' : ''}

Step 2: [Second action]
{include_substeps ? '  2.1: [Sub-step if needed]
  2.2: [Sub-step if needed]' : ''}
{time_estimates ? '   Estimated time: [X minutes/hours]' : ''}

[Continue for all necessary steps]

{constraints}`,examples:[{context:"User Testing Setup",input:"Set up a usability testing session",output:"Sequential steps for testing session preparation"}]},socratic:{id:"socratic",name:"Socratic Method",description:"Question-driven approach to guide thinking and discovery",category:"reasoning",complexity:"advanced",bestFor:["problem exploration","critical thinking","assumption challenging"],parameters:{question_depth:{type:"number",default:3,description:"Levels of questioning depth"},focus_area:{type:"string",default:"assumptions",description:"Primary focus for questioning (assumptions, goals, methods, outcomes)"},guidance_level:{type:"string",default:"moderate",description:"Level of guidance provided (minimal, moderate, substantial)"}},template:`{systemRole}

Task: {task}

{context}

Instead of directly solving this, let me guide you through a discovery process:

**Initial Question**: {basePrompt}

**Exploratory Questions**:
1. What assumptions are we making about [key aspect]?
2. How might we verify these assumptions?
3. What alternative approaches could we consider?

**Deeper Analysis**:
- What evidence supports our current thinking?
- What evidence might contradict it?
- How do different stakeholders view this problem?

**Synthesis Questions**:
- What patterns emerge from this analysis?
- What are the implications of these insights?
- How should this influence our approach?

**Action Planning**:
- Based on this exploration, what should we do next?
- What additional information do we need?
- How will we measure success?

{constraints}

*This approach encourages critical thinking and thorough exploration rather than quick answers.*`,examples:[{context:"Problem Definition",input:"Define the core UX problem for a struggling product",output:"Question-driven exploration leading to problem clarity"}]},"multi-perspective":{id:"multi-perspective",name:"Multi-Perspective",description:"Examines issues from multiple stakeholder viewpoints",category:"creative",complexity:"advanced",bestFor:["stakeholder analysis","comprehensive solutions","conflict resolution"],parameters:{perspectives:{type:"array",default:["user","business","technical","stakeholder"],description:"Different viewpoints to consider"},perspective_depth:{type:"string",default:"detailed",description:"Depth of analysis for each perspective (brief, moderate, detailed)"},synthesis_approach:{type:"string",default:"integrated",description:"How to combine perspectives (integrated, comparative, prioritized)"}},template:`{systemRole}

Task: {task}

{context}

I'll examine this from multiple perspectives:

**User Perspective**:
- Needs: [What users need and want]
- Pain Points: [Current frustrations and barriers]
- Goals: [What users are trying to achieve]
- Success Metrics: [How users measure success]

**Business Perspective**:
- Objectives: [Business goals and KPIs]
- Constraints: [Budget, time, resource limitations]
- Opportunities: [Potential business benefits]
- Risks: [Business risks and concerns]

**Technical Perspective**:
- Feasibility: [Technical implementation considerations]
- Constraints: [Technical limitations and requirements]
- Architecture: [System and platform implications]
- Maintenance: [Long-term technical considerations]

**Stakeholder Perspective**:
- Internal Stakeholders: [Team, management, departments]
- External Stakeholders: [Partners, vendors, regulators]
- Influence: [Who has decision-making power]
- Concerns: [Stakeholder-specific issues]

**Integrated Solution**:
{basePrompt}

Considering all perspectives, here's a balanced approach:
[Synthesis of all viewpoints into actionable solution]

{constraints}`,examples:[{context:"Feature Planning",input:"Plan a new feature for a collaborative platform",output:"Multi-stakeholder analysis with integrated recommendations"}]},"retrieval-augmented":{id:"retrieval-augmented",name:"Retrieval-Augmented Generation",description:"Combines external knowledge sources with generation",category:"context",complexity:"advanced",bestFor:["research-backed outputs","knowledge synthesis","evidence-based recommendations"],parameters:{knowledge_sources:{type:"array",default:["project_knowledge","industry_standards","best_practices"],description:"Types of knowledge sources to incorporate"},citation_style:{type:"string",default:"integrated",description:"How to reference sources (integrated, footnotes, inline)"},knowledge_weight:{type:"number",default:.7,description:"Weight given to retrieved knowledge vs. generated content"}},template:`{systemRole}

Task: {task}

**Available Knowledge Sources**:
{context}

**Knowledge Integration**:
Based on the available knowledge sources ({knowledge_sources}), I'll provide a response that combines:
- Relevant information from project documentation
- Industry best practices and standards  
- Research-backed methodologies
- Contextual insights from similar projects

**Request**:
{basePrompt}

**Evidence-Based Response**:
[Drawing from available knowledge sources while generating new insights]

**Sources Referenced**:
- Project Knowledge: [Relevant project information used]
- Industry Standards: [Applicable standards and guidelines]
- Best Practices: [Proven methodologies applied]
- Additional Context: [Other relevant information]

{constraints}

*This response integrates retrieved knowledge with generated insights for maximum accuracy and relevance.*`,examples:[{context:"Research Planning",input:"Plan user research using project knowledge and industry standards",output:"Knowledge-augmented research plan with cited sources"}]}};class v4e{constructor(){Je(this,"methods");this.methods=g4e}processPrompt(t){var i;const n=this.methods[t.method];if(!n)throw new Error(`Unknown prompt engineering method: ${t.method}`);let r=n.template;const s={systemRole:t.systemRole||this.getDefaultSystemRole(t.method),task:String(t.variables.task||""),context:t.context||"",basePrompt:t.basePrompt,constraints:((i=t.constraints)==null?void 0:i.map(o=>`- ${o}`).join(`
`))||"",...this.processMethodParameters(n,t.parameters),...this.convertVariablesToStrings(t.variables)};return t.examples&&["few-shot","retrieval-augmented"].includes(t.method)&&(s.examples=this.formatExamples(t.examples,t.method)),Object.entries(s).forEach(([o,c])=>{const l=new RegExp(`{${o}}`,"g");r=r.replace(l,c)}),r=r.replace(/{[^}]+}/g,""),r=r.replace(/\n\s*\n\s*\n/g,`

`).trim(),r}getMethodsByCategory(t){return Object.values(this.methods).filter(n=>n.category===t)}getMethodsByComplexity(t){return Object.values(this.methods).filter(n=>n.complexity===t)}getRecommendedMethod(t){return Object.values(this.methods).filter(n=>n.bestFor.some(r=>r.toLowerCase().includes(t.toLowerCase())||t.toLowerCase().includes(r.toLowerCase())))}validateParameters(t,n){const r=this.methods[t];if(!r)return{isValid:!1,errors:[`Unknown method: ${t}`]};const s=[];return Object.entries(r.parameters).forEach(([i,o])=>{const c=n[i];if(o.required&&c==null){s.push(`Parameter '${i}' is required`);return}if(c!=null)switch(o.type){case"number":typeof c!="number"&&s.push(`Parameter '${i}' must be a number`);break;case"string":typeof c!="string"&&s.push(`Parameter '${i}' must be a string`);break;case"boolean":typeof c!="boolean"&&s.push(`Parameter '${i}' must be a boolean`);break;case"array":Array.isArray(c)||s.push(`Parameter '${i}' must be an array`);break}}),{isValid:s.length===0,errors:s}}getMethodConfig(t){return this.methods[t]}getAllMethods(){return Object.values(this.methods)}getDefaultSystemRole(t){return{"zero-shot":"You are an expert UX professional.","few-shot":"You are an expert UX professional who learns from examples.","chain-of-thought":"You are an analytical UX expert who thinks step-by-step.","tree-of-thought":"You are a strategic UX expert who explores multiple approaches.","role-playing":"You are a specialized UX professional.","instruction-tuning":"You are a precise UX professional who follows detailed instructions.","step-by-step":"You are a methodical UX professional who creates clear processes.",socratic:"You are a thoughtful UX mentor who guides through questioning.","multi-perspective":"You are a comprehensive UX strategist who considers all viewpoints.","retrieval-augmented":"You are a research-driven UX professional who synthesizes knowledge."}[t]||"You are an expert UX professional."}processMethodParameters(t,n){const r={};return Object.entries(t.parameters).forEach(([s,i])=>{const o=n[s]!==void 0?n[s]:i.default;Array.isArray(o)?r[s]=o.join(", "):r[s]=String(o)}),r}formatExamples(t,n){return!t||t.length===0?"":t.map((r,s)=>typeof r=="string"?`Example ${s+1}: ${r}`:typeof r=="object"&&r.input&&r.output?`Example ${s+1}:
Input: ${r.input}
Output: ${r.output}`:`Example ${s+1}: ${JSON.stringify(r)}`).join(`

`)}convertVariablesToStrings(t){const n={};return Object.entries(t).forEach(([r,s])=>{Array.isArray(s)?n[r]=s.join(", "):typeof s=="object"&&s!==null?n[r]=JSON.stringify(s):n[r]=String(s??"")}),n}}const Q2=new v4e,y4e={"zero-shot":{requiredElements:["clear task definition","context information","expected output format"],qualityMetrics:[{id:"clarity",name:"Task Clarity",description:"Clear and unambiguous task definition",weight:.3,category:"structure"},{id:"context_sufficiency",name:"Context Sufficiency",description:"Adequate context for task completion",weight:.2,category:"content"},{id:"output_specification",name:"Output Specification",description:"Clear specification of expected output format",weight:.2,category:"usability"}],scoreWeights:{clarity:.4,context:.3,format:.3}},"few-shot":{requiredElements:["example patterns","consistent formatting","example variety","clear task"],qualityMetrics:[{id:"example_quality",name:"Example Quality",description:"High-quality, relevant examples that demonstrate the pattern",weight:.35,category:"content"},{id:"pattern_consistency",name:"Pattern Consistency",description:"Consistent format and structure across examples",weight:.25,category:"structure"},{id:"example_diversity",name:"Example Diversity",description:"Sufficient variety in examples to cover different scenarios",weight:.2,category:"content"}],scoreWeights:{examples:.5,consistency:.3,diversity:.2}},"chain-of-thought":{requiredElements:["reasoning steps","logical progression","step validation","clear conclusion"],qualityMetrics:[{id:"reasoning_structure",name:"Reasoning Structure",description:"Clear, logical progression of reasoning steps",weight:.3,category:"methodology"},{id:"step_quality",name:"Step Quality",description:"Each reasoning step is clear and contributes to the solution",weight:.25,category:"content"},{id:"logical_coherence",name:"Logical Coherence",description:"Steps follow logically and build upon each other",weight:.25,category:"methodology"}],scoreWeights:{structure:.4,logic:.35,clarity:.25}},"tree-of-thought":{requiredElements:["multiple branches","branch evaluation","decision criteria","final selection"],qualityMetrics:[{id:"branch_diversity",name:"Branch Diversity",description:"Multiple distinct approaches explored",weight:.25,category:"methodology"},{id:"evaluation_rigor",name:"Evaluation Rigor",description:"Systematic evaluation of different approaches",weight:.3,category:"methodology"},{id:"decision_justification",name:"Decision Justification",description:"Clear reasoning for final approach selection",weight:.25,category:"content"}],scoreWeights:{diversity:.3,evaluation:.4,justification:.3}},"role-playing":{requiredElements:["role definition","domain expertise","perspective consistency","authentic voice"],qualityMetrics:[{id:"role_authenticity",name:"Role Authenticity",description:"Authentic representation of the specified professional role",weight:.3,category:"content"},{id:"expertise_demonstration",name:"Expertise Demonstration",description:"Clear demonstration of domain-specific knowledge",weight:.25,category:"content"},{id:"perspective_consistency",name:"Perspective Consistency",description:"Consistent perspective throughout the response",weight:.2,category:"structure"}],scoreWeights:{authenticity:.4,expertise:.35,consistency:.25}},"instruction-tuning":{requiredElements:["precise instructions","format requirements","constraint specification","output criteria"],qualityMetrics:[{id:"instruction_precision",name:"Instruction Precision",description:"Clear, unambiguous, and detailed instructions",weight:.35,category:"structure"},{id:"format_specification",name:"Format Specification",description:"Detailed formatting requirements and constraints",weight:.25,category:"usability"},{id:"completeness",name:"Instruction Completeness",description:"All necessary instructions and requirements provided",weight:.2,category:"content"}],scoreWeights:{precision:.4,format:.3,completeness:.3}},"step-by-step":{requiredElements:["sequential steps","clear progression","actionable items","completion criteria"],qualityMetrics:[{id:"step_clarity",name:"Step Clarity",description:"Each step is clear and actionable",weight:.3,category:"usability"},{id:"logical_sequence",name:"Logical Sequence",description:"Steps follow a logical, executable sequence",weight:.25,category:"structure"},{id:"completeness",name:"Process Completeness",description:"All necessary steps included for task completion",weight:.25,category:"content"}],scoreWeights:{clarity:.4,sequence:.35,completeness:.25}},socratic:{requiredElements:["guiding questions","progressive inquiry","discovery process","insight generation"],qualityMetrics:[{id:"question_quality",name:"Question Quality",description:"Questions guide thinking and promote discovery",weight:.35,category:"methodology"},{id:"inquiry_progression",name:"Inquiry Progression",description:"Questions build progressively toward insight",weight:.25,category:"structure"},{id:"discovery_facilitation",name:"Discovery Facilitation",description:"Process facilitates genuine discovery and understanding",weight:.2,category:"content"}],scoreWeights:{questions:.4,progression:.3,discovery:.3}},"multi-perspective":{requiredElements:["multiple viewpoints","stakeholder analysis","perspective integration","balanced synthesis"],qualityMetrics:[{id:"perspective_completeness",name:"Perspective Completeness",description:"All relevant perspectives adequately represented",weight:.3,category:"content"},{id:"viewpoint_accuracy",name:"Viewpoint Accuracy",description:"Each perspective authentically represented",weight:.25,category:"content"},{id:"synthesis_quality",name:"Synthesis Quality",description:"Effective integration of different perspectives",weight:.25,category:"methodology"}],scoreWeights:{completeness:.35,accuracy:.35,synthesis:.3}},"retrieval-augmented":{requiredElements:["knowledge integration","source citation","synthesis quality","accuracy verification"],qualityMetrics:[{id:"knowledge_integration",name:"Knowledge Integration",description:"Effective integration of retrieved knowledge with generated content",weight:.3,category:"content"},{id:"source_accuracy",name:"Source Accuracy",description:"Accurate representation and citation of source material",weight:.25,category:"content"},{id:"synthesis_coherence",name:"Synthesis Coherence",description:"Coherent synthesis of multiple knowledge sources",weight:.25,category:"methodology"}],scoreWeights:{integration:.4,accuracy:.35,coherence:.25}}};class x4e{constructor(){Je(this,"methodProcessor");Je(this,"criteria");this.methodProcessor=Q2,this.criteria={methodSpecific:y4e,coherence:{weight:.25,criteria:["logical flow","internal consistency","clear connections"]},effectiveness:{weight:.3,criteria:["achieves stated goals","actionable outputs","practical value"]},methodAppropriateness:{weight:.2,criteria:["method fits task complexity","method suits context","optimal method selection"]}}}async validateAdvancedPrompt(t,n,r){const s=this.criteria.methodSpecific[n];if(!s)throw new Error(`No validation criteria found for method: ${n}`);this.analyzePromptStructure(t,n);const i=await this.evaluateMethodSpecificQuality(t,n,s),o=this.assessMethodAppropriateness(n,r),c=this.calculateCoherenceScore(t,n),l=this.calculateEffectivenessScore(t,n,r),d=this.calculateOverallAdvancedScore({methodSpecific:i,coherence:c,effectiveness:l,appropriateness:o}),u=this.generateImprovementSuggestions(t,n,i,c,l,o);let h;return d>=85?h="excellent":d>=70?h="good":d>=55?h="fair":h="poor",{overallScore:d,category:h,scores:i,summary:{strengths:this.identifyStrengths(i,c,l),weaknesses:this.identifyWeaknesses(i,c,l),criticalIssues:this.identifyCriticalIssues(i,o),recommendations:u.methodSuggestions.concat(u.structuralImprovements).slice(0,6)},methodSpecific:{methodUsed:n,methodAppropriate:o>=70,methodEffectiveness:Math.round(i.reduce((A,f)=>A+f.score,0)/i.length),coherenceScore:Math.round(c),complexityHandling:this.assessComplexityHandling(t,n,r==null?void 0:r.taskComplexity)},improvements:u,validationTimestamp:Date.now()}}recommendOptimalMethod(t,n){const r=[];Object.keys(this.criteria.methodSpecific).forEach(o=>{const c=o,l=this.methodProcessor.getMethodConfig(c);if(!l)return;let d=50;const u=[];n.complexity==="simple"&&l.complexity==="basic"?(d+=20,u.push("Matches simple task complexity")):n.complexity==="moderate"&&l.complexity==="intermediate"?(d+=15,u.push("Matches moderate task complexity")):n.complexity==="complex"&&l.complexity==="advanced"&&(d+=15,u.push("Handles complex task requirements")),n.requiresExamples&&["few-shot","instruction-tuning"].includes(c)&&(d+=15,u.push("Provides example-based learning")),n.needsMultiplePerspectives&&c==="multi-perspective"&&(d+=20,u.push("Handles multiple stakeholder viewpoints")),n.domainExpertise&&c==="role-playing"&&(d+=15,u.push("Leverages domain-specific expertise")),n.stepByStepNeeded&&["step-by-step","chain-of-thought"].includes(c)&&(d+=15,u.push("Provides structured step-by-step guidance")),n.hasKnowledgeBase&&c==="retrieval-augmented"&&(d+=20,u.push("Effectively utilizes available knowledge base")),n.complexity==="simple"&&l.complexity==="advanced"&&(d-=15,u.push("May be overly complex for simple tasks")),r.push({method:c,score:Math.max(0,Math.min(100,d)),reasons:u})}),r.sort((o,c)=>c.score-o.score);const s=r[0],i=r.slice(1,4).map(o=>o.method);return{primaryRecommendation:s.method,alternatives:i,reasoning:`Recommended ${s.method} (score: ${s.score}) because: ${s.reasons.join(", ")}.`}}compareMethodsForTask(t,n,r){return n.map(s=>{const i=this.methodProcessor.getMethodConfig(s);if(!i)return{method:s,effectiveness:0,pros:[],cons:["Method configuration not found"]};let o=60;const c=[...i.bestFor],l=[];return r&&(r.complexity==="complex"&&i.complexity==="advanced"?(o+=15,c.push("Handles complex reasoning well")):r.complexity==="simple"&&i.complexity==="basic"?(o+=10,c.push("Efficient for simple tasks")):r.complexity==="simple"&&i.complexity==="advanced"&&(o-=10,l.push("May be unnecessarily complex")),r.needsExamples&&s==="few-shot"&&(o+=15,c.push("Excels with example-based learning")),r.needsReasoning&&["chain-of-thought","tree-of-thought"].includes(s)&&(o+=12,c.push("Provides transparent reasoning process"))),{method:s,effectiveness:Math.max(0,Math.min(100,o)),pros:c,cons:l}}).sort((s,i)=>i.effectiveness-s.effectiveness)}analyzePromptStructure(t,n){const r=this.criteria.methodSpecific[n];if(!r)return{hasRequiredElements:!1,missingElements:[],structureScore:0};const s=[],i=r.requiredElements;i.forEach(c=>{c.toLowerCase().split(" ").some(u=>t.toLowerCase().includes(u))||s.push(c)});const o=Math.max(0,100-s.length/i.length*100);return{hasRequiredElements:s.length===0,missingElements:s,structureScore:o}}async evaluateMethodSpecificQuality(t,n,r){const s=[];for(const i of r.qualityMetrics){const o=await this.evaluateSpecificMetric(t,n,i);s.push({metricId:i.id,score:o,feedback:this.generateMetricFeedback(i,o),suggestions:this.generateMetricSuggestions(i,o)})}return s}async evaluateSpecificMetric(t,n,r){let s=50;switch(r.id){case"clarity":case"task_clarity":s=this.assessClarity(t);break;case"example_quality":s=this.assessExampleQuality(t);break;case"reasoning_structure":s=this.assessReasoningStructure(t);break;case"role_authenticity":s=this.assessRoleAuthenticity(t);break;case"instruction_precision":s=this.assessInstructionPrecision(t);break;case"step_clarity":s=this.assessStepClarity(t);break;case"question_quality":s=this.assessQuestionQuality(t);break;case"perspective_completeness":s=this.assessPerspectiveCompleteness(t);break;case"knowledge_integration":s=this.assessKnowledgeIntegration(t);break;default:s=this.assessGenericQuality(t,r)}return Math.max(0,Math.min(100,s))}assessClarity(t){let n=50;/task:|objective:|goal:/gi.test(t)&&(n+=15),(t.includes("##")||t.includes("**"))&&(n+=10);const s=["specifically","exactly","precisely","clearly","must","should"].filter(i=>new RegExp(`\\b${i}\\b`,"gi").test(t)).length;return n+=Math.min(15,s*3),n}assessExampleQuality(t){let n=30;const r=(t.match(/example\s+\d+:|example:|input:|output:/gi)||[]).length;return n+=Math.min(30,r*10),t.includes("Input:")&&t.includes("Output:")&&(n+=20),(t.includes("different")||t.includes("various")||t.includes("multiple"))&&(n+=10),n}assessReasoningStructure(t){let n=40;const r=(t.match(/step\s+\d+|first|second|third|then|next|finally/gi)||[]).length;n+=Math.min(25,r*3);const i=["because","therefore","consequently","as a result","leads to"].filter(o=>new RegExp(`\\b${o}\\b`,"gi").test(t)).length;return n+=Math.min(20,i*5),(t.includes("analyze")||t.includes("examine")||t.includes("consider"))&&(n+=15),n}assessRoleAuthenticity(t){let n=45;/I am a|as a|from my experience|in my role/gi.test(t)&&(n+=20);const s=["methodology","framework","best practices","industry standards","expertise"].filter(i=>new RegExp(`\\b${i}\\b`,"gi").test(t)).length;return n+=Math.min(25,s*5),/professional|expert|practitioner|specialist/gi.test(t)&&(n+=10),n}assessInstructionPrecision(t){let n=40;const s=["must","should","ensure","include","follow","use","avoid"].filter(i=>new RegExp(`\\b${i}\\b`,"gi").test(t)).length;return n+=Math.min(25,s*3),/format|structure|organize|arrange|present/gi.test(t)&&(n+=15),(t.includes("constraints")||t.includes("limitations")||t.includes("requirements"))&&(n+=10),/\d+|maximum|minimum|at least|no more than/g.test(t)&&(n+=10),n}assessStepClarity(t){let n=35;const r=(t.match(/\d+\./g)||[]).length;n+=Math.min(30,r*5);const i=["create","analyze","develop","implement","design","conduct","evaluate"].filter(o=>new RegExp(`\\b${o}\\b`,"gi").test(t)).length;return n+=Math.min(20,i*3),/first|then|next|after|finally|subsequently/gi.test(t)&&(n+=15),n}assessQuestionQuality(t){let n=40;const r=(t.match(/\?/g)||[]).length;n+=Math.min(25,r*3);const i=["what","how","why","when","where","which"].filter(o=>new RegExp(`\\b${o}\\b.*\\?`,"gi").test(t)).length;return n+=Math.min(20,i*4),/deeper|further|more specific|elaborate/gi.test(t)&&(n+=15),n}assessPerspectiveCompleteness(t){let n=30;const s=["user","business","technical","stakeholder","customer","team","management"].filter(i=>new RegExp(`\\b${i}\\b`,"gi").test(t)).length;return n+=Math.min(35,s*7),/perspective|viewpoint|from the standpoint|from.*point of view/gi.test(t)&&(n+=20),/integrate|combine|balance|consider all/gi.test(t)&&(n+=15),n}assessKnowledgeIntegration(t){let n=35;return/based on|according to|research shows|evidence suggests|studies indicate/gi.test(t)&&(n+=20),/combine|synthesize|integrate|draw from|leverage/gi.test(t)&&(n+=15),/available.*knowledge|provided.*information|given.*context/gi.test(t)&&(n+=15),/accurate|verify|validate|confirm|evidence/gi.test(t)&&(n+=15),n}assessGenericQuality(t,n){let r=50;switch(n.category){case"structure":r=this.assessClarity(t);break;case"content":t.length>500&&(r+=10),(t.includes("specific")||t.includes("detailed"))&&(r+=10);break;case"methodology":r=this.assessReasoningStructure(t);break;case"usability":r=this.assessStepClarity(t);break}return r}assessMethodAppropriateness(t,n){let r=70;if(!n)return r;const s=this.methodProcessor.getMethodConfig(t);return s?(n.taskComplexity&&(n.taskComplexity==="simple"&&s.complexity==="basic"?r+=15:n.taskComplexity==="moderate"&&s.complexity==="intermediate"||n.taskComplexity==="complex"&&s.complexity==="advanced"?r+=10:n.taskComplexity==="simple"&&s.complexity==="advanced"&&(r-=20)),n.domainSpecific&&t==="role-playing"&&(r+=15),n.expectedOutputType==="structured"&&["instruction-tuning","step-by-step"].includes(t)&&(r+=10),Math.max(0,Math.min(100,r))):r}calculateCoherenceScore(t,n){let r=60;const i=["first","then","next","finally","therefore","consequently"].filter(c=>new RegExp(`\\b${c}\\b`,"gi").test(t)).length;return r+=Math.min(20,i*3),t.split(/[.!?]+/).length>3&&(r+=10),/because|since|due to|as a result|leads to/gi.test(t)&&(r+=10),Math.max(0,Math.min(100,r))}calculateEffectivenessScore(t,n,r){let s=55;const o=["create","develop","analyze","implement","design","conduct"].filter(c=>new RegExp(`\\b${c}\\b`,"gi").test(t)).length;return s+=Math.min(20,o*4),/result|outcome|deliverable|output|produce/gi.test(t)&&(s+=15),/practical|applicable|usable|implementable/gi.test(t)&&(s+=10),Math.max(0,Math.min(100,s))}assessComplexityHandling(t,n,r){const s=this.methodProcessor.getMethodConfig(n);if(!s)return 50;let i=60;return r&&s.complexity&&({simple:"basic",moderate:"intermediate",complex:"advanced"}[r]===s.complexity?i+=25:r==="simple"&&s.complexity==="advanced"?i-=15:r==="complex"&&s.complexity==="basic"&&(i-=20)),r==="complex"&&(["chain-of-thought","tree-of-thought","multi-perspective"].includes(n)&&(i+=15),(t.includes("step")||t.includes("approach")||t.includes("analysis"))&&(i+=10)),Math.max(0,Math.min(100,i))}calculateOverallAdvancedScore(t){const n=t.methodSpecific.reduce((s,i)=>s+i.score,0)/t.methodSpecific.length,r={methodSpecific:.4,coherence:.2,effectiveness:.25,appropriateness:.15};return Math.round(n*r.methodSpecific+t.coherence*r.coherence+t.effectiveness*r.effectiveness+t.appropriateness*r.appropriateness)}generateImprovementSuggestions(t,n,r,s,i,o){const c=[],l=[],d=[];return r.filter(h=>h.score<70).forEach(h=>{c.push(...h.suggestions)}),s<70&&(l.push("Improve logical flow with better transition phrases"),l.push("Add clear connections between different sections")),i<70&&(d.push("Include more specific, actionable guidance"),d.push("Clarify expected outcomes and deliverables")),o<70&&c.push("Consider using a different method more suited to this task complexity"),{methodSuggestions:[...new Set(c)].slice(0,5),structuralImprovements:[...new Set(l)].slice(0,4),contentEnhancements:[...new Set(d)].slice(0,4)}}generateMetricFeedback(t,n){return n>=80?`Excellent ${t.name.toLowerCase()} - meets high quality standards`:n>=70?`Good ${t.name.toLowerCase()} - minor improvements possible`:n>=55?`Adequate ${t.name.toLowerCase()} - several areas for improvement`:`Poor ${t.name.toLowerCase()} - significant improvements needed`}generateMetricSuggestions(t,n){if(n>=80)return["Maintain current high quality"];const r=[];switch(t.id){case"clarity":r.push("Use more specific and unambiguous language"),r.push("Add clear section headers and structure");break;case"example_quality":r.push("Provide more diverse and realistic examples"),r.push("Ensure examples follow consistent format");break;case"reasoning_structure":r.push("Add explicit reasoning steps"),r.push("Use logical connectors between ideas");break;default:r.push(`Improve ${t.name.toLowerCase()} based on methodology requirements`)}return r}identifyStrengths(t,n,r){const s=[];return t.forEach(i=>{i.score>=80&&s.push(`Strong ${i.metricId.replace("_"," ")}`)}),n>=80&&s.push("Excellent logical coherence"),r>=80&&s.push("Highly effective approach"),s.slice(0,5)}identifyWeaknesses(t,n,r){const s=[];return t.forEach(i=>{i.score<60&&s.push(`Weak ${i.metricId.replace("_"," ")}`)}),n<60&&s.push("Poor logical coherence"),r<60&&s.push("Low effectiveness"),s.slice(0,5)}identifyCriticalIssues(t,n){const r=[];return t.forEach(s=>{s.score<40&&r.push(`Critical issue with ${s.metricId.replace("_"," ")}`)}),n<50&&r.push("Method may not be appropriate for this task"),r.slice(0,3)}}const oO=new x4e,w4e=({basePrompt:e,variables:t,context:n,onMethodApply:r,onClose:s})=>{const[i,o]=w.useState("zero-shot"),[c,l]=w.useState({}),[d,u]=w.useState(""),[h,A]=w.useState(null),[f,m]=w.useState(!1),[g,b]=w.useState(!1),[y,j]=w.useState("method-selection");w.useState(!1);const x=Q2.getMethodConfig(i),C=Q2.getAllMethods();w.useEffect(()=>{if(x){const T={};Object.entries(x.parameters).forEach(([Q,D])=>{T[Q]=D.default}),l(T)}},[i,x]);const S=n?oO.recommendOptimalMethod(e,{complexity:n.taskComplexity,requiresExamples:n.taskComplexity!=="simple",needsMultiplePerspectives:n.targetAudience==="mixed",domainExpertise:n.domainSpecific,stepByStepNeeded:n.taskComplexity==="complex",hasKnowledgeBase:Object.keys(t).length>3}):null,_=async()=>{if(x){m(!0);try{const T={method:i,parameters:c,basePrompt:e,variables:t,context:JSON.stringify(n),systemRole:c.role||void 0,constraints:c.constraints?c.constraints.split(`
`):void 0},Q=Q2.processPrompt(T);u(Q),j("preview")}catch(T){console.error("Error processing prompt:",T)}finally{m(!1)}}},N=async()=>{if(d){b(!0);try{const T=await oO.validateAdvancedPrompt(d,i,n);A(T)}catch(T){console.error("Error validating prompt:",T)}finally{b(!1)}}},L=()=>{d&&r(d,i,h||void 0)},P=T=>{const Q=(S==null?void 0:S.primaryRecommendation)===T.id,D=S==null?void 0:S.alternatives.includes(T.id);return a.jsxs(De,{className:`cursor-pointer transition-all duration-200 ${i===T.id?"ring-2 ring-primary border-primary":"hover:border-primary/50"} ${Q?"border-green-500 bg-green-50":""}`,onClick:()=>o(T.id),children:[a.jsxs(dt,{className:"pb-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(ft,{className:"text-sm font-medium flex items-center gap-2",children:[T.name,Q&&a.jsxs(_e,{className:"bg-green-500 text-xs",children:[a.jsx(JP,{className:"w-3 h-3 mr-1"}),"Recommended"]}),D&&a.jsx(_e,{variant:"secondary",className:"text-xs",children:"Alternative"})]}),a.jsx(_e,{variant:"outline",className:`text-xs ${T.complexity==="basic"?"border-green-200 text-green-700":T.complexity==="intermediate"?"border-yellow-200 text-yellow-700":"border-red-200 text-red-700"}`,children:T.complexity})]}),a.jsx(Kt,{className:"text-xs text-gray-600",children:T.description})]}),a.jsxs(et,{className:"pt-0",children:[a.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:T.bestFor.slice(0,3).map((M,U)=>a.jsx(_e,{variant:"outline",className:"text-xs px-1 py-0",children:M},U))}),a.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[a.jsx(T5,{className:"w-3 h-3"}),T.category]})]})]},T.id)},F=(T,Q)=>{const D=c[T];switch(Q.type){case"number":return a.jsx(ln,{type:"number",value:D||"",onChange:M=>l(U=>({...U,[T]:parseFloat(M.target.value)||0})),placeholder:String(Q.default)});case"boolean":return a.jsx(Wx,{checked:D||!1,onCheckedChange:M=>l(U=>({...U,[T]:M}))});case"array":return a.jsx(Qr,{value:Array.isArray(D)?D.join(", "):"",onChange:M=>l(U=>({...U,[T]:M.target.value.split(",").map(H=>H.trim()).filter(Boolean)})),placeholder:"Enter comma-separated values",rows:2});default:return a.jsx(ln,{value:D||"",onChange:M=>l(U=>({...U,[T]:M.target.value})),placeholder:String(Q.default||"")})}},I=T=>{T.target===T.currentTarget&&s()};return w.useEffect(()=>{const T=D=>{D.key==="Escape"&&s()};document.addEventListener("keydown",T);const Q=document.querySelector('[data-modal="prompt-engineering-panel"]');return Q&&Q.focus(),()=>{document.removeEventListener("keydown",T),document.body.style.overflow="",document.body.style.pointerEvents="",document.body.focus()}},[s]),w.useEffect(()=>()=>{setTimeout(()=>{document.body.style.overflow="",document.body.style.pointerEvents="",document.querySelectorAll('[data-modal="prompt-engineering-panel"]').forEach(Q=>{Q.parentElement===document.body&&!Q.querySelector("[data-react-fiber]")&&Q.remove()})},100)},[]),Fl.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:I,children:a.jsxs("div",{className:"bg-white rounded-lg max-w-7xl w-full max-h-[90vh] overflow-hidden",onClick:T=>T.stopPropagation(),"data-modal":"prompt-engineering-panel",tabIndex:-1,children:[a.jsx("div",{className:"p-6 border-b",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx(Gs,{className:"w-6 h-6 text-purple-500"}),"Advanced Prompt Engineering"]}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Apply sophisticated prompt engineering methods for enhanced AI interactions"})]}),a.jsx(fe,{variant:"ghost",onClick:s,children:""})]})}),a.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:a.jsxs(Ka,{value:y,onValueChange:j,children:[a.jsxs(ga,{className:"grid w-full grid-cols-4",children:[a.jsx(xn,{value:"method-selection",children:"Method Selection"}),a.jsx(xn,{value:"configuration",children:"Configuration"}),a.jsx(xn,{value:"preview",children:"Preview"}),a.jsx(xn,{value:"validation",children:"Validation"})]}),a.jsxs(jn,{value:"method-selection",className:"space-y-6",children:[S&&a.jsxs(za,{children:[a.jsx(_p,{className:"h-4 w-4"}),a.jsxs(Va,{children:[a.jsx("strong",{children:"AI Recommendation:"})," ",S.reasoning]})]}),a.jsx("div",{className:"space-y-4",children:["reasoning","instruction","context","creative"].map(T=>a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold text-lg capitalize mb-3 flex items-center gap-2",children:[T==="reasoning"&&a.jsx(Gs,{className:"w-5 h-5"}),T==="instruction"&&a.jsx(Mr,{className:"w-5 h-5"}),T==="context"&&a.jsx(Ep,{className:"w-5 h-5"}),T==="creative"&&a.jsx(_p,{className:"w-5 h-5"}),T," Methods"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:C.filter(Q=>Q.category===T).map(P)})]},T))})]}),a.jsx(jn,{value:"configuration",className:"space-y-6",children:x&&a.jsxs(a.Fragment,{children:[a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(us,{className:"w-5 h-5"}),x.name," Configuration"]}),a.jsx(Kt,{children:x.description})]}),a.jsx(et,{children:a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[a.jsx("div",{className:"flex items-center gap-1",children:a.jsx(_e,{variant:"outline",children:x.category})}),a.jsx("div",{className:"flex items-center gap-1",children:a.jsx(_e,{variant:"outline",className:x.complexity==="basic"?"border-green-200 text-green-700":x.complexity==="intermediate"?"border-yellow-200 text-yellow-700":"border-red-200 text-red-700",children:x.complexity})})]})})]}),a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsx(ft,{children:"Method Parameters"}),a.jsxs(Kt,{children:["Configure specific parameters for ",x.name]})]}),a.jsx(et,{className:"space-y-4",children:Object.entries(x.parameters).map(([T,Q])=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs(at,{className:"flex items-center gap-2",children:[T.replace(/_/g," ").replace(/\b\w/g,D=>D.toUpperCase()),Q.required&&a.jsx("span",{className:"text-red-500",children:"*"})]}),F(T,Q),a.jsx("p",{className:"text-sm text-gray-500",children:Q.description})]},T))})]}),a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsx(ft,{children:"Best Practices"}),a.jsx(Kt,{children:"Recommended use cases and guidelines"})]}),a.jsx(et,{children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-sm mb-2",children:"Best For:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:x.bestFor.map((T,Q)=>a.jsx(_e,{variant:"secondary",className:"text-xs",children:T},Q))})]}),x.examples&&x.examples.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-sm mb-2",children:"Example Use Case:"}),a.jsxs("div",{className:"bg-gray-50 p-3 rounded text-sm",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Context:"})," ",x.examples[0].context]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Input:"})," ",x.examples[0].input]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Expected Output:"})," ",x.examples[0].output]})]})]})]})})]})]})}),a.jsxs(jn,{value:"preview",className:"space-y-6",children:[a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsx(ft,{children:"Prompt Processing"}),a.jsxs(Kt,{children:["Generate the processed prompt using ",x==null?void 0:x.name]})]}),a.jsx(et,{children:a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(fe,{onClick:_,disabled:f||!x,className:"flex items-center gap-2",children:[a.jsx(Cc,{className:"w-4 h-4"}),f?"Processing...":"Process Prompt"]}),d&&a.jsx(fe,{variant:"outline",onClick:N,disabled:g,children:g?"Validating...":"Validate Quality"})]})})]}),d&&a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsx(ft,{children:"Processed Prompt"}),a.jsxs(Kt,{children:["Enhanced prompt using ",x==null?void 0:x.name," methodology"]})]}),a.jsxs(et,{children:[a.jsx("div",{className:"bg-gray-50 p-4 rounded-lg max-h-96 overflow-y-auto",children:a.jsx("pre",{className:"whitespace-pre-wrap text-sm font-mono",children:d})}),a.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[a.jsxs(_e,{variant:"outline",children:[d.length," characters"]}),a.jsxs(_e,{variant:"outline",children:[d.split(/\s+/).length," words"]}),a.jsx(_e,{variant:"outline",children:x==null?void 0:x.name})]})]})]})]}),a.jsx(jn,{value:"validation",className:"space-y-6",children:h?a.jsxs(a.Fragment,{children:[a.jsxs(De,{children:[a.jsx(dt,{children:a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(wU,{className:"w-5 h-5"}),"Quality Assessment"]})}),a.jsx(et,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{children:"Overall Quality Score"}),a.jsxs("span",{className:"font-bold text-lg",children:[h.overallScore,"/100"]})]}),a.jsx(bl,{value:h.overallScore,className:"h-3"}),a.jsx(_e,{variant:h.category==="excellent"?"default":h.category==="good"?"secondary":h.category==="fair"?"outline":"destructive",className:"mt-2",children:h.category.toUpperCase()})]}),a.jsx(qd,{}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-2",children:"Method Effectiveness"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(bl,{value:h.methodSpecific.methodEffectiveness,className:"flex-1 h-2"}),a.jsxs("span",{children:[h.methodSpecific.methodEffectiveness,"%"]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-2",children:"Coherence"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(bl,{value:h.methodSpecific.coherenceScore,className:"flex-1 h-2"}),a.jsxs("span",{children:[h.methodSpecific.coherenceScore,"%"]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-2",children:"Complexity Handling"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(bl,{value:h.methodSpecific.complexityHandling,className:"flex-1 h-2"}),a.jsxs("span",{children:[h.methodSpecific.complexityHandling,"%"]})]})]})]})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.summary.strengths.length>0&&a.jsxs(De,{children:[a.jsx(dt,{children:a.jsxs(ft,{className:"text-green-700 flex items-center gap-2",children:[a.jsx(br,{className:"w-4 h-4"}),"Strengths"]})}),a.jsx(et,{children:a.jsx("ul",{className:"space-y-2",children:h.summary.strengths.map((T,Q)=>a.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[a.jsx(br,{className:"w-3 h-3 text-green-500"}),T]},Q))})})]}),h.summary.recommendations.length>0&&a.jsxs(De,{children:[a.jsx(dt,{children:a.jsxs(ft,{className:"text-blue-700 flex items-center gap-2",children:[a.jsx(_p,{className:"w-4 h-4"}),"Improvements"]})}),a.jsx(et,{children:a.jsx("ul",{className:"space-y-2",children:h.summary.recommendations.slice(0,5).map((T,Q)=>a.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[a.jsx(_r,{className:"w-3 h-3 text-blue-500"}),T]},Q))})})]})]}),h.summary.criticalIssues.length>0&&a.jsxs(De,{className:"border-red-200",children:[a.jsx(dt,{children:a.jsxs(ft,{className:"text-red-700 flex items-center gap-2",children:[a.jsx(ts,{className:"w-4 h-4"}),"Critical Issues"]})}),a.jsx(et,{children:a.jsx("ul",{className:"space-y-2",children:h.summary.criticalIssues.map((T,Q)=>a.jsxs("li",{className:"flex items-center gap-2 text-sm text-red-700",children:[a.jsx(ts,{className:"w-3 h-3"}),T]},Q))})})]})]}):a.jsx(De,{children:a.jsx(et,{className:"flex items-center justify-center py-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx(wU,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500",children:"Process and validate a prompt to see quality assessment"})]})})})})]})}),a.jsxs("div",{className:"p-6 border-t bg-gray-50 flex justify-between",children:[a.jsx(fe,{variant:"outline",onClick:s,children:"Cancel"}),a.jsxs("div",{className:"flex gap-2",children:[y!=="method-selection"&&a.jsx(fe,{variant:"outline",onClick:()=>j("method-selection"),children:"Back to Selection"}),a.jsxs(fe,{onClick:L,disabled:!d,className:"bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600",children:[a.jsx(Cc,{className:"w-4 h-4 mr-2"}),"Apply Method"]})]})]})]})}),document.body)},b4e=({template:e,onGenerate:t,onClose:n})=>{var T,Q,D,M;const{isGenerating:r,currentPrompt:s}=ma(),[i,o]=w.useState({}),[c,l]=w.useState({}),[d,u]=w.useState("general"),[h,A]=w.useState([]),[f,m]=w.useState("configure"),[g,b]=w.useState(!1),[y,j]=w.useState("");w.useEffect(()=>{var $;const U={};e.variables.forEach(R=>{var Y,X;if(R.defaultValue!==void 0)U[R.id]=R.defaultValue;else if(R.required)switch(R.type){case"number":R.id==="sampleSize"?U[R.id]=15:U[R.id]=((Y=R.validation)==null?void 0:Y.min)||1;break;case"select":U[R.id]=((X=R.options)==null?void 0:X[0])||"";break;case"textarea":R.id==="dataSources"?U[R.id]="User interviews, surveys, analytics data, support tickets":R.id==="teamComposition"?U[R.id]="UX researcher, product manager, designer":R.id==="researchMethods"?U[R.id]="User interviews, behavioral analytics, survey data, usability testing":R.id==="primaryGoal"?U[R.id]="Complete the main task efficiently and successfully":U[R.id]=`Please specify ${R.name.toLowerCase()}`;break;case"text":R.id==="projectName"?U[R.id]="Project Name":R.id==="personaName"?U[R.id]="Primary User":U[R.id]=`Please specify ${R.name.toLowerCase()}`;break;default:U[R.id]=`Please specify ${R.name.toLowerCase()}`}else U[R.id]=R.type==="number"?0:""}),o(U);const H={};($=e.customizationOptions)==null||$.forEach(R=>{R.default!==void 0&&(H[R.id]=R.default)}),l(H)},[e]),w.useEffect(()=>()=>{setTimeout(()=>{document.body.style.overflow="",document.body.style.pointerEvents="",document.querySelectorAll('[data-modal="enhanced-prompt-panel"]').forEach(H=>{H.parentElement===document.body&&!H.querySelector("[data-react-fiber]")&&H.remove()})},100)},[]);const x=(U,H)=>{o($=>({...$,[U]:H}))},C=(U,H)=>{l($=>({...$,[U]:H}))},S=()=>{const{validateTemplateVariables:U}=ma.getState(),H=U(e.id,i);return A(H.errors),H.isValid},_=()=>{var $,R;if(console.log("Enhanced Prompt Panel - Generate clicked"),console.log("Variables:",i),console.log("Template variables:",e.variables),!S()){console.log("Validation failed:",h);return}const U={industry:d==="general"?void 0:d,customizations:c,qualityLevel:(($=c.methodologyDepth)==null?void 0:$.toLowerCase())||"intermediate",timeConstraints:((R=c.timeConstraints)==null?void 0:R.toLowerCase())||"standard"};console.log("Enhanced context:",U);const H=N(e.template,i);j(H),t(i,U),m("preview")},N=(U,H)=>{let $=U;return Object.entries(H).forEach(([R,Y])=>{const X=new RegExp(`{{${R}}}`,"g");$=$.replace(X,String(Y))}),$},L=(U,H,$)=>{var Y,X;j(U),b(!1);const R={industry:d==="general"?void 0:d,customizations:{...c,promptEngineeringMethod:H,methodValidation:$},qualityLevel:((Y=c.methodologyDepth)==null?void 0:Y.toLowerCase())||"intermediate",timeConstraints:((X=c.timeConstraints)==null?void 0:X.toLowerCase())||"standard"};t(i,R),m("preview")},P=U=>{var $,R,Y;const H=i[U.id]||"";switch(U.type){case"textarea":return a.jsx(Qr,{id:U.id,value:H,onChange:X=>x(U.id,X.target.value),placeholder:U.description,className:"min-h-24 text-base border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg transition-colors",rows:4});case"select":return a.jsxs(Vn,{value:H,onValueChange:X=>x(U.id,X),children:[a.jsx(Qn,{id:U.id,className:"h-12 text-base border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg transition-colors",children:a.jsx(qn,{placeholder:"Select an option"})}),a.jsx(Hn,{className:"rounded-lg",children:($=U.options)==null?void 0:$.map(X=>a.jsx(qe,{value:X,className:"text-base py-3",children:X},X))})]});case"number":return a.jsx(ln,{id:U.id,type:"number",value:H,onChange:X=>x(U.id,parseInt(X.target.value)||0),placeholder:U.description,min:(R=U.validation)==null?void 0:R.min,max:(Y=U.validation)==null?void 0:Y.max,className:"h-12 text-base border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg transition-colors"});case"checkbox":return a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Wx,{id:U.id,checked:H,onCheckedChange:X=>x(U.id,X),className:"w-5 h-5 border-gray-300 data-[state=checked]:bg-blue-600 data-[state=checked]:border-blue-600"}),a.jsx(at,{htmlFor:U.id,className:"text-sm text-gray-700 font-normal",children:U.description})]});default:return a.jsx(ln,{id:U.id,value:H,onChange:X=>x(U.id,X.target.value),placeholder:U.description,className:"h-12 text-base border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg transition-colors"})}},F=U=>{var $;const H=c[U.id];switch(U.type){case"select":return a.jsxs(Vn,{value:H,onValueChange:R=>C(U.id,R),children:[a.jsx(Qn,{children:a.jsx(qn,{placeholder:"Select option"})}),a.jsx(Hn,{children:($=U.options)==null?void 0:$.map(R=>a.jsx(qe,{value:R,children:R},R))})]});case"checkbox":return a.jsx(Wx,{checked:H,onCheckedChange:R=>C(U.id,R)});case"number":return a.jsx(ln,{type:"number",value:H,onChange:R=>C(U.id,parseInt(R.target.value)||U.default)});default:return a.jsx(ln,{value:H,onChange:R=>C(U.id,R.target.value)})}},I=U=>{U.target===U.currentTarget&&(U.preventDefault(),U.stopPropagation(),n())};return w.useEffect(()=>{const U=$=>{$.key==="Escape"&&n()};document.addEventListener("keydown",U);const H=document.querySelector('[data-modal="enhanced-prompt-panel"]');return H&&H.focus(),()=>{document.removeEventListener("keydown",U),document.body.style.overflow="",document.body.focus()}},[n]),Fl.createPortal(a.jsx("div",{className:"fixed z-[9998] bg-background/95 backdrop-blur-sm",style:{top:"86px",left:"0px",width:"100vw",height:"calc(100vh - 86px)"},onClick:I,children:a.jsxs("div",{className:"w-full h-full bg-background flex flex-col",onClick:U=>U.stopPropagation(),"data-modal":"enhanced-prompt-panel",tabIndex:-1,children:[a.jsx("div",{className:"p-6 sm:p-8 border-b border-gray-100 bg-gradient-to-r from-blue-50 to-purple-50",children:a.jsxs("div",{className:"flex justify-between items-start gap-6",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-3",children:e.name}),a.jsx("p",{className:"text-gray-700 text-base leading-relaxed mb-4 max-w-3xl",children:e.description}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsx(_e,{variant:"secondary",className:"bg-blue-100 text-blue-800 border-blue-200 font-medium px-3 py-1",children:e.category}),a.jsxs(_e,{variant:"outline",className:"border-gray-300 text-gray-700 font-medium px-3 py-1 bg-white",children:[a.jsx(Jo,{className:"w-4 h-4 mr-2"}),e.qualityMetrics.completionTime]}),a.jsx(_e,{variant:"outline",className:e.qualityMetrics.difficultyLevel==="advanced"?"border-red-300 text-red-800 bg-red-50 font-medium px-3 py-1":e.qualityMetrics.difficultyLevel==="intermediate"?"border-amber-300 text-amber-800 bg-amber-50 font-medium px-3 py-1":"border-emerald-300 text-emerald-800 bg-emerald-50 font-medium px-3 py-1",children:e.qualityMetrics.difficultyLevel.charAt(0).toUpperCase()+e.qualityMetrics.difficultyLevel.slice(1)})]})]}),a.jsxs(fe,{variant:"ghost",onClick:n,className:"text-gray-400 hover:text-gray-600 hover:bg-white/80 rounded-full w-10 h-10 p-0 flex-shrink-0",children:[a.jsx("span",{className:"sr-only",children:"Close dialog"}),a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]})}),a.jsx("div",{className:"flex-1 overflow-hidden",children:a.jsxs(Ka,{value:f,onValueChange:m,className:"h-full flex flex-col",children:[a.jsx("div",{className:"flex-shrink-0 px-6 sm:px-8 pt-6 pb-2 border-b border-gray-100",children:a.jsxs(ga,{className:"grid w-full grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 bg-gray-100 p-1 rounded-lg",children:[a.jsxs(xn,{value:"configure",className:"data-[state=active]:bg-white data-[state=active]:shadow-sm text-sm font-medium py-2.5 px-3 rounded-md transition-all",children:[a.jsx("span",{className:"hidden sm:inline",children:"Configure"}),a.jsx("span",{className:"sm:hidden",children:"Setup"})]}),a.jsxs(xn,{value:"customize",className:"data-[state=active]:bg-white data-[state=active]:shadow-sm text-sm font-medium py-2.5 px-3 rounded-md transition-all",children:[a.jsx("span",{className:"hidden sm:inline",children:"Customize"}),a.jsx("span",{className:"sm:hidden",children:"Custom"})]}),a.jsx(xn,{value:"quality",className:"data-[state=active]:bg-white data-[state=active]:shadow-sm text-sm font-medium py-2.5 px-3 rounded-md transition-all",children:"Quality"}),a.jsxs(xn,{value:"engineering",className:"data-[state=active]:bg-white data-[state=active]:shadow-sm text-sm font-medium py-2.5 px-3 rounded-md transition-all col-span-2 sm:col-span-1",children:[a.jsx("span",{className:"hidden lg:inline",children:"AI Methods"}),a.jsx("span",{className:"lg:hidden",children:"AI"})]}),a.jsx(xn,{value:"preview",className:"data-[state=active]:bg-white data-[state=active]:shadow-sm text-sm font-medium py-2.5 px-3 rounded-md transition-all sm:col-span-3 lg:col-span-1",children:"Preview"})]})}),a.jsxs(ns,{className:"flex-1 px-6 sm:px-8 py-6",children:[a.jsxs(jn,{value:"configure",className:"space-y-8 mt-0",children:[a.jsxs(De,{className:"border-0 shadow-lg bg-gradient-to-br from-white to-blue-50",children:[a.jsxs(dt,{className:"pb-4",children:[a.jsxs(ft,{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Industry Context"]}),a.jsx(Kt,{className:"text-gray-600 leading-relaxed",children:"Select your industry to get specialized adaptations and domain-specific considerations"})]}),a.jsx(et,{className:"pt-2",children:a.jsxs(Vn,{value:d,onValueChange:u,children:[a.jsx(Qn,{className:"h-12 text-base border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:a.jsx(qn,{placeholder:"Choose your industry context (optional)"})}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"general",children:"General (no industry specific)"}),a.jsx(qe,{value:"fintech",children:"Financial Services"}),a.jsx(qe,{value:"healthcare",children:"Healthcare"}),a.jsx(qe,{value:"ecommerce",children:"E-commerce"}),a.jsx(qe,{value:"saas",children:"SaaS/Software"}),a.jsx(qe,{value:"education",children:"Education"})]})]})})]}),a.jsxs(De,{className:"border-0 shadow-lg bg-gradient-to-br from-white to-purple-50",children:[a.jsxs(dt,{className:"pb-4",children:[a.jsxs(ft,{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[a.jsxs("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Template Configuration"]}),a.jsx(Kt,{className:"text-gray-600 leading-relaxed",children:"Configure the core parameters and variables for this UX methodology"})]}),a.jsx(et,{className:"pt-2 space-y-6",children:e.variables.map(U=>a.jsxs("div",{className:"space-y-3",children:[a.jsxs(at,{htmlFor:U.id,className:"flex items-center gap-2 text-sm font-semibold text-gray-800",children:[U.name,U.required&&a.jsx("span",{className:"text-red-600 text-base",children:"*"})]}),a.jsxs("div",{className:"space-y-2",children:[P(U),a.jsx("p",{className:"text-sm text-gray-600 leading-relaxed pl-1",children:U.description})]})]},U.id))})]}),h.length>0&&a.jsxs(De,{className:"border-red-200",children:[a.jsx(dt,{children:a.jsxs(ft,{className:"text-red-700 flex items-center gap-2",children:[a.jsx(ts,{className:"w-4 h-4"}),"Validation Errors"]})}),a.jsx(et,{children:a.jsx("ul",{className:"list-disc list-inside space-y-1 text-red-600",children:h.map((U,H)=>a.jsx("li",{children:U},H))})})]})]}),a.jsxs(jn,{value:"customize",className:"space-y-8 mt-0",children:[e.customizationOptions&&e.customizationOptions.length>0&&a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsx(ft,{children:"Advanced Customizations"}),a.jsx(Kt,{children:"Fine-tune the template to match your specific needs"})]}),a.jsx(et,{className:"space-y-4",children:e.customizationOptions.map(U=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs(at,{htmlFor:U.id,className:"flex items-center gap-2",children:[U.label,a.jsx(_e,{variant:"outline",className:"text-xs",children:U.category})]}),F(U),a.jsx("p",{className:"text-sm text-gray-500",children:U.description})]},U.id))})]}),d!=="general"&&((T=e.industryAdaptations)==null?void 0:T[d])&&a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsx(ft,{children:"Industry-Specific Adaptations"}),a.jsxs(Kt,{children:["Specialized considerations for ",d]})]}),a.jsx(et,{children:a.jsx("div",{className:"space-y-2",children:e.industryAdaptations[d].considerations.map((U,H)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(br,{className:"w-4 h-4 text-green-500"}),a.jsx("span",{className:"text-sm",children:U})]},H))})})]})]}),a.jsxs(jn,{value:"quality",className:"space-y-8 mt-0",children:[a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsx(ft,{children:"Quality Standards"}),a.jsx(Kt,{children:"Expected quality outcomes and success criteria"})]}),a.jsx(et,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[a.jsx(Mr,{className:"w-4 h-4"}),"Success Criteria"]}),a.jsx("ul",{className:"space-y-1 text-sm",children:e.qualityMetrics.successCriteria.map((U,H)=>a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(br,{className:"w-3 h-3 text-green-500"}),U]},H))})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[a.jsx(qa,{className:"w-4 h-4"}),"Participant Guidelines"]}),e.qualityMetrics.participantCount&&a.jsxs("div",{className:"text-sm",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Recommended:"})," ",e.qualityMetrics.participantCount.recommended," participants"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Range:"})," ",e.qualityMetrics.participantCount.min,"-",e.qualityMetrics.participantCount.max]})]})]})]})})]}),a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsx(ft,{children:"Research Foundation"}),a.jsx(Kt,{children:"Methodological backing and industry standards"})]}),a.jsx(et,{children:a.jsxs(u4e,{type:"single",collapsible:!0,children:[a.jsxs(M2,{value:"methodology",children:[a.jsx(R2,{children:"Methodology"}),a.jsx(O2,{children:a.jsx("ul",{className:"space-y-1",children:e.researchBacking.methodology.map((U,H)=>a.jsxs("li",{className:"text-sm",children:[" ",U]},H))})})]}),a.jsxs(M2,{value:"best-practices",children:[a.jsx(R2,{children:"Best Practices"}),a.jsx(O2,{children:a.jsx("ul",{className:"space-y-1",children:e.researchBacking.bestPractices.map((U,H)=>a.jsxs("li",{className:"text-sm",children:[" ",U]},H))})})]}),a.jsxs(M2,{value:"standards",children:[a.jsx(R2,{children:"Industry Standards"}),a.jsx(O2,{children:a.jsx("ul",{className:"space-y-1",children:e.researchBacking.industryStandards.map((U,H)=>a.jsxs("li",{className:"text-sm",children:[" ",U]},H))})})]})]})})]})]}),a.jsxs(jn,{value:"engineering",className:"space-y-8 mt-0",children:[a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(Gs,{className:"w-5 h-5 text-purple-500"}),"Advanced AI Methods"]}),a.jsx(Kt,{children:"Apply sophisticated prompt engineering techniques for enhanced AI interactions"})]}),a.jsx(et,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-sm text-gray-600",children:g?"Configure advanced prompt engineering methods":"Enhance your prompts with AI-powered engineering techniques"}),a.jsxs(fe,{onClick:()=>b(!g),variant:"outline",className:"flex items-center gap-2",children:[a.jsx(Gs,{className:"w-4 h-4"}),g?"Hide Methods":"Open AI Methods"]})]})})]}),y&&a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsx(ft,{children:"AI-Enhanced Prompt"}),a.jsx(Kt,{children:"Preview of your prompt enhanced with AI engineering methods"})]}),a.jsxs(et,{children:[a.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 p-4 rounded-lg border border-purple-200",children:a.jsx("pre",{className:"whitespace-pre-wrap text-sm font-mono text-gray-800",children:y})}),a.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[a.jsxs(_e,{variant:"outline",className:"bg-purple-100",children:[a.jsx(Cc,{className:"w-3 h-3 mr-1"}),"AI Enhanced"]}),a.jsxs(_e,{variant:"outline",children:[y.length," characters"]}),a.jsxs(_e,{variant:"outline",children:[y.split(/\s+/).length," words"]})]})]})]})]}),a.jsxs(jn,{value:"preview",className:"space-y-8 mt-0",children:[(s==null?void 0:s.qualityScore)&&a.jsxs(De,{children:[a.jsx(dt,{children:a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(JP,{className:"w-5 h-5"}),"Quality Assessment"]})}),a.jsx(et,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{children:"Overall Quality Score"}),a.jsxs("span",{className:"font-bold text-lg",children:[s.qualityScore.overallScore,"/100"]})]}),a.jsx(bl,{value:s.qualityScore.overallScore,className:"h-2"}),a.jsx(_e,{variant:s.qualityScore.category==="excellent"?"default":s.qualityScore.category==="good"?"secondary":s.qualityScore.category==="fair"?"outline":"destructive",className:"mt-2",children:s.qualityScore.category})]}),s.qualityScore.summary.strengths.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-green-700 mb-2",children:"Strengths"}),a.jsx("ul",{className:"space-y-1",children:s.qualityScore.summary.strengths.map((U,H)=>a.jsxs("li",{className:"text-sm flex items-center gap-2",children:[a.jsx(br,{className:"w-3 h-3 text-green-500"}),U]},H))})]}),s.qualityScore.summary.recommendations.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-blue-700 mb-2",children:"Recommendations"}),a.jsx("ul",{className:"space-y-1",children:s.qualityScore.summary.recommendations.slice(0,5).map((U,H)=>a.jsxs("li",{className:"text-sm flex items-center gap-2",children:[a.jsx(_p,{className:"w-3 h-3 text-blue-500"}),U]},H))})]})]})})]}),s&&a.jsxs(De,{children:[a.jsx(dt,{children:a.jsx(ft,{children:"Generated Content"})}),a.jsx(et,{children:a.jsx("div",{className:"bg-gray-50 p-4 rounded-lg max-h-96 overflow-y-auto",children:a.jsx("pre",{className:"whitespace-pre-wrap text-sm font-mono",children:s.content})})})]})]})]})]})}),g&&a.jsx(w4e,{basePrompt:y||N(e.template,i),variables:i,context:{taskComplexity:((Q=c.methodologyDepth)==null?void 0:Q.toLowerCase())==="advanced"?"complex":((D=c.methodologyDepth)==null?void 0:D.toLowerCase())==="basic"?"simple":"moderate",domainSpecific:d!=="general",targetAudience:"practitioners",outputLength:((M=c.outputDetail)==null?void 0:M.toLowerCase())||"moderate",userExperience:"intermediate"},onMethodApply:L,onClose:()=>b(!1)}),a.jsx("div",{className:"flex-shrink-0 p-6 sm:p-8 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[a.jsx(fe,{variant:"outline",onClick:n,className:"order-2 sm:order-1 h-11 px-6 text-gray-700 border-gray-300 hover:bg-gray-100 hover:border-gray-400 font-medium",children:"Cancel"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 order-1 sm:order-2",children:[f!=="configure"&&a.jsx(fe,{variant:"outline",onClick:()=>m("configure"),className:"h-11 px-6 text-blue-700 border-blue-300 hover:bg-blue-50 hover:border-blue-400 font-medium",children:"Back to Configure"}),a.jsx(fe,{onClick:_,disabled:r||h.length>0,className:"h-11 px-8 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:r?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Cc,{className:"w-5 h-5 mr-2"}),"Generate Enhanced Prompt"]})})]})]})})]})}),document.body)},vF=({children:e,selected:t=!1,minWidth:n,minHeight:r,maxWidth:s,maxHeight:i,nodeType:o="default",initialWidth:c,initialHeight:l,nodeId:d})=>{const h=(()=>{const A={framework:{minWidth:n||280,maxWidth:s||400,minHeight:typeof r=="number"?r:450,maxHeight:i||700},stage:{minWidth:n||240,maxWidth:s||350,minHeight:typeof r=="number"?r:380,maxHeight:i||550},tool:{minWidth:n||260,maxWidth:s||380,minHeight:typeof r=="number"?r:420,maxHeight:i||650},prompt:{minWidth:n||1250,maxWidth:s||1600,minHeight:typeof r=="number"?r:300,maxHeight:i||600},default:{minWidth:n||280,maxWidth:s||600,minHeight:typeof r=="number"?r:200,maxHeight:i||800}};return A[o]||A.default})();return a.jsxs(a.Fragment,{children:[a.jsx(G_e,{color:t?"hsl(var(--primary))":"hsl(var(--muted-foreground))",isVisible:t,minWidth:h.minWidth,minHeight:h.minHeight,maxWidth:h.maxWidth,maxHeight:h.maxHeight,handleStyle:{backgroundColor:"hsl(var(--primary))",border:"2px solid white",borderRadius:"4px",width:"8px",height:"8px"},lineStyle:{borderColor:"hsl(var(--primary))",borderWidth:"1px",borderStyle:"dashed"}}),a.jsx("div",{style:{width:"100%",height:"100%",position:"relative",display:"flex",flexDirection:"column"},className:"resizable-node-content",children:e})]})},jX=w.memo(({data:e,selected:t,id:n})=>{const{generatePrompt:r,setCurrentPrompt:s,getEnhancedTemplate:i,generateEnhancedPrompt:o,createPromptVersion:c}=ma(),{addNode:l,addEdge:d,nodes:u,edges:h,updateNode:A,getPromptNodeForTool:f,setToolPromptMapping:m,getPromptIdForTool:g,setToolPromptIdMapping:b}=Us(),{currentProject:y,getEnhancedSettings:j}=js(),{entries:x,fetchEntries:C}=pa(),{tool:S,framework:_,stage:N,isActive:L,isCompleted:P,linkedKnowledge:F=[],onSwitchToPromptTab:I}=e,T=Array.isArray(F)?F:[],{handlePositions:Q,updateHandlePosition:D}=Zv(n),M=rm((_==null?void 0:_.id)||"design-thinking"),[U,H]=w.useState(!1),[$,R]=w.useState(0),[Y,X]=w.useState(!1),[q,K]=w.useState(!1),J=6,W=i(S.id);y&&j(y.id);const ne=async pe=>{var yt,ht,Ct,Me,kt,ct,Nt,bt,An,$t,Rt;if(console.log("[handleGeneratePrompt] Called with override:",pe),console.log("[handleGeneratePrompt] Current linkedKnowledge prop:",T),!_||!N||!y){console.error("Missing required data for prompt generation");return}const be=pe||T;console.log("[handleGeneratePrompt] Effective linked knowledge:",be);const Pe=Us.getState().edges.filter(Le=>Le.target===n&&Le.source.startsWith("knowledge-document-")).map(Le=>{var it;const Ke=u.find(pt=>pt.id===Le.source);return(it=Ke==null?void 0:Ke.data)==null?void 0:it.knowledgeEntry}).filter(Boolean),xe=[...be],ue=[...x.filter(Le=>be.includes(Le.id))];if(Pe.forEach(Le=>{Le&&!xe.includes(Le.id)&&(xe.push(Le.id),ue.push(Le))}),console.log("[handleGeneratePrompt] All linked knowledge count:",xe.length),xe.length===0){console.log("[handleGeneratePrompt] No knowledge found, opening dialog"),x.length===0&&await C(y.id),X(!0);return}console.log("[handleGeneratePrompt] Knowledge found, proceeding with generation");try{H(!0),R(0),R(1),await new Promise(Ut=>setTimeout(Ut,800)),R(2),await new Promise(Ut=>setTimeout(Ut,600)),R(3);const Le=ue.map(Ut=>`${Ut.title}: ${Ut.content}`).join(`

`),Ke=y?j(y.id):null,it=Ke||{};console.log("[Tool Node] Generating prompt with project settings:",{projectId:y.id,hasEnhancedSettings:!!Ke,usingDefaults:!Ke,qualityDepth:((yt=it==null?void 0:it.qualitySettings)==null?void 0:yt.methodologyDepth)||"will use default",outputDetail:((ht=it==null?void 0:it.qualitySettings)==null?void 0:ht.outputDetail)||"will use default"});const pt=await r(y.id,_,N,S,void 0,void 0,void 0,Le||void 0,void 0,it);await new Promise(Ut=>setTimeout(Ut,400)),R(4);const At=ue.map(Ut=>({id:Ut.id,title:Ut.title,content:Ut.content}));console.log("Knowledge Base Integration Debug:",{totalEntries:x.length,traditionalLinkedKnowledgeIds:T,connectedCanvasNodesCount:Pe.length,allLinkedKnowledgeIds:xe,finalKnowledgeCount:At.length,knowledgeData:At.map(Ut=>({id:Ut.id,title:Ut.title,contentLength:Ut.content.length,contentPreview:Ut.content.substring(0,100)+"..."}))}),console.log("Sending to API:",{promptContent:pt.substring(0,200)+"...",knowledgeCount:At.length,hasKnowledgeContext:At.length>0});const rn=g(n);console.log("[Tool Node] Checking for existing prompt before API call:",rn);const{data:vt,error:Bt}=await rt.functions.invoke("generate-ai-prompt",{body:{promptContent:pt,variables:{},projectId:y.id,frameworkName:_.name,stageName:N.name,toolName:S.name,knowledgeContext:At,existingPromptId:rn||void 0}});if(Bt)throw console.error(" Error calling AI function:",Bt),console.error(" Error details:",JSON.stringify(Bt,null,2)),console.error(" Response data (may contain error details):",vt),console.error(" Full response data:",JSON.stringify(vt,null,2)),vt&&vt.error?(console.error(" Server error message:",vt.error),console.error(" Server error details:",vt.details),Ue.error("AI generation failed: "+vt.error),new Error(vt.error)):(Ue.error("Failed to call AI service: "+(Bt.message||"Unknown error")),Bt);if(!vt||!vt.success)throw console.error(" AI function returned error:",vt==null?void 0:vt.error),console.error(" Error details from server:",vt==null?void 0:vt.details),console.error(" Full response:",JSON.stringify(vt,null,2)),Ue.error("AI generation failed: "+((vt==null?void 0:vt.error)||"Unknown error")),new Error((vt==null?void 0:vt.error)||"Failed to generate AI response");console.log("AI response received:",{promptLength:((Ct=vt.prompt)==null?void 0:Ct.length)||0,responseLength:((Me=vt.aiResponse)==null?void 0:Me.length)||0,hasResponse:!!vt.aiResponse}),await new Promise(Ut=>setTimeout(Ut,400)),R(5);let Xt,bn;try{console.log(" Auto-executing generated prompt...");const Ut=await rt.functions.invoke("ai-conversation",{body:{userMessage:vt.prompt,initialPrompt:"",conversationHistory:[],projectId:y.id,knowledgeContext:At,frameworkContext:{framework:_.name,stage:N.name,tool:S.name},executeAsNewPrompt:!0}});if(Ut.error)throw new Error(Ut.error.message||"Execution failed");if(!((kt=Ut.data)!=null&&kt.success))throw new Error(((ct=Ut.data)==null?void 0:ct.error)||"Failed to execute prompt");Xt=Ut.data.response,console.log(" Prompt executed successfully, result length:",Xt.length)}catch(Ut){console.error(" Auto-execution failed:",Ut),bn=Ut instanceof Error?Ut.message:"Unknown execution error"}await new Promise(Ut=>setTimeout(Ut,400));const Qt=vt.id;rn?console.log("[Tool Node] Edge Function created version for existing prompt:",rn):(console.log("[Tool Node] Storing new tool-to-prompt mapping:",n,"->",vt.id),b(n,vt.id));const on={id:Qt,structured_prompt_id:vt.structured_prompt_id,workflowId:`workflow-${_.id}-${N.id}-${S.id}`,projectId:y.id,content:vt.prompt,context:{framework:_,stage:N,tool:S},variables:{},timestamp:Date.now(),output:vt.aiResponse,executionResult:Xt,executionError:bn};s(on),R(6);const It=f(n);if(It)console.log("[Tool Node] Reusing existing prompt node:",It),A(It,{prompt:on,onSwitchToPromptTab:I,sourceToolId:n,sourceToolName:S.name});else{console.log("[Tool Node] Creating new prompt node for tool:",n);const Ut=fo("prompt",u,{sourceNodeId:n,workflowType:"tool-to-prompt"}),Wn={id:`prompt-${n}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"prompt",position:Ut,data:{prompt:on,onSwitchToPromptTab:I,sourceToolId:n,sourceToolName:S.name}};if(l(Wn),m(n,Wn.id),n){const Nn=sm(n,Wn.id,{sourceHandle:`${n}-source-1`,targetHandle:"target-1",animated:!0,style:{stroke:"hsl(var(--primary))",strokeWidth:2}});d(Nn)}}await new Promise(Ut=>setTimeout(Ut,300)),X(!1)}catch(Le){console.error("Error generating AI prompt:",Le);let Ke="Prompt generation failed",it=!0;(Nt=Le.message)!=null&&Nt.includes("fetch")||(bt=Le.message)!=null&&bt.includes("network")?Ke="Network error - please check your connection":(An=Le.message)!=null&&An.includes("timeout")?Ke="Request timed out - the AI service might be busy":($t=Le.message)!=null&&$t.includes("auth")||(Rt=Le.message)!=null&&Rt.includes("unauthorized")?(Ke="Authentication error - please sign in again",it=!1):Le.message&&(Ke=Le.message),it?Ue.error(Ke,{description:"Click the Generate button to try again",duration:5e3}):Ue.error(Ke,{duration:5e3}),H(!1),R(0),X(!1)}},ae=async pe=>{console.log("[handleKnowledgeSelected] Called with:",pe),n&&(console.log("[handleKnowledgeSelected] Updating node with knowledge"),A(n,{linkedKnowledge:pe}),Ue.success(`${pe.length} knowledge ${pe.length===1?"entry":"entries"} linked to ${S.name}`),console.log("[handleKnowledgeSelected] Closing dialog and generating prompt"),X(!1),setTimeout(()=>{console.log("[handleKnowledgeSelected] Now calling handleGeneratePrompt"),ne(pe)},100))},ce=()=>{H(!1),R(0),I&&setTimeout(()=>{I()},500)},Ae=(pe,be)=>{console.log("handleEnhancedGenerate called with:"),console.log("Tool ID:",S.id),console.log("Variables:",pe),console.log("Enhanced Context:",be),o(S.id,pe,be).then(Ne=>{Ue.success("Enhanced prompt generated successfully!"),K(!1),I&&setTimeout(()=>{I()},500)}).catch(Ne=>{Ue.error("Failed to generate enhanced prompt: "+Ne.message),console.error("Enhanced prompt generation error:",Ne)})};return a.jsxs(vF,{selected:t,nodeType:"tool",initialWidth:300,initialHeight:420,minWidth:260,nodeId:n,maxWidth:380,minHeight:420,maxHeight:650,children:[a.jsxs(ot.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.2},className:"w-full h-full",children:[n&&a.jsxs(a.Fragment,{children:[a.jsx(Ds,{id:`${n}-target-1`,type:"target",initialPosition:Q["target-1"]||"left",onPositionChange:pe=>D("target-1",pe),nodeId:n}),a.jsx(Ds,{id:`${n}-target-2`,type:"target",initialPosition:Q["target-2"]||"top",onPositionChange:pe=>D("target-2",pe),nodeId:n})]}),a.jsx(De,{className:`w-full p-4 transition-all duration-200 flex flex-col ${t?"ring-2 ring-offset-2":""} hover:shadow-md`,style:{backgroundColor:L?M.background.hover:M.background.tertiary,borderTopWidth:"2px",borderRightWidth:"2px",borderBottomWidth:"2px",borderLeftWidth:"3px",borderTopColor:t?M.border.primary:P?"#10B981":M.border.tertiary,borderRightColor:t?M.border.primary:P?"#10B981":M.border.tertiary,borderBottomColor:t?M.border.primary:P?"#10B981":M.border.tertiary,borderLeftColor:M.border.tertiary,borderStyle:"solid",...t&&{"--tw-ring-color":M.border.primary,"--tw-ring-offset-shadow":`0 0 0 2px ${M.background.tertiary}`,"--tw-ring-shadow":`0 0 0 calc(2px + 2px) ${M.border.primary}`}},children:a.jsxs("div",{className:"flex-grow flex flex-col",children:[a.jsx("div",{className:"flex items-start justify-between mb-3 flex-shrink-0",children:a.jsxs("div",{className:"flex-grow",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(gr,{className:"w-4 h-4",style:{color:M.text.secondary}}),a.jsx("h3",{className:"font-semibold text-sm",style:{color:M.text.secondary},children:S.name}),W&&a.jsxs(_e,{variant:"secondary",className:"text-xs px-1 py-0 h-4 bg-gradient-to-r from-purple-500 to-blue-500 text-white",children:[a.jsx(JP,{className:"w-2 h-2 mr-1"}),"Enhanced"]})]}),a.jsx("div",{className:"max-h-12 overflow-hidden",children:a.jsx("p",{className:"text-xs leading-relaxed line-clamp-2",style:{color:M.text.light},children:S.description})})]})}),a.jsxs("div",{className:"flex items-center justify-between mb-3 flex-shrink-0",children:[a.jsx(_e,{className:"text-xs font-medium",style:{backgroundColor:M.background.secondary,color:M.text.secondary,borderColor:M.border.secondary},children:S.category}),a.jsxs("div",{className:"flex items-center gap-1",children:[P&&a.jsx(_e,{variant:"default",className:"text-xs bg-success",children:"Done"}),L&&a.jsx(_e,{className:"text-xs",style:{backgroundColor:M.background.primary,color:M.text.primary},children:"Active"})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col min-h-0 mb-3",children:[a.jsx("div",{className:"flex items-center gap-2 flex-shrink-0 mb-2",children:(()=>{const pe=h.filter(Ne=>Ne.target===n&&Ne.source.startsWith("knowledge-document-")).length,be=T.length+pe;return be>0?a.jsxs(a.Fragment,{children:[a.jsx(Xo,{className:"w-3 h-3",style:{color:M.text.secondary}}),a.jsxs("span",{className:"text-xs",style:{color:M.text.light},children:[be," knowledge ",be===1?"entry":"entries",pe>0&&a.jsxs("span",{className:"text-blue-600 ml-1",children:["(",pe," from canvas)"]})]})]}):a.jsxs(a.Fragment,{children:[a.jsx(ts,{className:"w-3 h-3 text-orange-500"}),a.jsx("span",{className:"text-xs text-orange-500",children:"No knowledge linked - will prompt to add"})]})})()}),T.length>0&&a.jsx("div",{className:"flex-grow max-h-16 overflow-y-auto",children:a.jsx("div",{className:"flex flex-wrap gap-1",children:x.filter(pe=>T.includes(pe.id)).map(pe=>a.jsx(_e,{className:"text-xs px-1 py-0 h-4 flex-shrink-0",style:{backgroundColor:M.background.secondary,color:M.text.secondary,borderColor:M.border.secondary},children:pe.title.length>10?`${pe.title.substring(0,10)}...`:pe.title},pe.id))})})]}),a.jsxs("div",{className:"flex flex-col gap-2 flex-shrink-0",children:[a.jsxs(fe,{size:"sm",onClick:pe=>{pe.stopPropagation(),ne()},className:"w-full h-8 text-xs",style:{backgroundColor:M.background.primary,color:M.text.primary,borderColor:M.border.primary},onMouseEnter:pe=>{pe.currentTarget.style.backgroundColor=M.background.hover,pe.currentTarget.style.color=M.text.hover},onMouseLeave:pe=>{pe.currentTarget.style.backgroundColor=M.background.primary,pe.currentTarget.style.color=M.text.primary},disabled:!_||!N||!y||U,children:[a.jsx(Kd,{className:"w-3 h-3 mr-1"}),U?"Generating...":"Generate Prompt"]}),a.jsxs("div",{className:"flex items-center justify-between",children:[!1,a.jsx("div",{className:"ml-auto",children:a.jsx(Jv,{nodeId:n||"",nodeType:"tool",nodeData:e,position:{x:0,y:0}})})]})]})]})}),n&&a.jsxs(a.Fragment,{children:[a.jsx(Ds,{id:`${n}-source-1`,type:"source",initialPosition:Q["source-1"]||"right",onPositionChange:pe=>D("source-1",pe),nodeId:n}),a.jsx(Ds,{id:`${n}-source-2`,type:"source",initialPosition:Q["source-2"]||"bottom",onPositionChange:pe=>D("source-2",pe),nodeId:n})]})]}),a.jsx(bG,{isVisible:U,currentStep:$,totalSteps:J,onComplete:ce}),a.jsx(tY,{isOpen:Y,onClose:()=>X(!1),onKnowledgeSelected:ae,toolName:S.name,toolId:n}),q&&W&&a.jsx(b4e,{template:W,onGenerate:Ae,onClose:()=>K(!1)})]})}),C4e=({onDestinationSelect:e,onCancel:t,defaultContext:n,isLoading:r=!1})=>{const[s,i]=w.useState((n==null?void 0:n.destination)||"AI Provider"),[o,c]=w.useState((n==null?void 0:n.aiProvider)||"Claude"),[l,d]=w.useState((n==null?void 0:n.userIntent)||""),u=[{type:"AI Provider",icon:a.jsx(Yu,{className:"w-5 h-5"}),color:"bg-blue-500",description:"Structured AI analysis and insights",features:["Analytical output","Next steps","Validation notes","Structured sections"],requiresIntegration:!1},{type:"Miro",icon:a.jsx(m7,{className:"w-5 h-5"}),color:"bg-yellow-500",description:"Visual collaboration board with sticky notes",features:["Sticky notes (12 words)","Cluster mapping","Grid layout","Team collaboration"],requiresIntegration:!0},{type:"FigJam",icon:a.jsx(zue,{className:"w-5 h-5"}),color:"bg-purple-500",description:"Workshop-ready brainstorming session",features:["Facilitation script","Divergent thinking","Affinity mapping","Workshop guidance"],requiresIntegration:!0},{type:"Figma",icon:a.jsx(w7,{className:"w-5 h-5"}),color:"bg-green-500",description:"UI-focused design specifications",features:["Component blocks","Sizing specs","Copy guidance","Layout recommendations"],requiresIntegration:!0}],h=["ChatGPT","Claude","Gemini","DeepSeek","Other"],A=()=>{const m={destination:s,aiProvider:s==="AI Provider"?o:void 0,userIntent:l.trim()||`Generate output optimized for ${s}`,originalPrompt:(n==null?void 0:n.originalPrompt)||"",variables:n==null?void 0:n.variables,metadata:n==null?void 0:n.metadata};e(m)},f=u.find(m=>m.type===s);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx(Mr,{className:"w-8 h-8 text-primary mx-auto"}),a.jsx("h2",{className:"text-2xl font-bold",children:"Choose Your Destination"}),a.jsx("p",{className:"text-muted-foreground",children:"Select where you'll use this prompt to get tailored, optimized output"})]}),a.jsx("div",{className:"grid grid-cols-1 gap-3",children:u.map(m=>a.jsxs(De,{className:`cursor-pointer transition-all duration-200 hover:shadow-lg ${s===m.type?"ring-2 ring-primary border-primary shadow-md":"hover:border-primary/50"}`,onClick:()=>i(m.type),children:[a.jsx(dt,{className:"pb-2",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-8 h-8 rounded-full ${m.color} flex items-center justify-center text-white flex-shrink-0`,children:m.icon}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx(ft,{className:"text-sm font-medium",children:m.type}),a.jsx(Kt,{className:"text-xs text-muted-foreground",children:m.description})]})]}),m.requiresIntegration&&a.jsx(_e,{variant:"secondary",className:"text-xs flex-shrink-0",children:"Integration"})]})}),a.jsx(et,{className:"pt-0 pb-3",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Key Features:"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[m.features.slice(0,3).map((g,b)=>a.jsx(_e,{variant:"outline",className:"text-xs",children:g},b)),m.features.length>3&&a.jsxs(_e,{variant:"outline",className:"text-xs text-muted-foreground",children:["+",m.features.length-3," more"]})]})]})})]},m.type))}),s==="AI Provider"&&a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(Yu,{className:"w-5 h-5"}),"AI Provider Configuration"]}),a.jsx(Kt,{children:"Choose your preferred AI provider for optimal prompt formatting"})]}),a.jsx(et,{children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{children:"AI Provider"}),a.jsxs(Vn,{value:o,onValueChange:m=>c(m),children:[a.jsx(Qn,{children:a.jsx(qn,{})}),a.jsx(Hn,{children:h.map(m=>a.jsx(qe,{value:m,children:m},m))})]})]})})]}),(f==null?void 0:f.requiresIntegration)&&a.jsxs(za,{children:[a.jsx(BC,{className:"h-4 w-4"}),a.jsxs(Va,{children:[a.jsx("strong",{children:s})," integration is coming soon. For now, you'll receive optimized output formatted for manual import."]})]}),a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(Mr,{className:"w-5 h-5"}),"What Are You Trying to Achieve?"]}),a.jsx(Kt,{children:"Describe your specific goal to get the most relevant tailored output"})]}),a.jsx(et,{children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{children:"Your Intent (Optional)"}),a.jsx(Qr,{value:l,onChange:m=>d(m.target.value),placeholder:'e.g., "Create user research insights for our mobile app redesign" or "Generate workshop activities for stakeholder alignment"',rows:3,className:"border-input"}),a.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[a.jsx("span",{children:"Be specific about your desired outcome"}),a.jsxs("span",{children:[l.length,"/500"]})]})]})})]}),f&&a.jsxs(De,{className:"border-primary/20 bg-primary/5",children:[a.jsx(dt,{children:a.jsxs(ft,{className:"flex items-center gap-2 text-primary",children:[a.jsx(Cc,{className:"w-5 h-5"}),"Ready to Tailor for ",s]})}),a.jsx(et,{children:a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:Kye(s)}),a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Ep,{className:"w-4 h-4 text-primary"}),a.jsxs("span",{children:["Your prompt will be optimized for ",s," workflow and output format"]})]})]})})]}),a.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[a.jsx(fe,{variant:"outline",onClick:t,disabled:r,children:"Cancel"}),a.jsx(fe,{onClick:A,disabled:r,className:"flex items-center gap-2",children:r?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Tailoring..."]}):a.jsxs(a.Fragment,{children:["Tailor Prompt",a.jsx(_r,{className:"w-4 h-4"})]})})]})]})},kX=cf((e,t)=>({deliveries:[],payloads:[],connections:[],ephemeralImports:[],currentDelivery:null,isDelivering:!1,isGeneratingPayload:!1,isConnecting:!1,deliveryProgress:0,initiateDelivery:async(n,r)=>{e({isDelivering:!0,deliveryProgress:0});try{const s=await t().validateTarget(r);if(!s.isValid)throw new Error(`Invalid target: ${s.errors.join(", ")}`);const i=t().getActiveConnection(r.destination);if(!i&&r.destination==="miro")throw new Error(`No active ${r.destination} connection. Please connect first.`);e({deliveryProgress:20});const o=await t().generatePayload(n,r.destination);e({deliveryProgress:60});const c={id:`delivery-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,status:"processing",destination:r.destination,targetId:r.targetId,payloadId:o.id,deliveredItems:0,totalItems:o.items.length,createdAt:new Date,updatedAt:new Date};if(e(l=>({deliveries:[...l.deliveries,c],currentDelivery:c,deliveryProgress:80})),r.destination==="miro")await t().deliverToMiro(c,o,i);else{const l=await t().createEphemeralImport(o.id,r.destination),d={...c,status:"success",importUrl:l.signedUrl,expiresAt:l.expiresAt,deliveredItems:o.items.length,updatedAt:new Date};return e(u=>({deliveries:u.deliveries.map(h=>h.id===c.id?d:h),currentDelivery:d,deliveryProgress:100,isDelivering:!1})),d}return e({deliveryProgress:100,isDelivering:!1}),c}catch(s){console.error("Delivery initiation failed:",s);const i={id:`failed-delivery-${Date.now()}`,status:"error",destination:r.destination,targetId:r.targetId,payloadId:"",deliveredItems:0,totalItems:0,error:s instanceof Error?s.message:"Unknown error",createdAt:new Date,updatedAt:new Date};throw e(o=>({deliveries:[...o.deliveries,i],currentDelivery:i,isDelivering:!1,deliveryProgress:0})),s}},deliverToMiro:async(n,r,s)=>{try{for(let c=0;c<r.items.length;c++){await new Promise(d=>setTimeout(d,100));const l=Math.round((c+1)/r.items.length*20)+80;e(d=>({deliveryProgress:l,deliveries:d.deliveries.map(u=>u.id===n.id?{...u,deliveredItems:c+1,updatedAt:new Date}:u)}))}const i=`https://miro.com/app/live-embed/${n.targetId}`,o={...n,status:"success",deliveredItems:r.items.length,embedUrl:i,updatedAt:new Date};e(c=>({deliveries:c.deliveries.map(l=>l.id===n.id?o:l),currentDelivery:o}))}catch(i){console.error("Miro delivery failed:",i);const o={...n,status:"error",error:i instanceof Error?i.message:"Miro delivery failed",updatedAt:new Date};throw e(c=>({deliveries:c.deliveries.map(l=>l.id===n.id?o:l),currentDelivery:o})),i}},cancelDelivery:async n=>{e(r=>({deliveries:r.deliveries.map(s=>s.id===n?{...s,status:"cancelled",updatedAt:new Date}:s)}))},retryDelivery:async n=>{const r=t().deliveries.find(s=>s.id===n);if(!r)throw new Error("Delivery not found");return e(s=>({deliveries:s.deliveries.map(i=>i.id===n?{...i,status:"processing",error:void 0,updatedAt:new Date}:i)})),r},getDeliveryStatus:n=>t().deliveries.find(r=>r.id===n)||null,loadProjectDeliveries:async n=>{try{e({deliveries:[]})}catch(r){console.error("Error loading project deliveries:",r)}},addDelivery:n=>{e(r=>({deliveries:[n,...r.deliveries],currentDelivery:n})),console.log(" Added delivery to store:",{id:n.id,destination:n.destination,status:n.status,deliveredItems:n.deliveredItems,hasImportUrl:!!n.importUrl,hasEmbedUrl:!!n.embedUrl})},clearDeliveries:()=>{e({deliveries:[],currentDelivery:null})},generatePayload:async(n,r,s)=>{e({isGeneratingPayload:!0});try{const i=Array.from({length:12},(c,l)=>({id:`item-${l+1}`,type:"sticky",text:`Generated item ${l+1} for ${r}`,x:l%4*200+100,y:Math.floor(l/4)*150+100,width:180,height:120,style:{backgroundColor:["#FFE066","#FF6B66","#66D9FF","#66FF66"][l%4],fontSize:14}})),o={id:`payload-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,destination:r,targetId:"mock-target-id",sourcePrompt:`Mock prompt for ${r}`,items:i,layoutHints:{columns:4,spacing:20,maxItems:50,arrangement:"grid"},summary:`Generated ${i.length} items for ${r} delivery`,itemCount:i.length,createdAt:new Date};return e(c=>({payloads:[...c.payloads,o],isGeneratingPayload:!1})),o}catch(i){throw e({isGeneratingPayload:!1}),i}},validatePayload:async n=>{const r=t().payloads.find(i=>i.id===n);if(!r)return{isValid:!1,errors:["Payload not found"]};const s=[];return(!r.items||r.items.length===0)&&s.push("Payload contains no items"),r.items.length>100&&s.push("Payload exceeds maximum items (100)"),r.items.forEach((i,o)=>{i.id||s.push(`Item ${o} missing ID`),i.type||s.push(`Item ${o} missing type`),typeof i.x!="number"&&s.push(`Item ${o} missing x position`),typeof i.y!="number"&&s.push(`Item ${o} missing y position`)}),{isValid:s.length===0,errors:s}},optimizePayload:async(n,r)=>{const s=t().payloads.find(o=>o.id===n);if(!s)throw new Error("Payload not found");const i={...s};return r.maxItems&&s.items.length>r.maxItems&&(i.items=s.items.slice(0,r.maxItems),i.itemCount=r.maxItems),e(o=>({payloads:o.payloads.map(c=>c.id===n?i:c)})),i},initiateOAuth:async n=>{e({isConnecting:!0});const r="",o={miro:r?`https://miro.com/oauth/authorize?response_type=code&client_id=${r}&redirect_uri=http://localhost:8080/oauth/callback&scope=boards:read boards:write`:"",figjam:"#",figma:"#"}[n];if(o==="#"||o==="")throw e({isConnecting:!1}),n==="miro"&&!r?new Error("Miro OAuth not configured. Please use the simple access token connection method or set up OAuth credentials."):new Error(`OAuth not required for ${n}`);return e({isConnecting:!1}),o},completeOAuth:async(n,r)=>{e({isConnecting:!0});try{const s={id:`conn-${Date.now()}`,destination:n,userId:"current-user",accessToken:"encrypted-access-token",refreshToken:"encrypted-refresh-token",scopes:["boards:read","boards:write"],isActive:!0,createdAt:new Date,updatedAt:new Date};return e(i=>({connections:[...i.connections.filter(o=>o.destination!==n),s],isConnecting:!1})),s}catch(s){throw e({isConnecting:!1}),s}},refreshConnection:async n=>{const r=t().connections.find(i=>i.id===n);if(!r)throw new Error("Connection not found");const s={...r,updatedAt:new Date};return e(i=>({connections:i.connections.map(o=>o.id===n?s:o)})),s},revokeConnection:async n=>{e(r=>({connections:r.connections.filter(s=>s.id!==n)}))},getActiveConnection:n=>t().connections.find(r=>r.destination===n&&r.isActive)||null,loadConnections:async()=>{try{e({connections:[]})}catch(n){console.error("Error loading connections:",n)}},createEphemeralImport:async(n,r)=>{if(!t().payloads.find(o=>o.id===n))throw new Error("Payload not found");const i={id:`import-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,payloadId:n,signedUrl:`https://api.framepromptly.com/import/${n}.json?sig=signed-token-here`,expiresAt:new Date(Date.now()+15*60*1e3),usageCount:0,maxUsage:5,destination:r,createdAt:new Date};return e(o=>({ephemeralImports:[...o.ephemeralImports,i]})),i},validateEphemeralImport:async n=>{const r=t().ephemeralImports.find(i=>i.id===n);return r?r.expiresAt<new Date?{isValid:!1}:r.usageCount>=r.maxUsage?{isValid:!1}:{isValid:!0,payload:t().payloads.find(i=>i.id===r.payloadId)}:{isValid:!1}},trackImportUsage:async n=>{e(r=>({ephemeralImports:r.ephemeralImports.map(s=>s.id===n?{...s,usageCount:s.usageCount+1}:s)}))},validateTarget:async n=>{const r=[];return n.destination||r.push("Destination is required"),n.targetId||r.push("Target ID is required"),n.destination==="miro"&&(/^[a-zA-Z0-9_-]+$/.test(n.targetId)||r.push("Invalid Miro board ID format")),{isValid:r.length===0,errors:r}},loadTargetOptions:async n=>t().getActiveConnection(n)?[{id:"board-1",name:"Project Board",type:"board"},{id:"board-2",name:"User Research Board",type:"board"}]:[],updateDeliveryProgress:(n,r,s)=>{e(i=>({deliveries:i.deliveries.map(o=>o.id===n?{...o,...s&&{status:s},updatedAt:new Date}:o),deliveryProgress:r}))},subscribeToDeliveryUpdates:(n,r)=>()=>{}})),Ij=class Ij{constructor(){Je(this,"encryptionKey");Je(this,"configs",{miro:{clientId:"",clientSecret:"",redirectUri:"http://localhost:8080/api/oauth/miro/callback",scopes:["boards:read","boards:write"],authUrl:"https://miro.com/oauth/authorize",tokenUrl:"https://api.miro.com/v1/oauth/token"},figjam:{clientId:"",clientSecret:"",redirectUri:"",scopes:[],authUrl:"",tokenUrl:""},figma:{clientId:"",clientSecret:"",redirectUri:"",scopes:[],authUrl:"",tokenUrl:""}});this.encryptionKey="development-key-change-in-production"}static getInstance(){return this.instance||(this.instance=new Ij),this.instance}generateAuthUrl(t,n){const r=this.configs[t];if(!r.authUrl)throw new Error(`OAuth not supported for ${t}`);const s=new URLSearchParams({response_type:"code",client_id:r.clientId,redirect_uri:r.redirectUri,scope:r.scopes.join(" "),state:n||this.generateState()});return`${r.authUrl}?${s.toString()}`}async exchangeCodeForTokens(t,n,r){const s=this.configs[t];if(!s.tokenUrl)throw new Error(`Token exchange not supported for ${t}`);try{const i=await fetch(s.tokenUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:new URLSearchParams({grant_type:"authorization_code",client_id:s.clientId,client_secret:s.clientSecret,code:n,redirect_uri:s.redirectUri})});if(!i.ok){const l=await i.text();throw new Error(`Token exchange failed: ${i.status} ${l}`)}const o=await i.json();return{accessToken:o.access_token,refreshToken:o.refresh_token,tokenType:o.token_type||"Bearer",expiresAt:o.expires_in?new Date(Date.now()+o.expires_in*1e3):void 0}}catch(i){throw console.error("Token exchange failed:",i),new Error(`Failed to exchange code for tokens: ${i instanceof Error?i.message:"Unknown error"}`)}}async getUserInfo(t,n){return await{miro:()=>this.getMiroUserInfo(n),figjam:()=>Promise.reject(new Error("FigJam uses plugin-based access")),figma:()=>Promise.reject(new Error("Figma uses plugin-based access"))}[t]()}async storeConnection(t,n,r){var s;try{const{data:{user:i}}=await rt.auth.getUser();if(!i)throw new Error("User not authenticated");const o=await this.encryptToken(n.accessToken),c=n.refreshToken?await this.encryptToken(n.refreshToken):void 0,l={id:`${t}-${Date.now()}`,destination:t,userId:i.id,accessToken:o,refreshToken:c,scopes:this.configs[t].scopes,expiresAt:n.expiresAt,metadata:{username:r.name,workspaces:r.workspaces},isActive:!0,createdAt:new Date,updatedAt:new Date},{error:d}=await rt.from("oauth_connections").upsert({id:l.id,user_id:l.userId,destination:l.destination,access_token_encrypted:l.accessToken,refresh_token_encrypted:l.refreshToken,scopes:l.scopes,expires_at:(s=l.expiresAt)==null?void 0:s.toISOString(),metadata:l.metadata,is_active:l.isActive,created_at:l.createdAt.toISOString(),updated_at:l.updatedAt.toISOString()});if(d)throw d;return l}catch(i){throw console.error("Failed to store OAuth connection:",i),new Error(`Connection storage failed: ${i instanceof Error?i.message:"Unknown error"}`)}}async getConnection(t){try{const{data:{user:n}}=await rt.auth.getUser();if(!n)return null;const{data:r,error:s}=await rt.from("oauth_connections").select("*").eq("user_id",n.id).eq("destination",t).eq("is_active",!0).single();if(s||!r)return null;const i=await this.decryptToken(r.access_token_encrypted),o=r.refresh_token_encrypted?await this.decryptToken(r.refresh_token_encrypted):void 0;return{id:r.id,destination:r.destination,userId:r.user_id,accessToken:i,refreshToken:o,scopes:r.scopes||[],expiresAt:r.expires_at?new Date(r.expires_at):void 0,metadata:r.metadata,isActive:r.is_active,createdAt:new Date(r.created_at),updatedAt:new Date(r.updated_at)}}catch(n){return console.error("Failed to retrieve OAuth connection:",n),null}}async refreshToken(t){var r;const n=this.configs[t.destination];if(!n.tokenUrl||!t.refreshToken)throw new Error("Token refresh not supported");try{const s=await fetch(n.tokenUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:new URLSearchParams({grant_type:"refresh_token",client_id:n.clientId,client_secret:n.clientSecret,refresh_token:t.refreshToken})});if(!s.ok)throw new Error(`Token refresh failed: ${s.status}`);const i=await s.json(),o=await this.encryptToken(i.access_token),c=i.refresh_token?await this.encryptToken(i.refresh_token):t.refreshToken,l={...t,accessToken:i.access_token,refreshToken:i.refresh_token||t.refreshToken,expiresAt:i.expires_in?new Date(Date.now()+i.expires_in*1e3):void 0,updatedAt:new Date};return await rt.from("oauth_connections").update({access_token_encrypted:o,refresh_token_encrypted:c,expires_at:(r=l.expiresAt)==null?void 0:r.toISOString(),updated_at:l.updatedAt.toISOString()}).eq("id",t.id),l}catch(s){throw console.error("Token refresh failed:",s),new Error(`Failed to refresh token: ${s instanceof Error?s.message:"Unknown error"}`)}}async revokeConnection(t){try{const{error:n}=await rt.from("oauth_connections").update({is_active:!1}).eq("id",t);if(n)throw n}catch(n){throw console.error("Failed to revoke connection:",n),new Error(`Connection revocation failed: ${n instanceof Error?n.message:"Unknown error"}`)}}isTokenExpired(t){if(!t.expiresAt)return!1;const n=5*60*1e3;return t.expiresAt.getTime()-Date.now()<n}async getValidAccessToken(t){let n=await this.getConnection(t);if(!n)throw new Error(`No ${t} connection found`);return this.isTokenExpired(n)&&(n=await this.refreshToken(n)),n.accessToken}generateState(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}async getMiroUserInfo(t){var n,r,s;try{const i=await fetch("https://api.miro.com/v2/oauth-token",{headers:{Authorization:`Bearer ${t}`}});if(!i.ok)throw new Error(`Failed to get user info: ${i.status}`);const o=await i.json();return{id:((n=o.user)==null?void 0:n.id)||"",name:((r=o.user)==null?void 0:r.name)||"",email:((s=o.user)==null?void 0:s.email)||"",workspaces:o.team?[{id:o.team.id,name:o.team.name}]:[]}}catch(i){throw console.error("Failed to get Miro user info:",i),i}}async encryptToken(t){const n=new TextEncoder,r=n.encode(t),s=n.encode(this.encryptionKey.padEnd(32,"0").slice(0,32)),i=new Uint8Array(r.length);for(let o=0;o<r.length;o++)i[o]=r[o]^s[o%s.length];return btoa(String.fromCharCode(...i))}async decryptToken(t){const n=new TextEncoder,r=new TextDecoder,s=new Uint8Array(atob(t).split("").map(c=>c.charCodeAt(0))),i=n.encode(this.encryptionKey.padEnd(32,"0").slice(0,32)),o=new Uint8Array(s.length);for(let c=0;c<s.length;c++)o[c]=s[c]^i[c%i.length];return r.decode(o)}validateConfig(t){const n=this.configs[t],r=[];return t==="miro"&&(n.clientId||r.push("Miro client ID not configured"),n.clientSecret||r.push("Miro client secret not configured"),n.redirectUri||r.push("Miro redirect URI not configured")),{isValid:r.length===0,errors:r}}async testConnection(t){try{const n=await this.getValidAccessToken(t);return{isValid:!0,userInfo:await this.getUserInfo(t,n)}}catch(n){return{isValid:!1,error:n instanceof Error?n.message:"Unknown error"}}}};Je(Ij,"instance");let rI=Ij;const H2=rI.getInstance();class yF{constructor(t){Je(this,"baseUrl","https://api.miro.com/v2");Je(this,"rateLimitInfo",{remaining:100,reset:0,limit:100});Je(this,"accessToken");this.accessToken=t}async getBoard(t){await this.checkRateLimit();const n=this.sanitizeBoardId(t);try{return await this.makeRequest(`/boards/${n}`,"GET")}catch(r){throw this.handleApiError(r,`Failed to get board ${n}`)}}async getBoards(t=20){await this.checkRateLimit();try{const n=await this.makeRequest(`/boards?limit=${t}`,"GET");return{data:n.data||[],total:n.total||0}}catch(n){throw this.handleApiError(n,"Failed to get boards")}}async createStickyNote(t,n){var c;await this.checkRateLimit();const r=this.sanitizeBoardId(t),s=this.validateAndSanitizeDeliveryItem(n),i=(s.text||"").trim();if(!i)throw new Error("Sticky note content cannot be empty");const o={data:{content:i,shape:"square"},style:{fillColor:((c=s.style)==null?void 0:c.backgroundColor)||"#fff9b1",textAlign:"center",textAlignVertical:"middle"},position:{x:Number(s.x)||0,y:Number(s.y)||0,origin:"center"},geometry:{width:Number(s.width)||180,height:Number(s.height)||120}};console.log(" Creating sticky note with payload:",{boardId:r,content:i.substring(0,30)+"...",position:o.position,geometry:o.geometry,style:o.style});try{return await this.makeRequest(`/boards/${r}/sticky_notes`,"POST",o)}catch(l){throw console.error(" Sticky note creation failed:",{boardId:r,content:i.substring(0,30)+"...",error:l.message||l,payload:o}),this.handleApiError(l,`Failed to create sticky note: ${i.substring(0,30)}...`)}}async createText(t,n){var c,l;await this.checkRateLimit();const r=this.sanitizeBoardId(t),s=this.validateAndSanitizeDeliveryItem(n),i=(s.text||"").trim();if(!i)throw new Error("Text content cannot be empty");const o={data:{content:i},style:{color:((c=s.style)==null?void 0:c.color)||"#1a1a1a",fillColor:"transparent",fontFamily:"arial",fontSize:Math.max(8,Math.min(72,((l=s.style)==null?void 0:l.fontSize)||14)),textAlign:"left"},position:{x:Number(s.x)||0,y:Number(s.y)||0,origin:"center"},geometry:{width:Number(s.width)||200,height:Number(s.height)||50}};console.log(" Creating text item with payload:",{boardId:r,content:i.substring(0,30)+"...",position:o.position,geometry:o.geometry,fontSize:o.style.fontSize});try{return await this.makeRequest(`/boards/${r}/texts`,"POST",o)}catch(d){throw console.error(" Text creation failed:",{boardId:r,content:i.substring(0,30)+"...",error:d.message||d,payload:o}),this.handleApiError(d,`Failed to create text: ${i.substring(0,30)}...`)}}async createShape(t,n){var o,c;await this.checkRateLimit();const r=this.sanitizeBoardId(t),s=this.validateAndSanitizeDeliveryItem(n),i={data:{content:s.text,shape:"rectangle"},style:{fillColor:((o=s.style)==null?void 0:o.backgroundColor)||"#f0f0f0",borderColor:"#333333",borderWidth:2,textAlign:"center",textAlignVertical:"middle"},position:{x:s.x,y:s.y,origin:"center"},geometry:{width:s.width,height:s.height}};try{return await this.makeRequest(`/boards/${r}/shapes`,"POST",i)}catch(l){throw this.handleApiError(l,`Failed to create shape: ${(c=n.text)==null?void 0:c.substring(0,30)}...`)}}async createItems(t,n){const r=[],s=[];for(const i of n)try{let o;switch(i.type){case"sticky":o=await this.createStickyNote(t,i);break;case"text":o=await this.createText(t,i);break;case"shape":o=await this.createShape(t,i);break;default:o=await this.createStickyNote(t,i)}r.push(o),await this.delay(100)}catch(o){const c=o instanceof Error?o.message:"Unknown error";if(s.push({item:i,error:c}),c.includes("401")||c.includes("403"))throw new Error("Authentication failed - stopping batch creation")}return{success:r,failed:s,summary:{total:n.length,successful:r.length,failed:s.length}}}getBoardEmbedUrl(t,n){return`https://miro.com/app/board/${this.sanitizeBoardId(t)}/`}getBoardViewUrl(t){return`https://miro.com/app/board/${this.sanitizeBoardId(t)}/`}async validateBoardAccess(t){var c,l;const n=[];let r=!1,s=!1,i="";const o=this.sanitizeBoardId(t);try{const d=await this.getBoard(o);r=!0,i=d.name,s=((l=(c=d.policy)==null?void 0:c.permissionsPolicy)==null?void 0:l.collaborationToolsStartAccess)!=="board_owners_and_admins"}catch(d){const u=d;u.status===404?n.push(`Miro board "${o}" not found. Please check the board ID and ensure you have access to this board.`):u.status===403?n.push(`You don't have permission to edit board "${o}". Please ask the board owner to grant you edit access.`):u.status===401?n.push("Your Miro access token has expired. Please reconnect your Miro account."):n.push(`Unable to access Miro board: ${u.message||"Unknown error"}`)}return{canRead:r,canWrite:s,boardName:i,errors:n}}async testConnection(){try{const t=await this.makeRequest("/boards?limit=1","GET");return{isValid:!0,userInfo:{id:"miro-user",name:"Miro User",email:"Connection successful!"}}}catch(t){let r=`Connection test failed: ${t.message}`;return r.includes("Unauthorized")||r.includes("401")?r="Invalid access token. Please check your Miro access token.":r.includes("YOUR_CLIENT_ID")&&(r="Invalid access token format. Please provide a valid Miro access token."),{isValid:!1,error:r}}}async makeRequest(t,n,r){const s=`${this.baseUrl}${t}`,i={method:n,headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json",Accept:"application/json"}};r&&(n==="POST"||n==="PUT"||n==="PATCH")&&(i.body=JSON.stringify(r));const o=await fetch(s,i);if(this.updateRateLimitInfo(o),!o.ok){const c=await o.json().catch(()=>({}));throw{status:o.status,code:c.code||"API_ERROR",message:c.message||o.statusText,context:c}}return await o.json()}updateRateLimitInfo(t){const n=t.headers.get("X-RateLimit-Remaining"),r=t.headers.get("X-RateLimit-Reset"),s=t.headers.get("X-RateLimit-Limit");n&&(this.rateLimitInfo.remaining=parseInt(n)),r&&(this.rateLimitInfo.reset=parseInt(r)),s&&(this.rateLimitInfo.limit=parseInt(s))}async checkRateLimit(){if(this.rateLimitInfo.remaining<=5){const t=Date.now()/1e3,n=Math.max(0,this.rateLimitInfo.reset-t);n>0&&(console.warn(`Rate limit approaching. Waiting ${n}s...`),await this.delay(n*1e3))}}async delay(t){return new Promise(n=>setTimeout(n,t))}handleApiError(t,n){return t.status&&t.code?{...t,message:`${n}: ${t.message}`}:{status:500,code:"UNKNOWN_ERROR",message:`${n}: ${t instanceof Error?t.message:"Unknown error"}`,context:t}}getRateLimitStatus(){return{...this.rateLimitInfo}}updateAccessToken(t){this.accessToken=t}validateAndSanitizeDeliveryItem(t){let n=t.text||"";typeof n!="string"&&(n=String(n)),n=n.substring(0,5e3);let r=t.x||0,s=t.y||0;r=isNaN(Number(r))?0:Number(r),s=isNaN(Number(s))?0:Number(s),r=Math.max(-1e5,Math.min(1e5,r)),s=Math.max(-1e5,Math.min(1e5,s));let i=t.width||180,o=t.height||120;i=isNaN(Number(i))?180:Number(i),o=isNaN(Number(o))?120:Number(o),i=Math.max(10,Math.min(2e3,i)),o=Math.max(10,Math.min(2e3,o));const c=t.style?{...t.style,backgroundColor:this.validateHexColor(t.style.backgroundColor),color:this.validateHexColor(t.style.color),fontSize:t.style.fontSize?Math.max(8,Math.min(72,t.style.fontSize)):void 0}:void 0;return{...t,text:n,x:r,y:s,width:i,height:o,style:c}}validateHexColor(t){if(!t)return;if(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(t))return t;t.startsWith("rgb")}sanitizeBoardId(t){if(!t||typeof t!="string")throw new Error("Board ID is required and must be a string");let n=t.trim().replace(/\/+/g,"");if(n.includes("miro.com/app/board/")){const r=n.match(/miro\.com\/app\/board\/([^\/]+)/);r&&r[1]&&(n=r[1])}if(!n||n.length<3)throw new Error("Invalid board ID format");return console.log(` Sanitized board ID: "${t}"  "${n}"`),n}}const Pj=class Pj{constructor(){Je(this,"activeDeliveries",new Map)}static getInstance(){return this.instance||(this.instance=new Pj),this.instance}async executeDelivery(t,n,r={},s){const i=`delivery-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,o=new AbortController;this.activeDeliveries.set(i,o);const c={maxRetries:3,retryDelay:1e3,optimizePayload:!0,validateBeforeDelivery:!0,...r};try{return await this.executePipelineStages(i,t,n,c,s,o.signal)}catch(l){throw this.updateProgress(s,{stage:"error",progress:0,message:l instanceof Error?l.message:"Delivery failed",details:{error:l,deliveryId:i}}),l}finally{this.activeDeliveries.delete(i)}}cancelDelivery(t){const n=this.activeDeliveries.get(t);return n?(n.abort(),this.activeDeliveries.delete(t),!0):!1}getActiveDeliveries(){return Array.from(this.activeDeliveries.keys())}async executePipelineStages(t,n,r,s,i,o){var A,f,m;this.updateProgress(i,{stage:"initializing",progress:5,message:"Initializing delivery pipeline..."}),this.checkAborted(o);const{prompt:c,destinationContext:l}=await this.initializeDelivery(n,r);this.updateProgress(i,{stage:"tailoring",progress:15,message:`Tailoring content for ${r.destination}...`});const d=await this.executeWithRetry(()=>this.tailorForDestination(l),s.maxRetries,s.retryDelay,o);this.updateProgress(i,{stage:"generating",progress:35,message:"Generating delivery payload..."}),console.log(" About to generate payload from tailored output:",{hasOutput:!!d,outputType:d==null?void 0:d.type,targetId:r.targetId,promptContent:((A=c.content)==null?void 0:A.substring(0,100))+"..."});let u=await this.executeWithRetry(()=>Ap.generateDeliveryPayload(d,r.targetId,c.content),s.maxRetries,s.retryDelay,o);if(console.log(" Generated payload:",{id:u.id,destination:u.destination,itemsCount:((f=u.items)==null?void 0:f.length)||0,hasItems:!!(u.items&&u.items.length>0),summary:u.summary,firstFewItems:(m=u.items)==null?void 0:m.slice(0,2)}),s.optimizePayload&&(this.updateProgress(i,{stage:"validating",progress:50,message:"Optimizing payload for destination..."}),u=await Ap.optimizePayloadForDestination(u)),s.validateBeforeDelivery){const g=await Ap.validateDeliveryPayload(u);if(!g.isValid)throw new Error(`Payload validation failed: ${g.errors.join(", ")}`)}this.updateProgress(i,{stage:"delivering",progress:70,message:`Delivering to ${r.destination}...`});const h=await this.executeWithRetry(()=>this.executeDestinationDelivery(t,r,u,i),s.maxRetries,s.retryDelay*2,o);return this.updateProgress(i,{stage:"completing",progress:95,message:"Completing delivery..."}),await this.storeDeliveryResult(h),this.updateProgress(i,{stage:"completing",progress:100,message:"Delivery completed successfully!"}),h}async initializeDelivery(t,n){const r=await this.getPrompt(t);if(!r)throw new Error(`Prompt ${t} not found`);const s=await this.validateTarget(n);if(!s.isValid)throw new Error(`Invalid target: ${s.errors.join(", ")}`);return{prompt:r,destinationContext:{prompt:r,target:n}}}async tailorForDestination(t){var s,i,o,c,l,d,u,h,A,f,m,g;const{prompt:n,target:r}=t;if(n.output&&n.output.content&&n.output.content.items&&Array.isArray(n.output.content.items)&&n.output.content.items.length>0)return console.log(" Using existing prompt output with populated content for delivery"),{type:r.destination,content:n.output.content,metadata:n.output.metadata||{},summary:n.output.summary||"Generated content for delivery"};console.log(" Generating AI content for destination-specific delivery");try{const{data:b,error:y}=await rt.functions.invoke("generate-destination-content",{body:{prompt:n.content,destination:this.mapDestinationToDDT(r.destination),context:{framework:((i=(s=n.context)==null?void 0:s.framework)==null?void 0:i.name)||"Unknown",stage:((c=(o=n.context)==null?void 0:o.stage)==null?void 0:c.name)||"Unknown",tool:((d=(l=n.context)==null?void 0:l.tool)==null?void 0:d.name)||"Unknown"},variables:n.variables||{}}});if(y)throw console.error("AI content generation function failed:",y),new Error(`Function call failed: ${y.message}`);if(!(b!=null&&b.success))throw console.error("AI content generation returned error:",b==null?void 0:b.error),new Error(`AI generation failed: ${(b==null?void 0:b.error)||"Unknown error"}`);return console.log(" AI-generated content received:",{destination:b.destination,itemCount:((u=b.metadata)==null?void 0:u.itemCount)||0,model:(h=b.metadata)==null?void 0:h.model,contentKeys:Object.keys(b.content||{})}),{type:r.destination.toLowerCase(),destination:this.mapDestinationToDDT(r.destination),content:b.content,metadata:{generatedAt:(A=b.metadata)==null?void 0:A.generatedAt,model:(f=b.metadata)==null?void 0:f.model,itemCount:(m=b.metadata)==null?void 0:m.itemCount},summary:`AI-generated ${r.destination} content with ${((g=b.metadata)==null?void 0:g.itemCount)||0} items`}}catch(b){console.warn(" AI content generation failed, using fallback structured content:",b.message);const y=this.generateFallbackContent(r.destination,n);return console.log(" Generated fallback content:",{destination:r.destination,itemCount:this.getItemCount(y),fallback:!0}),{type:r.destination.toLowerCase(),destination:this.mapDestinationToDDT(r.destination),content:y,metadata:{generatedAt:new Date().toISOString(),fallback:!0,itemCount:this.getItemCount(y)},summary:`Fallback ${r.destination} content (AI generation unavailable)`}}}async executeDestinationDelivery(t,n,r,s){const i={id:t,status:"processing",destination:n.destination,targetId:n.targetId,payloadId:r.id,deliveredItems:0,totalItems:r.items.length,createdAt:new Date,updatedAt:new Date};switch(n.destination){case"miro":return await this.deliverToMiro(i,n,r,s);case"figjam":case"figma":return await this.deliverViaEphemeralImport(i,n,r);default:throw new Error(`Unsupported destination: ${n.destination}`)}}async deliverToMiro(t,n,r,s){let i=localStorage.getItem("miro_access_token");if(!i){if(!await H2.getConnection("miro"))throw new Error("No Miro connection found. Please connect to Miro first using the Connection Manager.");i=await H2.getValidAccessToken("miro")}const o=new yF(i),c=await o.validateBoardAccess(n.targetId);if(!c.canWrite)throw new Error(`Cannot write to Miro board: ${c.errors.join(", ")}`);if(!r.items||r.items.length===0)throw new Error("No items to deliver to Miro board");console.log(` Delivering ${r.items.length} items to Miro board: ${n.targetId}`);const l=await o.createItems(n.targetId,r.items);if(console.log(` Miro delivery completed: ${l.summary.successful}/${l.summary.total} items created`),s){const h=20/r.items.length;let A=70;l.success.forEach(()=>{A+=h,this.updateProgress(s,{stage:"delivering",progress:Math.min(A,90),message:`Created ${l.success.length} of ${r.items.length} items...`})})}l.failed.length>0&&console.warn(` Failed to create ${l.failed.length} items:`,l.failed.map(h=>{var A;return{text:(A=h.item.text)==null?void 0:A.substring(0,30),error:h.error}}));const d=o.getBoardEmbedUrl(n.targetId,{embedMode:"live_embed",autoplay:!0}),u=l.failed.length>0?[`Failed to create ${l.failed.length} items`]:void 0;return{...t,status:"success",deliveredItems:l.success.length,embedUrl:d,warnings:u,metadata:{processingTime:Date.now()-t.createdAt.getTime(),batchResults:l.summary},updatedAt:new Date}}async deliverViaEphemeralImport(t,n,r){try{console.log(" Creating ephemeral import for",n.destination);const{data:s,error:i}=await rt.functions.invoke("delivery-orchestrator",{body:{destination:n.destination,targetId:n.targetId,prompt:r.sourcePrompt,tailoredOutput:r}});if(i)throw new Error(`Failed to create ephemeral import: ${i.message}`);return console.log(" Ephemeral import created successfully:",{importUrl:s.importUrl?"URL generated":"No URL",expiresAt:s.expiresAt}),{...t,status:"success",deliveredItems:r.items.length,importUrl:s.importUrl,expiresAt:new Date(s.expiresAt),metadata:{processingTime:Date.now()-t.createdAt.getTime(),importId:s.deliveryId},updatedAt:new Date}}catch(s){console.warn(" Ephemeral import failed, using fallback demo URLs:",s.message);const i=`demo-${Date.now()}-${Math.random().toString(36).substr(2,6)}`,o=`https://framepromptly.demo/import/${i}`;return console.log(" Generated demo import URL for testing:",o),{...t,status:"success",deliveredItems:r.items.length,importUrl:o,expiresAt:new Date(Date.now()+24*60*60*1e3),metadata:{processingTime:Date.now()-t.createdAt.getTime(),importId:i,fallback:!0,note:"Demo URL - ephemeral import service unavailable"},updatedAt:new Date}}}async executeWithRetry(t,n,r,s){let i=null;for(let o=0;o<=n;o++)try{return this.checkAborted(s),await t()}catch(c){if(i=c instanceof Error?c:new Error("Unknown error"),this.isNonRetryableError(i))throw i;o<n&&await this.sleep(r*Math.pow(2,o))}throw new Error(`Operation failed after ${n+1} attempts: ${i==null?void 0:i.message}`)}async getPrompt(t){var i,o,c,l,d,u,h;const{usePromptStore:n}=await Td(async()=>{const{usePromptStore:A}=await Promise.resolve().then(()=>i0e);return{usePromptStore:A}},void 0),{prompts:r}=n.getState(),s=r.find(A=>A.id===t);if(!s)throw new Error(`Prompt ${t} not found in store`);return console.log(` Found prompt ${t}:`,{hasContent:!!s.content,hasOutput:!!s.output,outputType:(i=s.output)==null?void 0:i.type,outputHasContent:!!((o=s.output)!=null&&o.content),outputHasItems:!!((l=(c=s.output)==null?void 0:c.content)!=null&&l.items),outputItemsCount:((h=(u=(d=s.output)==null?void 0:d.content)==null?void 0:u.items)==null?void 0:h.length)||0}),{id:s.id,content:s.content,variables:s.variables||{},context:{framework:s.framework,stage:s.stage,tool:s.tool},execution:s.execution,output:s.output}}async validateTarget(t){const n=[];if(t.destination||n.push("Destination is required"),t.targetId||n.push("Target ID is required"),t.destination==="miro"&&t.targetId){const r=localStorage.getItem("miro_access_token"),s=await H2.getConnection("miro");!r&&!s&&n.push("Miro connection required - please connect using the Connection Manager")}return{isValid:n.length===0,errors:n}}async storeDeliveryResult(t){var n;try{const{data:{user:r}}=await rt.auth.getUser();if(!r){console.log(" No user found, skipping database save");return}console.log(" Attempting to save delivery result:",{id:t.id,destination:t.destination,status:t.status,deliveredItems:t.deliveredItems}),await rt.from("deliveries").upsert({id:t.id,user_id:r.id,destination:t.destination,target_id:t.targetId,status:t.status,delivered_items:t.deliveredItems,total_items:t.totalItems,embed_url:t.embedUrl,import_url:t.importUrl,expires_at:(n=t.expiresAt)==null?void 0:n.toISOString(),error:t.error,warnings:t.warnings,metadata:t.metadata,created_at:t.createdAt.toISOString(),updated_at:t.updatedAt.toISOString()}),console.log(" Delivery result stored successfully")}catch(r){console.warn(" Failed to store delivery result (continuing anyway):",r.message)}}mapDestinationToDDT(t){const r={miro:"Miro",figjam:"FigJam",figma:"Figma"}[t];return r?(console.log(` Mapped destination '${t}'  '${r}'`),r):(console.warn(` Unknown destination: ${t}, using AI Provider`),"AI Provider")}isNonRetryableError(t){return["authentication failed","unauthorized","forbidden","not found","validation failed","invalid"].some(r=>t.message.toLowerCase().includes(r))}updateProgress(t,n){t&&t(n)}checkAborted(t){if(t!=null&&t.aborted)throw new Error("Delivery cancelled")}sleep(t){return new Promise(n=>setTimeout(n,t))}generateFallbackContent(t,n){var o,c,l,d,u,h;const r=((c=(o=n.context)==null?void 0:o.framework)==null?void 0:c.name)||"Design Process",s=((d=(l=n.context)==null?void 0:l.stage)==null?void 0:d.name)||"Research",i=((h=(u=n.context)==null?void 0:u.tool)==null?void 0:h.name)||"Analysis";switch(t.toLowerCase()){case"miro":return{boardSummary:`${r} - ${s} board for ${i}`,items:[{id:"item-1",type:"sticky",text:`${i} insight 1`,theme:"yellow",cluster:"insights",position:{row:0,column:0}},{id:"item-2",type:"sticky",text:`${i} insight 2`,theme:"blue",cluster:"insights",position:{row:0,column:1}},{id:"item-3",type:"sticky",text:`${i} action item`,theme:"green",cluster:"actions",position:{row:1,column:0}},{id:"item-4",type:"text",text:`${s} Stage Instructions`,theme:"white",cluster:"instructions",position:{row:0,column:2}},{id:"item-5",type:"sticky",text:`Key finding from ${i}`,theme:"orange",cluster:"findings",position:{row:1,column:1}}],clusters:[{name:"insights",description:"Key insights discovered",itemIds:["item-1","item-2"]},{name:"actions",description:"Next steps to take",itemIds:["item-3"]},{name:"findings",description:"Research findings",itemIds:["item-5"]}],layout:{columns:3,spacing:20,readingInstructions:"Review insights, then actions"}};case"figjam":return{workshopTitle:`${r}: ${s} Workshop`,items:[{id:"item-1",type:"sticky",text:`How might we improve ${i}?`,category:"hmw",cluster:"questions"},{id:"item-2",type:"sticky",text:`${i} opportunity`,category:"idea",cluster:"opportunities"},{id:"item-3",type:"sticky",text:`User needs ${i} solution`,category:"insight",cluster:"needs"},{id:"item-4",type:"sticky",text:`Test ${i} approach`,category:"action",cluster:"next-steps"},{id:"item-5",type:"sticky",text:`What if we enhance ${i}?`,category:"question",cluster:"questions"}],facilitationScript:[{step:1,instruction:"Review the problem context",duration:"5 minutes",materials:["sticky notes","markers"]},{step:2,instruction:"Generate ideas silently",duration:"10 minutes",materials:["sticky notes"]},{step:3,instruction:"Share and cluster ideas",duration:"15 minutes",materials:["board space"]}],clusters:[{name:"questions",criteria:"Open questions and HMWs",itemIds:["item-1","item-5"]},{name:"needs",criteria:"User needs and insights",itemIds:["item-3"]},{name:"next-steps",criteria:"Actions to take",itemIds:["item-4"]}],assumptions:[`${i} is important for users`,`${s} stage needs attention`,"Team has necessary resources"]};case"figma":return{designSystem:`${r} UI Design System`,uiBlocks:[{id:"block-1",title:`${i} Header`,type:"Hero",description:`Main header for ${i} interface`,copy:{heading:`${i} Dashboard`,subheading:`${s} insights`,cta:"Get Started"},sizing:{preferredWidth:800,preferredHeight:300,padding:24,spacing:16},priority:1},{id:"block-2",title:`${i} Card`,type:"Card",description:`Content card for ${i} data`,copy:{heading:"Insight Card",body:`${i} analysis results`,cta:"View Details"},sizing:{preferredWidth:300,preferredHeight:200,padding:16,spacing:12},priority:2},{id:"block-3",title:"Navigation",type:"Navigation",description:"Main navigation component",copy:{heading:"Menu",labels:[`${s}`,`${i}`,"Settings"]},sizing:{preferredWidth:1200,preferredHeight:60,padding:12,spacing:24},priority:3}],layout:{columns:2,spacing:32,ordering:["block-1","block-2","block-3"]},contentStyle:{tone:"Professional and clear",readingLevel:"Intermediate",accessibility:{contrastRequirements:"WCAG AA compliant",labelClarity:["Use clear, descriptive labels","Avoid jargon"],altTextGuidelines:"Describe function and content"}}};default:return{items:[],message:"Fallback content for unknown destination"}}}getItemCount(t){return t.items?t.items.length:t.uiBlocks?t.uiBlocks.length:0}};Je(Pj,"instance");let sI=Pj;const j4e=sI.getInstance();function SX({boardId:e,accessToken:t,projectId:n,isVisible:r=!0,onClose:s,className:i,autoResize:o=!0,showControls:c=!0}){var x,C;const{currentProject:l,getMiroToken:d,addConnectedBoard:u}=js(),[h,A]=w.useState({isLoading:!0,isFullscreen:!1}),f=w.useRef(null),m=w.useRef(null);w.useEffect(()=>{e&&r&&g()},[e,r]);const g=async()=>{A(S=>({...S,isLoading:!0,error:void 0}));try{const S=n||(l==null?void 0:l.id),_=S?d(S):null,N=t||_||localStorage.getItem("miro_access_token")||"";if(!N)throw new Error("No Miro access token available. Please connect your Miro account in the delivery dashboard settings.");const L=new yF(N),P=await L.validateBoardAccess(e);if(!P.canRead)throw new Error(P.errors.join(", "));const F=await L.getBoard(e),I=L.getBoardEmbedUrl(e,{embedMode:P.canWrite?"live_embed":"view_only",autoplay:!0});if(A({isLoading:!1,isFullscreen:!1,boardInfo:F,embedUrl:I,error:void 0}),Ue.success(`Connected to "${F.name}"`,{description:P.canWrite?"Full edit access":"View-only access"}),S)try{await u(S,e,F.name)}catch(T){console.warn("Failed to save connected board to project:",T)}}catch(S){const _=S instanceof Error?S.message:"Failed to connect to board";A(N=>({...N,isLoading:!1,error:_})),Ue.error("Board connection failed",{description:_})}},b=()=>{!h.isFullscreen&&m.current?m.current.requestFullscreen&&m.current.requestFullscreen():document.fullscreenElement&&document.exitFullscreen&&document.exitFullscreen(),A(S=>({...S,isFullscreen:!S.isFullscreen}))},y=()=>{f.current&&(f.current.src=h.embedUrl||"")},j=()=>{var S;(S=h.boardInfo)!=null&&S.viewLink&&window.open(h.boardInfo.viewLink,"_blank")};return w.useEffect(()=>{const S=()=>{A(_=>({..._,isFullscreen:!!document.fullscreenElement}))};return document.addEventListener("fullscreenchange",S),()=>document.removeEventListener("fullscreenchange",S)},[]),r?a.jsx(Pr,{children:a.jsxs(ot.div,{ref:m,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:$e("relative bg-background rounded-lg border shadow-lg overflow-hidden",h.isFullscreen?"fixed inset-0 z-50 rounded-none":"w-full h-full",i),children:[c&&a.jsxs("div",{className:"flex items-center justify-between p-3 border-b bg-muted/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-6 h-6 bg-[#FFD02F] rounded-full flex items-center justify-center text-black font-bold text-xs",children:"M"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("h3",{className:"font-semibold text-sm truncate max-w-[200px]",children:((x=h.boardInfo)==null?void 0:x.name)||"Miro Board"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_e,{variant:h.error?"destructive":"secondary",className:"text-xs",children:h.isLoading?a.jsxs(a.Fragment,{children:[a.jsx(Cr,{className:"w-3 h-3 mr-1 animate-spin"}),"Connecting..."]}):h.error?a.jsxs(a.Fragment,{children:[a.jsx(ts,{className:"w-3 h-3 mr-1"}),"Error"]}):a.jsxs(a.Fragment,{children:[a.jsx(br,{className:"w-3 h-3 mr-1"}),"Connected"]})}),h.boardInfo&&a.jsxs("span",{className:"text-xs text-muted-foreground",children:["ID: ",e]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(fe,{size:"sm",variant:"ghost",onClick:y,disabled:h.isLoading||!!h.error,children:a.jsx(kl,{className:"w-4 h-4"})}),a.jsx(fe,{size:"sm",variant:"ghost",onClick:j,disabled:!((C=h.boardInfo)!=null&&C.viewLink),children:a.jsx(Hu,{className:"w-4 h-4"})}),a.jsx(fe,{size:"sm",variant:"ghost",onClick:b,disabled:h.isLoading||!!h.error,children:h.isFullscreen?a.jsx(y7,{className:"w-4 h-4"}):a.jsx(D0,{className:"w-4 h-4"})}),s&&a.jsx(fe,{size:"sm",variant:"ghost",onClick:s,children:""})]})]}),a.jsx("div",{className:$e("relative w-full",h.isFullscreen?"h-[calc(100vh-60px)]":"h-[600px]",o&&"min-h-[400px]"),children:h.isLoading?a.jsx("div",{className:"flex items-center justify-center h-full bg-muted/20",children:a.jsxs("div",{className:"text-center space-y-3",children:[a.jsx(Cr,{className:"w-8 h-8 animate-spin mx-auto text-primary"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Connecting to Miro board..."}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Validating access and loading content"})]})]})}):h.error?a.jsx("div",{className:"flex items-center justify-center h-full p-6",children:a.jsxs(za,{className:"max-w-md",children:[a.jsx(ts,{className:"h-4 w-4"}),a.jsx(Va,{children:a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{children:a.jsx("strong",{children:"Failed to load Miro board:"})}),a.jsx("p",{className:"text-sm",children:h.error}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(fe,{size:"sm",onClick:g,className:"flex-1",children:[a.jsx(kl,{className:"w-3 h-3 mr-1"}),"Retry"]}),a.jsxs(fe,{size:"sm",variant:"outline",onClick:()=>{window.open(`https://miro.com/app/board/${e}/`,"_blank")},children:[a.jsx(Hu,{className:"w-3 h-3 mr-1"}),"Open in Miro"]})]})]})})]})}):h.embedUrl?a.jsx("div",{className:"flex items-center justify-center h-full p-6 bg-gradient-to-br from-[#FFD02F]/10 to-[#FFD02F]/5",children:a.jsxs("div",{className:"text-center space-y-4 max-w-md",children:[a.jsx("div",{className:"w-16 h-16 bg-[#FFD02F] rounded-full flex items-center justify-center text-black font-bold text-2xl mx-auto",children:"M"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Board Ready to View"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"For security reasons, Miro boards must be opened in a new window or tab."}),h.boardInfo&&a.jsxs("p",{className:"text-xs text-muted-foreground font-medium",children:['"',h.boardInfo.name,'"']})]}),a.jsxs("div",{className:"flex gap-2 justify-center",children:[a.jsxs(fe,{onClick:()=>window.open(h.embedUrl,"_blank"),className:"bg-[#FFD02F] hover:bg-[#FFD02F]/90 text-black",children:[a.jsx(Hu,{className:"w-4 h-4 mr-2"}),"Open in Miro"]}),a.jsx(fe,{variant:"outline",onClick:y,size:"sm",children:a.jsx(kl,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"text-xs text-muted-foreground bg-muted/50 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(ts,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium mb-1",children:"Why can't I see the board here?"}),a.jsx("p",{children:"Miro uses security policies that prevent embedding boards in other websites. This keeps your data safe!"})]})]})})]})}):null}),c&&h.boardInfo&&!h.isFullscreen&&a.jsx("div",{className:"px-3 py-2 border-t bg-muted/30 text-xs text-muted-foreground",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{children:["Last modified: ",new Date(h.boardInfo.modifiedAt).toLocaleDateString()]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_e,{variant:"outline",className:"text-xs",children:h.boardInfo.type}),a.jsx("button",{onClick:j,className:"hover:text-primary transition-colors",children:"View in Miro "})]})]})})]})}):null}function k4e(){const[e,t]=w.useState(null),[n,r]=w.useState(!1);return{activeBoardId:e,isEmbedVisible:n,showBoard:c=>{t(c),r(!0)},hideBoard:()=>{r(!1)},closeBoard:()=>{t(null),r(!1)}}}const S4e=e=>{switch(e){case"pending":case"processing":return a.jsx(Cr,{className:"w-4 h-4 animate-spin text-yellow-500"});case"success":return a.jsx(br,{className:"w-4 h-4 text-green-500"});case"error":return a.jsx(up,{className:"w-4 h-4 text-red-500"});case"cancelled":return a.jsx(ts,{className:"w-4 h-4 text-gray-500"})}},j1=e=>{switch(e){case"miro":return a.jsx("div",{className:"w-6 h-6 bg-[#FFD02F] rounded-full flex items-center justify-center text-black font-bold text-xs",children:"M"});case"figjam":return a.jsx("div",{className:"w-6 h-6 bg-[#0C8CE9] rounded-full flex items-center justify-center text-white font-bold text-xs",children:"F"});case"figma":return a.jsx("div",{className:"w-6 h-6 bg-[#F24E1E] rounded-full flex items-center justify-center text-white font-bold text-xs",children:"F"})}};function N4e({prompt:e,isOpen:t,onClose:n}){const{deliveries:r,currentDelivery:s,isDelivering:i,deliveryProgress:o,loadProjectDeliveries:c,clearDeliveries:l,cancelDelivery:d,addDelivery:u}=kX(),[h,A]=w.useState(new Map),[f,m]=w.useState(null),[g,b]=w.useState(""),[y,j]=w.useState(!1),{activeBoardId:x,isEmbedVisible:C,showBoard:S,hideBoard:_,closeBoard:N}=k4e();w.useEffect(()=>{t&&e.projectId&&c(e.projectId)},[t,e.projectId,c]);const L=async(R,Y)=>{if(!Y.trim()){Ue.error("Please provide a target ID");return}const X={destination:R,targetId:Y.trim(),metadata:{}},q=K=>{A(J=>{var W,ne;return new Map(J.set(((W=K.details)==null?void 0:W.deliveryId)||"current",{id:((ne=K.details)==null?void 0:ne.deliveryId)||"current",progress:K}))})};try{const K=await j4e.executeDelivery(e.id,X,{maxRetries:3,retryDelay:1e3,optimizePayload:!0,validateBeforeDelivery:!0},q);if(A(J=>{const W=new Map(J);return W.delete(K.id),W}),K.status==="success"&&(u(K),R==="miro"&&K.targetId&&(S(K.targetId),j(!0)),Ue.success(`Successfully delivered to ${R}!`,{description:`${K.deliveredItems} items delivered`,action:K.embedUrl||K.importUrl?{label:R==="miro"?"View Embedded Board":"View Result",onClick:()=>R==="miro"&&K.targetId?S(K.targetId):F(K)}:void 0}),console.log(" Delivery completed and added to store:",{id:K.id,destination:K.destination,status:K.status,deliveredItems:K.deliveredItems,hasImportUrl:!!K.importUrl,hasEmbedUrl:!!K.embedUrl,importUrl:K.importUrl?"URL present":"No URL",boardEmbedded:R==="miro"})),e.projectId)try{await c(e.projectId)}catch(J){console.warn("Could not load deliveries from database (expected if tables not created yet):",J)}}catch(K){console.error("Delivery failed:",K),Ue.error("Delivery failed",{description:K instanceof Error?K.message:"Unknown error occurred"}),A(J=>{const W=new Map(J);return W.delete("current"),W})}},P=async R=>{try{await d(R),A(Y=>{const X=new Map(Y);return X.delete(R),X}),Ue.success("Delivery cancelled")}catch{Ue.error("Failed to cancel delivery")}},F=R=>{console.log(" Viewing result for delivery:",{id:R.id,hasEmbedUrl:!!R.embedUrl,hasImportUrl:!!R.importUrl,embedUrl:R.embedUrl||"None",importUrl:R.importUrl||"None"}),R.embedUrl?(console.log(" Opening embed URL in new tab"),window.open(R.embedUrl,"_blank")):R.importUrl?(console.log(" Copying import URL to clipboard"),navigator.clipboard.writeText(R.importUrl),Ue.success("Import URL copied!",{description:"Paste this URL into your FigJam/Figma plugin"})):(console.warn(" No URL available for this delivery"),Ue.error("No URL available for this delivery"))},I=R=>{navigator.clipboard.writeText(R),Ue.success("Import URL copied to clipboard")},T=async R=>{try{if(console.log(" Downloading JSON for delivery:",R.id),R.importUrl)try{const q=await(await fetch(R.importUrl)).json();if(q.success&&q.data){const K={...q.data.payload,metadata:{...q.data.metadata,downloadedAt:new Date().toISOString(),deliveryId:R.id,destination:R.destination},instructions:q.instructions};Q(K,`framepromptly-${R.destination}-${R.id.split("-")[1]}.json`),Ue.success("JSON file downloaded successfully");return}}catch(X){console.warn("Failed to fetch from import URL, using fallback:",X)}const Y={id:R.id,destination:R.destination,targetId:R.targetId,summary:`Delivery to ${R.destination}`,itemCount:R.deliveredItems,metadata:{deliveredAt:R.createdAt,downloadedAt:new Date().toISOString(),fallback:!0,note:"This is a basic export. Import URL was not accessible."}};Q(Y,`framepromptly-fallback-${R.destination}-${R.id.split("-")[1]}.json`),Ue.success("Fallback JSON file downloaded")}catch(Y){console.error("Failed to download JSON:",Y),Ue.error("Failed to download JSON file")}},Q=(R,Y)=>{const X=new Blob([JSON.stringify(R,null,2)],{type:"application/json"}),q=URL.createObjectURL(X),K=document.createElement("a");K.href=q,K.download=Y,document.body.appendChild(K),K.click(),document.body.removeChild(K),URL.revokeObjectURL(q)},D=R=>{const X=new Date().getTime()-R.getTime(),q=Math.floor(X/6e4),K=Math.floor(q/60),J=Math.floor(K/24);return q<1?"Just now":q<60?`${q}m ago`:K<24?`${K}h ago`:`${J}d ago`},M=r.sort((R,Y)=>new Date(Y.createdAt).getTime()-new Date(R.createdAt).getTime()).slice(0,10),U=r.filter(R=>R.status==="success").length,H=r.length,$=H>0?Math.round(U/H*100):0;return t?a.jsx(ot.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-background/95 backdrop-blur-sm",children:a.jsxs("div",{className:"container mx-auto p-6 h-full flex flex-col max-w-7xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:a.jsx(U5,{className:"w-6 h-6 text-primary"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Delivery Dashboard"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage and track your content deliveries"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[C&&x&&a.jsxs(fe,{variant:"outline",onClick:()=>{window.open(`/board?id=${x}`,"_blank")},children:[a.jsx(D0,{className:"w-4 h-4 mr-2"}),"Full Screen"]}),a.jsxs(fe,{variant:"outline",onClick:()=>e.projectId&&c(e.projectId),children:[a.jsx(kl,{className:"w-4 h-4 mr-2"}),"Refresh"]}),a.jsx(fe,{variant:"outline",onClick:n,children:"Close"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[a.jsx(De,{children:a.jsx(et,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Deliveries"}),a.jsx("p",{className:"text-2xl font-bold",children:H})]}),a.jsx(hp,{className:"w-8 h-8 text-muted-foreground"})]})})}),a.jsx(De,{children:a.jsx(et,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Success Rate"}),a.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[$,"%"]})]}),a.jsx(f7,{className:"w-8 h-8 text-green-500"})]})})}),a.jsx(De,{children:a.jsx(et,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:r.filter(R=>R.status==="processing").length+h.size})]}),a.jsx(Cr,{className:"w-8 h-8 text-yellow-500"})]})})}),a.jsx(De,{children:a.jsx(et,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"This Week"}),a.jsx("p",{className:"text-2xl font-bold",children:r.filter(R=>{const Y=new Date;return Y.setDate(Y.getDate()-7),new Date(R.createdAt)>Y}).length})]}),a.jsx(kd,{className:"w-8 h-8 text-muted-foreground"})]})})})]}),C&&x&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Connected Miro Board"}),a.jsx(fe,{variant:"outline",size:"sm",onClick:N,children:"Close Board View"})]}),a.jsx(SX,{boardId:x,projectId:e.projectId,isVisible:C,onClose:N,className:"border-2 border-primary/20",showControls:!0,autoResize:!0})]}),a.jsxs("div",{className:$e("grid gap-6 flex-1 min-h-0",C?"grid-cols-1 lg:grid-cols-2":"grid-cols-1 lg:grid-cols-3"),children:[a.jsxs(De,{className:"lg:col-span-1",children:[a.jsx(dt,{children:a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(Cc,{className:"w-5 h-5"}),"Quick Delivery"]})}),a.jsxs(et,{className:"space-y-4",children:[e.destination?a.jsxs(za,{children:[a.jsx(Mr,{className:"w-4 h-4"}),a.jsxs(Va,{children:["This prompt is optimized for ",a.jsx("strong",{children:e.destination.type})]})]}):a.jsxs(za,{children:[a.jsx(ts,{className:"w-4 h-4"}),a.jsx(Va,{children:"Select a destination in the prompt panel to optimize content for delivery."})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[j1("miro"),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold",children:"Miro Board"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Direct API delivery with live embed"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{htmlFor:"miro-board-id",className:"text-sm",children:"Board ID"}),a.jsx(ln,{id:"miro-board-id",placeholder:"Enter Miro board ID (e.g., uXjVKMeWJv4=)",value:g,onChange:R=>b(R.target.value),className:"text-sm"}),a.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[a.jsx("p",{children:"Find the board ID in your Miro board URL:"}),a.jsxs("p",{className:"font-mono bg-muted px-2 py-1 rounded",children:["miro.com/app/board/",a.jsx("strong",{className:"text-primary",children:"uXjVKMeWJv4="}),"/"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Note:"})," Welcome/invite URLs won't work. Open the board first, then copy the board ID from the address bar."]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(fe,{size:"sm",variant:"outline",onClick:()=>L("miro",g),disabled:i||!g.trim(),className:"flex-1",children:i?a.jsxs(a.Fragment,{children:[a.jsx(Cr,{className:"w-3 h-3 mr-1 animate-spin"}),"Delivering..."]}):a.jsxs(a.Fragment,{children:[a.jsx(hp,{className:"w-3 h-3 mr-1"}),"Deliver to Board"]})}),a.jsx(Sl,{children:a.jsxs(La,{children:[a.jsx(Ma,{asChild:!0,children:a.jsx(fe,{size:"sm",variant:"ghost",onClick:()=>{g.trim()?(S(g.trim()),j(!0)):Ue.error("Please enter a board ID first")},disabled:!g.trim(),children:a.jsx(zr,{className:"w-3 h-3"})})}),a.jsx(da,{children:"Preview board before delivery"})]})}),a.jsx(Sl,{children:a.jsxs(La,{children:[a.jsx(Ma,{asChild:!0,children:a.jsx(fe,{size:"sm",variant:"ghost",onClick:()=>{localStorage.getItem("miro_access_token")||Ue.error("Please connect to Miro first using the Connections tab")},children:a.jsx(us,{className:"w-3 h-3"})})}),a.jsx(da,{children:"Connection Settings"})]})})]})]})]}),a.jsxs("div",{className:"p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[j1("figjam"),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold",children:"FigJam"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Plugin import for workshop content"})]})]}),a.jsxs("div",{className:"flex gap-2 mt-3",children:[a.jsxs(fe,{size:"sm",variant:"outline",onClick:()=>L("figjam","demo-file-456"),disabled:i,className:"flex-1",children:[a.jsx(hp,{className:"w-3 h-3 mr-1"}),"Generate Import"]}),a.jsx(fe,{size:"sm",variant:"ghost",children:a.jsx(us,{className:"w-3 h-3"})})]})]}),a.jsxs("div",{className:"p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[j1("figma"),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold",children:"Figma"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"UI components and design system"})]})]}),a.jsxs("div",{className:"flex gap-2 mt-3",children:[a.jsxs(fe,{size:"sm",variant:"outline",onClick:()=>L("figma","demo-file-789"),disabled:i,className:"flex-1",children:[a.jsx(hp,{className:"w-3 h-3 mr-1"}),"Generate Import"]}),a.jsx(fe,{size:"sm",variant:"ghost",children:a.jsx(us,{className:"w-3 h-3"})})]})]})]})]})]}),a.jsxs(De,{className:"lg:col-span-2",children:[a.jsx(dt,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(Jo,{className:"w-5 h-5"}),"Recent Deliveries"]}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:l,disabled:r.length===0,children:"Clear All"})]})}),a.jsx(et,{children:a.jsx(ns,{className:"h-[400px] w-full",children:a.jsxs("div",{className:"space-y-3",children:[a.jsx(Pr,{children:Array.from(h.values()).map(R=>a.jsxs(ot.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-4 border rounded-lg bg-muted/30",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Cr,{className:"w-4 h-4 animate-spin text-primary"}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-semibold text-sm",children:[R.progress.stage," - ",R.progress.message]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"In progress"})]})]}),a.jsx(fe,{size:"sm",variant:"ghost",onClick:()=>P(R.id),children:"Cancel"})]}),a.jsx(bl,{value:R.progress.progress,className:"h-2"}),a.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[a.jsxs("span",{children:[R.progress.progress.toFixed(0),"% complete"]}),a.jsx("span",{children:R.progress.stage})]})]},R.id))}),M.length===0&&h.size===0?a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(U5,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{className:"font-medium",children:"No deliveries yet"}),a.jsx("p",{className:"text-sm",children:"Start by choosing a destination above"})]}):M.map(R=>{var Y;return a.jsxs(ot.div,{initial:{opacity:0},animate:{opacity:1},className:$e("p-4 border rounded-lg cursor-pointer transition-all hover:shadow-md",(f==null?void 0:f.id)===R.id&&"ring-2 ring-primary"),onClick:()=>m(R),children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[S4e(R.status),j1(R.destination),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h4",{className:"font-semibold text-sm capitalize",children:R.destination}),a.jsx(_e,{variant:"secondary",className:"text-xs",children:R.status})]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Target: ",R.targetId]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[R.status==="success"&&a.jsxs(Sl,{children:[R.destination==="miro"&&a.jsxs(La,{children:[a.jsx(Ma,{asChild:!0,children:a.jsx(fe,{size:"sm",variant:"ghost",onClick:X=>{X.stopPropagation(),S(R.targetId),j(!0)},className:"h-8 w-8 p-0",children:a.jsx(zr,{className:"w-3 h-3"})})}),a.jsx(da,{children:"Embed board in page"})]}),a.jsxs(La,{children:[a.jsx(Ma,{asChild:!0,children:a.jsx(fe,{size:"sm",variant:"ghost",onClick:X=>{X.stopPropagation(),F(R)},className:"h-8 w-8 p-0",children:R.embedUrl?a.jsx(Hu,{className:"w-3 h-3"}):a.jsx(Ii,{className:"w-3 h-3"})})}),a.jsx(da,{children:R.embedUrl?"Open in new tab":"Copy import URL"})]}),R.importUrl&&a.jsxs(La,{children:[a.jsx(Ma,{asChild:!0,children:a.jsx(fe,{size:"sm",variant:"ghost",onClick:X=>{X.stopPropagation(),navigator.clipboard.writeText(R.importUrl),Ue.success("Import URL copied!",{description:"Paste this into your plugin"})},className:"h-8 w-8 p-0",children:a.jsx(fv,{className:"w-3 h-3"})})}),a.jsx(da,{children:"Copy import URL for plugin"})]}),a.jsxs(La,{children:[a.jsx(Ma,{asChild:!0,children:a.jsx(fe,{size:"sm",variant:"ghost",onClick:X=>{X.stopPropagation(),T(R)},className:"h-8 w-8 p-0",children:a.jsx(Vp,{className:"w-3 h-3"})})}),a.jsx(da,{children:"Download JSON for manual import"})]})]}),a.jsx("span",{className:"text-xs text-muted-foreground",children:D(new Date(R.createdAt))})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(qa,{className:"w-3 h-3"}),R.deliveredItems,"/",R.totalItems," items"]}),((Y=R.metadata)==null?void 0:Y.processingTime)&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(C7,{className:"w-3 h-3"}),Math.round(R.metadata.processingTime/1e3),"s"]})]}),R.warnings&&R.warnings.length>0&&a.jsxs(_e,{variant:"outline",className:"text-xs",children:[R.warnings.length," warning",R.warnings.length!==1?"s":""]})]}),R.error&&a.jsxs(za,{className:"mt-2",children:[a.jsx(ts,{className:"w-4 h-4"}),a.jsx(Va,{className:"text-xs",children:R.error})]}),R.importUrl&&R.expiresAt&&a.jsxs("div",{className:"mt-2 p-3 bg-muted rounded",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("span",{className:"text-xs text-muted-foreground",children:["Import expires: ",new Date(R.expiresAt).toLocaleString()]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(fe,{size:"sm",variant:"default",onClick:X=>{X.stopPropagation(),I(R.importUrl)},className:"flex-1 h-8",children:[a.jsx(fv,{className:"w-3 h-3 mr-2"}),"Copy Import URL"]}),a.jsxs(fe,{size:"sm",variant:"outline",onClick:X=>{X.stopPropagation(),T(R)},className:"h-8",children:[a.jsx(Vp,{className:"w-3 h-3 mr-1"}),"JSON"]})]})]})]},R.id)})]})})})]})]})]})}):null}function B4e({projectId:e,onConnectionSuccess:t,onConnectionFailed:n}){const{currentProject:r,saveMiroToken:s,getMiroToken:i}=js(),[o,c]=w.useState(""),[l,d]=w.useState(!1),[u,h]=w.useState(!1),[A,f]=w.useState(!1),[m,g]=w.useState(null),[b,y]=w.useState(!1);w.useEffect(()=>{const S=e||(r==null?void 0:r.id);if(S){const _=i(S);_&&(c(_),y(!0))}},[e,r,i]);const j=async S=>{if(!S.trim()){Ue.error("Please enter an access token");return}f(!0);try{const N=await new yF(S).testConnection();if(g(N),N.isValid){Ue.success("Miro connection successful!"),y(!0);const L=e||(r==null?void 0:r.id);if(L)try{await s(L,S),Ue.success("Access token saved to project",{description:"Token will be reused for future connections in this project"})}catch(P){console.warn("Failed to save token to project:",P)}t(S)}else Ue.error("Connection failed: "+N.error),n(N.error||"Unknown error")}catch(_){const N=_ instanceof Error?_.message:"Unknown error";g({isValid:!1,error:N}),Ue.error("Connection failed: "+N),n(N)}finally{f(!1)}},x=async()=>{h(!0),await j(o),h(!1)},C=()=>{navigator.clipboard.writeText(o),Ue.success("Access token copied to clipboard")};return a.jsxs(De,{className:"w-full max-w-md mx-auto",children:[a.jsx(dt,{children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-[#FFD02F] rounded-full flex items-center justify-center text-black font-bold",children:"M"}),a.jsxs("div",{children:[a.jsx(ft,{className:"text-lg",children:"Connect to Miro"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter your Miro API access token"})]}),b&&a.jsxs(_e,{variant:"outline",className:"text-green-600 border-green-300",children:[a.jsx(br,{className:"w-3 h-3 mr-1"}),"Connected"]})]})}),a.jsxs(et,{className:"space-y-4",children:[a.jsxs(za,{children:[a.jsx(Ep,{className:"w-4 h-4"}),a.jsx(Va,{children:a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"font-medium",children:"How to get your Miro access token:"}),a.jsxs("ol",{className:"list-decimal list-inside text-sm space-y-1 ml-2",children:[a.jsxs("li",{children:["Go to ",a.jsx("a",{href:"https://miro.com/app/settings/user-profile",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"Miro Settings"})]}),a.jsx("li",{children:'Navigate to "Your apps" section'}),a.jsx("li",{children:'Click "Create new app"'}),a.jsx("li",{children:"Fill in app details and create"}),a.jsx("li",{children:"Copy the access token from your app settings"})]})]})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{htmlFor:"access-token",children:"Miro Access Token"}),a.jsxs("div",{className:"relative",children:[a.jsx(ln,{id:"access-token",type:l?"text":"password",placeholder:"Enter your Miro access token...",value:o,onChange:S=>c(S.target.value),className:"pr-20",disabled:u||A}),a.jsxs("div",{className:"absolute right-1 top-1 flex items-center gap-1",children:[a.jsx(Sl,{children:a.jsxs(La,{children:[a.jsx(Ma,{asChild:!0,children:a.jsx(fe,{size:"sm",variant:"ghost",onClick:()=>d(!l),className:"h-6 w-6 p-0",children:l?a.jsx(F0,{className:"w-3 h-3"}):a.jsx(zr,{className:"w-3 h-3"})})}),a.jsxs(da,{children:[l?"Hide":"Show"," token"]})]})}),o&&a.jsx(Sl,{children:a.jsxs(La,{children:[a.jsx(Ma,{asChild:!0,children:a.jsx(fe,{size:"sm",variant:"ghost",onClick:C,className:"h-6 w-6 p-0",children:a.jsx(Ii,{className:"w-3 h-3"})})}),a.jsx(da,{children:"Copy token"})]})})]})]})]}),m&&a.jsxs(za,{variant:m.isValid?"default":"destructive",children:[m.isValid?a.jsx(br,{className:"w-4 h-4"}):a.jsx(ts,{className:"w-4 h-4"}),a.jsx(Va,{children:m.isValid?a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"font-medium text-green-700",children:"Connection successful!"}),m.userInfo&&a.jsxs("div",{className:"text-sm space-y-1",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Name:"})," ",m.userInfo.name]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Email:"})," ",m.userInfo.email]})]})]}):a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Connection failed"}),a.jsx("p",{className:"text-sm mt-1",children:m.error})]})})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(fe,{onClick:x,disabled:!o.trim()||u||A,className:"flex-1",children:u||A?a.jsxs(a.Fragment,{children:[a.jsx(Cr,{className:"w-4 h-4 mr-2 animate-spin"}),u?"Connecting...":"Testing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(g7,{className:"w-4 h-4 mr-2"}),"Connect"]})}),b&&a.jsx(fe,{variant:"outline",onClick:()=>j(o),disabled:A||u,children:A?a.jsx(Cr,{className:"w-4 h-4 animate-spin"}):a.jsx(kl,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[a.jsxs("a",{href:"https://developers.miro.com/docs/getting-started",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline flex items-center gap-1",children:["Miro API Docs",a.jsx(Hu,{className:"w-3 h-3"})]}),a.jsxs("a",{href:"https://miro.com/app/settings/user-profile",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline flex items-center gap-1",children:["Get Access Token",a.jsx(Hu,{className:"w-3 h-3"})]})]})]})]})}const E4e=e=>{switch(e){case"miro":return{name:"Miro",icon:a.jsx("div",{className:"w-8 h-8 bg-[#FFD02F] rounded-full flex items-center justify-center text-black font-bold text-sm",children:"M"}),color:"#FFD02F",description:"Connect to Miro for direct board delivery",scopes:["boards:read","boards:write"],authRequired:!0};case"figjam":return{name:"FigJam",icon:a.jsx("div",{className:"w-8 h-8 bg-[#0C8CE9] rounded-full flex items-center justify-center text-white font-bold text-sm",children:"F"}),color:"#0C8CE9",description:"Plugin-based import, no OAuth required",scopes:[],authRequired:!1};case"figma":return{name:"Figma",icon:a.jsx("div",{className:"w-8 h-8 bg-[#F24E1E] rounded-full flex items-center justify-center text-white font-bold text-sm",children:"F"}),color:"#F24E1E",description:"Plugin-based import, no OAuth required",scopes:[],authRequired:!1}}};function _4e({destination:e,connection:t,onConnect:n,onDisconnect:r,onTest:s,onRefresh:i,isConnecting:o,isTesting:c,testResult:l}){var m;const d=E4e(e),[u,h]=w.useState(!1),A=!!(t!=null&&t.isActive),f=(t==null?void 0:t.expiresAt)&&new Date(t.expiresAt).getTime()-Date.now()<24*60*60*1e3;return d.authRequired?a.jsxs(De,{className:$e("relative transition-all",A&&"border-green-300 bg-green-50/50"),children:[a.jsx(dt,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[d.icon,a.jsxs("div",{children:[a.jsx(ft,{className:"text-lg",children:d.name}),a.jsx("p",{className:"text-sm text-muted-foreground",children:d.description})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:A?a.jsxs(a.Fragment,{children:[f&&a.jsx(Sl,{children:a.jsxs(La,{children:[a.jsx(Ma,{children:a.jsx(ts,{className:"w-4 h-4 text-yellow-500"})}),a.jsx(da,{children:"Token expires soon"})]})}),a.jsxs(_e,{variant:"outline",className:"text-green-600 border-green-300",children:[a.jsx(br,{className:"w-3 h-3 mr-1"}),"Connected"]})]}):a.jsxs(_e,{variant:"outline",className:"text-gray-600",children:[a.jsx(up,{className:"w-3 h-3 mr-1"}),"Not Connected"]})})]})}),a.jsxs(et,{className:"space-y-4",children:[A&&t&&a.jsxs("div",{className:"p-3 bg-muted rounded-lg space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:"Connected Account"}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>h(!u),className:"h-6 px-2",children:u?a.jsx(F0,{className:"w-3 h-3"}):a.jsx(zr,{className:"w-3 h-3"})})]}),u&&a.jsxs(ot.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},className:"space-y-2 text-sm",children:[((m=t.metadata)==null?void 0:m.username)&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"User:"}),a.jsx("span",{className:"font-mono",children:t.metadata.username})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Scopes:"}),a.jsx("span",{className:"font-mono text-xs",children:t.scopes.join(", ")||"None"})]}),t.expiresAt&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Expires:"}),a.jsx("span",{className:$e("font-mono text-xs",f&&"text-yellow-600 font-semibold"),children:new Date(t.expiresAt).toLocaleString()})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Connected:"}),a.jsx("span",{className:"font-mono text-xs",children:new Date(t.createdAt).toLocaleDateString()})]})]})]}),l&&a.jsx(Pr,{children:a.jsx(ot.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:a.jsxs(za,{className:l.isValid?"border-green-300 bg-green-50":"border-red-300 bg-red-50",children:[l.isValid?a.jsx(br,{className:"w-4 h-4 text-green-600"}):a.jsx(up,{className:"w-4 h-4 text-red-600"}),a.jsx(Va,{children:l.isValid?a.jsxs("div",{children:[a.jsx("strong",{children:"Connection verified!"}),l.userInfo&&a.jsxs("div",{className:"mt-1 text-sm",children:["Connected as: ",l.userInfo.name," (",l.userInfo.email,")"]})]}):a.jsxs("div",{children:[a.jsx("strong",{children:"Connection failed"}),a.jsx("div",{className:"mt-1 text-sm",children:l.error})]})})]})})}),d.scopes.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{className:"text-sm font-medium",children:"Required Permissions"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:d.scopes.map(g=>a.jsx(_e,{variant:"secondary",className:"text-xs",children:g},g))})]}),a.jsx("div",{className:"flex gap-2 pt-2",children:A?a.jsxs(a.Fragment,{children:[a.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>s(e),disabled:c,className:"flex-1",children:[c?a.jsx(Cr,{className:"w-3 h-3 mr-1 animate-spin"}):a.jsx(qp,{className:"w-3 h-3 mr-1"}),"Test"]}),f&&a.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>i(t.id),className:"flex-1",children:[a.jsx(kl,{className:"w-3 h-3 mr-1"}),"Refresh"]}),a.jsxs(fe,{variant:"destructive",size:"sm",onClick:()=>r(t.id),className:"flex-1",children:[a.jsx(The,{className:"w-3 h-3 mr-1"}),"Disconnect"]})]}):a.jsxs(fe,{onClick:()=>n(e),disabled:o,className:"flex-1",style:{backgroundColor:d.color},children:[o?a.jsx(Cr,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(fv,{className:"w-4 h-4 mr-2"}),"Connect to ",d.name]})})]})]}):a.jsxs(De,{className:"relative",children:[a.jsx(dt,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[d.icon,a.jsxs("div",{children:[a.jsx(ft,{className:"text-lg",children:d.name}),a.jsx("p",{className:"text-sm text-muted-foreground",children:d.description})]})]}),a.jsx(_e,{variant:"outline",className:"text-green-600 border-green-300",children:"Plugin-based"})]})}),a.jsx(et,{children:a.jsxs(za,{children:[a.jsx(Ep,{className:"w-4 h-4"}),a.jsxs(Va,{children:[d.name," uses plugin-based import. No OAuth connection required. Install the FramePromptly plugin in ",d.name," to import content."]})]})})]})}function I4e({isOpen:e,onClose:t,projectId:n}){const{connections:r,isConnecting:s,loadConnections:i,initiateOAuth:o,completeOAuth:c,refreshConnection:l,revokeConnection:d}=kX(),[u,h]=w.useState(new Map),[A,f]=w.useState(null),[m,g]=w.useState(null),[b,y]=w.useState(null);w.useEffect(()=>{e&&i()},[e,i]),w.useEffect(()=>{if(!m||!b)return;const P=setInterval(()=>{m.closed&&(clearInterval(P),g(null),y(null),Ue.error("OAuth process cancelled"))},1e3),F=I=>{I.origin===window.location.origin&&(I.data.type==="OAUTH_SUCCESS"&&I.data.destination===b?(clearInterval(P),m.close(),g(null),x(b,I.data.code),y(null)):I.data.type==="OAUTH_ERROR"&&(clearInterval(P),m.close(),g(null),y(null),Ue.error("OAuth failed",{description:I.data.error})))};return window.addEventListener("message",F),()=>{clearInterval(P),window.removeEventListener("message",F)}},[m,b]);const j=async P=>{try{const F=await o(P),I=500,T=600,Q=(window.screen.width-I)/2,D=(window.screen.height-T)/2,M=window.open(F,`oauth-${P}`,`width=${I},height=${T},left=${Q},top=${D},scrollbars=yes,resizable=yes`);if(!M)throw new Error("Failed to open OAuth window. Please allow popups for this site.");g(M),y(P)}catch(F){console.error("OAuth initiation failed:",F),Ue.error("Failed to start OAuth process",{description:F instanceof Error?F.message:"Unknown error"})}},x=async(P,F)=>{try{await c(P,F),Ue.success(`Successfully connected to ${P}!`,{description:"You can now deliver content directly"}),i()}catch(I){console.error("OAuth completion failed:",I),Ue.error("Failed to complete OAuth",{description:I instanceof Error?I.message:"Unknown error"})}},C=async P=>{try{await d(P),Ue.success("Connection removed");const F=r.find(I=>I.id===P);F&&h(I=>{const T=new Map(I);return T.delete(F.destination),T}),i()}catch(F){console.error("Failed to disconnect:",F),Ue.error("Failed to remove connection")}},S=async P=>{f(P);try{const F=await H2.testConnection(P);h(I=>new Map(I.set(P,F))),F.isValid?Ue.success(`${P} connection verified!`):Ue.error(`${P} connection test failed`)}catch(F){console.error("Connection test failed:",F);const I={isValid:!1,error:F instanceof Error?F.message:"Test failed"};h(T=>new Map(T.set(P,I)))}finally{f(null)}},_=async P=>{try{await l(P),Ue.success("Connection refreshed"),i()}catch(F){console.error("Failed to refresh connection:",F),Ue.error("Failed to refresh connection")}},N=["miro","figjam","figma"],L=P=>r.find(F=>F.destination===P&&F.isActive);return e?a.jsx(ot.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-background/95 backdrop-blur-sm",children:a.jsxs("div",{className:"container mx-auto p-6 h-full flex flex-col max-w-4xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:a.jsx(g7,{className:"w-6 h-6 text-primary"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Connection Manager"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your integrations and API connections"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(fe,{variant:"outline",onClick:i,children:[a.jsx(kl,{className:"w-4 h-4 mr-2"}),"Refresh"]}),a.jsx(fe,{variant:"outline",onClick:t,children:"Close"})]})]}),a.jsxs(za,{className:"mb-6",children:[a.jsx(qp,{className:"w-4 h-4"}),a.jsxs(Va,{children:[a.jsx("strong",{children:"Security:"})," All OAuth tokens are encrypted and stored securely. We only request the minimum permissions needed for delivery functionality."]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Quick Setup - Miro Connection"}),a.jsx(B4e,{projectId:n,onConnectionSuccess:P=>{Ue.success("Miro connected successfully!"),localStorage.setItem("miro_access_token",P)},onConnectionFailed:P=>{Ue.error("Miro connection failed: "+P)}})]}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 flex-1",children:N.filter(P=>P!=="miro").map(P=>a.jsx(_4e,{destination:P,connection:L(P),onConnect:j,onDisconnect:C,onTest:S,onRefresh:_,isConnecting:s&&b===P,isTesting:A===P,testResult:u.get(P)},P))}),a.jsxs("div",{className:"mt-6 p-4 bg-muted rounded-lg",children:[a.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[a.jsx(qa,{className:"w-4 h-4"}),"Connection Summary"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Active Connections:"}),a.jsx("span",{className:"ml-2 font-semibold",children:r.filter(P=>P.isActive).length})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Expiring Soon:"}),a.jsx("span",{className:"ml-2 font-semibold text-yellow-600",children:r.filter(P=>P.expiresAt?new Date(P.expiresAt).getTime()-Date.now()<24*60*60*1e3:!1).length})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Total Destinations:"}),a.jsx("span",{className:"ml-2 font-semibold",children:N.length})]})]})]})]})}):null}function q0(e){return!e||typeof e!="string"?e:e.replace(/```[\s\S]*?```/g,t=>t.replace(/```.*?\n?/g,"").replace(/```/g,"").trim()).replace(/`([^`]+)`/g,"$1").replace(/^#+\s*(.+)$/gm,`$1
`).replace(/\*\*\*(.+?)\*\*\*/g,"$1").replace(/\*\*(.+?)\*\*/g,"$1").replace(/\*(.+?)\*/g,"$1").replace(/___(.+?)___/g,"$1").replace(/__(.+?)__/g,"$1").replace(/_(.+?)_/g,"$1").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/^\s*[-*+]\s+(.+)/gm," $1").replace(/^\s*(\d+)\.\s+(.+)/gm,"$1. $2").replace(/[#\-_]+/g,"").replace(/\n{3,}/g,`

`).trim()}function Qi(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function P4e(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const k1=43200,cO=1440;let T4e={};function F4e(){return T4e}function lO(e){const t=Qi(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function $2(e,t){const n=Qi(e),r=Qi(t),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function D4e(e){return P4e(e,Date.now())}function U4e(e,t){const n=Qi(e),r=Qi(t),s=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return s*12+i}function L4e(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function M4e(e,t){return+Qi(e)-+Qi(t)}function R4e(e){const t=Qi(e);return t.setHours(23,59,59,999),t}function O4e(e){const t=Qi(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Q4e(e){const t=Qi(e);return+R4e(t)==+O4e(t)}function H4e(e,t){const n=Qi(e),r=Qi(t),s=$2(n,r),i=Math.abs(U4e(n,r));let o;if(i<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*i);let c=$2(n,r)===-s;Q4e(Qi(e))&&i===1&&$2(e,r)===1&&(c=!1),o=s*(i-Number(c))}return o===0?0:o}function $4e(e,t,n){const r=M4e(e,t)/1e3;return L4e(n==null?void 0:n.roundingMethod)(r)}const z4e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},V4e=(e,t,n)=>{let r;const s=z4e[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function DB(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const q4e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},K4e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},W4e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},G4e={date:DB({formats:q4e,defaultWidth:"full"}),time:DB({formats:K4e,defaultWidth:"full"}),dateTime:DB({formats:W4e,defaultWidth:"full"})},Y4e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},X4e=(e,t,n,r)=>Y4e[e];function Vy(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,c=n!=null&&n.width?String(n.width):o;s=e.formattingValues[c]||e.formattingValues[o]}else{const o=e.defaultWidth,c=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[c]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const J4e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Z4e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},eTe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},tTe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},nTe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},rTe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},sTe=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},iTe={ordinalNumber:sTe,era:Vy({values:J4e,defaultWidth:"wide"}),quarter:Vy({values:Z4e,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Vy({values:eTe,defaultWidth:"wide"}),day:Vy({values:tTe,defaultWidth:"wide"}),dayPeriod:Vy({values:nTe,defaultWidth:"wide",formattingValues:rTe,defaultFormattingWidth:"wide"})};function qy(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const o=i[0],c=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(c)?oTe(c,h=>h.test(o)):aTe(c,h=>h.test(o));let d;d=e.valueCallback?e.valueCallback(l):l,d=n.valueCallback?n.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function aTe(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function oTe(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function cTe(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const c=t.slice(s.length);return{value:o,rest:c}}}const lTe=/^(\d+)(th|st|nd|rd)?/i,dTe=/\d+/i,uTe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},hTe={any:[/^b/i,/^(a|c)/i]},ATe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},fTe={any:[/1/i,/2/i,/3/i,/4/i]},pTe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},mTe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},gTe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},vTe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},yTe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},xTe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},wTe={ordinalNumber:cTe({matchPattern:lTe,parsePattern:dTe,valueCallback:e=>parseInt(e,10)}),era:qy({matchPatterns:uTe,defaultMatchWidth:"wide",parsePatterns:hTe,defaultParseWidth:"any"}),quarter:qy({matchPatterns:ATe,defaultMatchWidth:"wide",parsePatterns:fTe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:qy({matchPatterns:pTe,defaultMatchWidth:"wide",parsePatterns:mTe,defaultParseWidth:"any"}),day:qy({matchPatterns:gTe,defaultMatchWidth:"wide",parsePatterns:vTe,defaultParseWidth:"any"}),dayPeriod:qy({matchPatterns:yTe,defaultMatchWidth:"any",parsePatterns:xTe,defaultParseWidth:"any"})},bTe={code:"en-US",formatDistance:V4e,formatLong:G4e,formatRelative:X4e,localize:iTe,match:wTe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function CTe(e,t,n){const r=F4e(),s=(n==null?void 0:n.locale)??r.locale??bTe,i=2520,o=$2(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const c=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let l,d;o>0?(l=Qi(t),d=Qi(e)):(l=Qi(e),d=Qi(t));const u=$4e(d,l),h=(lO(d)-lO(l))/1e3,A=Math.round((u-h)/60);let f;if(A<2)return n!=null&&n.includeSeconds?u<5?s.formatDistance("lessThanXSeconds",5,c):u<10?s.formatDistance("lessThanXSeconds",10,c):u<20?s.formatDistance("lessThanXSeconds",20,c):u<40?s.formatDistance("halfAMinute",0,c):u<60?s.formatDistance("lessThanXMinutes",1,c):s.formatDistance("xMinutes",1,c):A===0?s.formatDistance("lessThanXMinutes",1,c):s.formatDistance("xMinutes",A,c);if(A<45)return s.formatDistance("xMinutes",A,c);if(A<90)return s.formatDistance("aboutXHours",1,c);if(A<cO){const m=Math.round(A/60);return s.formatDistance("aboutXHours",m,c)}else{if(A<i)return s.formatDistance("xDays",1,c);if(A<k1){const m=Math.round(A/cO);return s.formatDistance("xDays",m,c)}else if(A<k1*2)return f=Math.round(A/k1),s.formatDistance("aboutXMonths",f,c)}if(f=H4e(d,l),f<12){const m=Math.round(A/k1);return s.formatDistance("xMonths",m,c)}else{const m=f%12,g=Math.trunc(f/12);return m<3?s.formatDistance("aboutXYears",g,c):m<9?s.formatDistance("overXYears",g,c):s.formatDistance("almostXYears",g+1,c)}}function kA(e,t){return CTe(e,D4e(e),t)}function jTe({promptId:e,onVersionSelect:t,onVersionSwitch:n,onSaveNewVersion:r,selectedVersionId:s}){const{loadPromptVersions:i,getVersionHistory:o,switchToVersion:c,deleteVersion:l,isLoadingVersions:d}=ma(),[u,h]=w.useState(null),[A,f]=w.useState(!1),[m,g]=w.useState(null);w.useEffect(()=>{i(e)},[e,i]);const b=o(e);b.find(x=>x.isActive);const y=async x=>{try{await c(e,x);const C=b.find(S=>S.id===x);C&&(n==null||n(C),Ue.success(`Switched to ${C.versionTitle}`))}catch(C){Ue.error("Failed to switch version"),console.error(C)}},j=async()=>{if(m)try{await l(m.id),Ue.success(`Deleted ${m.versionTitle}`),f(!1),g(null)}catch(x){Ue.error(x.message||"Failed to delete version"),console.error(x)}};return d?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(Jo,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{className:"text-sm",children:"Loading version history..."})]})}):b.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[a.jsx(Cg,{className:"w-8 h-8 text-muted-foreground mb-2"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"No version history available"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Versions will appear here as you save changes"})]}):a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Cg,{className:"w-4 h-4"}),a.jsxs("h3",{className:"font-medium text-sm",children:["Version History (",b.length,")"]})]}),a.jsxs(fe,{size:"sm",variant:"outline",onClick:r,className:"h-7 px-2 text-xs",children:[a.jsx(Od,{className:"w-3 h-3 mr-1"}),"Save New Version"]})]}),a.jsx(ns,{className:"flex-1",children:a.jsx("div",{className:"p-3 space-y-2",children:a.jsx(Pr,{mode:"popLayout",children:b.map((x,C)=>{const S=s===x.id,_=x.isActive,N=u===x.id;return a.jsx(ot.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{delay:C*.05},children:a.jsx(De,{className:`p-3 transition-all ${_?"border-primary bg-primary/5":"hover:border-muted-foreground/30"} ${S?"ring-2 ring-blue-500 bg-blue-50/30":""}`,children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsxs(_e,{variant:_?"default":"secondary",className:"text-xs",children:["v",x.versionNumber]}),_&&a.jsxs(_e,{variant:"outline",className:"text-xs",children:[a.jsx(br,{className:"w-3 h-3 mr-1"}),"Active"]}),S&&a.jsxs(_e,{variant:"outline",className:"text-xs bg-blue-100 border-blue-300",children:[a.jsx(zr,{className:"w-3 h-3 mr-1"}),"Viewing"]})]}),a.jsx("h4",{className:"font-medium text-sm mt-1 truncate",children:x.versionTitle}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:kA(new Date(x.createdAt),{addSuffix:!0})})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs(fe,{size:"sm",variant:"ghost",onClick:()=>t==null?void 0:t(x),className:"h-7 px-2 text-xs",title:"View this version",children:[a.jsx(zr,{className:"w-3 h-3 mr-1"}),"View"]}),!_&&a.jsx(fe,{size:"sm",variant:"ghost",onClick:()=>{g(x),f(!0)},className:"h-7 w-7 p-0 text-destructive hover:text-destructive",title:"Delete version",children:a.jsx(Pc,{className:"w-3.5 h-3.5"})})]})]}),x.changeSummary&&a.jsx("p",{className:"text-xs text-muted-foreground italic",children:x.changeSummary}),a.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(uue,{className:"w-3 h-3"}),a.jsxs("span",{children:[x.conversation.length," messages"]})]}),a.jsx(qd,{orientation:"vertical",className:"h-3"}),a.jsxs("div",{children:[x.content.length," chars"]})]}),a.jsx(Pr,{children:N&&a.jsxs(ot.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:[a.jsx(qd,{className:"my-2"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ns,{className:"h-32 rounded border bg-muted/30 p-2",children:a.jsxs("pre",{className:"text-xs font-mono whitespace-pre-wrap",children:[x.content.substring(0,500),x.content.length>500&&"..."]})}),!_&&a.jsx(fe,{size:"sm",className:"w-full",onClick:()=>y(x.id),children:"Switch to this version"})]})]})})]})})},x.id)})})})}),a.jsx(zd,{open:A,onOpenChange:f,children:a.jsxs(_l,{children:[a.jsxs(Il,{children:[a.jsx(Pl,{children:"Delete Version"}),a.jsxs(Vd,{children:['Are you sure you want to delete "',m==null?void 0:m.versionTitle,'"? This action cannot be undone.']})]}),a.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 rounded-md p-3 flex items-start gap-2",children:[a.jsx(ts,{className:"w-4 h-4 text-destructive mt-0.5 flex-shrink-0"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"You will lose all conversation history and content associated with this version."})]}),a.jsxs(YT,{children:[a.jsx(fe,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),a.jsx(fe,{variant:"destructive",onClick:j,children:"Delete Version"})]})]})})]})}function kTe({prompt:e,sourceToolName:t,onContract:n,onCopy:r,onView:s}){var Ut,Wn,Nn,en,wt,Gn,Bn,ir,rs,St,pr,Vr,nr;const{updatePromptConversation:i,clearDestination:o,tailorPromptForDestination:c,createPromptVersion:l,getActiveVersion:d,getVersionHistory:u}=ma(),{entries:h}=pa(),{currentProject:A}=js();Us();const f=((Wn=(Ut=e.context)==null?void 0:Ut.framework)==null?void 0:Wn.name)||"Custom Prompt",m=((en=(Nn=e.context)==null?void 0:Nn.stage)==null?void 0:en.name)||"Library",g=((Gn=(wt=e.context)==null?void 0:wt.tool)==null?void 0:Gn.name)||((ir=(Bn=e.context)==null?void 0:Bn.customPrompt)==null?void 0:ir.title)||t||"Custom Prompt",b=((St=(rs=e.context)==null?void 0:rs.framework)==null?void 0:St.id)||"design-thinking",y=rm(b),j=d0(b,"framework"),x=w.useRef(null),C=w.useRef(null),S=w.useRef(0),[_,N]=w.useState(()=>e.conversation&&e.conversation.length>0?(console.log("Loading conversation from database:",e.conversation.length,"messages"),e.conversation):e.output?[{id:"initial",type:"ai",content:e.output,timestamp:new Date(e.timestamp)}]:[]),[L,P]=w.useState(""),[F,I]=w.useState(!1),[T,Q]=w.useState(!1),[D,M]=w.useState(!1),[U,H]=w.useState(!0),[$,R]=w.useState("versions"),[Y,X]=w.useState(null),[q,K]=w.useState(!1),[J,W]=w.useState(e.content),[ne,ae]=w.useState(e.content),ce=w.useMemo(()=>{const Re=u(e.id);return Y?Re.find(mt=>mt.id===Y):d(e.id)},[Y,e.id,u,d]),Ae=(ce==null?void 0:ce.content)||ne,pe=(ce==null?void 0:ce.conversation)||_,be=w.useMemo(()=>Ae.length>200?`${Ae.slice(0,200)}...`:Ae,[Ae]),[Ne,Pe]=w.useState([{id:"original",title:"Original Prompt",content:e.content,timestamp:new Date(e.timestamp),conversation:_,isActive:!0}]),[xe,ue]=w.useState("original"),[yt,ht]=w.useState(!1),[Ct,Me]=w.useState(!1),[kt,ct]=w.useState(!1),[Nt,bt]=w.useState(!1),An=w.useCallback(()=>{var Re;(Re=x.current)==null||Re.scrollIntoView({behavior:"smooth"})},[]);w.useEffect(()=>{An()},[_,An]);const $t=w.useCallback(async Re=>{if(!Re.length||!e.id){console.log(" Skipping conversation save: no messages or prompt ID",{messagesLength:Re.length,promptId:e.id});return}console.log(" Saving conversation to database:",{promptId:e.id,messagesCount:Re.length,messageTypes:Re.map(mt=>mt.type)});try{const mt=Re.map(wn=>({id:wn.id,type:wn.type,content:wn.content,timestamp:wn.timestamp.toISOString()}));console.log(" Conversation data to save:",mt.length,"messages"),console.log(" Using ai_response field for conversation storage...");const Ht=JSON.stringify({type:"conversation",messages:mt}),{error:sn}=await rt.from("prompts").update({ai_response:Ht,updated_at:new Date().toISOString()}).eq("id",e.id);if(sn)throw console.error(" Failed to save conversation:",sn),sn;console.log(" Conversation saved successfully to ai_response field")}catch(mt){console.error(" Failed to save conversation:",mt)}},[e.id]),Rt=w.useCallback(async()=>{if(!(!A||T)){Q(!0);try{const Re="After conversation",mt=_.length>0?`Updated through ${_.length} conversation messages`:"Manual save",Ht=await l(e.id,Re,ne,e.variables,_,mt);Ue.success("Prompt version saved!",{description:`"${Re}" has been saved and is now active`});const sn={id:Ht.id,title:Ht.versionTitle,content:Ht.content,timestamp:new Date(Ht.createdAt),conversation:Ht.conversation,isActive:!0};Pe(wn=>[...wn.map(ur=>({...ur,isActive:!1})),sn]),ue(Ht.id)}catch(Re){console.error("Failed to save prompt version:",Re),Ue.error("Failed to save prompt version",{description:Re instanceof Error?Re.message:"An unexpected error occurred"})}finally{Q(!1)}}},[A,ne,e,T,_,l]),Le=w.useCallback(Re=>{const mt=Ne.find(Ht=>Ht.id===Re);mt&&(Pe(Ht=>Ht.map(sn=>({...sn,isActive:sn.id===Re}))),ue(Re),ae(mt.content),W(mt.content),N(mt.conversation),Ue.success(`Switched to ${mt.title}`,{description:"Chat history and prompt content updated"}))},[Ne]);w.useCallback(()=>{o(e.id),Ue.success("Destination cleared",{description:"Prompt is now in default format"})},[e.id,o]),w.useCallback(()=>{ht(!0)},[]);const Ke=w.useCallback(async Re=>{var mt;Me(!0);try{console.log(" Starting tailoring process for:",Re);const Ht=await c(e.id,Re);if(console.log(" Tailoring result:",Ht),Ht.success){let sn=0;const wn=5,jr=async()=>{var ss,Xs;sn++,console.log(` Attempt ${sn}: Checking for updated prompt`);const ar=ma.getState().prompts.find(qr=>qr.id===e.id);if(console.log(" Updated prompt:",ar),console.log(" Destination data:",ar==null?void 0:ar.destination),(ss=ar==null?void 0:ar.destination)!=null&&ss.tailoredPrompt||sn>=wn){const qr=(Xs=ar==null?void 0:ar.destination)==null?void 0:Xs.tailoredPrompt;if(console.log(" Tailored prompt to use:",qr==null?void 0:qr.substring(0,100)),qr){console.log(" Starting AI conversation with tailored prompt");const bo={id:"tailoring-typing",type:"ai",content:"...",timestamp:new Date};N(ks=>[...ks,bo]);try{console.log(" Calling supabase AI function...");const{data:ks,error:yi}=await rt.functions.invoke("ai-conversation",{body:{userMessage:qr,initialPrompt:e.content,conversationHistory:[],projectId:A==null?void 0:A.id,knowledgeContext:h.filter(qi=>qi.project_id===(A==null?void 0:A.id)),promptContext:{framework:f,stage:m,tool:g,industry:e.industry,destination:Re.destination,userIntent:Re.userIntent}}});if(console.log(" AI function response:",{data:ks,error:yi}),N(qi=>qi.filter(va=>va.id!=="tailoring-typing")),yi)throw console.error(" AI function error:",yi),new Error(yi.message||"AI response failed");console.log(" AI response received, creating analyzed message bubbles...");const Ja={id:`tailored-response-${Date.now()}`,type:"ai",content:ks.response,timestamp:new Date};N(qi=>[...qi,Ja]),console.log(" Tailored Response:",{length:ks.response.length})}catch(ks){console.error("AI response failed:",ks),N(yi=>yi.filter(Ja=>Ja.id!=="tailoring-typing")),Ue.error("Failed to generate tailored response",{description:"Please try again or check your connection"})}}else Ue.error("Tailoring data not available",{description:"Please try the tailoring process again"});setTimeout(An,100)}else sn<wn?setTimeout(jr,300):Ue.error("Failed to retrieve tailored prompt",{description:"Please try the tailoring process again"})};setTimeout(jr,200),Ue.success(`Generating tailored response for ${Re.destination}...`),ht(!1)}else Ue.error("Failed to tailor prompt for destination",{description:((mt=Ht.errors)==null?void 0:mt.join(", "))||"Unknown error occurred"})}catch(Ht){console.error("Destination tailoring failed:",Ht),Ue.error("Failed to tailor prompt for destination")}finally{Me(!1)}},[e.id,e.content,c,N,An,A==null?void 0:A.id,h,e.context,e.industry]),it=w.useCallback(()=>{ht(!1)},[]);w.useEffect(()=>{if(console.log(" Conversation effect triggered:",{currentLength:_.length,lastLength:S.current,promptId:e.id,hasMessages:_.length>0}),S.current!==_.length||_.length===0)if(console.log(" Conversation changed, updating store and saving..."),S.current=_.length,i(e.id,_),Pe(Re=>Re.map(mt=>mt.isActive?{...mt,conversation:[..._]}:mt)),_.length>0&&e.id){console.log(" Setting up database save timer for",_.length,"messages");const Re=setTimeout(()=>{console.log(" Timer triggered, calling saveConversationToDatabase"),$t(_)},1e3);return()=>clearTimeout(Re)}else console.log(" Skipping database save: no messages or prompt ID");else console.log(" No conversation changes detected, skipping save")},[_,e.id,i,$t]);const pt=async()=>{var Ht;if(!L.trim()||F)return;const Re={id:`user-${Date.now()}`,type:"user",content:L,timestamp:new Date};N(sn=>[...sn,Re]),P(""),I(!0),M(!0);const mt={id:"typing-indicator",type:"ai",content:"...",timestamp:new Date};N(sn=>[...sn,mt]);try{const{data:sn,error:wn}=await rt.functions.invoke("ai-conversation",{body:{userMessage:Re.content,initialPrompt:ne,conversationHistory:_.filter(ur=>ur.id!=="initial"),projectId:A==null?void 0:A.id,knowledgeContext:h.filter(ur=>ur.project_id===(A==null?void 0:A.id)),frameworkContext:{framework:f,stage:m,tool:g}}});if(wn)throw wn;if(!(sn!=null&&sn.success))throw new Error((sn==null?void 0:sn.error)||"Failed to generate AI response");N(ur=>ur.filter(ar=>ar.id!=="typing-indicator"));const jr={id:`ai-${Date.now()}`,type:"ai",content:sn.response,timestamp:new Date};N(ur=>[...ur,jr]),console.log(" Follow-up Response:",{length:sn.response.length})}catch(sn){console.error("Error generating follow-up response:",sn),N(jr=>jr.filter(ur=>ur.id!=="typing-indicator"));const wn={id:`ai-error-${Date.now()}`,type:"ai",content:`I apologize, but I encountered an error while processing your request. Please try again or rephrase your question.

Error: ${sn instanceof Error?sn.message:"Unknown error"}`,timestamp:new Date};N(jr=>[...jr,wn])}finally{I(!1),M(!1),(Ht=C.current)==null||Ht.focus()}},At=async Re=>{const mt=_.findIndex(wn=>wn.id===Re);if(mt===-1)return;const Ht=_[mt-1];if(!Ht||Ht.type!=="user")return;N(wn=>wn.filter(jr=>jr.id!==Re)),I(!0);const sn={id:"typing-indicator",type:"ai",content:"...",timestamp:new Date};N(wn=>[...wn,sn]);try{const{data:wn,error:jr}=await rt.functions.invoke("ai-conversation",{body:{userMessage:Ht.content,initialPrompt:ne,conversationHistory:_.slice(0,mt-1),projectId:A==null?void 0:A.id,knowledgeContext:h.filter(ar=>ar.project_id===(A==null?void 0:A.id)),frameworkContext:{framework:f,stage:m,tool:g}}});if(jr)throw jr;if(!(wn!=null&&wn.success))throw new Error((wn==null?void 0:wn.error)||"Failed to regenerate response");N(ar=>ar.filter(ss=>ss.id!=="typing-indicator"));const ur={id:`ai-regen-${Date.now()}`,type:"ai",content:wn.response,timestamp:new Date};N(ar=>ar.map(ss=>ss.id===Re?ur:ss)),console.log(" Regenerated Response:",{length:wn.response.length})}catch(wn){console.error("Error regenerating message:",wn),N(jr=>jr.filter(ur=>ur.id!=="typing-indicator")),Ue.error("Failed to regenerate response",{description:wn instanceof Error?wn.message:"Please try again"})}finally{I(!1)}},rn=Re=>{navigator.clipboard.writeText(Re),Ue.success("Message copied to clipboard")},vt=()=>{K(!0),W(ne)},Bt=()=>{ae(J),K(!1),Pe(mt=>mt.map(Ht=>Ht.isActive?{...Ht,content:J,timestamp:new Date}:Ht)),N([]);const Re={id:`context-${Date.now()}`,type:"ai",content:"I've updated my context with your edited prompt. The new prompt context is now active for our conversation. Feel free to ask me questions or request modifications based on this updated context.",timestamp:new Date};setTimeout(()=>{N([Re])},100)},Xt=()=>{W(ne),K(!1)},bn=Re=>{Re.target===Re.currentTarget&&(Re.preventDefault(),Re.stopPropagation(),n())};w.useEffect(()=>{const Re=mt=>{var Ht;mt.key==="Escape"&&n(),!mt.ctrlKey&&!mt.metaKey&&!mt.altKey&&mt.key.length===1&&((Ht=C.current)==null||Ht.focus())};return document.addEventListener("keydown",Re),()=>{document.removeEventListener("keydown",Re),document.body.style.overflow="",document.body.style.pointerEvents=""}},[n]),w.useEffect(()=>()=>{setTimeout(()=>{document.body.style.overflow="",document.body.style.pointerEvents="",document.querySelectorAll('[data-modal="expanded-prompt-overlay"]').forEach(mt=>{!mt.closest("[data-react-root]")&&mt.parentElement===document.body&&mt.remove()})},0)},[]);const Qt=Re=>{Re.key==="Enter"&&!Re.shiftKey&&(Re.preventDefault(),pt())},on=w.memo(({message:Re})=>{const mt=Re.type==="user",Ht=Re.content==="..."&&Re.id==="typing-indicator";return a.jsxs(ot.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:$e("group flex gap-3 py-4 px-6 transition-all duration-200",mt?"justify-end":"justify-start"),children:[!mt&&a.jsx("div",{className:$e("w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",j[0]),children:a.jsx(Rg,{className:"w-4 h-4 text-white"})}),a.jsx("div",{className:$e("max-w-[70%] rounded-2xl px-4 py-3 shadow-sm",mt?"bg-primary text-primary-foreground ml-auto":"bg-muted"),children:Ht?a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-current animate-pulse"}),a.jsx("div",{className:"w-2 h-2 rounded-full bg-current animate-pulse",style:{animationDelay:"0.2s"}}),a.jsx("div",{className:"w-2 h-2 rounded-full bg-current animate-pulse",style:{animationDelay:"0.4s"}})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"prose prose-sm max-w-none dark:prose-invert",children:a.jsx("pre",{className:"whitespace-pre-wrap font-sans leading-relaxed",children:q0(Re.content)})}),a.jsxs("div",{className:$e("flex items-center gap-1 mt-2 opacity-0 group-hover:opacity-100 transition-opacity",mt?"justify-start":"justify-end"),children:[a.jsx(Sl,{children:a.jsxs(La,{children:[a.jsx(Ma,{asChild:!0,children:a.jsx(fe,{size:"sm",variant:"ghost",onClick:()=>rn(Re.content),className:"h-6 w-6 p-0",children:a.jsx(Ii,{className:"w-3 h-3"})})}),a.jsx(da,{children:"Copy message"})]})}),!mt&&a.jsx(Sl,{children:a.jsxs(La,{children:[a.jsx(Ma,{asChild:!0,children:a.jsx(fe,{size:"sm",variant:"ghost",onClick:()=>At(Re.id),disabled:F,className:"h-6 w-6 p-0",children:a.jsx(kl,{className:"w-3 h-3"})})}),a.jsx(da,{children:"Regenerate response"})]})})]})]})}),mt&&a.jsx("div",{className:"w-8 h-8 rounded-full bg-primary flex items-center justify-center flex-shrink-0 mt-1",children:a.jsx(Qd,{className:"w-4 h-4 text-primary-foreground"})})]})}),It=a.jsxs(ot.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed z-[9999] bg-background/95 backdrop-blur-sm","data-modal":"expanded-prompt-overlay",style:{top:"86px",left:"0px",width:"100vw",height:"calc(100vh - 86px)"},onClick:bn,children:[a.jsx(ot.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.3,ease:"easeOut"},className:"w-full h-full",onClick:Re=>{Re.preventDefault(),Re.stopPropagation()},children:a.jsxs("div",{className:"h-full flex bg-background",children:[a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsxs("div",{className:$e("flex items-center justify-between p-4 border-b",j[0].replace("bg-","border-")),style:{background:`linear-gradient(135deg, ${y.background.primary} 0%, ${y.background.secondary} 100%)`},children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:$e("w-10 h-10 rounded-full flex items-center justify-center",j[0]),children:a.jsx(gr,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-lg text-white",children:"AI Chat Assistant"}),a.jsxs("p",{className:"text-sm text-white/80",children:[f,"  ",m,"  ",g]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[a.jsx(_e,{variant:"glass-dark",children:f}),a.jsx(_e,{variant:"glass-dark",children:m}),a.jsx(_e,{variant:"glass-dark",children:g})]}),a.jsx(qd,{orientation:"vertical",className:"h-6 bg-white/20"}),a.jsx(Sl,{children:a.jsxs(La,{children:[a.jsx(Ma,{asChild:!0,children:a.jsx(fe,{size:"sm",variant:"ghost",onClick:()=>H(!U),className:"text-white hover:bg-white/20",children:U?a.jsx(Xue,{className:"w-4 h-4"}):a.jsx(Zue,{className:"w-4 h-4"})})}),a.jsxs(da,{children:[U?"Hide":"Show"," prompt versions"]})]})}),a.jsx(fe,{size:"sm",variant:"ghost",onClick:n,className:"text-white hover:bg-white/20",title:"Close chat",children:a.jsx(_i,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"flex-1 flex min-h-0",children:[a.jsxs("div",{className:$e("flex flex-col min-h-0 transition-all duration-300",U?"flex-1":"w-full"),children:[a.jsx("div",{className:"border-b bg-muted/30 px-4 py-2",children:a.jsx(Ka,{value:$,onValueChange:Re=>R(Re),className:"w-full",children:a.jsxs(ga,{className:"grid w-full max-w-lg grid-cols-3",children:[a.jsxs(xn,{value:"prompt",className:"text-sm",children:[a.jsx(In,{className:"w-4 h-4 mr-2"}),"View Prompt"]}),a.jsxs(xn,{value:"chat",className:"text-sm",children:[a.jsx(Yu,{className:"w-4 h-4 mr-2"}),"Chat"]}),a.jsxs(xn,{value:"versions",className:"text-sm",children:[a.jsx(Cg,{className:"w-4 h-4 mr-2"}),"Versions"]})]})})}),$==="prompt"&&a.jsx(ns,{className:"flex-1 p-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto space-y-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-6",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(In,{className:"w-5 h-5 text-primary"}),a.jsx("h3",{className:"font-semibold text-lg",children:"AI-Generated Prompt"})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"This is the meta-prompt that was generated to create your deliverable"})]}),a.jsxs(fe,{size:"sm",variant:"outline",onClick:()=>{navigator.clipboard.writeText(Ae),Ue.success("AI Prompt copied to clipboard")},children:[a.jsx(Ii,{className:"w-3 h-3 mr-2"}),"Copy Prompt"]})]}),ce&&a.jsx("div",{className:"mb-4 p-3 bg-muted/30 border rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(_e,{variant:ce.isActive?"default":"secondary",children:["v",ce.versionNumber]}),a.jsx("span",{className:"text-sm font-medium",children:ce.versionTitle}),ce.isActive&&a.jsxs(_e,{variant:"outline",className:"text-xs",children:[a.jsx(br,{className:"w-3 h-3 mr-1"}),"Active"]})]}),a.jsxs(fe,{size:"sm",variant:"ghost",onClick:()=>R("versions"),className:"text-xs",children:[a.jsx(Cg,{className:"w-3 h-3 mr-1"}),"View All Versions"]})]})}),a.jsx("div",{className:"bg-muted/50 rounded-lg p-6 border",children:a.jsx("pre",{className:"whitespace-pre-wrap font-mono text-sm leading-relaxed text-foreground",children:Ae})}),(e.executionResult||e.executionError)&&a.jsxs("div",{className:"mt-6 pt-6 border-t",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(gr,{className:"w-5 h-5 text-primary"}),a.jsx("h3",{className:"font-semibold text-lg",children:"Execution Result"})]}),e.executionError?a.jsx("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(ts,{className:"w-5 h-5 text-destructive flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-sm text-destructive mb-1",children:"Execution Error"}),a.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:e.executionError})]})]})}):a.jsx("div",{className:"bg-background rounded-lg p-6 border",children:a.jsx("pre",{className:"whitespace-pre-wrap font-sans text-sm leading-relaxed text-foreground",children:q0(e.executionResult||"")})})]}),a.jsxs("div",{className:"mt-6 pt-6 border-t",children:[a.jsx("h4",{className:"font-semibold text-sm mb-3",children:"Details"}),a.jsxs("dl",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("dt",{className:"text-muted-foreground",children:"Prompt Length:"}),a.jsxs("dd",{className:"font-medium",children:[ne.length," characters"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("dt",{className:"text-muted-foreground",children:"Generated:"}),a.jsx("dd",{className:"font-medium",children:new Date(e.timestamp).toLocaleString()})]}),e.executionResult&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("dt",{className:"text-muted-foreground",children:"Result Length:"}),a.jsxs("dd",{className:"font-medium",children:[e.executionResult.length," characters"]})]})]})]})]})}),$==="chat"&&a.jsxs(a.Fragment,{children:[ce&&a.jsx("div",{className:"px-4 py-2 bg-muted/30 border-b",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(_e,{variant:ce.isActive?"default":"secondary",className:"text-xs",children:["v",ce.versionNumber]}),a.jsx("span",{className:"text-xs font-medium",children:ce.versionTitle}),ce.isActive&&a.jsxs(_e,{variant:"outline",className:"text-xs",children:[a.jsx(br,{className:"w-3 h-3 mr-1"}),"Active"]})]}),a.jsxs(fe,{size:"sm",variant:"ghost",onClick:()=>R("versions"),className:"h-6 text-xs",children:[a.jsx(Cg,{className:"w-3 h-3 mr-1"}),"View All Versions"]})]})}),a.jsx(ns,{className:"flex-1 px-0",children:a.jsx("div",{className:"min-h-full flex flex-col justify-end",children:pe.length===0?a.jsx("div",{className:"flex items-center justify-center h-full py-20",children:a.jsxs("div",{className:"text-center text-muted-foreground max-w-md",children:[a.jsx("div",{className:$e("w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",j[1]),children:a.jsx(Rg,{className:$e("w-8 h-8",j[2])})}),a.jsx("h4",{className:"font-semibold mb-2",children:"Ready to chat!"}),a.jsxs("p",{className:"text-sm leading-relaxed",children:["Your ",g," prompt is ready. Start a conversation to refine and improve it."]}),a.jsxs("div",{className:"flex flex-wrap gap-2 justify-center mt-4",children:[a.jsx(fe,{size:"sm",variant:"outline",onClick:()=>P("Can you make this more detailed?"),className:"text-xs",children:"Make it more detailed"}),a.jsx(fe,{size:"sm",variant:"outline",onClick:()=>P("Simplify this for beginners"),className:"text-xs",children:"Simplify for beginners"}),a.jsx(fe,{size:"sm",variant:"outline",onClick:()=>P("Add more examples"),className:"text-xs",children:"Add examples"})]})]})}):a.jsxs("div",{className:"space-y-0",children:[!_.some(Re=>Re.id==="initial")&&a.jsx("div",{className:"bg-muted/50 border-b px-6 py-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:$e("w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",j[0]),children:a.jsx(In,{className:"w-4 h-4 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"font-semibold text-sm",children:"Initial Prompt"}),a.jsx(_e,{variant:"outline",className:"text-xs",children:g})]}),a.jsx("div",{className:"bg-background rounded-lg p-3 text-sm font-mono text-muted-foreground whitespace-pre-wrap leading-relaxed",children:q0(be)})]})]})}),pe.map(Re=>a.jsx(on,{message:Re},Re.id)),a.jsx("div",{ref:x})]})})}),a.jsxs("div",{className:"p-4 border-t bg-background",children:[a.jsxs("div",{className:"flex gap-3 items-end",children:[a.jsx("div",{className:"flex-1",children:a.jsx(ln,{ref:C,placeholder:"Ask AI to refine, expand, or modify the prompt...",value:L,onChange:Re=>P(Re.target.value),onKeyDown:Qt,disabled:F,className:"min-h-[44px] text-sm resize-none"})}),a.jsx(fe,{onClick:pt,disabled:!L.trim()||F,className:$e("h-11 w-11 p-0",j[0]),title:"Send message",children:F?a.jsx(Cr,{className:"w-4 h-4 animate-spin"}):a.jsx(hp,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex items-center justify-between mt-3",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(fe,{size:"sm",variant:"ghost",onClick:Rt,disabled:T,className:"text-xs",children:[a.jsx(F5,{className:"w-3 h-3 mr-1"}),T?"Saving...":"Save Version"]})}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Press Enter to send  Shift+Enter for new line"})]})]})]}),$==="versions"&&a.jsx(jTe,{promptId:e.id,onVersionSelect:Re=>{X(Re.id),R("prompt")},onVersionSwitch:Re=>{Ue.success(`Switched to ${Re.versionTitle} as active version`),X(Re.id)},onSaveNewVersion:()=>{R("chat"),Rt()},selectedVersionId:Y})]}),a.jsx(Pr,{children:U&&a.jsxs(ot.div,{initial:{width:0,opacity:0},animate:{width:"400px",opacity:1},exit:{width:0,opacity:0},transition:{duration:.3},className:"border-l bg-muted/50 flex flex-col min-h-0",children:[a.jsx("div",{className:"p-4 border-b",children:a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Cg,{className:"w-4 h-4 text-muted-foreground"}),a.jsx("span",{className:"font-semibold text-sm",children:"Prompt Versions"})]}),a.jsx(_e,{variant:"outline",className:"text-xs",children:Ne.length})]})}),a.jsx(ns,{className:"flex-1 p-4",children:a.jsxs("div",{className:"space-y-3",children:[Ne.map(Re=>a.jsxs(De,{className:$e("p-3 cursor-pointer transition-all duration-200 hover:shadow-md",Re.isActive?"ring-2 ring-offset-2 border-2":"hover:border-muted-foreground/30"),style:{backgroundColor:Re.isActive?y.background.tertiary:"transparent",borderColor:Re.isActive?y.border.primary:void 0,...Re.isActive&&{"--tw-ring-color":y.border.primary,"--tw-ring-offset-shadow":`0 0 0 2px ${y.background.tertiary}`,"--tw-ring-shadow":`0 0 0 calc(2px + 2px) ${y.border.primary}`}},onClick:()=>Le(Re.id),children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:Re.isActive?y.background.primary:"#94a3b8"}}),a.jsx("span",{className:"font-medium text-sm",style:{color:Re.isActive?y.text.secondary:void 0},children:Re.title})]}),Re.isActive&&a.jsx(_e,{variant:"secondary",className:"text-xs",style:{backgroundColor:y.background.primary,color:y.text.primary},children:"Active"})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-3 text-xs text-muted-foreground",children:[a.jsx(Jo,{className:"w-3 h-3"}),a.jsx("span",{children:Re.timestamp.toLocaleString()}),Re.conversation.length>0&&a.jsxs(a.Fragment,{children:[a.jsx(qd,{orientation:"vertical",className:"h-3"}),a.jsx(Yu,{className:"w-3 h-3"}),a.jsxs("span",{children:[Re.conversation.length," messages"]})]})]}),a.jsx("div",{className:"text-xs text-muted-foreground line-clamp-3 leading-relaxed",children:Re.content.length>120?`${Re.content.slice(0,120)}...`:Re.content}),Re.isActive&&a.jsx("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t",children:q?a.jsxs(a.Fragment,{children:[a.jsxs(fe,{size:"sm",variant:"ghost",onClick:mt=>{mt.stopPropagation(),Xt()},className:"h-6 px-2 text-xs",children:[a.jsx(_i,{className:"w-3 h-3 mr-1"}),"Cancel"]}),a.jsxs(fe,{size:"sm",onClick:mt=>{mt.stopPropagation(),Bt()},className:"h-6 px-2 text-xs",style:{backgroundColor:y.background.primary,color:y.text.primary},children:[a.jsx(Od,{className:"w-3 h-3 mr-1"}),"Save"]})]}):a.jsxs(fe,{size:"sm",variant:"ghost",onClick:mt=>{mt.stopPropagation(),vt()},className:"h-6 px-2 text-xs",children:[a.jsx(Xu,{className:"w-3 h-3 mr-1"}),"Edit"]})})]},Re.id)),q&&a.jsxs(De,{className:"p-3",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Xu,{className:"w-4 h-4 text-muted-foreground"}),a.jsx("span",{className:"font-medium text-sm",children:"Edit Active Prompt"})]}),a.jsx(Qr,{value:J,onChange:Re=>W(Re.target.value),className:"w-full min-h-[200px] resize-none text-sm font-mono leading-relaxed",placeholder:"Edit your prompt content..."})]})]})})]})})]})]}),a.jsx(Pr,{children:yt&&a.jsx(ot.div,{initial:{x:384,opacity:0},animate:{x:0,opacity:1},exit:{x:384,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"absolute right-0 top-0 w-96 h-full bg-background border-l border-border shadow-xl z-[51]",children:a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-border",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[a.jsx(Mr,{className:"w-5 h-5"}),"Choose Destination"]}),a.jsx(fe,{size:"sm",variant:"ghost",onClick:it,children:a.jsx(_i,{className:"w-4 h-4"})})]}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Optimize this prompt for your target platform"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:a.jsx(C4e,{onDestinationSelect:Ke,onCancel:it,defaultContext:{originalPrompt:e.content,variables:e.variables,metadata:{framework:f,stage:m,tool:g,industry:e.industry,teamSize:(pr=e.context.enhancedContext)==null?void 0:pr.teamSize,timeConstraints:(Vr=e.context.enhancedContext)==null?void 0:Vr.timeConstraints,experience:(nr=e.context.enhancedContext)==null?void 0:nr.experience}},isLoading:Ct})})]})})})]})}),a.jsx(Pr,{children:kt&&a.jsx(N4e,{prompt:e,isOpen:kt,onClose:()=>ct(!1)})}),a.jsx(Pr,{children:Nt&&a.jsx(I4e,{isOpen:Nt,onClose:()=>bt(!1),projectId:A==null?void 0:A.id})})]});return Fl.createPortal(It,document.body)}const NX=w.memo(kTe),STe=e=>{const t=e.indexOf("=== PROJECT KNOWLEDGE BASE ==="),n=e.indexOf("=== END KNOWLEDGE BASE ===");return t!==-1&&n!==-1?e.substring(n+26).replace(/^[\s\n]*Based on the above project knowledge, generate customized instructions for:[\s\n]*/,"").replace(/^[\s\n]+/,"").trim():e},NTe=w.memo(({data:e,selected:t,id:n})=>{var I,T,Q,D,M,U,H,$,R,Y,X,q,K,J,W,ne,ae,ce,Ae;const{toast:r}=ii(),s=Vi(),{setCurrentPrompt:i}=ma(),{expandedPromptId:o,setExpandedPromptId:c}=Us(),{prompt:l,isActive:d,onSwitchToPromptTab:u,sourceToolName:h}=e,{handlePositions:A,updateHandlePosition:f}=Zv(n),m=l.conversation&&l.conversation.length>0?(I=l.conversation.filter(pe=>pe.type==="ai").pop())==null?void 0:I.content:l.output;STe(l.content);const g=l.content.includes("=== PROJECT KNOWLEDGE BASE ==="),b=o===l.id,[y,j]=w.useState("result"),x=!!l.executionError,C=!!l.executionResult,S=l.executionResult||m||"",_=pe=>{pe.stopPropagation(),console.log("Expanding prompt node:",l.id),c(l.id)},N=()=>{console.log("Contracting prompt node:",l.id),c(null)},L=pe=>{pe.stopPropagation();const be=y==="prompt"?l.content:S;navigator.clipboard.writeText(be),r({title:"Copied to clipboard",description:y==="prompt"?"AI prompt has been copied to your clipboard.":"Generated result has been copied to your clipboard."})},P=()=>{i(l),u&&u()},F=pe=>{if(pe.stopPropagation(),l.structured_prompt_id)try{s(`/library/${l.structured_prompt_id}`),r({title:"Opening in Library",description:"Edit your prompt with card-based sections."})}catch(be){console.error("Navigation error:",be),r({title:"Navigation Failed",description:"Could not open the library editor. Please try again.",variant:"destructive"})}else r({title:"Not Available",description:"This prompt doesn't have a structured version yet. Only AI-generated prompts can be edited in the library.",variant:"destructive"})};return a.jsxs(a.Fragment,{children:[a.jsx(vF,{selected:t,nodeType:"prompt",initialWidth:1250,initialHeight:"auto",minWidth:1250,maxWidth:1600,minHeight:300,maxHeight:600,nodeId:n,children:a.jsxs(ot.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.2},children:[a.jsx(Ds,{id:"target-1",type:"target",initialPosition:A["target-1"]||"left",onPositionChange:pe=>f("target-1",pe),nodeId:n}),a.jsx(Ds,{id:"target-2",type:"target",initialPosition:A["target-2"]||"top",onPositionChange:pe=>f("target-2",pe),nodeId:n}),a.jsxs(De,{className:`
        w-full p-6 transition-all duration-200 relative
        ${t?"ring-2 ring-primary shadow-lg border-2 border-primary":"hover:shadow-md"}
        ${d?"border-primary bg-primary/5":""}
        ${m?"border-solid border-success bg-gradient-to-br from-primary/5 to-success/5":"border-dashed border-2"}
        shadow-xl
      `,children:[a.jsx(fe,{size:"sm",variant:"ghost",onClick:_,className:"absolute top-2 right-2 w-8 h-8 p-0 z-10",title:"Expand to full screen",children:a.jsx(Zde,{className:"w-4 h-4"})}),a.jsxs("div",{className:"space-y-3 flex flex-col h-full",children:[a.jsx("div",{className:"flex items-start justify-between flex-shrink-0",children:a.jsxs("div",{className:"flex-1 mr-10",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Rg,{className:"w-6 h-6 text-success"}),a.jsx("h3",{className:"font-bold text-lg",children:"AI Response"})]}),a.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:[h||((Q=(T=l.context)==null?void 0:T.tool)==null?void 0:Q.name)||((M=(D=l.context)==null?void 0:D.customPrompt)==null?void 0:M.title)||"Custom Prompt",((H=(U=l.context)==null?void 0:U.stage)==null?void 0:H.name)&&`  ${l.context.stage.name}`,l.timestamp&&a.jsx("span",{className:"ml-2 text-xs opacity-70",children:new Date(l.timestamp).toLocaleString()})]})]})}),a.jsxs("div",{className:"flex items-center gap-3 flex-wrap flex-shrink-0",children:[((R=($=l.context)==null?void 0:$.framework)==null?void 0:R.name)&&a.jsx(_e,{variant:"outline",className:"text-sm px-3 py-1",children:l.context.framework.name}),((X=(Y=l.context)==null?void 0:Y.stage)==null?void 0:X.name)&&a.jsx(_e,{variant:"secondary",className:"text-sm px-3 py-1",children:l.context.stage.name}),(((K=(q=l.context)==null?void 0:q.tool)==null?void 0:K.name)||((W=(J=l.context)==null?void 0:J.customPrompt)==null?void 0:W.title))&&a.jsx(_e,{variant:"default",className:"text-sm px-3 py-1",children:((ae=(ne=l.context)==null?void 0:ne.tool)==null?void 0:ae.name)||((Ae=(ce=l.context)==null?void 0:ce.customPrompt)==null?void 0:Ae.title)}),g&&a.jsxs(_e,{variant:"outline",className:"text-sm px-2 py-1 bg-blue-50 border-blue-200 text-blue-700",children:[a.jsx(xo,{className:"w-3 h-3 mr-1"}),"Knowledge Base"]})]}),a.jsxs(Ka,{value:y,onValueChange:pe=>j(pe),className:"w-full flex-1 flex flex-col",children:[a.jsxs(ga,{className:"grid w-full grid-cols-2",children:[a.jsxs(xn,{value:"prompt",className:"text-xs",children:[a.jsx(In,{className:"w-3 h-3 mr-1"}),"AI Prompt"]}),a.jsxs(xn,{value:"result",className:"text-xs",children:[x?a.jsx(ts,{className:"w-3 h-3 mr-1"}):a.jsx(gr,{className:"w-3 h-3 mr-1"}),"Result"]})]}),a.jsx(jn,{value:"prompt",className:"flex-1 overflow-hidden mt-3",children:a.jsx("div",{className:"bg-muted/30 border p-3 rounded text-xs h-full overflow-y-auto max-h-80",children:a.jsx("pre",{className:"text-foreground whitespace-pre-wrap leading-relaxed font-mono",children:l.content})})}),a.jsx(jn,{value:"result",className:"flex-1 overflow-hidden mt-3",children:x?a.jsx("div",{className:"bg-destructive/10 border border-destructive/20 p-3 rounded text-xs space-y-2 max-h-80 overflow-y-auto",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(ts,{className:"w-4 h-4 text-destructive flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-destructive mb-1",children:"Execution Failed"}),a.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:l.executionError})]})]})}):C||m?a.jsxs("div",{className:"bg-success/10 border border-success/20 p-3 rounded text-xs space-y-2 max-h-80 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Rg,{className:"w-4 h-4 text-success"}),a.jsx("span",{className:"font-semibold text-success",children:"Generated Result"}),a.jsx(_e,{variant:"default",className:"text-xs bg-success px-2 py-0.5",children:l.conversation&&l.conversation.length>1?"Updated":"Generated"})]}),a.jsx("pre",{className:"text-foreground whitespace-pre-wrap leading-relaxed",children:q0(S)})]}):a.jsxs("div",{className:"bg-muted/20 border border-dashed border-muted-foreground/30 p-4 rounded text-xs flex flex-col justify-center items-center h-32",children:[a.jsx(Rg,{className:"w-6 h-6 text-muted-foreground/50 mb-2"}),a.jsx("span",{className:"text-muted-foreground",children:"No result yet"}),a.jsx("span",{className:"text-xs text-muted-foreground/70 mt-1",children:"Generating..."})]})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(fe,{size:"sm",variant:"outline",onClick:L,className:"h-8 px-3",title:"Copy AI response",children:[a.jsx(Ii,{className:"w-3 h-3 mr-1"}),"Copy"]}),l.structured_prompt_id&&a.jsxs(fe,{size:"sm",variant:"outline",onClick:F,className:"h-8 px-3 bg-purple-50 border-purple-200 text-purple-700 hover:bg-purple-100",title:"Edit in Library with card-based editor",children:[a.jsx(Xu,{className:"w-3 h-3 mr-1"}),"Edit in Library"]}),a.jsx(Jv,{nodeId:n||"",nodeType:"prompt",nodeData:e,position:{x:0,y:0}})]})]})]}),a.jsx(Ds,{id:"source-1",type:"source",initialPosition:A["source-1"]||"right",onPositionChange:pe=>f("source-1",pe),nodeId:n}),a.jsx(Ds,{id:"source-2",type:"source",initialPosition:A["source-2"]||"bottom",onPositionChange:pe=>f("source-2",pe),nodeId:n})]})}),b&&a.jsx(NX,{prompt:l,sourceToolName:h,onContract:N,onCopy:L,onView:P})]})}),BTe=w.memo(({data:e,selected:t})=>{var s,i;const{project:n,isActive:r}=e;return a.jsxs(ot.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.2},children:[a.jsx(De,{className:`
        w-80 p-4 transition-all duration-200 cursor-pointer
        ${t?"ring-2 ring-primary shadow-lg":"hover:shadow-md"}
        ${r?"border-primary bg-primary/5":""}
        border-2 border-dashed
      `,children:a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(yl,{className:"w-5 h-5 text-primary"}),a.jsx("h3",{className:"font-semibold text-base",children:n.name})]}),n.description&&a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:n.description})]})}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Gu,{className:"w-3 h-3"}),((i=(s=n.canvas_data)==null?void 0:s.nodes)==null?void 0:i.length)||0," nodes"]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(kd,{className:"w-3 h-3"}),kA(new Date(n.updated_at),{addSuffix:!0})]})]}),a.jsx(_e,{variant:"outline",className:"text-xs",children:"Project"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(fe,{size:"sm",variant:"outline",className:"flex-1 h-8 text-xs",children:[a.jsx(yl,{className:"w-3 h-3 mr-1"}),"Open Project"]}),a.jsx(fe,{size:"sm",variant:"outline",className:"w-8 h-8 p-0",children:a.jsx(us,{className:"w-3 h-3"})})]})]})}),a.jsx(wl,{type:"source",position:Yt.Bottom,className:"w-3 h-3 bg-muted-foreground hover:bg-primary transition-colors"})]})}),ETe=w.memo(({data:e,selected:t,id:n})=>{const{entries:r}=pa(),{knowledgeEntries:s,toolName:i,title:o,isActive:c}=e,l=r.filter(h=>s.includes(h.id)),d=h=>{switch(h){case"image":return a.jsx(XP,{className:"h-3 h-3"});case"document":return a.jsx(In,{className:"h-3 w-3"});default:return a.jsx(In,{className:"h-3 w-3"})}},u=h=>{console.log("View knowledge entry:",h.id)};return a.jsxs(ot.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.2},children:[a.jsx(wl,{type:"target",position:Yt.Top,className:"w-3 h-3 bg-primary border-2 border-background"}),a.jsx(wl,{type:"target",position:Yt.Left,className:"w-3 h-3 bg-primary border-2 border-background"}),a.jsx(De,{className:`
        w-80 p-4 transition-all duration-200 cursor-pointer
        ${t?"ring-2 ring-primary shadow-lg":"hover:shadow-md"}
        ${c?"border-primary bg-primary/5":""}
        border-2 border-dashed
      `,children:a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(Xo,{className:"w-4 h-4 text-primary"}),a.jsx("h3",{className:"font-semibold text-sm",children:o})]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Knowledge context for ",i]})]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(_e,{variant:"secondary",className:"text-xs",children:[l.length," ",l.length===1?"entry":"entries"]}),a.jsx(_e,{variant:"outline",className:"text-xs",children:"Context"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-xs font-medium text-muted-foreground",children:"Linked Knowledge:"}),a.jsx(ns,{className:"max-h-32",children:a.jsx("div",{className:"space-y-2",children:l.map(h=>a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/30 rounded text-xs hover:bg-muted/50 transition-colors",children:[d(h.type),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium truncate",children:h.title}),a.jsx("div",{className:"text-muted-foreground max-h-4 overflow-hidden",children:a.jsxs("p",{className:"text-xs truncate",children:[h.content.substring(0,50),"..."]})})]}),a.jsx(fe,{size:"sm",variant:"ghost",onClick:()=>u(h),className:"h-6 w-6 p-0",children:a.jsx(zr,{className:"h-3 w-3"})})]},h.id))})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(fe,{size:"sm",variant:"outline",className:"flex-1 h-7 text-xs",children:[a.jsx(fv,{className:"w-3 h-3 mr-1"}),"Manage Links"]}),a.jsx(Jv,{nodeId:n||"",nodeType:"context",nodeData:e,position:{x:0,y:0}})]})]})}),a.jsx(wl,{type:"source",position:Yt.Right,className:"w-3 h-3 bg-primary border-2 border-background"}),a.jsx(wl,{type:"source",position:Yt.Bottom,className:"w-3 h-3 bg-primary border-2 border-background"})]})}),_Te=w.memo(({data:e,selected:t,id:n})=>{const{knowledgeEntry:r,size:s="preview",connectedTools:i=[],isEditing:o=!1}=e,{updateEntry:c}=pa(),{updateNode:l,edges:d}=Us(),[u,h]=w.useState(o),[A,f]=w.useState(r.title),[m,g]=w.useState(r.content),[b,y]=w.useState(!1),j=d.filter(I=>I.source===n).length,x=w.useCallback(()=>{n&&l(n,{data:{...e,size:s==="mini"?"preview":s==="preview"?"expanded":"mini"}})},[s,e,n,l]),C=w.useCallback(()=>{h(!0),n&&l(n,{data:{...e,isEditing:!0}})},[e,n,l]),S=w.useCallback(()=>{h(!1),f(r.title),g(r.content),n&&l(n,{data:{...e,isEditing:!1}})},[e,n,l,r]),_=w.useCallback(async()=>{if(!A.trim()){Ue.error("Document title cannot be empty");return}y(!0);try{await c(r.id,{title:A.trim(),content:m.trim()});const I={...r,title:A.trim(),content:m.trim()};n&&l(n,{data:{...e,knowledgeEntry:I,isEditing:!1}}),h(!1),Ue.success("Knowledge document updated")}catch(I){Ue.error("Failed to save document"),console.error("Error saving knowledge document:",I)}finally{y(!1)}},[A,m,r,c,e,n,l]),N=()=>{switch(s){case"mini":return"w-32 min-h-[60px]";case"preview":return"w-64 min-h-[120px]";case"expanded":return"w-80 min-h-[200px]";default:return"w-64 min-h-[120px]"}},L=(I,T)=>I.length<=T?I:I.substring(0,T)+"...",P=()=>{switch(s){case"mini":return null;case"preview":return L(r.content,100);case"expanded":return r.content;default:return L(r.content,100)}},F=()=>{switch(s){case"mini":return a.jsx(D0,{className:"w-3 h-3"});case"preview":return a.jsx(D0,{className:"w-3 h-3"});case"expanded":return a.jsx(y7,{className:"w-3 h-3"});default:return a.jsx(D0,{className:"w-3 h-3"})}};return a.jsx(vF,{selected:t,children:a.jsx(ot.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},children:a.jsxs(De,{className:`
          ${N()} 
          ${t?"ring-2 ring-blue-500 ring-offset-2":""}
          bg-gradient-to-br from-amber-50 to-orange-50 
          border-amber-200 
          hover:shadow-lg 
          transition-all duration-200
          relative
        `,children:[a.jsx(wl,{type:"source",position:Yt.Right,style:{background:"#f59e0b",border:"2px solid #d97706",width:12,height:12},className:"!border-2 !border-amber-600"}),a.jsx(dt,{className:"pb-2 px-3 pt-3",children:a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[a.jsx("div",{className:"p-1 rounded bg-amber-100",children:a.jsx(In,{className:"w-4 h-4 text-amber-700"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[u?a.jsx(ln,{value:A,onChange:I=>f(I.target.value),className:"h-6 text-sm font-semibold bg-white/80 border-amber-300",placeholder:"Document title..."}):a.jsx(ft,{className:"text-sm font-semibold text-amber-900 truncate",children:r.title}),s!=="mini"&&a.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[a.jsx(_e,{variant:"secondary",className:"text-xs bg-amber-100 text-amber-800",children:r.type}),j>0&&a.jsxs(_e,{variant:"outline",className:"text-xs border-amber-300 text-amber-700",children:[a.jsx(v7,{className:"w-3 h-3 mr-1"}),j]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[!u&&s!=="mini"&&a.jsx(fe,{variant:"ghost",size:"sm",onClick:C,className:"h-6 w-6 p-0 hover:bg-amber-100",children:a.jsx(Xu,{className:"w-3 h-3"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:x,className:"h-6 w-6 p-0 hover:bg-amber-100",children:F()})]})]})}),s!=="mini"&&a.jsx(et,{className:"px-3 pb-3 pt-0",children:a.jsx(Pr,{mode:"wait",children:u?a.jsxs(ot.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-2",children:[a.jsx(Qr,{value:m,onChange:I=>g(I.target.value),className:"min-h-[60px] text-sm bg-white/80 border-amber-300 resize-none",placeholder:"Document content..."}),a.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[a.jsxs(fe,{variant:"ghost",size:"sm",onClick:S,className:"h-7 px-2 text-xs hover:bg-amber-100",children:[a.jsx(_i,{className:"w-3 h-3 mr-1"}),"Cancel"]}),a.jsxs(fe,{size:"sm",onClick:_,disabled:b,className:"h-7 px-2 text-xs bg-amber-600 hover:bg-amber-700",children:[a.jsx(Od,{className:"w-3 h-3 mr-1"}),b?"Saving...":"Save"]})]})]},"editing"):a.jsx(ot.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:P()&&a.jsx("p",{className:"text-xs text-amber-800 leading-relaxed whitespace-pre-wrap",children:P()})},"viewing")})}),j>0&&a.jsx("div",{className:"absolute -top-1 -right-1",children:a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full border border-white shadow-sm"})})]})})})}),ITe={role:{type:"role",title:"AI Role & Expertise",icon:"Brain",color:"purple",isExpanded:!0,isEditable:!0,order:1},context:{type:"context",title:"Project Context",icon:"User",color:"blue",isExpanded:!0,isEditable:!0,order:2},task:{type:"task",title:"Specific Task",icon:"Target",color:"green",isExpanded:!0,isEditable:!0,order:3},constraints:{type:"constraints",title:"Quality & Constraints",icon:"Settings",color:"orange",isExpanded:!0,isEditable:!0,order:4},format:{type:"format",title:"Output Format",icon:"FileText",color:"red",isExpanded:!0,isEditable:!0,order:5},examples:{type:"examples",title:"Examples & Guidance",icon:"Lightbulb",color:"yellow",isExpanded:!1,isEditable:!0,order:6}};function PTe(e){return`${e}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function ig(e,t,n){const r=ITe[e];return{id:PTe(e),...r,content:t,...n}}function TTe(e){const t=(e==null?void 0:e.toLowerCase().includes("interview"))||(e==null?void 0:e.toLowerCase().includes("survey"))||(e==null?void 0:e.toLowerCase().includes("study"))||(e==null?void 0:e.toLowerCase().includes("research"));return{role_section:ig("role",`You are a senior UX ${t?"researcher":"designer"} with 15+ years of experience in user-centered design. You excel at ${e||"UX methodology"} and have deep knowledge of best practices.`),context_section:ig("context",`## Project Context:
{{knowledgeBase}}

---

Working on a project with the following specifics:
- Target Audience: {{targetAudience}}
- Primary Goals: {{primaryGoals}}
- Key Constraints: {{keyConstraints}}
- Success Metrics: {{successMetrics}}`),task_section:ig("task",`Create a comprehensive ${e||"deliverable"} that addresses the project goals and user needs documented in the Project Context.

Your deliverable should:
- Be grounded in the research data and insights provided
- Include specific, actionable recommendations
- Follow industry best practices and methodology
- Be immediately useful for the product team`),constraints_section:ig("constraints",`## Quality Standards:
- **Evidence-Based**: Every element must be backed by specific research findings from the Project Context
- **Balanced Detail**: Provide clear explanations with appropriate methodology context
- **Thorough**: Include detailed analysis, examples, and complete coverage
- **Professional**: Use proper UX methodology, terminology, and best practices`),format_section:ig("format",`## Output Format:
Structure your response following established UX methodology frameworks. Use clear sections, systematic progression, and actionable insights. Provide step-by-step explanations with clear reasoning. Include validation checkpoints and quality indicators throughout.`),examples_section:null}}function FTe(e){var r,s;let t="";const n=(i,o=!0)=>{var c;if((c=i.content)!=null&&c.trim()){if(o){const l=i.type==="role"?"#":"##";t+=`${l} ${i.title}

`}t+=`${i.content}

`,t+=`---

`}};return n(e.role_section),n(e.context_section),n(e.task_section),n(e.constraints_section),n(e.format_section),(s=(r=e.examples_section)==null?void 0:r.content)!=null&&s.trim()&&n(e.examples_section),t.trim()}function lA(e,t){return ig(e,t.content,t)}function dO(e){var n,r;const t=[];return(n=e.content)!=null&&n.trim()||t.push(`${e.title} content cannot be empty`),e.content.length>1e4&&t.push(`${e.title} content exceeds maximum length (10000 characters)`),(r=e.title)!=null&&r.trim()||t.push("Section title cannot be empty"),{valid:t.length===0,errors:t}}function DTe(e){var r;const t=[];if((r=e.title)!=null&&r.trim()||t.push("Prompt title is required"),e.title&&e.title.length>200&&t.push("Prompt title cannot exceed 200 characters"),[{type:"role",data:e.role_section},{type:"context",data:e.context_section},{type:"task",data:e.task_section},{type:"constraints",data:e.constraints_section},{type:"format",data:e.format_section}].forEach(({type:s,data:i})=>{const o=lA(s,i),c=dO(o);t.push(...c.errors)}),e.examples_section){const s=lA("examples",e.examples_section),i=dO(s);t.push(...i.errors)}return{valid:t.length===0,errors:t}}function UTe(e,t){return{project_id:e.project_id||void 0,title:t||`${e.title} (Version ${e.version+1})`,description:e.description||void 0,framework_name:e.framework_name||void 0,stage_name:e.stage_name||void 0,tool_name:e.tool_name||void 0,is_template:!1,is_library_prompt:!0,role_section:{...e.role_section},context_section:{...e.context_section},task_section:{...e.task_section},constraints_section:{...e.constraints_section},format_section:{...e.format_section},examples_section:e.examples_section?{...e.examples_section}:void 0}}function dj(e){return e.trim().split(/\s+/).filter(Boolean).length}function BX(e){const t=dj(e);return Math.ceil(t/200)}function S1(e){return{id:e.id,user_id:e.user_id,project_id:e.project_id,title:e.title,description:e.description,framework_name:e.framework_name,stage_name:e.stage_name,tool_name:e.tool_name,is_template:e.is_template,is_library_prompt:e.is_library_prompt,role_section:e.role_section,context_section:e.context_section,task_section:e.task_section,constraints_section:e.constraints_section,format_section:e.format_section,examples_section:e.examples_section,compiled_prompt:e.compiled_prompt,last_run_at:e.last_run_at,run_count:e.run_count,version:e.version,parent_prompt_id:e.parent_prompt_id,created_at:e.created_at,updated_at:e.updated_at}}const Mw=cf((e,t)=>({prompts:[],currentPrompt:null,loading:!1,error:null,fetchLibraryPrompts:async n=>{try{e({loading:!0,error:null});const{data:{user:r}}=await rt.auth.getUser();if(!r)throw new Error("User not authenticated");let s=rt.from("structured_prompts").select("*").eq("user_id",r.id).eq("is_library_prompt",!0);if(n!=null&&n.filters){const{searchQuery:d,framework:u,stage:h,tool:A,isTemplate:f,projectId:m}=n.filters;d&&(s=s.or(`title.ilike.%${d}%,description.ilike.%${d}%,tool_name.ilike.%${d}%`)),u&&(s=s.eq("framework_name",u)),h&&(s=s.eq("stage_name",h)),A&&(s=s.eq("tool_name",A)),f!==void 0&&(s=s.eq("is_template",f)),m&&(s=s.eq("project_id",m))}switch((n==null?void 0:n.sortBy)||"created_at_desc"){case"created_at_desc":s=s.order("created_at",{ascending:!1});break;case"created_at_asc":s=s.order("created_at",{ascending:!0});break;case"updated_at_desc":s=s.order("updated_at",{ascending:!1});break;case"updated_at_asc":s=s.order("updated_at",{ascending:!0});break;case"title_asc":s=s.order("title",{ascending:!0});break;case"title_desc":s=s.order("title",{ascending:!1});break;case"run_count_desc":s=s.order("run_count",{ascending:!1});break}n!=null&&n.limit&&(s=s.limit(n.limit)),n!=null&&n.offset&&(s=s.range(n.offset,n.offset+(n.limit||50)-1));const{data:o,error:c}=await s;if(c)throw c;const l=o.map(S1);e({prompts:l,loading:!1})}catch(r){console.error("Error fetching library prompts:",r),e({error:r.message,loading:!1}),Ue.error("Failed to load prompts")}},fetchPromptById:async n=>{try{const{data:r,error:s}=await rt.from("structured_prompts").select("*").eq("id",n).single();if(s)throw s;return r?S1(r):null}catch(r){return console.error("Error fetching prompt:",r),Ue.error("Failed to load prompt"),null}},createPrompt:async n=>{try{e({loading:!0,error:null});const r=DTe(n);if(!r.valid)throw new Error(r.errors.join(", "));const{data:{user:s}}=await rt.auth.getUser();if(!s)throw new Error("User not authenticated");const i={user_id:s.id,project_id:n.project_id||null,title:n.title,description:n.description||null,framework_name:n.framework_name||null,stage_name:n.stage_name||null,tool_name:n.tool_name||null,is_template:n.is_template||!1,is_library_prompt:n.is_library_prompt??!0,role_section:lA("role",n.role_section),context_section:lA("context",n.context_section),task_section:lA("task",n.task_section),constraints_section:lA("constraints",n.constraints_section),format_section:lA("format",n.format_section),examples_section:n.examples_section?lA("examples",n.examples_section):null,compiled_prompt:n.compiled_prompt||""},{data:o,error:c}=await rt.from("structured_prompts").insert(i).select().single();if(c)throw c;const l=S1(o);return e(d=>({prompts:[l,...d.prompts],loading:!1})),Ue.success("Prompt created successfully"),l.id}catch(r){throw console.error("Error creating prompt:",r),e({error:r.message,loading:!1}),Ue.error(`Failed to create prompt: ${r.message}`),r}},updatePrompt:async(n,r)=>{try{e({loading:!0,error:null});const s={};r.title!==void 0&&(s.title=r.title),r.description!==void 0&&(s.description=r.description),r.framework_name!==void 0&&(s.framework_name=r.framework_name),r.stage_name!==void 0&&(s.stage_name=r.stage_name),r.tool_name!==void 0&&(s.tool_name=r.tool_name),r.is_template!==void 0&&(s.is_template=r.is_template),r.is_library_prompt!==void 0&&(s.is_library_prompt=r.is_library_prompt),r.role_section&&(s.role_section=r.role_section),r.context_section&&(s.context_section=r.context_section),r.task_section&&(s.task_section=r.task_section),r.constraints_section&&(s.constraints_section=r.constraints_section),r.format_section&&(s.format_section=r.format_section),r.examples_section!==void 0&&(s.examples_section=r.examples_section),r.compiled_prompt!==void 0&&(s.compiled_prompt=r.compiled_prompt);const{data:i,error:o}=await rt.from("structured_prompts").update(s).eq("id",n).select().single();if(o)throw o;const c=S1(i);e(l=>{var d;return{prompts:l.prompts.map(u=>u.id===n?c:u),currentPrompt:((d=l.currentPrompt)==null?void 0:d.id)===n?c:l.currentPrompt,loading:!1}}),Ue.success("Prompt updated successfully")}catch(s){throw console.error("Error updating prompt:",s),e({error:s.message,loading:!1}),Ue.error("Failed to update prompt"),s}},updateSection:async(n,r,s)=>{try{const i=t().prompts.find(u=>u.id===n)||t().currentPrompt;if(!i)throw new Error("Prompt not found");const o=`${r}_section`,c=i[o];if(!c||typeof c!="object")throw new Error("Section not found");const l={...c,content:s},{error:d}=await rt.from("structured_prompts").update({[o]:l}).eq("id",n);if(d)throw d;e(u=>{var h;return{prompts:u.prompts.map(A=>A.id===n?{...A,[o]:l}:A),currentPrompt:((h=u.currentPrompt)==null?void 0:h.id)===n?{...u.currentPrompt,[o]:l}:u.currentPrompt}}),console.log(`Section ${r} updated for prompt ${n}`)}catch(i){throw console.error("Error updating section:",i),Ue.error("Failed to update section"),i}},deletePrompt:async n=>{try{const{error:r}=await rt.from("structured_prompts").delete().eq("id",n);if(r)throw r;e(s=>{var i;return{prompts:s.prompts.filter(o=>o.id!==n),currentPrompt:((i=s.currentPrompt)==null?void 0:i.id)===n?null:s.currentPrompt}}),Ue.success("Prompt deleted successfully")}catch(r){throw console.error("Error deleting prompt:",r),Ue.error("Failed to delete prompt"),r}},duplicatePrompt:async(n,r)=>{try{const s=await t().fetchPromptById(n);if(!s)throw new Error("Original prompt not found");const i=UTe(s,r),o=await t().createPrompt(i);return Ue.success("Prompt duplicated successfully"),o}catch(s){throw console.error("Error duplicating prompt:",s),Ue.error("Failed to duplicate prompt"),s}},setCurrentPrompt:n=>{e({currentPrompt:n})},incrementRunCount:async n=>{try{const{error:r}=await rt.rpc("increment_prompt_run_count",{prompt_id:n});if(r){const s=t().prompts.find(i=>i.id===n);s&&await rt.from("structured_prompts").update({run_count:s.run_count+1,last_run_at:new Date().toISOString()}).eq("id",n)}e(s=>({prompts:s.prompts.map(i=>i.id===n?{...i,run_count:i.run_count+1,last_run_at:new Date().toISOString()}:i)}))}catch(r){console.error("Error incrementing run count:",r)}}})),EX=w.memo(({data:e,selected:t,id:n})=>{const{addNode:r,addEdge:s,nodes:i,edges:o,updateNode:c}=Us(),{currentProject:l}=js(),{entries:d,fetchEntries:u}=pa(),{incrementRunCount:h}=Mw(),{prompt:A,linkedKnowledge:f=[],isActive:m,isCompleted:g}=e,b=Array.isArray(f)?f:[],{handlePositions:y,updateHandlePosition:j}=Zv(n),[x,C]=w.useState(!1),[S,_]=w.useState(0),[N,L]=w.useState(!1),P=5,F=o.filter(U=>U.target===n&&U.source.startsWith("knowledge-document-")).map(U=>{var $;const H=i.find(R=>R.id===U.source);return($=H==null?void 0:H.data)==null?void 0:$.knowledgeEntry}).filter(Boolean),I=[...b];F.forEach(U=>{U&&!I.includes(U.id)&&I.push(U.id)});const T=I.length,Q=async U=>{var R,Y;if(!l){Ue.error("No project selected");return}const H=U||I,$=[...d.filter(X=>H.includes(X.id))];if(F.forEach(X=>{X&&!$.find(q=>q.id===X.id)&&$.push(X)}),$.length===0){d.length===0&&await u(l.id),L(!0);return}try{C(!0),_(0),_(1),await new Promise(Ae=>setTimeout(Ae,800)),_(2),await new Promise(Ae=>setTimeout(Ae,600)),_(3);const X=$.map(Ae=>({id:Ae.id,title:Ae.title,content:Ae.content})),q=X.length>0?X.map(Ae=>`### ${Ae.title}

${Ae.content}`).join(`

---

`):"No knowledge base entries linked to this prompt.",K={promptContent:A.compiled_prompt,variables:{knowledgeBase:q},projectId:l.id,frameworkName:A.framework_name||"Custom Prompt",stageName:A.stage_name||"Library",toolName:A.tool_name||A.title,knowledgeContext:X};console.log("[CustomPromptNode] Sending to API:",{promptTitle:A.title,promptContentLength:A.compiled_prompt.length,projectId:l.id,frameworkName:K.frameworkName,stageName:K.stageName,toolName:K.toolName,knowledgeCount:X.length,hasKnowledgeContext:X.length>0,knowledgePreview:X.map(Ae=>({id:Ae.id,title:Ae.title,contentLength:Ae.content.length}))}),console.log("[CustomPromptNode] Request body:",K),_(4);const J=await rt.functions.invoke("generate-ai-prompt",{body:K});console.log("[CustomPromptNode] Full response:",J);const{data:W,error:ne}=J;if(ne){console.error("Edge Function Error:",ne),console.error("Error details:",JSON.stringify(ne,null,2)),console.error("Response data:",W);const Ae={id:`fallback-${Date.now()}`,structured_prompt_id:A.id,workflowId:`custom-prompt-${A.id}`,projectId:l.id,content:A.compiled_prompt,context:{customPrompt:A},variables:{},timestamp:Date.now(),output:" AI execution failed. Please check the Edge Function logs or try again."},pe={id:`prompt-${n}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"prompt",position:fo("prompt",i,{sourceNodeId:n,workflowType:"custom-prompt-to-result"}),data:{prompt:Ae,sourceToolId:n,sourceToolName:A.title}};r(pe),s(sm(n,pe.id,{type:"default",style:{stroke:"#f59e0b",strokeWidth:2}})),C(!1),Ue.error("AI call failed, but prompt was created. Check console for details.");return}if(!(W!=null&&W.success))throw console.error("AI function returned error:",W==null?void 0:W.error),Ue.error("AI generation failed: "+((W==null?void 0:W.error)||"Unknown error")),new Error((W==null?void 0:W.error)||"Failed to generate AI response");console.log("AI response received:",{promptLength:((R=W.prompt)==null?void 0:R.length)||0,responseLength:((Y=W.aiResponse)==null?void 0:Y.length)||0,hasResponse:!!W.aiResponse}),_(5),await new Promise(Ae=>setTimeout(Ae,400));const ae={id:W.id,structured_prompt_id:A.id,workflowId:`custom-prompt-${A.id}`,projectId:l.id,content:W.prompt,context:{customPrompt:A},variables:{},timestamp:Date.now(),output:W.aiResponse},ce={id:`prompt-${n}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"prompt",position:fo("prompt",i,{sourceNodeId:n,workflowType:"custom-prompt-to-result"}),data:{prompt:ae,sourceToolId:n,sourceToolName:A.title}};r(ce),s(sm(n,ce.id,{type:"default",style:{stroke:"#10b981",strokeWidth:2}})),await h(A.id),c(n,{isCompleted:!0}),C(!1),Ue.success("Custom prompt executed successfully")}catch(X){console.error("Error running custom prompt:",X),Ue.error("Failed to run custom prompt"),C(!1)}},D=async U=>{console.log("[CustomPromptNode] Knowledge selected:",U),c(n,{linkedKnowledge:U}),L(!1),setTimeout(()=>Q(U),300)},M=()=>{navigator.clipboard.writeText(A.compiled_prompt),Ue.success("Prompt copied to clipboard")};return a.jsxs(a.Fragment,{children:[a.jsxs(De,{className:`min-w-[320px] max-w-[400px] p-4 transition-all ${t?"ring-2 ring-primary shadow-lg":""} ${g?"border-green-500 border-2":""}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-start gap-2 flex-1",children:[a.jsx("div",{className:"p-2 rounded-lg bg-purple-500/10",children:a.jsx(In,{className:"w-4 h-4 text-purple-500"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-sm leading-tight mb-1 truncate",children:A.title}),A.description&&a.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:A.description})]})]}),a.jsx(Jv,{nodeId:n||"",nodeType:"custom-prompt",nodeData:e,position:{x:0,y:0}})]}),a.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-3",children:[a.jsxs(_e,{variant:"outline",className:"text-xs",children:[a.jsx(gr,{className:"w-3 h-3 mr-1"}),"Custom Prompt"]}),A.tool_name&&a.jsx(_e,{variant:"secondary",className:"text-xs",children:A.tool_name}),A.run_count>0&&a.jsxs(_e,{variant:"secondary",className:"text-xs",children:[A.run_count," runs"]})]}),a.jsx("div",{className:"mb-3",children:T>0?a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(Xo,{className:"w-3 h-3"}),a.jsxs("span",{children:[T," knowledge source",T!==1?"s":""," linked"]})]}):a.jsxs("div",{className:"flex items-center gap-2 text-xs text-amber-500",children:[a.jsx(ts,{className:"w-3 h-3"}),a.jsx("span",{children:"No knowledge linked"})]})}),b.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[b.slice(0,3).map(U=>{const H=d.find($=>$.id===U);return H?a.jsx(_e,{variant:"outline",className:"text-xs",children:H.title},U):null}),b.length>3&&a.jsxs(_e,{variant:"outline",className:"text-xs",children:["+",b.length-3," more"]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(fe,{size:"sm",onClick:()=>Q(),className:"flex-1",disabled:x,children:[a.jsx(Kd,{className:"w-3 h-3 mr-1"}),"Run Prompt"]}),a.jsx(fe,{size:"sm",variant:"outline",onClick:M,children:a.jsx(Ii,{className:"w-3 h-3"})}),a.jsx(fe,{size:"sm",variant:"outline",onClick:()=>{window.location.href="/prompt-library"},children:a.jsx(Hu,{className:"w-3 h-3"})})]}),a.jsx(Ds,{type:"target",position:"left",onPositionChange:U=>j("target-left",U),initialPosition:y["target-left"]}),a.jsx(Ds,{type:"target",position:"top",onPositionChange:U=>j("target-top",U),initialPosition:y["target-top"]}),a.jsx(Ds,{type:"source",position:"right",onPositionChange:U=>j("source-right",U),initialPosition:y["source-right"]}),a.jsx(Ds,{type:"source",position:"bottom",onPositionChange:U=>j("source-bottom",U),initialPosition:y["source-bottom"]})]}),x&&a.jsx(bG,{currentStep:S,totalSteps:P,steps:["Analyzing Context","Gathering Knowledge","Generating with AI","Executing AI Request","Creating Result Node"]}),N&&a.jsx(tY,{isOpen:N,onClose:()=>L(!1),onKnowledgeSelected:D,initialSelectedIds:b,projectId:l==null?void 0:l.id})]})});EX.displayName="CustomPromptNode";const _X=w.createContext(null);function IX(){const e=w.useContext(_X);if(!e)throw new Error("usePromptInput must be used within a PromptInput");return e}function LTe({value:e,onValueChange:t,onSubmit:n,disabled:r=!1,loading:s=!1,placeholder:i="Type your message...",maxHeight:o=200,children:c,className:l}){const d=w.useMemo(()=>({value:e,setValue:t,onSubmit:n,disabled:r,loading:s,placeholder:i,maxHeight:o}),[e,t,n,r,s,i,o]);return a.jsx(_X.Provider,{value:d,children:a.jsx("div",{className:$e("relative",l),children:c})})}function MTe({className:e,onKeyDown:t}){const{value:n,setValue:r,onSubmit:s,disabled:i,loading:o,placeholder:c,maxHeight:l}=IX(),d=w.useRef(null);w.useEffect(()=>{const h=d.current;if(!h)return;h.style.height="auto";const A=h.scrollHeight,f=Math.min(A,l);h.style.height=`${f}px`},[n,l]);const u=h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),n.trim()&&!i&&!o&&s(n)),t==null||t(h)};return a.jsx(Qr,{ref:d,value:n,onChange:h=>r(h.target.value),onKeyDown:u,placeholder:c,disabled:i||o,className:$e("min-h-[44px] resize-none border-0 shadow-none focus-visible:ring-0 focus-visible:ring-offset-0","scrollbar-thin scrollbar-thumb-muted scrollbar-track-transparent","bg-transparent pr-12",e),style:{height:"auto",overflow:n.length>100?"auto":"hidden"}})}function RTe({children:e,className:t}){return a.jsx("div",{className:$e("flex items-center justify-between px-3 py-2",t),children:e})}function OTe({children:e,className:t}){return a.jsx("div",{className:$e("flex items-center gap-2",t),children:e})}function QTe({className:e,size:t="sm",variant:n="default"}){const{value:r,onSubmit:s,disabled:i,loading:o}=IX(),c=r.trim().length>0&&!i&&!o,l=()=>{c&&s(r)};return a.jsx(fe,{onClick:l,disabled:!c,size:t,variant:n,className:$e("h-8 w-8 p-0 transition-all duration-200",c?"bg-primary hover:bg-primary/90 text-primary-foreground":"bg-muted text-muted-foreground",e),children:a.jsx(Pr,{mode:"wait",children:o?a.jsx(ot.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{duration:.2},children:a.jsx(Cr,{className:"h-4 w-4 animate-spin"})},"loading"):a.jsx(ot.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{duration:.2},children:a.jsx(hp,{className:"h-4 w-4"})},"send")})})}function HTe({models:e=[{id:"gpt-4o-mini",name:"GPT-4o Mini",description:"Fast and efficient"}],selectedModel:t="gpt-4o-mini",onModelChange:n,className:r}){var s;return a.jsxs("div",{className:$e("flex items-center gap-2",r),children:[a.jsx(gr,{className:"h-3 w-3 text-primary"}),a.jsx("span",{className:"text-xs text-muted-foreground font-medium",children:((s=e.find(i=>i.id===t))==null?void 0:s.name)||"AI Model"})]})}function $Te({className:e}){return a.jsxs("div",{className:$e("text-xs text-muted-foreground",e),children:[a.jsx("kbd",{className:"pointer-events-none inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground opacity-100",children:""}),a.jsx("span",{className:"ml-1",children:"to send"}),a.jsx("span",{className:"mx-2",children:""}),a.jsx("kbd",{className:"pointer-events-none inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground opacity-100",children:""}),a.jsx("span",{className:"ml-1",children:"for new line"})]})}function zTe({children:e,className:t}){return a.jsx("div",{className:$e("relative overflow-hidden rounded-lg border border-input bg-background/60","focus-within:ring-2 focus-within:ring-ring focus-within:ring-offset-2","transition-all duration-200",t),children:e})}const VTe=e=>(t,n,r)=>{const s=r.subscribe;return r.subscribe=(o,c,l)=>{let d=o;if(c){const u=(l==null?void 0:l.equalityFn)||Object.is;let h=o(r.getState());d=A=>{const f=o(A);if(!u(h,f)){const m=h;c(h=f,m)}},l!=null&&l.fireImmediately&&c(h,h)}return s(d)},e(t,n,r)},qTe=VTe;class KTe{async generateWorkflow(t,n){try{console.log("Calling Supabase AI workflow generator function...");const{data:r,error:s}=await rt.functions.invoke("ai-workflow-generator",{body:{prompt:t,availableFrameworks:n,type:"generate"}});if(s)throw console.error("Supabase function error:",s),new Error("Failed to generate workflow. Please try again.");if(!(r!=null&&r.success))throw console.error("AI workflow generation failed:",r==null?void 0:r.error),new Error((r==null?void 0:r.error)||"Failed to generate workflow. Please try again.");return console.log("Workflow generation successful"),r.data}catch(r){throw console.error("AI workflow generation failed:",r),new Error("Failed to generate workflow. Please try again.")}}async refineWorkflow(t,n){try{console.log("Calling Supabase AI workflow refinement function...");const{data:r,error:s}=await rt.functions.invoke("ai-workflow-generator",{body:{prompt:n,workflow:t,type:"refine"}});if(s)throw console.error("Supabase function error:",s),new Error("Failed to refine workflow. Please try again.");if(!(r!=null&&r.success))throw console.error("AI workflow refinement failed:",r==null?void 0:r.error),new Error((r==null?void 0:r.error)||"Failed to refine workflow. Please try again.");return console.log("Workflow refinement successful"),r.data}catch(r){throw console.error("AI workflow refinement failed:",r),new Error("Failed to refine workflow. Please try again.")}}}function WTe(){return console.log("Using Supabase AI workflow builder service"),new KTe}function uO(e,t){const n=[],r=[];let s=t.find(c=>c.name.toLowerCase().includes(e.framework.name.toLowerCase())||e.framework.name.toLowerCase().includes(c.name.toLowerCase()));s||(s={id:"ai-generated",name:e.framework.name,description:e.framework.description,color:"#6366f1",stages:e.stages.map((c,l)=>({id:`stage-${l}`,name:c.name,description:c.description,duration:c.duration,participants:c.participants,deliverables:c.deliverables,tools:e.tools.filter(d=>d.stageName===c.name).map((d,u)=>({id:`tool-${l}-${u}`,name:d.name,description:d.description,category:d.category,effort:d.effort,expertise:d.expertise,resources:d.resources,output:d.output}))})),characteristics:{timeframe:"Variable",complexity:"Medium",teamSize:"3-5 people",focus:"User-centered design"}});const i={id:`framework-ai-${Date.now()}`,type:"framework",position:{x:100,y:100},data:{framework:s,isSelected:!0}};n.push(i);let o=200;return e.stages.forEach((c,l)=>{const d=e.tools.filter(h=>h.stageName===c.name),u={id:`stage-ai-${Date.now()}-${l}`,type:"stage",position:{x:300+l*250,y:o},data:{stage:{id:`ai-stage-${l}`,name:c.name,description:c.description,tools:d.map((h,A)=>({id:`ai-tool-${l}-${A}`,name:h.name,description:h.description,category:h.category,icon:"",characteristics:{effort:h.effort,expertise:h.expertise,resources:Array.isArray(h.resources)?h.resources:[h.resources],output:h.output,when:"During "+c.name+" stage"}})),position:{x:300+l*250,y:o},characteristics:{duration:c.duration,participants:c.participants,deliverables:c.deliverables,skills:["UX Research","Design Thinking"],dependencies:l>0?[e.stages[l-1].name]:[]}},framework:s,isActive:!0}};n.push(u),r.push({id:`edge-${i.id}-${u.id}`,source:i.id,target:u.id,type:"smoothstep",animated:!0,style:{stroke:"white",strokeWidth:2}})}),{nodes:n,edges:r,framework:s}}const PX=cf()(qTe((e,t)=>({isExpanded:!1,isGenerating:!1,currentPrompt:"",error:null,conversationHistory:[],currentGeneration:null,previewNodes:[],previewEdges:[],showPreview:!1,aiService:null,toggleExpanded:()=>{e(n=>({isExpanded:!n.isExpanded,error:null}))},setCurrentPrompt:n=>{e({currentPrompt:n,error:null})},clearError:()=>{e({error:null})},initializeService:()=>{try{const n=WTe();e({aiService:n})}catch(n){console.error("Failed to initialize AI service:",n),e({error:n instanceof Error?n.message:"Failed to initialize AI service"})}},generateWorkflow:async(n,r)=>{const{aiService:s}=t();if(!s){e({error:"AI service not initialized. Please check your API key configuration."});return}if(!n.trim()){e({error:"Please enter a prompt to generate a workflow."});return}e({isGenerating:!0,error:null,currentPrompt:n,currentGeneration:null,showPreview:!1});try{const i=await s.generateWorkflow(n,r),{nodes:o,edges:c}=uO(i,r),l={id:`conversation-${Date.now()}`,prompt:n,response:i,timestamp:new Date};e(d=>({isGenerating:!1,currentGeneration:i,previewNodes:o,previewEdges:c,showPreview:!0,conversationHistory:[...d.conversationHistory,l],currentPrompt:""}))}catch(i){console.error("Workflow generation failed:",i);const o={id:`conversation-${Date.now()}`,prompt:n,response:null,timestamp:new Date,error:i instanceof Error?i.message:"Unknown error"};e(c=>({isGenerating:!1,error:i instanceof Error?i.message:"Failed to generate workflow",conversationHistory:[...c.conversationHistory,o]}))}},refineWorkflow:async n=>{const{aiService:r,currentGeneration:s}=t();if(!r){e({error:"AI service not initialized."});return}if(!s){e({error:"No workflow to refine. Please generate a workflow first."});return}if(!n.trim()){e({error:"Please enter a refinement request."});return}e({isGenerating:!0,error:null});try{const i=await r.refineWorkflow(s,n),o=[],{nodes:c,edges:l}=uO(i,o),d={id:`conversation-${Date.now()}`,prompt:`Refine: ${n}`,response:i,timestamp:new Date};e(u=>({isGenerating:!1,currentGeneration:i,previewNodes:c,previewEdges:l,showPreview:!0,conversationHistory:[...u.conversationHistory,d],currentPrompt:""}))}catch(i){console.error("Workflow refinement failed:",i);const o={id:`conversation-${Date.now()}`,prompt:`Refine: ${n}`,response:null,timestamp:new Date,error:i instanceof Error?i.message:"Unknown error"};e(c=>({isGenerating:!1,error:i instanceof Error?i.message:"Failed to refine workflow",conversationHistory:[...c.conversationHistory,o]}))}},acceptGeneration:()=>{const{previewNodes:n,previewEdges:r,currentGeneration:s}=t();return e({currentGeneration:null,previewNodes:[],previewEdges:[],showPreview:!1,isExpanded:!1}),{nodes:n,edges:r,framework:void 0}},rejectGeneration:()=>{e({currentGeneration:null,previewNodes:[],previewEdges:[],showPreview:!1})},showWorkflowPreview:n=>{e({showPreview:n})},clearConversation:()=>{e({conversationHistory:[],currentGeneration:null,previewNodes:[],previewEdges:[],showPreview:!1,error:null,currentPrompt:""})}})));PX.getState().initializeService();const TX=w.memo(({data:e,selected:t,id:n})=>{const{isGenerating:r,currentPrompt:s,error:i,currentGeneration:o,showPreview:c,conversationHistory:l,generateWorkflow:d,acceptGeneration:u,rejectGeneration:h,setCurrentPrompt:A,clearError:f,clearConversation:m}=PX(),{frameworks:g,addNode:b,addEdge:y,nodes:j}=Us(),{handlePositions:x,updateHandlePosition:C}=Zv(n),[S,_]=w.useState(""),[N,L]=w.useState(!1);w.useEffect(()=>{_(s)},[s]);const P=["Design Thinking flow for mobile app research","Double Diamond process for website redesign","Google Sprint for new feature validation","User research workflow with interviews and personas","Lean UX process for MVP validation","HEART framework for measuring user experience","Hooked model for habit-forming product design","Jobs-to-be-Done research methodology","Agile UX workflow for continuous improvement"],F=async Q=>{!Q.trim()||r||(A(Q),await d(Q,g),_(""))},I=()=>{const{nodes:Q,edges:D}=u();if(Q.length===0){Ue.error("No workflow generated");return}const M=j.find(W=>W.id===n),U=(M==null?void 0:M.position.x)||50,H=(M==null?void 0:M.position.y)||100,$=XT(),R=Math.min(...Q.map(W=>W.position.y)),q=-(Math.max(...Q.map(W=>W.position.y))-R)/2,K=[];for(let W=0;W<Q.length;W++){const ne=Q[W],ae=U+600,ce=H+q+(ne.position.y-R),Ae=[...j,...K],pe=$.getNextPosition(ne.type||"framework",Ae,ae,ce);K.push({...ne,position:pe})}const J=K.find(W=>W.type==="framework");if(K.forEach(W=>b(W)),D.forEach(W=>y(W)),J&&n){const W=sm(n,J.id,{sourceHandle:"source-1",targetHandle:`${J.id}-target-1`,animated:!0,style:{stroke:"hsl(var(--primary))",strokeWidth:2}});y(W)}Ue.success("AI-generated workflow added to canvas")},T=()=>{h(),Ue.info("AI generation discarded")};return a.jsxs(ot.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},className:"relative w-[600px]",children:[n&&a.jsx(Ds,{id:"target-1",type:"target",initialPosition:x["target-1"]||"left",onPositionChange:Q=>C("target-1",Q),nodeId:n}),a.jsxs(De,{className:`
          w-full max-h-[600px] overflow-auto
          bg-card/85 backdrop-blur-lg
          transition-all duration-200
          ${t?"border-2 border-primary shadow-lg shadow-primary/20":"border-2 border-border hover:border-primary/50"}
        `,children:[a.jsx(dt,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"p-1.5 bg-primary/10 rounded-lg",children:a.jsx(gr,{className:"h-4 w-4 text-primary"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold",children:"AI Workflow Builder"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Describe your workflow in natural language"})]})]}),a.jsx("div",{className:"flex items-center gap-1",children:l.length>0&&a.jsx(fe,{onClick:m,size:"sm",variant:"ghost",className:"h-7 w-7 p-0",title:"Clear conversation",children:a.jsx(ihe,{className:"h-3 w-3"})})})]})}),a.jsxs(et,{className:"space-y-4 pb-4",children:[a.jsx(Pr,{children:i&&a.jsxs(ot.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-destructive/10 text-destructive text-xs p-3 rounded-lg border border-destructive/20 flex items-start gap-2",children:[a.jsx(Cc,{className:"h-3 w-3 mt-0.5 flex-shrink-0"}),a.jsx("div",{className:"flex-1",children:i}),a.jsx(fe,{onClick:f,size:"sm",variant:"ghost",className:"h-4 w-4 p-0 text-destructive hover:text-destructive",children:a.jsx(_i,{className:"h-2 w-2"})})]})}),l.length>0&&a.jsxs(ot.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(Yu,{className:"h-3 w-3"}),"Recent conversations"]}),a.jsx(ns,{className:"max-h-32",children:a.jsx("div",{className:"space-y-2",children:l.slice(-2).map(Q=>a.jsxs(ot.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"text-xs space-y-1 p-2 bg-muted/30 rounded-md",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_e,{variant:"outline",className:"text-[10px] px-1 py-0",children:Q.timestamp.toLocaleTimeString()}),a.jsx("span",{className:"text-muted-foreground truncate flex-1",children:Q.prompt})]}),Q.response&&a.jsxs("div",{className:"text-primary font-medium flex items-center gap-1",children:[a.jsx(gr,{className:"h-2 w-2"}),"Generated ",Q.response.framework.name," workflow"]}),Q.error&&a.jsxs("div",{className:"text-destructive flex items-center gap-1",children:[a.jsx(_i,{className:"h-2 w-2"}),Q.error]})]},Q.id))})})]}),a.jsx(Pr,{children:c&&o&&a.jsxs(ot.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[a.jsx(qd,{}),a.jsxs("div",{className:"bg-gradient-to-r from-primary/5 to-primary/10 border border-primary/20 rounded-lg p-4 space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h4",{className:"text-sm font-semibold flex items-center gap-2",children:[a.jsx(gr,{className:"h-4 w-4 text-primary"}),"Generated Workflow"]}),a.jsx(_e,{variant:"secondary",className:"text-xs",children:o.framework.name})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("span",{className:"text-muted-foreground font-medium",children:"Stages:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:o.stages.map((Q,D)=>a.jsx(_e,{variant:"outline",className:"text-[10px]",children:Q.name},D))})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("span",{className:"text-muted-foreground font-medium",children:"Tools:"}),a.jsxs("div",{className:"text-primary font-medium",children:[o.tools.length," tools included"]})]})]}),a.jsxs("div",{className:"text-xs text-muted-foreground bg-background/30 p-2 rounded border",children:[a.jsx("span",{className:"font-medium",children:"AI Reasoning:"})," ",o.reasoning]}),a.jsxs("div",{className:"flex gap-2 pt-2",children:[a.jsxs(fe,{onClick:I,size:"sm",className:"h-8 text-xs flex-1",children:[a.jsx(She,{className:"h-3 w-3 mr-1"}),"Accept & Add to Canvas"]}),a.jsxs(fe,{onClick:T,size:"sm",variant:"outline",className:"h-8 text-xs",children:[a.jsx(jhe,{className:"h-3 w-3 mr-1"}),"Reject"]})]})]})]})}),!c&&a.jsxs("div",{className:"space-y-3",children:[a.jsx(LTe,{value:S,onValueChange:_,onSubmit:F,disabled:r,loading:r,placeholder:"Describe your workflow... (e.g., 'Design Thinking flow for mobile app research')",maxHeight:120,children:a.jsxs(zTe,{className:"bg-background/40 border-muted/40",children:[a.jsx(MTe,{onKeyDown:()=>L(!0)}),a.jsxs(RTe,{children:[a.jsx(OTe,{children:a.jsx(HTe,{})}),a.jsx(QTe,{})]})]})}),a.jsx(Pr,{children:(N||S.length>0)&&a.jsx(ot.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:a.jsx($Te,{})})})]}),l.length===0&&!c&&!S&&!r&&a.jsxs(ot.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-3",children:[a.jsx("div",{className:"text-xs text-muted-foreground font-medium",children:" Click to try these examples:"}),a.jsx("div",{className:"relative w-full overflow-x-auto overflow-y-hidden pb-2 scrollbar-thin scrollbar-thumb-border scrollbar-track-transparent",children:a.jsx("div",{className:"flex gap-2 w-max",children:P.map((Q,D)=>a.jsx(fe,{onClick:()=>_(Q),variant:"outline",size:"sm",className:"text-xs bg-background/60 hover:bg-background/80 border-muted/40 hover:border-muted/60 transition-all duration-200 hover:scale-105 active:scale-95 whitespace-nowrap rounded-full px-4 flex-shrink-0",children:Q},D))})})]}),r&&a.jsx("div",{className:"flex items-center justify-center py-4",children:a.jsxs("div",{className:"flex items-center gap-2 text-sm text-primary",children:[a.jsx(Cr,{className:"h-4 w-4 animate-spin"}),a.jsx("span",{children:"Generating workflow..."})]})})]})]}),n&&a.jsx(Ds,{id:"source-1",type:"source",initialPosition:x["source-1"]||"right",onPositionChange:Q=>C("source-1",Q),nodeId:n})]})});TX.displayName="AIBuilderNode";const FX=w.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:$e("flex items-center gap-1 p-1 bg-background border border-border rounded-lg shadow-sm",e),...t}));FX.displayName="Toolbar";const h0=w.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:$e("w-px h-6 bg-border",e),...t}));h0.displayName="ToolbarSeparator";const ag=w.forwardRef(({className:e,...t},n)=>a.jsx("button",{ref:n,className:$e("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0","h-9 px-3 hover:bg-accent hover:text-accent-foreground",e),...t}));ag.displayName="ToolbarButton";function GTe({onWorkflowGenerated:e}){const{addNode:t,nodes:n}=Us(),r=()=>{const s=fo("ai-builder",n),o={id:`ai-builder-${Date.now()}`,type:"ai-builder",position:s,data:{isGenerating:!1}};t(o)};return a.jsxs(fe,{onClick:r,size:"sm",variant:"outline",className:"relative transition-all duration-300 group hover:bg-primary/10 hover:text-primary hover:scale-105",children:[a.jsx(ot.div,{animate:{rotate:0},transition:{duration:2,ease:"linear"},children:a.jsx(gr,{className:"h-4 w-4 mr-2"})}),"AI Builder",a.jsx(ot.div,{className:"absolute inset-0 rounded-md bg-primary/20",animate:{scale:[1,1.05,1],opacity:[0,.3,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}})]})}function UB({node:e}){var S,_,N,L,P,F,I;const{nodes:t,edges:n,addNode:r,getConnectedNodes:s}=Us(),{prompts:i}=ma(),{entries:o}=pa(),c=s(e.id),l=()=>{var D,M,U,H,$;const T=new Map;if(e.type==="prompt"&&((M=(D=e.data)==null?void 0:D.prompt)!=null&&M.context)){const R=e.data.prompt.context;R.framework&&T.set("framework",{data:R.framework,type:"framework"}),R.stage&&T.set("stage",{data:R.stage,type:"stage"}),R.tool&&T.set("tool",{data:R.tool,type:"tool"})}else(U=e.data)!=null&&U.framework&&T.set("framework",{data:e.data.framework,type:"framework"}),(H=e.data)!=null&&H.stage&&T.set("stage",{data:e.data.stage,type:"stage"}),($=e.data)!=null&&$.tool&&T.set("tool",{data:e.data.tool,type:"tool"}),!T.has("framework")&&c.frameworks.length>0&&T.set("framework",{data:c.frameworks[0].data,type:"framework"}),!T.has("stage")&&c.stages.length>0&&T.set("stage",{data:c.stages[0].data,type:"stage"}),!T.has("tool")&&c.tools.length>0&&T.set("tool",{data:c.tools[0].data,type:"tool"});return Array.from(T.values()).filter(R=>{var Y;return(Y=R.data)==null?void 0:Y.name}).sort((R,Y)=>{const X={framework:0,stage:1,tool:2};return X[R.type]-X[Y.type]})},d=()=>{var T;if(e.type==="tool"&&((T=e.data)!=null&&T.linkedKnowledge)){const Q=Array.isArray(e.data.linkedKnowledge)?e.data.linkedKnowledge:[];return o.filter(D=>Q.includes(D.id))}return[]},u=()=>i.filter(T=>{var Q,D,M,U,H,$,R;return e.type==="tool"?((D=(Q=T.context)==null?void 0:Q.tool)==null?void 0:D.id)===((U=(M=e.data)==null?void 0:M.tool)==null?void 0:U.id)||(($=(H=T.context)==null?void 0:H.tool)==null?void 0:$.id)===((R=e.data)==null?void 0:R.id):!1}),h=T=>{switch(T){case"framework":return a.jsx(gr,{className:"w-4 h-4"});case"stage":return a.jsx(Gu,{className:"w-4 h-4"});case"tool":return a.jsx(CA,{className:"w-4 h-4"});case"prompt":return a.jsx(In,{className:"w-4 h-4"});case"project":return a.jsx(yl,{className:"w-4 h-4"});default:return a.jsx(gr,{className:"w-4 h-4"})}},A=T=>{const Q=T.framework||T,D=M=>{const U={id:`stage-${M.id}-${Date.now()}`,type:"stage",position:{x:Math.random()*300+100,y:Math.random()*300+100},data:M};r(U)};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 rounded-lg mx-auto mb-2 flex items-center justify-center",style:{backgroundColor:Q.color},children:a.jsx(gr,{className:"w-6 h-6 text-white"})}),a.jsx("h3",{className:"font-semibold",children:Q.name}),a.jsx("p",{className:"text-xs text-muted-foreground",children:Q.description})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"font-medium text-sm",children:"Framework Characteristics"}),a.jsx("div",{className:"grid grid-cols-1 gap-2",children:Q.characteristics&&Object.entries(Q.characteristics).map(([M,U])=>a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsxs("span",{className:"text-muted-foreground capitalize",children:[M.replace(/([A-Z])/g," $1").trim(),":"]}),a.jsx("span",{className:"font-medium",children:String(U)})]},M))})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"font-medium text-sm",children:"Framework Stages"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Add stages to your workflow to access their tools"}),a.jsx("div",{className:"space-y-2",children:Q.stages&&Q.stages.map(M=>a.jsxs(fe,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>D(M),children:[a.jsx(ha,{className:"w-3 h-3 mr-2"}),"Add ",M.name," Stage"]},M.id))})]})]})},f=T=>{const Q=T.stage||T,D=n.filter(M=>M.source===e.id).map(M=>t.find(U=>U.id===M.target)).filter(M=>M&&M.type==="tool");return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 rounded-lg mx-auto mb-2 flex items-center justify-center bg-primary",children:a.jsx(Gu,{className:"w-6 h-6 text-white"})}),a.jsx("h3",{className:"font-semibold",children:Q.name}),a.jsx("p",{className:"text-xs text-muted-foreground",children:Q.description})]}),Q.characteristics&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-sm mb-3",children:"Stage Information"}),a.jsxs("div",{className:"grid gap-3",children:[Q.characteristics.duration&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Jo,{className:"w-3 h-3 text-muted-foreground"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"Duration:"}),a.jsx("span",{className:"text-xs font-medium",children:Q.characteristics.duration})]}),Q.characteristics.participants&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(qa,{className:"w-3 h-3 text-muted-foreground"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"Participants:"}),a.jsx("span",{className:"text-xs font-medium",children:Q.characteristics.participants})]}),Q.characteristics.deliverables&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Mr,{className:"w-3 h-3 text-muted-foreground"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"Deliverables:"}),a.jsx("span",{className:"text-xs font-medium",children:Q.characteristics.deliverables})]})]})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium text-sm mb-3",children:["Connected UX Tools (",D.length,")"]}),D.length>0?a.jsx("div",{className:"space-y-2",children:D.map(M=>{var U,H,$,R,Y,X,q,K,J;return a.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded-md",children:[a.jsx(CA,{className:"w-3 h-3 text-muted-foreground"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-medium",children:String(((H=(U=M.data)==null?void 0:U.tool)==null?void 0:H.name)||(($=M.data)==null?void 0:$.name)||"Unknown Tool")}),a.jsx("p",{className:"text-xs text-muted-foreground",children:String(((Y=(R=M.data)==null?void 0:R.tool)==null?void 0:Y.description)||((X=M.data)==null?void 0:X.description)||"No description")})]}),a.jsx(_e,{variant:"secondary",className:"text-xs",children:String(((K=(q=M.data)==null?void 0:q.tool)==null?void 0:K.category)||((J=M.data)==null?void 0:J.category)||"Uncategorized")})]},M.id)})}):a.jsxs("div",{className:"text-center py-4 text-muted-foreground",children:[a.jsx(CA,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-xs",children:"No UX tools connected to this stage yet"}),a.jsx("p",{className:"text-xs mt-1",children:"Connect tool nodes to see them here"})]})]})]})},m=T=>{const Q=T.tool||T,D=i.filter(M=>{var U,H,$,R;return((H=(U=M.context)==null?void 0:U.tool)==null?void 0:H.id)===Q.id||((R=($=M.context)==null?void 0:$.tool)==null?void 0:R.id)===T.id});return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 rounded-lg mx-auto mb-2 flex items-center justify-center bg-secondary",children:a.jsx(CA,{className:"w-6 h-6 text-secondary-foreground"})}),a.jsx("h3",{className:"font-semibold",children:Q.name}),a.jsx("p",{className:"text-xs text-muted-foreground",children:Q.description})]}),Q.category&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-sm mb-2",children:"Category"}),a.jsx(_e,{variant:"outline",className:"text-xs",children:Q.category})]}),Q.characteristics&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-sm mb-3",children:"Tool Characteristics"}),a.jsx("div",{className:"grid gap-3",children:Object.entries(Q.characteristics).map(([M,U])=>M==="resources"&&Array.isArray(U)?a.jsxs("div",{children:[a.jsxs("span",{className:"text-xs text-muted-foreground capitalize",children:[M.replace(/([A-Z])/g," $1").trim(),":"]}),a.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:U.map((H,$)=>a.jsx(_e,{variant:"secondary",className:"text-xs",children:H},$))})]},M):a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-primary"}),a.jsxs("span",{className:"text-xs text-muted-foreground capitalize",children:[M.replace(/([A-Z])/g," $1").trim(),":"]}),a.jsx("span",{className:"text-xs font-medium",children:String(U)})]},M))})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-sm mb-3",children:"Generated Prompts"}),D.length>0?a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(In,{className:"w-4 h-4 text-primary"}),a.jsxs("span",{className:"text-sm font-medium",children:[D.length," prompts generated"]})]}),a.jsxs("div",{className:"space-y-1",children:[D.slice(0,3).map((M,U)=>a.jsxs("div",{className:"p-2 border rounded-md bg-muted/50",children:[a.jsxs("p",{className:"text-xs font-medium mb-1",children:["Prompt ",U+1]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(M.timestamp).toLocaleDateString()})]},U)),D.length>3&&a.jsxs("p",{className:"text-xs text-muted-foreground text-center py-1",children:["+",D.length-3," more prompts"]})]})]}):a.jsxs("div",{className:"text-center py-4 text-muted-foreground",children:[a.jsx(In,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-xs",children:"No prompts generated yet"}),a.jsx("p",{className:"text-xs mt-1",children:"Click on this tool to generate prompts"})]})]})]})},g=T=>{const Q=T.prompt||T;return a.jsxs("div",{className:"space-y-4",children:[Q.content&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-sm mb-2",children:"Prompt Content"}),a.jsx("div",{className:"p-3 bg-muted/50 rounded-md border",children:a.jsx("p",{className:"text-xs font-mono whitespace-pre-wrap",children:Q.content.length>200?`${Q.content.substring(0,200)}...`:Q.content})})]}),Q.variables&&Object.keys(Q.variables).length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-sm mb-2",children:"Variables"}),a.jsx("div",{className:"space-y-2",children:Object.entries(Q.variables).map(([D,M])=>a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsxs("span",{className:"text-muted-foreground",children:[D,":"]}),a.jsx("span",{className:"font-medium",children:String(M)})]},D))})]})]})},b=T=>{const Q=T.project||T;return a.jsxs("div",{className:"space-y-4",children:[Q.name&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-sm mb-2",children:"Project Name"}),a.jsx("p",{className:"text-sm",children:Q.name})]}),Q.description&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-sm mb-2",children:"Description"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:Q.description})]})]})},y=()=>{const{data:T}=e;switch(e.type){case"framework":return A(T);case"stage":return f(T);case"tool":return m(T);case"prompt":return g(T);case"project":return b(T);default:return a.jsx("div",{className:"text-sm text-muted-foreground",children:"No specific details available for this node type."})}},j=l(),x=d(),C=u();return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[h(e.type),a.jsx("div",{children:a.jsx("h3",{className:"font-semibold text-sm capitalize",children:((_=(S=e.data)==null?void 0:S.tool)==null?void 0:_.name)||((L=(N=e.data)==null?void 0:N.stage)==null?void 0:L.name)||((F=(P=e.data)==null?void 0:P.framework)==null?void 0:F.name)||((I=e.data)==null?void 0:I.name)||`${e.type} Node`})})]}),j.length>0&&a.jsx(a.Fragment,{children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h4",{className:"font-medium text-sm flex items-center gap-2",children:[a.jsx(v7,{className:"w-4 h-4"}),"Connection Path"]}),a.jsx("div",{className:"p-3 border border-border bg-muted/50 rounded-md",children:a.jsx("div",{className:"flex items-center flex-wrap gap-2",children:j.map((T,Q)=>{var D;return a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_e,{variant:T.type==="framework"?"default":"outline",className:"text-xs",children:(D=T.data)==null?void 0:D.name}),Q<j.length-1&&a.jsx(_r,{className:"w-3 h-3 text-muted-foreground"})]},Q)})})})]})}),x.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h4",{className:"font-medium text-sm flex items-center gap-2",children:[a.jsx(Xo,{className:"w-4 h-4"}),"Linked Knowledge (",x.length,")"]}),a.jsx("div",{className:"space-y-2",children:x.map(T=>a.jsx("div",{className:"p-2 border rounded-md bg-muted/30",children:a.jsxs("div",{className:"flex items-center gap-2",children:[T.type==="document"?a.jsx(In,{className:"w-3 h-3 text-muted-foreground"}):T.type==="image"?a.jsx(Xo,{className:"w-3 h-3 text-muted-foreground"}):a.jsx(In,{className:"w-3 h-3 text-muted-foreground"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-medium",children:T.title}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[T.type,"  ",new Date(T.created_at).toLocaleDateString()]})]})]})},T.id))})]}),C.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h4",{className:"font-medium text-sm flex items-center gap-2",children:[a.jsx(Rg,{className:"w-4 h-4"}),"Generated Prompts (",C.length,")"]}),a.jsxs("div",{className:"space-y-2",children:[C.slice(0,3).map((T,Q)=>{var D,M,U;return a.jsxs("div",{className:"p-2 border rounded-md bg-primary/5",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(gr,{className:"w-3 h-3 text-primary"}),a.jsxs("p",{className:"text-xs font-medium",children:["Prompt ",Q+1,T.output&&a.jsx(_e,{variant:"default",className:"ml-2 text-xs bg-success",children:"Generated"})]})]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Created: ",new Date(T.timestamp).toLocaleString()]}),T.context&&a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(D=T.context.framework)==null?void 0:D.name,"  ",(M=T.context.stage)==null?void 0:M.name,"  ",(U=T.context.tool)==null?void 0:U.name]})]},T.id||Q)}),C.length>3&&a.jsxs("p",{className:"text-xs text-muted-foreground text-center py-1",children:["+",C.length-3," more prompts"]})]})]}),a.jsx(qd,{}),y()]})}function YTe({isOpen:e,onClose:t,onPromptSelected:n}){const{prompts:r,loading:s,fetchLibraryPrompts:i}=Mw(),[o,c]=w.useState(""),[l,d]=w.useState([]);w.useEffect(()=>{e&&i({sortBy:"updated_at_desc"})},[e,i]),w.useEffect(()=>{if(!o.trim())d(r);else{const A=o.toLowerCase(),f=r.filter(m=>{var g,b,y;return m.title.toLowerCase().includes(A)||((g=m.description)==null?void 0:g.toLowerCase().includes(A))||((b=m.tool_name)==null?void 0:b.toLowerCase().includes(A))||((y=m.framework_name)==null?void 0:y.toLowerCase().includes(A))});d(f)}},[o,r]);const u=A=>{n(A),t()},h=A=>{const f=new Date(A),g=Math.floor((new Date().getTime()-f.getTime())/(1e3*60*60*24));return g===0?"Today":g===1?"Yesterday":g<7?`${g} days ago`:g<30?`${Math.floor(g/7)} weeks ago`:g<365?`${Math.floor(g/30)} months ago`:f.toLocaleDateString()};return a.jsx(zd,{open:e,onOpenChange:t,children:a.jsxs(_l,{className:"max-w-3xl max-h-[80vh]",children:[a.jsxs(Il,{children:[a.jsxs(Pl,{className:"flex items-center gap-2",children:[a.jsx(gr,{className:"w-5 h-5 text-primary"}),"Select Custom Prompt"]}),a.jsx(Vd,{children:"Choose a custom prompt from your library to add to the canvas"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(mw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),a.jsx(ln,{placeholder:"Search prompts by title, description, tool, or framework...",value:o,onChange:A=>c(A.target.value),className:"pl-9"})]}),a.jsx(ns,{className:"h-[400px] pr-4",children:s?a.jsx("div",{className:"flex items-center justify-center h-40",children:a.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading prompts..."})}):l.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-center",children:[a.jsx(In,{className:"w-12 h-12 text-muted-foreground mb-3"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:o?"No prompts found matching your search":"No custom prompts available"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:!o&&"Create prompts in the Prompt Library to use them here"})]}):a.jsx("div",{className:"grid gap-3",children:l.map(A=>a.jsx(De,{className:"p-4 hover:bg-accent cursor-pointer transition-colors",onClick:()=>u(A),children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-sm mb-1 truncate",children:A.title}),A.description&&a.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 mb-2",children:A.description}),a.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-2",children:[A.tool_name&&a.jsx(_e,{variant:"secondary",className:"text-xs",children:A.tool_name}),A.framework_name&&a.jsx(_e,{variant:"outline",className:"text-xs",children:A.framework_name}),A.stage_name&&a.jsx(_e,{variant:"outline",className:"text-xs",children:A.stage_name}),A.run_count>0&&a.jsxs(_e,{variant:"outline",className:"text-xs",children:[a.jsx(Kd,{className:"w-3 h-3 mr-1"}),A.run_count," runs"]})]}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(Jo,{className:"w-3 h-3"}),a.jsxs("span",{children:["Updated ",h(A.updated_at)]})]})]}),a.jsx(fe,{size:"sm",onClick:f=>{f.stopPropagation(),u(A)},children:"Select"})]})},A.id))})}),a.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[a.jsxs("p",{className:"text-xs text-muted-foreground",children:[l.length," prompt",l.length!==1?"s":""," available"]}),a.jsx(fe,{variant:"outline",onClick:t,children:"Cancel"})]})]})})}function XTe({isOpen:e,onClose:t,onClearSelection:n,selectedNode:r}){const{frameworks:s,nodes:i,addNode:o,selectFramework:c,addEdge:l}=Us(),[d,u]=w.useState("main"),[h,A]=w.useState(null),[f,m]=w.useState(null),[g,b]=w.useState(!1);if(!e)return null;const y=()=>i.filter(D=>D.type==="framework"),j=()=>{const D=y();return s.filter(M=>D.some(U=>{var H;return((H=U.data.framework)==null?void 0:H.id)===M.id}))},x=()=>{const D=i.filter(U=>U.type==="stage"),M=[];return D.forEach(U=>{U.data.stage&&U.data.framework&&M.push({stage:U.data.stage,framework:U.data.framework,nodeId:U.id})}),M},C=D=>{c(D);const M=fo("framework",i),U={id:`framework-${D.id}`,type:"framework",position:M,data:{framework:D,isSelected:!0}};o(U),n==null||n(),t()},S=(D,M)=>{const U=i.find(Y=>{var X;return Y.type==="framework"&&((X=Y.data.framework)==null?void 0:X.id)===M.id});if(!U){Ue.error(`You need to add the ${M.name} framework first before adding its stages.`);return}const H=fo("stage",i),$={id:`stage-${D.id}-${Date.now()}`,type:"stage",position:H,data:{stage:D,framework:M,isActive:!1,isDone:!1}};o($);const R=sm(U.id,$.id,{type:"default"});l(R),n==null||n(),t()},_=(D,M,U)=>{const H=i.find(X=>{var q,K;return X.type==="stage"&&((q=X.data.stage)==null?void 0:q.id)===U.id&&((K=X.data.framework)==null?void 0:K.id)===M.id});if(!H){Ue.error(`You need to add the ${U.name} stage from ${M.name} framework first before adding its tools.`);return}const $=fo("tool",i),R={id:`tool-${D.id}-${Date.now()}`,type:"tool",position:$,data:{tool:D,framework:M,stage:U,isActive:!1,isDone:!1}};o(R);const Y=sm(H.id,R.id,{type:"default"});l(Y),n==null||n(),t()},N=D=>{const M=fo("custom-prompt",i),U={id:`custom-prompt-${D.id}-${Date.now()}`,type:"custom-prompt",position:M,data:{prompt:D,linkedKnowledge:[],isActive:!1,isCompleted:!1}};o(U),n==null||n(),t(),Ue.success(`Custom prompt "${D.title}" added to canvas`)},L=()=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs(fe,{variant:"ghost",className:"w-full justify-between p-4 h-auto",onClick:()=>u("frameworks"),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(gr,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"font-medium",children:"Add UX Framework"}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Choose from ",s.length," available frameworks"]})]})]}),a.jsx(_r,{className:"h-4 w-4"})]}),a.jsxs(fe,{variant:"ghost",className:"w-full justify-between p-4 h-auto",onClick:()=>u("stages"),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Gu,{className:"h-5 w-5 text-blue-500"}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"font-medium",children:"Add UX Stage"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Add stages from any framework"})]})]}),a.jsx(_r,{className:"h-4 w-4"})]}),a.jsxs(fe,{variant:"ghost",className:"w-full justify-between p-4 h-auto",onClick:()=>u("tools"),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(us,{className:"h-5 w-5 text-green-500"}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"font-medium",children:"Add UX Tool"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Browse tools by framework and stage"})]})]}),a.jsx(_r,{className:"h-4 w-4"})]}),a.jsxs(fe,{variant:"ghost",className:"w-full justify-between p-4 h-auto",onClick:()=>b(!0),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(In,{className:"h-5 w-5 text-purple-500"}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"font-medium",children:"Add Custom Prompt"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Use prompts from your library"})]})]}),a.jsx(_r,{className:"h-4 w-4"})]})]}),P=()=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>u("main"),className:"mb-2",children:[a.jsx(_r,{className:"h-4 w-4 rotate-180 mr-1"}),"Back"]}),a.jsx("div",{className:"space-y-1",children:s.map(D=>a.jsx(fe,{variant:"ghost",className:"w-full justify-start p-3 h-auto",onClick:()=>C(D),children:a.jsxs("div",{className:"flex items-center space-x-3 w-full",children:[a.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:D.color}}),a.jsxs("div",{className:"flex-1 text-left",children:[a.jsx("div",{className:"font-medium",children:D.name}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[D.stages.length," stages"]})]})]})},D.id))})]}),F=()=>{const D=j();return a.jsxs("div",{className:"space-y-2",children:[a.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>u("main"),className:"mb-2",children:[a.jsx(_r,{className:"h-4 w-4 rotate-180 mr-1"}),"Back"]}),D.length===0?a.jsxs("div",{className:"p-4 text-center",children:[a.jsx(ts,{className:"w-8 h-8 text-yellow-500 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"No frameworks available"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Add a UX Framework first to enable stage selection"})]}):a.jsx("div",{className:"space-y-3",children:D.map(M=>(y().some(U=>{var H;return((H=U.data.framework)==null?void 0:H.id)===M.id}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"px-2 py-1.5 text-xs font-semibold text-muted-foreground border-b border-border flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 rounded",style:{backgroundColor:M.color}}),M.name,a.jsx(_e,{variant:"outline",className:"text-xs",children:"On Canvas"})]}),M.stages.map(U=>a.jsx(fe,{variant:"ghost",className:"w-full justify-start p-3 h-auto ml-2",onClick:()=>S(U,M),children:a.jsxs("div",{className:"flex items-center space-x-2 w-full",children:[a.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:M.color}}),a.jsxs("div",{className:"flex-1 text-left",children:[a.jsx("div",{className:"text-sm",children:U.name}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[U.tools.length," tools"]})]})]})},`${M.id}-${U.id}`))]},M.id)))})]})},I=()=>{const D=x();if(h&&f)return D.some(U=>U.stage.id===f.id&&U.framework.id===h.id)?a.jsxs("div",{className:"space-y-2",children:[a.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>{m(null),A(null)},className:"mb-2",children:[a.jsx(_r,{className:"h-4 w-4 rotate-180 mr-1"}),"Back to Frameworks"]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("div",{className:"text-sm font-medium",children:h.name}),a.jsx("div",{className:"text-xs text-muted-foreground",children:f.name})]}),a.jsx("div",{className:"space-y-1",children:f.tools.map(U=>a.jsx(fe,{variant:"ghost",className:"w-full justify-start p-3 h-auto",onClick:()=>_(U,h,f),children:a.jsxs("div",{className:"flex items-center space-x-2 w-full",children:[a.jsx("div",{className:"w-2 h-2 rounded",style:{backgroundColor:h.color}}),a.jsxs("div",{className:"flex-1 text-left",children:[a.jsx("div",{className:"text-sm",children:U.name}),a.jsx("div",{className:"text-xs text-muted-foreground truncate",children:U.description})]})]})},U.id))})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>{m(null),A(null)},className:"mb-2",children:[a.jsx(_r,{className:"h-4 w-4 rotate-180 mr-1"}),"Back to Frameworks"]}),a.jsxs("div",{className:"p-4 text-center",children:[a.jsx(ts,{className:"w-8 h-8 text-yellow-500 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Stage not available"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Add the ",f.name," stage to the canvas first"]})]})]});if(h){const M=D.filter(U=>U.framework.id===h.id);return M.length===0?a.jsxs("div",{className:"space-y-2",children:[a.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>A(null),className:"mb-2",children:[a.jsx(_r,{className:"h-4 w-4 rotate-180 mr-1"}),"Back to Frameworks"]}),a.jsxs("div",{className:"p-4 text-center",children:[a.jsx(ts,{className:"w-8 h-8 text-yellow-500 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"No stages available"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Add stages from ",h.name," framework first"]})]})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>A(null),className:"mb-2",children:[a.jsx(_r,{className:"h-4 w-4 rotate-180 mr-1"}),"Back to Frameworks"]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("div",{className:"text-sm font-medium",children:h.name}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Choose a stage"})]}),a.jsx("div",{className:"space-y-1",children:M.map(U=>a.jsxs(fe,{variant:"ghost",className:"w-full justify-between p-3 h-auto",onClick:()=>m(U.stage),children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:h.color}}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"text-sm",children:U.stage.name}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[U.stage.tools.length," tools"]})]}),a.jsx(_e,{variant:"outline",className:"text-xs ml-auto mr-2",children:"On Canvas"})]}),a.jsx(_r,{className:"h-4 w-4"})]},U.stage.id))})]})}return a.jsxs("div",{className:"space-y-2",children:[a.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>u("main"),className:"mb-2",children:[a.jsx(_r,{className:"h-4 w-4 rotate-180 mr-1"}),"Back"]}),D.length===0?a.jsxs("div",{className:"p-4 text-center",children:[a.jsx(ts,{className:"w-8 h-8 text-yellow-500 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"No stages available"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Add UX Frameworks and Stages to the canvas first"})]}):a.jsx("div",{className:"space-y-3",children:Object.entries(D.reduce((M,U)=>{const H=U.framework.id;return M[H]||(M[H]={framework:U.framework,stages:[]}),M[H].stages.push(U),M},{})).map(([M,U])=>a.jsxs(fe,{variant:"ghost",className:"w-full justify-between p-3 h-auto",onClick:()=>A(U.framework),children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:U.framework.color}}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"font-medium",children:U.framework.name}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[U.stages.length," stages available"]})]})]}),a.jsx(_r,{className:"h-4 w-4"})]},M))})]})},T=()=>{if(!r)return null;if(r.type==="framework"){const D=r.data.framework;return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border-b border-border pb-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:D.color}}),a.jsx("span",{className:"font-medium text-sm",children:D.name}),a.jsx(_e,{variant:"outline",className:"text-xs",children:"Selected"})]}),a.jsx(UB,{node:r})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Add Stages"}),a.jsx("div",{className:"space-y-1",children:D.stages.map(M=>a.jsx(fe,{variant:"ghost",className:"w-full justify-start p-3 h-auto",onClick:()=>S(M,D),children:a.jsxs("div",{className:"flex items-center space-x-2 w-full",children:[a.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:D.color}}),a.jsxs("div",{className:"flex-1 text-left",children:[a.jsx("div",{className:"text-sm",children:M.name}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[M.tools.length," tools"]})]})]})},M.id))})]})]})}if(r.type==="stage"){const D=r.data.stage,M=r.data.framework;return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border-b border-border pb-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:M.color}}),a.jsx("span",{className:"font-medium text-sm",children:M.name}),a.jsx(_r,{className:"w-3 h-3 text-muted-foreground"}),a.jsx("span",{className:"font-medium text-sm",children:D.name}),a.jsx(_e,{variant:"outline",className:"text-xs",children:"Selected"})]}),a.jsx(UB,{node:r})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Add Tools"}),a.jsx("div",{className:"space-y-1",children:D.tools.map(U=>a.jsx(fe,{variant:"ghost",className:"w-full justify-start p-3 h-auto",onClick:()=>_(U,M,D),children:a.jsxs("div",{className:"flex items-center space-x-2 w-full",children:[a.jsx("div",{className:"w-2 h-2 rounded",style:{backgroundColor:M.color}}),a.jsxs("div",{className:"flex-1 text-left",children:[a.jsx("div",{className:"text-sm",children:U.name}),a.jsx("div",{className:"text-xs text-muted-foreground truncate",children:U.description})]})]})},U.id))})]})]})}if(r.type==="tool"){const D=r.data.tool,M=r.data.framework,U=r.data.stage;return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border-b border-border pb-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:M.color}}),a.jsx("span",{className:"font-medium text-sm",children:M.name}),a.jsx(_r,{className:"w-3 h-3 text-muted-foreground"}),a.jsx("span",{className:"text-sm",children:U.name}),a.jsx(_r,{className:"w-3 h-3 text-muted-foreground"}),a.jsx("span",{className:"font-medium text-sm",children:D.name}),a.jsx(_e,{variant:"outline",className:"text-xs",children:"Selected"})]}),a.jsx(UB,{node:r})]}),a.jsxs("div",{className:"p-4 text-center",children:[a.jsx(us,{className:"w-8 h-8 text-muted-foreground mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Tool Selected"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"This tool has no child elements to add. You can interact with it directly on the canvas."})]})]})}return null},Q=()=>{if(r)return T();switch(d){case"frameworks":return P();case"stages":return F();case"tools":return I();default:return L()}};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"fixed right-0 top-[3.5rem] h-[calc(100vh-4rem)] w-80 bg-card border-l border-border shadow-lg z-40 flex flex-col",children:[a.jsxs("div",{className:"border-b border-border p-4 flex items-center justify-between",children:[a.jsx("h3",{className:"font-semibold text-sm",children:"Add Elements"}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:t,className:"w-8 h-8 p-0",children:a.jsx(_i,{className:"w-4 h-4"})})]}),a.jsx(ns,{className:"flex-1 p-4",children:Q()})]}),a.jsx(YTe,{isOpen:g,onClose:()=>b(!1),onPromptSelected:N})]})}const JTe=[{title:"Canvas Movement",shortcuts:[{keys:"Ctrl + Left Mouse + Drag",description:"Move canvas view"},{keys:"Ctrl + Middle Mouse + Drag",description:"Move canvas view"},{keys:"Space + Drag",description:"Move canvas view"},{keys:"Middle Mouse + Drag",description:"Move canvas view"},{keys:"Two Fingers (Touch)",description:"Move canvas view"}]},{title:"Canvas Zoom",shortcuts:[{keys:"+ or =",description:"Zoom in"},{keys:"- or _",description:"Zoom out"},{keys:"0",description:"Reset zoom level"},{keys:"1",description:"Zoom to fit workflow"},{keys:"Ctrl + Mouse Wheel",description:"Zoom in/out"}]},{title:"Node Interaction",shortcuts:[{keys:"Double Click on Node",description:"Open node details"},{keys:"Ctrl + A",description:"Select all nodes"},{keys:"Click + Drag",description:"Move node"}]},{title:"Node Selection & Navigation",shortcuts:[{keys:"Arrow Up",description:"Select sibling node above"},{keys:"Arrow Down",description:"Select sibling node below"},{keys:"Arrow Left",description:"Select node to the left"},{keys:"Arrow Right",description:"Select node to the right"},{keys:"Shift + Arrow Left",description:"Select all nodes to the left"},{keys:"Shift + Arrow Right",description:"Select all nodes to the right"}]},{title:"Node Actions (with selection)",shortcuts:[{keys:"Ctrl + C",description:"Copy selected nodes"},{keys:"Ctrl + V",description:"Paste nodes"},{keys:"Ctrl + X",description:"Cut selected nodes"},{keys:"Delete or Backspace",description:"Delete selected nodes"},{keys:"Enter",description:"Open selected node"},{keys:"F2",description:"Rename selected node"},{keys:"Shift + S",description:"Add sticky note"}]},{title:"Multi-Selection",shortcuts:[{keys:"Ctrl/Cmd + Click",description:"Add/remove node from selection"},{keys:"Shift + Click",description:"Select multiple nodes"},{keys:"Drag Selection Box",description:"Select multiple nodes (marquee mode)"}]}];function ZTe({isOpen:e,onClose:t}={}){return a.jsxs(zd,{open:e,onOpenChange:t,children:[a.jsx(GT,{asChild:!0,children:a.jsxs(fe,{variant:"outline",size:"sm",className:"gap-2",children:[a.jsx(Cue,{className:"h-4 w-4"}),"Keyboard Shortcuts"]})}),a.jsxs(_l,{className:"max-w-3xl max-h-[80vh]",children:[a.jsxs(Il,{children:[a.jsx(Pl,{children:"Keyboard Shortcuts"}),a.jsx(Vd,{children:"Master these shortcuts to work efficiently with the canvas"})]}),a.jsx(ns,{className:"h-[60vh] pr-4",children:a.jsx("div",{className:"space-y-6",children:JTe.map(n=>a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:"font-semibold text-lg border-b pb-2",children:n.title}),a.jsx("div",{className:"space-y-2",children:n.shortcuts.map((r,s)=>a.jsxs("div",{className:"flex items-center justify-between py-2 px-3 rounded-md hover:bg-muted/50 transition-colors",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:r.description}),a.jsx("kbd",{className:"px-3 py-1.5 text-xs font-semibold text-gray-800 bg-gray-100 border border-gray-200 rounded-lg dark:bg-gray-600 dark:text-gray-100 dark:border-gray-500 whitespace-nowrap",children:r.keys})]},s))})]},n.title))})})]})]})}function eFe({onClearSelection:e,isMarqueeMode:t,onToggleMarqueeMode:n,zoom:r,onZoomIn:s,onZoomOut:i,onFitView:o,onApplyLayout:c,selectedNode:l}){const{nodes:d,setNodes:u,addNode:h,addEdge:A,frameworks:f,selectFramework:m}=Us(),[g,b]=w.useState(!1),[y,j]=w.useState(!1),x=()=>{if(c)c();else{const S=dIe(d);u(S)}e==null||e()},C=(S,_)=>{e==null||e()};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-30",children:a.jsxs(FX,{className:"bg-card/95 backdrop-blur-sm border shadow-lg",children:[a.jsx(ag,{onClick:o,title:"Fit view",children:a.jsx(Due,{className:"h-4 w-4"})}),a.jsx(h0,{}),a.jsx(ag,{onClick:x,title:"Rearrange nodes automatically",children:a.jsx(m7,{className:"h-4 w-4"})}),a.jsx(ag,{onClick:n,title:t?"Exit drag selection mode":"Enable drag selection mode",className:t?"bg-primary text-primary-foreground":"",children:t?a.jsx(b7,{className:"h-4 w-4"}):a.jsx(x7,{className:"h-4 w-4"})}),a.jsx(h0,{}),a.jsx(GTe,{onWorkflowGenerated:C}),a.jsx(h0,{}),a.jsx(ag,{onClick:()=>b(!0),title:"Add new element to canvas",className:g?"bg-primary text-primary-foreground":"",children:a.jsx(ha,{className:"h-4 w-4"})}),a.jsx(h0,{}),a.jsx(ag,{onClick:()=>j(!0),title:"Keyboard shortcuts",children:a.jsx(Qde,{className:"h-4 w-4"})})]})}),y&&a.jsx(ZTe,{isOpen:y,onClose:()=>j(!1)}),a.jsx(XTe,{isOpen:g,onClose:()=>b(!1),onClearSelection:e,selectedNode:l})]})}var Zk="Popover",[DX,hqe]=Cs(Zk,[rk]),Rw=rk(),[tFe,ff]=DX(Zk),UX=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!1}=e,c=Rw(t),l=w.useRef(null),[d,u]=w.useState(!1),[h,A]=fa({prop:r,defaultProp:s??!1,onChange:i,caller:Zk});return a.jsx(nz,{...c,children:a.jsx(tFe,{scope:t,contentId:$a(),triggerRef:l,open:h,onOpenChange:A,onOpenToggle:w.useCallback(()=>A(f=>!f),[A]),hasCustomAnchor:d,onCustomAnchorAdd:w.useCallback(()=>u(!0),[]),onCustomAnchorRemove:w.useCallback(()=>u(!1),[]),modal:o,children:n})})};UX.displayName=Zk;var LX="PopoverAnchor",nFe=w.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=ff(LX,n),i=Rw(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:c}=s;return w.useEffect(()=>(o(),()=>c()),[o,c]),a.jsx(x4,{...i,...r,ref:t})});nFe.displayName=LX;var MX="PopoverTrigger",RX=w.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=ff(MX,n),i=Rw(n),o=Wt(t,s.triggerRef),c=a.jsx(gt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":zX(s.open),...r,ref:o,onClick:nn(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?c:a.jsx(x4,{asChild:!0,...i,children:c})});RX.displayName=MX;var xF="PopoverPortal",[rFe,sFe]=DX(xF,{forceMount:void 0}),OX=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,i=ff(xF,t);return a.jsx(rFe,{scope:t,forceMount:n,children:a.jsx(Ya,{present:n||i.open,children:a.jsx(Lv,{asChild:!0,container:s,children:r})})})};OX.displayName=xF;var Ev="PopoverContent",QX=w.forwardRef((e,t)=>{const n=sFe(Ev,e.__scopePopover),{forceMount:r=n.forceMount,...s}=e,i=ff(Ev,e.__scopePopover);return a.jsx(Ya,{present:r||i.open,children:i.modal?a.jsx(aFe,{...s,ref:t}):a.jsx(oFe,{...s,ref:t})})});QX.displayName=Ev;var iFe=GA("PopoverContent.RemoveScroll"),aFe=w.forwardRef((e,t)=>{const n=ff(Ev,e.__scopePopover),r=w.useRef(null),s=Wt(t,r),i=w.useRef(!1);return w.useEffect(()=>{const o=r.current;if(o)return bk(o)},[]),a.jsx(Bw,{as:iFe,allowPinchZoom:!0,children:a.jsx(HX,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:nn(e.onCloseAutoFocus,o=>{var c;o.preventDefault(),i.current||(c=n.triggerRef.current)==null||c.focus()}),onPointerDownOutside:nn(e.onPointerDownOutside,o=>{const c=o.detail.originalEvent,l=c.button===0&&c.ctrlKey===!0,d=c.button===2||l;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:nn(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),oFe=w.forwardRef((e,t)=>{const n=ff(Ev,e.__scopePopover),r=w.useRef(!1),s=w.useRef(!1);return a.jsx(HX,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,c;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(c=n.triggerRef.current)==null||c.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,d;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),HX=w.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:d,onInteractOutside:u,...h}=e,A=ff(Ev,n),f=Rw(n);return VW(),a.jsx(kw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(fw,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:d,onDismiss:()=>A.onOpenChange(!1),children:a.jsx(rz,{"data-state":zX(A.open),role:"dialog",id:A.contentId,...f,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),$X="PopoverClose",cFe=w.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=ff($X,n);return a.jsx(gt.button,{type:"button",...r,ref:t,onClick:nn(e.onClick,()=>s.onOpenChange(!1))})});cFe.displayName=$X;var lFe="PopoverArrow",dFe=w.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Rw(n);return a.jsx(sz,{...s,...r,ref:t})});dFe.displayName=lFe;function zX(e){return e?"open":"closed"}var uFe=UX,hFe=RX,AFe=OX,VX=QX;const qX=uFe,KX=hFe,wF=w.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},s)=>a.jsx(AFe,{children:a.jsx(VX,{ref:s,align:t,sideOffset:n,className:$e("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));wF.displayName=VX.displayName;const N1=({user:e,size:t="sm"})=>{const n=t==="sm"?"w-8 h-8 text-xs":"w-10 h-10 text-sm";if(e.avatarUrl)return a.jsx("img",{src:e.avatarUrl,alt:e.displayName||"User",className:`${n} rounded-full ring-2`,style:{ringColor:e.color}});const r=(e.displayName||e.email||"?").split(" ").map(s=>s[0]).join("").toUpperCase().slice(0,2);return a.jsx("div",{className:`${n} rounded-full flex items-center justify-center font-semibold text-white ring-2`,style:{backgroundColor:e.color,ringColor:e.color},children:r})};function fFe({collaborators:e,isConnected:t,myColor:n,currentUserName:r="You"}){const[s,i]=w.useState(!1),o=e.length+1;return a.jsx("div",{className:"absolute top-4 right-4 z-10",children:a.jsxs(qX,{open:s,onOpenChange:i,children:[a.jsx(KX,{asChild:!0,children:a.jsxs(fe,{variant:"outline",className:"flex items-center gap-2 bg-white shadow-lg hover:shadow-xl transition-shadow",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(A7,{className:`w-2 h-2 ${t?"fill-green-500 text-green-500":"fill-gray-400 text-gray-400"}`}),a.jsx(qa,{className:"w-4 h-4"})]}),a.jsxs("div",{className:"flex -space-x-2",children:[a.jsx(N1,{user:{displayName:r,color:n},size:"sm"}),e.slice(0,3).map(c=>a.jsx(N1,{user:c,size:"sm"},c.userId))]}),o>1&&a.jsx(_e,{variant:"secondary",className:"ml-1",children:o}),s?a.jsx(Zj,{className:"w-4 h-4"}):a.jsx(Ic,{className:"w-4 h-4"})]})}),a.jsx(wF,{className:"w-80 p-4",align:"end",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"font-semibold text-sm",children:"Active Collaborators"}),a.jsx(_e,{variant:t?"default":"secondary",children:t?"Connected":"Disconnected"})]}),a.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[a.jsxs(ot.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"flex items-center gap-3 p-2 rounded-lg bg-gray-50",children:[a.jsx(N1,{user:{displayName:r,color:n},size:"md"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("p",{className:"font-medium text-sm truncate",children:[r," (You)"]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Editing"})]}),a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:n}})]}),a.jsx(Pr,{children:e.map((c,l)=>{const d=Date.now()-c.lastActive<5e3;return a.jsxs(ot.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{delay:l*.05},className:`flex items-center gap-3 p-2 rounded-lg ${d?"bg-blue-50":"bg-gray-50"}`,children:[a.jsx(N1,{user:c,size:"md"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium text-sm truncate",children:c.displayName||c.email||"Anonymous"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:d?"Editing":"Viewing"})]}),a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:c.color}})]},c.userId)})}),e.length===0&&a.jsxs("div",{className:"text-center py-8 text-sm text-muted-foreground",children:[a.jsx(qa,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"You're the only one here"}),a.jsx("p",{className:"text-xs mt-1",children:"Share this project to collaborate"})]})]}),t&&e.length>0&&a.jsx("div",{className:"pt-3 border-t text-xs text-muted-foreground",children:a.jsx("p",{children:"Collaborators can see your cursor and selections in real-time"})})]})})]})})}function pFe({collaborators:e,viewport:t}){return a.jsx("div",{className:"pointer-events-none absolute inset-0 z-50",children:a.jsx(Pr,{children:e.map(n=>{if(n.cursorX===void 0||n.cursorY===void 0||!(Date.now()-n.lastActive<5e3))return null;const s=n.cursorX*t.zoom+t.x,i=n.cursorY*t.zoom+t.y;return a.jsxs(ot.div,{className:"absolute",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1,x:s,y:i},exit:{opacity:0,scale:.5},transition:{type:"spring",stiffness:500,damping:30},style:{left:0,top:0},children:[a.jsx(x7,{className:"w-5 h-5",style:{color:n.color},fill:n.color}),a.jsx(ot.div,{className:"absolute top-6 left-2 whitespace-nowrap px-2 py-1 rounded text-xs font-medium text-white shadow-lg",style:{backgroundColor:n.color},initial:{opacity:0,y:-5},animate:{opacity:1,y:0},transition:{delay:.1},children:n.displayName||n.email||"Anonymous"})]},n.userId)})})})}function mFe({collaborators:e,nodes:t}){return a.jsx(a.Fragment,{children:a.jsx(Pr,{children:e.map(n=>!n.selectedNodeIds||n.selectedNodeIds.length===0?null:n.selectedNodeIds.map(r=>{const s=t.find(d=>d.id===r);if(!s)return null;const i=s.width||200,o=s.height||100,c=s.position.x,l=s.position.y;return a.jsxs(ot.div,{className:"absolute pointer-events-none",style:{left:c,top:l,width:i,height:o},initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},children:[a.jsx("div",{className:"absolute inset-0 rounded-lg",style:{border:`2px solid ${n.color}`,boxShadow:`0 0 0 4px ${n.color}33`}}),a.jsxs("div",{className:"absolute -top-6 left-0 px-2 py-1 rounded text-xs font-medium text-white shadow-lg whitespace-nowrap",style:{backgroundColor:n.color},children:[n.displayName||"User"," is editing"]})]},`${n.userId}-${r}`)}))})})}function gFe({reactFlowInstance:e,nodes:t,edges:n,selectedNodes:r,onNodesChange:s,onEdgesChange:i,onNodeDoubleClick:o,onCopyNodes:c,onPasteNodes:l,onCutNodes:d,onDeleteNodes:u,onRenameNode:h,onAddStickyNote:A}){const{toast:f}=ii(),m=w.useRef(null);w.useRef(20);const g=w.useCallback(()=>t.filter(I=>r.includes(I.id)),[t,r]),b=w.useCallback((I,T)=>{const Q=I.position.x,D=I.position.y;let M=[];switch(T){case"up":M=t.filter(U=>U.id!==I.id&&U.position.y<D),M.sort((U,H)=>H.position.y-U.position.y);break;case"down":M=t.filter(U=>U.id!==I.id&&U.position.y>D),M.sort((U,H)=>U.position.y-H.position.y);break;case"left":M=t.filter(U=>U.id!==I.id&&U.position.x<Q),M.sort((U,H)=>H.position.x-U.position.x);break;case"right":M=t.filter(U=>U.id!==I.id&&U.position.x>Q),M.sort((U,H)=>U.position.x-H.position.x);break}return M[0]||null},[t]),y=w.useCallback((I,T)=>{const Q=I.position.x;let D=[];return T==="left"?D=t.filter(M=>M.position.x<Q):D=t.filter(M=>M.position.x>Q),[...r,...D.map(M=>M.id)]},[t,r]),j=w.useCallback(()=>{const I=g();if(I.length===0)return;const T=new Set(r),Q=n.filter(D=>T.has(D.source)&&T.has(D.target));m.current={nodes:I,edges:Q},f({title:"Copied",description:`${I.length} node(s) copied to clipboard`}),c==null||c(I)},[g,r,n,f,c]),x=w.useCallback(()=>{if(!m.current||!e)return;const{nodes:I,edges:T}=m.current;e.getViewport();const Q=e.screenToFlowPosition({x:window.innerWidth/2,y:window.innerHeight/2}),D=Math.min(...I.map(R=>R.position.x)),M=Math.min(...I.map(R=>R.position.y)),U=I.map(R=>({...R,id:`${R.id}-copy-${Date.now()}`,position:{x:R.position.x-D+Q.x-100,y:R.position.y-M+Q.y-100},selected:!0})),H=new Map(I.map((R,Y)=>[R.id,U[Y].id])),$=T.filter(R=>H.has(R.source)&&H.has(R.target)).map(R=>({...R,id:`${R.id}-copy-${Date.now()}`,source:H.get(R.source),target:H.get(R.target)}));s([...t,...U]),i([...n,...$]),f({title:"Pasted",description:`${U.length} node(s) pasted`}),l==null||l()},[e,t,n,s,i,f,l]),C=w.useCallback(()=>{j();const I=r;if(I.length===0)return;const T=t.filter(D=>!I.includes(D.id)),Q=n.filter(D=>!I.includes(D.source)&&!I.includes(D.target));s(T),i(Q),f({title:"Cut",description:`${I.length} node(s) cut`}),d==null||d(g())},[j,r,t,n,s,i,f,d,g]),S=w.useCallback(()=>{if(r.length===0)return;const I=t.filter(Q=>!r.includes(Q.id)),T=n.filter(Q=>!r.includes(Q.source)&&!r.includes(Q.target));s(I),i(T),f({title:"Deleted",description:`${r.length} node(s) deleted`}),u==null||u(r)},[r,t,n,s,i,f,u]),_=w.useCallback(()=>{e==null||e.zoomIn({duration:200})},[e]),N=w.useCallback(()=>{e==null||e.zoomOut({duration:200})},[e]),L=w.useCallback(()=>{e==null||e.setViewport({x:0,y:0,zoom:1},{duration:200})},[e]),P=w.useCallback(()=>{e==null||e.fitView({duration:200,padding:.2})},[e]),F=w.useCallback(()=>{e&&(e.getNodes().forEach(I=>{e.setNodes(T=>T.map(Q=>({...Q,selected:!0})))}),f({title:"Selected All",description:`${t.length} node(s) selected`}))},[e,t.length,f]);return w.useEffect(()=>{const I=Q=>{const D=Q.target;if(D.tagName==="INPUT"||D.tagName==="TEXTAREA"||D.isContentEditable)return;const M=Q.metaKey||Q.ctrlKey,U=Q.shiftKey;if((Q.key==="+"||Q.key==="=")&&!M){Q.preventDefault(),_();return}if((Q.key==="-"||Q.key==="_")&&!M){Q.preventDefault(),N();return}if(Q.key==="0"&&!M){Q.preventDefault(),L();return}if(Q.key==="1"&&!M){Q.preventDefault(),P();return}if(M&&Q.key==="a"){Q.preventDefault(),F();return}if(M&&Q.key==="c"&&r.length>0){Q.preventDefault(),j();return}if(M&&Q.key==="v"){Q.preventDefault(),x();return}if(M&&Q.key==="x"&&r.length>0){Q.preventDefault(),C();return}if((Q.key==="Delete"||Q.key==="Backspace")&&r.length>0){Q.preventDefault(),S();return}if(U&&Q.key==="S"&&!M){Q.preventDefault(),A==null||A();return}if(Q.key==="F2"&&r.length===1){Q.preventDefault(),h==null||h(r[0]);return}if(Q.key==="Enter"&&r.length===1){Q.preventDefault();const H=t.find($=>$.id===r[0]);H&&o&&o(H);return}if(r.length===1&&!M){const H=t.find(Y=>Y.id===r[0]);if(!H)return;let $=null,R=[];switch(Q.key){case"ArrowUp":if(Q.preventDefault(),U)return;$=b(H,"up");break;case"ArrowDown":if(Q.preventDefault(),U)return;$=b(H,"down");break;case"ArrowLeft":if(Q.preventDefault(),U){R=y(H,"left"),e==null||e.setNodes(Y=>Y.map(X=>({...X,selected:R.includes(X.id)})));return}$=b(H,"left");break;case"ArrowRight":if(Q.preventDefault(),U){R=y(H,"right"),e==null||e.setNodes(Y=>Y.map(X=>({...X,selected:R.includes(X.id)})));return}$=b(H,"right");break}$&&(e==null||e.setNodes(Y=>Y.map(X=>({...X,selected:X.id===$.id}))),e==null||e.fitView({nodes:[$],duration:200,padding:.5}))}},T=Q=>{(Q.ctrlKey||Q.metaKey)&&(Q.preventDefault(),Q.deltaY<0?_():N())};return document.addEventListener("keydown",I),document.addEventListener("wheel",T,{passive:!1}),()=>{document.removeEventListener("keydown",I),document.removeEventListener("wheel",T)}},[e,t,n,r,g,b,y,j,x,C,S,_,N,L,P,F,o,h,A,f]),{copyNodes:j,pasteNodes:x,cutNodes:C,deleteNodes:S,zoomIn:_,zoomOut:N,resetZoom:L,fitView:P,selectAllNodes:F}}var vFe="\0",Yf="\0",hO="";let yFe=class{constructor(t){Je(this,"_isDirected",!0);Je(this,"_isMultigraph",!1);Je(this,"_isCompound",!1);Je(this,"_label");Je(this,"_defaultNodeLabelFn",()=>{});Je(this,"_defaultEdgeLabelFn",()=>{});Je(this,"_nodes",{});Je(this,"_in",{});Je(this,"_preds",{});Je(this,"_out",{});Je(this,"_sucs",{});Je(this,"_edgeObjs",{});Je(this,"_edgeLabels",{});Je(this,"_nodeCount",0);Je(this,"_edgeCount",0);Je(this,"_parent");Je(this,"_children");t&&(this._isDirected=Object.hasOwn(t,"directed")?t.directed:!0,this._isMultigraph=Object.hasOwn(t,"multigraph")?t.multigraph:!1,this._isCompound=Object.hasOwn(t,"compound")?t.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[Yf]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(t){return this._label=t,this}graph(){return this._label}setDefaultNodeLabel(t){return this._defaultNodeLabelFn=t,typeof t!="function"&&(this._defaultNodeLabelFn=()=>t),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var t=this;return this.nodes().filter(n=>Object.keys(t._in[n]).length===0)}sinks(){var t=this;return this.nodes().filter(n=>Object.keys(t._out[n]).length===0)}setNodes(t,n){var r=arguments,s=this;return t.forEach(function(i){r.length>1?s.setNode(i,n):s.setNode(i)}),this}setNode(t,n){return Object.hasOwn(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=n),this):(this._nodes[t]=arguments.length>1?n:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=Yf,this._children[t]={},this._children[Yf][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)}node(t){return this._nodes[t]}hasNode(t){return Object.hasOwn(this._nodes,t)}removeNode(t){var n=this;if(Object.hasOwn(this._nodes,t)){var r=s=>n.removeEdge(n._edgeObjs[s]);delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],this.children(t).forEach(function(s){n.setParent(s)}),delete this._children[t]),Object.keys(this._in[t]).forEach(r),delete this._in[t],delete this._preds[t],Object.keys(this._out[t]).forEach(r),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this}setParent(t,n){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(n===void 0)n=Yf;else{n+="";for(var r=n;r!==void 0;r=this.parent(r))if(r===t)throw new Error("Setting "+n+" as parent of "+t+" would create a cycle");this.setNode(n)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=n,this._children[n][t]=!0,this}_removeFromParentsChildList(t){delete this._children[this._parent[t]][t]}parent(t){if(this._isCompound){var n=this._parent[t];if(n!==Yf)return n}}children(t=Yf){if(this._isCompound){var n=this._children[t];if(n)return Object.keys(n)}else{if(t===Yf)return this.nodes();if(this.hasNode(t))return[]}}predecessors(t){var n=this._preds[t];if(n)return Object.keys(n)}successors(t){var n=this._sucs[t];if(n)return Object.keys(n)}neighbors(t){var n=this.predecessors(t);if(n){const s=new Set(n);for(var r of this.successors(t))s.add(r);return Array.from(s.values())}}isLeaf(t){var n;return this.isDirected()?n=this.successors(t):n=this.neighbors(t),n.length===0}filterNodes(t){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var r=this;Object.entries(this._nodes).forEach(function([o,c]){t(o)&&n.setNode(o,c)}),Object.values(this._edgeObjs).forEach(function(o){n.hasNode(o.v)&&n.hasNode(o.w)&&n.setEdge(o,r.edge(o))});var s={};function i(o){var c=r.parent(o);return c===void 0||n.hasNode(c)?(s[o]=c,c):c in s?s[c]:i(c)}return this._isCompound&&n.nodes().forEach(o=>n.setParent(o,i(o))),n}setDefaultEdgeLabel(t){return this._defaultEdgeLabelFn=t,typeof t!="function"&&(this._defaultEdgeLabelFn=()=>t),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(t,n){var r=this,s=arguments;return t.reduce(function(i,o){return s.length>1?r.setEdge(i,o,n):r.setEdge(i,o),o}),this}setEdge(){var t,n,r,s,i=!1,o=arguments[0];typeof o=="object"&&o!==null&&"v"in o?(t=o.v,n=o.w,r=o.name,arguments.length===2&&(s=arguments[1],i=!0)):(t=o,n=arguments[1],r=arguments[3],arguments.length>2&&(s=arguments[2],i=!0)),t=""+t,n=""+n,r!==void 0&&(r=""+r);var c=A0(this._isDirected,t,n,r);if(Object.hasOwn(this._edgeLabels,c))return i&&(this._edgeLabels[c]=s),this;if(r!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(n),this._edgeLabels[c]=i?s:this._defaultEdgeLabelFn(t,n,r);var l=xFe(this._isDirected,t,n,r);return t=l.v,n=l.w,Object.freeze(l),this._edgeObjs[c]=l,AO(this._preds[n],t),AO(this._sucs[t],n),this._in[n][c]=l,this._out[t][c]=l,this._edgeCount++,this}edge(t,n,r){var s=arguments.length===1?LB(this._isDirected,arguments[0]):A0(this._isDirected,t,n,r);return this._edgeLabels[s]}edgeAsObj(){const t=this.edge(...arguments);return typeof t!="object"?{label:t}:t}hasEdge(t,n,r){var s=arguments.length===1?LB(this._isDirected,arguments[0]):A0(this._isDirected,t,n,r);return Object.hasOwn(this._edgeLabels,s)}removeEdge(t,n,r){var s=arguments.length===1?LB(this._isDirected,arguments[0]):A0(this._isDirected,t,n,r),i=this._edgeObjs[s];return i&&(t=i.v,n=i.w,delete this._edgeLabels[s],delete this._edgeObjs[s],fO(this._preds[n],t),fO(this._sucs[t],n),delete this._in[n][s],delete this._out[t][s],this._edgeCount--),this}inEdges(t,n){var r=this._in[t];if(r){var s=Object.values(r);return n?s.filter(i=>i.v===n):s}}outEdges(t,n){var r=this._out[t];if(r){var s=Object.values(r);return n?s.filter(i=>i.w===n):s}}nodeEdges(t,n){var r=this.inEdges(t,n);if(r)return r.concat(this.outEdges(t,n))}};function AO(e,t){e[t]?e[t]++:e[t]=1}function fO(e,t){--e[t]||delete e[t]}function A0(e,t,n,r){var s=""+t,i=""+n;if(!e&&s>i){var o=s;s=i,i=o}return s+hO+i+hO+(r===void 0?vFe:r)}function xFe(e,t,n,r){var s=""+t,i=""+n;if(!e&&s>i){var o=s;s=i,i=o}var c={v:s,w:i};return r&&(c.name=r),c}function LB(e,t){return A0(e,t.v,t.w,t.name)}var bF=yFe,wFe="2.2.4",bFe={Graph:bF,version:wFe},CFe=bF,jFe={write:kFe,read:BFe};function kFe(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:SFe(e),edges:NFe(e)};return e.graph()!==void 0&&(t.value=structuredClone(e.graph())),t}function SFe(e){return e.nodes().map(function(t){var n=e.node(t),r=e.parent(t),s={v:t};return n!==void 0&&(s.value=n),r!==void 0&&(s.parent=r),s})}function NFe(e){return e.edges().map(function(t){var n=e.edge(t),r={v:t.v,w:t.w};return t.name!==void 0&&(r.name=t.name),n!==void 0&&(r.value=n),r})}function BFe(e){var t=new CFe(e.options).setGraph(e.value);return e.nodes.forEach(function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),e.edges.forEach(function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}var EFe=_Fe;function _Fe(e){var t={},n=[],r;function s(i){Object.hasOwn(t,i)||(t[i]=!0,r.push(i),e.successors(i).forEach(s),e.predecessors(i).forEach(s))}return e.nodes().forEach(function(i){r=[],s(i),r.length&&n.push(r)}),n}let IFe=class{constructor(){Je(this,"_arr",[]);Je(this,"_keyIndices",{})}size(){return this._arr.length}keys(){return this._arr.map(function(t){return t.key})}has(t){return Object.hasOwn(this._keyIndices,t)}priority(t){var n=this._keyIndices[t];if(n!==void 0)return this._arr[n].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(t,n){var r=this._keyIndices;if(t=String(t),!Object.hasOwn(r,t)){var s=this._arr,i=s.length;return r[t]=i,s.push({key:t,priority:n}),this._decrease(i),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key}decrease(t,n){var r=this._keyIndices[t];if(n>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[r].priority+" New: "+n);this._arr[r].priority=n,this._decrease(r)}_heapify(t){var n=this._arr,r=2*t,s=r+1,i=t;r<n.length&&(i=n[r].priority<n[i].priority?r:i,s<n.length&&(i=n[s].priority<n[i].priority?s:i),i!==t&&(this._swap(t,i),this._heapify(i)))}_decrease(t){for(var n=this._arr,r=n[t].priority,s;t!==0&&(s=t>>1,!(n[s].priority<r));)this._swap(t,s),t=s}_swap(t,n){var r=this._arr,s=this._keyIndices,i=r[t],o=r[n];r[t]=o,r[n]=i,s[o.key]=t,s[i.key]=n}};var WX=IFe,PFe=WX,GX=FFe,TFe=()=>1;function FFe(e,t,n,r){return DFe(e,String(t),n||TFe,r||function(s){return e.outEdges(s)})}function DFe(e,t,n,r){var s={},i=new PFe,o,c,l=function(d){var u=d.v!==o?d.v:d.w,h=s[u],A=n(d),f=c.distance+A;if(A<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+d+" Weight: "+A);f<h.distance&&(h.distance=f,h.predecessor=o,i.decrease(u,f))};for(e.nodes().forEach(function(d){var u=d===t?0:Number.POSITIVE_INFINITY;s[d]={distance:u},i.add(d,u)});i.size()>0&&(o=i.removeMin(),c=s[o],c.distance!==Number.POSITIVE_INFINITY);)r(o).forEach(l);return s}var UFe=GX,LFe=MFe;function MFe(e,t,n){return e.nodes().reduce(function(r,s){return r[s]=UFe(e,s,t,n),r},{})}var YX=RFe;function RFe(e){var t=0,n=[],r={},s=[];function i(o){var c=r[o]={onStack:!0,lowlink:t,index:t++};if(n.push(o),e.successors(o).forEach(function(u){Object.hasOwn(r,u)?r[u].onStack&&(c.lowlink=Math.min(c.lowlink,r[u].index)):(i(u),c.lowlink=Math.min(c.lowlink,r[u].lowlink))}),c.lowlink===c.index){var l=[],d;do d=n.pop(),r[d].onStack=!1,l.push(d);while(o!==d);s.push(l)}}return e.nodes().forEach(function(o){Object.hasOwn(r,o)||i(o)}),s}var OFe=YX,QFe=HFe;function HFe(e){return OFe(e).filter(function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})}var $Fe=VFe,zFe=()=>1;function VFe(e,t,n){return qFe(e,t||zFe,n||function(r){return e.outEdges(r)})}function qFe(e,t,n){var r={},s=e.nodes();return s.forEach(function(i){r[i]={},r[i][i]={distance:0},s.forEach(function(o){i!==o&&(r[i][o]={distance:Number.POSITIVE_INFINITY})}),n(i).forEach(function(o){var c=o.v===i?o.w:o.v,l=t(o);r[i][c]={distance:l,predecessor:i}})}),s.forEach(function(i){var o=r[i];s.forEach(function(c){var l=r[c];s.forEach(function(d){var u=l[i],h=o[d],A=l[d],f=u.distance+h.distance;f<A.distance&&(A.distance=f,A.predecessor=h.predecessor)})})}),r}function XX(e){var t={},n={},r=[];function s(i){if(Object.hasOwn(n,i))throw new iI;Object.hasOwn(t,i)||(n[i]=!0,t[i]=!0,e.predecessors(i).forEach(s),delete n[i],r.push(i))}if(e.sinks().forEach(s),Object.keys(t).length!==e.nodeCount())throw new iI;return r}class iI extends Error{constructor(){super(...arguments)}}var JX=XX;XX.CycleException=iI;var pO=JX,KFe=WFe;function WFe(e){try{pO(e)}catch(t){if(t instanceof pO.CycleException)return!1;throw t}return!0}var ZX=GFe;function GFe(e,t,n){Array.isArray(t)||(t=[t]);var r=e.isDirected()?c=>e.successors(c):c=>e.neighbors(c),s=n==="post"?YFe:XFe,i=[],o={};return t.forEach(c=>{if(!e.hasNode(c))throw new Error("Graph does not have node: "+c);s(c,r,o,i)}),i}function YFe(e,t,n,r){for(var s=[[e,!1]];s.length>0;){var i=s.pop();i[1]?r.push(i[0]):Object.hasOwn(n,i[0])||(n[i[0]]=!0,s.push([i[0],!0]),eJ(t(i[0]),o=>s.push([o,!1])))}}function XFe(e,t,n,r){for(var s=[e];s.length>0;){var i=s.pop();Object.hasOwn(n,i)||(n[i]=!0,r.push(i),eJ(t(i),o=>s.push(o)))}}function eJ(e,t){for(var n=e.length;n--;)t(e[n],n,e);return e}var JFe=ZX,ZFe=e3e;function e3e(e,t){return JFe(e,t,"post")}var t3e=ZX,n3e=r3e;function r3e(e,t){return t3e(e,t,"pre")}var s3e=bF,i3e=WX,a3e=o3e;function o3e(e,t){var n=new s3e,r={},s=new i3e,i;function o(l){var d=l.v===i?l.w:l.v,u=s.priority(d);if(u!==void 0){var h=t(l);h<u&&(r[d]=i,s.decrease(d,h))}}if(e.nodeCount()===0)return n;e.nodes().forEach(function(l){s.add(l,Number.POSITIVE_INFINITY),n.setNode(l)}),s.decrease(e.nodes()[0],0);for(var c=!1;s.size()>0;){if(i=s.removeMin(),Object.hasOwn(r,i))n.setEdge(i,r[i]);else{if(c)throw new Error("Input graph is not connected: "+e);c=!0}e.nodeEdges(i).forEach(o)}return n}var c3e={components:EFe,dijkstra:GX,dijkstraAll:LFe,findCycles:QFe,floydWarshall:$Fe,isAcyclic:KFe,postorder:ZFe,preorder:n3e,prim:a3e,tarjan:YX,topsort:JX},mO=bFe,Ml={Graph:mO.Graph,json:jFe,alg:c3e,version:mO.version};let l3e=class{constructor(){let t={};t._next=t._prev=t,this._sentinel=t}dequeue(){let t=this._sentinel,n=t._prev;if(n!==t)return gO(n),n}enqueue(t){let n=this._sentinel;t._prev&&t._next&&gO(t),t._next=n._next,n._next._prev=t,n._next=t,t._prev=n}toString(){let t=[],n=this._sentinel,r=n._prev;for(;r!==n;)t.push(JSON.stringify(r,d3e)),r=r._prev;return"["+t.join(", ")+"]"}};function gO(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function d3e(e,t){if(e!=="_next"&&e!=="_prev")return t}var u3e=l3e;let h3e=Ml.Graph,A3e=u3e;var f3e=m3e;let p3e=()=>1;function m3e(e,t){if(e.nodeCount()<=1)return[];let n=v3e(e,t||p3e);return g3e(n.graph,n.buckets,n.zeroIdx).flatMap(s=>e.outEdges(s.v,s.w))}function g3e(e,t,n){let r=[],s=t[t.length-1],i=t[0],o;for(;e.nodeCount();){for(;o=i.dequeue();)MB(e,t,n,o);for(;o=s.dequeue();)MB(e,t,n,o);if(e.nodeCount()){for(let c=t.length-2;c>0;--c)if(o=t[c].dequeue(),o){r=r.concat(MB(e,t,n,o,!0));break}}}return r}function MB(e,t,n,r,s){let i=s?[]:void 0;return e.inEdges(r.v).forEach(o=>{let c=e.edge(o),l=e.node(o.v);s&&i.push({v:o.v,w:o.w}),l.out-=c,aI(t,n,l)}),e.outEdges(r.v).forEach(o=>{let c=e.edge(o),l=o.w,d=e.node(l);d.in-=c,aI(t,n,d)}),e.removeNode(r.v),i}function v3e(e,t){let n=new h3e,r=0,s=0;e.nodes().forEach(c=>{n.setNode(c,{v:c,in:0,out:0})}),e.edges().forEach(c=>{let l=n.edge(c.v,c.w)||0,d=t(c),u=l+d;n.setEdge(c.v,c.w,u),s=Math.max(s,n.node(c.v).out+=d),r=Math.max(r,n.node(c.w).in+=d)});let i=y3e(s+r+3).map(()=>new A3e),o=r+1;return n.nodes().forEach(c=>{aI(i,o,n.node(c))}),{graph:n,buckets:i,zeroIdx:o}}function aI(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}function y3e(e){const t=[];for(let n=0;n<e;n++)t.push(n);return t}let tJ=Ml.Graph;var si={addBorderNode:B3e,addDummyNode:nJ,applyWithChunking:eS,asNonCompoundGraph:w3e,buildLayerMatrix:k3e,intersectRect:j3e,mapValues:D3e,maxRank:sJ,normalizeRanks:S3e,notime:P3e,partition:_3e,pick:F3e,predecessorWeights:C3e,range:aJ,removeEmptyRanks:N3e,simplify:x3e,successorWeights:b3e,time:I3e,uniqueId:iJ,zipObject:CF};function nJ(e,t,n,r){for(var s=r;e.hasNode(s);)s=iJ(r);return n.dummy=t,e.setNode(s,n),s}function x3e(e){let t=new tJ().setGraph(e.graph());return e.nodes().forEach(n=>t.setNode(n,e.node(n))),e.edges().forEach(n=>{let r=t.edge(n.v,n.w)||{weight:0,minlen:1},s=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+s.weight,minlen:Math.max(r.minlen,s.minlen)})}),t}function w3e(e){let t=new tJ({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{e.children(n).length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdge(n,e.edge(n))}),t}function b3e(e){let t=e.nodes().map(n=>{let r={};return e.outEdges(n).forEach(s=>{r[s.w]=(r[s.w]||0)+e.edge(s).weight}),r});return CF(e.nodes(),t)}function C3e(e){let t=e.nodes().map(n=>{let r={};return e.inEdges(n).forEach(s=>{r[s.v]=(r[s.v]||0)+e.edge(s).weight}),r});return CF(e.nodes(),t)}function j3e(e,t){let n=e.x,r=e.y,s=t.x-n,i=t.y-r,o=e.width/2,c=e.height/2;if(!s&&!i)throw new Error("Not possible to find intersection inside of the rectangle");let l,d;return Math.abs(i)*o>Math.abs(s)*c?(i<0&&(c=-c),l=c*s/i,d=c):(s<0&&(o=-o),l=o,d=o*i/s),{x:n+l,y:r+d}}function k3e(e){let t=aJ(sJ(e)+1).map(()=>[]);return e.nodes().forEach(n=>{let r=e.node(n),s=r.rank;s!==void 0&&(t[s][r.order]=n)}),t}function S3e(e){let t=e.nodes().map(r=>{let s=e.node(r).rank;return s===void 0?Number.MAX_VALUE:s}),n=eS(Math.min,t);e.nodes().forEach(r=>{let s=e.node(r);Object.hasOwn(s,"rank")&&(s.rank-=n)})}function N3e(e){let t=e.nodes().map(o=>e.node(o).rank),n=eS(Math.min,t),r=[];e.nodes().forEach(o=>{let c=e.node(o).rank-n;r[c]||(r[c]=[]),r[c].push(o)});let s=0,i=e.graph().nodeRankFactor;Array.from(r).forEach((o,c)=>{o===void 0&&c%i!==0?--s:o!==void 0&&s&&o.forEach(l=>e.node(l).rank+=s)})}function B3e(e,t,n,r){let s={width:0,height:0};return arguments.length>=4&&(s.rank=n,s.order=r),nJ(e,"border",s,t)}function E3e(e,t=rJ){const n=[];for(let r=0;r<e.length;r+=t){const s=e.slice(r,r+t);n.push(s)}return n}const rJ=65535;function eS(e,t){if(t.length>rJ){const n=E3e(t);return e.apply(null,n.map(r=>e.apply(null,r)))}else return e.apply(null,t)}function sJ(e){const n=e.nodes().map(r=>{let s=e.node(r).rank;return s===void 0?Number.MIN_VALUE:s});return eS(Math.max,n)}function _3e(e,t){let n={lhs:[],rhs:[]};return e.forEach(r=>{t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function I3e(e,t){let n=Date.now();try{return t()}finally{console.log(e+" time: "+(Date.now()-n)+"ms")}}function P3e(e,t){return t()}let T3e=0;function iJ(e){var t=++T3e;return e+(""+t)}function aJ(e,t,n=1){t==null&&(t=e,e=0);let r=i=>i<t;n<0&&(r=i=>t<i);const s=[];for(let i=e;r(i);i+=n)s.push(i);return s}function F3e(e,t){const n={};for(const r of t)e[r]!==void 0&&(n[r]=e[r]);return n}function D3e(e,t){let n=t;return typeof t=="string"&&(n=r=>r[t]),Object.entries(e).reduce((r,[s,i])=>(r[s]=n(i,s),r),{})}function CF(e,t){return e.reduce((n,r,s)=>(n[r]=t[s],n),{})}let U3e=f3e,L3e=si.uniqueId;var M3e={run:R3e,undo:Q3e};function R3e(e){(e.graph().acyclicer==="greedy"?U3e(e,n(e)):O3e(e)).forEach(r=>{let s=e.edge(r);e.removeEdge(r),s.forwardName=r.name,s.reversed=!0,e.setEdge(r.w,r.v,s,L3e("rev"))});function n(r){return s=>r.edge(s).weight}}function O3e(e){let t=[],n={},r={};function s(i){Object.hasOwn(r,i)||(r[i]=!0,n[i]=!0,e.outEdges(i).forEach(o=>{Object.hasOwn(n,o.w)?t.push(o):s(o.w)}),delete n[i])}return e.nodes().forEach(s),t}function Q3e(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.reversed){e.removeEdge(t);let r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}let H3e=si;var $3e={run:z3e,undo:q3e};function z3e(e){e.graph().dummyChains=[],e.edges().forEach(t=>V3e(e,t))}function V3e(e,t){let n=t.v,r=e.node(n).rank,s=t.w,i=e.node(s).rank,o=t.name,c=e.edge(t),l=c.labelRank;if(i===r+1)return;e.removeEdge(t);let d,u,h;for(h=0,++r;r<i;++h,++r)c.points=[],u={width:0,height:0,edgeLabel:c,edgeObj:t,rank:r},d=H3e.addDummyNode(e,"edge",u,"_d"),r===l&&(u.width=c.width,u.height=c.height,u.dummy="edge-label",u.labelpos=c.labelpos),e.setEdge(n,d,{weight:c.weight},o),h===0&&e.graph().dummyChains.push(d),n=d;e.setEdge(n,s,{weight:c.weight},o)}function q3e(e){e.graph().dummyChains.forEach(t=>{let n=e.node(t),r=n.edgeLabel,s;for(e.setEdge(n.edgeObj,r);n.dummy;)s=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=s,n=e.node(t)})}const{applyWithChunking:K3e}=si;var tS={longestPath:W3e,slack:G3e};function W3e(e){var t={};function n(r){var s=e.node(r);if(Object.hasOwn(t,r))return s.rank;t[r]=!0;let i=e.outEdges(r).map(c=>c==null?Number.POSITIVE_INFINITY:n(c.w)-e.edge(c).minlen);var o=K3e(Math.min,i);return o===Number.POSITIVE_INFINITY&&(o=0),s.rank=o}e.sources().forEach(n)}function G3e(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var Y3e=Ml.Graph,uj=tS.slack,oJ=X3e;function X3e(e){var t=new Y3e({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var s,i;J3e(t,e)<r;)s=Z3e(t,e),i=t.hasNode(s.v)?uj(e,s):-uj(e,s),eDe(t,e,i);return t}function J3e(e,t){function n(r){t.nodeEdges(r).forEach(s=>{var i=s.v,o=r===i?s.w:i;!e.hasNode(o)&&!uj(t,s)&&(e.setNode(o,{}),e.setEdge(r,o,{}),n(o))})}return e.nodes().forEach(n),e.nodeCount()}function Z3e(e,t){return t.edges().reduce((r,s)=>{let i=Number.POSITIVE_INFINITY;return e.hasNode(s.v)!==e.hasNode(s.w)&&(i=uj(t,s)),i<r[0]?[i,s]:r},[Number.POSITIVE_INFINITY,null])[1]}function eDe(e,t,n){e.nodes().forEach(r=>t.node(r).rank+=n)}var tDe=oJ,vO=tS.slack,nDe=tS.longestPath,rDe=Ml.alg.preorder,sDe=Ml.alg.postorder,iDe=si.simplify,aDe=mm;mm.initLowLimValues=kF;mm.initCutValues=jF;mm.calcCutValue=cJ;mm.leaveEdge=dJ;mm.enterEdge=uJ;mm.exchangeEdges=hJ;function mm(e){e=iDe(e),nDe(e);var t=tDe(e);kF(t),jF(t,e);for(var n,r;n=dJ(t);)r=uJ(t,e,n),hJ(t,e,n,r)}function jF(e,t){var n=sDe(e,e.nodes());n=n.slice(0,n.length-1),n.forEach(r=>oDe(e,t,r))}function oDe(e,t,n){var r=e.node(n),s=r.parent;e.edge(n,s).cutvalue=cJ(e,t,n)}function cJ(e,t,n){var r=e.node(n),s=r.parent,i=!0,o=t.edge(n,s),c=0;return o||(i=!1,o=t.edge(s,n)),c=o.weight,t.nodeEdges(n).forEach(l=>{var d=l.v===n,u=d?l.w:l.v;if(u!==s){var h=d===i,A=t.edge(l).weight;if(c+=h?A:-A,lDe(e,n,u)){var f=e.edge(n,u).cutvalue;c+=h?-f:f}}}),c}function kF(e,t){arguments.length<2&&(t=e.nodes()[0]),lJ(e,{},1,t)}function lJ(e,t,n,r,s){var i=n,o=e.node(r);return t[r]=!0,e.neighbors(r).forEach(c=>{Object.hasOwn(t,c)||(n=lJ(e,t,n,c,r))}),o.low=i,o.lim=n++,s?o.parent=s:delete o.parent,n}function dJ(e){return e.edges().find(t=>e.edge(t).cutvalue<0)}function uJ(e,t,n){var r=n.v,s=n.w;t.hasEdge(r,s)||(r=n.w,s=n.v);var i=e.node(r),o=e.node(s),c=i,l=!1;i.lim>o.lim&&(c=o,l=!0);var d=t.edges().filter(u=>l===yO(e,e.node(u.v),c)&&l!==yO(e,e.node(u.w),c));return d.reduce((u,h)=>vO(t,h)<vO(t,u)?h:u)}function hJ(e,t,n,r){var s=n.v,i=n.w;e.removeEdge(s,i),e.setEdge(r.v,r.w,{}),kF(e),jF(e,t),cDe(e,t)}function cDe(e,t){var n=e.nodes().find(s=>!t.node(s).parent),r=rDe(e,n);r=r.slice(1),r.forEach(s=>{var i=e.node(s).parent,o=t.edge(s,i),c=!1;o||(o=t.edge(i,s),c=!0),t.node(s).rank=t.node(i).rank+(c?o.minlen:-o.minlen)})}function lDe(e,t,n){return e.hasEdge(t,n)}function yO(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var dDe=tS,AJ=dDe.longestPath,uDe=oJ,hDe=aDe,ADe=fDe;function fDe(e){var t=e.graph().ranker;if(t instanceof Function)return t(e);switch(e.graph().ranker){case"network-simplex":xO(e);break;case"tight-tree":mDe(e);break;case"longest-path":pDe(e);break;case"none":break;default:xO(e)}}var pDe=AJ;function mDe(e){AJ(e),uDe(e)}function xO(e){hDe(e)}var gDe=vDe;function vDe(e){let t=xDe(e);e.graph().dummyChains.forEach(n=>{let r=e.node(n),s=r.edgeObj,i=yDe(e,t,s.v,s.w),o=i.path,c=i.lca,l=0,d=o[l],u=!0;for(;n!==s.w;){if(r=e.node(n),u){for(;(d=o[l])!==c&&e.node(d).maxRank<r.rank;)l++;d===c&&(u=!1)}if(!u){for(;l<o.length-1&&e.node(d=o[l+1]).minRank<=r.rank;)l++;d=o[l]}e.setParent(n,d),n=e.successors(n)[0]}})}function yDe(e,t,n,r){let s=[],i=[],o=Math.min(t[n].low,t[r].low),c=Math.max(t[n].lim,t[r].lim),l,d;l=n;do l=e.parent(l),s.push(l);while(l&&(t[l].low>o||c>t[l].lim));for(d=l,l=r;(l=e.parent(l))!==d;)i.push(l);return{path:s.concat(i.reverse()),lca:d}}function xDe(e){let t={},n=0;function r(s){let i=n;e.children(s).forEach(r),t[s]={low:i,lim:n++}}return e.children().forEach(r),t}let hj=si;var wDe={run:bDe,cleanup:kDe};function bDe(e){let t=hj.addDummyNode(e,"root",{},"_root"),n=CDe(e),r=Object.values(n),s=hj.applyWithChunking(Math.max,r)-1,i=2*s+1;e.graph().nestingRoot=t,e.edges().forEach(c=>e.edge(c).minlen*=i);let o=jDe(e)+1;e.children().forEach(c=>fJ(e,t,i,o,s,n,c)),e.graph().nodeRankFactor=i}function fJ(e,t,n,r,s,i,o){let c=e.children(o);if(!c.length){o!==t&&e.setEdge(t,o,{weight:0,minlen:n});return}let l=hj.addBorderNode(e,"_bt"),d=hj.addBorderNode(e,"_bb"),u=e.node(o);e.setParent(l,o),u.borderTop=l,e.setParent(d,o),u.borderBottom=d,c.forEach(h=>{fJ(e,t,n,r,s,i,h);let A=e.node(h),f=A.borderTop?A.borderTop:h,m=A.borderBottom?A.borderBottom:h,g=A.borderTop?r:2*r,b=f!==m?1:s-i[o]+1;e.setEdge(l,f,{weight:g,minlen:b,nestingEdge:!0}),e.setEdge(m,d,{weight:g,minlen:b,nestingEdge:!0})}),e.parent(o)||e.setEdge(t,l,{weight:0,minlen:s+i[o]})}function CDe(e){var t={};function n(r,s){var i=e.children(r);i&&i.length&&i.forEach(o=>n(o,s+1)),t[r]=s}return e.children().forEach(r=>n(r,1)),t}function jDe(e){return e.edges().reduce((t,n)=>t+e.edge(n).weight,0)}function kDe(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}let SDe=si;var NDe=BDe;function BDe(e){function t(n){let r=e.children(n),s=e.node(n);if(r.length&&r.forEach(t),Object.hasOwn(s,"minRank")){s.borderLeft=[],s.borderRight=[];for(let i=s.minRank,o=s.maxRank+1;i<o;++i)wO(e,"borderLeft","_bl",n,s,i),wO(e,"borderRight","_br",n,s,i)}}e.children().forEach(t)}function wO(e,t,n,r,s,i){let o={width:0,height:0,rank:i,borderType:t},c=s[t][i-1],l=SDe.addDummyNode(e,"border",o,n);s[t][i]=l,e.setParent(l,r),c&&e.setEdge(c,l,{weight:1})}var EDe={adjust:_De,undo:IDe};function _De(e){let t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&pJ(e)}function IDe(e){let t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&PDe(e),(t==="lr"||t==="rl")&&(TDe(e),pJ(e))}function pJ(e){e.nodes().forEach(t=>bO(e.node(t))),e.edges().forEach(t=>bO(e.edge(t)))}function bO(e){let t=e.width;e.width=e.height,e.height=t}function PDe(e){e.nodes().forEach(t=>RB(e.node(t))),e.edges().forEach(t=>{let n=e.edge(t);n.points.forEach(RB),Object.hasOwn(n,"y")&&RB(n)})}function RB(e){e.y=-e.y}function TDe(e){e.nodes().forEach(t=>OB(e.node(t))),e.edges().forEach(t=>{let n=e.edge(t);n.points.forEach(OB),Object.hasOwn(n,"x")&&OB(n)})}function OB(e){let t=e.x;e.x=e.y,e.y=t}let CO=si;var FDe=DDe;function DDe(e){let t={},n=e.nodes().filter(l=>!e.children(l).length),r=n.map(l=>e.node(l).rank),s=CO.applyWithChunking(Math.max,r),i=CO.range(s+1).map(()=>[]);function o(l){if(t[l])return;t[l]=!0;let d=e.node(l);i[d.rank].push(l),e.successors(l).forEach(o)}return n.sort((l,d)=>e.node(l).rank-e.node(d).rank).forEach(o),i}let UDe=si.zipObject;var LDe=MDe;function MDe(e,t){let n=0;for(let r=1;r<t.length;++r)n+=RDe(e,t[r-1],t[r]);return n}function RDe(e,t,n){let r=UDe(n,n.map((d,u)=>u)),s=t.flatMap(d=>e.outEdges(d).map(u=>({pos:r[u.w],weight:e.edge(u).weight})).sort((u,h)=>u.pos-h.pos)),i=1;for(;i<n.length;)i<<=1;let o=2*i-1;i-=1;let c=new Array(o).fill(0),l=0;return s.forEach(d=>{let u=d.pos+i;c[u]+=d.weight;let h=0;for(;u>0;)u%2&&(h+=c[u+1]),u=u-1>>1,c[u]+=d.weight;l+=d.weight*h}),l}var ODe=QDe;function QDe(e,t=[]){return t.map(n=>{let r=e.inEdges(n);if(r.length){let s=r.reduce((i,o)=>{let c=e.edge(o),l=e.node(o.v);return{sum:i.sum+c.weight*l.order,weight:i.weight+c.weight}},{sum:0,weight:0});return{v:n,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:n}})}let HDe=si;var $De=zDe;function zDe(e,t){let n={};e.forEach((s,i)=>{let o=n[s.v]={indegree:0,in:[],out:[],vs:[s.v],i};s.barycenter!==void 0&&(o.barycenter=s.barycenter,o.weight=s.weight)}),t.edges().forEach(s=>{let i=n[s.v],o=n[s.w];i!==void 0&&o!==void 0&&(o.indegree++,i.out.push(n[s.w]))});let r=Object.values(n).filter(s=>!s.indegree);return VDe(r)}function VDe(e){let t=[];function n(s){return i=>{i.merged||(i.barycenter===void 0||s.barycenter===void 0||i.barycenter>=s.barycenter)&&qDe(s,i)}}function r(s){return i=>{i.in.push(s),--i.indegree===0&&e.push(i)}}for(;e.length;){let s=e.pop();t.push(s),s.in.reverse().forEach(n(s)),s.out.forEach(r(s))}return t.filter(s=>!s.merged).map(s=>HDe.pick(s,["vs","i","barycenter","weight"]))}function qDe(e,t){let n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}let KDe=si;var WDe=GDe;function GDe(e,t){let n=KDe.partition(e,u=>Object.hasOwn(u,"barycenter")),r=n.lhs,s=n.rhs.sort((u,h)=>h.i-u.i),i=[],o=0,c=0,l=0;r.sort(YDe(!!t)),l=jO(i,s,l),r.forEach(u=>{l+=u.vs.length,i.push(u.vs),o+=u.barycenter*u.weight,c+=u.weight,l=jO(i,s,l)});let d={vs:i.flat(!0)};return c&&(d.barycenter=o/c,d.weight=c),d}function jO(e,t,n){let r;for(;t.length&&(r=t[t.length-1]).i<=n;)t.pop(),e.push(r.vs),n++;return n}function YDe(e){return(t,n)=>t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}let XDe=ODe,JDe=$De,ZDe=WDe;var eUe=mJ;function mJ(e,t,n,r){let s=e.children(t),i=e.node(t),o=i?i.borderLeft:void 0,c=i?i.borderRight:void 0,l={};o&&(s=s.filter(A=>A!==o&&A!==c));let d=XDe(e,s);d.forEach(A=>{if(e.children(A.v).length){let f=mJ(e,A.v,n,r);l[A.v]=f,Object.hasOwn(f,"barycenter")&&nUe(A,f)}});let u=JDe(d,n);tUe(u,l);let h=ZDe(u,r);if(o&&(h.vs=[o,h.vs,c].flat(!0),e.predecessors(o).length)){let A=e.node(e.predecessors(o)[0]),f=e.node(e.predecessors(c)[0]);Object.hasOwn(h,"barycenter")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+A.order+f.order)/(h.weight+2),h.weight+=2}return h}function tUe(e,t){e.forEach(n=>{n.vs=n.vs.flatMap(r=>t[r]?t[r].vs:r)})}function nUe(e,t){e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)}let rUe=Ml.Graph,sUe=si;var iUe=aUe;function aUe(e,t,n){let r=oUe(e),s=new rUe({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(i=>e.node(i));return e.nodes().forEach(i=>{let o=e.node(i),c=e.parent(i);(o.rank===t||o.minRank<=t&&t<=o.maxRank)&&(s.setNode(i),s.setParent(i,c||r),e[n](i).forEach(l=>{let d=l.v===i?l.w:l.v,u=s.edge(d,i),h=u!==void 0?u.weight:0;s.setEdge(d,i,{weight:e.edge(l).weight+h})}),Object.hasOwn(o,"minRank")&&s.setNode(i,{borderLeft:o.borderLeft[t],borderRight:o.borderRight[t]}))}),s}function oUe(e){for(var t;e.hasNode(t=sUe.uniqueId("_root")););return t}var cUe=lUe;function lUe(e,t,n){let r={},s;n.forEach(i=>{let o=e.parent(i),c,l;for(;o;){if(c=e.parent(o),c?(l=r[c],r[c]=o):(l=s,s=o),l&&l!==o){t.setEdge(l,o);return}o=c}})}let dUe=FDe,uUe=LDe,hUe=eUe,AUe=iUe,fUe=cUe,pUe=Ml.Graph,B1=si;var mUe=gJ;function gJ(e,t){if(t&&typeof t.customOrder=="function"){t.customOrder(e,gJ);return}let n=B1.maxRank(e),r=kO(e,B1.range(1,n+1),"inEdges"),s=kO(e,B1.range(n-1,-1,-1),"outEdges"),i=dUe(e);if(SO(e,i),t&&t.disableOptimalOrderHeuristic)return;let o=Number.POSITIVE_INFINITY,c;for(let l=0,d=0;d<4;++l,++d){gUe(l%2?r:s,l%4>=2),i=B1.buildLayerMatrix(e);let u=uUe(e,i);u<o&&(d=0,c=Object.assign({},i),o=u)}SO(e,c)}function kO(e,t,n){return t.map(function(r){return AUe(e,r,n)})}function gUe(e,t){let n=new pUe;e.forEach(function(r){let s=r.graph().root,i=hUe(r,s,n,t);i.vs.forEach((o,c)=>r.node(o).order=c),fUe(r,n,i.vs)})}function SO(e,t){Object.values(t).forEach(n=>n.forEach((r,s)=>e.node(r).order=s))}let vUe=Ml.Graph,Lu=si;var yUe={positionX:bUe,findType1Conflicts:vJ,findType2Conflicts:yJ,addConflict:SF,hasConflict:xJ,verticalAlignment:wJ,horizontalCompaction:bJ,alignCoordinates:jJ,findSmallestWidthAlignment:CJ,balance:kJ};function vJ(e,t){let n={};function r(s,i){let o=0,c=0,l=s.length,d=i[i.length-1];return i.forEach((u,h)=>{let A=xUe(e,u),f=A?e.node(A).order:l;(A||u===d)&&(i.slice(c,h+1).forEach(m=>{e.predecessors(m).forEach(g=>{let b=e.node(g),y=b.order;(y<o||f<y)&&!(b.dummy&&e.node(m).dummy)&&SF(n,g,m)})}),c=h+1,o=f)}),i}return t.length&&t.reduce(r),n}function yJ(e,t){let n={};function r(i,o,c,l,d){let u;Lu.range(o,c).forEach(h=>{u=i[h],e.node(u).dummy&&e.predecessors(u).forEach(A=>{let f=e.node(A);f.dummy&&(f.order<l||f.order>d)&&SF(n,A,u)})})}function s(i,o){let c=-1,l,d=0;return o.forEach((u,h)=>{if(e.node(u).dummy==="border"){let A=e.predecessors(u);A.length&&(l=e.node(A[0]).order,r(o,d,h,c,l),d=h,c=l)}r(o,d,o.length,l,i.length)}),o}return t.length&&t.reduce(s),n}function xUe(e,t){if(e.node(t).dummy)return e.predecessors(t).find(n=>e.node(n).dummy)}function SF(e,t,n){if(t>n){let s=t;t=n,n=s}let r=e[t];r||(e[t]=r={}),r[n]=!0}function xJ(e,t,n){if(t>n){let r=t;t=n,n=r}return!!e[t]&&Object.hasOwn(e[t],n)}function wJ(e,t,n,r){let s={},i={},o={};return t.forEach(c=>{c.forEach((l,d)=>{s[l]=l,i[l]=l,o[l]=d})}),t.forEach(c=>{let l=-1;c.forEach(d=>{let u=r(d);if(u.length){u=u.sort((A,f)=>o[A]-o[f]);let h=(u.length-1)/2;for(let A=Math.floor(h),f=Math.ceil(h);A<=f;++A){let m=u[A];i[d]===d&&l<o[m]&&!xJ(n,d,m)&&(i[m]=d,i[d]=s[d]=s[m],l=o[m])}}})}),{root:s,align:i}}function bJ(e,t,n,r,s){let i={},o=wUe(e,t,n,s),c=s?"borderLeft":"borderRight";function l(h,A){let f=o.nodes(),m=f.pop(),g={};for(;m;)g[m]?h(m):(g[m]=!0,f.push(m),f=f.concat(A(m))),m=f.pop()}function d(h){i[h]=o.inEdges(h).reduce((A,f)=>Math.max(A,i[f.v]+o.edge(f)),0)}function u(h){let A=o.outEdges(h).reduce((m,g)=>Math.min(m,i[g.w]-o.edge(g)),Number.POSITIVE_INFINITY),f=e.node(h);A!==Number.POSITIVE_INFINITY&&f.borderType!==c&&(i[h]=Math.max(i[h],A))}return l(d,o.predecessors.bind(o)),l(u,o.successors.bind(o)),Object.keys(r).forEach(h=>i[h]=i[n[h]]),i}function wUe(e,t,n,r){let s=new vUe,i=e.graph(),o=CUe(i.nodesep,i.edgesep,r);return t.forEach(c=>{let l;c.forEach(d=>{let u=n[d];if(s.setNode(u),l){var h=n[l],A=s.edge(h,u);s.setEdge(h,u,Math.max(o(e,d,l),A||0))}l=d})}),s}function CJ(e,t){return Object.values(t).reduce((n,r)=>{let s=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;Object.entries(r).forEach(([c,l])=>{let d=jUe(e,c)/2;s=Math.max(l+d,s),i=Math.min(l-d,i)});const o=s-i;return o<n[0]&&(n=[o,r]),n},[Number.POSITIVE_INFINITY,null])[1]}function jJ(e,t){let n=Object.values(t),r=Lu.applyWithChunking(Math.min,n),s=Lu.applyWithChunking(Math.max,n);["u","d"].forEach(i=>{["l","r"].forEach(o=>{let c=i+o,l=e[c];if(l===t)return;let d=Object.values(l),u=r-Lu.applyWithChunking(Math.min,d);o!=="l"&&(u=s-Lu.applyWithChunking(Math.max,d)),u&&(e[c]=Lu.mapValues(l,h=>h+u))})})}function kJ(e,t){return Lu.mapValues(e.ul,(n,r)=>{if(t)return e[t.toLowerCase()][r];{let s=Object.values(e).map(i=>i[r]).sort((i,o)=>i-o);return(s[1]+s[2])/2}})}function bUe(e){let t=Lu.buildLayerMatrix(e),n=Object.assign(vJ(e,t),yJ(e,t)),r={},s;["u","d"].forEach(o=>{s=o==="u"?t:Object.values(t).reverse(),["l","r"].forEach(c=>{c==="r"&&(s=s.map(h=>Object.values(h).reverse()));let l=(o==="u"?e.predecessors:e.successors).bind(e),d=wJ(e,s,n,l),u=bJ(e,s,d.root,d.align,c==="r");c==="r"&&(u=Lu.mapValues(u,h=>-h)),r[o+c]=u})});let i=CJ(e,r);return jJ(r,i),kJ(r,e.graph().align)}function CUe(e,t,n){return(r,s,i)=>{let o=r.node(s),c=r.node(i),l=0,d;if(l+=o.width/2,Object.hasOwn(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":d=-o.width/2;break;case"r":d=o.width/2;break}if(d&&(l+=n?d:-d),d=0,l+=(o.dummy?t:e)/2,l+=(c.dummy?t:e)/2,l+=c.width/2,Object.hasOwn(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":d=c.width/2;break;case"r":d=-c.width/2;break}return d&&(l+=n?d:-d),d=0,l}}function jUe(e,t){return e.node(t).width}let SJ=si,kUe=yUe.positionX;var SUe=NUe;function NUe(e){e=SJ.asNonCompoundGraph(e),BUe(e),Object.entries(kUe(e)).forEach(([t,n])=>e.node(t).x=n)}function BUe(e){let t=SJ.buildLayerMatrix(e),n=e.graph().ranksep,r=0;t.forEach(s=>{const i=s.reduce((o,c)=>{const l=e.node(c).height;return o>l?o:l},0);s.forEach(o=>e.node(o).y=r+i/2),r+=i+n})}let NO=M3e,BO=$3e,EUe=ADe,_Ue=si.normalizeRanks,IUe=gDe,PUe=si.removeEmptyRanks,EO=wDe,TUe=NDe,_O=EDe,FUe=mUe,DUe=SUe,Tc=si,UUe=Ml.Graph;var LUe=MUe;function MUe(e,t){let n=t&&t.debugTiming?Tc.time:Tc.notime;n("layout",()=>{let r=n("  buildLayoutGraph",()=>WUe(e));n("  runLayout",()=>RUe(r,n,t)),n("  updateInputGraph",()=>OUe(e,r))})}function RUe(e,t,n){t("    makeSpaceForEdgeLabels",()=>GUe(e)),t("    removeSelfEdges",()=>sLe(e)),t("    acyclic",()=>NO.run(e)),t("    nestingGraph.run",()=>EO.run(e)),t("    rank",()=>EUe(Tc.asNonCompoundGraph(e))),t("    injectEdgeLabelProxies",()=>YUe(e)),t("    removeEmptyRanks",()=>PUe(e)),t("    nestingGraph.cleanup",()=>EO.cleanup(e)),t("    normalizeRanks",()=>_Ue(e)),t("    assignRankMinMax",()=>XUe(e)),t("    removeEdgeLabelProxies",()=>JUe(e)),t("    normalize.run",()=>BO.run(e)),t("    parentDummyChains",()=>IUe(e)),t("    addBorderSegments",()=>TUe(e)),t("    order",()=>FUe(e,n)),t("    insertSelfEdges",()=>iLe(e)),t("    adjustCoordinateSystem",()=>_O.adjust(e)),t("    position",()=>DUe(e)),t("    positionSelfEdges",()=>aLe(e)),t("    removeBorderNodes",()=>rLe(e)),t("    normalize.undo",()=>BO.undo(e)),t("    fixupEdgeLabelCoords",()=>tLe(e)),t("    undoCoordinateSystem",()=>_O.undo(e)),t("    translateGraph",()=>ZUe(e)),t("    assignNodeIntersects",()=>eLe(e)),t("    reversePoints",()=>nLe(e)),t("    acyclic.undo",()=>NO.undo(e))}function OUe(e,t){e.nodes().forEach(n=>{let r=e.node(n),s=t.node(n);r&&(r.x=s.x,r.y=s.y,r.rank=s.rank,t.children(n).length&&(r.width=s.width,r.height=s.height))}),e.edges().forEach(n=>{let r=e.edge(n),s=t.edge(n);r.points=s.points,Object.hasOwn(s,"x")&&(r.x=s.x,r.y=s.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}let QUe=["nodesep","edgesep","ranksep","marginx","marginy"],HUe={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},$Ue=["acyclicer","ranker","rankdir","align"],zUe=["width","height","rank"],IO={width:0,height:0},VUe=["minlen","weight","width","height","labeloffset"],qUe={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},KUe=["labelpos"];function WUe(e){let t=new UUe({multigraph:!0,compound:!0}),n=HB(e.graph());return t.setGraph(Object.assign({},HUe,QB(n,QUe),Tc.pick(n,$Ue))),e.nodes().forEach(r=>{let s=HB(e.node(r));const i=QB(s,zUe);Object.keys(IO).forEach(o=>{i[o]===void 0&&(i[o]=IO[o])}),t.setNode(r,i),t.setParent(r,e.parent(r))}),e.edges().forEach(r=>{let s=HB(e.edge(r));t.setEdge(r,Object.assign({},qUe,QB(s,VUe),Tc.pick(s,KUe)))}),t}function GUe(e){let t=e.graph();t.ranksep/=2,e.edges().forEach(n=>{let r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function YUe(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.width&&n.height){let r=e.node(t.v),i={rank:(e.node(t.w).rank-r.rank)/2+r.rank,e:t};Tc.addDummyNode(e,"edge-proxy",i,"_ep")}})}function XUe(e){let t=0;e.nodes().forEach(n=>{let r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=Math.max(t,r.maxRank))}),e.graph().maxRank=t}function JUe(e){e.nodes().forEach(t=>{let n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function ZUe(e){let t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,s=0,i=e.graph(),o=i.marginx||0,c=i.marginy||0;function l(d){let u=d.x,h=d.y,A=d.width,f=d.height;t=Math.min(t,u-A/2),n=Math.max(n,u+A/2),r=Math.min(r,h-f/2),s=Math.max(s,h+f/2)}e.nodes().forEach(d=>l(e.node(d))),e.edges().forEach(d=>{let u=e.edge(d);Object.hasOwn(u,"x")&&l(u)}),t-=o,r-=c,e.nodes().forEach(d=>{let u=e.node(d);u.x-=t,u.y-=r}),e.edges().forEach(d=>{let u=e.edge(d);u.points.forEach(h=>{h.x-=t,h.y-=r}),Object.hasOwn(u,"x")&&(u.x-=t),Object.hasOwn(u,"y")&&(u.y-=r)}),i.width=n-t+o,i.height=s-r+c}function eLe(e){e.edges().forEach(t=>{let n=e.edge(t),r=e.node(t.v),s=e.node(t.w),i,o;n.points?(i=n.points[0],o=n.points[n.points.length-1]):(n.points=[],i=s,o=r),n.points.unshift(Tc.intersectRect(r,i)),n.points.push(Tc.intersectRect(s,o))})}function tLe(e){e.edges().forEach(t=>{let n=e.edge(t);if(Object.hasOwn(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function nLe(e){e.edges().forEach(t=>{let n=e.edge(t);n.reversed&&n.points.reverse()})}function rLe(e){e.nodes().forEach(t=>{if(e.children(t).length){let n=e.node(t),r=e.node(n.borderTop),s=e.node(n.borderBottom),i=e.node(n.borderLeft[n.borderLeft.length-1]),o=e.node(n.borderRight[n.borderRight.length-1]);n.width=Math.abs(o.x-i.x),n.height=Math.abs(s.y-r.y),n.x=i.x+n.width/2,n.y=r.y+n.height/2}}),e.nodes().forEach(t=>{e.node(t).dummy==="border"&&e.removeNode(t)})}function sLe(e){e.edges().forEach(t=>{if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function iLe(e){var t=Tc.buildLayerMatrix(e);t.forEach(n=>{var r=0;n.forEach((s,i)=>{var o=e.node(s);o.order=i+r,(o.selfEdges||[]).forEach(c=>{Tc.addDummyNode(e,"selfedge",{width:c.label.width,height:c.label.height,rank:o.rank,order:i+ ++r,e:c.e,label:c.label},"_se")}),delete o.selfEdges})})}function aLe(e){e.nodes().forEach(t=>{var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),s=r.x+r.width/2,i=r.y,o=n.x-s,c=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:s+2*o/3,y:i-c},{x:s+5*o/6,y:i-c},{x:s+o,y:i},{x:s+5*o/6,y:i+c},{x:s+2*o/3,y:i+c}],n.label.x=n.x,n.label.y=n.y}})}function QB(e,t){return Tc.mapValues(Tc.pick(e,t),Number)}function HB(e){var t={};return e&&Object.entries(e).forEach(([n,r])=>{typeof n=="string"&&(n=n.toLowerCase()),t[n]=r}),t}let oLe=si,cLe=Ml.Graph;var lLe={debugOrdering:dLe};function dLe(e){let t=oLe.buildLayerMatrix(e),n=new cLe({compound:!0,multigraph:!0}).setGraph({});return e.nodes().forEach(r=>{n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),e.edges().forEach(r=>n.setEdge(r.v,r.w,{},r.name)),t.forEach((r,s)=>{let i="layer"+s;n.setNode(i,{rank:"same"}),r.reduce((o,c)=>(n.setEdge(o,c,{style:"invis"}),c))}),n}var uLe="1.1.5",hLe={graphlib:Ml,layout:LUe,debug:lLe,util:{time:si.time,notime:si.notime},version:uLe};const PO=Tj(hLe),ALe=280,fLe=180,pLe={framework:{width:320,height:200},stage:{width:280,height:180},tool:{width:280,height:160},prompt:{width:800,height:300},"custom-prompt":{width:320,height:200},"knowledge-document":{width:240,height:140},context:{width:280,height:160},project:{width:300,height:180}};function TO(e){var n,r;const t=e.type||"default";return e.width&&e.height?{width:e.width,height:e.height}:(n=e.measured)!=null&&n.width&&((r=e.measured)!=null&&r.height)?{width:e.measured.width,height:e.measured.height}:pLe[t]||{width:ALe,height:fLe}}function mLe(e,t,n={}){const{direction:r="LR",nodeSpacing:s=100,rankSpacing:i=200,edgeSpacing:o=50,align:c="UL"}=n,l=new PO.graphlib.Graph;l.setDefaultEdgeLabel(()=>({})),l.setGraph({rankdir:r,nodesep:s,ranksep:i,edgesep:o,align:c,ranker:"longest-path"}),e.forEach(h=>{const A=TO(h);l.setNode(h.id,A)}),t.forEach(h=>{l.setEdge(h.source,h.target)}),PO.layout(l);const d=r==="LR"||r==="RL";return{nodes:e.map(h=>{const A=l.node(h.id),f=TO(h),m={x:A.x-f.width/2,y:A.y-f.height/2};return{...h,position:m,targetPosition:d?"left":"top",sourcePosition:d?"right":"bottom"}}),edges:t}}function gLe(e,t,n={}){const r=e.some(c=>c.type==="framework"),s=e.some(c=>c.type==="stage");e.some(c=>c.type==="tool");const o={direction:"LR",nodeSpacing:80,rankSpacing:e.some(c=>c.type==="prompt")?350:250,edgeSpacing:40,...n};return(r||s)&&(o.rankSpacing=300,o.nodeSpacing=100),mLe(e,t,o)}function vLe(e,t,n,r,s={}){const{enabled:i=!0,layoutOnMount:o=!1,layoutOnNodesChange:c=!0,debounceMs:l=500,layoutOptions:d={}}=s,u=w.useRef(t.length),h=w.useRef(null),A=w.useRef(!1),f=w.useCallback(()=>{if(!i||!e||t.length===0)return;console.log("Applying auto-layout to",t.length,"nodes");const{nodes:g}=gLe(t,n,d);r(g),setTimeout(()=>{e==null||e.fitView({padding:.2,duration:300})},100)},[i,e,t,n,r,d]),m=w.useCallback(()=>{h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{f()},l)},[f,l]);return w.useEffect(()=>{o&&!A.current&&t.length>0&&(A.current=!0,f())},[o,f,t.length]),w.useEffect(()=>{if(!c)return;const g=t.length,b=u.current;g>b&&(console.log("New nodes detected, applying layout"),m()),u.current=g},[t.length,c,m]),w.useEffect(()=>()=>{h.current&&clearTimeout(h.current)},[]),{applyLayout:f,isEnabled:i}}var Aj={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Aj.exports;(function(e,t){(function(){var n,r="4.17.21",s=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",c="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",d=500,u="__lodash_placeholder__",h=1,A=2,f=4,m=1,g=2,b=1,y=2,j=4,x=8,C=16,S=32,_=64,N=128,L=256,P=512,F=30,I="...",T=800,Q=16,D=1,M=2,U=3,H=1/0,$=9007199254740991,R=17976931348623157e292,Y=NaN,X=4294967295,q=X-1,K=X>>>1,J=[["ary",N],["bind",b],["bindKey",y],["curry",x],["curryRight",C],["flip",P],["partial",S],["partialRight",_],["rearg",L]],W="[object Arguments]",ne="[object Array]",ae="[object AsyncFunction]",ce="[object Boolean]",Ae="[object Date]",pe="[object DOMException]",be="[object Error]",Ne="[object Function]",Pe="[object GeneratorFunction]",xe="[object Map]",ue="[object Number]",yt="[object Null]",ht="[object Object]",Ct="[object Promise]",Me="[object Proxy]",kt="[object RegExp]",ct="[object Set]",Nt="[object String]",bt="[object Symbol]",An="[object Undefined]",$t="[object WeakMap]",Rt="[object WeakSet]",Le="[object ArrayBuffer]",Ke="[object DataView]",it="[object Float32Array]",pt="[object Float64Array]",At="[object Int8Array]",rn="[object Int16Array]",vt="[object Int32Array]",Bt="[object Uint8Array]",Xt="[object Uint8ClampedArray]",bn="[object Uint16Array]",Qt="[object Uint32Array]",on=/\b__p \+= '';/g,It=/\b(__p \+=) '' \+/g,Ut=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Wn=/&(?:amp|lt|gt|quot|#39);/g,Nn=/[&<>"']/g,en=RegExp(Wn.source),wt=RegExp(Nn.source),Gn=/<%-([\s\S]+?)%>/g,Bn=/<%([\s\S]+?)%>/g,ir=/<%=([\s\S]+?)%>/g,rs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,St=/^\w*$/,pr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vr=/[\\^$.*+?()[\]{}|]/g,nr=RegExp(Vr.source),Re=/^\s+/,mt=/\s/,Ht=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,sn=/\{\n\/\* \[wrapped with (.+)\] \*/,wn=/,? & /,jr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ur=/[()=,{}\[\]\/\s]/,ar=/\\(\\)?/g,ss=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Xs=/\w*$/,qr=/^[-+]0x[0-9a-f]+$/i,bo=/^0b[01]+$/i,ks=/^\[object .+?Constructor\]$/,yi=/^0o[0-7]+$/i,Ja=/^(?:0|[1-9]\d*)$/,qi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,va=/($^)/,lh=/['\n\r\u2028\u2029\\]/g,nc="\\ud800-\\udfff",dh="\\u0300-\\u036f",uh="\\ufe20-\\ufe2f",Ki="\\u20d0-\\u20ff",Hl=dh+uh+Ki,eu="\\u2700-\\u27bf",$l="a-z\\xdf-\\xf6\\xf8-\\xff",tu="\\xac\\xb1\\xd7\\xf7",hh="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ah="\\u2000-\\u206f",zl=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fh="A-Z\\xc0-\\xd6\\xd8-\\xde",Kr="\\ufe0e\\ufe0f",nu=tu+hh+Ah+zl,Vl="[']",Co="["+nc+"]",ya="["+nu+"]",xi="["+Hl+"]",rc="\\d+",Wr="["+eu+"]",sc="["+$l+"]",ph="[^"+nc+nu+rc+eu+$l+fh+"]",ru="\\ud83c[\\udffb-\\udfff]",mh="(?:"+xi+"|"+ru+")",jo="[^"+nc+"]",gh="(?:\\ud83c[\\udde6-\\uddff]){2}",vh="[\\ud800-\\udbff][\\udc00-\\udfff]",xa="["+fh+"]",yh="\\u200d",ym="(?:"+sc+"|"+ph+")",ay="(?:"+xa+"|"+ph+")",xm="(?:"+Vl+"(?:d|ll|m|re|s|t|ve))?",xh="(?:"+Vl+"(?:D|LL|M|RE|S|T|VE))?",ql=mh+"?",Lc="["+Kr+"]?",oy="(?:"+yh+"(?:"+[jo,gh,vh].join("|")+")"+Lc+ql+")*",su="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",pf="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",fn=Lc+ql+oy,cy="(?:"+[Wr,gh,vh].join("|")+")"+fn,ly="(?:"+[jo+xi+"?",xi,gh,vh,Co].join("|")+")",dy=RegExp(Vl,"g"),uy=RegExp(xi,"g"),ko=RegExp(ru+"(?="+ru+")|"+ly+fn,"g"),Mc=RegExp([xa+"?"+sc+"+"+xm+"(?="+[ya,xa,"$"].join("|")+")",ay+"+"+xh+"(?="+[ya,xa+ym,"$"].join("|")+")",xa+"?"+ym+"+"+xm,xa+"+"+xh,pf,su,rc,cy].join("|"),"g"),hy=RegExp("["+yh+nc+Hl+Kr+"]"),Ay=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,wh=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],mf=-1,or={};or[it]=or[pt]=or[At]=or[rn]=or[vt]=or[Bt]=or[Xt]=or[bn]=or[Qt]=!0,or[W]=or[ne]=or[Le]=or[ce]=or[Ke]=or[Ae]=or[be]=or[Ne]=or[xe]=or[ue]=or[ht]=or[kt]=or[ct]=or[Nt]=or[$t]=!1;var cr={};cr[W]=cr[ne]=cr[Le]=cr[Ke]=cr[ce]=cr[Ae]=cr[it]=cr[pt]=cr[At]=cr[rn]=cr[vt]=cr[xe]=cr[ue]=cr[ht]=cr[kt]=cr[ct]=cr[Nt]=cr[bt]=cr[Bt]=cr[Xt]=cr[bn]=cr[Qt]=!0,cr[be]=cr[Ne]=cr[$t]=!1;var bh={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},fy={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},gf={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},vf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},iu=parseFloat,au=parseInt,Ch=typeof Oi=="object"&&Oi&&Oi.Object===Object&&Oi,jh=typeof self=="object"&&self&&self.Object===Object&&self,As=Ch||jh||Function("return this")(),Rc=t&&!t.nodeType&&t,ic=Rc&&!0&&e&&!e.nodeType&&e,yf=ic&&ic.exports===Rc,So=yf&&Ch.process,Ss=function(){try{var je=ic&&ic.require&&ic.require("util").types;return je||So&&So.binding&&So.binding("util")}catch{}}(),xf=Ss&&Ss.isArrayBuffer,wf=Ss&&Ss.isDate,Kl=Ss&&Ss.isMap,bf=Ss&&Ss.isRegExp,O=Ss&&Ss.isSet,te=Ss&&Ss.isTypedArray;function he(je,Qe,Fe){switch(Fe.length){case 0:return je.call(Qe);case 1:return je.call(Qe,Fe[0]);case 2:return je.call(Qe,Fe[0],Fe[1]);case 3:return je.call(Qe,Fe[0],Fe[1],Fe[2])}return je.apply(Qe,Fe)}function ye(je,Qe,Fe,jt){for(var Et=-1,Zt=je==null?0:je.length;++Et<Zt;){var Pn=je[Et];Qe(jt,Pn,Fe(Pn),je)}return jt}function Se(je,Qe){for(var Fe=-1,jt=je==null?0:je.length;++Fe<jt&&Qe(je[Fe],Fe,je)!==!1;);return je}function ze(je,Qe){for(var Fe=je==null?0:je.length;Fe--&&Qe(je[Fe],Fe,je)!==!1;);return je}function tt(je,Qe){for(var Fe=-1,jt=je==null?0:je.length;++Fe<jt;)if(!Qe(je[Fe],Fe,je))return!1;return!0}function Tt(je,Qe){for(var Fe=-1,jt=je==null?0:je.length,Et=0,Zt=[];++Fe<jt;){var Pn=je[Fe];Qe(Pn,Fe,je)&&(Zt[Et++]=Pn)}return Zt}function zt(je,Qe){var Fe=je==null?0:je.length;return!!Fe&&Oc(je,Qe,0)>-1}function dn(je,Qe,Fe){for(var jt=-1,Et=je==null?0:je.length;++jt<Et;)if(Fe(Qe,je[jt]))return!0;return!1}function Lt(je,Qe){for(var Fe=-1,jt=je==null?0:je.length,Et=Array(jt);++Fe<jt;)Et[Fe]=Qe(je[Fe],Fe,je);return Et}function Un(je,Qe){for(var Fe=-1,jt=Qe.length,Et=je.length;++Fe<jt;)je[Et+Fe]=Qe[Fe];return je}function Fr(je,Qe,Fe,jt){var Et=-1,Zt=je==null?0:je.length;for(jt&&Zt&&(Fe=je[++Et]);++Et<Zt;)Fe=Qe(Fe,je[Et],Et,je);return Fe}function Ns(je,Qe,Fe,jt){var Et=je==null?0:je.length;for(jt&&Et&&(Fe=je[--Et]);Et--;)Fe=Qe(Fe,je[Et],Et,je);return Fe}function vr(je,Qe){for(var Fe=-1,jt=je==null?0:je.length;++Fe<jt;)if(Qe(je[Fe],Fe,je))return!0;return!1}var Ls=Hc("length");function Bs(je){return je.split("")}function oi(je){return je.match(jr)||[]}function wa(je,Qe,Fe){var jt;return Fe(je,function(Et,Zt,Pn){if(Qe(Et,Zt,Pn))return jt=Zt,!1}),jt}function ci(je,Qe,Fe,jt){for(var Et=je.length,Zt=Fe+(jt?1:-1);jt?Zt--:++Zt<Et;)if(Qe(je[Zt],Zt,je))return Zt;return-1}function Oc(je,Qe,Fe){return Qe===Qe?wm(je,Qe,Fe):ci(je,Wl,Fe)}function kh(je,Qe,Fe,jt){for(var Et=Fe-1,Zt=je.length;++Et<Zt;)if(jt(je[Et],Qe))return Et;return-1}function Wl(je){return je!==je}function Qc(je,Qe){var Fe=je==null?0:je.length;return Fe?zc(je,Qe)/Fe:Y}function Hc(je){return function(Qe){return Qe==null?n:Qe[je]}}function $c(je){return function(Qe){return je==null?n:je[Qe]}}function Gl(je,Qe,Fe,jt,Et){return Et(je,function(Zt,Pn,gn){Fe=jt?(jt=!1,Zt):Qe(Fe,Zt,Pn,gn)}),Fe}function wi(je,Qe){var Fe=je.length;for(je.sort(Qe);Fe--;)je[Fe]=je[Fe].value;return je}function zc(je,Qe){for(var Fe,jt=-1,Et=je.length;++jt<Et;){var Zt=Qe(je[jt]);Zt!==n&&(Fe=Fe===n?Zt:Fe+Zt)}return Fe}function Vc(je,Qe){for(var Fe=-1,jt=Array(je);++Fe<je;)jt[Fe]=Qe(Fe);return jt}function Cf(je,Qe){return Lt(Qe,function(Fe){return[Fe,je[Fe]]})}function Sh(je){return je&&je.slice(0,Nh(je)+1).replace(Re,"")}function Yn(je){return function(Qe){return je(Qe)}}function No(je,Qe){return Lt(Qe,function(Fe){return je[Fe]})}function ac(je,Qe){return je.has(Qe)}function jf(je,Qe){for(var Fe=-1,jt=je.length;++Fe<jt&&Oc(Qe,je[Fe],0)>-1;);return Fe}function ba(je,Qe){for(var Fe=je.length;Fe--&&Oc(Qe,je[Fe],0)>-1;);return Fe}function ou(je,Qe){for(var Fe=je.length,jt=0;Fe--;)je[Fe]===Qe&&++jt;return jt}var kf=$c(bh),Sf=$c(fy);function Yl(je){return"\\"+vf[je]}function cu(je,Qe){return je==null?n:je[Qe]}function Js(je){return hy.test(je)}function Ca(je){return Ay.test(je)}function Xl(je){for(var Qe,Fe=[];!(Qe=je.next()).done;)Fe.push(Qe.value);return Fe}function Bo(je){var Qe=-1,Fe=Array(je.size);return je.forEach(function(jt,Et){Fe[++Qe]=[Et,jt]}),Fe}function qc(je,Qe){return function(Fe){return je(Qe(Fe))}}function Za(je,Qe){for(var Fe=-1,jt=je.length,Et=0,Zt=[];++Fe<jt;){var Pn=je[Fe];(Pn===Qe||Pn===u)&&(je[Fe]=u,Zt[Et++]=Fe)}return Zt}function Kc(je){var Qe=-1,Fe=Array(je.size);return je.forEach(function(jt){Fe[++Qe]=jt}),Fe}function fs(je){var Qe=-1,Fe=Array(je.size);return je.forEach(function(jt){Fe[++Qe]=[jt,jt]}),Fe}function wm(je,Qe,Fe){for(var jt=Fe-1,Et=je.length;++jt<Et;)if(je[jt]===Qe)return jt;return-1}function oc(je,Qe,Fe){for(var jt=Fe+1;jt--;)if(je[jt]===Qe)return jt;return jt}function Pi(je){return Js(je)?Bf(je):Ls(je)}function Ti(je){return Js(je)?Jl(je):Bs(je)}function Nh(je){for(var Qe=je.length;Qe--&&mt.test(je.charAt(Qe)););return Qe}var Nf=$c(gf);function Bf(je){for(var Qe=ko.lastIndex=0;ko.test(je);)++Qe;return Qe}function Jl(je){return je.match(ko)||[]}function Zl(je){return je.match(Mc)||[]}var ed=function je(Qe){Qe=Qe==null?As:eo.defaults(As.Object(),Qe,eo.pick(As,wh));var Fe=Qe.Array,jt=Qe.Date,Et=Qe.Error,Zt=Qe.Function,Pn=Qe.Math,gn=Qe.Object,Eo=Qe.RegExp,Ef=Qe.String,li=Qe.TypeError,lu=Fe.prototype,qw=Zt.prototype,du=gn.prototype,_f=Qe["__core-js_shared__"],If=qw.toString,hr=du.hasOwnProperty,Kw=0,Bh=function(){var p=/[^.]+$/.exec(_f&&_f.keys&&_f.keys.IE_PROTO||"");return p?"Symbol(src)_1."+p:""}(),Pf=du.toString,Ww=If.call(gn),Gw=As._,Yw=Eo("^"+If.call(hr).replace(Vr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tf=yf?Qe.Buffer:n,Wc=Qe.Symbol,Ff=Qe.Uint8Array,py=Tf?Tf.allocUnsafe:n,Eh=qc(gn.getPrototypeOf,gn),Df=gn.create,Wi=du.propertyIsEnumerable,Fi=lu.splice,Uf=Wc?Wc.isConcatSpreadable:n,td=Wc?Wc.iterator:n,nd=Wc?Wc.toStringTag:n,uu=function(){try{var p=zf(gn,"defineProperty");return p({},"",{}),p}catch{}}(),bm=Qe.clearTimeout!==As.clearTimeout&&Qe.clearTimeout,my=jt&&jt.now!==As.Date.now&&jt.now,Xw=Qe.setTimeout!==As.setTimeout&&Qe.setTimeout,_h=Pn.ceil,Ih=Pn.floor,Ph=gn.getOwnPropertySymbols,gy=Tf?Tf.isBuffer:n,Jw=Qe.isFinite,yS=lu.join,Zw=qc(gn.keys,gn),Ms=Pn.max,bi=Pn.min,xS=jt.now,wS=Qe.parseInt,eb=Pn.random,vy=lu.reverse,Lf=zf(Qe,"DataView"),Gc=zf(Qe,"Map"),yy=zf(Qe,"Promise"),Th=zf(Qe,"Set"),Fh=zf(Qe,"WeakMap"),Mf=zf(gn,"create"),Cm=Fh&&new Fh,Dh={},bS=Vf(Lf),rd=Vf(Gc),_o=Vf(yy),Yc=Vf(Th),CS=Vf(Fh),Rf=Wc?Wc.prototype:n,to=Rf?Rf.valueOf:n,ja=Rf?Rf.toString:n;function ie(p){if(_s(p)&&!kn(p)&&!(p instanceof Mn)){if(p instanceof ka)return p;if(hr.call(p,"__wrapped__"))return w3(p)}return new ka(p)}var Uh=function(){function p(){}return function(v){if(!gs(v))return{};if(Df)return Df(v);p.prototype=v;var E=new p;return p.prototype=n,E}}();function Of(){}function ka(p,v){this.__wrapped__=p,this.__actions__=[],this.__chain__=!!v,this.__index__=0,this.__values__=n}ie.templateSettings={escape:Gn,evaluate:Bn,interpolate:ir,variable:"",imports:{_:ie}},ie.prototype=Of.prototype,ie.prototype.constructor=ie,ka.prototype=Uh(Of.prototype),ka.prototype.constructor=ka;function Mn(p){this.__wrapped__=p,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=X,this.__views__=[]}function tb(){var p=new Mn(this.__wrapped__);return p.__actions__=no(this.__actions__),p.__dir__=this.__dir__,p.__filtered__=this.__filtered__,p.__iteratees__=no(this.__iteratees__),p.__takeCount__=this.__takeCount__,p.__views__=no(this.__views__),p}function jS(){if(this.__filtered__){var p=new Mn(this);p.__dir__=-1,p.__filtered__=!0}else p=this.clone(),p.__dir__*=-1;return p}function jm(){var p=this.__wrapped__.value(),v=this.__dir__,E=kn(p),V=v<0,ee=E?p.length:0,le=ane(0,ee,this.__views__),ve=le.start,we=le.end,Be=we-ve,Ye=V?we:ve-1,Xe=this.__iteratees__,st=Xe.length,_t=0,Jt=bi(Be,this.__takeCount__);if(!E||!V&&ee==Be&&Jt==Be)return $f(p,this.__actions__);var un=[];e:for(;Be--&&_t<Jt;){Ye+=v;for(var Ln=-1,hn=p[Ye];++Ln<st;){var $n=Xe[Ln],er=$n.iteratee,Do=$n.type,Ia=er(hn);if(Do==M)hn=Ia;else if(!Ia){if(Do==D)continue e;break e}}un[_t++]=hn}return un}Mn.prototype=Uh(Of.prototype),Mn.prototype.constructor=Mn;function cc(p){var v=-1,E=p==null?0:p.length;for(this.clear();++v<E;){var V=p[v];this.set(V[0],V[1])}}function Qf(){this.__data__=Mf?Mf(null):{},this.size=0}function xy(p){var v=this.has(p)&&delete this.__data__[p];return this.size-=v?1:0,v}function nb(p){var v=this.__data__;if(Mf){var E=v[p];return E===l?n:E}return hr.call(v,p)?v[p]:n}function kS(p){var v=this.__data__;return Mf?v[p]!==n:hr.call(v,p)}function rb(p,v){var E=this.__data__;return this.size+=this.has(p)?0:1,E[p]=Mf&&v===n?l:v,this}cc.prototype.clear=Qf,cc.prototype.delete=xy,cc.prototype.get=nb,cc.prototype.has=kS,cc.prototype.set=rb;function Xc(p){var v=-1,E=p==null?0:p.length;for(this.clear();++v<E;){var V=p[v];this.set(V[0],V[1])}}function SS(){this.__data__=[],this.size=0}function NS(p){var v=this.__data__,E=Ie(v,p);if(E<0)return!1;var V=v.length-1;return E==V?v.pop():Fi.call(v,E,1),--this.size,!0}function BS(p){var v=this.__data__,E=Ie(v,p);return E<0?n:v[E][1]}function ES(p){return Ie(this.__data__,p)>-1}function _S(p,v){var E=this.__data__,V=Ie(E,p);return V<0?(++this.size,E.push([p,v])):E[V][1]=v,this}Xc.prototype.clear=SS,Xc.prototype.delete=NS,Xc.prototype.get=BS,Xc.prototype.has=ES,Xc.prototype.set=_S;function lc(p){var v=-1,E=p==null?0:p.length;for(this.clear();++v<E;){var V=p[v];this.set(V[0],V[1])}}function km(){this.size=0,this.__data__={hash:new cc,map:new(Gc||Xc),string:new cc}}function IS(p){var v=vb(this,p).delete(p);return this.size-=v?1:0,v}function PS(p){return vb(this,p).get(p)}function sb(p){return vb(this,p).has(p)}function k(p,v){var E=vb(this,p),V=E.size;return E.set(p,v),this.size+=E.size==V?0:1,this}lc.prototype.clear=km,lc.prototype.delete=IS,lc.prototype.get=PS,lc.prototype.has=sb,lc.prototype.set=k;function B(p){var v=-1,E=p==null?0:p.length;for(this.__data__=new lc;++v<E;)this.add(p[v])}function z(p){return this.__data__.set(p,l),this}function G(p){return this.__data__.has(p)}B.prototype.add=B.prototype.push=z,B.prototype.has=G;function Z(p){var v=this.__data__=new Xc(p);this.size=v.size}function re(){this.__data__=new Xc,this.size=0}function se(p){var v=this.__data__,E=v.delete(p);return this.size=v.size,E}function oe(p){return this.__data__.get(p)}function de(p){return this.__data__.has(p)}function me(p,v){var E=this.__data__;if(E instanceof Xc){var V=E.__data__;if(!Gc||V.length<s-1)return V.push([p,v]),this.size=++E.size,this;E=this.__data__=new lc(V)}return E.set(p,v),this.size=E.size,this}Z.prototype.clear=re,Z.prototype.delete=se,Z.prototype.get=oe,Z.prototype.has=de,Z.prototype.set=me;function Ce(p,v){var E=kn(p),V=!E&&qf(p),ee=!E&&!V&&qh(p),le=!E&&!V&&!ee&&Dm(p),ve=E||V||ee||le,we=ve?Vc(p.length,Ef):[],Be=we.length;for(var Ye in p)(v||hr.call(p,Ye))&&!(ve&&(Ye=="length"||ee&&(Ye=="offset"||Ye=="parent")||le&&(Ye=="buffer"||Ye=="byteLength"||Ye=="byteOffset")||mu(Ye,Be)))&&we.push(Ye);return we}function Te(p){var v=p.length;return v?p[Qh(0,v-1)]:n}function ge(p,v){return yb(no(p),Pt(v,0,p.length))}function ke(p){return yb(no(p))}function Ee(p,v,E){(E!==n&&!tl(p[v],E)||E===n&&!(v in p))&&We(p,v,E)}function Oe(p,v,E){var V=p[v];(!(hr.call(p,v)&&tl(V,E))||E===n&&!(v in p))&&We(p,v,E)}function Ie(p,v){for(var E=p.length;E--;)if(tl(p[E][0],v))return E;return-1}function He(p,v,E,V){return Dt(p,function(ee,le,ve){v(V,ee,E(ee),ve)}),V}function Ve(p,v){return p&&cd(v,ji(v),p)}function lt(p,v){return p&&cd(v,so(v),p)}function We(p,v,E){v=="__proto__"&&uu?uu(p,v,{configurable:!0,enumerable:!0,value:E,writable:!0}):p[v]=E}function Gt(p,v){for(var E=-1,V=v.length,ee=Fe(V),le=p==null;++E<V;)ee[E]=le?n:eN(p,v[E]);return ee}function Pt(p,v,E){return p===p&&(E!==n&&(p=p<=E?p:E),v!==n&&(p=p>=v?p:v)),p}function an(p,v,E,V,ee,le){var ve,we=v&h,Be=v&A,Ye=v&f;if(E&&(ve=ee?E(p,V,ee,le):E(p)),ve!==n)return ve;if(!gs(p))return p;var Xe=kn(p);if(Xe){if(ve=cne(p),!we)return no(p,ve)}else{var st=Ji(p),_t=st==Ne||st==Pe;if(qh(p))return Im(p,we);if(st==ht||st==W||_t&&!ee){if(ve=Be||_t?{}:h3(p),!we)return Be?Xte(p,lt(ve,p)):Yte(p,Ve(ve,p))}else{if(!cr[st])return ee?p:{};ve=lne(p,st,we)}}le||(le=new Z);var Jt=le.get(p);if(Jt)return Jt;le.set(p,ve),Q3(p)?p.forEach(function(hn){ve.add(an(hn,v,E,hn,p,le))}):R3(p)&&p.forEach(function(hn,$n){ve.set($n,an(hn,v,E,$n,p,le))});var un=Ye?Be?OS:RS:Be?so:ji,Ln=Xe?n:un(p);return Se(Ln||p,function(hn,$n){Ln&&($n=hn,hn=p[$n]),Oe(ve,$n,an(hn,v,E,$n,p,le))}),ve}function qt(p){var v=ji(p);return function(E){return Rn(E,p,v)}}function Rn(p,v,E){var V=E.length;if(p==null)return!V;for(p=gn(p);V--;){var ee=E[V],le=v[ee],ve=p[ee];if(ve===n&&!(ee in p)||!le(ve))return!1}return!0}function Es(p,v,E){if(typeof p!="function")throw new li(o);return Ey(function(){p.apply(n,E)},v)}function vn(p,v,E,V){var ee=-1,le=zt,ve=!0,we=p.length,Be=[],Ye=v.length;if(!we)return Be;E&&(v=Lt(v,Yn(E))),V?(le=dn,ve=!1):v.length>=s&&(le=ac,ve=!1,v=new B(v));e:for(;++ee<we;){var Xe=p[ee],st=E==null?Xe:E(Xe);if(Xe=V||Xe!==0?Xe:0,ve&&st===st){for(var _t=Ye;_t--;)if(v[_t]===st)continue e;Be.push(Xe)}else le(v,st,V)||Be.push(Xe)}return Be}var Dt=JF(Dr),xt=JF(ui,!0);function ps(p,v){var E=!0;return Dt(p,function(V,ee,le){return E=!!v(V,ee,le),E}),E}function pn(p,v,E){for(var V=-1,ee=p.length;++V<ee;){var le=p[V],ve=v(le);if(ve!=null&&(we===n?ve===ve&&!Fo(ve):E(ve,we)))var we=ve,Be=le}return Be}function Xn(p,v,E,V){var ee=p.length;for(E=Fn(E),E<0&&(E=-E>ee?0:ee+E),V=V===n||V>ee?ee:Fn(V),V<0&&(V+=ee),V=E>V?0:$3(V);E<V;)p[E++]=v;return p}function Er(p,v){var E=[];return Dt(p,function(V,ee,le){v(V,ee,le)&&E.push(V)}),E}function Zn(p,v,E,V,ee){var le=-1,ve=p.length;for(E||(E=une),ee||(ee=[]);++le<ve;){var we=p[le];v>0&&E(we)?v>1?Zn(we,v-1,E,V,ee):Un(ee,we):V||(ee[ee.length]=we)}return ee}var di=ZF(),Gr=ZF(!0);function Dr(p,v){return p&&di(p,v,ji)}function ui(p,v){return p&&Gr(p,v,ji)}function is(p,v){return Tt(v,function(E){return gu(p[E])})}function Tn(p,v){v=uc(v,p);for(var E=0,V=v.length;p!=null&&E<V;)p=p[ld(v[E++])];return E&&E==V?p:n}function Ar(p,v,E){var V=v(p);return kn(p)?V:Un(V,E(p))}function On(p){return p==null?p===n?An:yt:nd&&nd in gn(p)?ine(p):vne(p)}function lr(p,v){return p>v}function hi(p,v){return p!=null&&hr.call(p,v)}function Io(p,v){return p!=null&&v in gn(p)}function ms(p,v,E){return p>=bi(v,E)&&p<Ms(v,E)}function Ci(p,v,E){for(var V=E?dn:zt,ee=p[0].length,le=p.length,ve=le,we=Fe(le),Be=1/0,Ye=[];ve--;){var Xe=p[ve];ve&&v&&(Xe=Lt(Xe,Yn(v))),Be=bi(Xe.length,Be),we[ve]=!E&&(v||ee>=120&&Xe.length>=120)?new B(ve&&Xe):n}Xe=p[0];var st=-1,_t=we[0];e:for(;++st<ee&&Ye.length<Be;){var Jt=Xe[st],un=v?v(Jt):Jt;if(Jt=E||Jt!==0?Jt:0,!(_t?ac(_t,un):V(Ye,un,E))){for(ve=le;--ve;){var Ln=we[ve];if(!(Ln?ac(Ln,un):V(p[ve],un,E)))continue e}_t&&_t.push(un),Ye.push(Jt)}}return Ye}function kr(p,v,E,V){return Dr(p,function(ee,le,ve){v(V,E(ee),le,ve)}),V}function Yr(p,v,E){v=uc(v,p),p=m3(p,v);var V=p==null?p:p[ld(hc(v))];return V==null?n:he(V,p,E)}function Gi(p){return _s(p)&&On(p)==W}function Di(p){return _s(p)&&On(p)==Le}function Sa(p){return _s(p)&&On(p)==Ae}function Ai(p,v,E,V,ee){return p===v?!0:p==null||v==null||!_s(p)&&!_s(v)?p!==p&&v!==v:Yi(p,v,E,V,Ai,ee)}function Yi(p,v,E,V,ee,le){var ve=kn(p),we=kn(v),Be=ve?ne:Ji(p),Ye=we?ne:Ji(v);Be=Be==W?ht:Be,Ye=Ye==W?ht:Ye;var Xe=Be==ht,st=Ye==ht,_t=Be==Ye;if(_t&&qh(p)){if(!qh(v))return!1;ve=!0,Xe=!1}if(_t&&!Xe)return le||(le=new Z),ve||Dm(p)?l3(p,v,E,V,ee,le):rne(p,v,Be,E,V,ee,le);if(!(E&m)){var Jt=Xe&&hr.call(p,"__wrapped__"),un=st&&hr.call(v,"__wrapped__");if(Jt||un){var Ln=Jt?p.value():p,hn=un?v.value():v;return le||(le=new Z),ee(Ln,hn,E,V,le)}}return _t?(le||(le=new Z),sne(p,v,E,V,ee,le)):!1}function Na(p){return _s(p)&&Ji(p)==xe}function yr(p,v,E,V){var ee=E.length,le=ee,ve=!V;if(p==null)return!le;for(p=gn(p);ee--;){var we=E[ee];if(ve&&we[2]?we[1]!==p[we[0]]:!(we[0]in p))return!1}for(;++ee<le;){we=E[ee];var Be=we[0],Ye=p[Be],Xe=we[1];if(ve&&we[2]){if(Ye===n&&!(Be in p))return!1}else{var st=new Z;if(V)var _t=V(Ye,Xe,Be,p,v,st);if(!(_t===n?Ai(Xe,Ye,m|g,V,st):_t))return!1}}return!0}function Xi(p){if(!gs(p)||Ane(p))return!1;var v=gu(p)?Yw:ks;return v.test(Vf(p))}function Po(p){return _s(p)&&On(p)==kt}function hu(p){return _s(p)&&Ji(p)==ct}function Jc(p){return _s(p)&&kb(p.length)&&!!or[On(p)]}function Zs(p){return typeof p=="function"?p:p==null?io:typeof p=="object"?kn(p)?ab(p[0],p[1]):ib(p):eD(p)}function Lh(p){if(!By(p))return Zw(p);var v=[];for(var E in gn(p))hr.call(p,E)&&E!="constructor"&&v.push(E);return v}function wy(p){if(!gs(p))return gne(p);var v=By(p),E=[];for(var V in p)V=="constructor"&&(v||!hr.call(p,V))||E.push(V);return E}function Mh(p,v){return p<v}function Rh(p,v){var E=-1,V=ro(p)?Fe(p.length):[];return Dt(p,function(ee,le,ve){V[++E]=v(ee,le,ve)}),V}function ib(p){var v=HS(p);return v.length==1&&v[0][2]?f3(v[0][0],v[0][1]):function(E){return E===p||yr(E,p,v)}}function ab(p,v){return zS(p)&&A3(v)?f3(ld(p),v):function(E){var V=eN(E,p);return V===n&&V===v?tN(E,p):Ai(v,V,m|g)}}function Oh(p,v,E,V,ee){p!==v&&di(v,function(le,ve){if(ee||(ee=new Z),gs(le))sd(p,v,ve,E,Oh,V,ee);else{var we=V?V(qS(p,ve),le,ve+"",p,v,ee):n;we===n&&(we=le),Ee(p,ve,we)}},so)}function sd(p,v,E,V,ee,le,ve){var we=qS(p,E),Be=qS(v,E),Ye=ve.get(Be);if(Ye){Ee(p,E,Ye);return}var Xe=le?le(we,Be,E+"",p,v,ve):n,st=Xe===n;if(st){var _t=kn(Be),Jt=!_t&&qh(Be),un=!_t&&!Jt&&Dm(Be);Xe=Be,_t||Jt||un?kn(we)?Xe=we:Rs(we)?Xe=no(we):Jt?(st=!1,Xe=Im(Be,!0)):un?(st=!1,Xe=WF(Be,!0)):Xe=[]:_y(Be)||qf(Be)?(Xe=we,qf(we)?Xe=z3(we):(!gs(we)||gu(we))&&(Xe=h3(Be))):st=!1}st&&(ve.set(Be,Xe),ee(Xe,Be,V,le,ve),ve.delete(Be)),Ee(p,E,Xe)}function ob(p,v){var E=p.length;if(E)return v+=v<0?E:0,mu(v,E)?p[v]:n}function cb(p,v,E){v.length?v=Lt(v,function(le){return kn(le)?function(ve){return Tn(ve,le.length===1?le[0]:le)}:le}):v=[io];var V=-1;v=Lt(v,Yn(cn()));var ee=Rh(p,function(le,ve,we){var Be=Lt(v,function(Ye){return Ye(le)});return{criteria:Be,index:++V,value:le}});return wi(ee,function(le,ve){return Gte(le,ve,E)})}function TS(p,v){return by(p,v,function(E,V){return tN(p,V)})}function by(p,v,E){for(var V=-1,ee=v.length,le={};++V<ee;){var ve=v[V],we=Tn(p,ve);E(we,ve)&&Hh(le,uc(ve,p),we)}return le}function Sm(p){return function(v){return Tn(v,p)}}function Nm(p,v,E,V){var ee=V?kh:Oc,le=-1,ve=v.length,we=p;for(p===v&&(v=no(v)),E&&(we=Lt(p,Yn(E)));++le<ve;)for(var Be=0,Ye=v[le],Xe=E?E(Ye):Ye;(Be=ee(we,Xe,Be,V))>-1;)we!==p&&Fi.call(we,Be,1),Fi.call(p,Be,1);return p}function Cy(p,v){for(var E=p?v.length:0,V=E-1;E--;){var ee=v[E];if(E==V||ee!==le){var le=ee;mu(ee)?Fi.call(p,ee,1):Sy(p,ee)}}return p}function Qh(p,v){return p+Ih(eb()*(v-p+1))}function jy(p,v,E,V){for(var ee=-1,le=Ms(_h((v-p)/(E||1)),0),ve=Fe(le);le--;)ve[V?le:++ee]=p,p+=E;return ve}function Au(p,v){var E="";if(!p||v<1||v>$)return E;do v%2&&(E+=p),v=Ih(v/2),v&&(p+=p);while(v);return E}function En(p,v){return KS(p3(p,v,io),p+"")}function FS(p){return Te(Um(p))}function Bm(p,v){var E=Um(p);return yb(E,Pt(v,0,E.length))}function Hh(p,v,E,V){if(!gs(p))return p;v=uc(v,p);for(var ee=-1,le=v.length,ve=le-1,we=p;we!=null&&++ee<le;){var Be=ld(v[ee]),Ye=E;if(Be==="__proto__"||Be==="constructor"||Be==="prototype")return p;if(ee!=ve){var Xe=we[Be];Ye=V?V(Xe,Be,we):n,Ye===n&&(Ye=gs(Xe)?Xe:mu(v[ee+1])?[]:{})}Oe(we,Be,Ye),we=we[Be]}return p}var Em=Cm?function(p,v){return Cm.set(p,v),p}:io,id=uu?function(p,v){return uu(p,"toString",{configurable:!0,enumerable:!1,value:rN(v),writable:!0})}:io;function lb(p){return yb(Um(p))}function Ba(p,v,E){var V=-1,ee=p.length;v<0&&(v=-v>ee?0:ee+v),E=E>ee?ee:E,E<0&&(E+=ee),ee=v>E?0:E-v>>>0,v>>>=0;for(var le=Fe(ee);++V<ee;)le[V]=p[V+v];return le}function DS(p,v){var E;return Dt(p,function(V,ee,le){return E=v(V,ee,le),!E}),!!E}function Hf(p,v,E){var V=0,ee=p==null?V:p.length;if(typeof v=="number"&&v===v&&ee<=K){for(;V<ee;){var le=V+ee>>>1,ve=p[le];ve!==null&&!Fo(ve)&&(E?ve<=v:ve<v)?V=le+1:ee=le}return ee}return ad(p,v,io,E)}function ad(p,v,E,V){var ee=0,le=p==null?0:p.length;if(le===0)return 0;v=E(v);for(var ve=v!==v,we=v===null,Be=Fo(v),Ye=v===n;ee<le;){var Xe=Ih((ee+le)/2),st=E(p[Xe]),_t=st!==n,Jt=st===null,un=st===st,Ln=Fo(st);if(ve)var hn=V||un;else Ye?hn=un&&(V||_t):we?hn=un&&_t&&(V||!Jt):Be?hn=un&&_t&&!Jt&&(V||!Ln):Jt||Ln?hn=!1:hn=V?st<=v:st<v;hn?ee=Xe+1:le=Xe}return bi(le,q)}function db(p,v){for(var E=-1,V=p.length,ee=0,le=[];++E<V;){var ve=p[E],we=v?v(ve):ve;if(!E||!tl(we,Be)){var Be=we;le[ee++]=ve===0?0:ve}}return le}function ky(p){return typeof p=="number"?p:Fo(p)?Y:+p}function Ea(p){if(typeof p=="string")return p;if(kn(p))return Lt(p,Ea)+"";if(Fo(p))return ja?ja.call(p):"";var v=p+"";return v=="0"&&1/p==-H?"-0":v}function Zc(p,v,E){var V=-1,ee=zt,le=p.length,ve=!0,we=[],Be=we;if(E)ve=!1,ee=dn;else if(le>=s){var Ye=v?null:tne(p);if(Ye)return Kc(Ye);ve=!1,ee=ac,Be=new B}else Be=v?[]:we;e:for(;++V<le;){var Xe=p[V],st=v?v(Xe):Xe;if(Xe=E||Xe!==0?Xe:0,ve&&st===st){for(var _t=Be.length;_t--;)if(Be[_t]===st)continue e;v&&Be.push(st),we.push(Xe)}else ee(Be,st,E)||(Be!==we&&Be.push(st),we.push(Xe))}return we}function Sy(p,v){return v=uc(v,p),p=m3(p,v),p==null||delete p[ld(hc(v))]}function $h(p,v,E,V){return Hh(p,v,E(Tn(p,v)),V)}function zh(p,v,E,V){for(var ee=p.length,le=V?ee:-1;(V?le--:++le<ee)&&v(p[le],le,p););return E?Ba(p,V?0:le,V?le+1:ee):Ba(p,V?le+1:0,V?ee:le)}function $f(p,v){var E=p;return E instanceof Mn&&(E=E.value()),Fr(v,function(V,ee){return ee.func.apply(ee.thisArg,Un([V],ee.args))},E)}function To(p,v,E){var V=p.length;if(V<2)return V?Zc(p[0]):[];for(var ee=-1,le=Fe(V);++ee<V;)for(var ve=p[ee],we=-1;++we<V;)we!=ee&&(le[ee]=vn(le[ee]||ve,p[we],v,E));return Zc(Zn(le,1),v,E)}function el(p,v,E){for(var V=-1,ee=p.length,le=v.length,ve={};++V<ee;){var we=V<le?v[V]:n;E(ve,p[V],we)}return ve}function dc(p){return Rs(p)?p:[]}function Vh(p){return typeof p=="function"?p:io}function uc(p,v){return kn(p)?p:zS(p,v)?[p]:x3(xr(p))}var ub=En;function od(p,v,E){var V=p.length;return E=E===n?V:E,!v&&E>=V?p:Ba(p,v,E)}var _m=bm||function(p){return As.clearTimeout(p)};function Im(p,v){if(v)return p.slice();var E=p.length,V=py?py(E):new p.constructor(E);return p.copy(V),V}function US(p){var v=new p.constructor(p.byteLength);return new Ff(v).set(new Ff(p)),v}function qte(p,v){var E=v?US(p.buffer):p.buffer;return new p.constructor(E,p.byteOffset,p.byteLength)}function Kte(p){var v=new p.constructor(p.source,Xs.exec(p));return v.lastIndex=p.lastIndex,v}function Wte(p){return to?gn(to.call(p)):{}}function WF(p,v){var E=v?US(p.buffer):p.buffer;return new p.constructor(E,p.byteOffset,p.length)}function GF(p,v){if(p!==v){var E=p!==n,V=p===null,ee=p===p,le=Fo(p),ve=v!==n,we=v===null,Be=v===v,Ye=Fo(v);if(!we&&!Ye&&!le&&p>v||le&&ve&&Be&&!we&&!Ye||V&&ve&&Be||!E&&Be||!ee)return 1;if(!V&&!le&&!Ye&&p<v||Ye&&E&&ee&&!V&&!le||we&&E&&ee||!ve&&ee||!Be)return-1}return 0}function Gte(p,v,E){for(var V=-1,ee=p.criteria,le=v.criteria,ve=ee.length,we=E.length;++V<ve;){var Be=GF(ee[V],le[V]);if(Be){if(V>=we)return Be;var Ye=E[V];return Be*(Ye=="desc"?-1:1)}}return p.index-v.index}function YF(p,v,E,V){for(var ee=-1,le=p.length,ve=E.length,we=-1,Be=v.length,Ye=Ms(le-ve,0),Xe=Fe(Be+Ye),st=!V;++we<Be;)Xe[we]=v[we];for(;++ee<ve;)(st||ee<le)&&(Xe[E[ee]]=p[ee]);for(;Ye--;)Xe[we++]=p[ee++];return Xe}function XF(p,v,E,V){for(var ee=-1,le=p.length,ve=-1,we=E.length,Be=-1,Ye=v.length,Xe=Ms(le-we,0),st=Fe(Xe+Ye),_t=!V;++ee<Xe;)st[ee]=p[ee];for(var Jt=ee;++Be<Ye;)st[Jt+Be]=v[Be];for(;++ve<we;)(_t||ee<le)&&(st[Jt+E[ve]]=p[ee++]);return st}function no(p,v){var E=-1,V=p.length;for(v||(v=Fe(V));++E<V;)v[E]=p[E];return v}function cd(p,v,E,V){var ee=!E;E||(E={});for(var le=-1,ve=v.length;++le<ve;){var we=v[le],Be=V?V(E[we],p[we],we,E,p):n;Be===n&&(Be=p[we]),ee?We(E,we,Be):Oe(E,we,Be)}return E}function Yte(p,v){return cd(p,$S(p),v)}function Xte(p,v){return cd(p,d3(p),v)}function hb(p,v){return function(E,V){var ee=kn(E)?ye:He,le=v?v():{};return ee(E,p,cn(V,2),le)}}function Pm(p){return En(function(v,E){var V=-1,ee=E.length,le=ee>1?E[ee-1]:n,ve=ee>2?E[2]:n;for(le=p.length>3&&typeof le=="function"?(ee--,le):n,ve&&_a(E[0],E[1],ve)&&(le=ee<3?n:le,ee=1),v=gn(v);++V<ee;){var we=E[V];we&&p(v,we,V,le)}return v})}function JF(p,v){return function(E,V){if(E==null)return E;if(!ro(E))return p(E,V);for(var ee=E.length,le=v?ee:-1,ve=gn(E);(v?le--:++le<ee)&&V(ve[le],le,ve)!==!1;);return E}}function ZF(p){return function(v,E,V){for(var ee=-1,le=gn(v),ve=V(v),we=ve.length;we--;){var Be=ve[p?we:++ee];if(E(le[Be],Be,le)===!1)break}return v}}function Jte(p,v,E){var V=v&b,ee=Ny(p);function le(){var ve=this&&this!==As&&this instanceof le?ee:p;return ve.apply(V?E:this,arguments)}return le}function e3(p){return function(v){v=xr(v);var E=Js(v)?Ti(v):n,V=E?E[0]:v.charAt(0),ee=E?od(E,1).join(""):v.slice(1);return V[p]()+ee}}function Tm(p){return function(v){return Fr(J3(X3(v).replace(dy,"")),p,"")}}function Ny(p){return function(){var v=arguments;switch(v.length){case 0:return new p;case 1:return new p(v[0]);case 2:return new p(v[0],v[1]);case 3:return new p(v[0],v[1],v[2]);case 4:return new p(v[0],v[1],v[2],v[3]);case 5:return new p(v[0],v[1],v[2],v[3],v[4]);case 6:return new p(v[0],v[1],v[2],v[3],v[4],v[5]);case 7:return new p(v[0],v[1],v[2],v[3],v[4],v[5],v[6])}var E=Uh(p.prototype),V=p.apply(E,v);return gs(V)?V:E}}function Zte(p,v,E){var V=Ny(p);function ee(){for(var le=arguments.length,ve=Fe(le),we=le,Be=Fm(ee);we--;)ve[we]=arguments[we];var Ye=le<3&&ve[0]!==Be&&ve[le-1]!==Be?[]:Za(ve,Be);if(le-=Ye.length,le<E)return i3(p,v,Ab,ee.placeholder,n,ve,Ye,n,n,E-le);var Xe=this&&this!==As&&this instanceof ee?V:p;return he(Xe,this,ve)}return ee}function t3(p){return function(v,E,V){var ee=gn(v);if(!ro(v)){var le=cn(E,3);v=ji(v),E=function(we){return le(ee[we],we,ee)}}var ve=p(v,E,V);return ve>-1?ee[le?v[ve]:ve]:n}}function n3(p){return pu(function(v){var E=v.length,V=E,ee=ka.prototype.thru;for(p&&v.reverse();V--;){var le=v[V];if(typeof le!="function")throw new li(o);if(ee&&!ve&&gb(le)=="wrapper")var ve=new ka([],!0)}for(V=ve?V:E;++V<E;){le=v[V];var we=gb(le),Be=we=="wrapper"?QS(le):n;Be&&VS(Be[0])&&Be[1]==(N|x|S|L)&&!Be[4].length&&Be[9]==1?ve=ve[gb(Be[0])].apply(ve,Be[3]):ve=le.length==1&&VS(le)?ve[we]():ve.thru(le)}return function(){var Ye=arguments,Xe=Ye[0];if(ve&&Ye.length==1&&kn(Xe))return ve.plant(Xe).value();for(var st=0,_t=E?v[st].apply(this,Ye):Xe;++st<E;)_t=v[st].call(this,_t);return _t}})}function Ab(p,v,E,V,ee,le,ve,we,Be,Ye){var Xe=v&N,st=v&b,_t=v&y,Jt=v&(x|C),un=v&P,Ln=_t?n:Ny(p);function hn(){for(var $n=arguments.length,er=Fe($n),Do=$n;Do--;)er[Do]=arguments[Do];if(Jt)var Ia=Fm(hn),Uo=ou(er,Ia);if(V&&(er=YF(er,V,ee,Jt)),le&&(er=XF(er,le,ve,Jt)),$n-=Uo,Jt&&$n<Ye){var Os=Za(er,Ia);return i3(p,v,Ab,hn.placeholder,E,er,Os,we,Be,Ye-$n)}var nl=st?E:this,yu=_t?nl[p]:p;return $n=er.length,we?er=yne(er,we):un&&$n>1&&er.reverse(),Xe&&Be<$n&&(er.length=Be),this&&this!==As&&this instanceof hn&&(yu=Ln||Ny(yu)),yu.apply(nl,er)}return hn}function r3(p,v){return function(E,V){return kr(E,p,v(V),{})}}function fb(p,v){return function(E,V){var ee;if(E===n&&V===n)return v;if(E!==n&&(ee=E),V!==n){if(ee===n)return V;typeof E=="string"||typeof V=="string"?(E=Ea(E),V=Ea(V)):(E=ky(E),V=ky(V)),ee=p(E,V)}return ee}}function LS(p){return pu(function(v){return v=Lt(v,Yn(cn())),En(function(E){var V=this;return p(v,function(ee){return he(ee,V,E)})})})}function pb(p,v){v=v===n?" ":Ea(v);var E=v.length;if(E<2)return E?Au(v,p):v;var V=Au(v,_h(p/Pi(v)));return Js(v)?od(Ti(V),0,p).join(""):V.slice(0,p)}function ene(p,v,E,V){var ee=v&b,le=Ny(p);function ve(){for(var we=-1,Be=arguments.length,Ye=-1,Xe=V.length,st=Fe(Xe+Be),_t=this&&this!==As&&this instanceof ve?le:p;++Ye<Xe;)st[Ye]=V[Ye];for(;Be--;)st[Ye++]=arguments[++we];return he(_t,ee?E:this,st)}return ve}function s3(p){return function(v,E,V){return V&&typeof V!="number"&&_a(v,E,V)&&(E=V=n),v=vu(v),E===n?(E=v,v=0):E=vu(E),V=V===n?v<E?1:-1:vu(V),jy(v,E,V,p)}}function mb(p){return function(v,E){return typeof v=="string"&&typeof E=="string"||(v=Ac(v),E=Ac(E)),p(v,E)}}function i3(p,v,E,V,ee,le,ve,we,Be,Ye){var Xe=v&x,st=Xe?ve:n,_t=Xe?n:ve,Jt=Xe?le:n,un=Xe?n:le;v|=Xe?S:_,v&=~(Xe?_:S),v&j||(v&=~(b|y));var Ln=[p,v,ee,Jt,st,un,_t,we,Be,Ye],hn=E.apply(n,Ln);return VS(p)&&g3(hn,Ln),hn.placeholder=V,v3(hn,p,v)}function MS(p){var v=Pn[p];return function(E,V){if(E=Ac(E),V=V==null?0:bi(Fn(V),292),V&&Jw(E)){var ee=(xr(E)+"e").split("e"),le=v(ee[0]+"e"+(+ee[1]+V));return ee=(xr(le)+"e").split("e"),+(ee[0]+"e"+(+ee[1]-V))}return v(E)}}var tne=Th&&1/Kc(new Th([,-0]))[1]==H?function(p){return new Th(p)}:aN;function a3(p){return function(v){var E=Ji(v);return E==xe?Bo(v):E==ct?fs(v):Cf(v,p(v))}}function fu(p,v,E,V,ee,le,ve,we){var Be=v&y;if(!Be&&typeof p!="function")throw new li(o);var Ye=V?V.length:0;if(Ye||(v&=~(S|_),V=ee=n),ve=ve===n?ve:Ms(Fn(ve),0),we=we===n?we:Fn(we),Ye-=ee?ee.length:0,v&_){var Xe=V,st=ee;V=ee=n}var _t=Be?n:QS(p),Jt=[p,v,E,V,ee,Xe,st,le,ve,we];if(_t&&mne(Jt,_t),p=Jt[0],v=Jt[1],E=Jt[2],V=Jt[3],ee=Jt[4],we=Jt[9]=Jt[9]===n?Be?0:p.length:Ms(Jt[9]-Ye,0),!we&&v&(x|C)&&(v&=~(x|C)),!v||v==b)var un=Jte(p,v,E);else v==x||v==C?un=Zte(p,v,we):(v==S||v==(b|S))&&!ee.length?un=ene(p,v,E,V):un=Ab.apply(n,Jt);var Ln=_t?Em:g3;return v3(Ln(un,Jt),p,v)}function o3(p,v,E,V){return p===n||tl(p,du[E])&&!hr.call(V,E)?v:p}function c3(p,v,E,V,ee,le){return gs(p)&&gs(v)&&(le.set(v,p),Oh(p,v,n,c3,le),le.delete(v)),p}function nne(p){return _y(p)?n:p}function l3(p,v,E,V,ee,le){var ve=E&m,we=p.length,Be=v.length;if(we!=Be&&!(ve&&Be>we))return!1;var Ye=le.get(p),Xe=le.get(v);if(Ye&&Xe)return Ye==v&&Xe==p;var st=-1,_t=!0,Jt=E&g?new B:n;for(le.set(p,v),le.set(v,p);++st<we;){var un=p[st],Ln=v[st];if(V)var hn=ve?V(Ln,un,st,v,p,le):V(un,Ln,st,p,v,le);if(hn!==n){if(hn)continue;_t=!1;break}if(Jt){if(!vr(v,function($n,er){if(!ac(Jt,er)&&(un===$n||ee(un,$n,E,V,le)))return Jt.push(er)})){_t=!1;break}}else if(!(un===Ln||ee(un,Ln,E,V,le))){_t=!1;break}}return le.delete(p),le.delete(v),_t}function rne(p,v,E,V,ee,le,ve){switch(E){case Ke:if(p.byteLength!=v.byteLength||p.byteOffset!=v.byteOffset)return!1;p=p.buffer,v=v.buffer;case Le:return!(p.byteLength!=v.byteLength||!le(new Ff(p),new Ff(v)));case ce:case Ae:case ue:return tl(+p,+v);case be:return p.name==v.name&&p.message==v.message;case kt:case Nt:return p==v+"";case xe:var we=Bo;case ct:var Be=V&m;if(we||(we=Kc),p.size!=v.size&&!Be)return!1;var Ye=ve.get(p);if(Ye)return Ye==v;V|=g,ve.set(p,v);var Xe=l3(we(p),we(v),V,ee,le,ve);return ve.delete(p),Xe;case bt:if(to)return to.call(p)==to.call(v)}return!1}function sne(p,v,E,V,ee,le){var ve=E&m,we=RS(p),Be=we.length,Ye=RS(v),Xe=Ye.length;if(Be!=Xe&&!ve)return!1;for(var st=Be;st--;){var _t=we[st];if(!(ve?_t in v:hr.call(v,_t)))return!1}var Jt=le.get(p),un=le.get(v);if(Jt&&un)return Jt==v&&un==p;var Ln=!0;le.set(p,v),le.set(v,p);for(var hn=ve;++st<Be;){_t=we[st];var $n=p[_t],er=v[_t];if(V)var Do=ve?V(er,$n,_t,v,p,le):V($n,er,_t,p,v,le);if(!(Do===n?$n===er||ee($n,er,E,V,le):Do)){Ln=!1;break}hn||(hn=_t=="constructor")}if(Ln&&!hn){var Ia=p.constructor,Uo=v.constructor;Ia!=Uo&&"constructor"in p&&"constructor"in v&&!(typeof Ia=="function"&&Ia instanceof Ia&&typeof Uo=="function"&&Uo instanceof Uo)&&(Ln=!1)}return le.delete(p),le.delete(v),Ln}function pu(p){return KS(p3(p,n,j3),p+"")}function RS(p){return Ar(p,ji,$S)}function OS(p){return Ar(p,so,d3)}var QS=Cm?function(p){return Cm.get(p)}:aN;function gb(p){for(var v=p.name+"",E=Dh[v],V=hr.call(Dh,v)?E.length:0;V--;){var ee=E[V],le=ee.func;if(le==null||le==p)return ee.name}return v}function Fm(p){var v=hr.call(ie,"placeholder")?ie:p;return v.placeholder}function cn(){var p=ie.iteratee||sN;return p=p===sN?Zs:p,arguments.length?p(arguments[0],arguments[1]):p}function vb(p,v){var E=p.__data__;return hne(v)?E[typeof v=="string"?"string":"hash"]:E.map}function HS(p){for(var v=ji(p),E=v.length;E--;){var V=v[E],ee=p[V];v[E]=[V,ee,A3(ee)]}return v}function zf(p,v){var E=cu(p,v);return Xi(E)?E:n}function ine(p){var v=hr.call(p,nd),E=p[nd];try{p[nd]=n;var V=!0}catch{}var ee=Pf.call(p);return V&&(v?p[nd]=E:delete p[nd]),ee}var $S=Ph?function(p){return p==null?[]:(p=gn(p),Tt(Ph(p),function(v){return Wi.call(p,v)}))}:oN,d3=Ph?function(p){for(var v=[];p;)Un(v,$S(p)),p=Eh(p);return v}:oN,Ji=On;(Lf&&Ji(new Lf(new ArrayBuffer(1)))!=Ke||Gc&&Ji(new Gc)!=xe||yy&&Ji(yy.resolve())!=Ct||Th&&Ji(new Th)!=ct||Fh&&Ji(new Fh)!=$t)&&(Ji=function(p){var v=On(p),E=v==ht?p.constructor:n,V=E?Vf(E):"";if(V)switch(V){case bS:return Ke;case rd:return xe;case _o:return Ct;case Yc:return ct;case CS:return $t}return v});function ane(p,v,E){for(var V=-1,ee=E.length;++V<ee;){var le=E[V],ve=le.size;switch(le.type){case"drop":p+=ve;break;case"dropRight":v-=ve;break;case"take":v=bi(v,p+ve);break;case"takeRight":p=Ms(p,v-ve);break}}return{start:p,end:v}}function one(p){var v=p.match(sn);return v?v[1].split(wn):[]}function u3(p,v,E){v=uc(v,p);for(var V=-1,ee=v.length,le=!1;++V<ee;){var ve=ld(v[V]);if(!(le=p!=null&&E(p,ve)))break;p=p[ve]}return le||++V!=ee?le:(ee=p==null?0:p.length,!!ee&&kb(ee)&&mu(ve,ee)&&(kn(p)||qf(p)))}function cne(p){var v=p.length,E=new p.constructor(v);return v&&typeof p[0]=="string"&&hr.call(p,"index")&&(E.index=p.index,E.input=p.input),E}function h3(p){return typeof p.constructor=="function"&&!By(p)?Uh(Eh(p)):{}}function lne(p,v,E){var V=p.constructor;switch(v){case Le:return US(p);case ce:case Ae:return new V(+p);case Ke:return qte(p,E);case it:case pt:case At:case rn:case vt:case Bt:case Xt:case bn:case Qt:return WF(p,E);case xe:return new V;case ue:case Nt:return new V(p);case kt:return Kte(p);case ct:return new V;case bt:return Wte(p)}}function dne(p,v){var E=v.length;if(!E)return p;var V=E-1;return v[V]=(E>1?"& ":"")+v[V],v=v.join(E>2?", ":" "),p.replace(Ht,`{
/* [wrapped with `+v+`] */
`)}function une(p){return kn(p)||qf(p)||!!(Uf&&p&&p[Uf])}function mu(p,v){var E=typeof p;return v=v??$,!!v&&(E=="number"||E!="symbol"&&Ja.test(p))&&p>-1&&p%1==0&&p<v}function _a(p,v,E){if(!gs(E))return!1;var V=typeof v;return(V=="number"?ro(E)&&mu(v,E.length):V=="string"&&v in E)?tl(E[v],p):!1}function zS(p,v){if(kn(p))return!1;var E=typeof p;return E=="number"||E=="symbol"||E=="boolean"||p==null||Fo(p)?!0:St.test(p)||!rs.test(p)||v!=null&&p in gn(v)}function hne(p){var v=typeof p;return v=="string"||v=="number"||v=="symbol"||v=="boolean"?p!=="__proto__":p===null}function VS(p){var v=gb(p),E=ie[v];if(typeof E!="function"||!(v in Mn.prototype))return!1;if(p===E)return!0;var V=QS(E);return!!V&&p===V[0]}function Ane(p){return!!Bh&&Bh in p}var fne=_f?gu:cN;function By(p){var v=p&&p.constructor,E=typeof v=="function"&&v.prototype||du;return p===E}function A3(p){return p===p&&!gs(p)}function f3(p,v){return function(E){return E==null?!1:E[p]===v&&(v!==n||p in gn(E))}}function pne(p){var v=Cb(p,function(V){return E.size===d&&E.clear(),V}),E=v.cache;return v}function mne(p,v){var E=p[1],V=v[1],ee=E|V,le=ee<(b|y|N),ve=V==N&&E==x||V==N&&E==L&&p[7].length<=v[8]||V==(N|L)&&v[7].length<=v[8]&&E==x;if(!(le||ve))return p;V&b&&(p[2]=v[2],ee|=E&b?0:j);var we=v[3];if(we){var Be=p[3];p[3]=Be?YF(Be,we,v[4]):we,p[4]=Be?Za(p[3],u):v[4]}return we=v[5],we&&(Be=p[5],p[5]=Be?XF(Be,we,v[6]):we,p[6]=Be?Za(p[5],u):v[6]),we=v[7],we&&(p[7]=we),V&N&&(p[8]=p[8]==null?v[8]:bi(p[8],v[8])),p[9]==null&&(p[9]=v[9]),p[0]=v[0],p[1]=ee,p}function gne(p){var v=[];if(p!=null)for(var E in gn(p))v.push(E);return v}function vne(p){return Pf.call(p)}function p3(p,v,E){return v=Ms(v===n?p.length-1:v,0),function(){for(var V=arguments,ee=-1,le=Ms(V.length-v,0),ve=Fe(le);++ee<le;)ve[ee]=V[v+ee];ee=-1;for(var we=Fe(v+1);++ee<v;)we[ee]=V[ee];return we[v]=E(ve),he(p,this,we)}}function m3(p,v){return v.length<2?p:Tn(p,Ba(v,0,-1))}function yne(p,v){for(var E=p.length,V=bi(v.length,E),ee=no(p);V--;){var le=v[V];p[V]=mu(le,E)?ee[le]:n}return p}function qS(p,v){if(!(v==="constructor"&&typeof p[v]=="function")&&v!="__proto__")return p[v]}var g3=y3(Em),Ey=Xw||function(p,v){return As.setTimeout(p,v)},KS=y3(id);function v3(p,v,E){var V=v+"";return KS(p,dne(V,xne(one(V),E)))}function y3(p){var v=0,E=0;return function(){var V=xS(),ee=Q-(V-E);if(E=V,ee>0){if(++v>=T)return arguments[0]}else v=0;return p.apply(n,arguments)}}function yb(p,v){var E=-1,V=p.length,ee=V-1;for(v=v===n?V:v;++E<v;){var le=Qh(E,ee),ve=p[le];p[le]=p[E],p[E]=ve}return p.length=v,p}var x3=pne(function(p){var v=[];return p.charCodeAt(0)===46&&v.push(""),p.replace(pr,function(E,V,ee,le){v.push(ee?le.replace(ar,"$1"):V||E)}),v});function ld(p){if(typeof p=="string"||Fo(p))return p;var v=p+"";return v=="0"&&1/p==-H?"-0":v}function Vf(p){if(p!=null){try{return If.call(p)}catch{}try{return p+""}catch{}}return""}function xne(p,v){return Se(J,function(E){var V="_."+E[0];v&E[1]&&!zt(p,V)&&p.push(V)}),p.sort()}function w3(p){if(p instanceof Mn)return p.clone();var v=new ka(p.__wrapped__,p.__chain__);return v.__actions__=no(p.__actions__),v.__index__=p.__index__,v.__values__=p.__values__,v}function wne(p,v,E){(E?_a(p,v,E):v===n)?v=1:v=Ms(Fn(v),0);var V=p==null?0:p.length;if(!V||v<1)return[];for(var ee=0,le=0,ve=Fe(_h(V/v));ee<V;)ve[le++]=Ba(p,ee,ee+=v);return ve}function bne(p){for(var v=-1,E=p==null?0:p.length,V=0,ee=[];++v<E;){var le=p[v];le&&(ee[V++]=le)}return ee}function Cne(){var p=arguments.length;if(!p)return[];for(var v=Fe(p-1),E=arguments[0],V=p;V--;)v[V-1]=arguments[V];return Un(kn(E)?no(E):[E],Zn(v,1))}var jne=En(function(p,v){return Rs(p)?vn(p,Zn(v,1,Rs,!0)):[]}),kne=En(function(p,v){var E=hc(v);return Rs(E)&&(E=n),Rs(p)?vn(p,Zn(v,1,Rs,!0),cn(E,2)):[]}),Sne=En(function(p,v){var E=hc(v);return Rs(E)&&(E=n),Rs(p)?vn(p,Zn(v,1,Rs,!0),n,E):[]});function Nne(p,v,E){var V=p==null?0:p.length;return V?(v=E||v===n?1:Fn(v),Ba(p,v<0?0:v,V)):[]}function Bne(p,v,E){var V=p==null?0:p.length;return V?(v=E||v===n?1:Fn(v),v=V-v,Ba(p,0,v<0?0:v)):[]}function Ene(p,v){return p&&p.length?zh(p,cn(v,3),!0,!0):[]}function _ne(p,v){return p&&p.length?zh(p,cn(v,3),!0):[]}function Ine(p,v,E,V){var ee=p==null?0:p.length;return ee?(E&&typeof E!="number"&&_a(p,v,E)&&(E=0,V=ee),Xn(p,v,E,V)):[]}function b3(p,v,E){var V=p==null?0:p.length;if(!V)return-1;var ee=E==null?0:Fn(E);return ee<0&&(ee=Ms(V+ee,0)),ci(p,cn(v,3),ee)}function C3(p,v,E){var V=p==null?0:p.length;if(!V)return-1;var ee=V-1;return E!==n&&(ee=Fn(E),ee=E<0?Ms(V+ee,0):bi(ee,V-1)),ci(p,cn(v,3),ee,!0)}function j3(p){var v=p==null?0:p.length;return v?Zn(p,1):[]}function Pne(p){var v=p==null?0:p.length;return v?Zn(p,H):[]}function Tne(p,v){var E=p==null?0:p.length;return E?(v=v===n?1:Fn(v),Zn(p,v)):[]}function Fne(p){for(var v=-1,E=p==null?0:p.length,V={};++v<E;){var ee=p[v];V[ee[0]]=ee[1]}return V}function k3(p){return p&&p.length?p[0]:n}function Dne(p,v,E){var V=p==null?0:p.length;if(!V)return-1;var ee=E==null?0:Fn(E);return ee<0&&(ee=Ms(V+ee,0)),Oc(p,v,ee)}function Une(p){var v=p==null?0:p.length;return v?Ba(p,0,-1):[]}var Lne=En(function(p){var v=Lt(p,dc);return v.length&&v[0]===p[0]?Ci(v):[]}),Mne=En(function(p){var v=hc(p),E=Lt(p,dc);return v===hc(E)?v=n:E.pop(),E.length&&E[0]===p[0]?Ci(E,cn(v,2)):[]}),Rne=En(function(p){var v=hc(p),E=Lt(p,dc);return v=typeof v=="function"?v:n,v&&E.pop(),E.length&&E[0]===p[0]?Ci(E,n,v):[]});function One(p,v){return p==null?"":yS.call(p,v)}function hc(p){var v=p==null?0:p.length;return v?p[v-1]:n}function Qne(p,v,E){var V=p==null?0:p.length;if(!V)return-1;var ee=V;return E!==n&&(ee=Fn(E),ee=ee<0?Ms(V+ee,0):bi(ee,V-1)),v===v?oc(p,v,ee):ci(p,Wl,ee,!0)}function Hne(p,v){return p&&p.length?ob(p,Fn(v)):n}var $ne=En(S3);function S3(p,v){return p&&p.length&&v&&v.length?Nm(p,v):p}function zne(p,v,E){return p&&p.length&&v&&v.length?Nm(p,v,cn(E,2)):p}function Vne(p,v,E){return p&&p.length&&v&&v.length?Nm(p,v,n,E):p}var qne=pu(function(p,v){var E=p==null?0:p.length,V=Gt(p,v);return Cy(p,Lt(v,function(ee){return mu(ee,E)?+ee:ee}).sort(GF)),V});function Kne(p,v){var E=[];if(!(p&&p.length))return E;var V=-1,ee=[],le=p.length;for(v=cn(v,3);++V<le;){var ve=p[V];v(ve,V,p)&&(E.push(ve),ee.push(V))}return Cy(p,ee),E}function WS(p){return p==null?p:vy.call(p)}function Wne(p,v,E){var V=p==null?0:p.length;return V?(E&&typeof E!="number"&&_a(p,v,E)?(v=0,E=V):(v=v==null?0:Fn(v),E=E===n?V:Fn(E)),Ba(p,v,E)):[]}function Gne(p,v){return Hf(p,v)}function Yne(p,v,E){return ad(p,v,cn(E,2))}function Xne(p,v){var E=p==null?0:p.length;if(E){var V=Hf(p,v);if(V<E&&tl(p[V],v))return V}return-1}function Jne(p,v){return Hf(p,v,!0)}function Zne(p,v,E){return ad(p,v,cn(E,2),!0)}function ere(p,v){var E=p==null?0:p.length;if(E){var V=Hf(p,v,!0)-1;if(tl(p[V],v))return V}return-1}function tre(p){return p&&p.length?db(p):[]}function nre(p,v){return p&&p.length?db(p,cn(v,2)):[]}function rre(p){var v=p==null?0:p.length;return v?Ba(p,1,v):[]}function sre(p,v,E){return p&&p.length?(v=E||v===n?1:Fn(v),Ba(p,0,v<0?0:v)):[]}function ire(p,v,E){var V=p==null?0:p.length;return V?(v=E||v===n?1:Fn(v),v=V-v,Ba(p,v<0?0:v,V)):[]}function are(p,v){return p&&p.length?zh(p,cn(v,3),!1,!0):[]}function ore(p,v){return p&&p.length?zh(p,cn(v,3)):[]}var cre=En(function(p){return Zc(Zn(p,1,Rs,!0))}),lre=En(function(p){var v=hc(p);return Rs(v)&&(v=n),Zc(Zn(p,1,Rs,!0),cn(v,2))}),dre=En(function(p){var v=hc(p);return v=typeof v=="function"?v:n,Zc(Zn(p,1,Rs,!0),n,v)});function ure(p){return p&&p.length?Zc(p):[]}function hre(p,v){return p&&p.length?Zc(p,cn(v,2)):[]}function Are(p,v){return v=typeof v=="function"?v:n,p&&p.length?Zc(p,n,v):[]}function GS(p){if(!(p&&p.length))return[];var v=0;return p=Tt(p,function(E){if(Rs(E))return v=Ms(E.length,v),!0}),Vc(v,function(E){return Lt(p,Hc(E))})}function N3(p,v){if(!(p&&p.length))return[];var E=GS(p);return v==null?E:Lt(E,function(V){return he(v,n,V)})}var fre=En(function(p,v){return Rs(p)?vn(p,v):[]}),pre=En(function(p){return To(Tt(p,Rs))}),mre=En(function(p){var v=hc(p);return Rs(v)&&(v=n),To(Tt(p,Rs),cn(v,2))}),gre=En(function(p){var v=hc(p);return v=typeof v=="function"?v:n,To(Tt(p,Rs),n,v)}),vre=En(GS);function yre(p,v){return el(p||[],v||[],Oe)}function xre(p,v){return el(p||[],v||[],Hh)}var wre=En(function(p){var v=p.length,E=v>1?p[v-1]:n;return E=typeof E=="function"?(p.pop(),E):n,N3(p,E)});function B3(p){var v=ie(p);return v.__chain__=!0,v}function bre(p,v){return v(p),p}function xb(p,v){return v(p)}var Cre=pu(function(p){var v=p.length,E=v?p[0]:0,V=this.__wrapped__,ee=function(le){return Gt(le,p)};return v>1||this.__actions__.length||!(V instanceof Mn)||!mu(E)?this.thru(ee):(V=V.slice(E,+E+(v?1:0)),V.__actions__.push({func:xb,args:[ee],thisArg:n}),new ka(V,this.__chain__).thru(function(le){return v&&!le.length&&le.push(n),le}))});function jre(){return B3(this)}function kre(){return new ka(this.value(),this.__chain__)}function Sre(){this.__values__===n&&(this.__values__=H3(this.value()));var p=this.__index__>=this.__values__.length,v=p?n:this.__values__[this.__index__++];return{done:p,value:v}}function Nre(){return this}function Bre(p){for(var v,E=this;E instanceof Of;){var V=w3(E);V.__index__=0,V.__values__=n,v?ee.__wrapped__=V:v=V;var ee=V;E=E.__wrapped__}return ee.__wrapped__=p,v}function Ere(){var p=this.__wrapped__;if(p instanceof Mn){var v=p;return this.__actions__.length&&(v=new Mn(this)),v=v.reverse(),v.__actions__.push({func:xb,args:[WS],thisArg:n}),new ka(v,this.__chain__)}return this.thru(WS)}function _re(){return $f(this.__wrapped__,this.__actions__)}var Ire=hb(function(p,v,E){hr.call(p,E)?++p[E]:We(p,E,1)});function Pre(p,v,E){var V=kn(p)?tt:ps;return E&&_a(p,v,E)&&(v=n),V(p,cn(v,3))}function Tre(p,v){var E=kn(p)?Tt:Er;return E(p,cn(v,3))}var Fre=t3(b3),Dre=t3(C3);function Ure(p,v){return Zn(wb(p,v),1)}function Lre(p,v){return Zn(wb(p,v),H)}function Mre(p,v,E){return E=E===n?1:Fn(E),Zn(wb(p,v),E)}function E3(p,v){var E=kn(p)?Se:Dt;return E(p,cn(v,3))}function _3(p,v){var E=kn(p)?ze:xt;return E(p,cn(v,3))}var Rre=hb(function(p,v,E){hr.call(p,E)?p[E].push(v):We(p,E,[v])});function Ore(p,v,E,V){p=ro(p)?p:Um(p),E=E&&!V?Fn(E):0;var ee=p.length;return E<0&&(E=Ms(ee+E,0)),Sb(p)?E<=ee&&p.indexOf(v,E)>-1:!!ee&&Oc(p,v,E)>-1}var Qre=En(function(p,v,E){var V=-1,ee=typeof v=="function",le=ro(p)?Fe(p.length):[];return Dt(p,function(ve){le[++V]=ee?he(v,ve,E):Yr(ve,v,E)}),le}),Hre=hb(function(p,v,E){We(p,E,v)});function wb(p,v){var E=kn(p)?Lt:Rh;return E(p,cn(v,3))}function $re(p,v,E,V){return p==null?[]:(kn(v)||(v=v==null?[]:[v]),E=V?n:E,kn(E)||(E=E==null?[]:[E]),cb(p,v,E))}var zre=hb(function(p,v,E){p[E?0:1].push(v)},function(){return[[],[]]});function Vre(p,v,E){var V=kn(p)?Fr:Gl,ee=arguments.length<3;return V(p,cn(v,4),E,ee,Dt)}function qre(p,v,E){var V=kn(p)?Ns:Gl,ee=arguments.length<3;return V(p,cn(v,4),E,ee,xt)}function Kre(p,v){var E=kn(p)?Tt:Er;return E(p,jb(cn(v,3)))}function Wre(p){var v=kn(p)?Te:FS;return v(p)}function Gre(p,v,E){(E?_a(p,v,E):v===n)?v=1:v=Fn(v);var V=kn(p)?ge:Bm;return V(p,v)}function Yre(p){var v=kn(p)?ke:lb;return v(p)}function Xre(p){if(p==null)return 0;if(ro(p))return Sb(p)?Pi(p):p.length;var v=Ji(p);return v==xe||v==ct?p.size:Lh(p).length}function Jre(p,v,E){var V=kn(p)?vr:DS;return E&&_a(p,v,E)&&(v=n),V(p,cn(v,3))}var Zre=En(function(p,v){if(p==null)return[];var E=v.length;return E>1&&_a(p,v[0],v[1])?v=[]:E>2&&_a(v[0],v[1],v[2])&&(v=[v[0]]),cb(p,Zn(v,1),[])}),bb=my||function(){return As.Date.now()};function ese(p,v){if(typeof v!="function")throw new li(o);return p=Fn(p),function(){if(--p<1)return v.apply(this,arguments)}}function I3(p,v,E){return v=E?n:v,v=p&&v==null?p.length:v,fu(p,N,n,n,n,n,v)}function P3(p,v){var E;if(typeof v!="function")throw new li(o);return p=Fn(p),function(){return--p>0&&(E=v.apply(this,arguments)),p<=1&&(v=n),E}}var YS=En(function(p,v,E){var V=b;if(E.length){var ee=Za(E,Fm(YS));V|=S}return fu(p,V,v,E,ee)}),T3=En(function(p,v,E){var V=b|y;if(E.length){var ee=Za(E,Fm(T3));V|=S}return fu(v,V,p,E,ee)});function F3(p,v,E){v=E?n:v;var V=fu(p,x,n,n,n,n,n,v);return V.placeholder=F3.placeholder,V}function D3(p,v,E){v=E?n:v;var V=fu(p,C,n,n,n,n,n,v);return V.placeholder=D3.placeholder,V}function U3(p,v,E){var V,ee,le,ve,we,Be,Ye=0,Xe=!1,st=!1,_t=!0;if(typeof p!="function")throw new li(o);v=Ac(v)||0,gs(E)&&(Xe=!!E.leading,st="maxWait"in E,le=st?Ms(Ac(E.maxWait)||0,v):le,_t="trailing"in E?!!E.trailing:_t);function Jt(Os){var nl=V,yu=ee;return V=ee=n,Ye=Os,ve=p.apply(yu,nl),ve}function un(Os){return Ye=Os,we=Ey($n,v),Xe?Jt(Os):ve}function Ln(Os){var nl=Os-Be,yu=Os-Ye,tD=v-nl;return st?bi(tD,le-yu):tD}function hn(Os){var nl=Os-Be,yu=Os-Ye;return Be===n||nl>=v||nl<0||st&&yu>=le}function $n(){var Os=bb();if(hn(Os))return er(Os);we=Ey($n,Ln(Os))}function er(Os){return we=n,_t&&V?Jt(Os):(V=ee=n,ve)}function Do(){we!==n&&_m(we),Ye=0,V=Be=ee=we=n}function Ia(){return we===n?ve:er(bb())}function Uo(){var Os=bb(),nl=hn(Os);if(V=arguments,ee=this,Be=Os,nl){if(we===n)return un(Be);if(st)return _m(we),we=Ey($n,v),Jt(Be)}return we===n&&(we=Ey($n,v)),ve}return Uo.cancel=Do,Uo.flush=Ia,Uo}var tse=En(function(p,v){return Es(p,1,v)}),nse=En(function(p,v,E){return Es(p,Ac(v)||0,E)});function rse(p){return fu(p,P)}function Cb(p,v){if(typeof p!="function"||v!=null&&typeof v!="function")throw new li(o);var E=function(){var V=arguments,ee=v?v.apply(this,V):V[0],le=E.cache;if(le.has(ee))return le.get(ee);var ve=p.apply(this,V);return E.cache=le.set(ee,ve)||le,ve};return E.cache=new(Cb.Cache||lc),E}Cb.Cache=lc;function jb(p){if(typeof p!="function")throw new li(o);return function(){var v=arguments;switch(v.length){case 0:return!p.call(this);case 1:return!p.call(this,v[0]);case 2:return!p.call(this,v[0],v[1]);case 3:return!p.call(this,v[0],v[1],v[2])}return!p.apply(this,v)}}function sse(p){return P3(2,p)}var ise=ub(function(p,v){v=v.length==1&&kn(v[0])?Lt(v[0],Yn(cn())):Lt(Zn(v,1),Yn(cn()));var E=v.length;return En(function(V){for(var ee=-1,le=bi(V.length,E);++ee<le;)V[ee]=v[ee].call(this,V[ee]);return he(p,this,V)})}),XS=En(function(p,v){var E=Za(v,Fm(XS));return fu(p,S,n,v,E)}),L3=En(function(p,v){var E=Za(v,Fm(L3));return fu(p,_,n,v,E)}),ase=pu(function(p,v){return fu(p,L,n,n,n,v)});function ose(p,v){if(typeof p!="function")throw new li(o);return v=v===n?v:Fn(v),En(p,v)}function cse(p,v){if(typeof p!="function")throw new li(o);return v=v==null?0:Ms(Fn(v),0),En(function(E){var V=E[v],ee=od(E,0,v);return V&&Un(ee,V),he(p,this,ee)})}function lse(p,v,E){var V=!0,ee=!0;if(typeof p!="function")throw new li(o);return gs(E)&&(V="leading"in E?!!E.leading:V,ee="trailing"in E?!!E.trailing:ee),U3(p,v,{leading:V,maxWait:v,trailing:ee})}function dse(p){return I3(p,1)}function use(p,v){return XS(Vh(v),p)}function hse(){if(!arguments.length)return[];var p=arguments[0];return kn(p)?p:[p]}function Ase(p){return an(p,f)}function fse(p,v){return v=typeof v=="function"?v:n,an(p,f,v)}function pse(p){return an(p,h|f)}function mse(p,v){return v=typeof v=="function"?v:n,an(p,h|f,v)}function gse(p,v){return v==null||Rn(p,v,ji(v))}function tl(p,v){return p===v||p!==p&&v!==v}var vse=mb(lr),yse=mb(function(p,v){return p>=v}),qf=Gi(function(){return arguments}())?Gi:function(p){return _s(p)&&hr.call(p,"callee")&&!Wi.call(p,"callee")},kn=Fe.isArray,xse=xf?Yn(xf):Di;function ro(p){return p!=null&&kb(p.length)&&!gu(p)}function Rs(p){return _s(p)&&ro(p)}function wse(p){return p===!0||p===!1||_s(p)&&On(p)==ce}var qh=gy||cN,bse=wf?Yn(wf):Sa;function Cse(p){return _s(p)&&p.nodeType===1&&!_y(p)}function jse(p){if(p==null)return!0;if(ro(p)&&(kn(p)||typeof p=="string"||typeof p.splice=="function"||qh(p)||Dm(p)||qf(p)))return!p.length;var v=Ji(p);if(v==xe||v==ct)return!p.size;if(By(p))return!Lh(p).length;for(var E in p)if(hr.call(p,E))return!1;return!0}function kse(p,v){return Ai(p,v)}function Sse(p,v,E){E=typeof E=="function"?E:n;var V=E?E(p,v):n;return V===n?Ai(p,v,n,E):!!V}function JS(p){if(!_s(p))return!1;var v=On(p);return v==be||v==pe||typeof p.message=="string"&&typeof p.name=="string"&&!_y(p)}function Nse(p){return typeof p=="number"&&Jw(p)}function gu(p){if(!gs(p))return!1;var v=On(p);return v==Ne||v==Pe||v==ae||v==Me}function M3(p){return typeof p=="number"&&p==Fn(p)}function kb(p){return typeof p=="number"&&p>-1&&p%1==0&&p<=$}function gs(p){var v=typeof p;return p!=null&&(v=="object"||v=="function")}function _s(p){return p!=null&&typeof p=="object"}var R3=Kl?Yn(Kl):Na;function Bse(p,v){return p===v||yr(p,v,HS(v))}function Ese(p,v,E){return E=typeof E=="function"?E:n,yr(p,v,HS(v),E)}function _se(p){return O3(p)&&p!=+p}function Ise(p){if(fne(p))throw new Et(i);return Xi(p)}function Pse(p){return p===null}function Tse(p){return p==null}function O3(p){return typeof p=="number"||_s(p)&&On(p)==ue}function _y(p){if(!_s(p)||On(p)!=ht)return!1;var v=Eh(p);if(v===null)return!0;var E=hr.call(v,"constructor")&&v.constructor;return typeof E=="function"&&E instanceof E&&If.call(E)==Ww}var ZS=bf?Yn(bf):Po;function Fse(p){return M3(p)&&p>=-$&&p<=$}var Q3=O?Yn(O):hu;function Sb(p){return typeof p=="string"||!kn(p)&&_s(p)&&On(p)==Nt}function Fo(p){return typeof p=="symbol"||_s(p)&&On(p)==bt}var Dm=te?Yn(te):Jc;function Dse(p){return p===n}function Use(p){return _s(p)&&Ji(p)==$t}function Lse(p){return _s(p)&&On(p)==Rt}var Mse=mb(Mh),Rse=mb(function(p,v){return p<=v});function H3(p){if(!p)return[];if(ro(p))return Sb(p)?Ti(p):no(p);if(td&&p[td])return Xl(p[td]());var v=Ji(p),E=v==xe?Bo:v==ct?Kc:Um;return E(p)}function vu(p){if(!p)return p===0?p:0;if(p=Ac(p),p===H||p===-H){var v=p<0?-1:1;return v*R}return p===p?p:0}function Fn(p){var v=vu(p),E=v%1;return v===v?E?v-E:v:0}function $3(p){return p?Pt(Fn(p),0,X):0}function Ac(p){if(typeof p=="number")return p;if(Fo(p))return Y;if(gs(p)){var v=typeof p.valueOf=="function"?p.valueOf():p;p=gs(v)?v+"":v}if(typeof p!="string")return p===0?p:+p;p=Sh(p);var E=bo.test(p);return E||yi.test(p)?au(p.slice(2),E?2:8):qr.test(p)?Y:+p}function z3(p){return cd(p,so(p))}function Ose(p){return p?Pt(Fn(p),-$,$):p===0?p:0}function xr(p){return p==null?"":Ea(p)}var Qse=Pm(function(p,v){if(By(v)||ro(v)){cd(v,ji(v),p);return}for(var E in v)hr.call(v,E)&&Oe(p,E,v[E])}),V3=Pm(function(p,v){cd(v,so(v),p)}),Nb=Pm(function(p,v,E,V){cd(v,so(v),p,V)}),Hse=Pm(function(p,v,E,V){cd(v,ji(v),p,V)}),$se=pu(Gt);function zse(p,v){var E=Uh(p);return v==null?E:Ve(E,v)}var Vse=En(function(p,v){p=gn(p);var E=-1,V=v.length,ee=V>2?v[2]:n;for(ee&&_a(v[0],v[1],ee)&&(V=1);++E<V;)for(var le=v[E],ve=so(le),we=-1,Be=ve.length;++we<Be;){var Ye=ve[we],Xe=p[Ye];(Xe===n||tl(Xe,du[Ye])&&!hr.call(p,Ye))&&(p[Ye]=le[Ye])}return p}),qse=En(function(p){return p.push(n,c3),he(q3,n,p)});function Kse(p,v){return wa(p,cn(v,3),Dr)}function Wse(p,v){return wa(p,cn(v,3),ui)}function Gse(p,v){return p==null?p:di(p,cn(v,3),so)}function Yse(p,v){return p==null?p:Gr(p,cn(v,3),so)}function Xse(p,v){return p&&Dr(p,cn(v,3))}function Jse(p,v){return p&&ui(p,cn(v,3))}function Zse(p){return p==null?[]:is(p,ji(p))}function eie(p){return p==null?[]:is(p,so(p))}function eN(p,v,E){var V=p==null?n:Tn(p,v);return V===n?E:V}function tie(p,v){return p!=null&&u3(p,v,hi)}function tN(p,v){return p!=null&&u3(p,v,Io)}var nie=r3(function(p,v,E){v!=null&&typeof v.toString!="function"&&(v=Pf.call(v)),p[v]=E},rN(io)),rie=r3(function(p,v,E){v!=null&&typeof v.toString!="function"&&(v=Pf.call(v)),hr.call(p,v)?p[v].push(E):p[v]=[E]},cn),sie=En(Yr);function ji(p){return ro(p)?Ce(p):Lh(p)}function so(p){return ro(p)?Ce(p,!0):wy(p)}function iie(p,v){var E={};return v=cn(v,3),Dr(p,function(V,ee,le){We(E,v(V,ee,le),V)}),E}function aie(p,v){var E={};return v=cn(v,3),Dr(p,function(V,ee,le){We(E,ee,v(V,ee,le))}),E}var oie=Pm(function(p,v,E){Oh(p,v,E)}),q3=Pm(function(p,v,E,V){Oh(p,v,E,V)}),cie=pu(function(p,v){var E={};if(p==null)return E;var V=!1;v=Lt(v,function(le){return le=uc(le,p),V||(V=le.length>1),le}),cd(p,OS(p),E),V&&(E=an(E,h|A|f,nne));for(var ee=v.length;ee--;)Sy(E,v[ee]);return E});function lie(p,v){return K3(p,jb(cn(v)))}var die=pu(function(p,v){return p==null?{}:TS(p,v)});function K3(p,v){if(p==null)return{};var E=Lt(OS(p),function(V){return[V]});return v=cn(v),by(p,E,function(V,ee){return v(V,ee[0])})}function uie(p,v,E){v=uc(v,p);var V=-1,ee=v.length;for(ee||(ee=1,p=n);++V<ee;){var le=p==null?n:p[ld(v[V])];le===n&&(V=ee,le=E),p=gu(le)?le.call(p):le}return p}function hie(p,v,E){return p==null?p:Hh(p,v,E)}function Aie(p,v,E,V){return V=typeof V=="function"?V:n,p==null?p:Hh(p,v,E,V)}var W3=a3(ji),G3=a3(so);function fie(p,v,E){var V=kn(p),ee=V||qh(p)||Dm(p);if(v=cn(v,4),E==null){var le=p&&p.constructor;ee?E=V?new le:[]:gs(p)?E=gu(le)?Uh(Eh(p)):{}:E={}}return(ee?Se:Dr)(p,function(ve,we,Be){return v(E,ve,we,Be)}),E}function pie(p,v){return p==null?!0:Sy(p,v)}function mie(p,v,E){return p==null?p:$h(p,v,Vh(E))}function gie(p,v,E,V){return V=typeof V=="function"?V:n,p==null?p:$h(p,v,Vh(E),V)}function Um(p){return p==null?[]:No(p,ji(p))}function vie(p){return p==null?[]:No(p,so(p))}function yie(p,v,E){return E===n&&(E=v,v=n),E!==n&&(E=Ac(E),E=E===E?E:0),v!==n&&(v=Ac(v),v=v===v?v:0),Pt(Ac(p),v,E)}function xie(p,v,E){return v=vu(v),E===n?(E=v,v=0):E=vu(E),p=Ac(p),ms(p,v,E)}function wie(p,v,E){if(E&&typeof E!="boolean"&&_a(p,v,E)&&(v=E=n),E===n&&(typeof v=="boolean"?(E=v,v=n):typeof p=="boolean"&&(E=p,p=n)),p===n&&v===n?(p=0,v=1):(p=vu(p),v===n?(v=p,p=0):v=vu(v)),p>v){var V=p;p=v,v=V}if(E||p%1||v%1){var ee=eb();return bi(p+ee*(v-p+iu("1e-"+((ee+"").length-1))),v)}return Qh(p,v)}var bie=Tm(function(p,v,E){return v=v.toLowerCase(),p+(E?Y3(v):v)});function Y3(p){return nN(xr(p).toLowerCase())}function X3(p){return p=xr(p),p&&p.replace(qi,kf).replace(uy,"")}function Cie(p,v,E){p=xr(p),v=Ea(v);var V=p.length;E=E===n?V:Pt(Fn(E),0,V);var ee=E;return E-=v.length,E>=0&&p.slice(E,ee)==v}function jie(p){return p=xr(p),p&&wt.test(p)?p.replace(Nn,Sf):p}function kie(p){return p=xr(p),p&&nr.test(p)?p.replace(Vr,"\\$&"):p}var Sie=Tm(function(p,v,E){return p+(E?"-":"")+v.toLowerCase()}),Nie=Tm(function(p,v,E){return p+(E?" ":"")+v.toLowerCase()}),Bie=e3("toLowerCase");function Eie(p,v,E){p=xr(p),v=Fn(v);var V=v?Pi(p):0;if(!v||V>=v)return p;var ee=(v-V)/2;return pb(Ih(ee),E)+p+pb(_h(ee),E)}function _ie(p,v,E){p=xr(p),v=Fn(v);var V=v?Pi(p):0;return v&&V<v?p+pb(v-V,E):p}function Iie(p,v,E){p=xr(p),v=Fn(v);var V=v?Pi(p):0;return v&&V<v?pb(v-V,E)+p:p}function Pie(p,v,E){return E||v==null?v=0:v&&(v=+v),wS(xr(p).replace(Re,""),v||0)}function Tie(p,v,E){return(E?_a(p,v,E):v===n)?v=1:v=Fn(v),Au(xr(p),v)}function Fie(){var p=arguments,v=xr(p[0]);return p.length<3?v:v.replace(p[1],p[2])}var Die=Tm(function(p,v,E){return p+(E?"_":"")+v.toLowerCase()});function Uie(p,v,E){return E&&typeof E!="number"&&_a(p,v,E)&&(v=E=n),E=E===n?X:E>>>0,E?(p=xr(p),p&&(typeof v=="string"||v!=null&&!ZS(v))&&(v=Ea(v),!v&&Js(p))?od(Ti(p),0,E):p.split(v,E)):[]}var Lie=Tm(function(p,v,E){return p+(E?" ":"")+nN(v)});function Mie(p,v,E){return p=xr(p),E=E==null?0:Pt(Fn(E),0,p.length),v=Ea(v),p.slice(E,E+v.length)==v}function Rie(p,v,E){var V=ie.templateSettings;E&&_a(p,v,E)&&(v=n),p=xr(p),v=Nb({},v,V,o3);var ee=Nb({},v.imports,V.imports,o3),le=ji(ee),ve=No(ee,le),we,Be,Ye=0,Xe=v.interpolate||va,st="__p += '",_t=Eo((v.escape||va).source+"|"+Xe.source+"|"+(Xe===ir?ss:va).source+"|"+(v.evaluate||va).source+"|$","g"),Jt="//# sourceURL="+(hr.call(v,"sourceURL")?(v.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++mf+"]")+`
`;p.replace(_t,function(hn,$n,er,Do,Ia,Uo){return er||(er=Do),st+=p.slice(Ye,Uo).replace(lh,Yl),$n&&(we=!0,st+=`' +
__e(`+$n+`) +
'`),Ia&&(Be=!0,st+=`';
`+Ia+`;
__p += '`),er&&(st+=`' +
((__t = (`+er+`)) == null ? '' : __t) +
'`),Ye=Uo+hn.length,hn}),st+=`';
`;var un=hr.call(v,"variable")&&v.variable;if(!un)st=`with (obj) {
`+st+`
}
`;else if(ur.test(un))throw new Et(c);st=(Be?st.replace(on,""):st).replace(It,"$1").replace(Ut,"$1;"),st="function("+(un||"obj")+`) {
`+(un?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(we?", __e = _.escape":"")+(Be?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+st+`return __p
}`;var Ln=Z3(function(){return Zt(le,Jt+"return "+st).apply(n,ve)});if(Ln.source=st,JS(Ln))throw Ln;return Ln}function Oie(p){return xr(p).toLowerCase()}function Qie(p){return xr(p).toUpperCase()}function Hie(p,v,E){if(p=xr(p),p&&(E||v===n))return Sh(p);if(!p||!(v=Ea(v)))return p;var V=Ti(p),ee=Ti(v),le=jf(V,ee),ve=ba(V,ee)+1;return od(V,le,ve).join("")}function $ie(p,v,E){if(p=xr(p),p&&(E||v===n))return p.slice(0,Nh(p)+1);if(!p||!(v=Ea(v)))return p;var V=Ti(p),ee=ba(V,Ti(v))+1;return od(V,0,ee).join("")}function zie(p,v,E){if(p=xr(p),p&&(E||v===n))return p.replace(Re,"");if(!p||!(v=Ea(v)))return p;var V=Ti(p),ee=jf(V,Ti(v));return od(V,ee).join("")}function Vie(p,v){var E=F,V=I;if(gs(v)){var ee="separator"in v?v.separator:ee;E="length"in v?Fn(v.length):E,V="omission"in v?Ea(v.omission):V}p=xr(p);var le=p.length;if(Js(p)){var ve=Ti(p);le=ve.length}if(E>=le)return p;var we=E-Pi(V);if(we<1)return V;var Be=ve?od(ve,0,we).join(""):p.slice(0,we);if(ee===n)return Be+V;if(ve&&(we+=Be.length-we),ZS(ee)){if(p.slice(we).search(ee)){var Ye,Xe=Be;for(ee.global||(ee=Eo(ee.source,xr(Xs.exec(ee))+"g")),ee.lastIndex=0;Ye=ee.exec(Xe);)var st=Ye.index;Be=Be.slice(0,st===n?we:st)}}else if(p.indexOf(Ea(ee),we)!=we){var _t=Be.lastIndexOf(ee);_t>-1&&(Be=Be.slice(0,_t))}return Be+V}function qie(p){return p=xr(p),p&&en.test(p)?p.replace(Wn,Nf):p}var Kie=Tm(function(p,v,E){return p+(E?" ":"")+v.toUpperCase()}),nN=e3("toUpperCase");function J3(p,v,E){return p=xr(p),v=E?n:v,v===n?Ca(p)?Zl(p):oi(p):p.match(v)||[]}var Z3=En(function(p,v){try{return he(p,n,v)}catch(E){return JS(E)?E:new Et(E)}}),Wie=pu(function(p,v){return Se(v,function(E){E=ld(E),We(p,E,YS(p[E],p))}),p});function Gie(p){var v=p==null?0:p.length,E=cn();return p=v?Lt(p,function(V){if(typeof V[1]!="function")throw new li(o);return[E(V[0]),V[1]]}):[],En(function(V){for(var ee=-1;++ee<v;){var le=p[ee];if(he(le[0],this,V))return he(le[1],this,V)}})}function Yie(p){return qt(an(p,h))}function rN(p){return function(){return p}}function Xie(p,v){return p==null||p!==p?v:p}var Jie=n3(),Zie=n3(!0);function io(p){return p}function sN(p){return Zs(typeof p=="function"?p:an(p,h))}function eae(p){return ib(an(p,h))}function tae(p,v){return ab(p,an(v,h))}var nae=En(function(p,v){return function(E){return Yr(E,p,v)}}),rae=En(function(p,v){return function(E){return Yr(p,E,v)}});function iN(p,v,E){var V=ji(v),ee=is(v,V);E==null&&!(gs(v)&&(ee.length||!V.length))&&(E=v,v=p,p=this,ee=is(v,ji(v)));var le=!(gs(E)&&"chain"in E)||!!E.chain,ve=gu(p);return Se(ee,function(we){var Be=v[we];p[we]=Be,ve&&(p.prototype[we]=function(){var Ye=this.__chain__;if(le||Ye){var Xe=p(this.__wrapped__),st=Xe.__actions__=no(this.__actions__);return st.push({func:Be,args:arguments,thisArg:p}),Xe.__chain__=Ye,Xe}return Be.apply(p,Un([this.value()],arguments))})}),p}function sae(){return As._===this&&(As._=Gw),this}function aN(){}function iae(p){return p=Fn(p),En(function(v){return ob(v,p)})}var aae=LS(Lt),oae=LS(tt),cae=LS(vr);function eD(p){return zS(p)?Hc(ld(p)):Sm(p)}function lae(p){return function(v){return p==null?n:Tn(p,v)}}var dae=s3(),uae=s3(!0);function oN(){return[]}function cN(){return!1}function hae(){return{}}function Aae(){return""}function fae(){return!0}function pae(p,v){if(p=Fn(p),p<1||p>$)return[];var E=X,V=bi(p,X);v=cn(v),p-=X;for(var ee=Vc(V,v);++E<p;)v(E);return ee}function mae(p){return kn(p)?Lt(p,ld):Fo(p)?[p]:no(x3(xr(p)))}function gae(p){var v=++Kw;return xr(p)+v}var vae=fb(function(p,v){return p+v},0),yae=MS("ceil"),xae=fb(function(p,v){return p/v},1),wae=MS("floor");function bae(p){return p&&p.length?pn(p,io,lr):n}function Cae(p,v){return p&&p.length?pn(p,cn(v,2),lr):n}function jae(p){return Qc(p,io)}function kae(p,v){return Qc(p,cn(v,2))}function Sae(p){return p&&p.length?pn(p,io,Mh):n}function Nae(p,v){return p&&p.length?pn(p,cn(v,2),Mh):n}var Bae=fb(function(p,v){return p*v},1),Eae=MS("round"),_ae=fb(function(p,v){return p-v},0);function Iae(p){return p&&p.length?zc(p,io):0}function Pae(p,v){return p&&p.length?zc(p,cn(v,2)):0}return ie.after=ese,ie.ary=I3,ie.assign=Qse,ie.assignIn=V3,ie.assignInWith=Nb,ie.assignWith=Hse,ie.at=$se,ie.before=P3,ie.bind=YS,ie.bindAll=Wie,ie.bindKey=T3,ie.castArray=hse,ie.chain=B3,ie.chunk=wne,ie.compact=bne,ie.concat=Cne,ie.cond=Gie,ie.conforms=Yie,ie.constant=rN,ie.countBy=Ire,ie.create=zse,ie.curry=F3,ie.curryRight=D3,ie.debounce=U3,ie.defaults=Vse,ie.defaultsDeep=qse,ie.defer=tse,ie.delay=nse,ie.difference=jne,ie.differenceBy=kne,ie.differenceWith=Sne,ie.drop=Nne,ie.dropRight=Bne,ie.dropRightWhile=Ene,ie.dropWhile=_ne,ie.fill=Ine,ie.filter=Tre,ie.flatMap=Ure,ie.flatMapDeep=Lre,ie.flatMapDepth=Mre,ie.flatten=j3,ie.flattenDeep=Pne,ie.flattenDepth=Tne,ie.flip=rse,ie.flow=Jie,ie.flowRight=Zie,ie.fromPairs=Fne,ie.functions=Zse,ie.functionsIn=eie,ie.groupBy=Rre,ie.initial=Une,ie.intersection=Lne,ie.intersectionBy=Mne,ie.intersectionWith=Rne,ie.invert=nie,ie.invertBy=rie,ie.invokeMap=Qre,ie.iteratee=sN,ie.keyBy=Hre,ie.keys=ji,ie.keysIn=so,ie.map=wb,ie.mapKeys=iie,ie.mapValues=aie,ie.matches=eae,ie.matchesProperty=tae,ie.memoize=Cb,ie.merge=oie,ie.mergeWith=q3,ie.method=nae,ie.methodOf=rae,ie.mixin=iN,ie.negate=jb,ie.nthArg=iae,ie.omit=cie,ie.omitBy=lie,ie.once=sse,ie.orderBy=$re,ie.over=aae,ie.overArgs=ise,ie.overEvery=oae,ie.overSome=cae,ie.partial=XS,ie.partialRight=L3,ie.partition=zre,ie.pick=die,ie.pickBy=K3,ie.property=eD,ie.propertyOf=lae,ie.pull=$ne,ie.pullAll=S3,ie.pullAllBy=zne,ie.pullAllWith=Vne,ie.pullAt=qne,ie.range=dae,ie.rangeRight=uae,ie.rearg=ase,ie.reject=Kre,ie.remove=Kne,ie.rest=ose,ie.reverse=WS,ie.sampleSize=Gre,ie.set=hie,ie.setWith=Aie,ie.shuffle=Yre,ie.slice=Wne,ie.sortBy=Zre,ie.sortedUniq=tre,ie.sortedUniqBy=nre,ie.split=Uie,ie.spread=cse,ie.tail=rre,ie.take=sre,ie.takeRight=ire,ie.takeRightWhile=are,ie.takeWhile=ore,ie.tap=bre,ie.throttle=lse,ie.thru=xb,ie.toArray=H3,ie.toPairs=W3,ie.toPairsIn=G3,ie.toPath=mae,ie.toPlainObject=z3,ie.transform=fie,ie.unary=dse,ie.union=cre,ie.unionBy=lre,ie.unionWith=dre,ie.uniq=ure,ie.uniqBy=hre,ie.uniqWith=Are,ie.unset=pie,ie.unzip=GS,ie.unzipWith=N3,ie.update=mie,ie.updateWith=gie,ie.values=Um,ie.valuesIn=vie,ie.without=fre,ie.words=J3,ie.wrap=use,ie.xor=pre,ie.xorBy=mre,ie.xorWith=gre,ie.zip=vre,ie.zipObject=yre,ie.zipObjectDeep=xre,ie.zipWith=wre,ie.entries=W3,ie.entriesIn=G3,ie.extend=V3,ie.extendWith=Nb,iN(ie,ie),ie.add=vae,ie.attempt=Z3,ie.camelCase=bie,ie.capitalize=Y3,ie.ceil=yae,ie.clamp=yie,ie.clone=Ase,ie.cloneDeep=pse,ie.cloneDeepWith=mse,ie.cloneWith=fse,ie.conformsTo=gse,ie.deburr=X3,ie.defaultTo=Xie,ie.divide=xae,ie.endsWith=Cie,ie.eq=tl,ie.escape=jie,ie.escapeRegExp=kie,ie.every=Pre,ie.find=Fre,ie.findIndex=b3,ie.findKey=Kse,ie.findLast=Dre,ie.findLastIndex=C3,ie.findLastKey=Wse,ie.floor=wae,ie.forEach=E3,ie.forEachRight=_3,ie.forIn=Gse,ie.forInRight=Yse,ie.forOwn=Xse,ie.forOwnRight=Jse,ie.get=eN,ie.gt=vse,ie.gte=yse,ie.has=tie,ie.hasIn=tN,ie.head=k3,ie.identity=io,ie.includes=Ore,ie.indexOf=Dne,ie.inRange=xie,ie.invoke=sie,ie.isArguments=qf,ie.isArray=kn,ie.isArrayBuffer=xse,ie.isArrayLike=ro,ie.isArrayLikeObject=Rs,ie.isBoolean=wse,ie.isBuffer=qh,ie.isDate=bse,ie.isElement=Cse,ie.isEmpty=jse,ie.isEqual=kse,ie.isEqualWith=Sse,ie.isError=JS,ie.isFinite=Nse,ie.isFunction=gu,ie.isInteger=M3,ie.isLength=kb,ie.isMap=R3,ie.isMatch=Bse,ie.isMatchWith=Ese,ie.isNaN=_se,ie.isNative=Ise,ie.isNil=Tse,ie.isNull=Pse,ie.isNumber=O3,ie.isObject=gs,ie.isObjectLike=_s,ie.isPlainObject=_y,ie.isRegExp=ZS,ie.isSafeInteger=Fse,ie.isSet=Q3,ie.isString=Sb,ie.isSymbol=Fo,ie.isTypedArray=Dm,ie.isUndefined=Dse,ie.isWeakMap=Use,ie.isWeakSet=Lse,ie.join=One,ie.kebabCase=Sie,ie.last=hc,ie.lastIndexOf=Qne,ie.lowerCase=Nie,ie.lowerFirst=Bie,ie.lt=Mse,ie.lte=Rse,ie.max=bae,ie.maxBy=Cae,ie.mean=jae,ie.meanBy=kae,ie.min=Sae,ie.minBy=Nae,ie.stubArray=oN,ie.stubFalse=cN,ie.stubObject=hae,ie.stubString=Aae,ie.stubTrue=fae,ie.multiply=Bae,ie.nth=Hne,ie.noConflict=sae,ie.noop=aN,ie.now=bb,ie.pad=Eie,ie.padEnd=_ie,ie.padStart=Iie,ie.parseInt=Pie,ie.random=wie,ie.reduce=Vre,ie.reduceRight=qre,ie.repeat=Tie,ie.replace=Fie,ie.result=uie,ie.round=Eae,ie.runInContext=je,ie.sample=Wre,ie.size=Xre,ie.snakeCase=Die,ie.some=Jre,ie.sortedIndex=Gne,ie.sortedIndexBy=Yne,ie.sortedIndexOf=Xne,ie.sortedLastIndex=Jne,ie.sortedLastIndexBy=Zne,ie.sortedLastIndexOf=ere,ie.startCase=Lie,ie.startsWith=Mie,ie.subtract=_ae,ie.sum=Iae,ie.sumBy=Pae,ie.template=Rie,ie.times=pae,ie.toFinite=vu,ie.toInteger=Fn,ie.toLength=$3,ie.toLower=Oie,ie.toNumber=Ac,ie.toSafeInteger=Ose,ie.toString=xr,ie.toUpper=Qie,ie.trim=Hie,ie.trimEnd=$ie,ie.trimStart=zie,ie.truncate=Vie,ie.unescape=qie,ie.uniqueId=gae,ie.upperCase=Kie,ie.upperFirst=nN,ie.each=E3,ie.eachRight=_3,ie.first=k3,iN(ie,function(){var p={};return Dr(ie,function(v,E){hr.call(ie.prototype,E)||(p[E]=v)}),p}(),{chain:!1}),ie.VERSION=r,Se(["bind","bindKey","curry","curryRight","partial","partialRight"],function(p){ie[p].placeholder=ie}),Se(["drop","take"],function(p,v){Mn.prototype[p]=function(E){E=E===n?1:Ms(Fn(E),0);var V=this.__filtered__&&!v?new Mn(this):this.clone();return V.__filtered__?V.__takeCount__=bi(E,V.__takeCount__):V.__views__.push({size:bi(E,X),type:p+(V.__dir__<0?"Right":"")}),V},Mn.prototype[p+"Right"]=function(E){return this.reverse()[p](E).reverse()}}),Se(["filter","map","takeWhile"],function(p,v){var E=v+1,V=E==D||E==U;Mn.prototype[p]=function(ee){var le=this.clone();return le.__iteratees__.push({iteratee:cn(ee,3),type:E}),le.__filtered__=le.__filtered__||V,le}}),Se(["head","last"],function(p,v){var E="take"+(v?"Right":"");Mn.prototype[p]=function(){return this[E](1).value()[0]}}),Se(["initial","tail"],function(p,v){var E="drop"+(v?"":"Right");Mn.prototype[p]=function(){return this.__filtered__?new Mn(this):this[E](1)}}),Mn.prototype.compact=function(){return this.filter(io)},Mn.prototype.find=function(p){return this.filter(p).head()},Mn.prototype.findLast=function(p){return this.reverse().find(p)},Mn.prototype.invokeMap=En(function(p,v){return typeof p=="function"?new Mn(this):this.map(function(E){return Yr(E,p,v)})}),Mn.prototype.reject=function(p){return this.filter(jb(cn(p)))},Mn.prototype.slice=function(p,v){p=Fn(p);var E=this;return E.__filtered__&&(p>0||v<0)?new Mn(E):(p<0?E=E.takeRight(-p):p&&(E=E.drop(p)),v!==n&&(v=Fn(v),E=v<0?E.dropRight(-v):E.take(v-p)),E)},Mn.prototype.takeRightWhile=function(p){return this.reverse().takeWhile(p).reverse()},Mn.prototype.toArray=function(){return this.take(X)},Dr(Mn.prototype,function(p,v){var E=/^(?:filter|find|map|reject)|While$/.test(v),V=/^(?:head|last)$/.test(v),ee=ie[V?"take"+(v=="last"?"Right":""):v],le=V||/^find/.test(v);ee&&(ie.prototype[v]=function(){var ve=this.__wrapped__,we=V?[1]:arguments,Be=ve instanceof Mn,Ye=we[0],Xe=Be||kn(ve),st=function($n){var er=ee.apply(ie,Un([$n],we));return V&&_t?er[0]:er};Xe&&E&&typeof Ye=="function"&&Ye.length!=1&&(Be=Xe=!1);var _t=this.__chain__,Jt=!!this.__actions__.length,un=le&&!_t,Ln=Be&&!Jt;if(!le&&Xe){ve=Ln?ve:new Mn(this);var hn=p.apply(ve,we);return hn.__actions__.push({func:xb,args:[st],thisArg:n}),new ka(hn,_t)}return un&&Ln?p.apply(this,we):(hn=this.thru(st),un?V?hn.value()[0]:hn.value():hn)})}),Se(["pop","push","shift","sort","splice","unshift"],function(p){var v=lu[p],E=/^(?:push|sort|unshift)$/.test(p)?"tap":"thru",V=/^(?:pop|shift)$/.test(p);ie.prototype[p]=function(){var ee=arguments;if(V&&!this.__chain__){var le=this.value();return v.apply(kn(le)?le:[],ee)}return this[E](function(ve){return v.apply(kn(ve)?ve:[],ee)})}}),Dr(Mn.prototype,function(p,v){var E=ie[v];if(E){var V=E.name+"";hr.call(Dh,V)||(Dh[V]=[]),Dh[V].push({name:v,func:E})}}),Dh[Ab(n,y).name]=[{name:"wrapper",func:n}],Mn.prototype.clone=tb,Mn.prototype.reverse=jS,Mn.prototype.value=jm,ie.prototype.at=Cre,ie.prototype.chain=jre,ie.prototype.commit=kre,ie.prototype.next=Sre,ie.prototype.plant=Bre,ie.prototype.reverse=Ere,ie.prototype.toJSON=ie.prototype.valueOf=ie.prototype.value=_re,ie.prototype.first=ie.prototype.head,td&&(ie.prototype[td]=Nre),ie},eo=ed();ic?((ic.exports=eo)._=eo,Rc._=eo):As._=eo}).call(Oi)})(Aj,Aj.exports);var yLe=Aj.exports;const xLe={stage:pG,framework:mG,tool:jX,prompt:NTe,project:BTe,context:ETe,"knowledge-document":_Te,"custom-prompt":EX,"ai-builder":TX},wLe=(e,t)=>{const n=t.find(s=>s.id===e.source),r=t.find(s=>s.id===e.target);return!n||!r?!1:n.type==="knowledge-document"?r.type==="tool"||r.type==="custom-prompt":r.type!=="knowledge-document"};function bLe({onSwitchToPromptTab:e}){var Rt;const{nodes:t,edges:n,setNodes:r,setEdges:s,addEdge:i,selectNode:o,selectedNode:c,updateNodePosition:l,updateNodeDimensions:d,saveWorkflowToStorage:u}=Us(),{currentProject:h}=js(),{user:A}=Dc(),{toast:f}=ii(),{collaborators:m,isConnected:g,updateCursor:b,updateSelection:y,myColor:j}=Y_e(h==null?void 0:h.id),[x,C]=w.useState({x:0,y:0,zoom:1}),[S,_]=w.useState(null),N=w.useRef(!1),[L,P]=w.useState([]),[F,I]=w.useState(!1);w.useState(!1);const[T,Q]=w.useState(1),[D,M]=w.useState(null),[U,H]=w.useState(!1);w.useState(!1);const $=w.useMemo(()=>({...xLe,tool:jX}),[]),R=w.useMemo(()=>t.map(Le=>({...Le,data:{...Le.data,...Le.type==="tool"?{onSwitchToPromptTab:e}:{}}})),[t,e]),[Y,X,q]=w_e(R),[K,J,W]=b_e(n),ne=w.useCallback(Le=>{var Ke;f({title:"Opening Node",description:`Double-clicked on ${((Ke=Le.data)==null?void 0:Ke.label)||Le.type}`}),o(Le)},[f,o]),ae=w.useCallback(()=>{f({title:"Add Sticky Note",description:"Sticky note feature coming soon!"})},[f]),ce=w.useCallback(Le=>{f({title:"Rename Node",description:"Rename feature coming soon!"})},[f]);gFe({reactFlowInstance:S,nodes:Y,edges:K,selectedNodes:L,onNodesChange:r,onEdgesChange:s,onNodeDoubleClick:ne,onAddStickyNote:ae,onRenameNode:ce,onDeleteNodes:Le=>{u()}});const{applyLayout:Ae}=vLe(S,Y,K,X,{enabled:!0,layoutOnMount:!1,layoutOnNodesChange:!1,debounceMs:300,layoutOptions:{direction:"LR",nodeSpacing:100,rankSpacing:250}});w.useEffect(()=>{if(N.current){N.current=!1;return}X(R)},[R,X]),w.useEffect(()=>{J(n)},[n,J]);const pe=w.useCallback(()=>{P([]),S&&S.getNodes().forEach(Le=>{S.updateNode(Le.id,{selected:!1})}),F||o(null)},[F,S,o]);w.useEffect(()=>{const Le=Ke=>{if(Ke.key==="Escape"&&F&&(I(!1),pe(),Ke.preventDefault()),Ke.key==="Delete"&&F&&L.length>0){const it=Y.filter(At=>!L.includes(At.id)),pt=K.filter(At=>!L.includes(At.source)&&!L.includes(At.target));r(it),s(pt),P([]),Ke.preventDefault()}(Ke.metaKey||Ke.ctrlKey)&&Ke.key==="a"&&S&&Y.length>0&&(Y.forEach(it=>{S.updateNode(it.id,{selected:!0})}),P(Y.map(it=>it.id)),Ke.preventDefault())};return document.addEventListener("keydown",Le),()=>document.removeEventListener("keydown",Le)},[F,L,Y,K,pe,r,s,S]);const be=w.useCallback(Le=>{if(!Le.source||!Le.target){console.warn("Cannot create edge: missing source or target",Le);return}if(!wLe(Le,Y)){console.log("Connection rejected - invalid node types:",Le);return}const Ke=`edge-${Le.source}-${Le.target}-${Date.now()}`,it=Y.find(vt=>vt.id===Le.source),pt=Y.find(vt=>vt.id===Le.target),At=(it==null?void 0:it.type)==="knowledge-document"&&(pt==null?void 0:pt.type)==="tool",rn={...Le,id:Ke,type:"default",animated:!0,style:At?{stroke:"#f59e0b",strokeWidth:2,strokeDasharray:"5,5"}:{stroke:"white",strokeWidth:2},label:At?"Knowledge":void 0,labelStyle:At?{fill:"#f59e0b",fontSize:10,fontWeight:"bold"}:void 0};console.log("Creating new edge:",{id:Ke,source:Le.source,target:Le.target,sourceHandle:Le.sourceHandle,targetHandle:Le.targetHandle}),J(vt=>KK(rn,vt)),i(rn)},[J,i,Y]),Ne=w.useCallback(Le=>{N.current=!0,q(Le),Le.forEach(Ke=>{Ke.type==="position"&&Ke.position&&Ke.id&&l(Ke.id,Ke.position),Ke.type==="dimensions"&&Ke.dimensions&&Ke.id&&d(Ke.id,Ke.dimensions)})},[q,l,d]),Pe=w.useCallback(Le=>{W(Le),u()},[W,u]),xe=w.useCallback((Le,Ke)=>{F||o(Ke)},[o,F]),ue=w.useCallback(({nodes:Le})=>{const Ke=Le.map(it=>it.id);P(Ke),y(Ke),Le.length===1?o(Le[0]):Le.length===0&&o(null)},[o,y]),yt=w.useCallback(Le=>{Q(Le.zoom),C({x:Le.x,y:Le.y,zoom:Le.zoom})},[]),ht=w.useMemo(()=>yLe.throttle(Le=>{if(!S)return;const Ke=Le.currentTarget.getBoundingClientRect(),it=Le.clientX-Ke.left,pt=Le.clientY-Ke.top,At=(it-x.x)/x.zoom,rn=(pt-x.y)/x.zoom;b(At,rn)},50),[S,x,b]),Ct=w.useCallback(Le=>{_(Le)},[]),Me=w.useCallback(()=>{S==null||S.zoomIn()},[S]),kt=w.useCallback(()=>{S==null||S.zoomOut()},[S]),ct=w.useCallback(()=>{S==null||S.fitView()},[S]),Nt=w.useCallback(()=>{const Le=!F;I(Le),M(null),H(!1),P([]),S&&S.getNodes().forEach(Ke=>{S.updateNode(Ke.id,{selected:!1})}),Le||o(null)},[F,S,o]),bt=w.useCallback(Le=>{if(F&&Le.button===0&&!Le.target.closest(".react-flow__node")){const pt=Le.currentTarget.getBoundingClientRect(),At=Le.clientX-pt.left,rn=Le.clientY-pt.top;M({startX:At,startY:rn,currentX:At,currentY:rn}),H(!0),Le.preventDefault(),Le.stopPropagation()}},[F]),An=w.useCallback(Le=>{if(U&&D&&F){const Ke=Le.currentTarget.getBoundingClientRect(),it=Le.clientX-Ke.left,pt=Le.clientY-Ke.top;M({...D,currentX:it,currentY:pt})}},[U,D,F]),$t=w.useCallback(Le=>{if(U&&D&&F&&S){const{startX:Ke,startY:it,currentX:pt,currentY:At}=D,rn=Math.min(Ke,pt),vt=Math.min(it,At),Bt=Math.max(Ke,pt),Xt=Math.max(it,At),bn=S.screenToFlowPosition({x:rn,y:vt}),Qt=S.screenToFlowPosition({x:Bt,y:Xt}),on=Y.filter(It=>{var nr,Re;const Ut=It.position.x,Wn=It.position.y,Nn=((nr=It.measured)==null?void 0:nr.width)||It.width||280,en=((Re=It.measured)==null?void 0:Re.height)||It.height||200,wt=Ut,Gn=Wn,Bn=Ut+Nn,ir=Wn+en,rs=bn.x,St=bn.y,pr=Qt.x,Vr=Qt.y;return!(Bn<rs||wt>pr||ir<St||Gn>Vr)}).map(It=>It.id);P(on),S&&on.length>0&&S.getNodes().forEach(It=>{S.updateNode(It.id,{selected:on.includes(It.id)})}),H(!1),M(null)}},[U,D,F,Y,S,X]);return a.jsxs(ot.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"h-full w-full relative",style:{backgroundColor:"#333446"},children:[D&&U&&a.jsx("div",{className:"absolute pointer-events-none border-2 border-primary bg-primary/20 z-20",style:{left:Math.min(D.startX,D.currentX),top:Math.min(D.startY,D.currentY),width:Math.abs(D.currentX-D.startX),height:Math.abs(D.currentY-D.startY)}}),a.jsxs("div",{className:`h-full w-full ${F?"cursor-crosshair":""}`,onMouseMove:ht,...F?{onMouseDown:bt,onMouseMove:Le=>{An(Le),ht(Le)},onMouseUp:$t}:{},children:[a.jsx(fFe,{collaborators:m,isConnected:g,myColor:j,currentUserName:((Rt=A==null?void 0:A.email)==null?void 0:Rt.split("@")[0])||"You"}),a.jsx(pFe,{collaborators:m,viewport:x}),a.jsx("div",{className:"absolute inset-0 pointer-events-none z-10",children:a.jsx(mFe,{collaborators:m,nodes:Y})}),a.jsx(x_e,{nodes:Y,edges:K,onNodesChange:Ne,onEdgesChange:Pe,onConnect:be,onNodeClick:xe,onNodeDoubleClick:(Le,Ke)=>ne(Ke),onPaneClick:()=>{F?pe():o(null)},onSelectionChange:ue,onViewportChange:yt,onInit:Ct,nodeTypes:$,connectionMode:Jp.Loose,selectionMode:F?Zp.Full:Zp.Partial,multiSelectionKeyCode:["Meta","Control","Shift"],panActivationKeyCode:["Space","Control"],panOnDrag:[1,2],panOnScroll:!1,zoomOnScroll:!1,zoomOnDoubleClick:!1,zoomOnPinch:!0,nodeOrigin:[0,0],nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,selectNodesOnDrag:!0,selectionOnDrag:F,minZoom:.1,maxZoom:4,fitView:!0,style:{backgroundColor:"#333446"},colorMode:"system",defaultEdgeOptions:{type:"default",animated:!0,style:{stroke:"white",strokeWidth:2}},children:a.jsx(N_e,{color:"rgba(255, 255, 255, 0.3)",gap:20,size:2,variant:$u.Dots})})]}),a.jsxs("div",{className:"fixed bottom-4 right-4 bg-card border border-border rounded-md px-3 py-2 shadow-lg text-sm font-medium z-20",children:[Math.round(T*100),"%"]}),F&&a.jsxs("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 bg-primary text-primary-foreground px-4 py-2 rounded-md shadow-lg text-sm font-medium z-20",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(b7,{className:"h-4 w-4"}),"Drag Selection Mode",L.length>0&&a.jsxs("span",{className:"bg-primary-foreground text-primary px-2 py-0.5 rounded text-xs",children:[L.length," selected"]})]}),a.jsxs("div",{className:"text-xs opacity-90",children:["Drag to select  Cmd/Ctrl+Click multi-select  Cmd/Ctrl+A select all  ESC to exit",L.length>0&&"  DEL to delete"]})]}),a.jsx(eFe,{onClearSelection:pe,isMarqueeMode:F,onToggleMarqueeMode:Nt,zoom:T,onZoomIn:Me,onZoomOut:kt,onFitView:ct,onApplyLayout:Ae,selectedNode:c})]})}function CLe({onPromptView:e}){const{prompts:t,currentPrompt:n,setCurrentPrompt:r,executePrompt:s,isGenerating:i}=ma(),{nodes:o}=Us(),l=o.filter(A=>A.type==="prompt").length>0,d=A=>{navigator.clipboard.writeText(A.content),Ue.success("Prompt copied to clipboard")},u=async A=>{try{await s(A),Ue.success("Prompt executed successfully!")}catch{Ue.error("Failed to execute prompt")}},h=A=>{r(A),e==null||e()};return!l&&t.length===0?a.jsx("div",{className:"h-full flex items-center justify-center",children:a.jsxs("div",{className:"text-center p-8",children:[a.jsx(gr,{className:"w-8 h-8 text-muted-foreground mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"No prompt nodes in canvas"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Generate a prompt to see it here"})]})}):a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsx("div",{className:"p-3 border-b border-border",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(gr,{className:"w-4 h-4 text-primary"}),a.jsxs("h3",{className:"font-medium text-sm",children:["Generated Prompts (",t.length,")"]})]})}),a.jsx("div",{className:"flex-1 overflow-hidden",children:a.jsxs(ns,{className:"h-full w-full",style:{"--scrollbar-size":"8px"},children:[a.jsx("div",{className:"space-y-3 p-3",children:t.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(In,{className:"w-8 h-8 text-muted-foreground mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"No prompts generated yet"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'Use the "Generate Prompt" button on tool nodes'})]}):t.map(A=>a.jsx(ot.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},children:a.jsxs(De,{className:`p-3 cursor-pointer transition-all hover:shadow-sm hover:border-primary/50 ${(n==null?void 0:n.id)===A.id?"border-primary bg-primary/5":""}`,onClick:()=>h(A),children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium text-sm truncate",children:A.context.tool.name}),a.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[a.jsx(_e,{variant:"outline",className:"text-xs",children:A.context.framework.name}),a.jsx(_r,{className:"w-2 h-2 text-muted-foreground"}),a.jsx(_e,{variant:"outline",className:"text-xs",children:A.context.stage.name})]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[A.output&&a.jsx(br,{className:"w-3 h-3 text-success"}),a.jsx(Jo,{className:"w-3 h-3 text-muted-foreground"})]})]}),a.jsxs("div",{className:"bg-muted/30 p-2 rounded text-xs mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(In,{className:"w-3 h-3 text-muted-foreground"}),a.jsx("span",{className:"text-muted-foreground font-medium",children:"Prompt Content"})]}),a.jsx("div",{className:"max-h-20 overflow-y-auto",children:a.jsx("pre",{className:"text-xs text-muted-foreground whitespace-pre-wrap font-mono leading-relaxed",children:q0(A.content.length>200?`${A.content.substring(0,200)}...`:A.content)})}),A.content.length>200&&a.jsxs("p",{className:"text-xs text-muted-foreground italic mt-1",children:["+",A.content.length-200," more characters"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(A.timestamp).toLocaleDateString()}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(fe,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",title:"Copy prompt to clipboard",onClick:f=>{f.stopPropagation(),d(A)},children:a.jsx(Ii,{className:"w-3 h-3"})}),a.jsx(fe,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",title:"Execute prompt with AI",disabled:i,onClick:f=>{f.stopPropagation(),u(A.id)},children:a.jsx(Kd,{className:"w-3 h-3"})})]})]})]})},A.id))}),a.jsx($k,{orientation:"vertical",className:"w-3 border-l border-l-transparent p-[2px]"})]})})]})}function FO({children:e}){const[t,n]=w.useState(!1),[r,s]=w.useState(""),[i,o]=w.useState(""),{createProject:c,isLoading:l}=js(),{toast:d}=ii(),u=async h=>{if(h.preventDefault(),!r.trim()){d({title:"Validation Error",description:"Project name is required",variant:"destructive"});return}try{await c(r.trim(),i.trim()||void 0),d({title:"Project Created",description:`"${r}" has been created successfully`}),n(!1),s(""),o("")}catch{d({title:"Error",description:"Failed to create project",variant:"destructive"})}};return a.jsxs(zd,{open:t,onOpenChange:n,children:[a.jsx(GT,{asChild:!0,children:e||a.jsxs(fe,{children:[a.jsx(ha,{className:"w-4 h-4 mr-2"}),"New Project"]})}),a.jsxs(_l,{className:"sm:max-w-md","aria-describedby":"project-dialog-description",children:[a.jsx(Il,{children:a.jsx(Pl,{children:"Create New Project"})}),a.jsx("p",{id:"project-dialog-description",className:"sr-only",children:"Fill out the form below to create a new UX workflow project"}),a.jsxs("form",{onSubmit:u,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{htmlFor:"name",children:"Project Name *"}),a.jsx(ln,{id:"name",value:r,onChange:h=>s(h.target.value),placeholder:"Enter project name...",required:!0,disabled:l})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{htmlFor:"description",children:"Description (Optional)"}),a.jsx(Qr,{id:"description",value:i,onChange:h=>o(h.target.value),placeholder:"Brief project description...",rows:3,disabled:l})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx(fe,{type:"button",variant:"outline",onClick:()=>n(!1),disabled:l,children:"Cancel"}),a.jsxs(fe,{type:"submit",disabled:l,children:[l&&a.jsx(Cr,{className:"w-4 h-4 mr-2 animate-spin"}),"Create Project"]})]})]})]})]})}const NJ=cf((e,t)=>({shares:[],members:[],isLoading:!1,error:null,shareProject:async(n,r,s,i)=>{e({isLoading:!0,error:null});try{const o=await rt.functions.invoke("send-project-invitation",{body:{projectId:n,projectName:i||"Untitled Project",invitedEmail:r,role:s,inviterName:"",inviterEmail:""}});if(o.error)throw new Error(o.error.message||"Failed to send invitation");await t().fetchProjectShares(n),console.log(`Successfully sent invitation for project ${n} to ${r} as ${s}`)}catch(o){throw e({error:o instanceof Error?o.message:"Failed to share project",isLoading:!1}),o}},updateShareRole:async(n,r)=>{e({isLoading:!0,error:null});try{const{error:s}=await rt.from("project_invitations").update({role:r}).eq("id",n);if(s)throw s;e(i=>({shares:i.shares.map(o=>o.id===n?{...o,role:r,updated_at:new Date().toISOString()}:o),isLoading:!1}))}catch(s){throw e({error:s instanceof Error?s.message:"Failed to update role",isLoading:!1}),s}},removeShare:async n=>{e({isLoading:!0,error:null});try{const{error:r}=await rt.from("project_invitations").delete().eq("id",n);if(r)throw r;e(s=>({shares:s.shares.filter(i=>i.id!==n),isLoading:!1}))}catch(r){throw e({error:r instanceof Error?r.message:"Failed to remove share",isLoading:!1}),r}},fetchProjectShares:async n=>{var r;e({isLoading:!0,error:null});try{const{data:s,error:i}=await rt.from("project_invitations").select("*").eq("project_id",n);if(i){if(i.code==="PGRST205"&&((r=i.message)!=null&&r.includes("project_invitations"))){console.warn("Project invitations table not configured yet. Project sharing features are disabled."),e({shares:[],isLoading:!1});return}throw i}const o=(s||[]).map(c=>({id:c.id,project_id:c.project_id,shared_with_email:c.invited_email,role:c.role,status:c.status,shared_by:c.invited_by,shared_at:c.created_at,updated_at:c.updated_at,invitation_token:c.invitation_token,expires_at:c.expires_at}));e({shares:o,isLoading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to fetch shares",isLoading:!1})}},fetchProjectMembers:async n=>{var r;try{const{data:s,error:i}=await rt.rpc("get_project_members_with_users",{project_uuid:n});if(i){if(i.code==="PGRST0"||(r=i.message)!=null&&r.includes("function")){console.warn("Project members RPC function not configured yet. Project sharing features are disabled."),e(c=>({...c,members:[]}));return}throw i}const o=(s||[]).map(c=>({id:c.id,project_id:c.project_id,user_id:c.user_id,role:c.role,joined_at:c.joined_at,added_by:c.added_by,user:{email:c.user_email||"",full_name:""}}));e(c=>({...c,members:o}))}catch(s){console.error("Error fetching project members:",s)}},acceptShare:async n=>{e({isLoading:!0,error:null});try{e(r=>({shares:r.shares.map(s=>s.id===n?{...s,status:"accepted",updated_at:new Date().toISOString()}:s),isLoading:!1}))}catch(r){throw e({error:r instanceof Error?r.message:"Failed to accept share",isLoading:!1}),r}},declineShare:async n=>{e({isLoading:!0,error:null});try{e(r=>({shares:r.shares.map(s=>s.id===n?{...s,status:"declined",updated_at:new Date().toISOString()}:s),isLoading:!1}))}catch(r){throw e({error:r instanceof Error?r.message:"Failed to decline share",isLoading:!1}),r}},fetchAllUserShares:async()=>{var n;e({isLoading:!0,error:null});try{const{data:{user:r}}=await rt.auth.getUser();if(!r)throw new Error("User not authenticated");const{data:s,error:i}=await rt.from("project_invitations").select(`
          *,
          projects (
            name
          )
        `).eq("invited_by",r.id);if(i){if(i.code==="PGRST205"&&((n=i.message)!=null&&n.includes("project_invitations"))){console.warn("Project invitations table not configured yet. Project sharing features are disabled."),e({shares:[],isLoading:!1});return}throw i}const o=(s||[]).map(c=>({id:c.id,project_id:c.project_id,shared_with_email:c.invited_email,role:c.role,status:c.status,shared_by:c.invited_by,shared_at:c.created_at,updated_at:c.updated_at,invitation_token:c.invitation_token,expires_at:c.expires_at}));e({shares:o,isLoading:!1})}catch(r){throw e({error:r instanceof Error?r.message:"Failed to fetch shares",isLoading:!1}),r}}}));function jLe({isOpen:e,onClose:t,projectId:n,projectName:r,isOwner:s=!0}){const[i,o]=w.useState(""),[c,l]=w.useState("viewer"),{shares:d,members:u,isLoading:h,shareProject:A,updateShareRole:f,removeShare:m,fetchProjectShares:g,fetchProjectMembers:b}=NJ();w.useEffect(()=>{e&&n&&(g(n),b(n))},[e,n,g,b]);const y=async()=>{if(!i.trim()){Ue.error("Please enter an email address");return}if(!i.includes("@")){Ue.error("Please enter a valid email address");return}if(d.some(C=>C.shared_with_email.toLowerCase()===i.toLowerCase())){Ue.error("Project is already shared with this email");return}try{await A(n,i.trim(),c,r),o(""),l("viewer"),Ue.success(`Project shared with ${i} as ${c}. Invitation email sent!`)}catch{Ue.error("Failed to share project")}},j=async C=>{try{await m(C),Ue.success("Access removed successfully")}catch{Ue.error("Failed to remove access")}},x=async(C,S)=>{try{await f(C,S),Ue.success("Role updated successfully")}catch{Ue.error("Failed to update role")}};return a.jsx(zd,{open:e,onOpenChange:t,children:a.jsxs(_l,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[a.jsxs(Il,{children:[a.jsxs(Pl,{className:"flex items-center gap-2",children:[a.jsx(qa,{className:"w-5 h-5"}),"Share Project"]}),a.jsxs(Vd,{children:['Share "',r,'" with others to collaborate']})]}),a.jsxs("div",{className:"space-y-6",children:[s&&a.jsx(De,{className:"p-4",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Rv,{className:"w-4 h-4 text-primary"}),a.jsx("span",{className:"font-medium text-sm",children:"Share with someone"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(at,{htmlFor:"email",children:"Email address"}),a.jsx(ln,{id:"email",type:"email",placeholder:"Enter email address",value:i,onChange:C=>o(C.target.value),className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx(at,{htmlFor:"role",children:"Access level"}),a.jsxs(Vn,{value:c,onValueChange:C=>l(C),children:[a.jsx(Qn,{className:"mt-1",children:a.jsx(qn,{placeholder:"Select role"})}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"viewer",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zr,{className:"w-3 h-3"}),"Viewer"]})}),a.jsx(qe,{value:"editor",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Sd,{className:"w-3 h-3"}),"Editor"]})})]})]})]})]}),a.jsx(fe,{onClick:y,disabled:h,className:"w-full",children:h?"Sharing...":"Share Project"})]})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"font-medium text-sm",children:"People with access"}),a.jsxs(_e,{variant:"secondary",children:[u.length+d.length," total"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(De,{className:"p-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:a.jsx(qp,{className:"w-4 h-4 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-sm",children:"You (Owner)"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Full access to project"})]})]}),a.jsx(_e,{variant:"default",children:"Admin"})]})}),u.filter(C=>C.role!=="owner").map(C=>{var S,_;return a.jsx(De,{className:"p-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:C.role==="editor"?a.jsx(Sd,{className:"w-4 h-4 text-green-600"}):a.jsx(zr,{className:"w-4 h-4 text-green-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-sm",children:((S=C.user)==null?void 0:S.full_name)||((_=C.user)==null?void 0:_.email)}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Joined ",new Date(C.joined_at).toLocaleDateString(),"  Active"]})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(_e,{variant:C.role==="editor"?"default":"secondary",children:C.role})})]})},`member-${C.id}`)}),d.map(C=>a.jsx(De,{className:"p-3 border-dashed",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-100 flex items-center justify-center",children:C.role==="editor"?a.jsx(Sd,{className:"w-4 h-4 text-orange-600"}):a.jsx(zr,{className:"w-4 h-4 text-orange-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-sm",children:C.shared_with_email}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Invited ",new Date(C.shared_at).toLocaleDateString(),"  ",C.status,C.expires_at&&a.jsxs(a.Fragment,{children:["  Expires ",new Date(C.expires_at).toLocaleDateString()]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[s&&C.status==="pending"&&a.jsxs(Vn,{value:C.role,onValueChange:S=>x(C.id,S),children:[a.jsx(Qn,{className:"w-24 h-8",children:a.jsx(qn,{})}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"viewer",children:"Viewer"}),a.jsx(qe,{value:"editor",children:"Editor"})]})]}),(!s||C.status!=="pending")&&a.jsx(_e,{variant:C.role==="editor"?"default":"secondary",children:C.role}),s&&a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>j(C.id),className:"w-8 h-8 p-0 text-destructive hover:text-destructive",children:a.jsx(Pc,{className:"w-3 h-3"})})]})]})},`invitation-${C.id}`))]})]}),a.jsxs(De,{className:"p-4 bg-muted/50",children:[a.jsx("h4",{className:"font-medium text-sm mb-2",children:"Access Levels"}),a.jsxs("div",{className:"space-y-2 text-xs text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zr,{className:"w-3 h-3"}),a.jsxs("span",{children:[a.jsx("strong",{children:"Viewer:"})," Can view project content, workflows, and prompts"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Sd,{className:"w-3 h-3"}),a.jsxs("span",{children:[a.jsx("strong",{children:"Editor:"})," Can edit workflows, create prompts, and modify project content"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(qp,{className:"w-3 h-3"}),a.jsxs("span",{children:[a.jsx("strong",{children:"Admin:"})," Full access including sharing, deleting, and managing members"]})]})]})]})]}),a.jsx(YT,{children:a.jsx(fe,{variant:"outline",onClick:t,children:"Close"})})]})})}function kLe(){const[e,t]=w.useState([]),[n,r]=w.useState(!0),[s,i]=w.useState(new Set),{toast:o}=ii(),c=async()=>{try{r(!0);const{data:{user:u}}=await rt.auth.getUser();if(console.log(" Fetching invitations for user:",u==null?void 0:u.email),!(u!=null&&u.email)){console.log(" No user email found"),t([]);return}const{data:h,error:A}=await rt.from("project_invitations").select(`
          id,
          project_id,
          invited_email,
          invited_by,
          role,
          invitation_token,
          created_at,
          expires_at,
          projects:project_id (
            id,
            name,
            description
          )
        `).eq("invited_email",u.email).eq("status","pending").order("created_at",{ascending:!1});if(A)throw console.error(" Error fetching invitations:",A),console.error("Error details:",JSON.stringify(A,null,2)),A;console.log(" Fetched invitations:",h),console.log("Number of invitations:",(h==null?void 0:h.length)||0),t(h||[])}catch(u){console.error(" Error fetching pending invitations:",u),o({title:"Error",description:"Failed to fetch pending invitations",variant:"destructive"})}finally{r(!1)}};w.useEffect(()=>{c()},[]);const l=async u=>{i(h=>new Set([...h,u.id]));try{const{data:{user:h}}=await rt.auth.getUser();if(!h)throw new Error("User not authenticated");const{data:A,error:f}=await rt.functions.invoke("accept-project-invitation",{body:{token:u.invitation_token}});if(f)throw f;o({title:"Invitation Accepted",description:`You now have access to "${u.projects.name}"`}),await c(),window.location.reload()}catch(h){console.error("Error accepting invitation:",h),o({title:"Error",description:h instanceof Error?h.message:"Failed to accept invitation",variant:"destructive"})}finally{i(h=>{const A=new Set(h);return A.delete(u.id),A})}},d=async u=>{console.log(" Declining invitation:",u.id),i(h=>new Set([...h,u.id]));try{console.log(" Updating invitation status to declined...");const{data:h,error:A}=await rt.from("project_invitations").update({status:"declined"}).eq("id",u.id).select();if(A)throw console.error(" Error updating invitation:",A),A;console.log(" Invitation updated:",h),o({title:"Invitation Declined",description:`You declined the invitation to "${u.projects.name}"`}),console.log(" Refreshing invitations list..."),await c(),console.log(" Invitations refreshed")}catch(h){console.error(" Error declining invitation:",h),o({title:"Error",description:"Failed to decline invitation",variant:"destructive"})}finally{i(h=>{const A=new Set(h);return A.delete(u.id),A})}};return n?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(Cr,{className:"w-6 h-6 animate-spin text-muted-foreground"})}):e.length===0?null:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Rv,{className:"w-5 h-5 text-blue-600"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Pending Invitations"}),a.jsx(_e,{variant:"secondary",children:e.length})]}),a.jsx("div",{className:"space-y-3",children:e.filter(u=>u.projects!==null).map((u,h)=>{var m;const A=s.has(u.id),f=new Date(u.expires_at)<new Date;return a.jsx(ot.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:h*.05},children:a.jsx(De,{className:`p-4 ${f?"opacity-60":""}`,children:a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[a.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-100 rounded-lg flex-shrink-0",children:a.jsx(ZP,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:((m=u.projects)==null?void 0:m.name)||"Unknown Project"}),a.jsx(_e,{variant:u.role==="editor"?"default":"secondary",children:u.role}),f&&a.jsx(_e,{variant:"destructive",children:"Expired"})]}),u.projects.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1 mb-2",children:u.projects.description}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Jo,{className:"w-3 h-3"}),kA(new Date(u.created_at),{addSuffix:!0})]}),!f&&a.jsxs("span",{className:"text-xs",children:["Expires ",kA(new Date(u.expires_at),{addSuffix:!0})]})]})]})]}),!f&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(fe,{size:"sm",onClick:()=>l(u),disabled:A,className:"bg-green-600 hover:bg-green-700",children:A?a.jsx(Cr,{className:"w-4 h-4 animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(YA,{className:"w-4 h-4 mr-2"}),"Accept"]})}),a.jsx(fe,{size:"sm",variant:"outline",onClick:()=>d(u),disabled:A,className:"border-red-200 text-red-600 hover:bg-red-50",children:A?a.jsx(Cr,{className:"w-4 h-4 animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(_i,{className:"w-4 h-4 mr-2"}),"Decline"]})})]})]})})},u.id)})})]})}const E1=e=>{var n,r,s;if(!((n=e.canvas_data)!=null&&n.nodes))return null;const t=e.canvas_data.nodes.find(i=>{var o;return i.type==="framework"&&((o=i.data)==null?void 0:o.framework)});return((s=(r=t==null?void 0:t.data)==null?void 0:r.framework)==null?void 0:s.name)||null},SLe=async e=>{try{const{count:t}=await rt.from("prompts").select("*",{count:"exact",head:!0}).eq("project_id",e);return t||0}catch(t){return console.error("Error fetching prompts count:",t),0}};function BJ(){const{projects:e,currentProject:t,isLoading:n,error:r,fetchProjects:s,setCurrentProject:i,deleteProject:o}=js();ma();const{toast:c}=ii(),l=Vi(),[d,u]=w.useState(!1),[h,A]=w.useState(null),[f,m]=w.useState({});w.useEffect(()=>{s()},[]),w.useEffect(()=>{(async()=>{if(e.length===0)return;const _={};await Promise.all(e.map(async N=>{_[N.id]=await SLe(N.id)})),m(_)})()},[e]);const g=async S=>{await i(S),l("/workflow"),c({title:"Project Opened",description:`Now working on "${S.name}"`})},b=async(S,_)=>{if(confirm(`Are you sure you want to delete "${_}"? This action cannot be undone.`))try{await o(S),c({title:"Project Deleted",description:`"${_}" has been deleted`})}catch{c({title:"Error",description:"Failed to delete project",variant:"destructive"})}},y=S=>{l(`/knowledge/${S.id}`)},j=S=>{A(S),u(!0)},x=S=>{l(`/project/${S.id}/settings`)},C=()=>{u(!1),A(null)};return n&&e.length===0?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(Cr,{className:"w-8 h-8 animate-spin text-muted-foreground"})}):r?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("p",{className:"text-destructive text-sm mb-4",children:r}),a.jsx(fe,{onClick:s,variant:"outline",children:"Try Again"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Your Projects"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your UX workflow projects and canvases"})]}),a.jsx(FO,{})]}),a.jsx(kLe,{}),t&&a.jsxs(ot.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-2",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Current Project"}),a.jsx(De,{className:"p-4 border-primary bg-primary/5 cursor-pointer hover:bg-primary/10 transition-colors",onClick:()=>g(t),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-1 flex-1",children:[a.jsx("h4",{className:"font-semibold",children:t.name}),t.description&&a.jsx("p",{className:"text-sm text-muted-foreground",children:t.description}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Yu,{className:"w-3 h-3"}),f[t.id]||0," prompts"]}),E1(t)&&a.jsxs(_e,{variant:"secondary",className:"text-xs py-0 px-2",children:[a.jsx(Mr,{className:"w-3 h-3 mr-1"}),E1(t)]}),t.last_opened?a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(kd,{className:"w-3 h-3"}),"Last opened ",kA(new Date(t.last_opened),{addSuffix:!0})]}):a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(kd,{className:"w-3 h-3"}),"Updated ",kA(new Date(t.updated_at),{addSuffix:!0})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(fe,{size:"sm",onClick:S=>{S.stopPropagation(),g(t)},className:"h-8 px-3",children:[a.jsx(yl,{className:"w-3 h-3 mr-1"}),"Open Project"]}),a.jsxs(xv,{children:[a.jsx(wv,{asChild:!0,children:a.jsx(fe,{size:"sm",variant:"outline",onClick:S=>S.stopPropagation(),className:"h-8 w-8 p-0",children:a.jsx(yx,{className:"w-3 h-3"})})}),a.jsxs(Wp,{align:"end",children:[a.jsxs(Or,{onClick:S=>{S.stopPropagation(),y(t)},children:[a.jsx(xo,{className:"w-4 h-4 mr-2"}),"Knowledge"]}),a.jsxs(Or,{onClick:S=>{S.stopPropagation(),j(t)},children:[a.jsx(D5,{className:"w-4 h-4 mr-2"}),"Share"]}),a.jsxs(Or,{onClick:S=>{S.stopPropagation(),x(t)},children:[a.jsx(us,{className:"w-4 h-4 mr-2"}),"Settings"]}),a.jsxs(Or,{onClick:S=>{S.stopPropagation(),b(t.id,t.name)},className:"text-destructive hover:text-destructive",children:[a.jsx(Pc,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]}),a.jsx(_e,{variant:"default",children:"Active"})]})]})})]}),e.length===0?a.jsxs(ot.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12 space-y-4",children:[a.jsx(yl,{className:"w-16 h-16 text-muted-foreground mx-auto"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Projects Yet"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first project to start building UX workflows"}),a.jsx(FO,{children:a.jsxs(fe,{children:[a.jsx(ha,{className:"w-4 h-4 mr-2"}),"Create Your First Project"]})})]})]}):a.jsx("div",{className:"space-y-2",children:e.map((S,_)=>a.jsx(ot.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:_*.05},children:a.jsxs("div",{className:`
                  flex items-center justify-between p-4 bg-white border rounded-lg hover:shadow-md transition-all duration-200 cursor-pointer
                  ${(t==null?void 0:t.id)===S.id?"ring-2 ring-primary bg-blue-50":"hover:bg-gray-50"}
                `,onClick:()=>{(t==null?void 0:t.id)!==S.id&&g(S)},children:[a.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[a.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-blue-100 rounded-lg flex-shrink-0",children:a.jsx(yl,{className:"w-5 h-5 text-blue-600"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h4",{className:"font-semibold text-gray-900 truncate",children:S.name}),(t==null?void 0:t.id)===S.id&&a.jsx(_e,{variant:"default",className:"text-xs",children:"Active"})]}),S.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1 mb-2",children:S.description}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Yu,{className:"w-3 h-3"}),f[S.id]||0," prompts"]}),E1(S)&&a.jsxs(_e,{variant:"secondary",className:"text-xs py-0 px-2",children:[a.jsx(Mr,{className:"w-3 h-3 mr-1"}),E1(S)]}),S.last_opened?a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(kd,{className:"w-3 h-3"}),"Last opened ",kA(new Date(S.last_opened),{addSuffix:!0})]}):a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(kd,{className:"w-3 h-3"}),"Updated ",kA(new Date(S.updated_at),{addSuffix:!0})]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[a.jsxs(fe,{size:"sm",onClick:N=>{N.stopPropagation(),g(S)},disabled:(t==null?void 0:t.id)===S.id,className:"px-4",children:[a.jsx(yl,{className:"w-4 h-4 mr-2"}),(t==null?void 0:t.id)===S.id?"Current":"Open"]}),a.jsxs(xv,{children:[a.jsx(wv,{asChild:!0,children:a.jsx(fe,{size:"sm",variant:"outline",onClick:N=>N.stopPropagation(),className:"w-10 h-10 p-0",children:a.jsx(yx,{className:"w-4 h-4"})})}),a.jsxs(Wp,{align:"end",children:[a.jsxs(Or,{onClick:N=>{N.stopPropagation(),y(S)},children:[a.jsx(xo,{className:"w-4 h-4 mr-2"}),"Knowledge"]}),a.jsxs(Or,{onClick:N=>{N.stopPropagation(),j(S)},children:[a.jsx(D5,{className:"w-4 h-4 mr-2"}),"Share"]}),a.jsxs(Or,{onClick:N=>{N.stopPropagation(),x(S)},children:[a.jsx(us,{className:"w-4 h-4 mr-2"}),"Settings"]}),a.jsxs(Or,{onClick:N=>{N.stopPropagation(),b(S.id,S.name)},className:"text-destructive hover:text-destructive",children:[a.jsx(Pc,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]})]})},S.id))}),h&&a.jsx(jLe,{isOpen:d,onClose:C,projectId:h.id,projectName:h.name,isOwner:!0})]})}function NLe({projectId:e,onRemoteUpdate:t,enabled:n=!0}){const{user:r}=Dc(),s=w.useRef(null),i=w.useRef(null),o=w.useRef(!1),c=w.useCallback(l=>{o.current=!0,i.current=l,setTimeout(()=>{o.current=!1},1e3)},[]);return w.useEffect(()=>{if(!e||!r||!n)return;console.log(" Setting up canvas sync for project:",e);const l=rt.channel(`canvas-sync:${e}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"projects",filter:`id=eq.${e}`},d=>{if(console.log(" Received canvas update:",d),o.current){console.log("  Skipping own update");return}const u=d.new,h=u.canvas_data;if(!h){console.log("  No canvas data in update");return}const A=JSON.stringify({nodes:h.nodes,edges:h.edges});if(A===i.current){console.log("  Skipping duplicate update");return}i.current=A;const f=u.last_modified_by;if(f===r.id){console.log("  Skipping update made by current user");return}console.log(" Applying remote canvas update from user:",f),t({nodes:h.nodes||[],edges:h.edges||[],toolToPromptIdMapping:h.toolToPromptIdMapping||{}})}).subscribe(d=>{console.log(" Canvas sync channel status:",d)});return s.current=l,()=>{console.log(" Disconnecting canvas sync"),l.unsubscribe(),s.current=null}},[e,r,n,t]),{markLocalUpdate:c}}function BLe({onClose:e}){const t=Vi(),{currentProject:n}=js(),{entries:r,fetchEntries:s,isLoading:i}=pa();w.useEffect(()=>{n!=null&&n.id&&s(n.id)},[n==null?void 0:n.id,s]);const o=()=>{n&&t(`/knowledge/${n.id}`)},c=l=>{switch(l){case"image":return a.jsx(XP,{className:"w-4 h-4 text-purple-600"});case"document":return a.jsx(In,{className:"w-4 h-4 text-blue-600"});default:return a.jsx(In,{className:"w-4 h-4 text-blue-600"})}};return n?a.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[a.jsxs("div",{className:"p-4 bg-white border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(xo,{className:"w-5 h-5 text-blue-600"}),a.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Knowledge Base"}),a.jsx(_e,{variant:"secondary",className:"bg-blue-100 text-blue-700",children:r.length})]}),e&&a.jsx(fe,{variant:"ghost",size:"sm",onClick:e,className:"w-8 h-8 p-0",children:a.jsx(_i,{className:"w-4 h-4"})})]}),a.jsxs(fe,{onClick:o,className:"w-full bg-blue-600 hover:bg-blue-700",size:"sm",children:[a.jsx(xo,{className:"w-4 h-4 mr-2"}),"Create Knowledge Base"]})]}),a.jsx("div",{className:"flex-1 overflow-hidden",children:i&&r.length===0?a.jsx("div",{className:"flex items-center justify-center h-full p-6",children:a.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading documents..."})}):r.length===0?a.jsx("div",{className:"flex items-center justify-center h-full p-6",children:a.jsxs("div",{className:"text-center max-w-sm",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3",children:a.jsx(xo,{className:"w-6 h-6 text-gray-400"})}),a.jsx("p",{className:"text-sm text-gray-600",children:"Set up a knowledge base for your project to store documents, context, and information that can be used throughout your workflow."})]})}):a.jsx(ns,{className:"h-full",children:a.jsx("div",{className:"p-4 space-y-2",children:r.map(l=>a.jsx(De,{className:"p-3 hover:bg-gray-50 cursor-pointer transition-colors",onClick:o,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"mt-0.5",children:c(l.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:l.title}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx(kd,{className:"w-3 h-3 text-gray-400"}),a.jsx("span",{className:"text-xs text-gray-500",children:new Date(l.created_at).toLocaleDateString()})]})]})]})},l.id))})})})]}):a.jsx(De,{className:"p-6",children:a.jsx("p",{className:"text-muted-foreground text-center",children:"Select a project to manage its knowledge base"})})}function ELe({className:e}){var y,j,x,C;const t=Vi(),{projectId:n}=vw(),{getEnhancedSettings:r,currentProject:s,projects:i}=js(),[o,c]=w.useState(!1),[l,d]=w.useState({creativityLevel:"balanced",temperature:.7,topP:.9,topK:50}),[u,h]=w.useState(!0);if(w.useEffect(()=>{(async()=>{if(!n){const _=localStorage.getItem("lastAccessedProjectId");if(_)try{h(!0);const N=await r(_);N!=null&&N.aiMethodSettings&&d({creativityLevel:N.aiMethodSettings.creativityLevel||"balanced",temperature:N.aiMethodSettings.temperature||.7,topP:N.aiMethodSettings.topP||.9,topK:N.aiMethodSettings.topK||50})}catch(N){console.error("Failed to load settings from last project:",N)}h(!1);return}try{h(!0);const _=await r(n);_!=null&&_.aiMethodSettings&&d({creativityLevel:_.aiMethodSettings.creativityLevel||"balanced",temperature:_.aiMethodSettings.temperature||.7,topP:_.aiMethodSettings.topP||.9,topK:_.aiMethodSettings.topK||50})}catch(_){console.error("Failed to load AI settings:",_)}finally{h(!1)}})()},[n,r]),u&&!n&&!localStorage.getItem("lastAccessedProjectId"))return null;const A=()=>{c(!1);const S=n||(s==null?void 0:s.id)||localStorage.getItem("lastAccessedProjectId")||(i.length>0?i[0].id:null);if(S){const _=`/project/${S}/settings?tab=ai-methods#advanced-generation-parameters`;t(_)}else t("/projects")},f=S=>{switch(S){case"conservative":return"bg-blue-100 text-blue-800 border-blue-200";case"balanced":return"bg-green-100 text-green-800 border-green-200";case"creative":return"bg-purple-100 text-purple-800 border-purple-200";case"experimental":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},m=(S,_,N)=>{const L=(S-_)/(N-_);return L<.3?"text-blue-600":L<.7?"text-green-600":"text-orange-600"},b=(()=>{const S={temperature:.7,topP:.9,topK:50,creativityLevel:"balanced"};return l.temperature!==S.temperature||l.topP!==S.topP||l.topK!==S.topK||l.creativityLevel!==S.creativityLevel})();return a.jsx(Sl,{children:a.jsx(Pr,{children:a.jsx(ot.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:$e("flex items-center",e),children:a.jsxs(qX,{open:o,onOpenChange:c,children:[a.jsx(KX,{asChild:!0,children:a.jsxs(fe,{variant:"ghost",size:"sm",className:$e("gap-2 bg-background/60 backdrop-blur-sm border transition-all duration-200",b?"border-primary/60 bg-primary/5 hover:bg-primary/10 hover:border-primary":"border-border/40 hover:bg-gray-100/80 hover:border-gray-300",e!=null&&e.includes("w-full")?"w-full justify-start h-8":""),children:[a.jsxs("div",{className:"relative",children:[a.jsx(Gs,{className:"w-4 h-4"}),b&&a.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-primary rounded-full animate-pulse"})]}),a.jsxs("div",{className:"flex items-center gap-1 text-xs font-mono",children:[a.jsxs("span",{className:m(l.temperature||.7,0,2),children:["T:",(y=l.temperature)==null?void 0:y.toFixed(1)]}),a.jsx("span",{className:"text-muted-foreground",children:"|"}),a.jsxs("span",{className:m(l.topP||.9,0,1),children:["P:",(j=l.topP)==null?void 0:j.toFixed(1)]}),a.jsx("span",{className:"text-muted-foreground",children:"|"}),a.jsxs("span",{className:m(l.topK||50,1,100),children:["K:",l.topK]})]}),b&&a.jsx("span",{className:"text-xs text-primary font-medium",children:"Custom"})]})}),a.jsx(wF,{className:"w-80 p-0",side:e!=null&&e.includes("w-full")?"right":"bottom",align:e!=null&&e.includes("w-full")?"start":"end",children:a.jsx(De,{className:"border-0 shadow-lg",children:a.jsxs(et,{className:"p-4 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Gs,{className:"w-5 h-5 text-primary"}),a.jsx("h3",{className:"font-semibold",children:"AI Generation Parameters"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[b&&a.jsx(_e,{variant:"default",className:"text-xs bg-primary/10 text-primary border-primary/20",children:"Custom"}),a.jsx(_e,{variant:"secondary",className:$e("text-xs",f(l.creativityLevel||"balanced")),children:l.creativityLevel||"balanced"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(bhe,{className:"w-4 h-4 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium",children:"Temperature"}),a.jsxs(La,{children:[a.jsx(Ma,{asChild:!0,children:a.jsx(Ep,{className:"w-3 h-3 text-muted-foreground hover:text-foreground cursor-help"})}),a.jsx(da,{side:"top",className:"max-w-xs",children:a.jsx("p",{className:"text-xs",children:"Controls randomness in AI responses. Lower values (0.1-0.3) produce more focused, predictable outputs. Higher values (0.7-1.0) increase creativity and variation."})})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:$e("text-sm font-mono",m(l.temperature||.7,0,2)),children:(x=l.temperature)==null?void 0:x.toFixed(2)}),a.jsx("div",{className:"w-12 h-2 bg-muted rounded-full overflow-hidden",children:a.jsx(ot.div,{className:$e("h-full rounded-full",m(l.temperature||.7,0,2).includes("blue")?"bg-blue-500":m(l.temperature||.7,0,2).includes("green")?"bg-green-500":"bg-orange-500"),initial:{width:0},animate:{width:`${(l.temperature||.7)/2*100}%`},transition:{duration:.5,delay:.1}})})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Mr,{className:"w-4 h-4 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium",children:"Top P"}),a.jsxs(La,{children:[a.jsx(Ma,{asChild:!0,children:a.jsx(Ep,{className:"w-3 h-3 text-muted-foreground hover:text-foreground cursor-help"})}),a.jsx(da,{side:"top",className:"max-w-xs",children:a.jsx("p",{className:"text-xs",children:"Nucleus sampling that considers only the top tokens with cumulative probability P. Lower values (0.1-0.5) focus on likely words, higher values (0.8-1.0) allow more diverse vocabulary."})})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:$e("text-sm font-mono",m(l.topP||.9,0,1)),children:(C=l.topP)==null?void 0:C.toFixed(2)}),a.jsx("div",{className:"w-12 h-2 bg-muted rounded-full overflow-hidden",children:a.jsx(ot.div,{className:$e("h-full rounded-full",m(l.topP||.9,0,1).includes("blue")?"bg-blue-500":m(l.topP||.9,0,1).includes("green")?"bg-green-500":"bg-orange-500"),initial:{width:0},animate:{width:`${(l.topP||.9)*100}%`},transition:{duration:.5,delay:.2}})})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pue,{className:"w-4 h-4 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium",children:"Top K"}),a.jsxs(La,{children:[a.jsx(Ma,{asChild:!0,children:a.jsx(Ep,{className:"w-3 h-3 text-muted-foreground hover:text-foreground cursor-help"})}),a.jsx(da,{side:"top",className:"max-w-xs",children:a.jsx("p",{className:"text-xs",children:"Limits AI to consider only the K most likely next tokens. Lower values (10-20) create more focused responses, higher values (50-100) allow broader word choices and creativity."})})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:$e("text-sm font-mono",m(l.topK||50,1,100)),children:l.topK}),a.jsx("div",{className:"w-12 h-2 bg-muted rounded-full overflow-hidden",children:a.jsx(ot.div,{className:$e("h-full rounded-full",m(l.topK||50,1,100).includes("blue")?"bg-blue-500":m(l.topK||50,1,100).includes("green")?"bg-green-500":"bg-orange-500"),initial:{width:0},animate:{width:`${(l.topK||50)/100*100}%`},transition:{duration:.5,delay:.3}})})]})]})]}),a.jsx("div",{className:"pt-2 border-t border-border",children:a.jsxs(fe,{onClick:A,size:"sm",className:"w-full gap-2",variant:"outline",children:[a.jsx(us,{className:"w-4 h-4"}),"Adjust Parameters",a.jsx(Hu,{className:"w-3 h-3"})]})}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[a.jsx("p",{children:"These parameters control AI creativity and output diversity for this project."}),b&&a.jsx("p",{className:"text-primary mt-1 font-medium",children:" Custom parameters are actively modifying AI prompt generation"})]})]})})})]})})})})}function _Le({activePanel:e,onPanelChange:t,children:n}){const[r,s]=w.useState(!1),{currentProject:i,setCurrentProject:o}=js();if(!i)return null;const c=()=>{o(null)},l=d=>{switch(d){case"edit":Ue.info("Edit project functionality coming soon");break;case"duplicate":Ue.info("Duplicate project functionality coming soon");break;case"share":Ue.info("Share project functionality coming soon");break;case"export":Ue.info("Export project functionality coming soon");break;case"delete":Ue.info("Delete project functionality coming soon");break}};return r?a.jsxs(ot.div,{initial:{width:320},animate:{width:60},transition:{duration:.3},className:"border-r border-border bg-card flex-shrink-0 flex flex-col",children:[a.jsxs("div",{className:"p-3 border-b border-border flex flex-col items-center gap-2",children:[a.jsx(fe,{variant:"ghost",size:"sm",onClick:c,className:"w-8 h-8 p-0",children:a.jsx(yo,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>s(!1),className:"w-8 h-8 p-0",children:a.jsx(Gue,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex flex-col gap-1 p-2",children:[a.jsx(fe,{variant:e==="canvas"?"default":"ghost",size:"sm",onClick:()=>t("canvas"),className:"w-8 h-8 p-0",children:a.jsx(Gu,{className:"w-4 h-4"})}),a.jsx(fe,{variant:e==="prompts"?"default":"ghost",size:"sm",onClick:()=>t("prompts"),className:"w-8 h-8 p-0",children:a.jsx(gr,{className:"w-4 h-4"})}),a.jsx(fe,{variant:e==="knowledge"?"default":"ghost",size:"sm",onClick:()=>t("knowledge"),className:"w-8 h-8 p-0",children:a.jsx(Xo,{className:"w-4 h-4"})})]})]}):a.jsxs(ot.div,{initial:{width:60},animate:{width:320},transition:{duration:.3},className:"w-80 border-r border-border bg-card flex-shrink-0 flex flex-col",children:[a.jsxs("div",{className:"border-b border-border p-4 space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(fe,{variant:"ghost",size:"sm",onClick:c,className:"flex items-center gap-2 text-sm",children:[a.jsx(yo,{className:"w-4 h-4"}),"Back to Projects"]}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>s(!0),className:"w-8 h-8 p-0",children:a.jsx(Kue,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"space-y-2",children:a.jsxs(xv,{children:[a.jsx(wv,{asChild:!0,children:a.jsxs(fe,{variant:"ghost",className:"w-full justify-between p-2 h-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 text-left",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-md flex items-center justify-center text-white text-sm font-medium",children:i.name.charAt(0).toUpperCase()}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h2",{className:"font-semibold text-sm truncate",children:i.name}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:i.description||"No description"})]})]}),a.jsx(Ic,{className:"w-4 h-4 text-muted-foreground"})]})}),a.jsxs(Wp,{align:"start",className:"w-56",children:[a.jsxs(Or,{onClick:()=>l("edit"),children:[a.jsx(Sd,{className:"w-4 h-4 mr-2"}),"Edit Project"]}),a.jsxs(Or,{onClick:()=>l("duplicate"),children:[a.jsx(Ii,{className:"w-4 h-4 mr-2"}),"Duplicate"]}),a.jsx(Gp,{}),a.jsxs(Or,{onClick:()=>l("share"),children:[a.jsx(D5,{className:"w-4 h-4 mr-2"}),"Share"]}),a.jsxs(Or,{onClick:()=>l("export"),children:[a.jsx(Vp,{className:"w-4 h-4 mr-2"}),"Export"]}),a.jsx(Gp,{}),a.jsxs(Or,{onClick:()=>l("delete"),className:"text-destructive",children:[a.jsx(Pc,{className:"w-4 h-4 mr-2"}),"Delete Project"]})]})]})}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(kd,{className:"w-3 h-3"}),a.jsxs("span",{children:["Created ",jU(i.created_at)]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(Qd,{className:"w-3 h-3"}),a.jsxs("span",{children:["Updated ",jU(i.updated_at)]})]}),i.description&&a.jsxs("div",{className:"flex items-start gap-2 text-xs text-muted-foreground",children:[a.jsx(In,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),a.jsx("span",{className:"line-clamp-2",children:i.description})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[a.jsx(us,{className:"w-3 h-3"}),a.jsx("span",{children:"AI Generation Settings"})]}),a.jsx(ELe,{className:"w-full"})]})]}),a.jsxs(Ka,{value:e,onValueChange:d=>t(d),children:[a.jsx("div",{className:"border-b border-border p-4",children:a.jsxs(ga,{className:"grid w-full grid-cols-3",children:[a.jsxs(xn,{value:"canvas",className:"text-xs",children:[a.jsx(Gu,{className:"w-3 h-3 mr-1"}),"Canvas"]}),a.jsxs(xn,{value:"prompts",className:"text-xs",children:[a.jsx(gr,{className:"w-3 h-3 mr-1"}),"Prompts"]}),a.jsxs(xn,{value:"knowledge",className:"text-xs",children:[a.jsx(Xo,{className:"w-3 h-3 mr-1"}),"Knowledge"]})]})}),a.jsx("div",{className:"flex-1 overflow-hidden",children:n})]})]})}function ILe(){const{currentProject:e,fetchProjects:t}=js();return e?a.jsx(PLe,{}):a.jsxs("div",{className:"h-screen bg-background flex flex-col",children:[a.jsx(Lr,{}),a.jsx("div",{className:"flex-1 p-6",children:a.jsx(BJ,{})})]})}function PLe(){const{selectedFramework:e,selectedStage:t,selectedNode:n,expandedPromptId:r,selectFramework:s,selectStage:i,frameworks:o,initializeFrameworks:c,nodes:l,edges:d,addNode:u,loadCanvasData:h,loadWorkflowFromStorage:A,toolToPromptIdMapping:f,setNodes:m,setEdges:g}=Us(),{initializeTemplates:b,loadProjectPrompts:y,clearProjectPrompts:j,currentPrompt:x,setCurrentPrompt:C,executePrompt:S,isGenerating:_,updatePromptVariables:N}=ma(),{currentProject:L,saveCanvasData:P}=js(),{user:F}=Dc(),[I,T]=w.useState("canvas"),[Q,D]=w.useState({});w.useState(0);const M=w.useRef(""),U=w.useRef(""),H=w.useRef(!1),$=w.useCallback(W=>{console.log(" Applying remote canvas update"),H.current=!0,W.nodes&&m(W.nodes),W.edges&&g(W.edges);const ne=JSON.stringify({nodes:W.nodes,edges:W.edges,toolToPromptIdMapping:W.toolToPromptIdMapping});M.current=ne,U.current=ne,setTimeout(()=>{H.current=!1},500)},[m,g]),{markLocalUpdate:R}=NLe({projectId:L==null?void 0:L.id,onRemoteUpdate:$,enabled:!0});w.useEffect(()=>{c(),b(),L||A()},[c,b,L,A]),w.useEffect(()=>{if(!L)return;y(L.id);const W=L.canvas_data||{nodes:[],edges:[],toolToPromptIdMapping:{}};h(W);const ne=JSON.stringify({nodes:W.nodes,edges:W.edges,toolToPromptIdMapping:W.toolToPromptIdMapping});return M.current=ne,U.current=ne,()=>{j()}},[L==null?void 0:L.id,h,y,j]),w.useEffect(()=>{x&&D(x.variables||{})},[x]),w.useEffect(()=>{if(!L||!F)return;if(H.current){console.log("  Skipping auto-save for remote update");return}const W=JSON.stringify({nodes:l,edges:d,toolToPromptIdMapping:f});if(W===U.current||W===M.current)return;const ne=setTimeout(()=>{console.log(" Auto-saving canvas data"),P(L.id,l,d,f,F.id),U.current=W,R(W)},600);return()=>clearTimeout(ne)},[l,d,f,L==null?void 0:L.id,F,P,R]);const Y=W=>{const ne={id:`stage-${W.id}-${Date.now()}`,type:"stage",position:{x:300,y:200},data:{stage:W,isActive:!0}};u(ne)},X=(W,ne)=>{const ae={...Q,[W]:ne};D(ae),x&&N(x.id,ae)},q=async()=>{if(x)try{await S(x.id)}catch(W){console.error("Failed to execute prompt:",W)}},K=()=>{if(!x)return;let W=x.content;Object.entries(Q).forEach(([ne,ae])=>{W=W.replace(new RegExp(`{{${ne}}}`,"g"),ae)}),navigator.clipboard.writeText(W),Ue.success("Prompt copied to clipboard")},J=W=>{const ne=W.match(/{{(\w+)}}/g);return ne?ne.map(ae=>ae.slice(2,-2)):[]};return a.jsxs("div",{className:"h-screen bg-background flex flex-col w-full",children:[a.jsx(Lr,{}),a.jsxs("div",{className:"flex-1 flex w-full",children:[!r&&a.jsxs(_Le,{activePanel:I,onPanelChange:T,children:[a.jsx(jn,{value:"canvas",className:"m-0 h-[calc(100vh-380px)]",children:a.jsx("div",{className:"p-4 space-y-4 h-full overflow-y-auto",children:x?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(fe,{size:"sm",variant:"ghost",onClick:()=>C(null),className:"h-8 w-8 p-0",children:a.jsx(yo,{className:"w-4 h-4"})}),a.jsx(gr,{className:"w-4 h-4 text-primary"}),a.jsx("h3",{className:"font-medium text-sm",children:"Prompt Details"})]}),a.jsxs("div",{className:"p-3 border border-border bg-muted/50 rounded-md",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm mb-2",children:[a.jsx(_e,{variant:"outline",children:x.context.framework.name}),a.jsx(_r,{className:"w-3 h-3 text-muted-foreground"}),a.jsx(_e,{variant:"outline",children:x.context.stage.name}),a.jsx(_r,{className:"w-3 h-3 text-muted-foreground"}),a.jsx(_e,{variant:"default",children:x.context.tool.name})]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Created: ",new Date(x.timestamp).toLocaleString()]})]}),J(x.content).length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"font-medium text-sm",children:"Customize Variables"}),a.jsx("div",{className:"grid gap-3",children:J(x.content).map(W=>a.jsxs("div",{className:"space-y-1",children:[a.jsx(at,{className:"text-xs capitalize",children:W.replace(/([A-Z])/g," $1").trim()}),a.jsx(ln,{placeholder:`Enter ${W}`,value:Q[W]||"",onChange:ne=>X(W,ne.target.value),className:"h-8 text-xs"})]},W))})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"font-medium text-sm",children:"Generated Prompt"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(fe,{size:"sm",variant:"outline",onClick:K,children:[a.jsx(Ii,{className:"w-3 h-3 mr-1"}),"Copy"]}),a.jsxs(fe,{size:"sm",onClick:q,disabled:_,children:[a.jsx(Kd,{className:"w-3 h-3 mr-1"}),_?"Generating...":"Execute"]})]})]}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[a.jsxs("span",{children:[x.content.length," characters"]}),a.jsxs("span",{children:[x.content.split(`
`).length," lines"]}),a.jsxs("span",{children:[x.content.split(" ").length," words"]})]}),a.jsx(ns,{className:"max-h-64",children:a.jsx("div",{className:"p-3 bg-muted/50 rounded-md border",children:a.jsx("pre",{className:"text-xs whitespace-pre-wrap font-mono leading-relaxed",children:x.content})})})]}),x.output&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"font-medium text-sm",children:"AI Output"}),a.jsxs(fe,{size:"sm",variant:"outline",children:[a.jsx(Vp,{className:"w-3 h-3 mr-1"}),"Export"]})]}),a.jsx(ns,{className:"max-h-48",children:a.jsx("div",{className:"p-3 bg-card rounded-md border",children:a.jsx("div",{className:"text-sm whitespace-pre-wrap",children:x.output})})})]})]}):e?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 rounded-lg mx-auto mb-2 flex items-center justify-center",style:{backgroundColor:e.color},children:a.jsx(gr,{className:"w-6 h-6 text-white"})}),a.jsx("h3",{className:"font-semibold",children:e.name}),a.jsx("p",{className:"text-xs text-muted-foreground",children:e.description})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"font-medium text-sm",children:"Framework Characteristics"}),a.jsx("div",{className:"grid grid-cols-1 gap-2",children:Object.entries(e.characteristics).map(([W,ne])=>a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsxs("span",{className:"text-muted-foreground capitalize",children:[W.replace(/([A-Z])/g," $1").trim(),":"]}),a.jsx("span",{className:"font-medium",children:ne})]},W))})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"font-medium text-sm",children:"Framework Stages"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Add stages to your workflow to access their tools"}),a.jsx("div",{className:"space-y-2",children:e.stages.map(W=>a.jsxs(fe,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>Y(W),children:[a.jsx(ha,{className:"w-3 h-3 mr-2"}),"Add ",W.name," Stage"]},W.id))})]})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Gu,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Select a Framework"}),a.jsx("p",{className:"text-muted-foreground text-sm",children:"Choose a UX framework from the dropdown above to see its details and add tools to your workflow"})]})})}),a.jsx(jn,{value:"prompts",className:"m-0 h-[calc(100vh-380px)]",children:a.jsx(CLe,{onPromptView:()=>T("canvas")})}),a.jsx(jn,{value:"knowledge",className:"m-0 h-[calc(100vh-380px)]",children:a.jsx(BLe,{})})]}),a.jsx("div",{className:"flex-1 overflow-hidden",children:a.jsx(bLe,{onSwitchToPromptTab:()=>T("prompts")})})]})]})}function TLe(){return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:[a.jsx(Lr,{}),a.jsxs(ot.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-b border-gray-100 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[a.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-100 rounded-xl",children:a.jsx(yl,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Projects"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your UX workflow projects, knowledge bases, and collaborative workspaces"})]})]}),a.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(yl,{className:"w-4 h-4"}),a.jsx("span",{children:"Project Management"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(xo,{className:"w-4 h-4"}),a.jsx("span",{children:"Knowledge Base Integration"})]})]})]})}),a.jsx("main",{className:"container mx-auto px-4 py-8",children:a.jsx("div",{children:a.jsx(BJ,{})})})]})]})}const FLe=({projectId:e,entries:t,onSelectDocument:n,onCreateNew:r})=>{const{toast:s}=ii(),{deleteEntry:i}=pa(),[o,c]=w.useState(""),[l,d]=w.useState("updated"),[u,h]=w.useState("all"),[A,f]=w.useState(!1),[m,g]=w.useState(""),b=t.map(_=>{var N;return{id:_.id,title:_.title,content:_.content,type:_.type,created_at:_.created_at,updated_at:_.updated_at,wordCount:((N=_.content)==null?void 0:N.split(/\s+/).filter(L=>L.length>0).length)||0,lastModified:new Date(_.updated_at).toLocaleDateString()}}),y=b.filter(_=>{const N=_.title.toLowerCase().includes(o.toLowerCase())||_.content.toLowerCase().includes(o.toLowerCase()),L=u==="all"||_.type===u;return N&&L}).sort((_,N)=>{switch(l){case"title":return _.title.localeCompare(N.title);case"created":return new Date(N.created_at).getTime()-new Date(_.created_at).getTime();case"updated":return new Date(N.updated_at).getTime()-new Date(_.updated_at).getTime();case"size":return N.wordCount-_.wordCount;default:return 0}}),j=_=>{switch(_){case"document":return a.jsx(In,{className:"w-5 h-5 text-blue-600"});case"image":return a.jsx(In,{className:"w-5 h-5 text-green-600"});default:return a.jsx(Xo,{className:"w-5 h-5 text-purple-600"})}},x=_=>{switch(_){case"document":return"bg-blue-100 text-blue-800 border-blue-200";case"image":return"bg-green-100 text-green-800 border-green-200";default:return"bg-purple-100 text-purple-800 border-purple-200"}},C=()=>{if(!m.trim()){s({title:"Title Required",description:"Please enter a title for the new document",variant:"destructive"});return}const _={id:`new-${Date.now()}`,title:m.trim(),content:"",type:"text",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),wordCount:0,lastModified:new Date().toLocaleDateString()};n(_),f(!1),g("")},S=async(_,N)=>{if(window.confirm(`Are you sure you want to delete "${N}"?`))try{await i(_),s({title:"Document Deleted",description:`"${N}" has been deleted successfully`})}catch{s({title:"Delete Failed",description:"Failed to delete the document",variant:"destructive"})}};return a.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[a.jsxs("div",{className:"p-6 bg-white border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[a.jsx(xo,{className:"w-6 h-6 text-blue-600"}),"Knowledge Base Documents"]}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your project knowledge documents and content"})]}),a.jsxs(zd,{open:A,onOpenChange:f,children:[a.jsx(GT,{asChild:!0,children:a.jsxs(fe,{className:"bg-blue-600 hover:bg-blue-700",onClick:_=>{_.stopPropagation()},children:[a.jsx(ha,{className:"w-4 h-4 mr-2"}),"New Document"]})}),a.jsxs(_l,{className:"max-w-md",children:[a.jsxs(Il,{children:[a.jsxs(Pl,{className:"flex items-center gap-2",children:[a.jsx(gr,{className:"w-5 h-5 text-purple-600"}),"Create New Document"]}),a.jsx(Vd,{children:"Create a new document in your knowledge base to store project information and research."})]}),a.jsxs("div",{className:"space-y-4 pt-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Document Title"}),a.jsx(ln,{value:m,onChange:_=>g(_.target.value),placeholder:"Enter document title...",className:"w-full",onKeyDown:_=>_.key==="Enter"&&C()})]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsxs(fe,{onClick:C,className:"flex-1",children:[a.jsx(ha,{className:"w-4 h-4 mr-2"}),"Create Document"]}),a.jsx(fe,{variant:"outline",onClick:()=>{f(!1),g("")},children:"Cancel"})]})]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(mw,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx(ln,{value:o,onChange:_=>c(_.target.value),placeholder:"Search documents...",className:"pl-10"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>d(l==="title"?"updated":"title"),className:"flex items-center gap-2",children:[a.jsx(pde,{className:"w-4 h-4"}),l==="title"?"A-Z":"Recent"]}),a.jsxs("select",{value:u,onChange:_=>h(_.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Types"}),a.jsx("option",{value:"text",children:"Text Only"}),a.jsx("option",{value:"document",children:"Documents"}),a.jsx("option",{value:"image",children:"Images"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-4 mt-4 pt-4 border-t border-gray-100",children:[a.jsxs(_e,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:[a.jsx(Xo,{className:"w-3 h-3 mr-1"}),y.length," Documents"]}),a.jsxs(_e,{variant:"outline",className:"bg-purple-50 text-purple-700 border-purple-200",children:[a.jsx(In,{className:"w-3 h-3 mr-1"}),y.reduce((_,N)=>_+N.wordCount,0)," Words"]})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:y.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(In,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),a.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:b.length===0?"No Documents Yet":"No Matching Documents"}),a.jsx("p",{className:"text-gray-500 mb-4",children:b.length===0?"Create your first knowledge base document to get started":"Try adjusting your search or filter criteria"}),b.length===0&&a.jsxs(fe,{onClick:r,className:"bg-blue-600 hover:bg-blue-700",children:[a.jsx(ha,{className:"w-4 h-4 mr-2"}),"Create First Document"]})]}):a.jsx("div",{className:"space-y-3",children:a.jsx(Pr,{children:y.map((_,N)=>a.jsx(ot.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:N*.03},children:a.jsxs("div",{className:"flex items-center justify-between p-4 bg-white border rounded-lg hover:shadow-md hover:border-blue-300 transition-all duration-200",children:[a.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[a.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-gray-50 rounded-lg flex-shrink-0",children:j(_.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h4",{className:"font-semibold text-gray-900 truncate",children:_.title}),a.jsx(_e,{variant:"outline",className:`text-xs ${x(_.type)}`,children:_.type})]}),a.jsx("p",{className:"text-sm text-gray-600 line-clamp-1 mb-2",children:_.content||"No content yet..."}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(kd,{className:"w-3 h-3"}),a.jsxs("span",{children:["Modified ",_.lastModified]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Jo,{className:"w-3 h-3"}),a.jsxs("span",{children:[Math.ceil(_.wordCount/200)," min read"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(In,{className:"w-3 h-3"}),a.jsxs("span",{children:[_.wordCount," words"]})]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[a.jsxs(fe,{onClick:()=>n(_),className:"px-4 bg-blue-600 hover:bg-blue-700",size:"sm",children:[a.jsx(Xu,{className:"w-4 h-4 mr-2"}),"Open Document"]}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:L=>{L.stopPropagation(),S(_.id,_.title)},className:"w-10 h-10 p-0 hover:bg-red-100 text-destructive",children:a.jsx(Pc,{className:"w-4 h-4"})})]})]})},_.id))})})})]})};function DLe(){const{projectId:e}=vw(),t=Vi(),{projects:n,fetchProjects:r,setCurrentProject:s}=js(),{entries:i,fetchEntries:o}=pa(),[c,l]=w.useState(n.find(A=>A.id===e));w.useEffect(()=>{n.length||r()},[r,n.length]),w.useEffect(()=>{if(n.length&&e){const A=n.find(f=>f.id===e);l(A),A&&o(A.id)}},[n,e,o]);const d=A=>{A.id.startsWith("new-")?t(`/knowledge/${e}/document/${A.id}?title=${encodeURIComponent(A.title)}`):t(`/knowledge/${e}/document/${A.id}`)},u=()=>{const A=`new-${Date.now()}`;t(`/knowledge/${e}/document/${A}?new=true`)},h=()=>{if(c)s(c),t("/workflow");else if(e){const A=n.find(f=>f.id===e);A?(s(A),t("/workflow")):t("/projects")}else t("/projects")};return c?a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:[a.jsx(Lr,{}),a.jsxs(ot.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-b border-gray-100 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsxs(fe,{variant:"ghost",onClick:h,className:"text-gray-600 hover:text-gray-800",children:[a.jsx(yo,{className:"w-4 h-4 mr-2"}),"Back to Workflow"]}),a.jsx("div",{className:"h-6 w-px bg-gray-300"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(yl,{className:"w-5 h-5 text-blue-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:c.name})]})]}),a.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[a.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-100 rounded-xl",children:a.jsx(xo,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Knowledge Base"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:['Manage documents and content for "',c.name,'"']})]})]}),a.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Xo,{className:"w-4 h-4"}),a.jsxs("span",{children:[i.length," Documents"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(xo,{className:"w-4 h-4"}),a.jsx("span",{children:"AI-Enhanced Editing"})]})]})]})}),a.jsx("main",{className:"container mx-auto px-4 py-8",children:a.jsx("div",{children:a.jsx(FLe,{projectId:c.id,entries:i,onSelectDocument:d,onCreateNew:u})})})]})]}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:[a.jsx(Lr,{}),a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Project Not Found"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"The requested project could not be found."}),a.jsxs(fe,{onClick:h,children:[a.jsx(yo,{className:"w-4 h-4 mr-2"}),"Back to Workflow"]})]})})]})}const ULe=async e=>{const{selectedText:t,context:n,enhancementType:r,projectContext:s}=e;try{await new Promise(o=>setTimeout(o,1500+Math.random()*1e3));const i=LLe(t,r,s);return{originalText:t,enhancedText:i.text,improvements:i.improvements,confidence:i.confidence,enhancementType:r}}catch(i){throw console.error("Error enhancing text:",i),new Error("Failed to enhance text with AI")}},LLe=(e,t,n)=>{const r=[];let s=e,i=.85;switch(t){case"clarity":s=DO(e),r.push("Improved sentence structure","Clarified technical terms","Simplified complex phrases"),i=.9;break;case"detail":s=MLe(e,n),r.push("Added specific examples","Expanded on key points","Included relevant context"),i=.87;break;case"professional":s=RLe(e),r.push("Refined tone and language","Improved formal structure","Enhanced credibility"),i=.92;break;case"comprehensive":s=OLe(e,n),r.push("Added comprehensive details","Included best practices","Expanded methodology"),i=.85;break;case"structure":s=QLe(e),r.push("Improved organization","Added clear headings","Better logical flow"),i=.88;break;default:s=DO(e),r.push("General improvements applied")}return{text:s,improvements:r,confidence:i}},DO=e=>{let t=e;return t.includes("user")&&(t=t.replace(/\buser\b/g,"end user")),t.includes("research")&&(t=t.replace(/\bresearch\b/g,"user research")),t+=" This approach ensures clear communication and understanding among all stakeholders involved in the project.",t},MLe=(e,t)=>{let n=e;return t!=null&&t.industry&&(n+=` In the context of ${t.industry} projects, this is particularly important because it directly impacts user satisfaction and business outcomes.`),n+=" Key considerations include: stakeholder alignment, user feedback integration, iterative testing approaches, and measurable success criteria.",n+=" Best practices suggest documenting all decisions and rationale for future reference and team knowledge sharing.",n},RLe=e=>{let t=e;return t=t.replace(/\bstuff\b/g,"elements"),t=t.replace(/\bthing\b/g,"component"),t=t.replace(/\bguys\b/g,"team members"),t=t.replace(/\bokay\b/g,"acceptable"),t=`From a strategic perspective, ${t.toLowerCase()}`,t+=" This aligns with industry standards and organizational best practices.",t},OLe=(e,t)=>{let n=e;return n+=" This encompasses multiple dimensions including: strategic planning, tactical execution, risk management, and success measurement.",t!=null&&t.targetAudience&&(n+=` Specifically designed for ${t.targetAudience}, this approach considers their unique needs, preferences, and behavioral patterns.`),n+=" Implementation involves systematic phases: discovery and analysis, design and prototyping, testing and validation, and deployment with continuous monitoring.",n+=" Success is measured through quantitative metrics (usage, conversion, satisfaction scores) and qualitative feedback (user interviews, usability studies).",n},QLe=e=>{const t=e.split(".").filter(r=>r.trim().length>0);if(t.length===1)return`**Overview:** ${e}

**Key Points:**
 Primary focus area identified
 Strategic approach defined
 Implementation pathway established

**Next Steps:**
 Detailed planning and resource allocation
 Stakeholder alignment and communication
 Execution timeline development`;let n="**Summary:** "+t[0].trim()+`.

`;return n+=`**Detailed Analysis:**
`,t.slice(1).forEach((r,s)=>{n+=`${s+1}. ${r.trim()}.
`}),n+=`
**Implementation Considerations:**
`,n+=` Resource requirements and timeline
`,n+=` Risk assessment and mitigation strategies
`,n+=" Success metrics and evaluation criteria",n};function Sr(e){"@babel/helpers - typeof";return Sr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sr(e)}var Tl=Uint8Array,qo=Uint16Array,NF=Int32Array,BF=new Tl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),EF=new Tl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),UO=new Tl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),EJ=function(e,t){for(var n=new qo(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var s=new NF(n[30]),r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)s[i]=i-n[r]<<5|r;return{b:n,r:s}},_J=EJ(BF,2),HLe=_J.b,oI=_J.r;HLe[28]=258,oI[258]=28;var $Le=EJ(EF,0),LO=$Le.r,cI=new qo(32768);for(var Zr=0;Zr<32768;++Zr){var Zh=(Zr&43690)>>1|(Zr&21845)<<1;Zh=(Zh&52428)>>2|(Zh&13107)<<2,Zh=(Zh&61680)>>4|(Zh&3855)<<4,cI[Zr]=((Zh&65280)>>8|(Zh&255)<<8)>>1}var K0=function(e,t,n){for(var r=e.length,s=0,i=new qo(t);s<r;++s)e[s]&&++i[e[s]-1];var o=new qo(t);for(s=1;s<t;++s)o[s]=o[s-1]+i[s-1]<<1;var c;if(n){c=new qo(1<<t);var l=15-t;for(s=0;s<r;++s)if(e[s])for(var d=s<<4|e[s],u=t-e[s],h=o[e[s]-1]++<<u,A=h|(1<<u)-1;h<=A;++h)c[cI[h]>>l]=d}else for(c=new qo(r),s=0;s<r;++s)e[s]&&(c[s]=cI[o[e[s]-1]++]>>15-e[s]);return c},om=new Tl(288);for(var Zr=0;Zr<144;++Zr)om[Zr]=8;for(var Zr=144;Zr<256;++Zr)om[Zr]=9;for(var Zr=256;Zr<280;++Zr)om[Zr]=7;for(var Zr=280;Zr<288;++Zr)om[Zr]=8;var fj=new Tl(32);for(var Zr=0;Zr<32;++Zr)fj[Zr]=5;var zLe=K0(om,9,0),VLe=K0(fj,5,0),IJ=function(e){return(e+7)/8|0},qLe=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new Tl(e.subarray(t,n))},Cu=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},Ky=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},$B=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var s=n.length,i=n.slice();if(!s)return{t:TJ,l:0};if(s==1){var o=new Tl(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(S,_){return S.f-_.f}),n.push({s:-1,f:25001});var c=n[0],l=n[1],d=0,u=1,h=2;for(n[0]={s:-1,f:c.f+l.f,l:c,r:l};u!=s-1;)c=n[n[d].f<n[h].f?d++:h++],l=n[d!=u&&n[d].f<n[h].f?d++:h++],n[u++]={s:-1,f:c.f+l.f,l:c,r:l};for(var A=i[0].s,r=1;r<s;++r)i[r].s>A&&(A=i[r].s);var f=new qo(A+1),m=lI(n[u-1],f,0);if(m>t){var r=0,g=0,b=m-t,y=1<<b;for(i.sort(function(_,N){return f[N.s]-f[_.s]||_.f-N.f});r<s;++r){var j=i[r].s;if(f[j]>t)g+=y-(1<<m-f[j]),f[j]=t;else break}for(g>>=b;g>0;){var x=i[r].s;f[x]<t?g-=1<<t-f[x]++-1:++r}for(;r>=0&&g;--r){var C=i[r].s;f[C]==t&&(--f[C],++g)}m=t}return{t:new Tl(f),l:m}},lI=function(e,t,n){return e.s==-1?Math.max(lI(e.l,t,n+1),lI(e.r,t,n+1)):t[e.s]=n},MO=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new qo(++t),r=0,s=e[0],i=1,o=function(l){n[r++]=l},c=1;c<=t;++c)if(e[c]==s&&c!=t)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=e[c]}return{c:n.subarray(0,r),n:t}},Wy=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},PJ=function(e,t,n){var r=n.length,s=IJ(t+2);e[s]=r&255,e[s+1]=r>>8,e[s+2]=e[s]^255,e[s+3]=e[s+1]^255;for(var i=0;i<r;++i)e[s+i+4]=n[i];return(s+4+r)*8},RO=function(e,t,n,r,s,i,o,c,l,d,u){Cu(t,u++,n),++s[256];for(var h=$B(s,15),A=h.t,f=h.l,m=$B(i,15),g=m.t,b=m.l,y=MO(A),j=y.c,x=y.n,C=MO(g),S=C.c,_=C.n,N=new qo(19),L=0;L<j.length;++L)++N[j[L]&31];for(var L=0;L<S.length;++L)++N[S[L]&31];for(var P=$B(N,7),F=P.t,I=P.l,T=19;T>4&&!F[UO[T-1]];--T);var Q=d+5<<3,D=Wy(s,om)+Wy(i,fj)+o,M=Wy(s,A)+Wy(i,g)+o+14+3*T+Wy(N,F)+2*N[16]+3*N[17]+7*N[18];if(l>=0&&Q<=D&&Q<=M)return PJ(t,u,e.subarray(l,l+d));var U,H,$,R;if(Cu(t,u,1+(M<D)),u+=2,M<D){U=K0(A,f,0),H=A,$=K0(g,b,0),R=g;var Y=K0(F,I,0);Cu(t,u,x-257),Cu(t,u+5,_-1),Cu(t,u+10,T-4),u+=14;for(var L=0;L<T;++L)Cu(t,u+3*L,F[UO[L]]);u+=3*T;for(var X=[j,S],q=0;q<2;++q)for(var K=X[q],L=0;L<K.length;++L){var J=K[L]&31;Cu(t,u,Y[J]),u+=F[J],J>15&&(Cu(t,u,K[L]>>5&127),u+=K[L]>>12)}}else U=zLe,H=om,$=VLe,R=fj;for(var L=0;L<c;++L){var W=r[L];if(W>255){var J=W>>18&31;Ky(t,u,U[J+257]),u+=H[J+257],J>7&&(Cu(t,u,W>>23&31),u+=BF[J]);var ne=W&31;Ky(t,u,$[ne]),u+=R[ne],ne>3&&(Ky(t,u,W>>5&8191),u+=EF[ne])}else Ky(t,u,U[W]),u+=H[W]}return Ky(t,u,U[256]),u+H[256]},KLe=new NF([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),TJ=new Tl(0),WLe=function(e,t,n,r,s,i){var o=i.z||e.length,c=new Tl(r+o+5*(1+Math.ceil(o/7e3))+s),l=c.subarray(r,c.length-s),d=i.l,u=(i.r||0)&7;if(t){u&&(l[0]=i.r>>3);for(var h=KLe[t-1],A=h>>13,f=h&8191,m=(1<<n)-1,g=i.p||new qo(32768),b=i.h||new qo(m+1),y=Math.ceil(n/3),j=2*y,x=function(xe){return(e[xe]^e[xe+1]<<y^e[xe+2]<<j)&m},C=new NF(25e3),S=new qo(288),_=new qo(32),N=0,L=0,P=i.i||0,F=0,I=i.w||0,T=0;P+2<o;++P){var Q=x(P),D=P&32767,M=b[Q];if(g[D]=M,b[Q]=D,I<=P){var U=o-P;if((N>7e3||F>24576)&&(U>423||!d)){u=RO(e,l,0,C,S,_,L,F,T,P-T,u),F=N=L=0,T=P;for(var H=0;H<286;++H)S[H]=0;for(var H=0;H<30;++H)_[H]=0}var $=2,R=0,Y=f,X=D-M&32767;if(U>2&&Q==x(P-X))for(var q=Math.min(A,U)-1,K=Math.min(32767,P),J=Math.min(258,U);X<=K&&--Y&&D!=M;){if(e[P+$]==e[P+$-X]){for(var W=0;W<J&&e[P+W]==e[P+W-X];++W);if(W>$){if($=W,R=X,W>q)break;for(var ne=Math.min(X,W-2),ae=0,H=0;H<ne;++H){var ce=P-X+H&32767,Ae=g[ce],pe=ce-Ae&32767;pe>ae&&(ae=pe,M=ce)}}}D=M,M=g[D],X+=D-M&32767}if(R){C[F++]=268435456|oI[$]<<18|LO[R];var be=oI[$]&31,Ne=LO[R]&31;L+=BF[be]+EF[Ne],++S[257+be],++_[Ne],I=P+$,++N}else C[F++]=e[P],++S[e[P]]}}for(P=Math.max(P,I);P<o;++P)C[F++]=e[P],++S[e[P]];u=RO(e,l,d,C,S,_,L,F,T,P-T,u),d||(i.r=u&7|l[u/8|0]<<3,u-=7,i.h=b,i.p=g,i.i=P,i.w=I)}else{for(var P=i.w||0;P<o+d;P+=65535){var Pe=P+65535;Pe>=o&&(l[u/8|0]=d,Pe=o),u=PJ(l,u+1,e.subarray(P,Pe))}i.i=o}return qLe(c,0,r+IJ(u)+s)},FJ=function(){var e=1,t=0;return{p:function(n){for(var r=e,s=t,i=n.length|0,o=0;o!=i;){for(var c=Math.min(o+2655,i);o<c;++o)s+=r+=n[o];r=(r&65535)+15*(r>>16),s=(s&65535)+15*(s>>16)}e=r,t=s},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},GLe=function(e,t,n,r,s){if(!s&&(s={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new Tl(i.length+e.length);o.set(i),o.set(e,i.length),e=o,s.w=i.length}return WLe(e,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,s)},DJ=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},YLe=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=FJ();s.p(t.dictionary),DJ(e,2,s.d())}};function dI(e,t){t||(t={});var n=FJ();n.p(e);var r=GLe(e,t,t.dictionary?6:2,4);return YLe(r,t),DJ(r,r.length-4,n.d()),r}var XLe=typeof TextDecoder<"u"&&new TextDecoder,JLe=0;try{XLe.decode(TJ,{stream:!0}),JLe=1}catch{}function ZLe(e){if(Array.isArray(e))return e}function eMe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,o,c=[],l=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(u){d=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return c}}function OO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function tMe(e,t){if(e){if(typeof e=="string")return OO(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?OO(e,t):void 0}}function nMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QO(e,t){return ZLe(e)||eMe(e,t)||tMe(e,t)||nMe()}function HO(e,t="utf8"){return new TextDecoder(t).decode(e)}const rMe=new TextEncoder;function sMe(e){return rMe.encode(e)}const iMe=1024*8,aMe=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),zB={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class _F{constructor(t=iMe,n={}){Je(this,"buffer");Je(this,"byteLength");Je(this,"byteOffset");Je(this,"length");Je(this,"offset");Je(this,"lastWrittenByte");Je(this,"littleEndian");Je(this,"_data");Je(this,"_mark");Je(this,"_marks");let r=!1;typeof t=="number"?t=new ArrayBuffer(t):(r=!0,this.lastWrittenByte=t.byteLength);const s=n.offset?n.offset>>>0:0,i=t.byteLength-s;let o=s;(ArrayBuffer.isView(t)||t instanceof _F)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+s),t=t.buffer),r?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,i),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const r=(this.offset+t)*2,s=new Uint8Array(r);s.set(new Uint8Array(this.buffer)),this.buffer=s.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,n){const r=zB[n].BYTES_PER_ELEMENT*t,s=this.byteOffset+this.offset,i=this.buffer.slice(s,s+r);if(this.littleEndian===aMe&&n!=="uint8"&&n!=="int8"){const c=new Uint8Array(this.buffer.slice(s,s+r));c.reverse();const l=new zB[n](c.buffer);return this.offset+=r,l.reverse(),l}const o=new zB[n](i);return this.offset+=r,o}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let n="";for(let r=0;r<t;r++)n+=this.readChar();return n}readUtf8(t=1){return HO(this.readBytes(t))}decodeText(t=1,n="utf8"){return HO(this.readBytes(t),n)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let n=0;n<t.length;n++)this._data.setUint8(this.offset++,t[n]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let n=0;n<t.length;n++)this.writeUint8(t.charCodeAt(n));return this}writeUtf8(t){return this.writeBytes(sMe(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const oMe=4,$O=0,zO=1,cMe=2;function ty(e){let t=e.length;for(;--t>=0;)e[t]=0}const lMe=0,UJ=1,dMe=2,uMe=3,hMe=258,IF=29,Ow=256,Gx=Ow+1+IF,qg=30,PF=19,LJ=2*Gx+1,gp=15,VB=16,AMe=7,TF=256,MJ=16,RJ=17,OJ=18,uI=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),z2=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),fMe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),QJ=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),pMe=512,Fu=new Array((Gx+2)*2);ty(Fu);const W0=new Array(qg*2);ty(W0);const Yx=new Array(pMe);ty(Yx);const Xx=new Array(hMe-uMe+1);ty(Xx);const FF=new Array(IF);ty(FF);const pj=new Array(qg);ty(pj);function qB(e,t,n,r,s){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=s,this.has_stree=e&&e.length}let HJ,$J,zJ;function KB(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const VJ=e=>e<256?Yx[e]:Yx[256+(e>>>7)],Jx=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},po=(e,t,n)=>{e.bi_valid>VB-n?(e.bi_buf|=t<<e.bi_valid&65535,Jx(e,e.bi_buf),e.bi_buf=t>>VB-e.bi_valid,e.bi_valid+=n-VB):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},jd=(e,t,n)=>{po(e,n[t*2],n[t*2+1])},qJ=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},mMe=e=>{e.bi_valid===16?(Jx(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},gMe=(e,t)=>{const n=t.dyn_tree,r=t.max_code,s=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,c=t.stat_desc.extra_base,l=t.stat_desc.max_length;let d,u,h,A,f,m,g=0;for(A=0;A<=gp;A++)e.bl_count[A]=0;for(n[e.heap[e.heap_max]*2+1]=0,d=e.heap_max+1;d<LJ;d++)u=e.heap[d],A=n[n[u*2+1]*2+1]+1,A>l&&(A=l,g++),n[u*2+1]=A,!(u>r)&&(e.bl_count[A]++,f=0,u>=c&&(f=o[u-c]),m=n[u*2],e.opt_len+=m*(A+f),i&&(e.static_len+=m*(s[u*2+1]+f)));if(g!==0){do{for(A=l-1;e.bl_count[A]===0;)A--;e.bl_count[A]--,e.bl_count[A+1]+=2,e.bl_count[l]--,g-=2}while(g>0);for(A=l;A!==0;A--)for(u=e.bl_count[A];u!==0;)h=e.heap[--d],!(h>r)&&(n[h*2+1]!==A&&(e.opt_len+=(A-n[h*2+1])*n[h*2],n[h*2+1]=A),u--)}},KJ=(e,t,n)=>{const r=new Array(gp+1);let s=0,i,o;for(i=1;i<=gp;i++)s=s+n[i-1]<<1,r[i]=s;for(o=0;o<=t;o++){let c=e[o*2+1];c!==0&&(e[o*2]=qJ(r[c]++,c))}},vMe=()=>{let e,t,n,r,s;const i=new Array(gp+1);for(n=0,r=0;r<IF-1;r++)for(FF[r]=n,e=0;e<1<<uI[r];e++)Xx[n++]=r;for(Xx[n-1]=r,s=0,r=0;r<16;r++)for(pj[r]=s,e=0;e<1<<z2[r];e++)Yx[s++]=r;for(s>>=7;r<qg;r++)for(pj[r]=s<<7,e=0;e<1<<z2[r]-7;e++)Yx[256+s++]=r;for(t=0;t<=gp;t++)i[t]=0;for(e=0;e<=143;)Fu[e*2+1]=8,e++,i[8]++;for(;e<=255;)Fu[e*2+1]=9,e++,i[9]++;for(;e<=279;)Fu[e*2+1]=7,e++,i[7]++;for(;e<=287;)Fu[e*2+1]=8,e++,i[8]++;for(KJ(Fu,Gx+1,i),e=0;e<qg;e++)W0[e*2+1]=5,W0[e*2]=qJ(e,5);HJ=new qB(Fu,uI,Ow+1,Gx,gp),$J=new qB(W0,z2,0,qg,gp),zJ=new qB(new Array(0),fMe,0,PF,AMe)},WJ=e=>{let t;for(t=0;t<Gx;t++)e.dyn_ltree[t*2]=0;for(t=0;t<qg;t++)e.dyn_dtree[t*2]=0;for(t=0;t<PF;t++)e.bl_tree[t*2]=0;e.dyn_ltree[TF*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},GJ=e=>{e.bi_valid>8?Jx(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},VO=(e,t,n,r)=>{const s=t*2,i=n*2;return e[s]<e[i]||e[s]===e[i]&&r[t]<=r[n]},WB=(e,t,n)=>{const r=e.heap[n];let s=n<<1;for(;s<=e.heap_len&&(s<e.heap_len&&VO(t,e.heap[s+1],e.heap[s],e.depth)&&s++,!VO(t,r,e.heap[s],e.depth));)e.heap[n]=e.heap[s],n=s,s<<=1;e.heap[n]=r},qO=(e,t,n)=>{let r,s,i=0,o,c;if(e.sym_next!==0)do r=e.pending_buf[e.sym_buf+i++]&255,r+=(e.pending_buf[e.sym_buf+i++]&255)<<8,s=e.pending_buf[e.sym_buf+i++],r===0?jd(e,s,t):(o=Xx[s],jd(e,o+Ow+1,t),c=uI[o],c!==0&&(s-=FF[o],po(e,s,c)),r--,o=VJ(r),jd(e,o,n),c=z2[o],c!==0&&(r-=pj[o],po(e,r,c)));while(i<e.sym_next);jd(e,TF,t)},hI=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,i=t.stat_desc.elems;let o,c,l=-1,d;for(e.heap_len=0,e.heap_max=LJ,o=0;o<i;o++)n[o*2]!==0?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):n[o*2+1]=0;for(;e.heap_len<2;)d=e.heap[++e.heap_len]=l<2?++l:0,n[d*2]=1,e.depth[d]=0,e.opt_len--,s&&(e.static_len-=r[d*2+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)WB(e,n,o);d=i;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],WB(e,n,1),c=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=c,n[d*2]=n[o*2]+n[c*2],e.depth[d]=(e.depth[o]>=e.depth[c]?e.depth[o]:e.depth[c])+1,n[o*2+1]=n[c*2+1]=d,e.heap[1]=d++,WB(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],gMe(e,t),KJ(n,l,e.bl_count)},KO=(e,t,n)=>{let r,s=-1,i,o=t[0*2+1],c=0,l=7,d=4;for(o===0&&(l=138,d=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++)i=o,o=t[(r+1)*2+1],!(++c<l&&i===o)&&(c<d?e.bl_tree[i*2]+=c:i!==0?(i!==s&&e.bl_tree[i*2]++,e.bl_tree[MJ*2]++):c<=10?e.bl_tree[RJ*2]++:e.bl_tree[OJ*2]++,c=0,s=i,o===0?(l=138,d=3):i===o?(l=6,d=3):(l=7,d=4))},WO=(e,t,n)=>{let r,s=-1,i,o=t[0*2+1],c=0,l=7,d=4;for(o===0&&(l=138,d=3),r=0;r<=n;r++)if(i=o,o=t[(r+1)*2+1],!(++c<l&&i===o)){if(c<d)do jd(e,i,e.bl_tree);while(--c!==0);else i!==0?(i!==s&&(jd(e,i,e.bl_tree),c--),jd(e,MJ,e.bl_tree),po(e,c-3,2)):c<=10?(jd(e,RJ,e.bl_tree),po(e,c-3,3)):(jd(e,OJ,e.bl_tree),po(e,c-11,7));c=0,s=i,o===0?(l=138,d=3):i===o?(l=6,d=3):(l=7,d=4)}},yMe=e=>{let t;for(KO(e,e.dyn_ltree,e.l_desc.max_code),KO(e,e.dyn_dtree,e.d_desc.max_code),hI(e,e.bl_desc),t=PF-1;t>=3&&e.bl_tree[QJ[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},xMe=(e,t,n,r)=>{let s;for(po(e,t-257,5),po(e,n-1,5),po(e,r-4,4),s=0;s<r;s++)po(e,e.bl_tree[QJ[s]*2+1],3);WO(e,e.dyn_ltree,t-1),WO(e,e.dyn_dtree,n-1)},wMe=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return $O;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return zO;for(n=32;n<Ow;n++)if(e.dyn_ltree[n*2]!==0)return zO;return $O};let GO=!1;const bMe=e=>{GO||(vMe(),GO=!0),e.l_desc=new KB(e.dyn_ltree,HJ),e.d_desc=new KB(e.dyn_dtree,$J),e.bl_desc=new KB(e.bl_tree,zJ),e.bi_buf=0,e.bi_valid=0,WJ(e)},YJ=(e,t,n,r)=>{po(e,(lMe<<1)+(r?1:0),3),GJ(e),Jx(e,n),Jx(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},CMe=e=>{po(e,UJ<<1,3),jd(e,TF,Fu),mMe(e)},jMe=(e,t,n,r)=>{let s,i,o=0;e.level>0?(e.strm.data_type===cMe&&(e.strm.data_type=wMe(e)),hI(e,e.l_desc),hI(e,e.d_desc),o=yMe(e),s=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=s&&(s=i)):s=i=n+5,n+4<=s&&t!==-1?YJ(e,t,n,r):e.strategy===oMe||i===s?(po(e,(UJ<<1)+(r?1:0),3),qO(e,Fu,W0)):(po(e,(dMe<<1)+(r?1:0),3),xMe(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),qO(e,e.dyn_ltree,e.dyn_dtree)),WJ(e),r&&GJ(e)},kMe=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(Xx[n]+Ow+1)*2]++,e.dyn_dtree[VJ(t)*2]++),e.sym_next===e.sym_end);var SMe=bMe,NMe=YJ,BMe=jMe,EMe=kMe,_Me=CMe,IMe={_tr_init:SMe,_tr_stored_block:NMe,_tr_flush_block:BMe,_tr_tally:EMe,_tr_align:_Me};const PMe=(e,t,n,r)=>{let s=e&65535|0,i=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do s=s+t[r++]|0,i=i+s|0;while(--o);s%=65521,i%=65521}return s|i<<16|0};var Zx=PMe;const TMe=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},FMe=new Uint32Array(TMe()),DMe=(e,t,n,r)=>{const s=FMe,i=r+n;e^=-1;for(let o=r;o<i;o++)e=e>>>8^s[(e^t[o])&255];return e^-1};var Si=DMe,_v={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Qw={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:UMe,_tr_stored_block:AI,_tr_flush_block:LMe,_tr_tally:QA,_tr_align:MMe}=IMe,{Z_NO_FLUSH:HA,Z_PARTIAL_FLUSH:RMe,Z_FULL_FLUSH:OMe,Z_FINISH:wc,Z_BLOCK:YO,Z_OK:Li,Z_STREAM_END:XO,Z_STREAM_ERROR:Md,Z_DATA_ERROR:QMe,Z_BUF_ERROR:GB,Z_DEFAULT_COMPRESSION:HMe,Z_FILTERED:$Me,Z_HUFFMAN_ONLY:_1,Z_RLE:zMe,Z_FIXED:VMe,Z_DEFAULT_STRATEGY:qMe,Z_UNKNOWN:KMe,Z_DEFLATED:nS}=Qw,WMe=9,GMe=15,YMe=8,XMe=29,JMe=256,fI=JMe+1+XMe,ZMe=30,eRe=19,tRe=2*fI+1,nRe=15,tr=3,SA=258,Rd=SA+tr+1,rRe=32,Iv=42,DF=57,pI=69,mI=73,gI=91,vI=103,vp=113,f0=666,Qa=1,ny=2,cm=3,ry=4,sRe=3,yp=(e,t)=>(e.msg=_v[t],t),JO=e=>e*2-(e>4?9:0),pA=e=>{let t=e.length;for(;--t>=0;)e[t]=0},iRe=e=>{let t,n,r,s=e.w_size;t=e.hash_size,r=t;do n=e.head[--r],e.head[r]=n>=s?n-s:0;while(--t);t=s,r=t;do n=e.prev[--r],e.prev[r]=n>=s?n-s:0;while(--t)};let aRe=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,$A=aRe;const Qo=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},Ko=(e,t)=>{LMe(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Qo(e.strm)},mr=(e,t)=>{e.pending_buf[e.pending++]=t},Gy=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},yI=(e,t,n,r)=>{let s=e.avail_in;return s>r&&(s=r),s===0?0:(e.avail_in-=s,t.set(e.input.subarray(e.next_in,e.next_in+s),n),e.state.wrap===1?e.adler=Zx(e.adler,t,s,n):e.state.wrap===2&&(e.adler=Si(e.adler,t,s,n)),e.next_in+=s,e.total_in+=s,s)},XJ=(e,t)=>{let n=e.max_chain_length,r=e.strstart,s,i,o=e.prev_length,c=e.nice_match;const l=e.strstart>e.w_size-Rd?e.strstart-(e.w_size-Rd):0,d=e.window,u=e.w_mask,h=e.prev,A=e.strstart+SA;let f=d[r+o-1],m=d[r+o];e.prev_length>=e.good_match&&(n>>=2),c>e.lookahead&&(c=e.lookahead);do if(s=t,!(d[s+o]!==m||d[s+o-1]!==f||d[s]!==d[r]||d[++s]!==d[r+1])){r+=2,s++;do;while(d[++r]===d[++s]&&d[++r]===d[++s]&&d[++r]===d[++s]&&d[++r]===d[++s]&&d[++r]===d[++s]&&d[++r]===d[++s]&&d[++r]===d[++s]&&d[++r]===d[++s]&&r<A);if(i=SA-(A-r),r=A-SA,i>o){if(e.match_start=t,o=i,i>=c)break;f=d[r+o-1],m=d[r+o]}}while((t=h[t&u])>l&&--n!==0);return o<=e.lookahead?o:e.lookahead},Pv=e=>{const t=e.w_size;let n,r,s;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Rd)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),iRe(e),r+=t),e.strm.avail_in===0)break;if(n=yI(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=tr)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=$A(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=$A(e,e.ins_h,e.window[s+tr-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<tr)););}while(e.lookahead<Rd&&e.strm.avail_in!==0)},JJ=(e,t)=>{let n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,r,s,i,o=0,c=e.strm.avail_in;do{if(r=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,s=e.strstart-e.block_start,r>s+e.strm.avail_in&&(r=s+e.strm.avail_in),r>i&&(r=i),r<n&&(r===0&&t!==wc||t===HA||r!==s+e.strm.avail_in)))break;o=t===wc&&r===s+e.strm.avail_in?1:0,AI(e,0,0,o),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,Qo(e.strm),s&&(s>r&&(s=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+s),e.strm.next_out),e.strm.next_out+=s,e.strm.avail_out-=s,e.strm.total_out+=s,e.block_start+=s,r-=s),r&&(yI(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(o===0);return c-=e.strm.avail_in,c&&(c>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=c&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-c,e.strm.next_in),e.strstart),e.strstart+=c,e.insert+=c>e.w_size-e.insert?e.w_size-e.insert:c),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?ry:t!==HA&&t!==wc&&e.strm.avail_in===0&&e.strstart===e.block_start?ny:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(yI(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,n=i>e.w_size?e.w_size:i,s=e.strstart-e.block_start,(s>=n||(s||t===wc)&&t!==HA&&e.strm.avail_in===0&&s<=i)&&(r=s>i?i:s,o=t===wc&&e.strm.avail_in===0&&r===s?1:0,AI(e,e.block_start,r,o),e.block_start+=r,Qo(e.strm)),o?cm:Qa)},YB=(e,t)=>{let n,r;for(;;){if(e.lookahead<Rd){if(Pv(e),e.lookahead<Rd&&t===HA)return Qa;if(e.lookahead===0)break}if(n=0,e.lookahead>=tr&&(e.ins_h=$A(e,e.ins_h,e.window[e.strstart+tr-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-Rd&&(e.match_length=XJ(e,n)),e.match_length>=tr)if(r=QA(e,e.strstart-e.match_start,e.match_length-tr),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=tr){e.match_length--;do e.strstart++,e.ins_h=$A(e,e.ins_h,e.window[e.strstart+tr-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=$A(e,e.ins_h,e.window[e.strstart+1]);else r=QA(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Ko(e,!1),e.strm.avail_out===0))return Qa}return e.insert=e.strstart<tr-1?e.strstart:tr-1,t===wc?(Ko(e,!0),e.strm.avail_out===0?cm:ry):e.sym_next&&(Ko(e,!1),e.strm.avail_out===0)?Qa:ny},Km=(e,t)=>{let n,r,s;for(;;){if(e.lookahead<Rd){if(Pv(e),e.lookahead<Rd&&t===HA)return Qa;if(e.lookahead===0)break}if(n=0,e.lookahead>=tr&&(e.ins_h=$A(e,e.ins_h,e.window[e.strstart+tr-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=tr-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Rd&&(e.match_length=XJ(e,n),e.match_length<=5&&(e.strategy===$Me||e.match_length===tr&&e.strstart-e.match_start>4096)&&(e.match_length=tr-1)),e.prev_length>=tr&&e.match_length<=e.prev_length){s=e.strstart+e.lookahead-tr,r=QA(e,e.strstart-1-e.prev_match,e.prev_length-tr),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=s&&(e.ins_h=$A(e,e.ins_h,e.window[e.strstart+tr-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=tr-1,e.strstart++,r&&(Ko(e,!1),e.strm.avail_out===0))return Qa}else if(e.match_available){if(r=QA(e,0,e.window[e.strstart-1]),r&&Ko(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Qa}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=QA(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<tr-1?e.strstart:tr-1,t===wc?(Ko(e,!0),e.strm.avail_out===0?cm:ry):e.sym_next&&(Ko(e,!1),e.strm.avail_out===0)?Qa:ny},oRe=(e,t)=>{let n,r,s,i;const o=e.window;for(;;){if(e.lookahead<=SA){if(Pv(e),e.lookahead<=SA&&t===HA)return Qa;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=tr&&e.strstart>0&&(s=e.strstart-1,r=o[s],r===o[++s]&&r===o[++s]&&r===o[++s])){i=e.strstart+SA;do;while(r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&s<i);e.match_length=SA-(i-s),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=tr?(n=QA(e,1,e.match_length-tr),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=QA(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Ko(e,!1),e.strm.avail_out===0))return Qa}return e.insert=0,t===wc?(Ko(e,!0),e.strm.avail_out===0?cm:ry):e.sym_next&&(Ko(e,!1),e.strm.avail_out===0)?Qa:ny},cRe=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(Pv(e),e.lookahead===0)){if(t===HA)return Qa;break}if(e.match_length=0,n=QA(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Ko(e,!1),e.strm.avail_out===0))return Qa}return e.insert=0,t===wc?(Ko(e,!0),e.strm.avail_out===0?cm:ry):e.sym_next&&(Ko(e,!1),e.strm.avail_out===0)?Qa:ny};function hd(e,t,n,r,s){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=s}const p0=[new hd(0,0,0,0,JJ),new hd(4,4,8,4,YB),new hd(4,5,16,8,YB),new hd(4,6,32,32,YB),new hd(4,4,16,16,Km),new hd(8,16,32,32,Km),new hd(8,16,128,128,Km),new hd(8,32,128,256,Km),new hd(32,128,258,1024,Km),new hd(32,258,258,4096,Km)],lRe=e=>{e.window_size=2*e.w_size,pA(e.head),e.max_lazy_match=p0[e.level].max_lazy,e.good_match=p0[e.level].good_length,e.nice_match=p0[e.level].nice_length,e.max_chain_length=p0[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=tr-1,e.match_available=0,e.ins_h=0};function dRe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=nS,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(tRe*2),this.dyn_dtree=new Uint16Array((2*ZMe+1)*2),this.bl_tree=new Uint16Array((2*eRe+1)*2),pA(this.dyn_ltree),pA(this.dyn_dtree),pA(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(nRe+1),this.heap=new Uint16Array(2*fI+1),pA(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*fI+1),pA(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Hw=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==Iv&&t.status!==DF&&t.status!==pI&&t.status!==mI&&t.status!==gI&&t.status!==vI&&t.status!==vp&&t.status!==f0?1:0},ZJ=e=>{if(Hw(e))return yp(e,Md);e.total_in=e.total_out=0,e.data_type=KMe;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?DF:t.wrap?Iv:vp,e.adler=t.wrap===2?0:1,t.last_flush=-2,UMe(t),Li},eZ=e=>{const t=ZJ(e);return t===Li&&lRe(e.state),t},uRe=(e,t)=>Hw(e)||e.state.wrap!==2?Md:(e.state.gzhead=t,Li),tZ=(e,t,n,r,s,i)=>{if(!e)return Md;let o=1;if(t===HMe&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),s<1||s>WMe||n!==nS||r<8||r>15||t<0||t>9||i<0||i>VMe||r===8&&o!==1)return yp(e,Md);r===8&&(r=9);const c=new dRe;return e.state=c,c.strm=e,c.status=Iv,c.wrap=o,c.gzhead=null,c.w_bits=r,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=s+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+tr-1)/tr),c.window=new Uint8Array(c.w_size*2),c.head=new Uint16Array(c.hash_size),c.prev=new Uint16Array(c.w_size),c.lit_bufsize=1<<s+6,c.pending_buf_size=c.lit_bufsize*4,c.pending_buf=new Uint8Array(c.pending_buf_size),c.sym_buf=c.lit_bufsize,c.sym_end=(c.lit_bufsize-1)*3,c.level=t,c.strategy=i,c.method=n,eZ(e)},hRe=(e,t)=>tZ(e,t,nS,GMe,YMe,qMe),ARe=(e,t)=>{if(Hw(e)||t>YO||t<0)return e?yp(e,Md):Md;const n=e.state;if(!e.output||e.avail_in!==0&&!e.input||n.status===f0&&t!==wc)return yp(e,e.avail_out===0?GB:Md);const r=n.last_flush;if(n.last_flush=t,n.pending!==0){if(Qo(e),e.avail_out===0)return n.last_flush=-1,Li}else if(e.avail_in===0&&JO(t)<=JO(r)&&t!==wc)return yp(e,GB);if(n.status===f0&&e.avail_in!==0)return yp(e,GB);if(n.status===Iv&&n.wrap===0&&(n.status=vp),n.status===Iv){let s=nS+(n.w_bits-8<<4)<<8,i=-1;if(n.strategy>=_1||n.level<2?i=0:n.level<6?i=1:n.level===6?i=2:i=3,s|=i<<6,n.strstart!==0&&(s|=rRe),s+=31-s%31,Gy(n,s),n.strstart!==0&&(Gy(n,e.adler>>>16),Gy(n,e.adler&65535)),e.adler=1,n.status=vp,Qo(e),n.pending!==0)return n.last_flush=-1,Li}if(n.status===DF){if(e.adler=0,mr(n,31),mr(n,139),mr(n,8),n.gzhead)mr(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),mr(n,n.gzhead.time&255),mr(n,n.gzhead.time>>8&255),mr(n,n.gzhead.time>>16&255),mr(n,n.gzhead.time>>24&255),mr(n,n.level===9?2:n.strategy>=_1||n.level<2?4:0),mr(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(mr(n,n.gzhead.extra.length&255),mr(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Si(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=pI;else if(mr(n,0),mr(n,0),mr(n,0),mr(n,0),mr(n,0),mr(n,n.level===9?2:n.strategy>=_1||n.level<2?4:0),mr(n,sRe),n.status=vp,Qo(e),n.pending!==0)return n.last_flush=-1,Li}if(n.status===pI){if(n.gzhead.extra){let s=n.pending,i=(n.gzhead.extra.length&65535)-n.gzindex;for(;n.pending+i>n.pending_buf_size;){let c=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+c),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>s&&(e.adler=Si(e.adler,n.pending_buf,n.pending-s,s)),n.gzindex+=c,Qo(e),n.pending!==0)return n.last_flush=-1,Li;s=0,i-=c}let o=new Uint8Array(n.gzhead.extra);n.pending_buf.set(o.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending+=i,n.gzhead.hcrc&&n.pending>s&&(e.adler=Si(e.adler,n.pending_buf,n.pending-s,s)),n.gzindex=0}n.status=mI}if(n.status===mI){if(n.gzhead.name){let s=n.pending,i;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>s&&(e.adler=Si(e.adler,n.pending_buf,n.pending-s,s)),Qo(e),n.pending!==0)return n.last_flush=-1,Li;s=0}n.gzindex<n.gzhead.name.length?i=n.gzhead.name.charCodeAt(n.gzindex++)&255:i=0,mr(n,i)}while(i!==0);n.gzhead.hcrc&&n.pending>s&&(e.adler=Si(e.adler,n.pending_buf,n.pending-s,s)),n.gzindex=0}n.status=gI}if(n.status===gI){if(n.gzhead.comment){let s=n.pending,i;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>s&&(e.adler=Si(e.adler,n.pending_buf,n.pending-s,s)),Qo(e),n.pending!==0)return n.last_flush=-1,Li;s=0}n.gzindex<n.gzhead.comment.length?i=n.gzhead.comment.charCodeAt(n.gzindex++)&255:i=0,mr(n,i)}while(i!==0);n.gzhead.hcrc&&n.pending>s&&(e.adler=Si(e.adler,n.pending_buf,n.pending-s,s))}n.status=vI}if(n.status===vI){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Qo(e),n.pending!==0))return n.last_flush=-1,Li;mr(n,e.adler&255),mr(n,e.adler>>8&255),e.adler=0}if(n.status=vp,Qo(e),n.pending!==0)return n.last_flush=-1,Li}if(e.avail_in!==0||n.lookahead!==0||t!==HA&&n.status!==f0){let s=n.level===0?JJ(n,t):n.strategy===_1?cRe(n,t):n.strategy===zMe?oRe(n,t):p0[n.level].func(n,t);if((s===cm||s===ry)&&(n.status=f0),s===Qa||s===cm)return e.avail_out===0&&(n.last_flush=-1),Li;if(s===ny&&(t===RMe?MMe(n):t!==YO&&(AI(n,0,0,!1),t===OMe&&(pA(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),Qo(e),e.avail_out===0))return n.last_flush=-1,Li}return t!==wc?Li:n.wrap<=0?XO:(n.wrap===2?(mr(n,e.adler&255),mr(n,e.adler>>8&255),mr(n,e.adler>>16&255),mr(n,e.adler>>24&255),mr(n,e.total_in&255),mr(n,e.total_in>>8&255),mr(n,e.total_in>>16&255),mr(n,e.total_in>>24&255)):(Gy(n,e.adler>>>16),Gy(n,e.adler&65535)),Qo(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?Li:XO)},fRe=e=>{if(Hw(e))return Md;const t=e.state.status;return e.state=null,t===vp?yp(e,QMe):Li},pRe=(e,t)=>{let n=t.length;if(Hw(e))return Md;const r=e.state,s=r.wrap;if(s===2||s===1&&r.status!==Iv||r.lookahead)return Md;if(s===1&&(e.adler=Zx(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){s===0&&(pA(r.head),r.strstart=0,r.block_start=0,r.insert=0);let l=new Uint8Array(r.w_size);l.set(t.subarray(n-r.w_size,n),0),t=l,n=r.w_size}const i=e.avail_in,o=e.next_in,c=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Pv(r);r.lookahead>=tr;){let l=r.strstart,d=r.lookahead-(tr-1);do r.ins_h=$A(r,r.ins_h,r.window[l+tr-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++;while(--d);r.strstart=l,r.lookahead=tr-1,Pv(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=tr-1,r.match_available=0,e.next_in=o,e.input=c,e.avail_in=i,r.wrap=s,Li};var mRe=hRe,gRe=tZ,vRe=eZ,yRe=ZJ,xRe=uRe,wRe=ARe,bRe=fRe,CRe=pRe,jRe="pako deflate (from Nodeca project)",G0={deflateInit:mRe,deflateInit2:gRe,deflateReset:vRe,deflateResetKeep:yRe,deflateSetHeader:xRe,deflate:wRe,deflateEnd:bRe,deflateSetDictionary:CRe,deflateInfo:jRe};const kRe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var SRe=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)kRe(n,r)&&(e[r]=n[r])}}return e},NRe=e=>{let t=0;for(let r=0,s=e.length;r<s;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,s=0,i=e.length;r<i;r++){let o=e[r];n.set(o,s),s+=o.length}return n},rS={assign:SRe,flattenChunks:NRe};let nZ=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{nZ=!1}const ew=new Uint8Array(256);for(let e=0;e<256;e++)ew[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;ew[254]=ew[254]=1;var BRe=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,r,s,i,o=e.length,c=0;for(s=0;s<o;s++)n=e.charCodeAt(s),(n&64512)===55296&&s+1<o&&(r=e.charCodeAt(s+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),s++)),c+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(c),i=0,s=0;i<c;s++)n=e.charCodeAt(s),(n&64512)===55296&&s+1<o&&(r=e.charCodeAt(s+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),s++)),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|n&63):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|n&63):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|n&63);return t};const ERe=(e,t)=>{if(t<65534&&e.subarray&&nZ)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n};var _Re=(e,t)=>{const n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let r,s;const i=new Array(n*2);for(s=0,r=0;r<n;){let o=e[r++];if(o<128){i[s++]=o;continue}let c=ew[o];if(c>4){i[s++]=65533,r+=c-1;continue}for(o&=c===2?31:c===3?15:7;c>1&&r<n;)o=o<<6|e[r++]&63,c--;if(c>1){i[s++]=65533;continue}o<65536?i[s++]=o:(o-=65536,i[s++]=55296|o>>10&1023,i[s++]=56320|o&1023)}return ERe(i,s)},IRe=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+ew[e[n]]>t?n:t},tw={string2buf:BRe,buf2string:_Re,utf8border:IRe};function PRe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var rZ=PRe;const sZ=Object.prototype.toString,{Z_NO_FLUSH:TRe,Z_SYNC_FLUSH:FRe,Z_FULL_FLUSH:DRe,Z_FINISH:URe,Z_OK:mj,Z_STREAM_END:LRe,Z_DEFAULT_COMPRESSION:MRe,Z_DEFAULT_STRATEGY:RRe,Z_DEFLATED:ORe}=Qw;function UF(e){this.options=rS.assign({level:MRe,method:ORe,chunkSize:16384,windowBits:15,memLevel:8,strategy:RRe},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new rZ,this.strm.avail_out=0;let n=G0.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==mj)throw new Error(_v[n]);if(t.header&&G0.deflateSetHeader(this.strm,t.header),t.dictionary){let r;if(typeof t.dictionary=="string"?r=tw.string2buf(t.dictionary):sZ.call(t.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(t.dictionary):r=t.dictionary,n=G0.deflateSetDictionary(this.strm,r),n!==mj)throw new Error(_v[n]);this._dict_set=!0}}UF.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let s,i;if(this.ended)return!1;for(t===~~t?i=t:i=t===!0?URe:TRe,typeof e=="string"?n.input=tw.string2buf(e):sZ.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(i===FRe||i===DRe)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(s=G0.deflate(n,i),s===LRe)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),s=G0.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===mj;if(n.avail_out===0){this.onData(n.output);continue}if(i>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};UF.prototype.onData=function(e){this.chunks.push(e)};UF.prototype.onEnd=function(e){e===mj&&(this.result=rS.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};const I1=16209,QRe=16191;var HRe=function(t,n){let r,s,i,o,c,l,d,u,h,A,f,m,g,b,y,j,x,C,S,_,N,L,P,F;const I=t.state;r=t.next_in,P=t.input,s=r+(t.avail_in-5),i=t.next_out,F=t.output,o=i-(n-t.avail_out),c=i+(t.avail_out-257),l=I.dmax,d=I.wsize,u=I.whave,h=I.wnext,A=I.window,f=I.hold,m=I.bits,g=I.lencode,b=I.distcode,y=(1<<I.lenbits)-1,j=(1<<I.distbits)-1;e:do{m<15&&(f+=P[r++]<<m,m+=8,f+=P[r++]<<m,m+=8),x=g[f&y];t:for(;;){if(C=x>>>24,f>>>=C,m-=C,C=x>>>16&255,C===0)F[i++]=x&65535;else if(C&16){S=x&65535,C&=15,C&&(m<C&&(f+=P[r++]<<m,m+=8),S+=f&(1<<C)-1,f>>>=C,m-=C),m<15&&(f+=P[r++]<<m,m+=8,f+=P[r++]<<m,m+=8),x=b[f&j];n:for(;;){if(C=x>>>24,f>>>=C,m-=C,C=x>>>16&255,C&16){if(_=x&65535,C&=15,m<C&&(f+=P[r++]<<m,m+=8,m<C&&(f+=P[r++]<<m,m+=8)),_+=f&(1<<C)-1,_>l){t.msg="invalid distance too far back",I.mode=I1;break e}if(f>>>=C,m-=C,C=i-o,_>C){if(C=_-C,C>u&&I.sane){t.msg="invalid distance too far back",I.mode=I1;break e}if(N=0,L=A,h===0){if(N+=d-C,C<S){S-=C;do F[i++]=A[N++];while(--C);N=i-_,L=F}}else if(h<C){if(N+=d+h-C,C-=h,C<S){S-=C;do F[i++]=A[N++];while(--C);if(N=0,h<S){C=h,S-=C;do F[i++]=A[N++];while(--C);N=i-_,L=F}}}else if(N+=h-C,C<S){S-=C;do F[i++]=A[N++];while(--C);N=i-_,L=F}for(;S>2;)F[i++]=L[N++],F[i++]=L[N++],F[i++]=L[N++],S-=3;S&&(F[i++]=L[N++],S>1&&(F[i++]=L[N++]))}else{N=i-_;do F[i++]=F[N++],F[i++]=F[N++],F[i++]=F[N++],S-=3;while(S>2);S&&(F[i++]=F[N++],S>1&&(F[i++]=F[N++]))}}else if(C&64){t.msg="invalid distance code",I.mode=I1;break e}else{x=b[(x&65535)+(f&(1<<C)-1)];continue n}break}}else if(C&64)if(C&32){I.mode=QRe;break e}else{t.msg="invalid literal/length code",I.mode=I1;break e}else{x=g[(x&65535)+(f&(1<<C)-1)];continue t}break}}while(r<s&&i<c);S=m>>3,r-=S,m-=S<<3,f&=(1<<m)-1,t.next_in=r,t.next_out=i,t.avail_in=r<s?5+(s-r):5-(r-s),t.avail_out=i<c?257+(c-i):257-(i-c),I.hold=f,I.bits=m};const Wm=15,ZO=852,e6=592,t6=0,XB=1,n6=2,$Re=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),zRe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),VRe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),qRe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),KRe=(e,t,n,r,s,i,o,c)=>{const l=c.bits;let d=0,u=0,h=0,A=0,f=0,m=0,g=0,b=0,y=0,j=0,x,C,S,_,N,L=null,P;const F=new Uint16Array(Wm+1),I=new Uint16Array(Wm+1);let T=null,Q,D,M;for(d=0;d<=Wm;d++)F[d]=0;for(u=0;u<r;u++)F[t[n+u]]++;for(f=l,A=Wm;A>=1&&F[A]===0;A--);if(f>A&&(f=A),A===0)return s[i++]=1<<24|64<<16|0,s[i++]=1<<24|64<<16|0,c.bits=1,0;for(h=1;h<A&&F[h]===0;h++);for(f<h&&(f=h),b=1,d=1;d<=Wm;d++)if(b<<=1,b-=F[d],b<0)return-1;if(b>0&&(e===t6||A!==1))return-1;for(I[1]=0,d=1;d<Wm;d++)I[d+1]=I[d]+F[d];for(u=0;u<r;u++)t[n+u]!==0&&(o[I[t[n+u]]++]=u);if(e===t6?(L=T=o,P=20):e===XB?(L=$Re,T=zRe,P=257):(L=VRe,T=qRe,P=0),j=0,u=0,d=h,N=i,m=f,g=0,S=-1,y=1<<f,_=y-1,e===XB&&y>ZO||e===n6&&y>e6)return 1;for(;;){Q=d-g,o[u]+1<P?(D=0,M=o[u]):o[u]>=P?(D=T[o[u]-P],M=L[o[u]-P]):(D=96,M=0),x=1<<d-g,C=1<<m,h=C;do C-=x,s[N+(j>>g)+C]=Q<<24|D<<16|M|0;while(C!==0);for(x=1<<d-1;j&x;)x>>=1;if(x!==0?(j&=x-1,j+=x):j=0,u++,--F[d]===0){if(d===A)break;d=t[n+o[u]]}if(d>f&&(j&_)!==S){for(g===0&&(g=f),N+=h,m=d-g,b=1<<m;m+g<A&&(b-=F[m+g],!(b<=0));)m++,b<<=1;if(y+=1<<m,e===XB&&y>ZO||e===n6&&y>e6)return 1;S=j&_,s[S]=f<<24|m<<16|N-i|0}}return j!==0&&(s[N+j]=d-g<<24|64<<16|0),c.bits=f,0};var Y0=KRe;const WRe=0,iZ=1,aZ=2,{Z_FINISH:r6,Z_BLOCK:GRe,Z_TREES:P1,Z_OK:lm,Z_STREAM_END:YRe,Z_NEED_DICT:XRe,Z_STREAM_ERROR:Fc,Z_DATA_ERROR:oZ,Z_MEM_ERROR:cZ,Z_BUF_ERROR:JRe,Z_DEFLATED:s6}=Qw,sS=16180,i6=16181,a6=16182,o6=16183,c6=16184,l6=16185,d6=16186,u6=16187,h6=16188,A6=16189,gj=16190,ju=16191,JB=16192,f6=16193,ZB=16194,p6=16195,m6=16196,g6=16197,v6=16198,T1=16199,F1=16200,y6=16201,x6=16202,w6=16203,b6=16204,C6=16205,eE=16206,j6=16207,k6=16208,as=16209,lZ=16210,dZ=16211,ZRe=852,eOe=592,tOe=15,nOe=tOe,S6=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function rOe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const gm=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<sS||t.mode>dZ?1:0},uZ=e=>{if(gm(e))return Fc;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=sS,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(ZRe),t.distcode=t.distdyn=new Int32Array(eOe),t.sane=1,t.back=-1,lm},hZ=e=>{if(gm(e))return Fc;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,uZ(e)},AZ=(e,t)=>{let n;if(gm(e))return Fc;const r=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Fc:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,hZ(e))},fZ=(e,t)=>{if(!e)return Fc;const n=new rOe;e.state=n,n.strm=e,n.window=null,n.mode=sS;const r=AZ(e,t);return r!==lm&&(e.state=null),r},sOe=e=>fZ(e,nOe);let N6=!0,tE,nE;const iOe=e=>{if(N6){tE=new Int32Array(512),nE=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Y0(iZ,e.lens,0,288,tE,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Y0(aZ,e.lens,0,32,nE,0,e.work,{bits:5}),N6=!1}e.lencode=tE,e.lenbits=9,e.distcode=nE,e.distbits=5},pZ=(e,t,n,r)=>{let s;const i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(t.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>r&&(s=r),i.window.set(t.subarray(n-r,n-r+s),i.wnext),r-=s,r?(i.window.set(t.subarray(n-r,n),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0},aOe=(e,t)=>{let n,r,s,i,o,c,l,d,u,h,A,f,m,g,b=0,y,j,x,C,S,_,N,L;const P=new Uint8Array(4);let F,I;const T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(gm(e)||!e.output||!e.input&&e.avail_in!==0)return Fc;n=e.state,n.mode===ju&&(n.mode=JB),o=e.next_out,s=e.output,l=e.avail_out,i=e.next_in,r=e.input,c=e.avail_in,d=n.hold,u=n.bits,h=c,A=l,L=lm;e:for(;;)switch(n.mode){case sS:if(n.wrap===0){n.mode=JB;break}for(;u<16;){if(c===0)break e;c--,d+=r[i++]<<u,u+=8}if(n.wrap&2&&d===35615){n.wbits===0&&(n.wbits=15),n.check=0,P[0]=d&255,P[1]=d>>>8&255,n.check=Si(n.check,P,2,0),d=0,u=0,n.mode=i6;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((d&255)<<8)+(d>>8))%31){e.msg="incorrect header check",n.mode=as;break}if((d&15)!==s6){e.msg="unknown compression method",n.mode=as;break}if(d>>>=4,u-=4,N=(d&15)+8,n.wbits===0&&(n.wbits=N),N>15||N>n.wbits){e.msg="invalid window size",n.mode=as;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=d&512?A6:ju,d=0,u=0;break;case i6:for(;u<16;){if(c===0)break e;c--,d+=r[i++]<<u,u+=8}if(n.flags=d,(n.flags&255)!==s6){e.msg="unknown compression method",n.mode=as;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=as;break}n.head&&(n.head.text=d>>8&1),n.flags&512&&n.wrap&4&&(P[0]=d&255,P[1]=d>>>8&255,n.check=Si(n.check,P,2,0)),d=0,u=0,n.mode=a6;case a6:for(;u<32;){if(c===0)break e;c--,d+=r[i++]<<u,u+=8}n.head&&(n.head.time=d),n.flags&512&&n.wrap&4&&(P[0]=d&255,P[1]=d>>>8&255,P[2]=d>>>16&255,P[3]=d>>>24&255,n.check=Si(n.check,P,4,0)),d=0,u=0,n.mode=o6;case o6:for(;u<16;){if(c===0)break e;c--,d+=r[i++]<<u,u+=8}n.head&&(n.head.xflags=d&255,n.head.os=d>>8),n.flags&512&&n.wrap&4&&(P[0]=d&255,P[1]=d>>>8&255,n.check=Si(n.check,P,2,0)),d=0,u=0,n.mode=c6;case c6:if(n.flags&1024){for(;u<16;){if(c===0)break e;c--,d+=r[i++]<<u,u+=8}n.length=d,n.head&&(n.head.extra_len=d),n.flags&512&&n.wrap&4&&(P[0]=d&255,P[1]=d>>>8&255,n.check=Si(n.check,P,2,0)),d=0,u=0}else n.head&&(n.head.extra=null);n.mode=l6;case l6:if(n.flags&1024&&(f=n.length,f>c&&(f=c),f&&(n.head&&(N=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(i,i+f),N)),n.flags&512&&n.wrap&4&&(n.check=Si(n.check,r,f,i)),c-=f,i+=f,n.length-=f),n.length))break e;n.length=0,n.mode=d6;case d6:if(n.flags&2048){if(c===0)break e;f=0;do N=r[i+f++],n.head&&N&&n.length<65536&&(n.head.name+=String.fromCharCode(N));while(N&&f<c);if(n.flags&512&&n.wrap&4&&(n.check=Si(n.check,r,f,i)),c-=f,i+=f,N)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=u6;case u6:if(n.flags&4096){if(c===0)break e;f=0;do N=r[i+f++],n.head&&N&&n.length<65536&&(n.head.comment+=String.fromCharCode(N));while(N&&f<c);if(n.flags&512&&n.wrap&4&&(n.check=Si(n.check,r,f,i)),c-=f,i+=f,N)break e}else n.head&&(n.head.comment=null);n.mode=h6;case h6:if(n.flags&512){for(;u<16;){if(c===0)break e;c--,d+=r[i++]<<u,u+=8}if(n.wrap&4&&d!==(n.check&65535)){e.msg="header crc mismatch",n.mode=as;break}d=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=ju;break;case A6:for(;u<32;){if(c===0)break e;c--,d+=r[i++]<<u,u+=8}e.adler=n.check=S6(d),d=0,u=0,n.mode=gj;case gj:if(n.havedict===0)return e.next_out=o,e.avail_out=l,e.next_in=i,e.avail_in=c,n.hold=d,n.bits=u,XRe;e.adler=n.check=1,n.mode=ju;case ju:if(t===GRe||t===P1)break e;case JB:if(n.last){d>>>=u&7,u-=u&7,n.mode=eE;break}for(;u<3;){if(c===0)break e;c--,d+=r[i++]<<u,u+=8}switch(n.last=d&1,d>>>=1,u-=1,d&3){case 0:n.mode=f6;break;case 1:if(iOe(n),n.mode=T1,t===P1){d>>>=2,u-=2;break e}break;case 2:n.mode=m6;break;case 3:e.msg="invalid block type",n.mode=as}d>>>=2,u-=2;break;case f6:for(d>>>=u&7,u-=u&7;u<32;){if(c===0)break e;c--,d+=r[i++]<<u,u+=8}if((d&65535)!==(d>>>16^65535)){e.msg="invalid stored block lengths",n.mode=as;break}if(n.length=d&65535,d=0,u=0,n.mode=ZB,t===P1)break e;case ZB:n.mode=p6;case p6:if(f=n.length,f){if(f>c&&(f=c),f>l&&(f=l),f===0)break e;s.set(r.subarray(i,i+f),o),c-=f,i+=f,l-=f,o+=f,n.length-=f;break}n.mode=ju;break;case m6:for(;u<14;){if(c===0)break e;c--,d+=r[i++]<<u,u+=8}if(n.nlen=(d&31)+257,d>>>=5,u-=5,n.ndist=(d&31)+1,d>>>=5,u-=5,n.ncode=(d&15)+4,d>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=as;break}n.have=0,n.mode=g6;case g6:for(;n.have<n.ncode;){for(;u<3;){if(c===0)break e;c--,d+=r[i++]<<u,u+=8}n.lens[T[n.have++]]=d&7,d>>>=3,u-=3}for(;n.have<19;)n.lens[T[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,F={bits:n.lenbits},L=Y0(WRe,n.lens,0,19,n.lencode,0,n.work,F),n.lenbits=F.bits,L){e.msg="invalid code lengths set",n.mode=as;break}n.have=0,n.mode=v6;case v6:for(;n.have<n.nlen+n.ndist;){for(;b=n.lencode[d&(1<<n.lenbits)-1],y=b>>>24,j=b>>>16&255,x=b&65535,!(y<=u);){if(c===0)break e;c--,d+=r[i++]<<u,u+=8}if(x<16)d>>>=y,u-=y,n.lens[n.have++]=x;else{if(x===16){for(I=y+2;u<I;){if(c===0)break e;c--,d+=r[i++]<<u,u+=8}if(d>>>=y,u-=y,n.have===0){e.msg="invalid bit length repeat",n.mode=as;break}N=n.lens[n.have-1],f=3+(d&3),d>>>=2,u-=2}else if(x===17){for(I=y+3;u<I;){if(c===0)break e;c--,d+=r[i++]<<u,u+=8}d>>>=y,u-=y,N=0,f=3+(d&7),d>>>=3,u-=3}else{for(I=y+7;u<I;){if(c===0)break e;c--,d+=r[i++]<<u,u+=8}d>>>=y,u-=y,N=0,f=11+(d&127),d>>>=7,u-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=as;break}for(;f--;)n.lens[n.have++]=N}}if(n.mode===as)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=as;break}if(n.lenbits=9,F={bits:n.lenbits},L=Y0(iZ,n.lens,0,n.nlen,n.lencode,0,n.work,F),n.lenbits=F.bits,L){e.msg="invalid literal/lengths set",n.mode=as;break}if(n.distbits=6,n.distcode=n.distdyn,F={bits:n.distbits},L=Y0(aZ,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,F),n.distbits=F.bits,L){e.msg="invalid distances set",n.mode=as;break}if(n.mode=T1,t===P1)break e;case T1:n.mode=F1;case F1:if(c>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=i,e.avail_in=c,n.hold=d,n.bits=u,HRe(e,A),o=e.next_out,s=e.output,l=e.avail_out,i=e.next_in,r=e.input,c=e.avail_in,d=n.hold,u=n.bits,n.mode===ju&&(n.back=-1);break}for(n.back=0;b=n.lencode[d&(1<<n.lenbits)-1],y=b>>>24,j=b>>>16&255,x=b&65535,!(y<=u);){if(c===0)break e;c--,d+=r[i++]<<u,u+=8}if(j&&!(j&240)){for(C=y,S=j,_=x;b=n.lencode[_+((d&(1<<C+S)-1)>>C)],y=b>>>24,j=b>>>16&255,x=b&65535,!(C+y<=u);){if(c===0)break e;c--,d+=r[i++]<<u,u+=8}d>>>=C,u-=C,n.back+=C}if(d>>>=y,u-=y,n.back+=y,n.length=x,j===0){n.mode=C6;break}if(j&32){n.back=-1,n.mode=ju;break}if(j&64){e.msg="invalid literal/length code",n.mode=as;break}n.extra=j&15,n.mode=y6;case y6:if(n.extra){for(I=n.extra;u<I;){if(c===0)break e;c--,d+=r[i++]<<u,u+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=x6;case x6:for(;b=n.distcode[d&(1<<n.distbits)-1],y=b>>>24,j=b>>>16&255,x=b&65535,!(y<=u);){if(c===0)break e;c--,d+=r[i++]<<u,u+=8}if(!(j&240)){for(C=y,S=j,_=x;b=n.distcode[_+((d&(1<<C+S)-1)>>C)],y=b>>>24,j=b>>>16&255,x=b&65535,!(C+y<=u);){if(c===0)break e;c--,d+=r[i++]<<u,u+=8}d>>>=C,u-=C,n.back+=C}if(d>>>=y,u-=y,n.back+=y,j&64){e.msg="invalid distance code",n.mode=as;break}n.offset=x,n.extra=j&15,n.mode=w6;case w6:if(n.extra){for(I=n.extra;u<I;){if(c===0)break e;c--,d+=r[i++]<<u,u+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=as;break}n.mode=b6;case b6:if(l===0)break e;if(f=A-l,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=as;break}f>n.wnext?(f-=n.wnext,m=n.wsize-f):m=n.wnext-f,f>n.length&&(f=n.length),g=n.window}else g=s,m=o-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do s[o++]=g[m++];while(--f);n.length===0&&(n.mode=F1);break;case C6:if(l===0)break e;s[o++]=n.length,l--,n.mode=F1;break;case eE:if(n.wrap){for(;u<32;){if(c===0)break e;c--,d|=r[i++]<<u,u+=8}if(A-=l,e.total_out+=A,n.total+=A,n.wrap&4&&A&&(e.adler=n.check=n.flags?Si(n.check,s,A,o-A):Zx(n.check,s,A,o-A)),A=l,n.wrap&4&&(n.flags?d:S6(d))!==n.check){e.msg="incorrect data check",n.mode=as;break}d=0,u=0}n.mode=j6;case j6:if(n.wrap&&n.flags){for(;u<32;){if(c===0)break e;c--,d+=r[i++]<<u,u+=8}if(n.wrap&4&&d!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=as;break}d=0,u=0}n.mode=k6;case k6:L=YRe;break e;case as:L=oZ;break e;case lZ:return cZ;case dZ:default:return Fc}return e.next_out=o,e.avail_out=l,e.next_in=i,e.avail_in=c,n.hold=d,n.bits=u,(n.wsize||A!==e.avail_out&&n.mode<as&&(n.mode<eE||t!==r6))&&pZ(e,e.output,e.next_out,A-e.avail_out),h-=e.avail_in,A-=e.avail_out,e.total_in+=h,e.total_out+=A,n.total+=A,n.wrap&4&&A&&(e.adler=n.check=n.flags?Si(n.check,s,A,e.next_out-A):Zx(n.check,s,A,e.next_out-A)),e.data_type=n.bits+(n.last?64:0)+(n.mode===ju?128:0)+(n.mode===T1||n.mode===ZB?256:0),(h===0&&A===0||t===r6)&&L===lm&&(L=JRe),L},oOe=e=>{if(gm(e))return Fc;let t=e.state;return t.window&&(t.window=null),e.state=null,lm},cOe=(e,t)=>{if(gm(e))return Fc;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,lm):Fc},lOe=(e,t)=>{const n=t.length;let r,s,i;return gm(e)||(r=e.state,r.wrap!==0&&r.mode!==gj)?Fc:r.mode===gj&&(s=1,s=Zx(s,t,n,0),s!==r.check)?oZ:(i=pZ(e,t,n,n),i?(r.mode=lZ,cZ):(r.havedict=1,lm))};var dOe=hZ,uOe=AZ,hOe=uZ,AOe=sOe,fOe=fZ,pOe=aOe,mOe=oOe,gOe=cOe,vOe=lOe,yOe="pako inflate (from Nodeca project)",Du={inflateReset:dOe,inflateReset2:uOe,inflateResetKeep:hOe,inflateInit:AOe,inflateInit2:fOe,inflate:pOe,inflateEnd:mOe,inflateGetHeader:gOe,inflateSetDictionary:vOe,inflateInfo:yOe};function xOe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var wOe=xOe;const mZ=Object.prototype.toString,{Z_NO_FLUSH:bOe,Z_FINISH:COe,Z_OK:nw,Z_STREAM_END:rE,Z_NEED_DICT:sE,Z_STREAM_ERROR:jOe,Z_DATA_ERROR:B6,Z_MEM_ERROR:kOe}=Qw;function $w(e){this.options=rS.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new rZ,this.strm.avail_out=0;let n=Du.inflateInit2(this.strm,t.windowBits);if(n!==nw)throw new Error(_v[n]);if(this.header=new wOe,Du.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=tw.string2buf(t.dictionary):mZ.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Du.inflateSetDictionary(this.strm,t.dictionary),n!==nw)))throw new Error(_v[n])}$w.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,s=this.options.dictionary;let i,o,c;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?COe:bOe,mZ.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),i=Du.inflate(n,o),i===sE&&s&&(i=Du.inflateSetDictionary(n,s),i===nw?i=Du.inflate(n,o):i===B6&&(i=sE));n.avail_in>0&&i===rE&&n.state.wrap>0&&e[n.next_in]!==0;)Du.inflateReset(n),i=Du.inflate(n,o);switch(i){case jOe:case B6:case sE:case kOe:return this.onEnd(i),this.ended=!0,!1}if(c=n.avail_out,n.next_out&&(n.avail_out===0||i===rE))if(this.options.to==="string"){let l=tw.utf8border(n.output,n.next_out),d=n.next_out-l,u=tw.buf2string(n.output,l);n.next_out=d,n.avail_out=r-d,d&&n.output.set(n.output.subarray(l,l+d),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(i===nw&&c===0)){if(i===rE)return i=Du.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};$w.prototype.onData=function(e){this.chunks.push(e)};$w.prototype.onEnd=function(e){e===nw&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=rS.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function LF(e,t){const n=new $w(t);if(n.push(e),n.err)throw n.msg||_v[n.err];return n.result}function SOe(e,t){return t=t||{},t.raw=!0,LF(e,t)}var NOe=$w,BOe=LF,EOe=SOe,_Oe=LF,IOe=Qw,POe={Inflate:NOe,inflate:BOe,inflateRaw:EOe,ungzip:_Oe,constants:IOe};const{Inflate:TOe,inflate:FOe,inflateRaw:mqe,ungzip:gqe}=POe;var E6=TOe,DOe=FOe;const gZ=[];for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t&1?t=3988292384^t>>>1:t=t>>>1;gZ[e]=t}const _6=4294967295;function UOe(e,t,n){let r=e;for(let s=0;s<n;s++)r=gZ[(r^t[s])&255]^r>>>8;return r}function LOe(e,t){return(UOe(_6,e,t)^_6)>>>0}function I6(e,t,n){const r=e.readUint32(),s=LOe(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(s!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${s}`)}function vZ(e,t,n){for(let r=0;r<n;r++)t[r]=e[r]}function yZ(e,t,n,r){let s=0;for(;s<r;s++)t[s]=e[s];for(;s<n;s++)t[s]=e[s]+t[s-r]&255}function xZ(e,t,n,r){let s=0;if(n.length===0)for(;s<r;s++)t[s]=e[s];else for(;s<r;s++)t[s]=e[s]+n[s]&255}function wZ(e,t,n,r,s){let i=0;if(n.length===0){for(;i<s;i++)t[i]=e[i];for(;i<r;i++)t[i]=e[i]+(t[i-s]>>1)&255}else{for(;i<s;i++)t[i]=e[i]+(n[i]>>1)&255;for(;i<r;i++)t[i]=e[i]+(t[i-s]+n[i]>>1)&255}}function bZ(e,t,n,r,s){let i=0;if(n.length===0){for(;i<s;i++)t[i]=e[i];for(;i<r;i++)t[i]=e[i]+t[i-s]&255}else{for(;i<s;i++)t[i]=e[i]+n[i]&255;for(;i<r;i++)t[i]=e[i]+MOe(t[i-s],n[i],n[i-s])&255}}function MOe(e,t,n){const r=e+t-n,s=Math.abs(r-e),i=Math.abs(r-t),o=Math.abs(r-n);return s<=i&&s<=o?e:i<=o?t:n}function ROe(e,t,n,r,s,i){switch(e){case 0:vZ(t,n,s);break;case 1:yZ(t,n,s,i);break;case 2:xZ(t,n,r,s);break;case 3:wZ(t,n,r,s,i);break;case 4:bZ(t,n,r,s,i);break;default:throw new Error(`Unsupported filter: ${e}`)}}const OOe=new Uint16Array([255]),QOe=new Uint8Array(OOe.buffer),HOe=QOe[0]===255;function $Oe(e){const{data:t,width:n,height:r,channels:s,depth:i}=e,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],c=Math.ceil(i/8)*s,l=new Uint8Array(r*n*c);let d=0;for(let u=0;u<7;u++){const h=o[u],A=Math.ceil((n-h.x)/h.xStep),f=Math.ceil((r-h.y)/h.yStep);if(A<=0||f<=0)continue;const m=A*c,g=new Uint8Array(m);for(let b=0;b<f;b++){const y=t[d++],j=t.subarray(d,d+m);d+=m;const x=new Uint8Array(m);ROe(y,j,x,g,m,c),g.set(x);for(let C=0;C<A;C++){const S=h.x+C*h.xStep,_=h.y+b*h.yStep;if(!(S>=n||_>=r))for(let N=0;N<c;N++)l[(_*n+S)*c+N]=x[C*c+N]}}}if(i===16){const u=new Uint16Array(l.buffer);if(HOe)for(let h=0;h<u.length;h++)u[h]=zOe(u[h]);return u}else return l}function zOe(e){return(e&255)<<8|e>>8&255}const VOe=new Uint16Array([255]),qOe=new Uint8Array(VOe.buffer),KOe=qOe[0]===255,WOe=new Uint8Array(0);function P6(e){const{data:t,width:n,height:r,channels:s,depth:i}=e,o=Math.ceil(i/8)*s,c=Math.ceil(i/8*s*n),l=new Uint8Array(r*c);let d=WOe,u=0,h,A;for(let f=0;f<r;f++){switch(h=t.subarray(u+1,u+1+c),A=l.subarray(f*c,(f+1)*c),t[u]){case 0:vZ(h,A,c);break;case 1:yZ(h,A,c,o);break;case 2:xZ(h,A,d,c);break;case 3:wZ(h,A,d,c,o);break;case 4:bZ(h,A,d,c,o);break;default:throw new Error(`Unsupported filter: ${t[u]}`)}d=A,u+=c+1}if(i===16){const f=new Uint16Array(l.buffer);if(KOe)for(let m=0;m<f.length;m++)f[m]=GOe(f[m]);return f}else return l}function GOe(e){return(e&255)<<8|e>>8&255}const V2=Uint8Array.of(137,80,78,71,13,10,26,10);function T6(e){if(!YOe(e.readBytes(V2.length)))throw new Error("wrong PNG signature")}function YOe(e){if(e.length<V2.length)return!1;for(let t=0;t<V2.length;t++)if(e[t]!==V2[t])return!1;return!0}const XOe="tEXt",JOe=0,CZ=new TextDecoder("latin1");function ZOe(e){if(t6e(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const e6e=/^[\u0000-\u00FF]*$/;function t6e(e){if(!e6e.test(e))throw new Error("invalid latin1 text")}function n6e(e,t,n){const r=jZ(t);e[r]=r6e(t,n-r.length-1)}function jZ(e){for(e.mark();e.readByte()!==JOe;);const t=e.offset;e.reset();const n=CZ.decode(e.readBytes(t-e.offset-1));return e.skip(1),ZOe(n),n}function r6e(e,t){return CZ.decode(e.readBytes(t))}const Lo={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},iE={UNKNOWN:-1,DEFLATE:0},F6={UNKNOWN:-1,ADAPTIVE:0},aE={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},D1={NONE:0,BACKGROUND:1,PREVIOUS:2},oE={SOURCE:0,OVER:1};class s6e extends _F{constructor(n,r={}){super(n);Je(this,"_checkCrc");Je(this,"_inflator");Je(this,"_png");Je(this,"_apng");Je(this,"_end");Je(this,"_hasPalette");Je(this,"_palette");Je(this,"_hasTransparency");Je(this,"_transparency");Je(this,"_compressionMethod");Je(this,"_filterMethod");Je(this,"_interlaceMethod");Je(this,"_colorType");Je(this,"_isAnimated");Je(this,"_numberOfFrames");Je(this,"_numberOfPlays");Je(this,"_frames");Je(this,"_writingDataChunks");const{checkCrc:s=!1}=r;this._checkCrc=s,this._inflator=new E6,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=iE.UNKNOWN,this._filterMethod=F6.UNKNOWN,this._interlaceMethod=aE.UNKNOWN,this._colorType=Lo.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(T6(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeChunk(n,r)}return this.decodeImage(),this._png}decodeApng(){for(T6(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(n,r)}return this.decodeApngImage(),this._apng}decodeChunk(n,r){const s=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case XOe:n6e(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-s!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?I6(this,n+4,r):this.skip(4)}decodeApngChunk(n,r){const s=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,r),this.offset=s+n;break}if(this.offset-s!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?I6(this,n+4,r):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=i6e(this.readUint8());const r=this.readUint8();this._colorType=r;let s;switch(r){case Lo.GREYSCALE:s=1;break;case Lo.TRUECOLOUR:s=3;break;case Lo.INDEXED_COLOUR:s=1;break;case Lo.GREYSCALE_ALPHA:s=2;break;case Lo.TRUECOLOUR_ALPHA:s=4;break;case Lo.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==iE.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const r=n/3;this._hasPalette=!0;const s=[];this._palette=s;for(let i=0;i<r;i++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const r=n,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let r=n,s=this.offset+this.byteOffset;if(s+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,s,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case Lo.GREYSCALE:case Lo.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let r=0;r<n/2;r++)this._transparency[r]=this.readUint16();break}case Lo.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let r=0;for(;r<n;r++){const s=this.readByte();this._palette[r].push(s)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case Lo.UNKNOWN:case Lo.GREYSCALE_ALPHA:case Lo.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const r=jZ(this),s=this.readUint8();if(s!==iE.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const i=this.readBytes(n-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:DOe(i)}}decodepHYs(){const n=this.readUint32(),r=this.readUint32(),s=this.readByte();this._png.resolution={x:n,y:r,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const r={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(n);if(s){if(s.data=P6({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)r.data=s.data;else{const i=this._apng.frames.at(n-1);this.disposeFrame(s,i,r),this.addFrameDataToCanvas(r,s)}this._apng.frames.push(r)}}return this._apng}disposeFrame(n,r,s){switch(n.disposeOp){case D1.NONE:break;case D1.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){const c=(i*n.width+o)*this._png.channels;for(let l=0;l<this._png.channels;l++)s.data[c+l]=0}break;case D1.PREVIOUS:s.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,r){const s=1<<this._png.depth,i=(o,c)=>{const l=((o+r.yOffset)*this._png.width+r.xOffset+c)*this._png.channels,d=(o*r.width+c)*this._png.channels;return{index:l,frameIndex:d}};switch(r.blendOp){case oE.SOURCE:for(let o=0;o<r.height;o++)for(let c=0;c<r.width;c++){const{index:l,frameIndex:d}=i(o,c);for(let u=0;u<this._png.channels;u++)n.data[l+u]=r.data[d+u]}break;case oE.OVER:for(let o=0;o<r.height;o++)for(let c=0;c<r.width;c++){const{index:l,frameIndex:d}=i(o,c);for(let u=0;u<this._png.channels;u++){const h=r.data[d+this._png.channels-1]/s,A=u%(this._png.channels-1)===0?1:r.data[d+u],f=Math.floor(h*A+(1-h)*n.data[l+u]);n.data[l+u]+=f}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var r;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?((r=this._frames)==null?void 0:r.at(0)).data:this._inflator.result;if(this._filterMethod!==F6.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===aE.NO_INTERLACE)this._png.data=P6({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===aE.ADAM7)this._png.data=$Oe({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,r=this._frames.at(-1);r?r.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:D1.NONE,blendOp:oE.SOURCE,data:n}),this._inflator=new E6,this._writingDataChunks=!1}}function i6e(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var D6;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(D6||(D6={}));function a6e(e,t){return new s6e(e,t).decode()}var yn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function cE(){yn.console&&typeof yn.console.log=="function"&&yn.console.log.apply(yn.console,arguments)}var Ur={log:cE,warn:function(e){yn.console&&(typeof yn.console.warn=="function"?yn.console.warn.apply(yn.console,arguments):cE.call(null,arguments))},error:function(e){yn.console&&(typeof yn.console.error=="function"?yn.console.error.apply(yn.console,arguments):cE(e))}};function lE(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){rp(r.response,t,n)},r.onerror=function(){Ur.error("could not download file")},r.send()}function U6(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function U1(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var rp=yn.saveAs||((typeof window>"u"?"undefined":Sr(window))!=="object"||window!==yn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=yn.URL||yn.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?U6(s.href)?lE(e,t,n):U1(s,s.target="_blank"):U1(s)):(s.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){U1(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(U6(e))lE(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){U1(r)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:Sr(i)!=="object"&&(Ur.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return lE(e,t,n);var s=e.type==="application/octet-stream",i=/constructor/i.test(yn.HTMLElement)||yn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&i)&&(typeof FileReader>"u"?"undefined":Sr(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var u=c.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},c.readAsDataURL(e)}else{var l=yn.URL||yn.webkitURL,d=l.createObjectURL(e);r?r.location=d:location.href=d,r=null,setTimeout(function(){l.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function kZ(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],r=0;r<n.length;r++){var s=n[r].re,i=n[r].process,o=s.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),l=this.g.toString(16),d=this.b.toString(16);return c.length==1&&(c="0"+c),l.length==1&&(l="0"+l),d.length==1&&(d="0"+d),"#"+c+l+d}}var q2=yn.atob.bind(yn),L6=yn.btoa.bind(yn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function dE(e,t){var n=e[0],r=e[1],s=e[2],i=e[3];n=na(n,r,s,i,t[0],7,-680876936),i=na(i,n,r,s,t[1],12,-389564586),s=na(s,i,n,r,t[2],17,606105819),r=na(r,s,i,n,t[3],22,-1044525330),n=na(n,r,s,i,t[4],7,-176418897),i=na(i,n,r,s,t[5],12,1200080426),s=na(s,i,n,r,t[6],17,-1473231341),r=na(r,s,i,n,t[7],22,-45705983),n=na(n,r,s,i,t[8],7,1770035416),i=na(i,n,r,s,t[9],12,-1958414417),s=na(s,i,n,r,t[10],17,-42063),r=na(r,s,i,n,t[11],22,-1990404162),n=na(n,r,s,i,t[12],7,1804603682),i=na(i,n,r,s,t[13],12,-40341101),s=na(s,i,n,r,t[14],17,-1502002290),n=ra(n,r=na(r,s,i,n,t[15],22,1236535329),s,i,t[1],5,-165796510),i=ra(i,n,r,s,t[6],9,-1069501632),s=ra(s,i,n,r,t[11],14,643717713),r=ra(r,s,i,n,t[0],20,-373897302),n=ra(n,r,s,i,t[5],5,-701558691),i=ra(i,n,r,s,t[10],9,38016083),s=ra(s,i,n,r,t[15],14,-660478335),r=ra(r,s,i,n,t[4],20,-405537848),n=ra(n,r,s,i,t[9],5,568446438),i=ra(i,n,r,s,t[14],9,-1019803690),s=ra(s,i,n,r,t[3],14,-187363961),r=ra(r,s,i,n,t[8],20,1163531501),n=ra(n,r,s,i,t[13],5,-1444681467),i=ra(i,n,r,s,t[2],9,-51403784),s=ra(s,i,n,r,t[7],14,1735328473),n=sa(n,r=ra(r,s,i,n,t[12],20,-1926607734),s,i,t[5],4,-378558),i=sa(i,n,r,s,t[8],11,-2022574463),s=sa(s,i,n,r,t[11],16,1839030562),r=sa(r,s,i,n,t[14],23,-35309556),n=sa(n,r,s,i,t[1],4,-1530992060),i=sa(i,n,r,s,t[4],11,1272893353),s=sa(s,i,n,r,t[7],16,-155497632),r=sa(r,s,i,n,t[10],23,-1094730640),n=sa(n,r,s,i,t[13],4,681279174),i=sa(i,n,r,s,t[0],11,-358537222),s=sa(s,i,n,r,t[3],16,-722521979),r=sa(r,s,i,n,t[6],23,76029189),n=sa(n,r,s,i,t[9],4,-640364487),i=sa(i,n,r,s,t[12],11,-421815835),s=sa(s,i,n,r,t[15],16,530742520),n=ia(n,r=sa(r,s,i,n,t[2],23,-995338651),s,i,t[0],6,-198630844),i=ia(i,n,r,s,t[7],10,1126891415),s=ia(s,i,n,r,t[14],15,-1416354905),r=ia(r,s,i,n,t[5],21,-57434055),n=ia(n,r,s,i,t[12],6,1700485571),i=ia(i,n,r,s,t[3],10,-1894986606),s=ia(s,i,n,r,t[10],15,-1051523),r=ia(r,s,i,n,t[1],21,-2054922799),n=ia(n,r,s,i,t[8],6,1873313359),i=ia(i,n,r,s,t[15],10,-30611744),s=ia(s,i,n,r,t[6],15,-1560198380),r=ia(r,s,i,n,t[13],21,1309151649),n=ia(n,r,s,i,t[4],6,-145523070),i=ia(i,n,r,s,t[11],10,-1120210379),s=ia(s,i,n,r,t[2],15,718787259),r=ia(r,s,i,n,t[9],21,-343485551),e[0]=NA(n,e[0]),e[1]=NA(r,e[1]),e[2]=NA(s,e[2]),e[3]=NA(i,e[3])}function iS(e,t,n,r,s,i){return t=NA(NA(t,e),NA(r,i)),NA(t<<s|t>>>32-s,n)}function na(e,t,n,r,s,i,o){return iS(t&n|~t&r,e,t,s,i,o)}function ra(e,t,n,r,s,i,o){return iS(t&r|n&~r,e,t,s,i,o)}function sa(e,t,n,r,s,i,o){return iS(t^n^r,e,t,s,i,o)}function ia(e,t,n,r,s,i,o){return iS(n^(t|~r),e,t,s,i,o)}function SZ(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)dE(r,o6e(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(dE(r,s),t=0;t<16;t++)s[t]=0;return s[14]=8*n,dE(r,s),r}function o6e(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}var M6="0123456789abcdef".split("");function c6e(e){for(var t="",n=0;n<4;n++)t+=M6[e>>8*n+4&15]+M6[e>>8*n&15];return t}function l6e(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function xI(e){return SZ(e).map(l6e).join("")}var d6e=function(e){for(var t=0;t<e.length;t++)e[t]=c6e(e[t]);return e.join("")}(SZ("hello"))!="5d41402abc4b2a76b9719d911017c592";function NA(e,t){if(d6e){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function wI(e,t){var n,r,s,i;if(e!==n){for(var o=(s=e,i=1+(256/e.length|0),new Array(i+1).join(s)),c=[],l=0;l<256;l++)c[l]=l;var d=0;for(l=0;l<256;l++){var u=c[l];d=(d+u+o.charCodeAt(l))%256,c[l]=c[d],c[d]=u}n=e,r=c}else c=r;var h=t.length,A=0,f=0,m="";for(l=0;l<h;l++)f=(f+(u=c[A=(A+1)%256]))%256,c[A]=c[f],c[f]=u,o=c[(c[A]+c[f])%256],m+=String.fromCharCode(t.charCodeAt(l)^o);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var R6={print:4,modify:8,copy:16,"annot-forms":32};function og(e,t,n,r){this.v=1,this.r=2;var s=192;e.forEach(function(c){if(R6.perm!==void 0)throw new Error("Invalid permission: "+c);s+=R6[c]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^s)),this.encryptionKey=xI(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=wI(this.encryptionKey,this.padding)}function cg(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var s=e.charCodeAt(r);t+=s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?"#"+("0"+s.toString(16)).slice(-2):e[r]}return t}function O6(e){if(Sr(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,s){if(s=s||!1,typeof n!="string"||typeof r!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var i=Math.random().toString(35);return t[n][i]=[r,!!s],i},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var i in t[n]){var o=t[n][i];try{o[0].apply(e,r)}catch(c){yn.console&&Ur.error("jsPDF PubSub Error",c.message,c)}o[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function vj(e){if(!(this instanceof vj))return new vj(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function NZ(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function ip(e,t,n,r,s){if(!(this instanceof ip))return new ip(e,t,n,r,s);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,NZ.call(this,r,s)}function Ig(e,t,n,r,s){if(!(this instanceof Ig))return new Ig(e,t,n,r,s);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,NZ.call(this,r,s)}function tn(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],s=arguments[2],i=arguments[3],o=[],c=1,l=16,d="S",u=null;Sr(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,s=e.format||s,i=e.compress||e.compressPdf||i,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),c=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(l=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,A={},f={internal:{},__private__:{}};f.__private__.PubSub=O6;var m="1.3",g=f.__private__.getPdfVersion=function(){return m};f.__private__.setPdfVersion=function(O){m=O};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return b};var y=f.__private__.getPageFormat=function(O){return b[O]};s=s||"a4";var j="compat",x="advanced",C=j;function S(){this.saveGraphicsState(),ue(new St(pt,0,0,-pt,0,Kl()*pt).toString()+" cm"),this.setFontSize(this.getFontSize()/pt),d="n",C=x}function _(){this.restoreGraphicsState(),d="S",C=j}var N=f.__private__.combineFontStyleAndFontWeight=function(O,te){if(O=="bold"&&te=="normal"||O=="bold"&&te==400||O=="normal"&&te=="italic"||O=="bold"&&te=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return te&&(O=te==400||te==="normal"?O==="italic"?"italic":"normal":te!=700&&te!=="bold"||O!=="normal"?(te==700?"bold":te)+""+O:"bold"),O};f.advancedAPI=function(O){var te=C===j;return te&&S.call(this),typeof O!="function"||(O(this),te&&_.call(this)),this},f.compatAPI=function(O){var te=C===x;return te&&_.call(this),typeof O!="function"||(O(this),te&&S.call(this)),this},f.isAdvancedAPI=function(){return C===x};var L,P=function(O){if(C!==x)throw new Error(O+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},F=f.roundToPrecision=f.__private__.roundToPrecision=function(O,te){var he=t||te;if(isNaN(O)||isNaN(he))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return O.toFixed(he).replace(/0+$/,"")};L=f.hpf=f.__private__.hpf=typeof l=="number"?function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return F(O,l)}:l==="smart"?function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return F(O,O>-1&&O<1?16:5)}:function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return F(O,16)};var I=f.f2=f.__private__.f2=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.f2");return F(O,2)},T=f.__private__.f3=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.f3");return F(O,3)},Q=f.scale=f.__private__.scale=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.scale");return C===j?O*pt:C===x?O:void 0},D=function(O){return Q(function(te){return C===j?Kl()-te:C===x?te:void 0}(O))};f.__private__.setPrecision=f.setPrecision=function(O){typeof parseInt(O,10)=="number"&&(t=parseInt(O,10))};var M,U="00000000000000000000000000000000",H=f.__private__.getFileId=function(){return U},$=f.__private__.setFileId=function(O){return U=O!==void 0&&/^[a-fA-F0-9]{32}$/.test(O)?O.toUpperCase():U.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Wr=new og(u.userPermissions,u.userPassword,u.ownerPassword,U)),U};f.setFileId=function(O){return $(O),this},f.getFileId=function(){return H()};var R=f.__private__.convertDateToPDFDate=function(O){var te=O.getTimezoneOffset(),he=te<0?"+":"-",ye=Math.floor(Math.abs(te/60)),Se=Math.abs(te%60),ze=[he,J(ye),"'",J(Se),"'"].join("");return["D:",O.getFullYear(),J(O.getMonth()+1),J(O.getDate()),J(O.getHours()),J(O.getMinutes()),J(O.getSeconds()),ze].join("")},Y=f.__private__.convertPDFDateToDate=function(O){var te=parseInt(O.substr(2,4),10),he=parseInt(O.substr(6,2),10)-1,ye=parseInt(O.substr(8,2),10),Se=parseInt(O.substr(10,2),10),ze=parseInt(O.substr(12,2),10),tt=parseInt(O.substr(14,2),10);return new Date(te,he,ye,Se,ze,tt,0)},X=f.__private__.setCreationDate=function(O){var te;if(O===void 0&&(O=new Date),O instanceof Date)te=R(O);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(O))throw new Error("Invalid argument passed to jsPDF.setCreationDate");te=O}return M=te},q=f.__private__.getCreationDate=function(O){var te=M;return O==="jsDate"&&(te=Y(M)),te};f.setCreationDate=function(O){return X(O),this},f.getCreationDate=function(O){return q(O)};var K,J=f.__private__.padd2=function(O){return("0"+parseInt(O)).slice(-2)},W=f.__private__.padd2Hex=function(O){return("00"+(O=O.toString())).substr(O.length)},ne=0,ae=[],ce=[],Ae=0,pe=[],be=[],Ne=!1,Pe=ce;f.__private__.setCustomOutputDestination=function(O){Ne=!0,Pe=O};var xe=function(O){Ne||(Pe=O)};f.__private__.resetCustomOutputDestination=function(){Ne=!1,Pe=ce};var ue=f.__private__.out=function(O){return O=O.toString(),Ae+=O.length+1,Pe.push(O),Pe},yt=f.__private__.write=function(O){return ue(arguments.length===1?O.toString():Array.prototype.join.call(arguments," "))},ht=f.__private__.getArrayBuffer=function(O){for(var te=O.length,he=new ArrayBuffer(te),ye=new Uint8Array(he);te--;)ye[te]=O.charCodeAt(te);return he},Ct=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return Ct};var Me=e.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(O){return Me=C===x?O/pt:O,this};var kt,ct=f.__private__.getFontSize=f.getFontSize=function(){return C===j?Me:Me*pt},Nt=e.R2L||!1;f.__private__.setR2L=f.setR2L=function(O){return Nt=O,this},f.__private__.getR2L=f.getR2L=function(){return Nt};var bt,An=f.__private__.setZoomMode=function(O){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(O))kt=O;else if(isNaN(O)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(O)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+O+'" is not recognized.');kt=O}else kt=parseInt(O,10)};f.__private__.getZoomMode=function(){return kt};var $t,Rt=f.__private__.setPageMode=function(O){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(O)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+O+'" is not recognized.');bt=O};f.__private__.getPageMode=function(){return bt};var Le=f.__private__.setLayoutMode=function(O){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(O)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+O+'" is not recognized.');$t=O};f.__private__.getLayoutMode=function(){return $t},f.__private__.setDisplayMode=f.setDisplayMode=function(O,te,he){return An(O),Le(te),Rt(he),this};var Ke={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(O){if(Object.keys(Ke).indexOf(O)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ke[O]},f.__private__.getDocumentProperties=function(){return Ke},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(O){for(var te in Ke)Ke.hasOwnProperty(te)&&O[te]&&(Ke[te]=O[te]);return this},f.__private__.setDocumentProperty=function(O,te){if(Object.keys(Ke).indexOf(O)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ke[O]=te};var it,pt,At,rn,vt,Bt={},Xt={},bn=[],Qt={},on={},It={},Ut={},Wn=null,Nn=0,en=[],wt=new O6(f),Gn=e.hotfixes||[],Bn={},ir={},rs=[],St=function O(te,he,ye,Se,ze,tt){if(!(this instanceof O))return new O(te,he,ye,Se,ze,tt);isNaN(te)&&(te=1),isNaN(he)&&(he=0),isNaN(ye)&&(ye=0),isNaN(Se)&&(Se=1),isNaN(ze)&&(ze=0),isNaN(tt)&&(tt=0),this._matrix=[te,he,ye,Se,ze,tt]};Object.defineProperty(St.prototype,"sx",{get:function(){return this._matrix[0]},set:function(O){this._matrix[0]=O}}),Object.defineProperty(St.prototype,"shy",{get:function(){return this._matrix[1]},set:function(O){this._matrix[1]=O}}),Object.defineProperty(St.prototype,"shx",{get:function(){return this._matrix[2]},set:function(O){this._matrix[2]=O}}),Object.defineProperty(St.prototype,"sy",{get:function(){return this._matrix[3]},set:function(O){this._matrix[3]=O}}),Object.defineProperty(St.prototype,"tx",{get:function(){return this._matrix[4]},set:function(O){this._matrix[4]=O}}),Object.defineProperty(St.prototype,"ty",{get:function(){return this._matrix[5]},set:function(O){this._matrix[5]=O}}),Object.defineProperty(St.prototype,"a",{get:function(){return this._matrix[0]},set:function(O){this._matrix[0]=O}}),Object.defineProperty(St.prototype,"b",{get:function(){return this._matrix[1]},set:function(O){this._matrix[1]=O}}),Object.defineProperty(St.prototype,"c",{get:function(){return this._matrix[2]},set:function(O){this._matrix[2]=O}}),Object.defineProperty(St.prototype,"d",{get:function(){return this._matrix[3]},set:function(O){this._matrix[3]=O}}),Object.defineProperty(St.prototype,"e",{get:function(){return this._matrix[4]},set:function(O){this._matrix[4]=O}}),Object.defineProperty(St.prototype,"f",{get:function(){return this._matrix[5]},set:function(O){this._matrix[5]=O}}),Object.defineProperty(St.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(St.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(St.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(St.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),St.prototype.join=function(O){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(L).join(O)},St.prototype.multiply=function(O){var te=O.sx*this.sx+O.shy*this.shx,he=O.sx*this.shy+O.shy*this.sy,ye=O.shx*this.sx+O.sy*this.shx,Se=O.shx*this.shy+O.sy*this.sy,ze=O.tx*this.sx+O.ty*this.shx+this.tx,tt=O.tx*this.shy+O.ty*this.sy+this.ty;return new St(te,he,ye,Se,ze,tt)},St.prototype.decompose=function(){var O=this.sx,te=this.shy,he=this.shx,ye=this.sy,Se=this.tx,ze=this.ty,tt=Math.sqrt(O*O+te*te),Tt=(O/=tt)*he+(te/=tt)*ye;he-=O*Tt,ye-=te*Tt;var zt=Math.sqrt(he*he+ye*ye);return Tt/=zt,O*(ye/=zt)<te*(he/=zt)&&(O=-O,te=-te,Tt=-Tt,tt=-tt),{scale:new St(tt,0,0,zt,0,0),translate:new St(1,0,0,1,Se,ze),rotate:new St(O,te,-te,O,0,0),skew:new St(1,0,Tt,1,0,0)}},St.prototype.toString=function(O){return this.join(" ")},St.prototype.inversed=function(){var O=this.sx,te=this.shy,he=this.shx,ye=this.sy,Se=this.tx,ze=this.ty,tt=1/(O*ye-te*he),Tt=ye*tt,zt=-te*tt,dn=-he*tt,Lt=O*tt;return new St(Tt,zt,dn,Lt,-Tt*Se-dn*ze,-zt*Se-Lt*ze)},St.prototype.applyToPoint=function(O){var te=O.x*this.sx+O.y*this.shx+this.tx,he=O.x*this.shy+O.y*this.sy+this.ty;return new au(te,he)},St.prototype.applyToRectangle=function(O){var te=this.applyToPoint(O),he=this.applyToPoint(new au(O.x+O.w,O.y+O.h));return new Ch(te.x,te.y,he.x-te.x,he.y-te.y)},St.prototype.clone=function(){var O=this.sx,te=this.shy,he=this.shx,ye=this.sy,Se=this.tx,ze=this.ty;return new St(O,te,he,ye,Se,ze)},f.Matrix=St;var pr=f.matrixMult=function(O,te){return te.multiply(O)},Vr=new St(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=Vr;var nr=function(O,te){if(!on[O]){var he=(te instanceof ip?"Sh":"P")+(Object.keys(Qt).length+1).toString(10);te.id=he,on[O]=he,Qt[he]=te,wt.publish("addPattern",te)}};f.ShadingPattern=ip,f.TilingPattern=Ig,f.addShadingPattern=function(O,te){return P("addShadingPattern()"),nr(O,te),this},f.beginTilingPattern=function(O){P("beginTilingPattern()"),As(O.boundingBox[0],O.boundingBox[1],O.boundingBox[2]-O.boundingBox[0],O.boundingBox[3]-O.boundingBox[1],O.matrix)},f.endTilingPattern=function(O,te){P("endTilingPattern()"),te.stream=be[K].join(`
`),nr(O,te),wt.publish("endTilingPattern",te),rs.pop().restore()};var Re,mt=f.__private__.newObject=function(){var O=Ht();return sn(O,!0),O},Ht=f.__private__.newObjectDeferred=function(){return ne++,ae[ne]=function(){return Ae},ne},sn=function(O,te){return te=typeof te=="boolean"&&te,ae[O]=Ae,te&&ue(O+" 0 obj"),O},wn=f.__private__.newAdditionalObject=function(){var O={objId:Ht(),content:""};return pe.push(O),O},jr=Ht(),ur=Ht(),ar=f.__private__.decodeColorString=function(O){var te=O.split(" ");if(te.length!==2||te[1]!=="g"&&te[1]!=="G")te.length!==5||te[4]!=="k"&&te[4]!=="K"||(te=[(1-te[0])*(1-te[3]),(1-te[1])*(1-te[3]),(1-te[2])*(1-te[3]),"r"]);else{var he=parseFloat(te[0]);te=[he,he,he,"r"]}for(var ye="#",Se=0;Se<3;Se++)ye+=("0"+Math.floor(255*parseFloat(te[Se])).toString(16)).slice(-2);return ye},ss=f.__private__.encodeColorString=function(O){var te;typeof O=="string"&&(O={ch1:O});var he=O.ch1,ye=O.ch2,Se=O.ch3,ze=O.ch4,tt=O.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof he=="string"&&he.charAt(0)!=="#"){var Tt=new kZ(he);if(Tt.ok)he=Tt.toHex();else if(!/^\d*\.?\d*$/.test(he))throw new Error('Invalid color "'+he+'" passed to jsPDF.encodeColorString.')}if(typeof he=="string"&&/^#[0-9A-Fa-f]{3}$/.test(he)&&(he="#"+he[1]+he[1]+he[2]+he[2]+he[3]+he[3]),typeof he=="string"&&/^#[0-9A-Fa-f]{6}$/.test(he)){var zt=parseInt(he.substr(1),16);he=zt>>16&255,ye=zt>>8&255,Se=255&zt}if(ye===void 0||ze===void 0&&he===ye&&ye===Se)te=typeof he=="string"?he+" "+tt[0]:O.precision===2?I(he/255)+" "+tt[0]:T(he/255)+" "+tt[0];else if(ze===void 0||Sr(ze)==="object"){if(ze&&!isNaN(ze.a)&&ze.a===0)return["1.","1.","1.",tt[1]].join(" ");te=typeof he=="string"?[he,ye,Se,tt[1]].join(" "):O.precision===2?[I(he/255),I(ye/255),I(Se/255),tt[1]].join(" "):[T(he/255),T(ye/255),T(Se/255),tt[1]].join(" ")}else te=typeof he=="string"?[he,ye,Se,ze,tt[2]].join(" "):O.precision===2?[I(he),I(ye),I(Se),I(ze),tt[2]].join(" "):[T(he),T(ye),T(Se),T(ze),tt[2]].join(" ");return te},Xs=f.__private__.getFilters=function(){return o},qr=f.__private__.putStream=function(O){var te=(O=O||{}).data||"",he=O.filters||Xs(),ye=O.alreadyAppliedFilters||[],Se=O.addLength1||!1,ze=te.length,tt=O.objectId,Tt=function(Ls){return Ls};if(u!==null&&tt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(Tt=Wr.encryptor(tt,0));var zt={};he===!0&&(he=["FlateEncode"]);var dn=O.additionalKeyValues||[],Lt=(zt=tn.API.processDataByFilters!==void 0?tn.API.processDataByFilters(te,he):{data:te,reverseChain:[]}).reverseChain+(Array.isArray(ye)?ye.join(" "):ye.toString());if(zt.data.length!==0&&(dn.push({key:"Length",value:zt.data.length}),Se===!0&&dn.push({key:"Length1",value:ze})),Lt.length!=0)if(Lt.split("/").length-1==1)dn.push({key:"Filter",value:Lt});else{dn.push({key:"Filter",value:"["+Lt+"]"});for(var Un=0;Un<dn.length;Un+=1)if(dn[Un].key==="DecodeParms"){for(var Fr=[],Ns=0;Ns<zt.reverseChain.split("/").length-1;Ns+=1)Fr.push("null");Fr.push(dn[Un].value),dn[Un].value="["+Fr.join(" ")+"]"}}ue("<<");for(var vr=0;vr<dn.length;vr++)ue("/"+dn[vr].key+" "+dn[vr].value);ue(">>"),zt.data.length!==0&&(ue("stream"),ue(Tt(zt.data)),ue("endstream"))},bo=f.__private__.putPage=function(O){var te=O.number,he=O.data,ye=O.objId,Se=O.contentsObjId;sn(ye,!0),ue("<</Type /Page"),ue("/Parent "+O.rootDictionaryObjId+" 0 R"),ue("/Resources "+O.resourceDictionaryObjId+" 0 R"),ue("/MediaBox ["+parseFloat(L(O.mediaBox.bottomLeftX))+" "+parseFloat(L(O.mediaBox.bottomLeftY))+" "+L(O.mediaBox.topRightX)+" "+L(O.mediaBox.topRightY)+"]"),O.cropBox!==null&&ue("/CropBox ["+L(O.cropBox.bottomLeftX)+" "+L(O.cropBox.bottomLeftY)+" "+L(O.cropBox.topRightX)+" "+L(O.cropBox.topRightY)+"]"),O.bleedBox!==null&&ue("/BleedBox ["+L(O.bleedBox.bottomLeftX)+" "+L(O.bleedBox.bottomLeftY)+" "+L(O.bleedBox.topRightX)+" "+L(O.bleedBox.topRightY)+"]"),O.trimBox!==null&&ue("/TrimBox ["+L(O.trimBox.bottomLeftX)+" "+L(O.trimBox.bottomLeftY)+" "+L(O.trimBox.topRightX)+" "+L(O.trimBox.topRightY)+"]"),O.artBox!==null&&ue("/ArtBox ["+L(O.artBox.bottomLeftX)+" "+L(O.artBox.bottomLeftY)+" "+L(O.artBox.topRightX)+" "+L(O.artBox.topRightY)+"]"),typeof O.userUnit=="number"&&O.userUnit!==1&&ue("/UserUnit "+O.userUnit),wt.publish("putPage",{objId:ye,pageContext:en[te],pageNumber:te,page:he}),ue("/Contents "+Se+" 0 R"),ue(">>"),ue("endobj");var ze=he.join(`
`);return C===x&&(ze+=`
Q`),sn(Se,!0),qr({data:ze,filters:Xs(),objectId:Se}),ue("endobj"),ye},ks=f.__private__.putPages=function(){var O,te,he=[];for(O=1;O<=Nn;O++)en[O].objId=Ht(),en[O].contentsObjId=Ht();for(O=1;O<=Nn;O++)he.push(bo({number:O,data:be[O],objId:en[O].objId,contentsObjId:en[O].contentsObjId,mediaBox:en[O].mediaBox,cropBox:en[O].cropBox,bleedBox:en[O].bleedBox,trimBox:en[O].trimBox,artBox:en[O].artBox,userUnit:en[O].userUnit,rootDictionaryObjId:jr,resourceDictionaryObjId:ur}));sn(jr,!0),ue("<</Type /Pages");var ye="/Kids [";for(te=0;te<Nn;te++)ye+=he[te]+" 0 R ";ue(ye+"]"),ue("/Count "+Nn),ue(">>"),ue("endobj"),wt.publish("postPutPages")},yi=function(O){wt.publish("putFont",{font:O,out:ue,newObject:mt,putStream:qr}),O.isAlreadyPutted!==!0&&(O.objectNumber=mt(),ue("<<"),ue("/Type /Font"),ue("/BaseFont /"+cg(O.postScriptName)),ue("/Subtype /Type1"),typeof O.encoding=="string"&&ue("/Encoding /"+O.encoding),ue("/FirstChar 32"),ue("/LastChar 255"),ue(">>"),ue("endobj"))},Ja=function(O){O.objectNumber=mt();var te=[];te.push({key:"Type",value:"/XObject"}),te.push({key:"Subtype",value:"/Form"}),te.push({key:"BBox",value:"["+[L(O.x),L(O.y),L(O.x+O.width),L(O.y+O.height)].join(" ")+"]"}),te.push({key:"Matrix",value:"["+O.matrix.toString()+"]"});var he=O.pages[1].join(`
`);qr({data:he,additionalKeyValues:te,objectId:O.objectNumber}),ue("endobj")},qi=function(O,te){te||(te=21);var he=mt(),ye=function(tt,Tt){var zt,dn=[],Lt=1/(Tt-1);for(zt=0;zt<1;zt+=Lt)dn.push(zt);if(dn.push(1),tt[0].offset!=0){var Un={offset:0,color:tt[0].color};tt.unshift(Un)}if(tt[tt.length-1].offset!=1){var Fr={offset:1,color:tt[tt.length-1].color};tt.push(Fr)}for(var Ns="",vr=0,Ls=0;Ls<dn.length;Ls++){for(zt=dn[Ls];zt>tt[vr+1].offset;)vr++;var Bs=tt[vr].offset,oi=(zt-Bs)/(tt[vr+1].offset-Bs),wa=tt[vr].color,ci=tt[vr+1].color;Ns+=W(Math.round((1-oi)*wa[0]+oi*ci[0]).toString(16))+W(Math.round((1-oi)*wa[1]+oi*ci[1]).toString(16))+W(Math.round((1-oi)*wa[2]+oi*ci[2]).toString(16))}return Ns.trim()}(O.colors,te),Se=[];Se.push({key:"FunctionType",value:"0"}),Se.push({key:"Domain",value:"[0.0 1.0]"}),Se.push({key:"Size",value:"["+te+"]"}),Se.push({key:"BitsPerSample",value:"8"}),Se.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Se.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),qr({data:ye,additionalKeyValues:Se,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:he}),ue("endobj"),O.objectNumber=mt(),ue("<< /ShadingType "+O.type),ue("/ColorSpace /DeviceRGB");var ze="/Coords ["+L(parseFloat(O.coords[0]))+" "+L(parseFloat(O.coords[1]))+" ";O.type===2?ze+=L(parseFloat(O.coords[2]))+" "+L(parseFloat(O.coords[3])):ze+=L(parseFloat(O.coords[2]))+" "+L(parseFloat(O.coords[3]))+" "+L(parseFloat(O.coords[4]))+" "+L(parseFloat(O.coords[5])),ue(ze+="]"),O.matrix&&ue("/Matrix ["+O.matrix.toString()+"]"),ue("/Function "+he+" 0 R"),ue("/Extend [true true]"),ue(">>"),ue("endobj")},va=function(O,te){var he=Ht(),ye=mt();te.push({resourcesOid:he,objectOid:ye}),O.objectNumber=ye;var Se=[];Se.push({key:"Type",value:"/Pattern"}),Se.push({key:"PatternType",value:"1"}),Se.push({key:"PaintType",value:"1"}),Se.push({key:"TilingType",value:"1"}),Se.push({key:"BBox",value:"["+O.boundingBox.map(L).join(" ")+"]"}),Se.push({key:"XStep",value:L(O.xStep)}),Se.push({key:"YStep",value:L(O.yStep)}),Se.push({key:"Resources",value:he+" 0 R"}),O.matrix&&Se.push({key:"Matrix",value:"["+O.matrix.toString()+"]"}),qr({data:O.stream,additionalKeyValues:Se,objectId:O.objectNumber}),ue("endobj")},lh=function(O){for(var te in O.objectNumber=mt(),ue("<<"),O)switch(te){case"opacity":ue("/ca "+I(O[te]));break;case"stroke-opacity":ue("/CA "+I(O[te]))}ue(">>"),ue("endobj")},nc=function(O){sn(O.resourcesOid,!0),ue("<<"),ue("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var te in ue("/Font <<"),Bt)Bt.hasOwnProperty(te)&&(h===!1||h===!0&&A.hasOwnProperty(te))&&ue("/"+te+" "+Bt[te].objectNumber+" 0 R");ue(">>")}(),function(){if(Object.keys(Qt).length>0){for(var te in ue("/Shading <<"),Qt)Qt.hasOwnProperty(te)&&Qt[te]instanceof ip&&Qt[te].objectNumber>=0&&ue("/"+te+" "+Qt[te].objectNumber+" 0 R");wt.publish("putShadingPatternDict"),ue(">>")}}(),function(te){if(Object.keys(Qt).length>0){for(var he in ue("/Pattern <<"),Qt)Qt.hasOwnProperty(he)&&Qt[he]instanceof f.TilingPattern&&Qt[he].objectNumber>=0&&Qt[he].objectNumber<te&&ue("/"+he+" "+Qt[he].objectNumber+" 0 R");wt.publish("putTilingPatternDict"),ue(">>")}}(O.objectOid),function(){if(Object.keys(It).length>0){var te;for(te in ue("/ExtGState <<"),It)It.hasOwnProperty(te)&&It[te].objectNumber>=0&&ue("/"+te+" "+It[te].objectNumber+" 0 R");wt.publish("putGStateDict"),ue(">>")}}(),function(){for(var te in ue("/XObject <<"),Bn)Bn.hasOwnProperty(te)&&Bn[te].objectNumber>=0&&ue("/"+te+" "+Bn[te].objectNumber+" 0 R");wt.publish("putXobjectDict"),ue(">>")}(),ue(">>"),ue("endobj")},dh=function(O){Xt[O.fontName]=Xt[O.fontName]||{},Xt[O.fontName][O.fontStyle]=O.id},uh=function(O,te,he,ye,Se){var ze={id:"F"+(Object.keys(Bt).length+1).toString(10),postScriptName:O,fontName:te,fontStyle:he,encoding:ye,isStandardFont:Se||!1,metadata:{}};return wt.publish("addFont",{font:ze,instance:this}),Bt[ze.id]=ze,dh(ze),ze.id},Ki=f.__private__.pdfEscape=f.pdfEscape=function(O,te){return function(he,ye){var Se,ze,tt,Tt,zt,dn,Lt,Un,Fr;if(tt=(ye=ye||{}).sourceEncoding||"Unicode",zt=ye.outputEncoding,(ye.autoencode||zt)&&Bt[it].metadata&&Bt[it].metadata[tt]&&Bt[it].metadata[tt].encoding&&(Tt=Bt[it].metadata[tt].encoding,!zt&&Bt[it].encoding&&(zt=Bt[it].encoding),!zt&&Tt.codePages&&(zt=Tt.codePages[0]),typeof zt=="string"&&(zt=Tt[zt]),zt)){for(Lt=!1,dn=[],Se=0,ze=he.length;Se<ze;Se++)(Un=zt[he.charCodeAt(Se)])?dn.push(String.fromCharCode(Un)):dn.push(he[Se]),dn[Se].charCodeAt(0)>>8&&(Lt=!0);he=dn.join("")}for(Se=he.length;Lt===void 0&&Se!==0;)he.charCodeAt(Se-1)>>8&&(Lt=!0),Se--;if(!Lt)return he;for(dn=ye.noBOM?[]:[254,255],Se=0,ze=he.length;Se<ze;Se++){if((Fr=(Un=he.charCodeAt(Se))>>8)>>8)throw new Error("Character at position "+Se+" of string '"+he+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");dn.push(Fr),dn.push(Un-(Fr<<8))}return String.fromCharCode.apply(void 0,dn)}(O,te).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Hl=f.__private__.beginPage=function(O){be[++Nn]=[],en[Nn]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(O[0]),topRightY:Number(O[1])}},tu(Nn),xe(be[K])},eu=function(O,te){var he,ye,Se;switch(n=te||n,typeof O=="string"&&(he=y(O.toLowerCase()),Array.isArray(he)&&(ye=he[0],Se=he[1])),Array.isArray(O)&&(ye=O[0]*pt,Se=O[1]*pt),isNaN(ye)&&(ye=s[0],Se=s[1]),(ye>14400||Se>14400)&&(Ur.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ye=Math.min(14400,ye),Se=Math.min(14400,Se)),s=[ye,Se],n.substr(0,1)){case"l":Se>ye&&(s=[Se,ye]);break;case"p":ye>Se&&(s=[Se,ye])}Hl(s),cy(pf),ue(wh),gf!==0&&ue(gf+" J"),vf!==0&&ue(vf+" j"),wt.publish("addPage",{pageNumber:Nn})},$l=function(O){O>0&&O<=Nn&&(be.splice(O,1),en.splice(O,1),Nn--,K>Nn&&(K=Nn),this.setPage(K))},tu=function(O){O>0&&O<=Nn&&(K=O)},hh=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return be.length-1},Ah=function(O,te,he){var ye,Se=void 0;return he=he||{},O=O!==void 0?O:Bt[it].fontName,te=te!==void 0?te:Bt[it].fontStyle,ye=O.toLowerCase(),Xt[ye]!==void 0&&Xt[ye][te]!==void 0?Se=Xt[ye][te]:Xt[O]!==void 0&&Xt[O][te]!==void 0?Se=Xt[O][te]:he.disableWarning===!1&&Ur.warn("Unable to look up font label for font '"+O+"', '"+te+"'. Refer to getFontList() for available fonts."),Se||he.noFallback||(Se=Xt.times[te])==null&&(Se=Xt.times.normal),Se},zl=f.__private__.putInfo=function(){var O=mt(),te=function(ye){return ye};for(var he in u!==null&&(te=Wr.encryptor(O,0)),ue("<<"),ue("/Producer ("+Ki(te("jsPDF "+tn.version))+")"),Ke)Ke.hasOwnProperty(he)&&Ke[he]&&ue("/"+he.substr(0,1).toUpperCase()+he.substr(1)+" ("+Ki(te(Ke[he]))+")");ue("/CreationDate ("+Ki(te(M))+")"),ue(">>"),ue("endobj")},fh=f.__private__.putCatalog=function(O){var te=(O=O||{}).rootDictionaryObjId||jr;switch(mt(),ue("<<"),ue("/Type /Catalog"),ue("/Pages "+te+" 0 R"),kt||(kt="fullwidth"),kt){case"fullwidth":ue("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ue("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ue("/OpenAction [3 0 R /Fit]");break;case"original":ue("/OpenAction [3 0 R /XYZ null null 1]");break;default:var he=""+kt;he.substr(he.length-1)==="%"&&(kt=parseInt(kt)/100),typeof kt=="number"&&ue("/OpenAction [3 0 R /XYZ null null "+I(kt)+"]")}switch($t||($t="continuous"),$t){case"continuous":ue("/PageLayout /OneColumn");break;case"single":ue("/PageLayout /SinglePage");break;case"two":case"twoleft":ue("/PageLayout /TwoColumnLeft");break;case"tworight":ue("/PageLayout /TwoColumnRight")}bt&&ue("/PageMode /"+bt),wt.publish("putCatalog"),ue(">>"),ue("endobj")},Kr=f.__private__.putTrailer=function(){ue("trailer"),ue("<<"),ue("/Size "+(ne+1)),ue("/Root "+ne+" 0 R"),ue("/Info "+(ne-1)+" 0 R"),u!==null&&ue("/Encrypt "+Wr.oid+" 0 R"),ue("/ID [ <"+U+"> <"+U+"> ]"),ue(">>")},nu=f.__private__.putHeader=function(){ue("%PDF-"+m),ue("%")},Vl=f.__private__.putXRef=function(){var O="0000000000";ue("xref"),ue("0 "+(ne+1)),ue("0000000000 65535 f ");for(var te=1;te<=ne;te++)typeof ae[te]=="function"?ue((O+ae[te]()).slice(-10)+" 00000 n "):ae[te]!==void 0?ue((O+ae[te]).slice(-10)+" 00000 n "):ue("0000000000 00000 n ")},Co=f.__private__.buildDocument=function(){var O;ne=0,Ae=0,ce=[],ae=[],pe=[],jr=Ht(),ur=Ht(),xe(ce),wt.publish("buildDocument"),nu(),ks(),function(){wt.publish("putAdditionalObjects");for(var he=0;he<pe.length;he++){var ye=pe[he];sn(ye.objId,!0),ue(ye.content),ue("endobj")}wt.publish("postPutAdditionalObjects")}(),O=[],function(){for(var he in Bt)Bt.hasOwnProperty(he)&&(h===!1||h===!0&&A.hasOwnProperty(he))&&yi(Bt[he])}(),function(){var he;for(he in It)It.hasOwnProperty(he)&&lh(It[he])}(),function(){for(var he in Bn)Bn.hasOwnProperty(he)&&Ja(Bn[he])}(),function(he){var ye;for(ye in Qt)Qt.hasOwnProperty(ye)&&(Qt[ye]instanceof ip?qi(Qt[ye]):Qt[ye]instanceof Ig&&va(Qt[ye],he))}(O),wt.publish("putResources"),O.forEach(nc),nc({resourcesOid:ur,objectOid:Number.MAX_SAFE_INTEGER}),wt.publish("postPutResources"),u!==null&&(Wr.oid=mt(),ue("<<"),ue("/Filter /Standard"),ue("/V "+Wr.v),ue("/R "+Wr.r),ue("/U <"+Wr.toHexString(Wr.U)+">"),ue("/O <"+Wr.toHexString(Wr.O)+">"),ue("/P "+Wr.P),ue(">>"),ue("endobj")),zl(),fh();var te=Ae;return Vl(),Kr(),ue("startxref"),ue(""+te),ue("%%EOF"),xe(be[K]),ce.join(`
`)},ya=f.__private__.getBlob=function(O){return new Blob([ht(O)],{type:"application/pdf"})},xi=f.output=f.__private__.output=(Re=function(O,te){switch(typeof(te=te||{})=="string"?te={filename:te}:te.filename=te.filename||"generated.pdf",O){case void 0:return Co();case"save":f.save(te.filename);break;case"arraybuffer":return ht(Co());case"blob":return ya(Co());case"bloburi":case"bloburl":if(yn.URL!==void 0&&typeof yn.URL.createObjectURL=="function")return yn.URL&&yn.URL.createObjectURL(ya(Co()))||void 0;Ur.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var he="",ye=Co();try{he=L6(ye)}catch{he=L6(unescape(encodeURIComponent(ye)))}return"data:application/pdf;filename="+te.filename+";base64,"+he;case"pdfobjectnewwindow":if(Object.prototype.toString.call(yn)==="[object Window]"){var Se="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ze=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';te.pdfObjectUrl&&(Se=te.pdfObjectUrl,ze="");var tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Se+'"'+ze+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(te)+");<\/script></body></html>",Tt=yn.open();return Tt!==null&&Tt.document.write(tt),Tt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(yn)==="[object Window]"){var zt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(te.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+te.filename+'" width="500px" height="400px" /></body></html>',dn=yn.open();if(dn!==null){dn.document.write(zt);var Lt=this;dn.document.documentElement.querySelector("#pdfViewer").onload=function(){dn.document.title=te.filename,dn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Lt.output("bloburl"))}}return dn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(yn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Un='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",te)+'"></iframe></body></html>',Fr=yn.open();if(Fr!==null&&(Fr.document.write(Un),Fr.document.title=te.filename),Fr||typeof safari>"u")return Fr;break;case"datauri":case"dataurl":return yn.document.location.href=this.output("datauristring",te);default:return null}},Re.foo=function(){try{return Re.apply(this,arguments)}catch(he){var O=he.stack||"";~O.indexOf(" at ")&&(O=O.split(" at ")[1]);var te="Error in function "+O.split(`
`)[0].split("<")[0]+": "+he.message;if(!yn.console)throw new Error(te);yn.console.error(te,he),yn.alert&&alert(te)}},Re.foo.bar=Re,Re.foo),rc=function(O){return Array.isArray(Gn)===!0&&Gn.indexOf(O)>-1};switch(r){case"pt":pt=1;break;case"mm":pt=72/25.4;break;case"cm":pt=72/2.54;break;case"in":pt=72;break;case"px":pt=rc("px_scaling")==1?.75:96/72;break;case"pc":case"em":pt=12;break;case"ex":pt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);pt=r}var Wr=null;X(),$();var sc=f.__private__.getPageInfo=f.getPageInfo=function(O){if(isNaN(O)||O%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:en[O].objId,pageNumber:O,pageContext:en[O]}},ph=f.__private__.getPageInfoByObjId=function(O){if(isNaN(O)||O%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var te in en)if(en[te].objId===O)break;return sc(te)},ru=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:en[K].objId,pageNumber:K,pageContext:en[K]}};f.addPage=function(){return eu.apply(this,arguments),this},f.setPage=function(){return tu.apply(this,arguments),xe.call(this,be[K]),this},f.insertPage=function(O){return this.addPage(),this.movePage(K,O),this},f.movePage=function(O,te){var he,ye;if(O>te){he=be[O],ye=en[O];for(var Se=O;Se>te;Se--)be[Se]=be[Se-1],en[Se]=en[Se-1];be[te]=he,en[te]=ye,this.setPage(te)}else if(O<te){he=be[O],ye=en[O];for(var ze=O;ze<te;ze++)be[ze]=be[ze+1],en[ze]=en[ze+1];be[te]=he,en[te]=ye,this.setPage(te)}return this},f.deletePage=function(){return $l.apply(this,arguments),this},f.__private__.text=f.text=function(O,te,he,ye,Se){var ze,tt,Tt,zt,dn,Lt,Un,Fr,Ns,vr=(ye=ye||{}).scope||this;if(typeof O=="number"&&typeof te=="number"&&(typeof he=="string"||Array.isArray(he))){var Ls=he;he=te,te=O,O=Ls}if(arguments[3]instanceof St==0?(Tt=arguments[4],zt=arguments[5],Sr(Un=arguments[3])==="object"&&Un!==null||(typeof Tt=="string"&&(zt=Tt,Tt=null),typeof Un=="string"&&(zt=Un,Un=null),typeof Un=="number"&&(Tt=Un,Un=null),ye={flags:Un,angle:Tt,align:zt})):(P("The transform parameter of text() with a Matrix value"),Ns=Se),isNaN(te)||isNaN(he)||O==null)throw new Error("Invalid arguments passed to jsPDF.text");if(O.length===0)return vr;var Bs,oi="",wa=typeof ye.lineHeightFactor=="number"?ye.lineHeightFactor:su,ci=vr.internal.scaleFactor;function Oc(Et){return Et=Et.split("	").join(Array(ye.TabLen||9).join(" ")),Ki(Et,Un)}function kh(Et){for(var Zt,Pn=Et.concat(),gn=[],Eo=Pn.length;Eo--;)typeof(Zt=Pn.shift())=="string"?gn.push(Zt):Array.isArray(Et)&&(Zt.length===1||Zt[1]===void 0&&Zt[2]===void 0)?gn.push(Zt[0]):gn.push([Zt[0],Zt[1],Zt[2]]);return gn}function Wl(Et,Zt){var Pn;if(typeof Et=="string")Pn=Zt(Et)[0];else if(Array.isArray(Et)){for(var gn,Eo,Ef=Et.concat(),li=[],lu=Ef.length;lu--;)typeof(gn=Ef.shift())=="string"?li.push(Zt(gn)[0]):Array.isArray(gn)&&typeof gn[0]=="string"&&(Eo=Zt(gn[0],gn[1],gn[2]),li.push([Eo[0],Eo[1],Eo[2]]));Pn=li}return Pn}var Qc=!1,Hc=!0;if(typeof O=="string")Qc=!0;else if(Array.isArray(O)){var $c=O.concat();tt=[];for(var Gl,wi=$c.length;wi--;)(typeof(Gl=$c.shift())!="string"||Array.isArray(Gl)&&typeof Gl[0]!="string")&&(Hc=!1);Qc=Hc}if(Qc===!1)throw new Error('Type of text must be string or Array. "'+O+'" is not recognized.');typeof O=="string"&&(O=O.match(/[\r?\n]/)?O.split(/\r\n|\r|\n/g):[O]);var zc=Me/vr.internal.scaleFactor,Vc=zc*(wa-1);switch(ye.baseline){case"bottom":he-=Vc;break;case"top":he+=zc-Vc;break;case"hanging":he+=zc-2*Vc;break;case"middle":he+=zc/2-Vc}if((Lt=ye.maxWidth||0)>0&&(typeof O=="string"?O=vr.splitTextToSize(O,Lt):Object.prototype.toString.call(O)==="[object Array]"&&(O=O.reduce(function(Et,Zt){return Et.concat(vr.splitTextToSize(Zt,Lt))},[]))),ze={text:O,x:te,y:he,options:ye,mutex:{pdfEscape:Ki,activeFontKey:it,fonts:Bt,activeFontSize:Me}},wt.publish("preProcessText",ze),O=ze.text,Tt=(ye=ze.options).angle,Ns instanceof St==0&&Tt&&typeof Tt=="number"){Tt*=Math.PI/180,ye.rotationDirection===0&&(Tt=-Tt),C===x&&(Tt=-Tt);var Cf=Math.cos(Tt),Sh=Math.sin(Tt);Ns=new St(Cf,Sh,-Sh,Cf,0,0)}else Tt&&Tt instanceof St&&(Ns=Tt);C!==x||Ns||(Ns=Vr),(dn=ye.charSpace||bh)!==void 0&&(oi+=L(Q(dn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Fr=ye.horizontalScale)!==void 0&&(oi+=L(100*Fr)+` Tz
`),ye.lang;var Yn=-1,No=ye.renderingMode!==void 0?ye.renderingMode:ye.stroke,ac=vr.internal.getCurrentPageInfo().pageContext;switch(No){case 0:case!1:case"fill":Yn=0;break;case 1:case!0:case"stroke":Yn=1;break;case 2:case"fillThenStroke":Yn=2;break;case 3:case"invisible":Yn=3;break;case 4:case"fillAndAddForClipping":Yn=4;break;case 5:case"strokeAndAddPathForClipping":Yn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Yn=6;break;case 7:case"addToPathForClipping":Yn=7}var jf=ac.usedRenderingMode!==void 0?ac.usedRenderingMode:-1;Yn!==-1?oi+=Yn+` Tr
`:jf!==-1&&(oi+=`0 Tr
`),Yn!==-1&&(ac.usedRenderingMode=Yn),zt=ye.align||"left";var ba,ou=Me*wa,kf=vr.internal.pageSize.getWidth(),Sf=Bt[it];dn=ye.charSpace||bh,Lt=ye.maxWidth||0,Un=Object.assign({autoencode:!0,noBOM:!0},ye.flags);var Yl=[],cu=function(Et){return vr.getStringUnitWidth(Et,{font:Sf,charSpace:dn,fontSize:Me,doKerning:!1})*Me/ci};if(Object.prototype.toString.call(O)==="[object Array]"){var Js;tt=kh(O),zt!=="left"&&(ba=tt.map(cu));var Ca,Xl=0;if(zt==="right"){te-=ba[0],O=[],wi=tt.length;for(var Bo=0;Bo<wi;Bo++)Bo===0?(Ca=ko(te),Js=Mc(he)):(Ca=Q(Xl-ba[Bo]),Js=-ou),O.push([tt[Bo],Ca,Js]),Xl=ba[Bo]}else if(zt==="center"){te-=ba[0]/2,O=[],wi=tt.length;for(var qc=0;qc<wi;qc++)qc===0?(Ca=ko(te),Js=Mc(he)):(Ca=Q((Xl-ba[qc])/2),Js=-ou),O.push([tt[qc],Ca,Js]),Xl=ba[qc]}else if(zt==="left"){O=[],wi=tt.length;for(var Za=0;Za<wi;Za++)O.push(tt[Za])}else if(zt==="justify"&&Sf.encoding==="Identity-H"){O=[],wi=tt.length,Lt=Lt!==0?Lt:kf;for(var Kc=0,fs=0;fs<wi;fs++)if(Js=fs===0?Mc(he):-ou,Ca=fs===0?ko(te):Kc,fs<wi-1){var wm=Q((Lt-ba[fs])/(tt[fs].split(" ").length-1)),oc=tt[fs].split(" ");O.push([oc[0]+" ",Ca,Js]),Kc=0;for(var Pi=1;Pi<oc.length;Pi++){var Ti=(cu(oc[Pi-1]+" "+oc[Pi])-cu(oc[Pi]))*ci+wm;Pi==oc.length-1?O.push([oc[Pi],Ti,0]):O.push([oc[Pi]+" ",Ti,0]),Kc-=Ti}}else O.push([tt[fs],Ca,Js]);O.push(["",Kc,0])}else{if(zt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(O=[],wi=tt.length,Lt=Lt!==0?Lt:kf,fs=0;fs<wi;fs++){Js=fs===0?Mc(he):-ou,Ca=fs===0?ko(te):0;var Nh=tt[fs].split(" ").length-1,Nf=Nh>0?(Lt-ba[fs])/Nh:0;fs<wi-1?Yl.push(L(Q(Nf))):Yl.push(0),O.push([tt[fs],Ca,Js])}}}(typeof ye.R2L=="boolean"?ye.R2L:Nt)===!0&&(O=Wl(O,function(Et,Zt,Pn){return[Et.split("").reverse().join(""),Zt,Pn]})),ze={text:O,x:te,y:he,options:ye,mutex:{pdfEscape:Ki,activeFontKey:it,fonts:Bt,activeFontSize:Me}},wt.publish("postProcessText",ze),O=ze.text,Bs=ze.mutex.isHex||!1;var Bf=Bt[it].encoding;Bf!=="WinAnsiEncoding"&&Bf!=="StandardEncoding"||(O=Wl(O,function(Et,Zt,Pn){return[Oc(Et),Zt,Pn]})),tt=kh(O),O=[];for(var Jl,Zl,ed,eo=Array.isArray(tt[0])?1:0,je="",Qe=function(Et,Zt,Pn){var gn="";return Pn instanceof St?(Pn=typeof ye.angle=="number"?pr(Pn,new St(1,0,0,1,Et,Zt)):pr(new St(1,0,0,1,Et,Zt),Pn),C===x&&(Pn=pr(new St(1,0,0,-1,0,0),Pn)),gn=Pn.join(" ")+` Tm
`):gn=L(Et)+" "+L(Zt)+` Td
`,gn},Fe=0;Fe<tt.length;Fe++){switch(je="",eo){case 1:ed=(Bs?"<":"(")+tt[Fe][0]+(Bs?">":")"),Jl=parseFloat(tt[Fe][1]),Zl=parseFloat(tt[Fe][2]);break;case 0:ed=(Bs?"<":"(")+tt[Fe]+(Bs?">":")"),Jl=ko(te),Zl=Mc(he)}Yl!==void 0&&Yl[Fe]!==void 0&&(je=Yl[Fe]+` Tw
`),Fe===0?O.push(je+Qe(Jl,Zl,Ns)+ed):eo===0?O.push(je+ed):eo===1&&O.push(je+Qe(Jl,Zl,Ns)+ed)}O=eo===0?O.join(` Tj
T* `):O.join(` Tj
`),O+=` Tj
`;var jt=`BT
/`;return jt+=it+" "+Me+` Tf
`,jt+=L(Me*wa)+` TL
`,jt+=or+`
`,jt+=oi,jt+=O,ue(jt+="ET"),A[it]=!0,vr};var mh=f.__private__.clip=f.clip=function(O){return ue(O==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return mh("evenodd")},f.__private__.discardPath=f.discardPath=function(){return ue("n"),this};var jo=f.__private__.isValidStyle=function(O){var te=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(O)!==-1&&(te=!0),te};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(O){return jo(O)&&(d=O),this};var gh=f.__private__.getStyle=f.getStyle=function(O){var te=d;switch(O){case"D":case"S":te="S";break;case"F":te="f";break;case"FD":case"DF":te="B";break;case"f":case"f*":case"B":case"B*":te=O}return te},vh=f.close=function(){return ue("h"),this};f.stroke=function(){return ue("S"),this},f.fill=function(O){return xa("f",O),this},f.fillEvenOdd=function(O){return xa("f*",O),this},f.fillStroke=function(O){return xa("B",O),this},f.fillStrokeEvenOdd=function(O){return xa("B*",O),this};var xa=function(O,te){Sr(te)==="object"?ay(te,O):ue(O)},yh=function(O){O===null||C===x&&O===void 0||(O=gh(O),ue(O))};function ym(O,te,he,ye,Se){var ze=new Ig(te||this.boundingBox,he||this.xStep,ye||this.yStep,this.gState,Se||this.matrix);ze.stream=this.stream;var tt=O+"$$"+this.cloneIndex+++"$$";return nr(tt,ze),ze}var ay=function(O,te){var he=on[O.key],ye=Qt[he];if(ye instanceof ip)ue("q"),ue(xm(te)),ye.gState&&f.setGState(ye.gState),ue(O.matrix.toString()+" cm"),ue("/"+he+" sh"),ue("Q");else if(ye instanceof Ig){var Se=new St(1,0,0,-1,0,Kl());O.matrix&&(Se=Se.multiply(O.matrix||Vr),he=ym.call(ye,O.key,O.boundingBox,O.xStep,O.yStep,Se).id),ue("q"),ue("/Pattern cs"),ue("/"+he+" scn"),ye.gState&&f.setGState(ye.gState),ue(te),ue("Q")}},xm=function(O){switch(O){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},xh=f.moveTo=function(O,te){return ue(L(Q(O))+" "+L(D(te))+" m"),this},ql=f.lineTo=function(O,te){return ue(L(Q(O))+" "+L(D(te))+" l"),this},Lc=f.curveTo=function(O,te,he,ye,Se,ze){return ue([L(Q(O)),L(D(te)),L(Q(he)),L(D(ye)),L(Q(Se)),L(D(ze)),"c"].join(" ")),this};f.__private__.line=f.line=function(O,te,he,ye,Se){if(isNaN(O)||isNaN(te)||isNaN(he)||isNaN(ye)||!jo(Se))throw new Error("Invalid arguments passed to jsPDF.line");return C===j?this.lines([[he-O,ye-te]],O,te,[1,1],Se||"S"):this.lines([[he-O,ye-te]],O,te,[1,1]).stroke()},f.__private__.lines=f.lines=function(O,te,he,ye,Se,ze){var tt,Tt,zt,dn,Lt,Un,Fr,Ns,vr,Ls,Bs,oi;if(typeof O=="number"&&(oi=he,he=te,te=O,O=oi),ye=ye||[1,1],ze=ze||!1,isNaN(te)||isNaN(he)||!Array.isArray(O)||!Array.isArray(ye)||!jo(Se)||typeof ze!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(xh(te,he),tt=ye[0],Tt=ye[1],dn=O.length,Ls=te,Bs=he,zt=0;zt<dn;zt++)(Lt=O[zt]).length===2?(Ls=Lt[0]*tt+Ls,Bs=Lt[1]*Tt+Bs,ql(Ls,Bs)):(Un=Lt[0]*tt+Ls,Fr=Lt[1]*Tt+Bs,Ns=Lt[2]*tt+Ls,vr=Lt[3]*Tt+Bs,Ls=Lt[4]*tt+Ls,Bs=Lt[5]*Tt+Bs,Lc(Un,Fr,Ns,vr,Ls,Bs));return ze&&vh(),yh(Se),this},f.path=function(O){for(var te=0;te<O.length;te++){var he=O[te],ye=he.c;switch(he.op){case"m":xh(ye[0],ye[1]);break;case"l":ql(ye[0],ye[1]);break;case"c":Lc.apply(this,ye);break;case"h":vh()}}return this},f.__private__.rect=f.rect=function(O,te,he,ye,Se){if(isNaN(O)||isNaN(te)||isNaN(he)||isNaN(ye)||!jo(Se))throw new Error("Invalid arguments passed to jsPDF.rect");return C===j&&(ye=-ye),ue([L(Q(O)),L(D(te)),L(Q(he)),L(Q(ye)),"re"].join(" ")),yh(Se),this},f.__private__.triangle=f.triangle=function(O,te,he,ye,Se,ze,tt){if(isNaN(O)||isNaN(te)||isNaN(he)||isNaN(ye)||isNaN(Se)||isNaN(ze)||!jo(tt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[he-O,ye-te],[Se-he,ze-ye],[O-Se,te-ze]],O,te,[1,1],tt,!0),this},f.__private__.roundedRect=f.roundedRect=function(O,te,he,ye,Se,ze,tt){if(isNaN(O)||isNaN(te)||isNaN(he)||isNaN(ye)||isNaN(Se)||isNaN(ze)||!jo(tt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Tt=4/3*(Math.SQRT2-1);return Se=Math.min(Se,.5*he),ze=Math.min(ze,.5*ye),this.lines([[he-2*Se,0],[Se*Tt,0,Se,ze-ze*Tt,Se,ze],[0,ye-2*ze],[0,ze*Tt,-Se*Tt,ze,-Se,ze],[2*Se-he,0],[-Se*Tt,0,-Se,-ze*Tt,-Se,-ze],[0,2*ze-ye],[0,-ze*Tt,Se*Tt,-ze,Se,-ze]],O+Se,te,[1,1],tt,!0),this},f.__private__.ellipse=f.ellipse=function(O,te,he,ye,Se){if(isNaN(O)||isNaN(te)||isNaN(he)||isNaN(ye)||!jo(Se))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ze=4/3*(Math.SQRT2-1)*he,tt=4/3*(Math.SQRT2-1)*ye;return xh(O+he,te),Lc(O+he,te-tt,O+ze,te-ye,O,te-ye),Lc(O-ze,te-ye,O-he,te-tt,O-he,te),Lc(O-he,te+tt,O-ze,te+ye,O,te+ye),Lc(O+ze,te+ye,O+he,te+tt,O+he,te),yh(Se),this},f.__private__.circle=f.circle=function(O,te,he,ye){if(isNaN(O)||isNaN(te)||isNaN(he)||!jo(ye))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(O,te,he,he,ye)},f.setFont=function(O,te,he){return he&&(te=N(te,he)),it=Ah(O,te,{disableWarning:!1}),this};var oy=f.__private__.getFont=f.getFont=function(){return Bt[Ah.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var O,te,he={};for(O in Xt)if(Xt.hasOwnProperty(O))for(te in he[O]=[],Xt[O])Xt[O].hasOwnProperty(te)&&he[O].push(te);return he},f.addFont=function(O,te,he,ye,Se){var ze=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ze.indexOf(arguments[3])!==-1?Se=arguments[3]:arguments[3]&&ze.indexOf(arguments[3])==-1&&(he=N(he,ye)),uh.call(this,O,te,he,Se=Se||"Identity-H")};var su,pf=e.lineWidth||.200025,fn=f.__private__.getLineWidth=f.getLineWidth=function(){return pf},cy=f.__private__.setLineWidth=f.setLineWidth=function(O){return pf=O,ue(L(Q(O))+" w"),this};f.__private__.setLineDash=tn.API.setLineDash=tn.API.setLineDashPattern=function(O,te){if(O=O||[],te=te||0,isNaN(te)||!Array.isArray(O))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return O=O.map(function(he){return L(Q(he))}).join(" "),te=L(Q(te)),ue("["+O+"] "+te+" d"),this};var ly=f.__private__.getLineHeight=f.getLineHeight=function(){return Me*su};f.__private__.getLineHeight=f.getLineHeight=function(){return Me*su};var dy=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(O){return typeof(O=O||1.15)=="number"&&(su=O),this},uy=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return su};dy(e.lineHeight);var ko=f.__private__.getHorizontalCoordinate=function(O){return Q(O)},Mc=f.__private__.getVerticalCoordinate=function(O){return C===x?O:en[K].mediaBox.topRightY-en[K].mediaBox.bottomLeftY-Q(O)},hy=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(O){return L(ko(O))},Ay=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(O){return L(Mc(O))},wh=e.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return ar(wh)},f.__private__.setStrokeColor=f.setDrawColor=function(O,te,he,ye){return wh=ss({ch1:O,ch2:te,ch3:he,ch4:ye,pdfColorType:"draw",precision:2}),ue(wh),this};var mf=e.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return ar(mf)},f.__private__.setFillColor=f.setFillColor=function(O,te,he,ye){return mf=ss({ch1:O,ch2:te,ch3:he,ch4:ye,pdfColorType:"fill",precision:2}),ue(mf),this};var or=e.textColor||"0 g",cr=f.__private__.getTextColor=f.getTextColor=function(){return ar(or)};f.__private__.setTextColor=f.setTextColor=function(O,te,he,ye){return or=ss({ch1:O,ch2:te,ch3:he,ch4:ye,pdfColorType:"text",precision:3}),this};var bh=e.charSpace,fy=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(bh||0)};f.__private__.setCharSpace=f.setCharSpace=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return bh=O,this};var gf=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(O){var te=f.CapJoinStyles[O];if(te===void 0)throw new Error("Line cap style of '"+O+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return gf=te,ue(te+" J"),this};var vf=0;f.__private__.setLineJoin=f.setLineJoin=function(O){var te=f.CapJoinStyles[O];if(te===void 0)throw new Error("Line join style of '"+O+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return vf=te,ue(te+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(O){if(O=O||0,isNaN(O))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ue(L(Q(O))+" M"),this},f.GState=vj,f.setGState=function(O){(O=typeof O=="string"?It[Ut[O]]:iu(null,O)).equals(Wn)||(ue("/"+O.id+" gs"),Wn=O)};var iu=function(O,te){if(!O||!Ut[O]){var he=!1;for(var ye in It)if(It.hasOwnProperty(ye)&&It[ye].equals(te)){he=!0;break}if(he)te=It[ye];else{var Se="GS"+(Object.keys(It).length+1).toString(10);It[Se]=te,te.id=Se}return O&&(Ut[O]=te.id),wt.publish("addGState",te),te}};f.addGState=function(O,te){return iu(O,te),this},f.saveGraphicsState=function(){return ue("q"),bn.push({key:it,size:Me,color:or}),this},f.restoreGraphicsState=function(){ue("Q");var O=bn.pop();return it=O.key,Me=O.size,or=O.color,Wn=null,this},f.setCurrentTransformationMatrix=function(O){return ue(O.toString()+" cm"),this},f.comment=function(O){return ue("#"+O),this};var au=function(O,te){var he=O||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return he},set:function(ze){isNaN(ze)||(he=parseFloat(ze))}});var ye=te||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ye},set:function(ze){isNaN(ze)||(ye=parseFloat(ze))}});var Se="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Se},set:function(ze){Se=ze.toString()}}),this},Ch=function(O,te,he,ye){au.call(this,O,te),this.type="rect";var Se=he||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Se},set:function(tt){isNaN(tt)||(Se=parseFloat(tt))}});var ze=ye||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ze},set:function(tt){isNaN(tt)||(ze=parseFloat(tt))}}),this},jh=function(){this.page=Nn,this.currentPage=K,this.pages=be.slice(0),this.pagesContext=en.slice(0),this.x=At,this.y=rn,this.matrix=vt,this.width=ic(K),this.height=So(K),this.outputDestination=Pe,this.id="",this.objectNumber=-1};jh.prototype.restore=function(){Nn=this.page,K=this.currentPage,en=this.pagesContext,be=this.pages,At=this.x,rn=this.y,vt=this.matrix,yf(K,this.width),Ss(K,this.height),Pe=this.outputDestination};var As=function(O,te,he,ye,Se){rs.push(new jh),Nn=K=0,be=[],At=O,rn=te,vt=Se,Hl([he,ye])};for(var Rc in f.beginFormObject=function(O,te,he,ye,Se){return As(O,te,he,ye,Se),this},f.endFormObject=function(O){return function(te){if(ir[te])rs.pop().restore();else{var he=new jh,ye="Xo"+(Object.keys(Bn).length+1).toString(10);he.id=ye,ir[te]=ye,Bn[ye]=he,wt.publish("addFormObject",he),rs.pop().restore()}}(O),this},f.doFormObject=function(O,te){var he=Bn[ir[O]];return ue("q"),ue(te.toString()+" cm"),ue("/"+he.id+" Do"),ue("Q"),this},f.getFormObject=function(O){var te=Bn[ir[O]];return{x:te.x,y:te.y,width:te.width,height:te.height,matrix:te.matrix}},f.save=function(O,te){return O=O||"generated.pdf",(te=te||{}).returnPromise=te.returnPromise||!1,te.returnPromise===!1?(rp(ya(Co()),O),typeof rp.unload=="function"&&yn.setTimeout&&setTimeout(rp.unload,911),this):new Promise(function(he,ye){try{var Se=rp(ya(Co()),O);typeof rp.unload=="function"&&yn.setTimeout&&setTimeout(rp.unload,911),he(Se)}catch(ze){ye(ze.message)}})},tn.API)tn.API.hasOwnProperty(Rc)&&(Rc==="events"&&tn.API.events.length?function(O,te){var he,ye,Se;for(Se=te.length-1;Se!==-1;Se--)he=te[Se][0],ye=te[Se][1],O.subscribe.apply(O,[he].concat(typeof ye=="function"?[ye]:ye))}(wt,tn.API.events):f[Rc]=tn.API[Rc]);function ic(O){return en[O].mediaBox.topRightX-en[O].mediaBox.bottomLeftX}function yf(O,te){en[O].mediaBox.topRightX=te+en[O].mediaBox.bottomLeftX}function So(O){return en[O].mediaBox.topRightY-en[O].mediaBox.bottomLeftY}function Ss(O,te){en[O].mediaBox.topRightY=te+en[O].mediaBox.bottomLeftY}var xf=f.getPageWidth=function(O){return ic(O=O||K)/pt},wf=f.setPageWidth=function(O,te){yf(O,te*pt)},Kl=f.getPageHeight=function(O){return So(O=O||K)/pt},bf=f.setPageHeight=function(O,te){Ss(O,te*pt)};return f.internal={pdfEscape:Ki,getStyle:gh,getFont:oy,getFontSize:ct,getCharSpace:fy,getTextColor:cr,getLineHeight:ly,getLineHeightFactor:uy,getLineWidth:fn,write:yt,getHorizontalCoordinate:ko,getVerticalCoordinate:Mc,getCoordinateString:hy,getVerticalCoordinateString:Ay,collections:{},newObject:mt,newAdditionalObject:wn,newObjectDeferred:Ht,newObjectDeferredBegin:sn,getFilters:Xs,putStream:qr,events:wt,scaleFactor:pt,pageSize:{getWidth:function(){return xf(K)},setWidth:function(O){wf(K,O)},getHeight:function(){return Kl(K)},setHeight:function(O){bf(K,O)}},encryptionOptions:u,encryption:Wr,getEncryptor:function(O){return u!==null?Wr.encryptor(O,0):function(te){return te}},output:xi,getNumberOfPages:hh,pages:be,out:ue,f2:I,f3:T,getPageInfo:sc,getPageInfoByObjId:ph,getCurrentPageInfo:ru,getPDFVersion:g,Point:au,Rectangle:Ch,Matrix:St,hasHotfix:rc},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return xf(K)},set:function(O){wf(K,O)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return Kl(K)},set:function(O){bf(K,O)},enumerable:!0,configurable:!0}),(function(O){for(var te=0,he=Ct.length;te<he;te++){var ye=uh.call(this,O[te][0],O[te][1],O[te][2],Ct[te][3],!0);h===!1&&(A[ye]=!0);var Se=O[te][0].split("-");dh({id:ye,fontName:Se[0],fontStyle:Se[1]||""})}wt.publish("addFonts",{fonts:Bt,dictionary:Xt})}).call(f,Ct),it="F1",eu(s,n),wt.publish("initialized"),f}og.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},og.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},og.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},og.prototype.processOwnerPassword=function(e,t){return wI(xI(t).substr(0,5),e)},og.prototype.encryptor=function(e,t){var n=xI(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return wI(n,r)}},vj.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||Sr(e)!==Sr(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},tn.API={events:[]},tn.version="3.0.3";var Ps=tn.API,MF=1,vm=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Gm=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Cn=function(e){return e.toFixed(2)},eA=function(e){return e.toFixed(5)};Ps.__acroform__={};var wo=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Q6=function(e){return e*MF},fd=function(e){var t=new EZ,n=Vt.internal.getHeight(e)||0,r=Vt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Cn(r)),Number(Cn(n))],t},u6e=Ps.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},h6e=Ps.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},A6e=Ps.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},qs=Ps.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return A6e(e,t-1)},Ks=Ps.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return u6e(e,t-1)},Ws=Ps.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return h6e(e,t-1)},f6e=Ps.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,s=e[0],i=e[1],o=e[2],c=e[3],l={};return l.lowerLeft_X=n(s)||0,l.lowerLeft_Y=r(i+c)||0,l.upperRight_X=n(s+o)||0,l.upperRight_Y=r(i)||0,[Number(Cn(l.lowerLeft_X)),Number(Cn(l.lowerLeft_Y)),Number(Cn(l.upperRight_X)),Number(Cn(l.upperRight_Y))]},p6e=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=bI(e,n),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+Cn(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=fd(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},bI=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map(function(I){return I.split(`
`)}):s.map(function(I){return[I]});var i=n,o=Vt.internal.getHeight(e)||0;o=o<0?-o:o;var c=Vt.internal.getWidth(e)||0;c=c<0?-c:c;var l=function(I,T,Q){if(I+1<s.length){var D=T+" "+s[I+1][0];return L1(D,e,Q).width<=c-4}return!1};i++;e:for(;i>0;){t="",i--;var d,u,h=L1("3",e,i).height,A=e.multiline?o-i:(o-h)/2,f=A+=2,m=0,g=0,b=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+L1(t,e,i=12).width+", FieldWidth:"+c+`
`;break}for(var y="",j=0,x=0;x<s.length;x++)if(s.hasOwnProperty(x)){var C=!1;if(s[x].length!==1&&b!==s[x].length-1){if((h+2)*(j+2)+2>o)continue e;y+=s[x][b],C=!0,g=x,x--}else{y=(y+=s[x][b]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var S=parseInt(x),_=l(S,y,i),N=x>=s.length-1;if(_&&!N){y+=" ",b=0;continue}if(_||N){if(N)g=S;else if(e.multiline&&(h+2)*(j+2)+2>o)continue e}else{if(!e.multiline||(h+2)*(j+2)+2>o)continue e;g=S}}for(var L="",P=m;P<=g;P++){var F=s[P];if(e.multiline){if(P===g){L+=F[b]+" ",b=(b+1)%F.length;continue}if(P===m){L+=F[F.length-1]+" ";continue}}L+=F[0]+" "}switch(L=L.substr(L.length-1)==" "?L.substr(0,L.length-1):L,u=L1(L,e,i).width,e.textAlign){case"right":d=c-u-2;break;case"center":d=(c-u)/2;break;default:d=2}t+=Cn(d)+" "+Cn(f)+` Td
`,t+="("+vm(L)+`) Tj
`,t+=-Cn(d)+` 0 Td
`,f=-(i+2),u=0,m=C?g:g+1,j++,y=""}break}return r.text=t,r.fontSize=i,r},L1=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:s}},m6e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},g6e=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},v6e=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Rl.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(m6e)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");MF=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new _Z,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in r)if(r.hasOwnProperty(s)){var i=r[s];i.objId=void 0,i.hasAnnotation&&g6e(i,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,s){var i=!r;for(var o in r||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var c=r[o],l=[],d=c.Rect;if(c.Rect&&(c.Rect=f6e(c.Rect,s)),s.internal.newObjectDeferredBegin(c.objId,!0),c.DA=Vt.createDefaultAppearanceStream(c),Sr(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(l=c.getKeyValueListForStream()),c.Rect=d,c.hasAppearanceStream&&!c.appearanceStreamContent){var u=p6e(c);l.push({key:"AP",value:"<</N "+u+">>"}),s.internal.acroformPlugin.xForms.push(u)}if(c.appearanceStreamContent){var h="";for(var A in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(A)){var f=c.appearanceStreamContent[A];if(h+="/"+A+" ",h+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var o in f)if(f.hasOwnProperty(o)){var m=f[o];typeof m=="function"&&(m=m.call(s,c)),h+="/"+o+" "+m+" ",s.internal.acroformPlugin.xForms.indexOf(m)>=0||s.internal.acroformPlugin.xForms.push(m)}}else typeof(m=f)=="function"&&(m=m.call(s,c)),h+="/"+o+" "+m,s.internal.acroformPlugin.xForms.indexOf(m)>=0||s.internal.acroformPlugin.xForms.push(m);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}s.internal.putStream({additionalKeyValues:l,objectId:c.objId}),s.internal.out("endobj")}i&&function(g,b){for(var y in g)if(g.hasOwnProperty(y)){var j=y,x=g[y];b.internal.newObjectDeferredBegin(x.objId,!0),Sr(x)==="object"&&typeof x.putStream=="function"&&x.putStream(),delete g[j]}}(s.internal.acroformPlugin.xForms,s)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},BZ=Ps.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(o){return o};if(Array.isArray(e)){for(var s="[",i=0;i<e.length;i++)switch(i!==0&&(s+=" "),Sr(e[i])){case"boolean":case"number":case"object":s+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),s+="("+vm(r(e[i].toString()))+")"):s+=e[i].toString()}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},uE=function(e,t,n){var r=function(s){return s};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+vm(r(e))+")"},Ed=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ed.prototype.toString=function(){return this.objId+" 0 R"},Ed.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Ed.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],s=this[r];s&&(Array.isArray(s)?e.push({key:r,value:BZ(s,this.objId,this.scope)}):s instanceof Ed?(s.scope=this.scope,e.push({key:r,value:s.objId+" 0 R"})):typeof s!="function"&&e.push({key:r,value:s}))}return e};var EZ=function(){Ed.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};wo(EZ,Ed);var _Z=function(){Ed.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+vm(n(e))+")"}},set:function(n){e=n}})};wo(_Z,Ed);var Rl=function e(){Ed.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!qs(t,3)},set:function(y){y?this.F=Ks(t,3):this.F=Ws(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');n=y}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(y){r=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(y){r[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(y){r[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(y){r[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(y){r[3]=y}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof yj)return;i="FieldObject"+e.FieldNum++}var y=function(j){return j};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+vm(y(i))+")"},set:function(y){i=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(y){i=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/MF:d},set:function(y){d=y}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(y){u=y}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof yj||this instanceof Up))return uE(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=y}});var A=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof Bi==0?uE(A,this.objId,this.scope):A},set:function(y){y=y.toString(),A=this instanceof Bi==0?y.substr(0,1)==="("?Gm(y.substr(1,y.length-2)):Gm(y):y}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Bi==1?Gm(A.substr(1,A.length-1)):A},set:function(y){y=y.toString(),A=this instanceof Bi==1?"/"+y:y}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Bi==0?uE(f,this.objId,this.scope):f},set:function(y){y=y.toString(),f=this instanceof Bi==0?y.substr(0,1)==="("?Gm(y.substr(1,y.length-2)):Gm(y):y}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Bi==1?Gm(f.substr(1,f.length-1)):f},set:function(y){y=y.toString(),f=this instanceof Bi==1?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(y){y=!!y,g=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(y){m=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,1)},set:function(y){y?this.Ff=Ks(this.Ff,1):this.Ff=Ws(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,2)},set:function(y){y?this.Ff=Ks(this.Ff,2):this.Ff=Ws(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,3)},set:function(y){y?this.Ff=Ks(this.Ff,3):this.Ff=Ws(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');b=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(b){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:b=2;break;case"center":case 1:b=1;break;default:b=0}}})};wo(Rl,Ed);var Kg=function(){Rl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return BZ(t,this.objId,this.scope)},set:function(n){var r,s;s=[],typeof(r=n)=="string"&&(s=function(i,o,c){c||(c=1);for(var l,d=[];l=o.exec(i);)d.push(l[c]);return d}(r,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,18)},set:function(n){n?this.Ff=Ks(this.Ff,18):this.Ff=Ws(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Ks(this.Ff,19):this.Ff=Ws(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,20)},set:function(n){n?(this.Ff=Ks(this.Ff,20),t.sort()):this.Ff=Ws(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,22)},set:function(n){n?this.Ff=Ks(this.Ff,22):this.Ff=Ws(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,23)},set:function(n){n?this.Ff=Ks(this.Ff,23):this.Ff=Ws(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,27)},set:function(n){n?this.Ff=Ks(this.Ff,27):this.Ff=Ws(this.Ff,27)}}),this.hasAppearanceStream=!1};wo(Kg,Rl);var Wg=function(){Kg.call(this),this.fontName="helvetica",this.combo=!1};wo(Wg,Kg);var Gg=function(){Wg.call(this),this.combo=!0};wo(Gg,Wg);var K2=function(){Gg.call(this),this.edit=!0};wo(K2,Gg);var Bi=function(){Rl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,15)},set:function(n){n?this.Ff=Ks(this.Ff,15):this.Ff=Ws(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,16)},set:function(n){n?this.Ff=Ks(this.Ff,16):this.Ff=Ws(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,17)},set:function(n){n?this.Ff=Ks(this.Ff,17):this.Ff=Ws(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,26)},set:function(n){n?this.Ff=Ks(this.Ff,26):this.Ff=Ws(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(i){return i};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,s=[];for(r in s.push("<<"),t)s.push("/"+r+" ("+vm(n(t[r]))+")");return s.push(">>"),s.join(`
`)}},set:function(n){Sr(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};wo(Bi,Rl);var W2=function(){Bi.call(this),this.pushButton=!0};wo(W2,Bi);var Yg=function(){Bi.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};wo(Yg,Bi);var yj=function(){var e,t;Rl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(c){return c};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),r)o.push("/"+i+" ("+vm(s(r[i]))+")");return o.push(">>"),o.join(`
`)},set:function(s){Sr(s)==="object"&&(r=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(s){typeof s=="string"&&(r.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(s){n="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Vt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};wo(yj,Rl),Yg.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Yg.prototype.createOption=function(e){var t=new yj;return t.Parent=this,t.optionName=e,this.Kids.push(t),y6e.call(this.scope,t),t};var G2=function(){Bi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Vt.CheckBox.createAppearanceStream()};wo(G2,Bi);var Up=function(){Rl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,13)},set:function(t){t?this.Ff=Ks(this.Ff,13):this.Ff=Ws(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,21)},set:function(t){t?this.Ff=Ks(this.Ff,21):this.Ff=Ws(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,23)},set:function(t){t?this.Ff=Ks(this.Ff,23):this.Ff=Ws(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,24)},set:function(t){t?this.Ff=Ks(this.Ff,24):this.Ff=Ws(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,25)},set:function(t){t?this.Ff=Ks(this.Ff,25):this.Ff=Ws(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,26)},set:function(t){t?this.Ff=Ks(this.Ff,26):this.Ff=Ws(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};wo(Up,Rl);var Y2=function(){Up.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,14)},set:function(e){e?this.Ff=Ks(this.Ff,14):this.Ff=Ws(this.Ff,14)}}),this.password=!0};wo(Y2,Up);var Vt={CheckBox:{createAppearanceStream:function(){return{N:{On:Vt.CheckBox.YesNormal},D:{On:Vt.CheckBox.YesPushDown,Off:Vt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=fd(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),i=bI(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Cn(Vt.internal.getWidth(e))+" "+Cn(Vt.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Cn(i.fontSize)+" Tf "+s),n.push("BT"),n.push(i.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=fd(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),s=[],i=Vt.internal.getHeight(e),o=Vt.internal.getWidth(e),c=bI(e,e.caption);return s.push("1 g"),s.push("0 0 "+Cn(o)+" "+Cn(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Cn(o-1)+" "+Cn(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+n+" "+Cn(c.fontSize)+" Tf "+r),s.push(c.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=fd(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Cn(Vt.internal.getWidth(e))+" "+Cn(Vt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Vt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Vt.RadioButton.Circle.YesNormal,t.D[e]=Vt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=fd(e);t.scope=e.scope;var n=[],r=Vt.internal.getWidth(e)<=Vt.internal.getHeight(e)?Vt.internal.getWidth(e)/4:Vt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var s=Vt.internal.Bezier_C,i=Number((r*s).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+eA(Vt.internal.getWidth(e)/2)+" "+eA(Vt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=fd(e);t.scope=e.scope;var n=[],r=Vt.internal.getWidth(e)<=Vt.internal.getHeight(e)?Vt.internal.getWidth(e)/4:Vt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*Vt.internal.Bezier_C).toFixed(5)),o=Number((r*Vt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+eA(Vt.internal.getWidth(e)/2)+" "+eA(Vt.internal.getHeight(e)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),n.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),n.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),n.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+eA(Vt.internal.getWidth(e)/2)+" "+eA(Vt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=fd(e);t.scope=e.scope;var n=[],r=Vt.internal.getWidth(e)<=Vt.internal.getHeight(e)?Vt.internal.getWidth(e)/4:Vt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*Vt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+eA(Vt.internal.getWidth(e)/2)+" "+eA(Vt.internal.getHeight(e)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),n.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),n.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),n.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Vt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Vt.RadioButton.Cross.YesNormal,t.D[e]=Vt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=fd(e);t.scope=e.scope;var n=[],r=Vt.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Cn(Vt.internal.getWidth(e)-2)+" "+Cn(Vt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Cn(r.x1.x)+" "+Cn(r.x1.y)+" m"),n.push(Cn(r.x2.x)+" "+Cn(r.x2.y)+" l"),n.push(Cn(r.x4.x)+" "+Cn(r.x4.y)+" m"),n.push(Cn(r.x3.x)+" "+Cn(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=fd(e);t.scope=e.scope;var n=Vt.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Cn(Vt.internal.getWidth(e))+" "+Cn(Vt.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Cn(Vt.internal.getWidth(e)-2)+" "+Cn(Vt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Cn(n.x1.x)+" "+Cn(n.x1.y)+" m"),r.push(Cn(n.x2.x)+" "+Cn(n.x2.y)+" l"),r.push(Cn(n.x4.x)+" "+Cn(n.x4.y)+" m"),r.push(Cn(n.x3.x)+" "+Cn(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=fd(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Cn(Vt.internal.getWidth(e))+" "+Cn(Vt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};Vt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Vt.internal.getWidth(e),n=Vt.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},Vt.internal.getWidth=function(e){var t=0;return Sr(e)==="object"&&(t=Q6(e.Rect[2])),t},Vt.internal.getHeight=function(e){var t=0;return Sr(e)==="object"&&(t=Q6(e.Rect[3])),t};var y6e=Ps.addField=function(e){if(v6e(this,e),!(e instanceof Rl))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Ps.AcroFormChoiceField=Kg,Ps.AcroFormListBox=Wg,Ps.AcroFormComboBox=Gg,Ps.AcroFormEditBox=K2,Ps.AcroFormButton=Bi,Ps.AcroFormPushButton=W2,Ps.AcroFormRadioButton=Yg,Ps.AcroFormCheckBox=G2,Ps.AcroFormTextField=Up,Ps.AcroFormPasswordField=Y2,Ps.AcroFormAppearance=Vt,Ps.AcroForm={ChoiceField:Kg,ListBox:Wg,ComboBox:Gg,EditBox:K2,Button:Bi,PushButton:W2,RadioButton:Yg,CheckBox:G2,TextField:Up,PasswordField:Y2,Appearance:Vt},tn.AcroForm={ChoiceField:Kg,ListBox:Wg,ComboBox:Gg,EditBox:K2,Button:Bi,PushButton:W2,RadioButton:Yg,CheckBox:G2,TextField:Up,PasswordField:Y2,Appearance:Vt};function IZ(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){var t="addImage_";e.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=e.__addimage__.getImageFileTypeByImageData=function(I,T){var Q,D,M,U,H,$=n;if((T=T||n)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(_(I))for(H in r)for(M=r[H],Q=0;Q<M.length;Q+=1){for(U=!0,D=0;D<M[Q].length;D+=1)if(M[Q][D]!==void 0&&M[Q][D]!==I[D]){U=!1;break}if(U===!0){$=H;break}}else for(H in r)for(M=r[H],Q=0;Q<M.length;Q+=1){for(U=!0,D=0;D<M[Q].length;D+=1)if(M[Q][D]!==void 0&&M[Q][D]!==I.charCodeAt(D)){U=!1;break}if(U===!0){$=H;break}}return $===n&&T!==n&&($=T),$},i=function I(T){for(var Q=this.internal.write,D=this.internal.putStream,M=(0,this.internal.getFilters)();M.indexOf("FlateEncode")!==-1;)M.splice(M.indexOf("FlateEncode"),1);T.objectId=this.internal.newObject();var U=[];if(U.push({key:"Type",value:"/XObject"}),U.push({key:"Subtype",value:"/Image"}),U.push({key:"Width",value:T.width}),U.push({key:"Height",value:T.height}),T.colorSpace===y.INDEXED?U.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(T.palette.length/3-1)+" "+("sMask"in T&&T.sMask!==void 0?T.objectId+2:T.objectId+1)+" 0 R]"}):(U.push({key:"ColorSpace",value:"/"+T.colorSpace}),T.colorSpace===y.DEVICE_CMYK&&U.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),U.push({key:"BitsPerComponent",value:T.bitsPerComponent}),"decodeParameters"in T&&T.decodeParameters!==void 0&&U.push({key:"DecodeParms",value:"<<"+T.decodeParameters+">>"}),"transparency"in T&&Array.isArray(T.transparency)&&T.transparency.length>0){for(var H="",$=0,R=T.transparency.length;$<R;$++)H+=T.transparency[$]+" "+T.transparency[$]+" ";U.push({key:"Mask",value:"["+H+"]"})}T.sMask!==void 0&&U.push({key:"SMask",value:T.objectId+1+" 0 R"});var Y=T.filter!==void 0?["/"+T.filter]:void 0;if(D({data:T.data,additionalKeyValues:U,alreadyAppliedFilters:Y,objectId:T.objectId}),Q("endobj"),"sMask"in T&&T.sMask!==void 0){var X,q=(X=T.sMaskBitsPerComponent)!==null&&X!==void 0?X:T.bitsPerComponent,K={width:T.width,height:T.height,colorSpace:"DeviceGray",bitsPerComponent:q,data:T.sMask};"filter"in T&&(K.decodeParameters="/Predictor ".concat(T.predictor," /Colors 1 /BitsPerComponent ").concat(q," /Columns ").concat(T.width),K.filter=T.filter),I.call(this,K)}if(T.colorSpace===y.INDEXED){var J=this.internal.newObject();D({data:L(new Uint8Array(T.palette)),objectId:J}),Q("endobj")}},o=function(){var I=this.internal.collections[t+"images"];for(var T in I)i.call(this,I[T])},c=function(){var I,T=this.internal.collections[t+"images"],Q=this.internal.write;for(var D in T)Q("/I"+(I=T[D]).index,I.objectId,"0","R")},l=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",c))},d=function(){var I=this.internal.collections[t+"images"];return l.call(this),I},u=function(){return Object.keys(this.internal.collections[t+"images"]).length},h=function(I){return typeof e["process"+I.toUpperCase()]=="function"},A=function(I){return Sr(I)==="object"&&I.nodeType===1},f=function(I,T){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var Q=""+I.getAttribute("src");if(Q.indexOf("data:image/")===0)return q2(unescape(Q).split("base64,").pop());var D=e.loadFile(Q,!0);if(D!==void 0)return D}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var M;switch(T){case"PNG":M="image/png";break;case"WEBP":M="image/webp";break;default:M="image/jpeg"}return q2(I.toDataURL(M,1).split("base64,").pop())}},m=function(I){var T=this.internal.collections[t+"images"];if(T){for(var Q in T)if(I===T[Q].alias)return T[Q]}},g=function(I,T,Q){return I||T||(I=-96,T=-96),I<0&&(I=-1*Q.width*72/I/this.internal.scaleFactor),T<0&&(T=-1*Q.height*72/T/this.internal.scaleFactor),I===0&&(I=T*Q.width/Q.height),T===0&&(T=I*Q.height/Q.width),[I,T]},b=function(I,T,Q,D,M,U){var H=g.call(this,Q,D,M),$=this.internal.getCoordinateString,R=this.internal.getVerticalCoordinateString,Y=d.call(this);if(Q=H[0],D=H[1],Y[M.index]=M,U){U*=Math.PI/180;var X=Math.cos(U),q=Math.sin(U),K=function(W){return W.toFixed(4)},J=[K(X),K(q),K(-1*q),K(X),0,0,"cm"]}this.internal.write("q"),U?(this.internal.write([1,"0","0",1,$(I),R(T+D),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([$(Q),"0","0",$(D),"0","0","cm"].join(" "))):this.internal.write([$(Q),"0","0",$(D),$(I),R(T+D),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+M.index+" Do"),this.internal.write("Q")},y=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var j=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},x=e.__addimage__.sHashCode=function(I){var T,Q,D=0;if(typeof I=="string")for(Q=I.length,T=0;T<Q;T++)D=(D<<5)-D+I.charCodeAt(T),D|=0;else if(_(I))for(Q=I.byteLength/2,T=0;T<Q;T++)D=(D<<5)-D+I[T],D|=0;return D},C=e.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var T=!0;return I.length===0&&(T=!1),I.length%4!=0&&(T=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(T=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(T=!1),T},S=e.__addimage__.extractImageFromDataUrl=function(I){if(I==null||!(I=I.trim()).startsWith("data:"))return null;var T=I.indexOf(",");return T<0?null:I.substring(0,T).trim().endsWith("base64")?I.substring(T+1):null};e.__addimage__.isArrayBuffer=function(I){return I instanceof ArrayBuffer};var _=e.__addimage__.isArrayBufferView=function(I){return I instanceof Int8Array||I instanceof Uint8Array||I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array},N=e.__addimage__.binaryStringToUint8Array=function(I){for(var T=I.length,Q=new Uint8Array(T),D=0;D<T;D++)Q[D]=I.charCodeAt(D);return Q},L=e.__addimage__.arrayBufferToBinaryString=function(I){for(var T="",Q=_(I)?I:new Uint8Array(I),D=0;D<Q.length;D+=8192)T+=String.fromCharCode.apply(null,Q.subarray(D,D+8192));return T};e.addImage=function(){var I,T,Q,D,M,U,H,$,R;if(typeof arguments[1]=="number"?(T=n,Q=arguments[1],D=arguments[2],M=arguments[3],U=arguments[4],H=arguments[5],$=arguments[6],R=arguments[7]):(T=arguments[1],Q=arguments[2],D=arguments[3],M=arguments[4],U=arguments[5],H=arguments[6],$=arguments[7],R=arguments[8]),Sr(I=arguments[0])==="object"&&!A(I)&&"imageData"in I){var Y=I;I=Y.imageData,T=Y.format||T||n,Q=Y.x||Q||0,D=Y.y||D||0,M=Y.w||Y.width||M,U=Y.h||Y.height||U,H=Y.alias||H,$=Y.compression||$,R=Y.rotation||Y.angle||R}var X=this.internal.getFilters();if($===void 0&&X.indexOf("FlateEncode")!==-1&&($="SLOW"),isNaN(Q)||isNaN(D))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var q=P.call(this,I,T,H,$);return b.call(this,Q,D,M,U,q,R),this};var P=function(I,T,Q,D){var M,U,H;if(typeof I=="string"&&s(I)===n){I=unescape(I);var $=F(I,!1);($!==""||($=e.loadFile(I,!0))!==void 0)&&(I=$)}if(A(I)&&(I=f(I,T)),T=s(I,T),!h(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(((H=Q)==null||H.length===0)&&(Q=function(R){return typeof R=="string"||_(R)?x(R):_(R.data)?x(R.data):null}(I)),(M=m.call(this,Q))||(I instanceof Uint8Array||T==="RGBA"||(U=I,I=N(I)),M=this["process"+T.toUpperCase()](I,u.call(this),Q,function(R){return R&&typeof R=="string"&&(R=R.toUpperCase()),R in e.image_compression?R:j.NONE}(D),U)),!M)throw new Error("An unknown error occurred whilst processing the image.");return M},F=e.__addimage__.convertBase64ToBinaryString=function(I,T){T=typeof T!="boolean"||T;var Q,D="";if(typeof I=="string"){var M;Q=(M=S(I))!==null&&M!==void 0?M:I;try{D=q2(Q)}catch(U){if(T)throw C(Q)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+U.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return D};e.getImageProperties=function(I){var T,Q,D="";if(A(I)&&(I=f(I)),typeof I=="string"&&s(I)===n&&((D=F(I,!1))===""&&(D=e.loadFile(I)||""),I=D),Q=s(I),!h(Q))throw new Error("addImage does not support files of type '"+Q+"', please ensure that a plugin for '"+Q+"' support is added.");if(I instanceof Uint8Array||(I=N(I)),!(T=this["process"+Q.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return T.fileType=Q,T}})(tn.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};tn.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,s,i,o=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),d=n.pageContext.annotations,u=!1,h=0;h<d.length&&!u;h++)switch((r=d[h]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var A=0;A<d.length;A++){r=d[A];var f=this.internal.pdfEscape,m=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(g.objId),j=r.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+o(r.bounds.x)+" "+c(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+c(r.bounds.y)+"] ")+"/Contents ("+f(y(r.contents))+")",i+=" /Popup "+b.objId+" 0 R",i+=" /P "+l.objId+" 0 R",i+=" /T ("+f(y(j))+") >>",g.content=i;var x=g.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+o(r.bounds.x+30)+" "+c(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+c(r.bounds.y)+"] ")+" /Parent "+x,r.open&&(i+=" /Open true"),i+=" >>",b.content=i,this.internal.write(g.objId,"0 R",b.objId,"0 R");break;case"freetext":s="/Rect ["+o(r.bounds.x)+" "+c(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+c(r.bounds.y+r.bounds.h)+"] ";var C=r.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+f(m(r.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+C+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(r.options.name){var S=this.annotations._nameMap[r.options.name];r.options.pageNumber=S.page,r.options.top=S.y}else r.options.top||(r.options.top=0);if(s="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",i="",r.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+f(m(r.options.url))+") >>";else if(r.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,i+=" /FitV "+r.options.left+"]";break;default:var _=c(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),i+=" /XYZ "+r.options.left+" "+_+" "+r.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,s,i,o){var c=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:l(n),y:d(r),w:l(n+s),h:d(r+i)},options:o,type:"link"})},e.textWithLink=function(n,r,s,i){var o,c,l=this.getTextWidth(n),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){c=i.maxWidth;var u=this.splitTextToSize(n,c).length;o=Math.ceil(d*u)}else c=l,o=d;return this.text(n,r,s,i),s+=.2*d,i.align==="center"&&(r-=l/2),i.align==="right"&&(r-=l),this.link(r,s-d,c,o,i),l},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(tn.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(g){return t[g.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},c=e.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&s.indexOf(g.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length==4},h=e.__arabicParser__.resolveLigatures=function(g){var b=0,y=n,j="",x=0;for(b=0;b<g.length;b+=1)y[g.charCodeAt(b)]!==void 0?(x++,typeof(y=y[g.charCodeAt(b)])=="number"&&(j+=String.fromCharCode(y),y=n,x=0),b===g.length-1&&(y=n,j+=g.charAt(b-(x-1)),b-=x-1,x=0)):(y=n,j+=g.charAt(b-x),b-=x,x=0);return j};e.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&r[g.charCodeAt(0)]!==void 0};var A=e.__arabicParser__.getCorrectForm=function(g,b,y){return o(g)?i(g)===!1?-1:!d(g)||!o(b)&&!o(y)||!o(y)&&c(b)||c(g)&&!o(b)||c(g)&&l(b)||c(g)&&c(b)?0:u(g)&&o(b)&&!c(b)&&o(y)&&d(y)?3:c(g)||!o(y)?1:2:-1},f=function(g){var b=0,y=0,j=0,x="",C="",S="",_=(g=g||"").split("\\s+"),N=[];for(b=0;b<_.length;b+=1){for(N.push(""),y=0;y<_[b].length;y+=1)x=_[b][y],C=_[b][y-1],S=_[b][y+1],o(x)?(j=A(x,C,S),N[b]+=j!==-1?String.fromCharCode(t[x.charCodeAt(0)][j]):x):N[b]+=x;N[b]=h(N[b])}return N.join(" ")},m=e.__arabicParser__.processArabic=e.processArabic=function(){var g,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(b)){var j=0;for(y=[],j=0;j<b.length;j+=1)Array.isArray(b[j])?y.push([f(b[j][0]),b[j][1],b[j][2]]):y.push([f(b[j])]);g=y}else g=f(b);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};e.events.push(["preProcessText",m])}(tn.API),tn.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(c){n=c}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(c){r=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(c){s=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(c){i=c}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(c){o=c}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var s;if((n=n||"2d")!=="2d")return null;for(s in r)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=r[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(tn.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(g){l=g}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var A=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return A},set:function(g){A=g}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(g){m=g}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},e.getTextDimensions=function(l,d){r.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),h=d.font||this.getFont(),A=d.scaleFactor||this.internal.scaleFactor,f=0,m=0,g=0,b=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var y=d.maxWidth;y>0?typeof l=="string"?l=this.splitTextToSize(l,y):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(x,C){return x.concat(b.splitTextToSize(C,y))},[])):l=Array.isArray(l)?l:[l];for(var j=0;j<l.length;j++)f<(g=this.getStringUnitWidth(l[j],{font:h})*u)&&(f=g);return f!==0&&(m=l.length),{w:f/=A,h:Math.max((m*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/A,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var l;l=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||t,A=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===l.lineNumber?(l.x=(d.x||0)+(d.width||0),l.y=d.y||0):d.y+d.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,f&&A&&(this.printHeaderRow(l.lineNumber,!0),l.y+=A[0].height)):l.y=d.y+d.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};e.table=function(l,d,u,h,A){if(r.call(this),!u)throw new Error("No data for PDF table.");var f,m,g,b,y=[],j=[],x=[],C={},S={},_=[],N=[],L=(A=A||{}).autoSize||!1,P=A.printHeaders!==!1,F=A.css&&A.css["font-size"]!==void 0?16*A.css["font-size"]:A.fontSize||12,I=A.margins||Object.assign({width:this.getPageWidth()},t),T=typeof A.padding=="number"?A.padding:3,Q=A.headerBackgroundColor||"#c8c8c8",D=A.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=P,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=F,this.internal.__cell__.padding=T,this.internal.__cell__.headerBackgroundColor=Q,this.internal.__cell__.headerTextColor=D,this.setFontSize(F),h==null)j=y=Object.keys(u[0]),x=y.map(function(){return"left"});else if(Array.isArray(h)&&Sr(h[0])==="object")for(y=h.map(function(Y){return Y.name}),j=h.map(function(Y){return Y.prompt||Y.name||""}),x=h.map(function(Y){return Y.align||"left"}),f=0;f<h.length;f+=1)S[h[f].name]=.7499990551181103*h[f].width;else Array.isArray(h)&&typeof h[0]=="string"&&(j=y=h,x=y.map(function(){return"left"}));if(L||Array.isArray(h)&&typeof h[0]=="string")for(f=0;f<y.length;f+=1){for(C[b=y[f]]=u.map(function(Y){return Y[b]}),this.setFont(void 0,"bold"),_.push(this.getTextDimensions(j[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=C[b],this.setFont(void 0,"normal"),g=0;g<m.length;g+=1)_.push(this.getTextDimensions(m[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);S[b]=Math.max.apply(null,_)+T+T,_=[]}if(P){var M={};for(f=0;f<y.length;f+=1)M[y[f]]={},M[y[f]].text=j[f],M[y[f]].align=x[f];var U=c.call(this,M,S);N=y.map(function(Y){return new i(l,d,S[Y],U,M[Y].text,void 0,M[Y].align)}),this.setTableHeaderRow(N),this.printHeaderRow(1,!1)}var H=h.reduce(function(Y,X){return Y[X.name]=X.align,Y},{});for(f=0;f<u.length;f+=1){"rowStart"in A&&A.rowStart instanceof Function&&A.rowStart({row:f,data:u[f]},this);var $=c.call(this,u[f],S);for(g=0;g<y.length;g+=1){var R=u[f][y[g]];"cellStart"in A&&A.cellStart instanceof Function&&A.cellStart({row:f,col:g,data:R},this),o.call(this,new i(l,d,S[y[g]],$,R,f+2,H[y[g]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=d,this};var c=function(l,d){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,A=this.internal.scaleFactor;return Object.keys(l).map(function(f){var m=l[f];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,d[f]-u-u)},this).map(function(f){return this.getLineHeightFactor()*f.length*h/A+u+u},this).reduce(function(f,m){return Math.max(f,m)},0)};e.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},e.printHeaderRow=function(l,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var A=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){u=this.internal.__cell__.tableHeaderRow[f].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,A.push(u)),u.lineNumber=l;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(m)}A.length>0&&this.setTableHeaderRow(A),this.setFont(void 0,"normal"),n=!1}}(tn.API);var PZ={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},TZ=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],CI=IZ(TZ),FZ=[100,200,300,400,500,600,700,800,900],x6e=IZ(FZ);function hE(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(i){return PZ[i=i||"normal"]?i:"normal"}(e.style),r=function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400}(e.weight),s=function(i){return typeof CI[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,n,r].join(" ")}}}function H6(e,t,n,r){var s;for(s=n;s>=0&&s<t.length;s+=r)if(e[t[s]])return e[t[s]];for(s=n;s>=0&&s<t.length;s-=r)if(e[t[s]])return e[t[s]]}var w6e={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},$6={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function z6(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function V6(e){return e.trimLeft()}function b6e(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function C6e(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var M1,q6,K6,Ym,R1,W6,G6,Y6,AE=["times"];function X6(e,t,n,r,s){var i=4,o=Z6;switch(s){case tn.API.image_compression.FAST:i=1,o=J6;break;case tn.API.image_compression.MEDIUM:i=6,o=eQ;break;case tn.API.image_compression.SLOW:i=9,o=tQ}e=function(l,d,u,h){for(var A,f=l.length/d,m=new Uint8Array(l.length+f),g=[j6e,J6,Z6,eQ,tQ],b=0;b<f;b+=1){var y=b*d,j=l.subarray(y,y+d);if(h)m.set(h(j,u,A),y+b);else{for(var x=g.length,C=[],S=0;S<x;S+=1)C[S]=g[S](j,u,A);var _=S6e(C.concat());m.set(C[_],y+b)}A=j}return m}(e,t,Math.ceil(n*r/8),o);var c=dI(e,{level:i});return tn.API.__addimage__.arrayBufferToBinaryString(c)}function j6e(e){var t=Array.apply([],e);return t.unshift(0),t}function J6(e,t){var n=e.length,r=[];r[0]=1;for(var s=0;s<n;s+=1){var i=e[s-t]||0;r[s+1]=e[s]-i+256&255}return r}function Z6(e,t,n){var r=e.length,s=[];s[0]=2;for(var i=0;i<r;i+=1){var o=n&&n[i]||0;s[i+1]=e[i]-o+256&255}return s}function eQ(e,t,n){var r=e.length,s=[];s[0]=3;for(var i=0;i<r;i+=1){var o=e[i-t]||0,c=n&&n[i]||0;s[i+1]=e[i]+256-(o+c>>>1)&255}return s}function tQ(e,t,n){var r=e.length,s=[];s[0]=4;for(var i=0;i<r;i+=1){var o=k6e(e[i-t]||0,n&&n[i]||0,n&&n[i-t]||0);s[i+1]=e[i]-o+256&255}return s}function k6e(e,t,n){if(e===t&&t===n)return e;var r=Math.abs(t-n),s=Math.abs(e-n),i=Math.abs(e+t-n-n);return r<=s&&r<=i?e:s<=i?t:n}function S6e(e){var t=e.map(function(n){return n.reduce(function(r,s){return r+Math.abs(s)},0)});return t.indexOf(Math.min.apply(null,t))}function fE(e,t,n){var r=t*n,s=Math.floor(r/8),i=16-(r-8*s+n),o=(1<<n)-1;return DZ(e,s)>>i&o}function nQ(e,t,n,r){var s=n*r,i=Math.floor(s/8),o=16-(s-8*i+r),c=(1<<r)-1,l=(t&c)<<o;(function(d,u,h){if(u+1<d.byteLength)d.setUint16(u,h,!1);else{var A=h>>8&255;d.setUint8(u,A)}})(e,i,DZ(e,i)&~(c<<o)&65535|l)}function DZ(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function N6e(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,s=e[t++],i=s>>7,o=1<<1+(7&s);e[t++],e[t++];var c=null,l=null;i&&(c=t,l=o,t+=3*o);var d=!0,u=[],h=0,A=null,f=0,m=null;for(this.width=n,this.height=r;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,m=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((I=e[t++])>=0))throw Error("Invalid block size");if(I===0)break;t+=I}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var g=e[t++];h=e[t++]|e[t++]<<8,A=e[t++],1&g||(A=null),f=g>>2&7,t++;break;case 254:for(;;){if(!((I=e[t++])>=0))throw Error("Invalid block size");if(I===0)break;t+=I}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var b=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,j=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,C=e[t++],S=C>>6&1,_=1<<1+(7&C),N=c,L=l,P=!1;C>>7&&(P=!0,N=t,L=_,t+=3*_);var F=t;for(t++;;){var I;if(!((I=e[t++])>=0))throw Error("Invalid block size");if(I===0)break;t+=I}u.push({x:b,y,width:j,height:x,has_local_palette:P,palette_offset:N,palette_size:L,data_offset:F,data_length:t-F,transparent_index:A,interlaced:!!S,delay:h,disposal:f});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return m},this.frameInfo=function(T){if(T<0||T>=u.length)throw new Error("Frame index out of range.");return u[T]},this.decodeAndBlitFrameBGRA=function(T,Q){var D=this.frameInfo(T),M=D.width*D.height,U=new Uint8Array(M);rQ(e,D.data_offset,U,M);var H=D.palette_offset,$=D.transparent_index;$===null&&($=256);var R=D.width,Y=n-R,X=R,q=4*(D.y*n+D.x),K=4*((D.y+D.height)*n+D.x),J=q,W=4*Y;D.interlaced===!0&&(W+=4*n*7);for(var ne=8,ae=0,ce=U.length;ae<ce;++ae){var Ae=U[ae];if(X===0&&(X=R,(J+=W)>=K&&(W=4*Y+4*n*(ne-1),J=q+(R+Y)*(ne<<1),ne>>=1)),Ae===$)J+=4;else{var pe=e[H+3*Ae],be=e[H+3*Ae+1],Ne=e[H+3*Ae+2];Q[J++]=Ne,Q[J++]=be,Q[J++]=pe,Q[J++]=255}--X}},this.decodeAndBlitFrameRGBA=function(T,Q){var D=this.frameInfo(T),M=D.width*D.height,U=new Uint8Array(M);rQ(e,D.data_offset,U,M);var H=D.palette_offset,$=D.transparent_index;$===null&&($=256);var R=D.width,Y=n-R,X=R,q=4*(D.y*n+D.x),K=4*((D.y+D.height)*n+D.x),J=q,W=4*Y;D.interlaced===!0&&(W+=4*n*7);for(var ne=8,ae=0,ce=U.length;ae<ce;++ae){var Ae=U[ae];if(X===0&&(X=R,(J+=W)>=K&&(W=4*Y+4*n*(ne-1),J=q+(R+Y)*(ne<<1),ne>>=1)),Ae===$)J+=4;else{var pe=e[H+3*Ae],be=e[H+3*Ae+1],Ne=e[H+3*Ae+2];Q[J++]=pe,Q[J++]=be,Q[J++]=Ne,Q[J++]=255}--X}}}function rQ(e,t,n,r){for(var s=e[t++],i=1<<s,o=i+1,c=o+1,l=s+1,d=(1<<l)-1,u=0,h=0,A=0,f=e[t++],m=new Int32Array(4096),g=null;;){for(;u<16&&f!==0;)h|=e[t++]<<u,u+=8,f===1?f=e[t++]:--f;if(u<l)break;var b=h&d;if(h>>=l,u-=l,b!==i){if(b===o)break;for(var y=b<c?b:g,j=0,x=y;x>i;)x=m[x]>>8,++j;var C=x;if(A+j+(y!==b?1:0)>r)return void Ur.log("Warning, gif stream longer than expected.");n[A++]=C;var S=A+=j;for(y!==b&&(n[A++]=C),x=y;j--;)x=m[x],n[--S]=255&x,x>>=8;g!==null&&c<4096&&(m[c++]=g<<8|C,c>=d+1&&l<12&&(++l,d=d<<1|1)),g=b}else c=o+1,d=(1<<(l=s+1))-1,g=null}return A!==r&&Ur.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function pE(e){var t,n,r,s,i,o=Math.floor,c=new Array(64),l=new Array(64),d=new Array(64),u=new Array(64),h=new Array(65535),A=new Array(65535),f=new Array(64),m=new Array(64),g=[],b=0,y=7,j=new Array(64),x=new Array(64),C=new Array(64),S=new Array(256),_=new Array(2048),N=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],L=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],T=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Q=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],M=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function U(q,K){for(var J=0,W=0,ne=new Array,ae=1;ae<=16;ae++){for(var ce=1;ce<=q[ae];ce++)ne[K[W]]=[],ne[K[W]][0]=J,ne[K[W]][1]=ae,W++,J++;J*=2}return ne}function H(q){for(var K=q[0],J=q[1]-1;J>=0;)K&1<<J&&(b|=1<<y),J--,--y<0&&(b==255?($(255),$(0)):$(b),y=7,b=0)}function $(q){g.push(q)}function R(q){$(q>>8&255),$(255&q)}function Y(q,K,J,W,ne){for(var ae,ce=ne[0],Ae=ne[240],pe=function(Me,kt){var ct,Nt,bt,An,$t,Rt,Le,Ke,it,pt,At=0;for(it=0;it<8;++it){ct=Me[At],Nt=Me[At+1],bt=Me[At+2],An=Me[At+3],$t=Me[At+4],Rt=Me[At+5],Le=Me[At+6];var rn=ct+(Ke=Me[At+7]),vt=ct-Ke,Bt=Nt+Le,Xt=Nt-Le,bn=bt+Rt,Qt=bt-Rt,on=An+$t,It=An-$t,Ut=rn+on,Wn=rn-on,Nn=Bt+bn,en=Bt-bn;Me[At]=Ut+Nn,Me[At+4]=Ut-Nn;var wt=.707106781*(en+Wn);Me[At+2]=Wn+wt,Me[At+6]=Wn-wt;var Gn=.382683433*((Ut=It+Qt)-(en=Xt+vt)),Bn=.5411961*Ut+Gn,ir=1.306562965*en+Gn,rs=.707106781*(Nn=Qt+Xt),St=vt+rs,pr=vt-rs;Me[At+5]=pr+Bn,Me[At+3]=pr-Bn,Me[At+1]=St+ir,Me[At+7]=St-ir,At+=8}for(At=0,it=0;it<8;++it){ct=Me[At],Nt=Me[At+8],bt=Me[At+16],An=Me[At+24],$t=Me[At+32],Rt=Me[At+40],Le=Me[At+48];var Vr=ct+(Ke=Me[At+56]),nr=ct-Ke,Re=Nt+Le,mt=Nt-Le,Ht=bt+Rt,sn=bt-Rt,wn=An+$t,jr=An-$t,ur=Vr+wn,ar=Vr-wn,ss=Re+Ht,Xs=Re-Ht;Me[At]=ur+ss,Me[At+32]=ur-ss;var qr=.707106781*(Xs+ar);Me[At+16]=ar+qr,Me[At+48]=ar-qr;var bo=.382683433*((ur=jr+sn)-(Xs=mt+nr)),ks=.5411961*ur+bo,yi=1.306562965*Xs+bo,Ja=.707106781*(ss=sn+mt),qi=nr+Ja,va=nr-Ja;Me[At+40]=va+ks,Me[At+24]=va-ks,Me[At+8]=qi+yi,Me[At+56]=qi-yi,At++}for(it=0;it<64;++it)pt=Me[it]*kt[it],f[it]=pt>0?pt+.5|0:pt-.5|0;return f}(q,K),be=0;be<64;++be)m[N[be]]=pe[be];var Ne=m[0]-J;J=m[0],Ne==0?H(W[0]):(H(W[A[ae=32767+Ne]]),H(h[ae]));for(var Pe=63;Pe>0&&m[Pe]==0;)Pe--;if(Pe==0)return H(ce),J;for(var xe,ue=1;ue<=Pe;){for(var yt=ue;m[ue]==0&&ue<=Pe;)++ue;var ht=ue-yt;if(ht>=16){xe=ht>>4;for(var Ct=1;Ct<=xe;++Ct)H(Ae);ht&=15}ae=32767+m[ue],H(ne[(ht<<4)+A[ae]]),H(h[ae]),ue++}return Pe!=63&&H(ce),J}function X(q){q=Math.min(Math.max(q,1),100),i!=q&&(function(K){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],W=0;W<64;W++){var ne=o((J[W]*K+50)/100);ne=Math.min(Math.max(ne,1),255),c[N[W]]=ne}for(var ae=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ce=0;ce<64;ce++){var Ae=o((ae[ce]*K+50)/100);Ae=Math.min(Math.max(Ae,1),255),l[N[ce]]=Ae}for(var pe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],be=0,Ne=0;Ne<8;Ne++)for(var Pe=0;Pe<8;Pe++)d[be]=1/(c[N[be]]*pe[Ne]*pe[Pe]*8),u[be]=1/(l[N[be]]*pe[Ne]*pe[Pe]*8),be++}(q<50?Math.floor(5e3/q):Math.floor(200-2*q)),i=q)}this.encode=function(q,K){K&&X(K),g=new Array,b=0,y=7,R(65496),R(65504),R(16),$(74),$(70),$(73),$(70),$(0),$(1),$(1),$(0),R(1),R(1),$(0),$(0),function(){R(65499),R(132),$(0);for(var Nt=0;Nt<64;Nt++)$(c[Nt]);$(1);for(var bt=0;bt<64;bt++)$(l[bt])}(),function(Nt,bt){R(65472),R(17),$(8),R(bt),R(Nt),$(3),$(1),$(17),$(0),$(2),$(17),$(1),$(3),$(17),$(1)}(q.width,q.height),function(){R(65476),R(418),$(0);for(var Nt=0;Nt<16;Nt++)$(L[Nt+1]);for(var bt=0;bt<=11;bt++)$(P[bt]);$(16);for(var An=0;An<16;An++)$(F[An+1]);for(var $t=0;$t<=161;$t++)$(I[$t]);$(1);for(var Rt=0;Rt<16;Rt++)$(T[Rt+1]);for(var Le=0;Le<=11;Le++)$(Q[Le]);$(17);for(var Ke=0;Ke<16;Ke++)$(D[Ke+1]);for(var it=0;it<=161;it++)$(M[it])}(),R(65498),R(12),$(3),$(1),$(0),$(2),$(17),$(3),$(17),$(0),$(63),$(0);var J=0,W=0,ne=0;b=0,y=7,this.encode.displayName="_encode_";for(var ae,ce,Ae,pe,be,Ne,Pe,xe,ue,yt=q.data,ht=q.width,Ct=q.height,Me=4*ht,kt=0;kt<Ct;){for(ae=0;ae<Me;){for(be=Me*kt+ae,Pe=-1,xe=0,ue=0;ue<64;ue++)Ne=be+(xe=ue>>3)*Me+(Pe=4*(7&ue)),kt+xe>=Ct&&(Ne-=Me*(kt+1+xe-Ct)),ae+Pe>=Me&&(Ne-=ae+Pe-Me+4),ce=yt[Ne++],Ae=yt[Ne++],pe=yt[Ne++],j[ue]=(_[ce]+_[Ae+256|0]+_[pe+512|0]>>16)-128,x[ue]=(_[ce+768|0]+_[Ae+1024|0]+_[pe+1280|0]>>16)-128,C[ue]=(_[ce+1280|0]+_[Ae+1536|0]+_[pe+1792|0]>>16)-128;J=Y(j,d,J,t,r),W=Y(x,u,W,n,s),ne=Y(C,u,ne,n,s),ae+=32}kt+=8}if(y>=0){var ct=[];ct[1]=y+1,ct[0]=(1<<y+1)-1,H(ct)}return R(65497),new Uint8Array(g)},e=e||50,function(){for(var q=String.fromCharCode,K=0;K<256;K++)S[K]=q(K)}(),t=U(L,P),n=U(T,Q),r=U(F,I),s=U(D,M),function(){for(var q=1,K=2,J=1;J<=15;J++){for(var W=q;W<K;W++)A[32767+W]=J,h[32767+W]=[],h[32767+W][1]=J,h[32767+W][0]=W;for(var ne=-(K-1);ne<=-q;ne++)A[32767+ne]=J,h[32767+ne]=[],h[32767+ne][1]=J,h[32767+ne][0]=K-1+ne;q<<=1,K<<=1}}(),function(){for(var q=0;q<256;q++)_[q]=19595*q,_[q+256|0]=38470*q,_[q+512|0]=7471*q+32768,_[q+768|0]=-11059*q,_[q+1024|0]=-21709*q,_[q+1280|0]=32768*q+8421375,_[q+1536|0]=-27439*q,_[q+1792|0]=-5329*q}(),X(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function sl(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function sQ(e){function t(P){if(!P)throw Error("assert :P")}function n(P,F,I){for(var T=0;4>T;T++)if(P[F+T]!=I.charCodeAt(T))return!0;return!1}function r(P,F,I,T,Q){for(var D=0;D<Q;D++)P[F+D]=I[T+D]}function s(P,F,I,T){for(var Q=0;Q<T;Q++)P[F+Q]=I}function i(P){return new Int32Array(P)}function o(P,F){for(var I=[],T=0;T<P;T++)I.push(new F);return I}function c(P,F){var I=[];return function T(Q,D,M){for(var U=M[D],H=0;H<U&&(Q.push(M.length>D+1?[]:new F),!(M.length<D+1));H++)T(Q[H],D+1,M)}(I,0,P),I}var l=function(){var P=this;function F(k,B){for(var z=1<<B-1>>>0;k&z;)z>>>=1;return z?(k&z-1)+z:k}function I(k,B,z,G,Z){t(!(G%z));do k[B+(G-=z)]=Z;while(0<G)}function T(k,B,z,G,Z){if(t(2328>=Z),512>=Z)var re=i(512);else if((re=i(Z))==null)return 0;return function(se,oe,de,me,Ce,Te){var ge,ke,Ee=oe,Oe=1<<de,Ie=i(16),He=i(16);for(t(Ce!=0),t(me!=null),t(se!=null),t(0<de),ke=0;ke<Ce;++ke){if(15<me[ke])return 0;++Ie[me[ke]]}if(Ie[0]==Ce)return 0;for(He[1]=0,ge=1;15>ge;++ge){if(Ie[ge]>1<<ge)return 0;He[ge+1]=He[ge]+Ie[ge]}for(ke=0;ke<Ce;++ke)ge=me[ke],0<me[ke]&&(Te[He[ge]++]=ke);if(He[15]==1)return(me=new Q).g=0,me.value=Te[0],I(se,Ee,1,Oe,me),Oe;var Ve,lt=-1,We=Oe-1,Gt=0,Pt=1,an=1,qt=1<<de;for(ke=0,ge=1,Ce=2;ge<=de;++ge,Ce<<=1){if(Pt+=an<<=1,0>(an-=Ie[ge]))return 0;for(;0<Ie[ge];--Ie[ge])(me=new Q).g=ge,me.value=Te[ke++],I(se,Ee+Gt,Ce,qt,me),Gt=F(Gt,ge)}for(ge=de+1,Ce=2;15>=ge;++ge,Ce<<=1){if(Pt+=an<<=1,0>(an-=Ie[ge]))return 0;for(;0<Ie[ge];--Ie[ge]){if(me=new Q,(Gt&We)!=lt){for(Ee+=qt,Ve=1<<(lt=ge)-de;15>lt&&!(0>=(Ve-=Ie[lt]));)++lt,Ve<<=1;Oe+=qt=1<<(Ve=lt-de),se[oe+(lt=Gt&We)].g=Ve+de,se[oe+lt].value=Ee-oe-lt}me.g=ge-de,me.value=Te[ke++],I(se,Ee+(Gt>>de),Ce,qt,me),Gt=F(Gt,ge)}}return Pt!=2*He[15]-1?0:Oe}(k,B,z,G,Z,re)}function Q(){this.value=this.g=0}function D(){this.value=this.g=0}function M(){this.G=o(5,Q),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(cu,D)}function U(k,B,z,G){t(k!=null),t(B!=null),t(2147483648>G),k.Ca=254,k.I=0,k.b=-8,k.Ka=0,k.oa=B,k.pa=z,k.Jd=B,k.Yc=z+G,k.Zc=4<=G?z+G-4+1:z,ce(k)}function H(k,B){for(var z=0;0<B--;)z|=pe(k,128)<<B;return z}function $(k,B){var z=H(k,B);return Ae(k)?-z:z}function R(k,B,z,G){var Z,re=0;for(t(k!=null),t(B!=null),t(4294967288>G),k.Sb=G,k.Ra=0,k.u=0,k.h=0,4<G&&(G=4),Z=0;Z<G;++Z)re+=B[z+Z]<<8*Z;k.Ra=re,k.bb=G,k.oa=B,k.pa=z}function Y(k){for(;8<=k.u&&k.bb<k.Sb;)k.Ra>>>=8,k.Ra+=k.oa[k.pa+k.bb]<<Xl-8>>>0,++k.bb,k.u-=8;W(k)&&(k.h=1,k.u=0)}function X(k,B){if(t(0<=B),!k.h&&B<=Ca){var z=J(k)&Js[B];return k.u+=B,Y(k),z}return k.h=1,k.u=0}function q(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function K(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function J(k){return k.Ra>>>(k.u&Xl-1)>>>0}function W(k){return t(k.bb<=k.Sb),k.h||k.bb==k.Sb&&k.u>Xl}function ne(k,B){k.u=B,k.h=W(k)}function ae(k){k.u>=Bo&&(t(k.u>=Bo),Y(k))}function ce(k){t(k!=null&&k.oa!=null),k.pa<k.Zc?(k.I=(k.oa[k.pa++]|k.I<<8)>>>0,k.b+=8):(t(k!=null&&k.oa!=null),k.pa<k.Yc?(k.b+=8,k.I=k.oa[k.pa++]|k.I<<8):k.Ka?k.b=0:(k.I<<=8,k.b+=8,k.Ka=1))}function Ae(k){return H(k,1)}function pe(k,B){var z=k.Ca;0>k.b&&ce(k);var G=k.b,Z=z*B>>>8,re=(k.I>>>G>Z)+0;for(re?(z-=Z,k.I-=Z+1<<G>>>0):z=Z+1,G=z,Z=0;256<=G;)Z+=8,G>>=8;return G=7^Z+qc[G],k.b-=G,k.Ca=(z<<G)-1,re}function be(k,B,z){k[B+0]=z>>24&255,k[B+1]=z>>16&255,k[B+2]=z>>8&255,k[B+3]=255&z}function Ne(k,B){return k[B+0]|k[B+1]<<8}function Pe(k,B){return Ne(k,B)|k[B+2]<<16}function xe(k,B){return Ne(k,B)|Ne(k,B+2)<<16}function ue(k,B){var z=1<<B;return t(k!=null),t(0<B),k.X=i(z),k.X==null?0:(k.Mb=32-B,k.Xa=B,1)}function yt(k,B){t(k!=null),t(B!=null),t(k.Xa==B.Xa),r(B.X,0,k.X,0,1<<B.Xa)}function ht(){this.X=[],this.Xa=this.Mb=0}function Ct(k,B,z,G){t(z!=null),t(G!=null);var Z=z[0],re=G[0];return Z==0&&(Z=(k*re+B/2)/B),re==0&&(re=(B*Z+k/2)/k),0>=Z||0>=re?0:(z[0]=Z,G[0]=re,1)}function Me(k,B){return k+(1<<B)-1>>>B}function kt(k,B){return((4278255360&k)+(4278255360&B)>>>0&4278255360)+((16711935&k)+(16711935&B)>>>0&16711935)>>>0}function ct(k,B){P[B]=function(z,G,Z,re,se,oe,de){var me;for(me=0;me<se;++me){var Ce=P[k](oe[de+me-1],Z,re+me);oe[de+me]=kt(z[G+me],Ce)}}}function Nt(){this.ud=this.hd=this.jd=0}function bt(k,B){return((4278124286&(k^B))>>>1)+(k&B)>>>0}function An(k){return 0<=k&&256>k?k:0>k?0:255<k?255:void 0}function $t(k,B){return An(k+(k-B+.5>>1))}function Rt(k,B,z){return Math.abs(B-z)-Math.abs(k-z)}function Le(k,B,z,G,Z,re,se){for(G=re[se-1],z=0;z<Z;++z)re[se+z]=G=kt(k[B+z],G)}function Ke(k,B,z,G,Z){var re;for(re=0;re<z;++re){var se=k[B+re],oe=se>>8&255,de=16711935&(de=(de=16711935&se)+((oe<<16)+oe));G[Z+re]=(4278255360&se)+de>>>0}}function it(k,B){B.jd=255&k,B.hd=k>>8&255,B.ud=k>>16&255}function pt(k,B,z,G,Z,re){var se;for(se=0;se<G;++se){var oe=B[z+se],de=oe>>>8,me=oe,Ce=255&(Ce=(Ce=oe>>>16)+((k.jd<<24>>24)*(de<<24>>24)>>>5));me=255&(me=(me+=(k.hd<<24>>24)*(de<<24>>24)>>>5)+((k.ud<<24>>24)*(Ce<<24>>24)>>>5)),Z[re+se]=(4278255360&oe)+(Ce<<16)+me}}function At(k,B,z,G,Z){P[B]=function(re,se,oe,de,me,Ce,Te,ge,ke){for(de=Te;de<ge;++de)for(Te=0;Te<ke;++Te)me[Ce++]=Z(oe[G(re[se++])])},P[k]=function(re,se,oe,de,me,Ce,Te){var ge=8>>re.b,ke=re.Ea,Ee=re.K[0],Oe=re.w;if(8>ge)for(re=(1<<re.b)-1,Oe=(1<<ge)-1;se<oe;++se){var Ie,He=0;for(Ie=0;Ie<ke;++Ie)Ie&re||(He=G(de[me++])),Ce[Te++]=Z(Ee[He&Oe]),He>>=ge}else P["VP8LMapColor"+z](de,me,Ee,Oe,Ce,Te,se,oe,ke)}}function rn(k,B,z,G,Z){for(z=B+z;B<z;){var re=k[B++];G[Z++]=re>>16&255,G[Z++]=re>>8&255,G[Z++]=255&re}}function vt(k,B,z,G,Z){for(z=B+z;B<z;){var re=k[B++];G[Z++]=re>>16&255,G[Z++]=re>>8&255,G[Z++]=255&re,G[Z++]=re>>24&255}}function Bt(k,B,z,G,Z){for(z=B+z;B<z;){var re=(se=k[B++])>>16&240|se>>12&15,se=240&se|se>>28&15;G[Z++]=re,G[Z++]=se}}function Xt(k,B,z,G,Z){for(z=B+z;B<z;){var re=(se=k[B++])>>16&248|se>>13&7,se=se>>5&224|se>>3&31;G[Z++]=re,G[Z++]=se}}function bn(k,B,z,G,Z){for(z=B+z;B<z;){var re=k[B++];G[Z++]=255&re,G[Z++]=re>>8&255,G[Z++]=re>>16&255}}function Qt(k,B,z,G,Z,re){if(re==0)for(z=B+z;B<z;)be(G,((re=k[B++])[0]>>24|re[1]>>8&65280|re[2]<<8&16711680|re[3]<<24)>>>0),Z+=32;else r(G,Z,k,B,z)}function on(k,B){P[B][0]=P[k+"0"],P[B][1]=P[k+"1"],P[B][2]=P[k+"2"],P[B][3]=P[k+"3"],P[B][4]=P[k+"4"],P[B][5]=P[k+"5"],P[B][6]=P[k+"6"],P[B][7]=P[k+"7"],P[B][8]=P[k+"8"],P[B][9]=P[k+"9"],P[B][10]=P[k+"10"],P[B][11]=P[k+"11"],P[B][12]=P[k+"12"],P[B][13]=P[k+"13"],P[B][14]=P[k+"0"],P[B][15]=P[k+"0"]}function It(k){return k==_h||k==Ih||k==Ph||k==gy}function Ut(){this.eb=[],this.size=this.A=this.fb=0}function Wn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Nn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ut,this.f.kb=new Wn,this.sd=null}function en(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function wt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Gn(k){return alert("todo:WebPSamplerProcessPlane"),k.T}function Bn(k,B){var z=k.T,G=B.ba.f.RGBA,Z=G.eb,re=G.fb+k.ka*G.A,se=ja[B.ba.S],oe=k.y,de=k.O,me=k.f,Ce=k.N,Te=k.ea,ge=k.W,ke=B.cc,Ee=B.dc,Oe=B.Mc,Ie=B.Nc,He=k.ka,Ve=k.ka+k.T,lt=k.U,We=lt+1>>1;for(He==0?se(oe,de,null,null,me,Ce,Te,ge,me,Ce,Te,ge,Z,re,null,null,lt):(se(B.ec,B.fc,oe,de,ke,Ee,Oe,Ie,me,Ce,Te,ge,Z,re-G.A,Z,re,lt),++z);He+2<Ve;He+=2)ke=me,Ee=Ce,Oe=Te,Ie=ge,Ce+=k.Rc,ge+=k.Rc,re+=2*G.A,se(oe,(de+=2*k.fa)-k.fa,oe,de,ke,Ee,Oe,Ie,me,Ce,Te,ge,Z,re-G.A,Z,re,lt);return de+=k.fa,k.j+Ve<k.o?(r(B.ec,B.fc,oe,de,lt),r(B.cc,B.dc,me,Ce,We),r(B.Mc,B.Nc,Te,ge,We),z--):1&Ve||se(oe,de,null,null,me,Ce,Te,ge,me,Ce,Te,ge,Z,re+G.A,null,null,lt),z}function ir(k,B,z){var G=k.F,Z=[k.J];if(G!=null){var re=k.U,se=B.ba.S,oe=se==bm||se==Ph;B=B.ba.f.RGBA;var de=[0],me=k.ka;de[0]=k.T,k.Kb&&(me==0?--de[0]:(--me,Z[0]-=k.width),k.j+k.ka+k.T==k.o&&(de[0]=k.o-k.j-me));var Ce=B.eb;me=B.fb+me*B.A,k=Ww(G,Z[0],k.width,re,de,Ce,me+(oe?0:3),B.A),t(z==de),k&&It(se)&&Bh(Ce,me,oe,re,de,B.A)}return 0}function rs(k){var B=k.ma,z=B.ba.S,G=11>z,Z=z==td||z==uu||z==bm||z==my||z==12||It(z);if(B.memory=null,B.Ib=null,B.Jb=null,B.Nd=null,!kf(B.Oa,k,Z?11:12))return 0;if(Z&&It(z)&&Oc(),k.da)alert("todo:use_scaling");else{if(G){if(B.Ib=Gn,k.Kb){if(z=k.U+1>>1,B.memory=i(k.U+2*z),B.memory==null)return 0;B.ec=B.memory,B.fc=0,B.cc=B.ec,B.dc=B.fc+k.U,B.Mc=B.cc,B.Nc=B.dc+z,B.Ib=Bn,Oc()}}else alert("todo:EmitYUV");Z&&(B.Jb=ir,G&&wa())}if(G&&!rb){for(k=0;256>k;++k)Xc[k]=89858*(k-128)+cc>>jm,BS[k]=-22014*(k-128)+cc,NS[k]=-45773*(k-128),SS[k]=113618*(k-128)+cc>>jm;for(k=Qf;k<xy;++k)B=76283*(k-16)+cc>>jm,ES[k-Qf]=Yn(B,255),_S[k-Qf]=Yn(B+8>>4,15);rb=1}return 1}function St(k){var B=k.ma,z=k.U,G=k.T;return t(!(1&k.ka)),0>=z||0>=G?0:(z=B.Ib(k,B),B.Jb!=null&&B.Jb(k,B,z),B.Dc+=z,1)}function pr(k){k.ma.memory=null}function Vr(k,B,z,G){return X(k,8)!=47?0:(B[0]=X(k,14)+1,z[0]=X(k,14)+1,G[0]=X(k,1),X(k,3)!=0?0:!k.h)}function nr(k,B){if(4>k)return k+1;var z=k-2>>1;return(2+(1&k)<<z)+X(B,z)+1}function Re(k,B){return 120<B?B-120:1<=(z=((z=xS[B-1])>>4)*k+(8-(15&z)))?z:1;var z}function mt(k,B,z){var G=J(z),Z=k[B+=255&G].g-8;return 0<Z&&(ne(z,z.u+8),G=J(z),B+=k[B].value,B+=G&(1<<Z)-1),ne(z,z.u+k[B].g),k[B].value}function Ht(k,B,z){return z.g+=k.g,z.value+=k.value<<B>>>0,t(8>=z.g),k.g}function sn(k,B,z){var G=k.xc;return t((B=G==0?0:k.vc[k.md*(z>>G)+(B>>G)])<k.Wb),k.Ya[B]}function wn(k,B,z,G){var Z=k.ab,re=k.c*B,se=k.C;B=se+B;var oe=z,de=G;for(G=k.Ta,z=k.Ua;0<Z--;){var me=k.gc[Z],Ce=se,Te=B,ge=oe,ke=de,Ee=(de=G,oe=z,me.Ea);switch(t(Ce<Te),t(Te<=me.nc),me.hc){case 2:fs(ge,ke,(Te-Ce)*Ee,de,oe);break;case 0:var Oe=Ce,Ie=Te,He=de,Ve=oe,lt=(qt=me).Ea;Oe==0&&(Za(ge,ke,null,null,1,He,Ve),Le(ge,ke+1,0,0,lt-1,He,Ve+1),ke+=lt,Ve+=lt,++Oe);for(var We=1<<qt.b,Gt=We-1,Pt=Me(lt,qt.b),an=qt.K,qt=qt.w+(Oe>>qt.b)*Pt;Oe<Ie;){var Rn=an,Es=qt,vn=1;for(Kc(ge,ke,He,Ve-lt,1,He,Ve);vn<lt;){var Dt=(vn&~Gt)+We;Dt>lt&&(Dt=lt),(0,Nh[Rn[Es++]>>8&15])(ge,ke+ +vn,He,Ve+vn-lt,Dt-vn,He,Ve+vn),vn=Dt}ke+=lt,Ve+=lt,++Oe&Gt||(qt+=Pt)}Te!=me.nc&&r(de,oe-Ee,de,oe+(Te-Ce-1)*Ee,Ee);break;case 1:for(Ee=ge,Ie=ke,lt=(ge=me.Ea)-(Ve=ge&~(He=(ke=1<<me.b)-1)),Oe=Me(ge,me.b),We=me.K,me=me.w+(Ce>>me.b)*Oe;Ce<Te;){for(Gt=We,Pt=me,an=new Nt,qt=Ie+Ve,Rn=Ie+ge;Ie<qt;)it(Gt[Pt++],an),Nf(an,Ee,Ie,ke,de,oe),Ie+=ke,oe+=ke;Ie<Rn&&(it(Gt[Pt++],an),Nf(an,Ee,Ie,lt,de,oe),Ie+=lt,oe+=lt),++Ce&He||(me+=Oe)}break;case 3:if(ge==de&&ke==oe&&0<me.b){for(Ie=de,ge=Ee=oe+(Te-Ce)*Ee-(Ve=(Te-Ce)*Me(me.Ea,me.b)),ke=de,He=oe,Oe=[],Ve=(lt=Ve)-1;0<=Ve;--Ve)Oe[Ve]=ke[He+Ve];for(Ve=lt-1;0<=Ve;--Ve)Ie[ge+Ve]=Oe[Ve];wm(me,Ce,Te,de,Ee,de,oe)}else wm(me,Ce,Te,ge,ke,de,oe)}oe=G,de=z}de!=z&&r(G,z,oe,de,re)}function jr(k,B){var z=k.V,G=k.Ba+k.c*k.C,Z=B-k.C;if(t(B<=k.l.o),t(16>=Z),0<Z){var re=k.l,se=k.Ta,oe=k.Ua,de=re.width;if(wn(k,Z,z,G),Z=oe=[oe],t((z=k.C)<(G=B)),t(re.v<re.va),G>re.o&&(G=re.o),z<re.j){var me=re.j-z;z=re.j,Z[0]+=me*de}if(z>=G?z=0:(Z[0]+=4*re.v,re.ka=z-re.j,re.U=re.va-re.v,re.T=G-z,z=1),z){if(oe=oe[0],11>(z=k.ca).S){var Ce=z.f.RGBA,Te=(G=z.S,Z=re.U,re=re.T,me=Ce.eb,Ce.A),ge=re;for(Ce=Ce.fb+k.Ma*Ce.A;0<ge--;){var ke=se,Ee=oe,Oe=Z,Ie=me,He=Ce;switch(G){case Uf:Bf(ke,Ee,Oe,Ie,He);break;case td:Jl(ke,Ee,Oe,Ie,He);break;case _h:Jl(ke,Ee,Oe,Ie,He),Bh(Ie,He,0,Oe,1,0);break;case nd:eo(ke,Ee,Oe,Ie,He);break;case uu:Qt(ke,Ee,Oe,Ie,He,1);break;case Ih:Qt(ke,Ee,Oe,Ie,He,1),Bh(Ie,He,0,Oe,1,0);break;case bm:Qt(ke,Ee,Oe,Ie,He,0);break;case Ph:Qt(ke,Ee,Oe,Ie,He,0),Bh(Ie,He,1,Oe,1,0);break;case my:Zl(ke,Ee,Oe,Ie,He);break;case gy:Zl(ke,Ee,Oe,Ie,He),Pf(Ie,He,Oe,1,0);break;case Xw:ed(ke,Ee,Oe,Ie,He);break;default:t(0)}oe+=de,Ce+=Te}k.Ma+=re}else alert("todo:EmitRescaledRowsYUVA");t(k.Ma<=z.height)}}k.C=B,t(k.C<=k.i)}function ur(k){var B;if(0<k.ua)return 0;for(B=0;B<k.Wb;++B){var z=k.Ya[B].G,G=k.Ya[B].H;if(0<z[1][G[1]+0].g||0<z[2][G[2]+0].g||0<z[3][G[3]+0].g)return 0}return 1}function ar(k,B,z,G,Z,re){if(k.Z!=0){var se=k.qd,oe=k.rd;for(t(to[k.Z]!=null);B<z;++B)to[k.Z](se,oe,G,Z,G,Z,re),se=G,oe=Z,Z+=re;k.qd=se,k.rd=oe}}function ss(k,B){var z=k.l.ma,G=z.Z==0||z.Z==1?k.l.j:k.C;if(G=k.C<G?G:k.C,t(B<=k.l.o),B>G){var Z=k.l.width,re=z.ca,se=z.tb+Z*G,oe=k.V,de=k.Ba+k.c*G,me=k.gc;t(k.ab==1),t(me[0].hc==3),Pi(me[0],G,B,oe,de,re,se),ar(z,G,B,re,se,Z)}k.C=k.Ma=B}function Xs(k,B,z,G,Z,re,se){var oe=k.$/G,de=k.$%G,me=k.m,Ce=k.s,Te=z+k.$,ge=Te;Z=z+G*Z;var ke=z+G*re,Ee=280+Ce.ua,Oe=k.Pb?oe:16777216,Ie=0<Ce.ua?Ce.Wa:null,He=Ce.wc,Ve=Te<ke?sn(Ce,de,oe):null;t(k.C<re),t(ke<=Z);var lt=!1;e:for(;;){for(;lt||Te<ke;){var We=0;if(oe>=Oe){var Gt=Te-z;t((Oe=k).Pb),Oe.wd=Oe.m,Oe.xd=Gt,0<Oe.s.ua&&yt(Oe.s.Wa,Oe.s.vb),Oe=oe+eb}if(de&He||(Ve=sn(Ce,de,oe)),t(Ve!=null),Ve.Qb&&(B[Te]=Ve.qb,lt=!0),!lt)if(ae(me),Ve.jc){We=me,Gt=B;var Pt=Te,an=Ve.pd[J(We)&cu-1];t(Ve.jc),256>an.g?(ne(We,We.u+an.g),Gt[Pt]=an.value,We=0):(ne(We,We.u+an.g-256),t(256<=an.value),We=an.value),We==0&&(lt=!0)}else We=mt(Ve.G[0],Ve.H[0],me);if(me.h)break;if(lt||256>We){if(!lt)if(Ve.nd)B[Te]=(Ve.qb|We<<8)>>>0;else{if(ae(me),lt=mt(Ve.G[1],Ve.H[1],me),ae(me),Gt=mt(Ve.G[2],Ve.H[2],me),Pt=mt(Ve.G[3],Ve.H[3],me),me.h)break;B[Te]=(Pt<<24|lt<<16|We<<8|Gt)>>>0}if(lt=!1,++Te,++de>=G&&(de=0,++oe,se!=null&&oe<=re&&!(oe%16)&&se(k,oe),Ie!=null))for(;ge<Te;)We=B[ge++],Ie.X[(506832829*We&4294967295)>>>Ie.Mb]=We}else if(280>We){if(We=nr(We-256,me),Gt=mt(Ve.G[4],Ve.H[4],me),ae(me),Gt=Re(G,Gt=nr(Gt,me)),me.h)break;if(Te-z<Gt||Z-Te<We)break e;for(Pt=0;Pt<We;++Pt)B[Te+Pt]=B[Te+Pt-Gt];for(Te+=We,de+=We;de>=G;)de-=G,++oe,se!=null&&oe<=re&&!(oe%16)&&se(k,oe);if(t(Te<=Z),de&He&&(Ve=sn(Ce,de,oe)),Ie!=null)for(;ge<Te;)We=B[ge++],Ie.X[(506832829*We&4294967295)>>>Ie.Mb]=We}else{if(!(We<Ee))break e;for(lt=We-280,t(Ie!=null);ge<Te;)We=B[ge++],Ie.X[(506832829*We&4294967295)>>>Ie.Mb]=We;We=Te,t(!(lt>>>(Gt=Ie).Xa)),B[We]=Gt.X[lt],lt=!0}lt||t(me.h==W(me))}if(k.Pb&&me.h&&Te<Z)t(k.m.h),k.a=5,k.m=k.wd,k.$=k.xd,0<k.s.ua&&yt(k.s.vb,k.s.Wa);else{if(me.h)break e;se!=null&&se(k,oe>re?re:oe),k.a=0,k.$=Te-z}return 1}return k.a=3,0}function qr(k){t(k!=null),k.vc=null,k.yc=null,k.Ya=null;var B=k.Wa;B!=null&&(B.X=null),k.vb=null,t(k!=null)}function bo(){var k=new zt;return k==null?null:(k.a=0,k.xb=Rf,on("Predictor","VP8LPredictors"),on("Predictor","VP8LPredictors_C"),on("PredictorAdd","VP8LPredictorsAdd"),on("PredictorAdd","VP8LPredictorsAdd_C"),fs=Ke,Nf=pt,Bf=rn,Jl=vt,Zl=Bt,ed=Xt,eo=bn,P.VP8LMapColor32b=oc,P.VP8LMapColor8b=Ti,k)}function ks(k,B,z,G,Z){var re=1,se=[k],oe=[B],de=G.m,me=G.s,Ce=null,Te=0;e:for(;;){if(z)for(;re&&X(de,1);){var ge=se,ke=oe,Ee=G,Oe=1,Ie=Ee.m,He=Ee.gc[Ee.ab],Ve=X(Ie,2);if(Ee.Oc&1<<Ve)re=0;else{switch(Ee.Oc|=1<<Ve,He.hc=Ve,He.Ea=ge[0],He.nc=ke[0],He.K=[null],++Ee.ab,t(4>=Ee.ab),Ve){case 0:case 1:He.b=X(Ie,3)+2,Oe=ks(Me(He.Ea,He.b),Me(He.nc,He.b),0,Ee,He.K),He.K=He.K[0];break;case 3:var lt,We=X(Ie,8)+1,Gt=16<We?0:4<We?1:2<We?2:3;if(ge[0]=Me(He.Ea,Gt),He.b=Gt,lt=Oe=ks(We,1,0,Ee,He.K)){var Pt,an=We,qt=He,Rn=1<<(8>>qt.b),Es=i(Rn);if(Es==null)lt=0;else{var vn=qt.K[0],Dt=qt.w;for(Es[0]=qt.K[0][0],Pt=1;Pt<1*an;++Pt)Es[Pt]=kt(vn[Dt+Pt],Es[Pt-1]);for(;Pt<4*Rn;++Pt)Es[Pt]=0;qt.K[0]=null,qt.K[0]=Es,lt=1}}Oe=lt;break;case 2:break;default:t(0)}re=Oe}}if(se=se[0],oe=oe[0],re&&X(de,1)&&!(re=1<=(Te=X(de,4))&&11>=Te)){G.a=3;break e}var xt;if(xt=re)t:{var ps,pn,Xn,Er=G,Zn=se,di=oe,Gr=Te,Dr=z,ui=Er.m,is=Er.s,Tn=[null],Ar=1,On=0,lr=wS[Gr];n:for(;;){if(Dr&&X(ui,1)){var hi=X(ui,3)+2,Io=Me(Zn,hi),ms=Me(di,hi),Ci=Io*ms;if(!ks(Io,ms,0,Er,Tn))break n;for(Tn=Tn[0],is.xc=hi,ps=0;ps<Ci;++ps){var kr=Tn[ps]>>8&65535;Tn[ps]=kr,kr>=Ar&&(Ar=kr+1)}}if(ui.h)break n;for(pn=0;5>pn;++pn){var Yr=Zw[pn];!pn&&0<Gr&&(Yr+=1<<Gr),On<Yr&&(On=Yr)}var Gi=o(Ar*lr,Q),Di=Ar,Sa=o(Di,M);if(Sa==null)var Ai=null;else t(65536>=Di),Ai=Sa;var Yi=i(On);if(Ai==null||Yi==null||Gi==null){Er.a=1;break n}var Na=Gi;for(ps=Xn=0;ps<Ar;++ps){var yr=Ai[ps],Xi=yr.G,Po=yr.H,hu=0,Jc=1,Zs=0;for(pn=0;5>pn;++pn){Yr=Zw[pn],Xi[pn]=Na,Po[pn]=Xn,!pn&&0<Gr&&(Yr+=1<<Gr);s:{var Lh,wy=Yr,Mh=Er,Rh=Yi,ib=Na,ab=Xn,Oh=0,sd=Mh.m,ob=X(sd,1);if(s(Rh,0,0,wy),ob){var cb=X(sd,1)+1,TS=X(sd,1),by=X(sd,TS==0?1:8);Rh[by]=1,cb==2&&(Rh[by=X(sd,8)]=1);var Sm=1}else{var Nm=i(19),Cy=X(sd,4)+4;if(19<Cy){Mh.a=3;var Qh=0;break s}for(Lh=0;Lh<Cy;++Lh)Nm[bi[Lh]]=X(sd,3);var jy=void 0,Au=void 0,En=Mh,FS=Nm,Bm=wy,Hh=Rh,Em=0,id=En.m,lb=8,Ba=o(128,Q);r:for(;T(Ba,0,7,FS,19);){if(X(id,1)){var DS=2+2*X(id,3);if((jy=2+X(id,DS))>Bm)break r}else jy=Bm;for(Au=0;Au<Bm&&jy--;){ae(id);var Hf=Ba[0+(127&J(id))];ne(id,id.u+Hf.g);var ad=Hf.value;if(16>ad)Hh[Au++]=ad,ad!=0&&(lb=ad);else{var db=ad==16,ky=ad-16,Ea=yS[ky],Zc=X(id,Jw[ky])+Ea;if(Au+Zc>Bm)break r;for(var Sy=db?lb:0;0<Zc--;)Hh[Au++]=Sy}}Em=1;break r}Em||(En.a=3),Sm=Em}(Sm=Sm&&!sd.h)&&(Oh=T(ib,ab,8,Rh,wy)),Sm&&Oh!=0?Qh=Oh:(Mh.a=3,Qh=0)}if(Qh==0)break n;if(Jc&&Ms[pn]==1&&(Jc=Na[Xn].g==0),hu+=Na[Xn].g,Xn+=Qh,3>=pn){var $h,zh=Yi[0];for($h=1;$h<Yr;++$h)Yi[$h]>zh&&(zh=Yi[$h]);Zs+=zh}}if(yr.nd=Jc,yr.Qb=0,Jc&&(yr.qb=(Xi[3][Po[3]+0].value<<24|Xi[1][Po[1]+0].value<<16|Xi[2][Po[2]+0].value)>>>0,hu==0&&256>Xi[0][Po[0]+0].value&&(yr.Qb=1,yr.qb+=Xi[0][Po[0]+0].value<<8)),yr.jc=!yr.Qb&&6>Zs,yr.jc){var $f,To=yr;for($f=0;$f<cu;++$f){var el=$f,dc=To.pd[el],Vh=To.G[0][To.H[0]+el];256<=Vh.value?(dc.g=Vh.g+256,dc.value=Vh.value):(dc.g=0,dc.value=0,el>>=Ht(Vh,8,dc),el>>=Ht(To.G[1][To.H[1]+el],16,dc),el>>=Ht(To.G[2][To.H[2]+el],0,dc),Ht(To.G[3][To.H[3]+el],24,dc))}}}is.vc=Tn,is.Wb=Ar,is.Ya=Ai,is.yc=Gi,xt=1;break t}xt=0}if(!(re=xt)){G.a=3;break e}if(0<Te){if(me.ua=1<<Te,!ue(me.Wa,Te)){G.a=1,re=0;break e}}else me.ua=0;var uc=G,ub=se,od=oe,_m=uc.s,Im=_m.xc;if(uc.c=ub,uc.i=od,_m.md=Me(ub,Im),_m.wc=Im==0?-1:(1<<Im)-1,z){G.xb=CS;break e}if((Ce=i(se*oe))==null){G.a=1,re=0;break e}re=(re=Xs(G,Ce,0,se,oe,oe,null))&&!de.h;break e}return re?(Z!=null?Z[0]=Ce:(t(Ce==null),t(z)),G.$=0,z||qr(me)):qr(me),re}function yi(k,B){var z=k.c*k.i,G=z+B+16*B;return t(k.c<=B),k.V=i(G),k.V==null?(k.Ta=null,k.Ua=0,k.a=1,0):(k.Ta=k.V,k.Ua=k.Ba+z+B,1)}function Ja(k,B){var z=k.C,G=B-z,Z=k.V,re=k.Ba+k.c*z;for(t(B<=k.l.o);0<G;){var se=16<G?16:G,oe=k.l.ma,de=k.l.width,me=de*se,Ce=oe.ca,Te=oe.tb+de*z,ge=k.Ta,ke=k.Ua;wn(k,se,Z,re),Gw(ge,ke,Ce,Te,me),ar(oe,z,z+se,Ce,Te,de),G-=se,Z+=se*k.c,z+=se}t(z==B),k.C=k.Ma=B}function qi(){this.ub=this.yd=this.td=this.Rb=0}function va(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function lh(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function nc(){this.Yb=function(){var k=[];return function B(z,G,Z){for(var re=Z[G],se=0;se<re&&(z.push(Z.length>G+1?[]:0),!(Z.length<G+1));se++)B(z[se],G+1,Z)}(k,0,[3,11]),k}()}function dh(){this.jb=i(3),this.Wc=c([4,8],nc),this.Xc=c([4,17],nc)}function uh(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Ki(){this.ld=this.La=this.dd=this.tc=0}function Hl(){this.Na=this.la=0}function eu(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function $l(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function tu(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ki),this.Y=0,this.ya=Array(new $l),this.aa=0,this.l=new zl}function hh(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Ah(){this.cb=this.a=0,this.sc="",this.m=new q,this.Od=new qi,this.Kc=new va,this.ed=new uh,this.Qa=new lh,this.Ic=this.$c=this.Aa=0,this.D=new tu,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,q),this.ia=0,this.pb=o(4,eu),this.Pa=new dh,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new hh),this.Hd=0,this.rb=Array(new Hl),this.sb=0,this.wa=Array(new Ki),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new $l),this.L=this.aa=0,this.gd=c([4,2],Ki),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function zl(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function fh(){var k=new Ah;return k!=null&&(k.a=0,k.sc="OK",k.cb=0,k.Xb=0,Gc||(Gc=Co)),k}function Kr(k,B,z){return k.a==0&&(k.a=B,k.sc=z,k.cb=0),0}function nu(k,B,z){return 3<=z&&k[B+0]==157&&k[B+1]==1&&k[B+2]==42}function Vl(k,B){if(k==null)return 0;if(k.a=0,k.sc="OK",B==null)return Kr(k,2,"null VP8Io passed to VP8GetHeaders()");var z=B.data,G=B.w,Z=B.ha;if(4>Z)return Kr(k,7,"Truncated header.");var re=z[G+0]|z[G+1]<<8|z[G+2]<<16,se=k.Od;if(se.Rb=!(1&re),se.td=re>>1&7,se.yd=re>>4&1,se.ub=re>>5,3<se.td)return Kr(k,3,"Incorrect keyframe parameters.");if(!se.yd)return Kr(k,4,"Frame not displayable.");G+=3,Z-=3;var oe=k.Kc;if(se.Rb){if(7>Z)return Kr(k,7,"cannot parse picture header");if(!nu(z,G,Z))return Kr(k,3,"Bad code word");oe.c=16383&(z[G+4]<<8|z[G+3]),oe.Td=z[G+4]>>6,oe.i=16383&(z[G+6]<<8|z[G+5]),oe.Ud=z[G+6]>>6,G+=7,Z-=7,k.za=oe.c+15>>4,k.Ub=oe.i+15>>4,B.width=oe.c,B.height=oe.i,B.Da=0,B.j=0,B.v=0,B.va=B.width,B.o=B.height,B.da=0,B.ib=B.width,B.hb=B.height,B.U=B.width,B.T=B.height,s((re=k.Pa).jb,0,255,re.jb.length),t((re=k.Qa)!=null),re.Cb=0,re.Bb=0,re.Fb=1,s(re.Zb,0,0,re.Zb.length),s(re.Lb,0,0,re.Lb)}if(se.ub>Z)return Kr(k,7,"bad partition length");U(re=k.m,z,G,se.ub),G+=se.ub,Z-=se.ub,se.Rb&&(oe.Ld=Ae(re),oe.Kd=Ae(re)),oe=k.Qa;var de,me=k.Pa;if(t(re!=null),t(oe!=null),oe.Cb=Ae(re),oe.Cb){if(oe.Bb=Ae(re),Ae(re)){for(oe.Fb=Ae(re),de=0;4>de;++de)oe.Zb[de]=Ae(re)?$(re,7):0;for(de=0;4>de;++de)oe.Lb[de]=Ae(re)?$(re,6):0}if(oe.Bb)for(de=0;3>de;++de)me.jb[de]=Ae(re)?H(re,8):255}else oe.Bb=0;if(re.Ka)return Kr(k,3,"cannot parse segment header");if((oe=k.ed).zd=Ae(re),oe.Tb=H(re,6),oe.wb=H(re,3),oe.Pc=Ae(re),oe.Pc&&Ae(re)){for(me=0;4>me;++me)Ae(re)&&(oe.vd[me]=$(re,6));for(me=0;4>me;++me)Ae(re)&&(oe.od[me]=$(re,6))}if(k.L=oe.Tb==0?0:oe.zd?1:2,re.Ka)return Kr(k,3,"cannot parse filter header");var Ce=Z;if(Z=de=G,G=de+Ce,oe=Ce,k.Xb=(1<<H(k.m,2))-1,Ce<3*(me=k.Xb))z=7;else{for(de+=3*me,oe-=3*me,Ce=0;Ce<me;++Ce){var Te=z[Z+0]|z[Z+1]<<8|z[Z+2]<<16;Te>oe&&(Te=oe),U(k.Jc[+Ce],z,de,Te),de+=Te,oe-=Te,Z+=3}U(k.Jc[+me],z,de,oe),z=de<G?0:5}if(z!=0)return Kr(k,z,"cannot parse partitions");for(z=H(de=k.m,7),Z=Ae(de)?$(de,4):0,G=Ae(de)?$(de,4):0,oe=Ae(de)?$(de,4):0,me=Ae(de)?$(de,4):0,de=Ae(de)?$(de,4):0,Ce=k.Qa,Te=0;4>Te;++Te){if(Ce.Cb){var ge=Ce.Zb[Te];Ce.Fb||(ge+=z)}else{if(0<Te){k.pb[Te]=k.pb[0];continue}ge=z}var ke=k.pb[Te];ke.Sc[0]=vy[Yn(ge+Z,127)],ke.Sc[1]=Lf[Yn(ge+0,127)],ke.Eb[0]=2*vy[Yn(ge+G,127)],ke.Eb[1]=101581*Lf[Yn(ge+oe,127)]>>16,8>ke.Eb[1]&&(ke.Eb[1]=8),ke.Qc[0]=vy[Yn(ge+me,117)],ke.Qc[1]=Lf[Yn(ge+de,127)],ke.lc=ge+de}if(!se.Rb)return Kr(k,4,"Not a key frame.");for(Ae(re),se=k.Pa,z=0;4>z;++z){for(Z=0;8>Z;++Z)for(G=0;3>G;++G)for(oe=0;11>oe;++oe)me=pe(re,Dh[z][Z][G][oe])?H(re,8):Mf[z][Z][G][oe],se.Wc[z][Z].Yb[G][oe]=me;for(Z=0;17>Z;++Z)se.Xc[z][Z]=se.Wc[z][bS[Z]]}return k.kc=Ae(re),k.kc&&(k.Bd=H(re,8)),k.cb=1}function Co(k,B,z,G,Z,re,se){var oe=B[Z].Yb[z];for(z=0;16>Z;++Z){if(!pe(k,oe[z+0]))return Z;for(;!pe(k,oe[z+1]);)if(oe=B[++Z].Yb[0],z=0,Z==16)return 16;var de=B[Z+1].Yb;if(pe(k,oe[z+2])){var me=k,Ce=0;if(pe(me,(ge=oe)[(Te=z)+3]))if(pe(me,ge[Te+6])){for(oe=0,Te=2*(Ce=pe(me,ge[Te+8]))+(ge=pe(me,ge[Te+9+Ce])),Ce=0,ge=yy[Te];ge[oe];++oe)Ce+=Ce+pe(me,ge[oe]);Ce+=3+(8<<Te)}else pe(me,ge[Te+7])?(Ce=7+2*pe(me,165),Ce+=pe(me,145)):Ce=5+pe(me,159);else Ce=pe(me,ge[Te+4])?3+pe(me,ge[Te+5]):2;oe=de[2]}else Ce=1,oe=de[1];de=se+Th[Z],0>(me=k).b&&ce(me);var Te,ge=me.b,ke=(Te=me.Ca>>1)-(me.I>>ge)>>31;--me.b,me.Ca+=ke,me.Ca|=1,me.I-=(Te+1&ke)<<ge,re[de]=((Ce^ke)-ke)*G[(0<Z)+0]}return 16}function ya(k){var B=k.rb[k.sb-1];B.la=0,B.Na=0,s(k.zc,0,0,k.zc.length),k.ja=0}function xi(k,B,z,G,Z){Z=k[B+z+32*G]+(Z>>3),k[B+z+32*G]=-256&Z?0>Z?0:255:Z}function rc(k,B,z,G,Z,re){xi(k,B,0,z,G+Z),xi(k,B,1,z,G+re),xi(k,B,2,z,G-re),xi(k,B,3,z,G-Z)}function Wr(k){return(20091*k>>16)+k}function sc(k,B,z,G){var Z,re=0,se=i(16);for(Z=0;4>Z;++Z){var oe=k[B+0]+k[B+8],de=k[B+0]-k[B+8],me=(35468*k[B+4]>>16)-Wr(k[B+12]),Ce=Wr(k[B+4])+(35468*k[B+12]>>16);se[re+0]=oe+Ce,se[re+1]=de+me,se[re+2]=de-me,se[re+3]=oe-Ce,re+=4,B++}for(Z=re=0;4>Z;++Z)oe=(k=se[re+0]+4)+se[re+8],de=k-se[re+8],me=(35468*se[re+4]>>16)-Wr(se[re+12]),xi(z,G,0,0,oe+(Ce=Wr(se[re+4])+(35468*se[re+12]>>16))),xi(z,G,1,0,de+me),xi(z,G,2,0,de-me),xi(z,G,3,0,oe-Ce),re++,G+=32}function ph(k,B,z,G){var Z=k[B+0]+4,re=35468*k[B+4]>>16,se=Wr(k[B+4]),oe=35468*k[B+1]>>16;rc(z,G,0,Z+se,k=Wr(k[B+1]),oe),rc(z,G,1,Z+re,k,oe),rc(z,G,2,Z-re,k,oe),rc(z,G,3,Z-se,k,oe)}function ru(k,B,z,G,Z){sc(k,B,z,G),Z&&sc(k,B+16,z,G+4)}function mh(k,B,z,G){Qe(k,B+0,z,G,1),Qe(k,B+32,z,G+128,1)}function jo(k,B,z,G){var Z;for(k=k[B+0]+4,Z=0;4>Z;++Z)for(B=0;4>B;++B)xi(z,G,B,Z,k)}function gh(k,B,z,G){k[B+0]&&Et(k,B+0,z,G),k[B+16]&&Et(k,B+16,z,G+4),k[B+32]&&Et(k,B+32,z,G+128),k[B+48]&&Et(k,B+48,z,G+128+4)}function vh(k,B,z,G){var Z,re=i(16);for(Z=0;4>Z;++Z){var se=k[B+0+Z]+k[B+12+Z],oe=k[B+4+Z]+k[B+8+Z],de=k[B+4+Z]-k[B+8+Z],me=k[B+0+Z]-k[B+12+Z];re[0+Z]=se+oe,re[8+Z]=se-oe,re[4+Z]=me+de,re[12+Z]=me-de}for(Z=0;4>Z;++Z)se=(k=re[0+4*Z]+3)+re[3+4*Z],oe=re[1+4*Z]+re[2+4*Z],de=re[1+4*Z]-re[2+4*Z],me=k-re[3+4*Z],z[G+0]=se+oe>>3,z[G+16]=me+de>>3,z[G+32]=se-oe>>3,z[G+48]=me-de>>3,G+=64}function xa(k,B,z){var G,Z=B-32,re=Wi,se=255-k[Z-1];for(G=0;G<z;++G){var oe,de=re,me=se+k[B-1];for(oe=0;oe<z;++oe)k[B+oe]=de[me+k[Z+oe]];B+=32}}function yh(k,B){xa(k,B,4)}function ym(k,B){xa(k,B,8)}function ay(k,B){xa(k,B,16)}function xm(k,B){var z;for(z=0;16>z;++z)r(k,B+32*z,k,B-32,16)}function xh(k,B){var z;for(z=16;0<z;--z)s(k,B,k[B-1],16),B+=32}function ql(k,B,z){var G;for(G=0;16>G;++G)s(B,z+32*G,k,16)}function Lc(k,B){var z,G=16;for(z=0;16>z;++z)G+=k[B-1+32*z]+k[B+z-32];ql(G>>5,k,B)}function oy(k,B){var z,G=8;for(z=0;16>z;++z)G+=k[B-1+32*z];ql(G>>4,k,B)}function su(k,B){var z,G=8;for(z=0;16>z;++z)G+=k[B+z-32];ql(G>>4,k,B)}function pf(k,B){ql(128,k,B)}function fn(k,B,z){return k+2*B+z+2>>2}function cy(k,B){var z,G=B-32;for(G=new Uint8Array([fn(k[G-1],k[G+0],k[G+1]),fn(k[G+0],k[G+1],k[G+2]),fn(k[G+1],k[G+2],k[G+3]),fn(k[G+2],k[G+3],k[G+4])]),z=0;4>z;++z)r(k,B+32*z,G,0,G.length)}function ly(k,B){var z=k[B-1],G=k[B-1+32],Z=k[B-1+64],re=k[B-1+96];be(k,B+0,16843009*fn(k[B-1-32],z,G)),be(k,B+32,16843009*fn(z,G,Z)),be(k,B+64,16843009*fn(G,Z,re)),be(k,B+96,16843009*fn(Z,re,re))}function dy(k,B){var z,G=4;for(z=0;4>z;++z)G+=k[B+z-32]+k[B-1+32*z];for(G>>=3,z=0;4>z;++z)s(k,B+32*z,G,4)}function uy(k,B){var z=k[B-1+0],G=k[B-1+32],Z=k[B-1+64],re=k[B-1-32],se=k[B+0-32],oe=k[B+1-32],de=k[B+2-32],me=k[B+3-32];k[B+0+96]=fn(G,Z,k[B-1+96]),k[B+1+96]=k[B+0+64]=fn(z,G,Z),k[B+2+96]=k[B+1+64]=k[B+0+32]=fn(re,z,G),k[B+3+96]=k[B+2+64]=k[B+1+32]=k[B+0+0]=fn(se,re,z),k[B+3+64]=k[B+2+32]=k[B+1+0]=fn(oe,se,re),k[B+3+32]=k[B+2+0]=fn(de,oe,se),k[B+3+0]=fn(me,de,oe)}function ko(k,B){var z=k[B+1-32],G=k[B+2-32],Z=k[B+3-32],re=k[B+4-32],se=k[B+5-32],oe=k[B+6-32],de=k[B+7-32];k[B+0+0]=fn(k[B+0-32],z,G),k[B+1+0]=k[B+0+32]=fn(z,G,Z),k[B+2+0]=k[B+1+32]=k[B+0+64]=fn(G,Z,re),k[B+3+0]=k[B+2+32]=k[B+1+64]=k[B+0+96]=fn(Z,re,se),k[B+3+32]=k[B+2+64]=k[B+1+96]=fn(re,se,oe),k[B+3+64]=k[B+2+96]=fn(se,oe,de),k[B+3+96]=fn(oe,de,de)}function Mc(k,B){var z=k[B-1+0],G=k[B-1+32],Z=k[B-1+64],re=k[B-1-32],se=k[B+0-32],oe=k[B+1-32],de=k[B+2-32],me=k[B+3-32];k[B+0+0]=k[B+1+64]=re+se+1>>1,k[B+1+0]=k[B+2+64]=se+oe+1>>1,k[B+2+0]=k[B+3+64]=oe+de+1>>1,k[B+3+0]=de+me+1>>1,k[B+0+96]=fn(Z,G,z),k[B+0+64]=fn(G,z,re),k[B+0+32]=k[B+1+96]=fn(z,re,se),k[B+1+32]=k[B+2+96]=fn(re,se,oe),k[B+2+32]=k[B+3+96]=fn(se,oe,de),k[B+3+32]=fn(oe,de,me)}function hy(k,B){var z=k[B+0-32],G=k[B+1-32],Z=k[B+2-32],re=k[B+3-32],se=k[B+4-32],oe=k[B+5-32],de=k[B+6-32],me=k[B+7-32];k[B+0+0]=z+G+1>>1,k[B+1+0]=k[B+0+64]=G+Z+1>>1,k[B+2+0]=k[B+1+64]=Z+re+1>>1,k[B+3+0]=k[B+2+64]=re+se+1>>1,k[B+0+32]=fn(z,G,Z),k[B+1+32]=k[B+0+96]=fn(G,Z,re),k[B+2+32]=k[B+1+96]=fn(Z,re,se),k[B+3+32]=k[B+2+96]=fn(re,se,oe),k[B+3+64]=fn(se,oe,de),k[B+3+96]=fn(oe,de,me)}function Ay(k,B){var z=k[B-1+0],G=k[B-1+32],Z=k[B-1+64],re=k[B-1+96];k[B+0+0]=z+G+1>>1,k[B+2+0]=k[B+0+32]=G+Z+1>>1,k[B+2+32]=k[B+0+64]=Z+re+1>>1,k[B+1+0]=fn(z,G,Z),k[B+3+0]=k[B+1+32]=fn(G,Z,re),k[B+3+32]=k[B+1+64]=fn(Z,re,re),k[B+3+64]=k[B+2+64]=k[B+0+96]=k[B+1+96]=k[B+2+96]=k[B+3+96]=re}function wh(k,B){var z=k[B-1+0],G=k[B-1+32],Z=k[B-1+64],re=k[B-1+96],se=k[B-1-32],oe=k[B+0-32],de=k[B+1-32],me=k[B+2-32];k[B+0+0]=k[B+2+32]=z+se+1>>1,k[B+0+32]=k[B+2+64]=G+z+1>>1,k[B+0+64]=k[B+2+96]=Z+G+1>>1,k[B+0+96]=re+Z+1>>1,k[B+3+0]=fn(oe,de,me),k[B+2+0]=fn(se,oe,de),k[B+1+0]=k[B+3+32]=fn(z,se,oe),k[B+1+32]=k[B+3+64]=fn(G,z,se),k[B+1+64]=k[B+3+96]=fn(Z,G,z),k[B+1+96]=fn(re,Z,G)}function mf(k,B){var z;for(z=0;8>z;++z)r(k,B+32*z,k,B-32,8)}function or(k,B){var z;for(z=0;8>z;++z)s(k,B,k[B-1],8),B+=32}function cr(k,B,z){var G;for(G=0;8>G;++G)s(B,z+32*G,k,8)}function bh(k,B){var z,G=8;for(z=0;8>z;++z)G+=k[B+z-32]+k[B-1+32*z];cr(G>>4,k,B)}function fy(k,B){var z,G=4;for(z=0;8>z;++z)G+=k[B+z-32];cr(G>>3,k,B)}function gf(k,B){var z,G=4;for(z=0;8>z;++z)G+=k[B-1+32*z];cr(G>>3,k,B)}function vf(k,B){cr(128,k,B)}function iu(k,B,z){var G=k[B-z],Z=k[B+0],re=3*(Z-G)+Eh[1020+k[B-2*z]-k[B+z]],se=Df[112+(re+4>>3)];k[B-z]=Wi[255+G+Df[112+(re+3>>3)]],k[B+0]=Wi[255+Z-se]}function au(k,B,z,G){var Z=k[B+0],re=k[B+z];return Fi[255+k[B-2*z]-k[B-z]]>G||Fi[255+re-Z]>G}function Ch(k,B,z,G){return 4*Fi[255+k[B-z]-k[B+0]]+Fi[255+k[B-2*z]-k[B+z]]<=G}function jh(k,B,z,G,Z){var re=k[B-3*z],se=k[B-2*z],oe=k[B-z],de=k[B+0],me=k[B+z],Ce=k[B+2*z],Te=k[B+3*z];return 4*Fi[255+oe-de]+Fi[255+se-me]>G?0:Fi[255+k[B-4*z]-re]<=Z&&Fi[255+re-se]<=Z&&Fi[255+se-oe]<=Z&&Fi[255+Te-Ce]<=Z&&Fi[255+Ce-me]<=Z&&Fi[255+me-de]<=Z}function As(k,B,z,G){var Z=2*G+1;for(G=0;16>G;++G)Ch(k,B+G,z,Z)&&iu(k,B+G,z)}function Rc(k,B,z,G){var Z=2*G+1;for(G=0;16>G;++G)Ch(k,B+G*z,1,Z)&&iu(k,B+G*z,1)}function ic(k,B,z,G){var Z;for(Z=3;0<Z;--Z)As(k,B+=4*z,z,G)}function yf(k,B,z,G){var Z;for(Z=3;0<Z;--Z)Rc(k,B+=4,z,G)}function So(k,B,z,G,Z,re,se,oe){for(re=2*re+1;0<Z--;){if(jh(k,B,z,re,se))if(au(k,B,z,oe))iu(k,B,z);else{var de=k,me=B,Ce=z,Te=de[me-2*Ce],ge=de[me-Ce],ke=de[me+0],Ee=de[me+Ce],Oe=de[me+2*Ce],Ie=27*(Ve=Eh[1020+3*(ke-ge)+Eh[1020+Te-Ee]])+63>>7,He=18*Ve+63>>7,Ve=9*Ve+63>>7;de[me-3*Ce]=Wi[255+de[me-3*Ce]+Ve],de[me-2*Ce]=Wi[255+Te+He],de[me-Ce]=Wi[255+ge+Ie],de[me+0]=Wi[255+ke-Ie],de[me+Ce]=Wi[255+Ee-He],de[me+2*Ce]=Wi[255+Oe-Ve]}B+=G}}function Ss(k,B,z,G,Z,re,se,oe){for(re=2*re+1;0<Z--;){if(jh(k,B,z,re,se))if(au(k,B,z,oe))iu(k,B,z);else{var de=k,me=B,Ce=z,Te=de[me-Ce],ge=de[me+0],ke=de[me+Ce],Ee=Df[112+(4+(Oe=3*(ge-Te))>>3)],Oe=Df[112+(Oe+3>>3)],Ie=Ee+1>>1;de[me-2*Ce]=Wi[255+de[me-2*Ce]+Ie],de[me-Ce]=Wi[255+Te+Oe],de[me+0]=Wi[255+ge-Ee],de[me+Ce]=Wi[255+ke-Ie]}B+=G}}function xf(k,B,z,G,Z,re){So(k,B,z,1,16,G,Z,re)}function wf(k,B,z,G,Z,re){So(k,B,1,z,16,G,Z,re)}function Kl(k,B,z,G,Z,re){var se;for(se=3;0<se;--se)Ss(k,B+=4*z,z,1,16,G,Z,re)}function bf(k,B,z,G,Z,re){var se;for(se=3;0<se;--se)Ss(k,B+=4,1,z,16,G,Z,re)}function O(k,B,z,G,Z,re,se,oe){So(k,B,Z,1,8,re,se,oe),So(z,G,Z,1,8,re,se,oe)}function te(k,B,z,G,Z,re,se,oe){So(k,B,1,Z,8,re,se,oe),So(z,G,1,Z,8,re,se,oe)}function he(k,B,z,G,Z,re,se,oe){Ss(k,B+4*Z,Z,1,8,re,se,oe),Ss(z,G+4*Z,Z,1,8,re,se,oe)}function ye(k,B,z,G,Z,re,se,oe){Ss(k,B+4,1,Z,8,re,se,oe),Ss(z,G+4,1,Z,8,re,se,oe)}function Se(){this.ba=new Nn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new wt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ze(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function tt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Tt(){this.ua=0,this.Wa=new ht,this.vb=new ht,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new M,this.yc=new Q}function zt(){this.xb=this.a=0,this.l=new zl,this.ca=new Nn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new K,this.Pb=0,this.wd=new K,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Tt,this.ab=0,this.gc=o(4,tt),this.Oc=0}function dn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new zl,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Lt(k,B,z,G,Z,re,se){for(k=k==null?0:k[B+0],B=0;B<se;++B)Z[re+B]=k+z[G+B]&255,k=Z[re+B]}function Un(k,B,z,G,Z,re,se){var oe;if(k==null)Lt(null,null,z,G,Z,re,se);else for(oe=0;oe<se;++oe)Z[re+oe]=k[B+oe]+z[G+oe]&255}function Fr(k,B,z,G,Z,re,se){if(k==null)Lt(null,null,z,G,Z,re,se);else{var oe,de=k[B+0],me=de,Ce=de;for(oe=0;oe<se;++oe)me=Ce+(de=k[B+oe])-me,Ce=z[G+oe]+(-256&me?0>me?0:255:me)&255,me=de,Z[re+oe]=Ce}}function Ns(k,B,z,G){var Z=B.width,re=B.o;if(t(k!=null&&B!=null),0>z||0>=G||z+G>re)return null;if(!k.Cc){if(k.ga==null){var se;if(k.ga=new dn,(se=k.ga==null)||(se=B.width*B.o,t(k.Gb.length==0),k.Gb=i(se),k.Uc=0,k.Gb==null?se=0:(k.mb=k.Gb,k.nb=k.Uc,k.rc=null,se=1),se=!se),!se){se=k.ga;var oe=k.Fa,de=k.P,me=k.qc,Ce=k.mb,Te=k.nb,ge=de+1,ke=me-1,Ee=se.l;if(t(oe!=null&&Ce!=null&&B!=null),to[0]=null,to[1]=Lt,to[2]=Un,to[3]=Fr,se.ca=Ce,se.tb=Te,se.c=B.width,se.i=B.height,t(0<se.c&&0<se.i),1>=me)B=0;else if(se.$a=3&oe[de+0],se.Z=oe[de+0]>>2&3,se.Lc=oe[de+0]>>4&3,de=oe[de+0]>>6&3,0>se.$a||1<se.$a||4<=se.Z||1<se.Lc||de)B=0;else if(Ee.put=St,Ee.ac=rs,Ee.bc=pr,Ee.ma=se,Ee.width=B.width,Ee.height=B.height,Ee.Da=B.Da,Ee.v=B.v,Ee.va=B.va,Ee.j=B.j,Ee.o=B.o,se.$a)e:{t(se.$a==1),B=bo();t:for(;;){if(B==null){B=0;break e}if(t(se!=null),se.mc=B,B.c=se.c,B.i=se.i,B.l=se.l,B.l.ma=se,B.l.width=se.c,B.l.height=se.i,B.a=0,R(B.m,oe,ge,ke),!ks(se.c,se.i,1,B,null)||(B.ab==1&&B.gc[0].hc==3&&ur(B.s)?(se.ic=1,oe=B.c*B.i,B.Ta=null,B.Ua=0,B.V=i(oe),B.Ba=0,B.V==null?(B.a=1,B=0):B=1):(se.ic=0,B=yi(B,se.c)),!B))break t;B=1;break e}se.mc=null,B=0}else B=ke>=se.c*se.i;se=!B}if(se)return null;k.ga.Lc!=1?k.Ga=0:G=re-z}t(k.ga!=null),t(z+G<=re);e:{if(B=(oe=k.ga).c,re=oe.l.o,oe.$a==0){if(ge=k.rc,ke=k.Vc,Ee=k.Fa,de=k.P+1+z*B,me=k.mb,Ce=k.nb+z*B,t(de<=k.P+k.qc),oe.Z!=0)for(t(to[oe.Z]!=null),se=0;se<G;++se)to[oe.Z](ge,ke,Ee,de,me,Ce,B),ge=me,ke=Ce,Ce+=B,de+=B;else for(se=0;se<G;++se)r(me,Ce,Ee,de,B),ge=me,ke=Ce,Ce+=B,de+=B;k.rc=ge,k.Vc=ke}else{if(t(oe.mc!=null),B=z+G,t((se=oe.mc)!=null),t(B<=se.i),se.C>=B)B=1;else if(oe.ic||wa(),oe.ic){oe=se.V,ge=se.Ba,ke=se.c;var Oe=se.i,Ie=(Ee=1,de=se.$/ke,me=se.$%ke,Ce=se.m,Te=se.s,se.$),He=ke*Oe,Ve=ke*B,lt=Te.wc,We=Ie<Ve?sn(Te,me,de):null;t(Ie<=He),t(B<=Oe),t(ur(Te));t:for(;;){for(;!Ce.h&&Ie<Ve;){if(me&lt||(We=sn(Te,me,de)),t(We!=null),ae(Ce),256>(Oe=mt(We.G[0],We.H[0],Ce)))oe[ge+Ie]=Oe,++Ie,++me>=ke&&(me=0,++de<=B&&!(de%16)&&ss(se,de));else{if(!(280>Oe)){Ee=0;break t}Oe=nr(Oe-256,Ce);var Gt,Pt=mt(We.G[4],We.H[4],Ce);if(ae(Ce),!(Ie>=(Pt=Re(ke,Pt=nr(Pt,Ce)))&&He-Ie>=Oe)){Ee=0;break t}for(Gt=0;Gt<Oe;++Gt)oe[ge+Ie+Gt]=oe[ge+Ie+Gt-Pt];for(Ie+=Oe,me+=Oe;me>=ke;)me-=ke,++de<=B&&!(de%16)&&ss(se,de);Ie<Ve&&me&lt&&(We=sn(Te,me,de))}t(Ce.h==W(Ce))}ss(se,de>B?B:de);break t}!Ee||Ce.h&&Ie<He?(Ee=0,se.a=Ce.h?5:3):se.$=Ie,B=Ee}else B=Xs(se,se.V,se.Ba,se.c,se.i,B,Ja);if(!B){G=0;break e}}z+G>=re&&(k.Cc=1),G=1}if(!G)return null;if(k.Cc&&((G=k.ga)!=null&&(G.mc=null),k.ga=null,0<k.Ga))return alert("todo:WebPDequantizeLevels"),null}return k.nb+z*Z}function vr(k,B,z,G,Z,re){for(;0<Z--;){var se,oe=k,de=B+(z?1:0),me=k,Ce=B+(z?0:3);for(se=0;se<G;++se){var Te=me[Ce+4*se];Te!=255&&(Te*=32897,oe[de+4*se+0]=oe[de+4*se+0]*Te>>23,oe[de+4*se+1]=oe[de+4*se+1]*Te>>23,oe[de+4*se+2]=oe[de+4*se+2]*Te>>23)}B+=re}}function Ls(k,B,z,G,Z){for(;0<G--;){var re;for(re=0;re<z;++re){var se=k[B+2*re+0],oe=15&(me=k[B+2*re+1]),de=4369*oe,me=(240&me|me>>4)*de>>16;k[B+2*re+0]=(240&se|se>>4)*de>>16&240|(15&se|se<<4)*de>>16>>4&15,k[B+2*re+1]=240&me|oe}B+=Z}}function Bs(k,B,z,G,Z,re,se,oe){var de,me,Ce=255;for(me=0;me<Z;++me){for(de=0;de<G;++de){var Te=k[B+de];re[se+4*de]=Te,Ce&=Te}B+=z,se+=oe}return Ce!=255}function oi(k,B,z,G,Z){var re;for(re=0;re<Z;++re)z[G+re]=k[B+re]>>8}function wa(){Bh=vr,Pf=Ls,Ww=Bs,Gw=oi}function ci(k,B,z){P[k]=function(G,Z,re,se,oe,de,me,Ce,Te,ge,ke,Ee,Oe,Ie,He,Ve,lt){var We,Gt=lt-1>>1,Pt=oe[de+0]|me[Ce+0]<<16,an=Te[ge+0]|ke[Ee+0]<<16;t(G!=null);var qt=3*Pt+an+131074>>2;for(B(G[Z+0],255&qt,qt>>16,Oe,Ie),re!=null&&(qt=3*an+Pt+131074>>2,B(re[se+0],255&qt,qt>>16,He,Ve)),We=1;We<=Gt;++We){var Rn=oe[de+We]|me[Ce+We]<<16,Es=Te[ge+We]|ke[Ee+We]<<16,vn=Pt+Rn+an+Es+524296,Dt=vn+2*(Rn+an)>>3;qt=Dt+Pt>>1,Pt=(vn=vn+2*(Pt+Es)>>3)+Rn>>1,B(G[Z+2*We-1],255&qt,qt>>16,Oe,Ie+(2*We-1)*z),B(G[Z+2*We-0],255&Pt,Pt>>16,Oe,Ie+(2*We-0)*z),re!=null&&(qt=vn+an>>1,Pt=Dt+Es>>1,B(re[se+2*We-1],255&qt,qt>>16,He,Ve+(2*We-1)*z),B(re[se+2*We+0],255&Pt,Pt>>16,He,Ve+(2*We+0)*z)),Pt=Rn,an=Es}1&lt||(qt=3*Pt+an+131074>>2,B(G[Z+lt-1],255&qt,qt>>16,Oe,Ie+(lt-1)*z),re!=null&&(qt=3*an+Pt+131074>>2,B(re[se+lt-1],255&qt,qt>>16,He,Ve+(lt-1)*z)))}}function Oc(){ja[Uf]=ie,ja[td]=Of,ja[nd]=Uh,ja[uu]=ka,ja[bm]=Mn,ja[my]=tb,ja[Xw]=jS,ja[_h]=Of,ja[Ih]=ka,ja[Ph]=Mn,ja[gy]=tb}function kh(k){return k&~kS?0>k?0:255:k>>nb}function Wl(k,B){return kh((19077*k>>8)+(26149*B>>8)-14234)}function Qc(k,B,z){return kh((19077*k>>8)-(6419*B>>8)-(13320*z>>8)+8708)}function Hc(k,B){return kh((19077*k>>8)+(33050*B>>8)-17685)}function $c(k,B,z,G,Z){G[Z+0]=Wl(k,z),G[Z+1]=Qc(k,B,z),G[Z+2]=Hc(k,B)}function Gl(k,B,z,G,Z){G[Z+0]=Hc(k,B),G[Z+1]=Qc(k,B,z),G[Z+2]=Wl(k,z)}function wi(k,B,z,G,Z){var re=Qc(k,B,z);B=re<<3&224|Hc(k,B)>>3,G[Z+0]=248&Wl(k,z)|re>>5,G[Z+1]=B}function zc(k,B,z,G,Z){var re=240&Hc(k,B)|15;G[Z+0]=240&Wl(k,z)|Qc(k,B,z)>>4,G[Z+1]=re}function Vc(k,B,z,G,Z){G[Z+0]=255,$c(k,B,z,G,Z+1)}function Cf(k,B,z,G,Z){Gl(k,B,z,G,Z),G[Z+3]=255}function Sh(k,B,z,G,Z){$c(k,B,z,G,Z),G[Z+3]=255}function Yn(k,B){return 0>k?0:k>B?B:k}function No(k,B,z){P[k]=function(G,Z,re,se,oe,de,me,Ce,Te){for(var ge=Ce+(-2&Te)*z;Ce!=ge;)B(G[Z+0],re[se+0],oe[de+0],me,Ce),B(G[Z+1],re[se+0],oe[de+0],me,Ce+z),Z+=2,++se,++de,Ce+=2*z;1&Te&&B(G[Z+0],re[se+0],oe[de+0],me,Ce)}}function ac(k,B,z){return z==0?k==0?B==0?6:5:B==0?4:0:z}function jf(k,B,z,G,Z){switch(k>>>30){case 3:Qe(B,z,G,Z,0);break;case 2:Fe(B,z,G,Z);break;case 1:Et(B,z,G,Z)}}function ba(k,B){var z,G,Z=B.M,re=B.Nb,se=k.oc,oe=k.pc+40,de=k.oc,me=k.pc+584,Ce=k.oc,Te=k.pc+600;for(z=0;16>z;++z)se[oe+32*z-1]=129;for(z=0;8>z;++z)de[me+32*z-1]=129,Ce[Te+32*z-1]=129;for(0<Z?se[oe-1-32]=de[me-1-32]=Ce[Te-1-32]=129:(s(se,oe-32-1,127,21),s(de,me-32-1,127,9),s(Ce,Te-32-1,127,9)),G=0;G<k.za;++G){var ge=B.ya[B.aa+G];if(0<G){for(z=-1;16>z;++z)r(se,oe+32*z-4,se,oe+32*z+12,4);for(z=-1;8>z;++z)r(de,me+32*z-4,de,me+32*z+4,4),r(Ce,Te+32*z-4,Ce,Te+32*z+4,4)}var ke=k.Gd,Ee=k.Hd+G,Oe=ge.ad,Ie=ge.Hc;if(0<Z&&(r(se,oe-32,ke[Ee].y,0,16),r(de,me-32,ke[Ee].f,0,8),r(Ce,Te-32,ke[Ee].ea,0,8)),ge.Za){var He=se,Ve=oe-32+16;for(0<Z&&(G>=k.za-1?s(He,Ve,ke[Ee].y[15],4):r(He,Ve,ke[Ee+1].y,0,4)),z=0;4>z;z++)He[Ve+128+z]=He[Ve+256+z]=He[Ve+384+z]=He[Ve+0+z];for(z=0;16>z;++z,Ie<<=2)He=se,Ve=oe+lc[z],_o[ge.Ob[z]](He,Ve),jf(Ie,Oe,16*+z,He,Ve)}else if(He=ac(G,Z,ge.Ob[0]),rd[He](se,oe),Ie!=0)for(z=0;16>z;++z,Ie<<=2)jf(Ie,Oe,16*+z,se,oe+lc[z]);for(z=ge.Gc,He=ac(G,Z,ge.Dd),Yc[He](de,me),Yc[He](Ce,Te),Ie=Oe,He=de,Ve=me,255&(ge=0|z)&&(170&ge?jt(Ie,256,He,Ve):Zt(Ie,256,He,Ve)),ge=Ce,Ie=Te,255&(z>>=8)&&(170&z?jt(Oe,320,ge,Ie):Zt(Oe,320,ge,Ie)),Z<k.Ub-1&&(r(ke[Ee].y,0,se,oe+480,16),r(ke[Ee].f,0,de,me+224,8),r(ke[Ee].ea,0,Ce,Te+224,8)),z=8*re*k.B,ke=k.sa,Ee=k.ta+16*G+16*re*k.R,Oe=k.qa,ge=k.ra+8*G+z,Ie=k.Ha,He=k.Ia+8*G+z,z=0;16>z;++z)r(ke,Ee+z*k.R,se,oe+32*z,16);for(z=0;8>z;++z)r(Oe,ge+z*k.B,de,me+32*z,8),r(Ie,He+z*k.B,Ce,Te+32*z,8)}}function ou(k,B,z,G,Z,re,se,oe,de){var me=[0],Ce=[0],Te=0,ge=de!=null?de.kd:0,ke=de??new ze;if(k==null||12>z)return 7;ke.data=k,ke.w=B,ke.ha=z,B=[B],z=[z],ke.gb=[ke.gb];e:{var Ee=B,Oe=z,Ie=ke.gb;if(t(k!=null),t(Oe!=null),t(Ie!=null),Ie[0]=0,12<=Oe[0]&&!n(k,Ee[0],"RIFF")){if(n(k,Ee[0]+8,"WEBP")){Ie=3;break e}var He=xe(k,Ee[0]+4);if(12>He||4294967286<He){Ie=3;break e}if(ge&&He>Oe[0]-8){Ie=7;break e}Ie[0]=He,Ee[0]+=12,Oe[0]-=12}Ie=0}if(Ie!=0)return Ie;for(He=0<ke.gb[0],z=z[0];;){e:{var Ve=k;Oe=B,Ie=z;var lt=me,We=Ce,Gt=Ee=[0];if((qt=Te=[Te])[0]=0,8>Ie[0])Ie=7;else{if(!n(Ve,Oe[0],"VP8X")){if(xe(Ve,Oe[0]+4)!=10){Ie=3;break e}if(18>Ie[0]){Ie=7;break e}var Pt=xe(Ve,Oe[0]+8),an=1+Pe(Ve,Oe[0]+12);if(2147483648<=an*(Ve=1+Pe(Ve,Oe[0]+15))){Ie=3;break e}Gt!=null&&(Gt[0]=Pt),lt!=null&&(lt[0]=an),We!=null&&(We[0]=Ve),Oe[0]+=18,Ie[0]-=18,qt[0]=1}Ie=0}}if(Te=Te[0],Ee=Ee[0],Ie!=0)return Ie;if(Oe=!!(2&Ee),!He&&Te)return 3;if(re!=null&&(re[0]=!!(16&Ee)),se!=null&&(se[0]=Oe),oe!=null&&(oe[0]=0),se=me[0],Ee=Ce[0],Te&&Oe&&de==null){Ie=0;break}if(4>z){Ie=7;break}if(He&&Te||!He&&!Te&&!n(k,B[0],"ALPH")){z=[z],ke.na=[ke.na],ke.P=[ke.P],ke.Sa=[ke.Sa];e:{Pt=k,Ie=B,He=z;var qt=ke.gb;lt=ke.na,We=ke.P,Gt=ke.Sa,an=22,t(Pt!=null),t(He!=null),Ve=Ie[0];var Rn=He[0];for(t(lt!=null),t(Gt!=null),lt[0]=null,We[0]=null,Gt[0]=0;;){if(Ie[0]=Ve,He[0]=Rn,8>Rn){Ie=7;break e}var Es=xe(Pt,Ve+4);if(4294967286<Es){Ie=3;break e}var vn=8+Es+1&-2;if(an+=vn,0<qt&&an>qt){Ie=3;break e}if(!n(Pt,Ve,"VP8 ")||!n(Pt,Ve,"VP8L")){Ie=0;break e}if(Rn[0]<vn){Ie=7;break e}n(Pt,Ve,"ALPH")||(lt[0]=Pt,We[0]=Ve+8,Gt[0]=Es),Ve+=vn,Rn-=vn}}if(z=z[0],ke.na=ke.na[0],ke.P=ke.P[0],ke.Sa=ke.Sa[0],Ie!=0)break}z=[z],ke.Ja=[ke.Ja],ke.xa=[ke.xa];e:if(qt=k,Ie=B,He=z,lt=ke.gb[0],We=ke.Ja,Gt=ke.xa,Pt=Ie[0],Ve=!n(qt,Pt,"VP8 "),an=!n(qt,Pt,"VP8L"),t(qt!=null),t(He!=null),t(We!=null),t(Gt!=null),8>He[0])Ie=7;else{if(Ve||an){if(qt=xe(qt,Pt+4),12<=lt&&qt>lt-12){Ie=3;break e}if(ge&&qt>He[0]-8){Ie=7;break e}We[0]=qt,Ie[0]+=8,He[0]-=8,Gt[0]=an}else Gt[0]=5<=He[0]&&qt[Pt+0]==47&&!(qt[Pt+4]>>5),We[0]=He[0];Ie=0}if(z=z[0],ke.Ja=ke.Ja[0],ke.xa=ke.xa[0],B=B[0],Ie!=0)break;if(4294967286<ke.Ja)return 3;if(oe==null||Oe||(oe[0]=ke.xa?2:1),se=[se],Ee=[Ee],ke.xa){if(5>z){Ie=7;break}oe=se,ge=Ee,Oe=re,k==null||5>z?k=0:5<=z&&k[B+0]==47&&!(k[B+4]>>5)?(He=[0],qt=[0],lt=[0],R(We=new K,k,B,z),Vr(We,He,qt,lt)?(oe!=null&&(oe[0]=He[0]),ge!=null&&(ge[0]=qt[0]),Oe!=null&&(Oe[0]=lt[0]),k=1):k=0):k=0}else{if(10>z){Ie=7;break}oe=Ee,k==null||10>z||!nu(k,B+3,z-3)?k=0:(ge=k[B+0]|k[B+1]<<8|k[B+2]<<16,Oe=16383&(k[B+7]<<8|k[B+6]),k=16383&(k[B+9]<<8|k[B+8]),1&ge||3<(ge>>1&7)||!(ge>>4&1)||ge>>5>=ke.Ja||!Oe||!k?k=0:(se&&(se[0]=Oe),oe&&(oe[0]=k),k=1))}if(!k||(se=se[0],Ee=Ee[0],Te&&(me[0]!=se||Ce[0]!=Ee)))return 3;de!=null&&(de[0]=ke,de.offset=B-de.w,t(4294967286>B-de.w),t(de.offset==de.ha-z));break}return Ie==0||Ie==7&&Te&&de==null?(re!=null&&(re[0]|=ke.na!=null&&0<ke.na.length),G!=null&&(G[0]=se),Z!=null&&(Z[0]=Ee),0):Ie}function kf(k,B,z){var G=B.width,Z=B.height,re=0,se=0,oe=G,de=Z;if(B.Da=k!=null&&0<k.Da,B.Da&&(oe=k.cd,de=k.bd,re=k.v,se=k.j,11>z||(re&=-2,se&=-2),0>re||0>se||0>=oe||0>=de||re+oe>G||se+de>Z))return 0;if(B.v=re,B.j=se,B.va=re+oe,B.o=se+de,B.U=oe,B.T=de,B.da=k!=null&&0<k.da,B.da){if(!Ct(oe,de,z=[k.ib],re=[k.hb]))return 0;B.ib=z[0],B.hb=re[0]}return B.ob=k!=null&&k.ob,B.Kb=k==null||!k.Sd,B.da&&(B.ob=B.ib<3*G/4&&B.hb<3*Z/4,B.Kb=0),1}function Sf(k){if(k==null)return 2;if(11>k.S){var B=k.f.RGBA;B.fb+=(k.height-1)*B.A,B.A=-B.A}else B=k.f.kb,k=k.height,B.O+=(k-1)*B.fa,B.fa=-B.fa,B.N+=(k-1>>1)*B.Ab,B.Ab=-B.Ab,B.W+=(k-1>>1)*B.Db,B.Db=-B.Db,B.F!=null&&(B.J+=(k-1)*B.lb,B.lb=-B.lb);return 0}function Yl(k,B,z,G){if(G==null||0>=k||0>=B)return 2;if(z!=null){if(z.Da){var Z=z.cd,re=z.bd,se=-2&z.v,oe=-2&z.j;if(0>se||0>oe||0>=Z||0>=re||se+Z>k||oe+re>B)return 2;k=Z,B=re}if(z.da){if(!Ct(k,B,Z=[z.ib],re=[z.hb]))return 2;k=Z[0],B=re[0]}}G.width=k,G.height=B;e:{var de=G.width,me=G.height;if(k=G.S,0>=de||0>=me||!(k>=Uf&&13>k))k=2;else{if(0>=G.Rd&&G.sd==null){se=re=Z=B=0;var Ce=(oe=de*sb[k])*me;if(11>k||(re=(me+1)/2*(B=(de+1)/2),k==12&&(se=(Z=de)*me)),(me=i(Ce+2*re+se))==null){k=1;break e}G.sd=me,11>k?((de=G.f.RGBA).eb=me,de.fb=0,de.A=oe,de.size=Ce):((de=G.f.kb).y=me,de.O=0,de.fa=oe,de.Fd=Ce,de.f=me,de.N=0+Ce,de.Ab=B,de.Cd=re,de.ea=me,de.W=0+Ce+re,de.Db=B,de.Ed=re,k==12&&(de.F=me,de.J=0+Ce+2*re),de.Tc=se,de.lb=Z)}if(B=1,Z=G.S,re=G.width,se=G.height,Z>=Uf&&13>Z)if(11>Z)k=G.f.RGBA,B&=(oe=Math.abs(k.A))*(se-1)+re<=k.size,B&=oe>=re*sb[Z],B&=k.eb!=null;else{k=G.f.kb,oe=(re+1)/2,Ce=(se+1)/2,de=Math.abs(k.fa),me=Math.abs(k.Ab);var Te=Math.abs(k.Db),ge=Math.abs(k.lb),ke=ge*(se-1)+re;B&=de*(se-1)+re<=k.Fd,B&=me*(Ce-1)+oe<=k.Cd,B=(B&=Te*(Ce-1)+oe<=k.Ed)&de>=re&me>=oe&Te>=oe,B&=k.y!=null,B&=k.f!=null,B&=k.ea!=null,Z==12&&(B&=ge>=re,B&=ke<=k.Tc,B&=k.F!=null)}else B=0;k=B?0:2}}return k!=0||z!=null&&z.fd&&(k=Sf(G)),k}var cu=64,Js=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ca=24,Xl=32,Bo=8,qc=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ct("Predictor0","PredictorAdd0"),P.Predictor0=function(){return 4278190080},P.Predictor1=function(k){return k},P.Predictor2=function(k,B,z){return B[z+0]},P.Predictor3=function(k,B,z){return B[z+1]},P.Predictor4=function(k,B,z){return B[z-1]},P.Predictor5=function(k,B,z){return bt(bt(k,B[z+1]),B[z+0])},P.Predictor6=function(k,B,z){return bt(k,B[z-1])},P.Predictor7=function(k,B,z){return bt(k,B[z+0])},P.Predictor8=function(k,B,z){return bt(B[z-1],B[z+0])},P.Predictor9=function(k,B,z){return bt(B[z+0],B[z+1])},P.Predictor10=function(k,B,z){return bt(bt(k,B[z-1]),bt(B[z+0],B[z+1]))},P.Predictor11=function(k,B,z){var G=B[z+0];return 0>=Rt(G>>24&255,k>>24&255,(B=B[z-1])>>24&255)+Rt(G>>16&255,k>>16&255,B>>16&255)+Rt(G>>8&255,k>>8&255,B>>8&255)+Rt(255&G,255&k,255&B)?G:k},P.Predictor12=function(k,B,z){var G=B[z+0];return(An((k>>24&255)+(G>>24&255)-((B=B[z-1])>>24&255))<<24|An((k>>16&255)+(G>>16&255)-(B>>16&255))<<16|An((k>>8&255)+(G>>8&255)-(B>>8&255))<<8|An((255&k)+(255&G)-(255&B)))>>>0},P.Predictor13=function(k,B,z){var G=B[z-1];return($t((k=bt(k,B[z+0]))>>24&255,G>>24&255)<<24|$t(k>>16&255,G>>16&255)<<16|$t(k>>8&255,G>>8&255)<<8|$t(255&k,255&G))>>>0};var Za=P.PredictorAdd0;P.PredictorAdd1=Le,ct("Predictor2","PredictorAdd2"),ct("Predictor3","PredictorAdd3"),ct("Predictor4","PredictorAdd4"),ct("Predictor5","PredictorAdd5"),ct("Predictor6","PredictorAdd6"),ct("Predictor7","PredictorAdd7"),ct("Predictor8","PredictorAdd8"),ct("Predictor9","PredictorAdd9"),ct("Predictor10","PredictorAdd10"),ct("Predictor11","PredictorAdd11"),ct("Predictor12","PredictorAdd12"),ct("Predictor13","PredictorAdd13");var Kc=P.PredictorAdd2;At("ColorIndexInverseTransform","MapARGB","32b",function(k){return k>>8&255},function(k){return k}),At("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(k){return k},function(k){return k>>8&255});var fs,wm=P.ColorIndexInverseTransform,oc=P.MapARGB,Pi=P.VP8LColorIndexInverseTransformAlpha,Ti=P.MapAlpha,Nh=P.VP8LPredictorsAdd=[];Nh.length=16,(P.VP8LPredictors=[]).length=16,(P.VP8LPredictorsAdd_C=[]).length=16,(P.VP8LPredictors_C=[]).length=16;var Nf,Bf,Jl,Zl,ed,eo,je,Qe,Fe,jt,Et,Zt,Pn,gn,Eo,Ef,li,lu,qw,du,_f,If,hr,Kw,Bh,Pf,Ww,Gw,Yw=i(511),Tf=i(2041),Wc=i(225),Ff=i(767),py=0,Eh=Tf,Df=Wc,Wi=Ff,Fi=Yw,Uf=0,td=1,nd=2,uu=3,bm=4,my=5,Xw=6,_h=7,Ih=8,Ph=9,gy=10,Jw=[2,3,7],yS=[3,3,11],Zw=[280,256,256,256,40],Ms=[0,1,1,1,0],bi=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],xS=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],wS=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],eb=8,vy=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Lf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Gc=null,yy=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Th=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Fh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Mf=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Cm=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Dh=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],bS=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],rd=[],_o=[],Yc=[],CS=1,Rf=2,to=[],ja=[];ci("UpsampleRgbLinePair",$c,3),ci("UpsampleBgrLinePair",Gl,3),ci("UpsampleRgbaLinePair",Sh,4),ci("UpsampleBgraLinePair",Cf,4),ci("UpsampleArgbLinePair",Vc,4),ci("UpsampleRgba4444LinePair",zc,2),ci("UpsampleRgb565LinePair",wi,2);var ie=P.UpsampleRgbLinePair,Uh=P.UpsampleBgrLinePair,Of=P.UpsampleRgbaLinePair,ka=P.UpsampleBgraLinePair,Mn=P.UpsampleArgbLinePair,tb=P.UpsampleRgba4444LinePair,jS=P.UpsampleRgb565LinePair,jm=16,cc=1<<jm-1,Qf=-227,xy=482,nb=6,kS=(256<<nb)-1,rb=0,Xc=i(256),SS=i(256),NS=i(256),BS=i(256),ES=i(xy-Qf),_S=i(xy-Qf);No("YuvToRgbRow",$c,3),No("YuvToBgrRow",Gl,3),No("YuvToRgbaRow",Sh,4),No("YuvToBgraRow",Cf,4),No("YuvToArgbRow",Vc,4),No("YuvToRgba4444Row",zc,2),No("YuvToRgb565Row",wi,2);var lc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],km=[0,2,8],IS=[8,7,6,4,4,2,2,2,1,1,1,1],PS=1;this.WebPDecodeRGBA=function(k,B,z,G,Z){var re=td,se=new Se,oe=new Nn;se.ba=oe,oe.S=re,oe.width=[oe.width],oe.height=[oe.height];var de=oe.width,me=oe.height,Ce=new en;if(Ce==null||k==null)var Te=2;else t(Ce!=null),Te=ou(k,B,z,Ce.width,Ce.height,Ce.Pd,Ce.Qd,Ce.format,null);if(Te!=0?de=0:(de!=null&&(de[0]=Ce.width[0]),me!=null&&(me[0]=Ce.height[0]),de=1),de){oe.width=oe.width[0],oe.height=oe.height[0],G!=null&&(G[0]=oe.width),Z!=null&&(Z[0]=oe.height);e:{if(G=new zl,(Z=new ze).data=k,Z.w=B,Z.ha=z,Z.kd=1,B=[0],t(Z!=null),((k=ou(Z.data,Z.w,Z.ha,null,null,null,B,null,Z))==0||k==7)&&B[0]&&(k=4),(B=k)==0){if(t(se!=null),G.data=Z.data,G.w=Z.w+Z.offset,G.ha=Z.ha-Z.offset,G.put=St,G.ac=rs,G.bc=pr,G.ma=se,Z.xa){if((k=bo())==null){se=1;break e}if(function(ge,ke){var Ee=[0],Oe=[0],Ie=[0];t:for(;;){if(ge==null)return 0;if(ke==null)return ge.a=2,0;if(ge.l=ke,ge.a=0,R(ge.m,ke.data,ke.w,ke.ha),!Vr(ge.m,Ee,Oe,Ie)){ge.a=3;break t}if(ge.xb=Rf,ke.width=Ee[0],ke.height=Oe[0],!ks(Ee[0],Oe[0],1,ge,null))break t;return 1}return t(ge.a!=0),0}(k,G)){if(G=(B=Yl(G.width,G.height,se.Oa,se.ba))==0){t:{G=k;n:for(;;){if(G==null){G=0;break t}if(t(G.s.yc!=null),t(G.s.Ya!=null),t(0<G.s.Wb),t((z=G.l)!=null),t((Z=z.ma)!=null),G.xb!=0){if(G.ca=Z.ba,G.tb=Z.tb,t(G.ca!=null),!kf(Z.Oa,z,uu)){G.a=2;break n}if(!yi(G,z.width)||z.da)break n;if((z.da||It(G.ca.S))&&wa(),11>G.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),G.ca.f.kb.F!=null&&wa()),G.Pb&&0<G.s.ua&&G.s.vb.X==null&&!ue(G.s.vb,G.s.Wa.Xa)){G.a=1;break n}G.xb=0}if(!Xs(G,G.V,G.Ba,G.c,G.i,z.o,jr))break n;Z.Dc=G.Ma,G=1;break t}t(G.a!=0),G=0}G=!G}G&&(B=k.a)}else B=k.a}else{if((k=new fh)==null){se=1;break e}if(k.Fa=Z.na,k.P=Z.P,k.qc=Z.Sa,Vl(k,G)){if((B=Yl(G.width,G.height,se.Oa,se.ba))==0){if(k.Aa=0,z=se.Oa,t((Z=k)!=null),z!=null){if(0<(de=0>(de=z.Md)?0:100<de?255:255*de/100)){for(me=Ce=0;4>me;++me)12>(Te=Z.pb[me]).lc&&(Te.ia=de*IS[0>Te.lc?0:Te.lc]>>3),Ce|=Te.ia;Ce&&(alert("todo:VP8InitRandom"),Z.ia=1)}Z.Ga=z.Id,100<Z.Ga?Z.Ga=100:0>Z.Ga&&(Z.Ga=0)}(function(ge,ke){if(ge==null)return 0;if(ke==null)return Kr(ge,2,"NULL VP8Io parameter in VP8Decode().");if(!ge.cb&&!Vl(ge,ke))return 0;if(t(ge.cb),ke.ac==null||ke.ac(ke)){ke.ob&&(ge.L=0);var Ee=km[ge.L];if(ge.L==2?(ge.yb=0,ge.zb=0):(ge.yb=ke.v-Ee>>4,ge.zb=ke.j-Ee>>4,0>ge.yb&&(ge.yb=0),0>ge.zb&&(ge.zb=0)),ge.Va=ke.o+15+Ee>>4,ge.Hb=ke.va+15+Ee>>4,ge.Hb>ge.za&&(ge.Hb=ge.za),ge.Va>ge.Ub&&(ge.Va=ge.Ub),0<ge.L){var Oe=ge.ed;for(Ee=0;4>Ee;++Ee){var Ie;if(ge.Qa.Cb){var He=ge.Qa.Lb[Ee];ge.Qa.Fb||(He+=Oe.Tb)}else He=Oe.Tb;for(Ie=0;1>=Ie;++Ie){var Ve=ge.gd[Ee][Ie],lt=He;if(Oe.Pc&&(lt+=Oe.vd[0],Ie&&(lt+=Oe.od[0])),0<(lt=0>lt?0:63<lt?63:lt)){var We=lt;0<Oe.wb&&(We=4<Oe.wb?We>>2:We>>1)>9-Oe.wb&&(We=9-Oe.wb),1>We&&(We=1),Ve.dd=We,Ve.tc=2*lt+We,Ve.ld=40<=lt?2:15<=lt?1:0}else Ve.tc=0;Ve.La=Ie}}}Ee=0}else Kr(ge,6,"Frame setup failed"),Ee=ge.a;if(Ee=Ee==0){if(Ee){ge.$c=0,0<ge.Aa||(ge.Ic=PS);t:{Ee=ge.Ic,Oe=4*(We=ge.za);var Gt=32*We,Pt=We+1,an=0<ge.L?We*(0<ge.Aa?2:1):0,qt=(ge.Aa==2?2:1)*We;if((Ve=Oe+832+(Ie=3*(16*Ee+km[ge.L])/2*Gt)+(He=ge.Fa!=null&&0<ge.Fa.length?ge.Kc.c*ge.Kc.i:0))!=Ve)Ee=0;else{if(Ve>ge.Vb){if(ge.Vb=0,ge.Ec=i(Ve),ge.Fc=0,ge.Ec==null){Ee=Kr(ge,1,"no memory during frame initialization.");break t}ge.Vb=Ve}Ve=ge.Ec,lt=ge.Fc,ge.Ac=Ve,ge.Bc=lt,lt+=Oe,ge.Gd=o(Gt,hh),ge.Hd=0,ge.rb=o(Pt+1,Hl),ge.sb=1,ge.wa=an?o(an,Ki):null,ge.Y=0,ge.D.Nb=0,ge.D.wa=ge.wa,ge.D.Y=ge.Y,0<ge.Aa&&(ge.D.Y+=We),t(!0),ge.oc=Ve,ge.pc=lt,lt+=832,ge.ya=o(qt,$l),ge.aa=0,ge.D.ya=ge.ya,ge.D.aa=ge.aa,ge.Aa==2&&(ge.D.aa+=We),ge.R=16*We,ge.B=8*We,We=(Gt=km[ge.L])*ge.R,Gt=Gt/2*ge.B,ge.sa=Ve,ge.ta=lt+We,ge.qa=ge.sa,ge.ra=ge.ta+16*Ee*ge.R+Gt,ge.Ha=ge.qa,ge.Ia=ge.ra+8*Ee*ge.B+Gt,ge.$c=0,lt+=Ie,ge.mb=He?Ve:null,ge.nb=He?lt:null,t(lt+He<=ge.Fc+ge.Vb),ya(ge),s(ge.Ac,ge.Bc,0,Oe),Ee=1}}if(Ee){if(ke.ka=0,ke.y=ge.sa,ke.O=ge.ta,ke.f=ge.qa,ke.N=ge.ra,ke.ea=ge.Ha,ke.Vd=ge.Ia,ke.fa=ge.R,ke.Rc=ge.B,ke.F=null,ke.J=0,!py){for(Ee=-255;255>=Ee;++Ee)Yw[255+Ee]=0>Ee?-Ee:Ee;for(Ee=-1020;1020>=Ee;++Ee)Tf[1020+Ee]=-128>Ee?-128:127<Ee?127:Ee;for(Ee=-112;112>=Ee;++Ee)Wc[112+Ee]=-16>Ee?-16:15<Ee?15:Ee;for(Ee=-255;510>=Ee;++Ee)Ff[255+Ee]=0>Ee?0:255<Ee?255:Ee;py=1}je=vh,Qe=ru,jt=mh,Et=jo,Zt=gh,Fe=ph,Pn=xf,gn=wf,Eo=O,Ef=te,li=Kl,lu=bf,qw=he,du=ye,_f=As,If=Rc,hr=ic,Kw=yf,_o[0]=dy,_o[1]=yh,_o[2]=cy,_o[3]=ly,_o[4]=uy,_o[5]=Mc,_o[6]=ko,_o[7]=hy,_o[8]=wh,_o[9]=Ay,rd[0]=Lc,rd[1]=ay,rd[2]=xm,rd[3]=xh,rd[4]=oy,rd[5]=su,rd[6]=pf,Yc[0]=bh,Yc[1]=ym,Yc[2]=mf,Yc[3]=or,Yc[4]=gf,Yc[5]=fy,Yc[6]=vf,Ee=1}else Ee=0}Ee&&(Ee=function(Rn,Es){for(Rn.M=0;Rn.M<Rn.Va;++Rn.M){var vn,Dt=Rn.Jc[Rn.M&Rn.Xb],xt=Rn.m,ps=Rn;for(vn=0;vn<ps.za;++vn){var pn=xt,Xn=ps,Er=Xn.Ac,Zn=Xn.Bc+4*vn,di=Xn.zc,Gr=Xn.ya[Xn.aa+vn];if(Xn.Qa.Bb?Gr.$b=pe(pn,Xn.Pa.jb[0])?2+pe(pn,Xn.Pa.jb[2]):pe(pn,Xn.Pa.jb[1]):Gr.$b=0,Xn.kc&&(Gr.Ad=pe(pn,Xn.Bd)),Gr.Za=!pe(pn,145)+0,Gr.Za){var Dr=Gr.Ob,ui=0;for(Xn=0;4>Xn;++Xn){var is,Tn=di[0+Xn];for(is=0;4>is;++is){Tn=Cm[Er[Zn+is]][Tn];for(var Ar=Fh[pe(pn,Tn[0])];0<Ar;)Ar=Fh[2*Ar+pe(pn,Tn[Ar])];Tn=-Ar,Er[Zn+is]=Tn}r(Dr,ui,Er,Zn,4),ui+=4,di[0+Xn]=Tn}}else Tn=pe(pn,156)?pe(pn,128)?1:3:pe(pn,163)?2:0,Gr.Ob[0]=Tn,s(Er,Zn,Tn,4),s(di,0,Tn,4);Gr.Dd=pe(pn,142)?pe(pn,114)?pe(pn,183)?1:3:2:0}if(ps.m.Ka)return Kr(Rn,7,"Premature end-of-partition0 encountered.");for(;Rn.ja<Rn.za;++Rn.ja){if(ps=Dt,pn=(xt=Rn).rb[xt.sb-1],Er=xt.rb[xt.sb+xt.ja],vn=xt.ya[xt.aa+xt.ja],Zn=xt.kc?vn.Ad:0)pn.la=Er.la=0,vn.Za||(pn.Na=Er.Na=0),vn.Hc=0,vn.Gc=0,vn.ia=0;else{var On,lr;if(pn=Er,Er=ps,Zn=xt.Pa.Xc,di=xt.ya[xt.aa+xt.ja],Gr=xt.pb[di.$b],Xn=di.ad,Dr=0,ui=xt.rb[xt.sb-1],Tn=is=0,s(Xn,Dr,0,384),di.Za)var hi=0,Io=Zn[3];else{Ar=i(16);var ms=pn.Na+ui.Na;if(ms=Gc(Er,Zn[1],ms,Gr.Eb,0,Ar,0),pn.Na=ui.Na=(0<ms)+0,1<ms)je(Ar,0,Xn,Dr);else{var Ci=Ar[0]+3>>3;for(Ar=0;256>Ar;Ar+=16)Xn[Dr+Ar]=Ci}hi=1,Io=Zn[0]}var kr=15&pn.la,Yr=15&ui.la;for(Ar=0;4>Ar;++Ar){var Gi=1&Yr;for(Ci=lr=0;4>Ci;++Ci)kr=kr>>1|(Gi=(ms=Gc(Er,Io,ms=Gi+(1&kr),Gr.Sc,hi,Xn,Dr))>hi)<<7,lr=lr<<2|(3<ms?3:1<ms?2:Xn[Dr+0]!=0),Dr+=16;kr>>=4,Yr=Yr>>1|Gi<<7,is=(is<<8|lr)>>>0}for(Io=kr,hi=Yr>>4,On=0;4>On;On+=2){for(lr=0,kr=pn.la>>4+On,Yr=ui.la>>4+On,Ar=0;2>Ar;++Ar){for(Gi=1&Yr,Ci=0;2>Ci;++Ci)ms=Gi+(1&kr),kr=kr>>1|(Gi=0<(ms=Gc(Er,Zn[2],ms,Gr.Qc,0,Xn,Dr)))<<3,lr=lr<<2|(3<ms?3:1<ms?2:Xn[Dr+0]!=0),Dr+=16;kr>>=2,Yr=Yr>>1|Gi<<5}Tn|=lr<<4*On,Io|=kr<<4<<On,hi|=(240&Yr)<<On}pn.la=Io,ui.la=hi,di.Hc=is,di.Gc=Tn,di.ia=43690&Tn?0:Gr.ia,Zn=!(is|Tn)}if(0<xt.L&&(xt.wa[xt.Y+xt.ja]=xt.gd[vn.$b][vn.Za],xt.wa[xt.Y+xt.ja].La|=!Zn),ps.Ka)return Kr(Rn,7,"Premature end-of-file encountered.")}if(ya(Rn),xt=Es,ps=1,vn=(Dt=Rn).D,pn=0<Dt.L&&Dt.M>=Dt.zb&&Dt.M<=Dt.Va,Dt.Aa==0)t:{if(vn.M=Dt.M,vn.uc=pn,ba(Dt,vn),ps=1,vn=(lr=Dt.D).Nb,pn=(Tn=km[Dt.L])*Dt.R,Er=Tn/2*Dt.B,Ar=16*vn*Dt.R,Ci=8*vn*Dt.B,Zn=Dt.sa,di=Dt.ta-pn+Ar,Gr=Dt.qa,Xn=Dt.ra-Er+Ci,Dr=Dt.Ha,ui=Dt.Ia-Er+Ci,Yr=(kr=lr.M)==0,is=kr>=Dt.Va-1,Dt.Aa==2&&ba(Dt,lr),lr.uc)for(Gi=(ms=Dt).D.M,t(ms.D.uc),lr=ms.yb;lr<ms.Hb;++lr){hi=lr,Io=Gi;var Di=(Sa=(Zs=ms).D).Nb;On=Zs.R;var Sa=Sa.wa[Sa.Y+hi],Ai=Zs.sa,Yi=Zs.ta+16*Di*On+16*hi,Na=Sa.dd,yr=Sa.tc;if(yr!=0)if(t(3<=yr),Zs.L==1)0<hi&&If(Ai,Yi,On,yr+4),Sa.La&&Kw(Ai,Yi,On,yr),0<Io&&_f(Ai,Yi,On,yr+4),Sa.La&&hr(Ai,Yi,On,yr);else{var Xi=Zs.B,Po=Zs.qa,hu=Zs.ra+8*Di*Xi+8*hi,Jc=Zs.Ha,Zs=Zs.Ia+8*Di*Xi+8*hi;Di=Sa.ld,0<hi&&(gn(Ai,Yi,On,yr+4,Na,Di),Ef(Po,hu,Jc,Zs,Xi,yr+4,Na,Di)),Sa.La&&(lu(Ai,Yi,On,yr,Na,Di),du(Po,hu,Jc,Zs,Xi,yr,Na,Di)),0<Io&&(Pn(Ai,Yi,On,yr+4,Na,Di),Eo(Po,hu,Jc,Zs,Xi,yr+4,Na,Di)),Sa.La&&(li(Ai,Yi,On,yr,Na,Di),qw(Po,hu,Jc,Zs,Xi,yr,Na,Di))}}if(Dt.ia&&alert("todo:DitherRow"),xt.put!=null){if(lr=16*kr,kr=16*(kr+1),Yr?(xt.y=Dt.sa,xt.O=Dt.ta+Ar,xt.f=Dt.qa,xt.N=Dt.ra+Ci,xt.ea=Dt.Ha,xt.W=Dt.Ia+Ci):(lr-=Tn,xt.y=Zn,xt.O=di,xt.f=Gr,xt.N=Xn,xt.ea=Dr,xt.W=ui),is||(kr-=Tn),kr>xt.o&&(kr=xt.o),xt.F=null,xt.J=null,Dt.Fa!=null&&0<Dt.Fa.length&&lr<kr&&(xt.J=Ns(Dt,xt,lr,kr-lr),xt.F=Dt.mb,xt.F==null&&xt.F.length==0)){ps=Kr(Dt,3,"Could not decode alpha data.");break t}lr<xt.j&&(Tn=xt.j-lr,lr=xt.j,t(!(1&Tn)),xt.O+=Dt.R*Tn,xt.N+=Dt.B*(Tn>>1),xt.W+=Dt.B*(Tn>>1),xt.F!=null&&(xt.J+=xt.width*Tn)),lr<kr&&(xt.O+=xt.v,xt.N+=xt.v>>1,xt.W+=xt.v>>1,xt.F!=null&&(xt.J+=xt.v),xt.ka=lr-xt.j,xt.U=xt.va-xt.v,xt.T=kr-lr,ps=xt.put(xt))}vn+1!=Dt.Ic||is||(r(Dt.sa,Dt.ta-pn,Zn,di+16*Dt.R,pn),r(Dt.qa,Dt.ra-Er,Gr,Xn+8*Dt.B,Er),r(Dt.Ha,Dt.Ia-Er,Dr,ui+8*Dt.B,Er))}if(!ps)return Kr(Rn,6,"Output aborted.")}return 1}(ge,ke)),ke.bc!=null&&ke.bc(ke),Ee&=1}return Ee?(ge.cb=0,Ee):0})(k,G)||(B=k.a)}}else B=k.a}B==0&&se.Oa!=null&&se.Oa.fd&&(B=Sf(se.ba))}se=B}re=se!=0?null:11>re?oe.f.RGBA.eb:oe.f.kb.y}else re=null;return re};var sb=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(P,F){for(var I="",T=0;T<4;T++)I+=String.fromCharCode(P[F++]);return I}function u(P,F){return P[F+0]|P[F+1]<<8}function h(P,F){return(P[F+0]|P[F+1]<<8|P[F+2]<<16)>>>0}function A(P,F){return(P[F+0]|P[F+1]<<8|P[F+2]<<16|P[F+3]<<24)>>>0}new l;var f=[0],m=[0],g=[],b=new l,y=e,j=function(P,F){var I={},T=0,Q=!1,D=0,M=0;if(I.frames=[],!function(q,K){for(var J=0;J<4;J++)if(q[K+J]!="RIFF".charCodeAt(J))return!0;return!1}(P,F)){for(A(P,F+=4),F+=8;F<P.length;){var U=d(P,F),H=A(P,F+=4);F+=4;var $=H+(1&H);switch(U){case"VP8 ":case"VP8L":I.frames[T]===void 0&&(I.frames[T]={}),(X=I.frames[T]).src_off=Q?M:F-8,X.src_size=D+H+8,T++,Q&&(Q=!1,D=0,M=0);break;case"VP8X":(X=I.header={}).feature_flags=P[F];var R=F+4;X.canvas_width=1+h(P,R),R+=3,X.canvas_height=1+h(P,R),R+=3;break;case"ALPH":Q=!0,D=$+8,M=F-8;break;case"ANIM":(X=I.header).bgcolor=A(P,F),R=F+4,X.loop_count=u(P,R),R+=2;break;case"ANMF":var Y,X;(X=I.frames[T]={}).offset_x=2*h(P,F),F+=3,X.offset_y=2*h(P,F),F+=3,X.width=1+h(P,F),F+=3,X.height=1+h(P,F),F+=3,X.duration=h(P,F),F+=3,Y=P[F++],X.dispose=1&Y,X.blend=Y>>1&1}U!="ANMF"&&(F+=$)}return I}}(y,0);j.response=y,j.rgbaoutput=!0,j.dataurl=!1;var x=j.header?j.header:null,C=j.frames?j.frames:null;if(x){x.loop_counter=x.loop_count,f=[x.canvas_height],m=[x.canvas_width];for(var S=0;S<C.length&&C[S].blend!=0;S++);}var _=C[0],N=b.WebPDecodeRGBA(y,_.src_off,_.src_size,m,f);_.rgba=N,_.imgwidth=m[0],_.imgheight=f[0];for(var L=0;L<m[0]*f[0]*4;L++)g[L]=N[L];return this.width=m,this.height=f,this.data=g,this}(function(e){var t,n,r,s,i,o,c,l,d,u=function(q){return q=q||{},this.isStrokeTransparent=q.isStrokeTransparent||!1,this.strokeOpacity=q.strokeOpacity||1,this.strokeStyle=q.strokeStyle||"#000000",this.fillStyle=q.fillStyle||"#000000",this.isFillTransparent=q.isFillTransparent||!1,this.fillOpacity=q.fillOpacity||1,this.font=q.font||"10px sans-serif",this.textBaseline=q.textBaseline||"alphabetic",this.textAlign=q.textAlign||"left",this.lineWidth=q.lineWidth||1,this.lineJoin=q.lineJoin||"miter",this.lineCap=q.lineCap||"butt",this.path=q.path||[],this.transform=q.transform!==void 0?q.transform.clone():new l,this.globalCompositeOperation=q.globalCompositeOperation||"normal",this.globalAlpha=q.globalAlpha||1,this.clip_path=q.clip_path||[],this.currentPoint=q.currentPoint||new o,this.miterLimit=q.miterLimit||10,this.lastPoint=q.lastPoint||new o,this.lineDashOffset=q.lineDashOffset||0,this.lineDash=q.lineDash||[],this.margin=q.margin||[0,0,0,0],this.prevPageLastElemOffset=q.prevPageLastElemOffset||0,this.ignoreClearRect=typeof q.ignoreClearRect!="boolean"||q.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,c=this.internal.Rectangle,l=this.internal.Matrix,d=new u}]);var h=function(q){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var K=q;Object.defineProperty(this,"pdf",{get:function(){return K}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(xe){J=!!xe}});var W=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return W},set:function(xe){W=!!xe}});var ne=0;Object.defineProperty(this,"posX",{get:function(){return ne},set:function(xe){isNaN(xe)||(ne=xe)}});var ae=0;Object.defineProperty(this,"posY",{get:function(){return ae},set:function(xe){isNaN(xe)||(ae=xe)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(xe){var ue;typeof xe=="number"?ue=[xe,xe,xe,xe]:((ue=new Array(4))[0]=xe[0],ue[1]=xe.length>=2?xe[1]:ue[0],ue[2]=xe.length>=3?xe[2]:ue[0],ue[3]=xe.length>=4?xe[3]:ue[1]),d.margin=ue}});var ce=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ce},set:function(xe){ce=xe}});var Ae=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ae},set:function(xe){Ae=xe}});var pe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return pe},set:function(xe){pe=xe}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(xe){xe instanceof u&&(d=xe)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(xe){d.path=xe}});var be=[];Object.defineProperty(this,"ctxStack",{get:function(){return be},set:function(xe){be=xe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(xe){var ue;ue=A(xe),this.ctx.fillStyle=ue.style,this.ctx.isFillTransparent=ue.a===0,this.ctx.fillOpacity=ue.a,this.pdf.setFillColor(ue.r,ue.g,ue.b,{a:ue.a}),this.pdf.setTextColor(ue.r,ue.g,ue.b,{a:ue.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(xe){var ue=A(xe);this.ctx.strokeStyle=ue.style,this.ctx.isStrokeTransparent=ue.a===0,this.ctx.strokeOpacity=ue.a,ue.a===0?this.pdf.setDrawColor(255,255,255):(ue.a,this.pdf.setDrawColor(ue.r,ue.g,ue.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(xe){["butt","round","square"].indexOf(xe)!==-1&&(this.ctx.lineCap=xe,this.pdf.setLineCap(xe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(xe){isNaN(xe)||(this.ctx.lineWidth=xe,this.pdf.setLineWidth(xe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(xe){["bevel","round","miter"].indexOf(xe)!==-1&&(this.ctx.lineJoin=xe,this.pdf.setLineJoin(xe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(xe){isNaN(xe)||(this.ctx.miterLimit=xe,this.pdf.setMiterLimit(xe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(xe){this.ctx.textBaseline=xe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(xe){["right","end","center","left","start"].indexOf(xe)!==-1&&(this.ctx.textAlign=xe)}});var Ne=null,Pe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Pe},set:function(xe){Ne=null,Pe=xe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(xe){var ue;if(this.ctx.font=xe,(ue=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(xe))!==null){var yt=ue[1];ue[2];var ht=ue[3],Ct=ue[4];ue[5];var Me=ue[6],kt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ct)[2];Ct=Math.floor(kt==="px"?parseFloat(Ct)*this.pdf.internal.scaleFactor:kt==="em"?parseFloat(Ct)*this.pdf.getFontSize():parseFloat(Ct)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ct);var ct=function(pt){var At,rn,vt=[],Bt=pt.trim();if(Bt==="")return AE;if(Bt in $6)return[$6[Bt]];for(;Bt!=="";){switch(rn=null,At=(Bt=V6(Bt)).charAt(0)){case'"':case"'":rn=b6e(Bt.substring(1),At);break;default:rn=C6e(Bt)}if(rn===null||(vt.push(rn[0]),(Bt=V6(rn[1]))!==""&&Bt.charAt(0)!==","))return AE;Bt=Bt.replace(/^,/,"")}return vt}(Me);if(this.fontFaces){var Nt=function(pt,At){if(Ne===null){var rn=function(vt){var Bt=[];return Object.keys(vt).forEach(function(Xt){vt[Xt].forEach(function(bn){var Qt=null;switch(bn){case"bold":Qt={family:Xt,weight:"bold"};break;case"italic":Qt={family:Xt,style:"italic"};break;case"bolditalic":Qt={family:Xt,weight:"bold",style:"italic"};break;case"":case"normal":Qt={family:Xt}}Qt!==null&&(Qt.ref={name:Xt,style:bn},Bt.push(Qt))})}),Bt}(pt.getFontList());Ne=function(vt){for(var Bt={},Xt=0;Xt<vt.length;++Xt){var bn=hE(vt[Xt]),Qt=bn.family,on=bn.stretch,It=bn.style,Ut=bn.weight;Bt[Qt]=Bt[Qt]||{},Bt[Qt][on]=Bt[Qt][on]||{},Bt[Qt][on][It]=Bt[Qt][on][It]||{},Bt[Qt][on][It][Ut]=bn}return Bt}(rn.concat(At))}return Ne}(this.pdf,this.fontFaces),bt=ct.map(function(pt){return{family:pt,stretch:"normal",weight:ht,style:yt}}),An=function(pt,At,rn){for(var vt=(rn=rn||{}).defaultFontFamily||"times",Bt=Object.assign({},w6e,rn.genericFontFamilies||{}),Xt=null,bn=null,Qt=0;Qt<At.length;++Qt)if(Bt[(Xt=hE(At[Qt])).family]&&(Xt.family=Bt[Xt.family]),pt.hasOwnProperty(Xt.family)){bn=pt[Xt.family];break}if(!(bn=bn||pt[vt]))throw new Error("Could not find a font-family for the rule '"+z6(Xt)+"' and default family '"+vt+"'.");if(bn=function(on,It){if(It[on])return It[on];var Ut=CI[on],Wn=Ut<=CI.normal?-1:1,Nn=H6(It,TZ,Ut,Wn);if(!Nn)throw new Error("Could not find a matching font-stretch value for "+on);return Nn}(Xt.stretch,bn),bn=function(on,It){if(It[on])return It[on];for(var Ut=PZ[on],Wn=0;Wn<Ut.length;++Wn)if(It[Ut[Wn]])return It[Ut[Wn]];throw new Error("Could not find a matching font-style for "+on)}(Xt.style,bn),!(bn=function(on,It){if(It[on])return It[on];if(on===400&&It[500])return It[500];if(on===500&&It[400])return It[400];var Ut=x6e[on],Wn=H6(It,FZ,Ut,on<400?-1:1);if(!Wn)throw new Error("Could not find a matching font-weight for value "+on);return Wn}(Xt.weight,bn)))throw new Error("Failed to resolve a font for the rule '"+z6(Xt)+"'.");return bn}(Nt,bt);this.pdf.setFont(An.ref.name,An.ref.style)}else{var $t="";(ht==="bold"||parseInt(ht,10)>=700||yt==="bold")&&($t="bold"),yt==="italic"&&($t+="italic"),$t.length===0&&($t="normal");for(var Rt="",Le={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ke=0;Ke<ct.length;Ke++){if(this.pdf.internal.getFont(ct[Ke],$t,{noFallback:!0,disableWarning:!0})!==void 0){Rt=ct[Ke];break}if($t==="bolditalic"&&this.pdf.internal.getFont(ct[Ke],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Rt=ct[Ke],$t="bold";else if(this.pdf.internal.getFont(ct[Ke],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Rt=ct[Ke],$t="normal";break}}if(Rt===""){for(var it=0;it<ct.length;it++)if(Le[ct[it]]){Rt=Le[ct[it]];break}}Rt=Rt===""?"Times":Rt,this.pdf.setFont(Rt,$t)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(xe){this.ctx.globalCompositeOperation=xe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(xe){this.ctx.globalAlpha=xe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(xe){this.ctx.lineDashOffset=xe,X.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(xe){this.ctx.lineDash=xe,X.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(xe){this.ctx.ignoreClearRect=!!xe}})};h.prototype.setLineDash=function(q){this.lineDash=q},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){C.call(this,"fill",!1)},h.prototype.stroke=function(){C.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(q,K){if(isNaN(q)||isNaN(K))throw Ur.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new o(q,K));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(q,K)},h.prototype.closePath=function(){var q=new o(0,0),K=0;for(K=this.path.length-1;K!==-1;K--)if(this.path[K].type==="begin"&&Sr(this.path[K+1])==="object"&&typeof this.path[K+1].x=="number"){q=new o(this.path[K+1].x,this.path[K+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(q.x,q.y)},h.prototype.lineTo=function(q,K){if(isNaN(q)||isNaN(K))throw Ur.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new o(q,K));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(J.x,J.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),C.call(this,null,!0)},h.prototype.quadraticCurveTo=function(q,K,J,W){if(isNaN(J)||isNaN(W)||isNaN(q)||isNaN(K))throw Ur.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ne=this.ctx.transform.applyToPoint(new o(J,W)),ae=this.ctx.transform.applyToPoint(new o(q,K));this.path.push({type:"qct",x1:ae.x,y1:ae.y,x:ne.x,y:ne.y}),this.ctx.lastPoint=new o(ne.x,ne.y)},h.prototype.bezierCurveTo=function(q,K,J,W,ne,ae){if(isNaN(ne)||isNaN(ae)||isNaN(q)||isNaN(K)||isNaN(J)||isNaN(W))throw Ur.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ce=this.ctx.transform.applyToPoint(new o(ne,ae)),Ae=this.ctx.transform.applyToPoint(new o(q,K)),pe=this.ctx.transform.applyToPoint(new o(J,W));this.path.push({type:"bct",x1:Ae.x,y1:Ae.y,x2:pe.x,y2:pe.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new o(ce.x,ce.y)},h.prototype.arc=function(q,K,J,W,ne,ae){if(isNaN(q)||isNaN(K)||isNaN(J)||isNaN(W)||isNaN(ne))throw Ur.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ae=!!ae,!this.ctx.transform.isIdentity){var ce=this.ctx.transform.applyToPoint(new o(q,K));q=ce.x,K=ce.y;var Ae=this.ctx.transform.applyToPoint(new o(0,J)),pe=this.ctx.transform.applyToPoint(new o(0,0));J=Math.sqrt(Math.pow(Ae.x-pe.x,2)+Math.pow(Ae.y-pe.y,2))}Math.abs(ne-W)>=2*Math.PI&&(W=0,ne=2*Math.PI),this.path.push({type:"arc",x:q,y:K,radius:J,startAngle:W,endAngle:ne,counterclockwise:ae})},h.prototype.arcTo=function(q,K,J,W,ne){throw new Error("arcTo not implemented.")},h.prototype.rect=function(q,K,J,W){if(isNaN(q)||isNaN(K)||isNaN(J)||isNaN(W))throw Ur.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(q,K),this.lineTo(q+J,K),this.lineTo(q+J,K+W),this.lineTo(q,K+W),this.lineTo(q,K),this.lineTo(q+J,K),this.lineTo(q,K)},h.prototype.fillRect=function(q,K,J,W){if(isNaN(q)||isNaN(K)||isNaN(J)||isNaN(W))throw Ur.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var ne={};this.lineCap!=="butt"&&(ne.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ne.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(q,K,J,W),this.fill(),ne.hasOwnProperty("lineCap")&&(this.lineCap=ne.lineCap),ne.hasOwnProperty("lineJoin")&&(this.lineJoin=ne.lineJoin)}},h.prototype.strokeRect=function(q,K,J,W){if(isNaN(q)||isNaN(K)||isNaN(J)||isNaN(W))throw Ur.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(q,K,J,W),this.stroke())},h.prototype.clearRect=function(q,K,J,W){if(isNaN(q)||isNaN(K)||isNaN(J)||isNaN(W))throw Ur.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(q,K,J,W))},h.prototype.save=function(q){q=typeof q!="boolean"||q;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(K),q){this.ctx.fontSize=this.pdf.internal.getFontSize();var W=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=W}},h.prototype.restore=function(q){q=typeof q!="boolean"||q;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(K),q&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var A=function(q){var K,J,W,ne;if(q.isCanvasGradient===!0&&(q=q.getColor()),!q)return{r:0,g:0,b:0,a:0,style:q};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(q))K=0,J=0,W=0,ne=0;else{var ae=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(q);if(ae!==null)K=parseInt(ae[1]),J=parseInt(ae[2]),W=parseInt(ae[3]),ne=1;else if((ae=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(q))!==null)K=parseInt(ae[1]),J=parseInt(ae[2]),W=parseInt(ae[3]),ne=parseFloat(ae[4]);else{if(ne=1,typeof q=="string"&&q.charAt(0)!=="#"){var ce=new kZ(q);q=ce.ok?ce.toHex():"#000000"}q.length===4?(K=q.substring(1,2),K+=K,J=q.substring(2,3),J+=J,W=q.substring(3,4),W+=W):(K=q.substring(1,3),J=q.substring(3,5),W=q.substring(5,7)),K=parseInt(K,16),J=parseInt(J,16),W=parseInt(W,16)}}return{r:K,g:J,b:W,a:ne,style:q}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(q,K,J,W){if(isNaN(K)||isNaN(J)||typeof q!="string")throw Ur.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(W=isNaN(W)?void 0:W,!f.call(this)){var ne=$(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;T.call(this,{text:q,x:K,y:J,scale:ae,angle:ne,align:this.textAlign,maxWidth:W})}},h.prototype.strokeText=function(q,K,J,W){if(isNaN(K)||isNaN(J)||typeof q!="string")throw Ur.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){W=isNaN(W)?void 0:W;var ne=$(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;T.call(this,{text:q,x:K,y:J,scale:ae,renderingMode:"stroke",angle:ne,align:this.textAlign,maxWidth:W})}},h.prototype.measureText=function(q){if(typeof q!="string")throw Ur.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var K=this.pdf,J=this.pdf.internal.scaleFactor,W=K.internal.getFontSize(),ne=K.getStringUnitWidth(q)*W/K.internal.scaleFactor;return new function(ae){var ce=(ae=ae||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ce}}),this}({width:ne*=Math.round(96*J/72*1e4)/1e4})},h.prototype.scale=function(q,K){if(isNaN(q)||isNaN(K))throw Ur.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new l(q,0,0,K,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},h.prototype.rotate=function(q){if(isNaN(q))throw Ur.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var K=new l(Math.cos(q),Math.sin(q),-Math.sin(q),Math.cos(q),0,0);this.ctx.transform=this.ctx.transform.multiply(K)},h.prototype.translate=function(q,K){if(isNaN(q)||isNaN(K))throw Ur.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new l(1,0,0,1,q,K);this.ctx.transform=this.ctx.transform.multiply(J)},h.prototype.transform=function(q,K,J,W,ne,ae){if(isNaN(q)||isNaN(K)||isNaN(J)||isNaN(W)||isNaN(ne)||isNaN(ae))throw Ur.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ce=new l(q,K,J,W,ne,ae);this.ctx.transform=this.ctx.transform.multiply(ce)},h.prototype.setTransform=function(q,K,J,W,ne,ae){q=isNaN(q)?1:q,K=isNaN(K)?0:K,J=isNaN(J)?0:J,W=isNaN(W)?1:W,ne=isNaN(ne)?0:ne,ae=isNaN(ae)?0:ae,this.ctx.transform=new l(q,K,J,W,ne,ae)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(q,K,J,W,ne,ae,ce,Ae,pe){var be=this.pdf.getImageProperties(q),Ne=1,Pe=1,xe=1,ue=1;W!==void 0&&Ae!==void 0&&(xe=Ae/W,ue=pe/ne,Ne=be.width/W*Ae/W,Pe=be.height/ne*pe/ne),ae===void 0&&(ae=K,ce=J,K=0,J=0),W!==void 0&&Ae===void 0&&(Ae=W,pe=ne),W===void 0&&Ae===void 0&&(Ae=be.width,pe=be.height);for(var yt,ht=this.ctx.transform.decompose(),Ct=$(ht.rotate.shx),Me=new l,kt=(Me=(Me=(Me=Me.multiply(ht.translate)).multiply(ht.skew)).multiply(ht.scale)).applyToRectangle(new c(ae-K*xe,ce-J*ue,W*Ne,ne*Pe)),ct=b.call(this,kt),Nt=[],bt=0;bt<ct.length;bt+=1)Nt.indexOf(ct[bt])===-1&&Nt.push(ct[bt]);if(x(Nt),this.autoPaging)for(var An=Nt[0],$t=Nt[Nt.length-1],Rt=An;Rt<$t+1;Rt++){this.pdf.setPage(Rt);var Le=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ke=Rt===1?this.posY+this.margin[0]:this.margin[0],it=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],pt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],At=Rt===1?0:it+(Rt-2)*pt;if(this.ctx.clip_path.length!==0){var rn=this.path;yt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(yt,this.posX+this.margin[3],-At+Ke+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=rn}var vt=JSON.parse(JSON.stringify(kt));vt=j([vt],this.posX+this.margin[3],-At+Ke+this.ctx.prevPageLastElemOffset)[0];var Bt=(Rt>An||Rt<$t)&&g.call(this);Bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Le,pt,null).clip().discardPath()),this.pdf.addImage(q,"JPEG",vt.x,vt.y,vt.w,vt.h,null,null,Ct),Bt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(q,"JPEG",kt.x,kt.y,kt.w,kt.h,null,null,Ct)};var b=function(q,K,J){var W=[];K=K||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ne=this.posY+this.ctx.prevPageLastElemOffset;switch(q.type){default:case"mt":case"lt":W.push(Math.floor((q.y+ne)/J)+1);break;case"arc":W.push(Math.floor((q.y+ne-q.radius)/J)+1),W.push(Math.floor((q.y+ne+q.radius)/J)+1);break;case"qct":var ae=R(this.ctx.lastPoint.x,this.ctx.lastPoint.y,q.x1,q.y1,q.x,q.y);W.push(Math.floor((ae.y+ne)/J)+1),W.push(Math.floor((ae.y+ae.h+ne)/J)+1);break;case"bct":var ce=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,q.x1,q.y1,q.x2,q.y2,q.x,q.y);W.push(Math.floor((ce.y+ne)/J)+1),W.push(Math.floor((ce.y+ce.h+ne)/J)+1);break;case"rect":W.push(Math.floor((q.y+ne)/J)+1),W.push(Math.floor((q.y+q.h+ne)/J)+1)}for(var Ae=0;Ae<W.length;Ae+=1)for(;this.pdf.internal.getNumberOfPages()<W[Ae];)y.call(this);return W},y=function(){var q=this.fillStyle,K=this.strokeStyle,J=this.font,W=this.lineCap,ne=this.lineWidth,ae=this.lineJoin;this.pdf.addPage(),this.fillStyle=q,this.strokeStyle=K,this.font=J,this.lineCap=W,this.lineWidth=ne,this.lineJoin=ae},j=function(q,K,J){for(var W=0;W<q.length;W++)switch(q[W].type){case"bct":q[W].x2+=K,q[W].y2+=J;case"qct":q[W].x1+=K,q[W].y1+=J;default:q[W].x+=K,q[W].y+=J}return q},x=function(q){return q.sort(function(K,J){return K-J})},C=function(q,K){for(var J,W,ne=this.fillStyle,ae=this.strokeStyle,ce=this.lineCap,Ae=this.lineWidth,pe=Math.abs(Ae*this.ctx.transform.scaleX),be=this.lineJoin,Ne=JSON.parse(JSON.stringify(this.path)),Pe=JSON.parse(JSON.stringify(this.path)),xe=[],ue=0;ue<Pe.length;ue++)if(Pe[ue].x!==void 0)for(var yt=b.call(this,Pe[ue]),ht=0;ht<yt.length;ht+=1)xe.indexOf(yt[ht])===-1&&xe.push(yt[ht]);for(var Ct=0;Ct<xe.length;Ct++)for(;this.pdf.internal.getNumberOfPages()<xe[Ct];)y.call(this);if(x(xe),this.autoPaging)for(var Me=xe[0],kt=xe[xe.length-1],ct=Me;ct<kt+1;ct++){this.pdf.setPage(ct),this.fillStyle=ne,this.strokeStyle=ae,this.lineCap=ce,this.lineWidth=pe,this.lineJoin=be;var Nt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],bt=ct===1?this.posY+this.margin[0]:this.margin[0],An=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$t=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Rt=ct===1?0:An+(ct-2)*$t;if(this.ctx.clip_path.length!==0){var Le=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(J,this.posX+this.margin[3],-Rt+bt+this.ctx.prevPageLastElemOffset),S.call(this,q,!0),this.path=Le}if(W=JSON.parse(JSON.stringify(Ne)),this.path=j(W,this.posX+this.margin[3],-Rt+bt+this.ctx.prevPageLastElemOffset),K===!1||ct===0){var Ke=(ct>Me||ct<kt)&&g.call(this);Ke&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Nt,$t,null).clip().discardPath()),S.call(this,q,K),Ke&&this.pdf.restoreGraphicsState()}this.lineWidth=Ae}else this.lineWidth=pe,S.call(this,q,K),this.lineWidth=Ae;this.path=Ne},S=function(q,K){if((q!=="stroke"||K||!m.call(this))&&(q==="stroke"||K||!f.call(this))){for(var J,W,ne=[],ae=this.path,ce=0;ce<ae.length;ce++){var Ae=ae[ce];switch(Ae.type){case"begin":ne.push({begin:!0});break;case"close":ne.push({close:!0});break;case"mt":ne.push({start:Ae,deltas:[],abs:[]});break;case"lt":var pe=ne.length;if(ae[ce-1]&&!isNaN(ae[ce-1].x)&&(J=[Ae.x-ae[ce-1].x,Ae.y-ae[ce-1].y],pe>0)){for(;pe>=0;pe--)if(ne[pe-1].close!==!0&&ne[pe-1].begin!==!0){ne[pe-1].deltas.push(J),ne[pe-1].abs.push(Ae);break}}break;case"bct":J=[Ae.x1-ae[ce-1].x,Ae.y1-ae[ce-1].y,Ae.x2-ae[ce-1].x,Ae.y2-ae[ce-1].y,Ae.x-ae[ce-1].x,Ae.y-ae[ce-1].y],ne[ne.length-1].deltas.push(J);break;case"qct":var be=ae[ce-1].x+2/3*(Ae.x1-ae[ce-1].x),Ne=ae[ce-1].y+2/3*(Ae.y1-ae[ce-1].y),Pe=Ae.x+2/3*(Ae.x1-Ae.x),xe=Ae.y+2/3*(Ae.y1-Ae.y),ue=Ae.x,yt=Ae.y;J=[be-ae[ce-1].x,Ne-ae[ce-1].y,Pe-ae[ce-1].x,xe-ae[ce-1].y,ue-ae[ce-1].x,yt-ae[ce-1].y],ne[ne.length-1].deltas.push(J);break;case"arc":ne.push({deltas:[],abs:[],arc:!0}),Array.isArray(ne[ne.length-1].abs)&&ne[ne.length-1].abs.push(Ae)}}W=K?null:q==="stroke"?"stroke":"fill";for(var ht=!1,Ct=0;Ct<ne.length;Ct++)if(ne[Ct].arc)for(var Me=ne[Ct].abs,kt=0;kt<Me.length;kt++){var ct=Me[kt];ct.type==="arc"?L.call(this,ct.x,ct.y,ct.radius,ct.startAngle,ct.endAngle,ct.counterclockwise,void 0,K,!ht):Q.call(this,ct.x,ct.y),ht=!0}else if(ne[Ct].close===!0)this.pdf.internal.out("h"),ht=!1;else if(ne[Ct].begin!==!0){var Nt=ne[Ct].start.x,bt=ne[Ct].start.y;D.call(this,ne[Ct].deltas,Nt,bt),ht=!0}W&&P.call(this,W),K&&F.call(this)}},_=function(q){var K=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=K*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return q-J;case"top":return q+K-J;case"hanging":return q+K-2*J;case"middle":return q+K/2-J;default:return q}},N=function(q){return q+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var q=function(){};return q.colorStops=[],q.addColorStop=function(K,J){this.colorStops.push([K,J])},q.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},q.isCanvasGradient=!0,q},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var L=function(q,K,J,W,ne,ae,ce,Ae,pe){for(var be=U.call(this,J,W,ne,ae),Ne=0;Ne<be.length;Ne++){var Pe=be[Ne];Ne===0&&(pe?I.call(this,Pe.x1+q,Pe.y1+K):Q.call(this,Pe.x1+q,Pe.y1+K)),M.call(this,q,K,Pe.x2,Pe.y2,Pe.x3,Pe.y3,Pe.x4,Pe.y4)}Ae?F.call(this):P.call(this,ce)},P=function(q){switch(q){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},F=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(q,K){this.pdf.internal.out(n(q)+" "+r(K)+" m")},T=function(q){var K;switch(q.align){case"right":case"end":K="right";break;case"center":K="center";break;default:K="left"}var J=this.pdf.getTextDimensions(q.text),W=_.call(this,q.y),ne=N.call(this,W)-J.h,ae=this.ctx.transform.applyToPoint(new o(q.x,W)),ce=this.ctx.transform.decompose(),Ae=new l;Ae=(Ae=(Ae=Ae.multiply(ce.translate)).multiply(ce.skew)).multiply(ce.scale);for(var pe,be,Ne,Pe=this.ctx.transform.applyToRectangle(new c(q.x,W,J.w,J.h)),xe=Ae.applyToRectangle(new c(q.x,ne,J.w,J.h)),ue=b.call(this,xe),yt=[],ht=0;ht<ue.length;ht+=1)yt.indexOf(ue[ht])===-1&&yt.push(ue[ht]);if(x(yt),this.autoPaging)for(var Ct=yt[0],Me=yt[yt.length-1],kt=Ct;kt<Me+1;kt++){this.pdf.setPage(kt);var ct=kt===1?this.posY+this.margin[0]:this.margin[0],Nt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],bt=this.pdf.internal.pageSize.height-this.margin[2],An=bt-this.margin[0],$t=this.pdf.internal.pageSize.width-this.margin[1],Rt=$t-this.margin[3],Le=kt===1?0:Nt+(kt-2)*An;if(this.ctx.clip_path.length!==0){var Ke=this.path;pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(pe,this.posX+this.margin[3],-1*Le+ct),S.call(this,"fill",!0),this.path=Ke}var it=j([JSON.parse(JSON.stringify(xe))],this.posX+this.margin[3],-Le+ct+this.ctx.prevPageLastElemOffset)[0];q.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*q.scale),Ne=this.lineWidth,this.lineWidth=Ne*q.scale);var pt=this.autoPaging!=="text";if(pt||it.y+it.h<=bt){if(pt||it.y>=ct&&it.x<=$t){var At=pt?q.text:this.pdf.splitTextToSize(q.text,q.maxWidth||$t-it.x)[0],rn=j([JSON.parse(JSON.stringify(Pe))],this.posX+this.margin[3],-Le+ct+this.ctx.prevPageLastElemOffset)[0],vt=pt&&(kt>Ct||kt<Me)&&g.call(this);vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Rt,An,null).clip().discardPath()),this.pdf.text(At,rn.x,rn.y,{angle:q.angle,align:K,renderingMode:q.renderingMode}),vt&&this.pdf.restoreGraphicsState()}}else it.y<bt&&(this.ctx.prevPageLastElemOffset+=bt-it.y);q.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=Ne)}else q.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*q.scale),Ne=this.lineWidth,this.lineWidth=Ne*q.scale),this.pdf.text(q.text,ae.x+this.posX,ae.y+this.posY,{angle:q.angle,align:K,renderingMode:q.renderingMode,maxWidth:q.maxWidth}),q.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=Ne)},Q=function(q,K,J,W){J=J||0,W=W||0,this.pdf.internal.out(n(q+J)+" "+r(K+W)+" l")},D=function(q,K,J){return this.pdf.lines(q,K,J,null,null)},M=function(q,K,J,W,ne,ae,ce,Ae){this.pdf.internal.out([t(s(J+q)),t(i(W+K)),t(s(ne+q)),t(i(ae+K)),t(s(ce+q)),t(i(Ae+K)),"c"].join(" "))},U=function(q,K,J,W){for(var ne=2*Math.PI,ae=Math.PI/2;K>J;)K-=ne;var ce=Math.abs(J-K);ce<ne&&W&&(ce=ne-ce);for(var Ae=[],pe=W?-1:1,be=K;ce>1e-5;){var Ne=be+pe*Math.min(ce,ae);Ae.push(H.call(this,q,be,Ne)),ce-=Math.abs(Ne-be),be=Ne}return Ae},H=function(q,K,J){var W=(J-K)/2,ne=q*Math.cos(W),ae=q*Math.sin(W),ce=ne,Ae=-ae,pe=ce*ce+Ae*Ae,be=pe+ce*ne+Ae*ae,Ne=4/3*(Math.sqrt(2*pe*be)-be)/(ce*ae-Ae*ne),Pe=ce-Ne*Ae,xe=Ae+Ne*ce,ue=Pe,yt=-xe,ht=W+K,Ct=Math.cos(ht),Me=Math.sin(ht);return{x1:q*Math.cos(K),y1:q*Math.sin(K),x2:Pe*Ct-xe*Me,y2:Pe*Me+xe*Ct,x3:ue*Ct-yt*Me,y3:ue*Me+yt*Ct,x4:q*Math.cos(J),y4:q*Math.sin(J)}},$=function(q){return 180*q/Math.PI},R=function(q,K,J,W,ne,ae){var ce=q+.5*(J-q),Ae=K+.5*(W-K),pe=ne+.5*(J-ne),be=ae+.5*(W-ae),Ne=Math.min(q,ne,ce,pe),Pe=Math.max(q,ne,ce,pe),xe=Math.min(K,ae,Ae,be),ue=Math.max(K,ae,Ae,be);return new c(Ne,xe,Pe-Ne,ue-xe)},Y=function(q,K,J,W,ne,ae,ce,Ae){var pe,be,Ne,Pe,xe,ue,yt,ht,Ct,Me,kt,ct,Nt,bt,An=J-q,$t=W-K,Rt=ne-J,Le=ae-W,Ke=ce-ne,it=Ae-ae;for(be=0;be<41;be++)Ct=(yt=(Ne=q+(pe=be/40)*An)+pe*((xe=J+pe*Rt)-Ne))+pe*(xe+pe*(ne+pe*Ke-xe)-yt),Me=(ht=(Pe=K+pe*$t)+pe*((ue=W+pe*Le)-Pe))+pe*(ue+pe*(ae+pe*it-ue)-ht),be==0?(kt=Ct,ct=Me,Nt=Ct,bt=Me):(kt=Math.min(kt,Ct),ct=Math.min(ct,Me),Nt=Math.max(Nt,Ct),bt=Math.max(bt,Me));return new c(Math.round(kt),Math.round(ct),Math.round(Nt-kt),Math.round(bt-ct))},X=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var q,K,J=(q=this.ctx.lineDash,K=this.ctx.lineDashOffset,JSON.stringify({lineDash:q,lineDashOffset:K}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(tn.API),function(e){var t=function(o){var c,l,d,u,h,A,f,m,g,b;for(l=[],d=0,u=(o+=c="\0\0\0\0".slice(o.length%4||4)).length;u>d;d+=4)(h=(o.charCodeAt(d)<<24)+(o.charCodeAt(d+1)<<16)+(o.charCodeAt(d+2)<<8)+o.charCodeAt(d+3))!==0?(A=(h=((h=((h=((h=(h-(b=h%85))/85)-(g=h%85))/85)-(m=h%85))/85)-(f=h%85))/85)%85,l.push(A+33,f+33,m+33,g+33,b+33)):l.push(122);return function(y,j){for(var x=j;x>0;x--)y.pop()}(l,c.length),String.fromCharCode.apply(String,l)+"~>"},n=function(o){var c,l,d,u,h,A=String,f="length",m=255,g="charCodeAt",b="slice",y="replace";for(o[b](-2),o=o[b](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),d=[],u=0,h=(o+=c="uuuuu"[b](o[f]%5||5))[f];h>u;u+=5)l=52200625*(o[g](u)-33)+614125*(o[g](u+1)-33)+7225*(o[g](u+2)-33)+85*(o[g](u+3)-33)+(o[g](u+4)-33),d.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(j,x){for(var C=x;C>0;C--)j.pop()}(d,c[f]),A.fromCharCode.apply(A,d)},r=function(o){return o.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">"},s=function(o){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),c.test(o)===!1)return"";for(var l="",d=0;d<o.length;d+=2)l+=String.fromCharCode("0x"+(o[d]+o[d+1]));return l},i=function(o){for(var c=new Uint8Array(o.length),l=o.length;l--;)c[l]=o.charCodeAt(l);return(c=dI(c)).reduce(function(d,u){return d+String.fromCharCode(u)},"")};e.processDataByFilters=function(o,c){var l=0,d=o||"",u=[];for(typeof(c=c||[])=="string"&&(c=[c]),l=0;l<c.length;l+=1)switch(c[l]){case"ASCII85Decode":case"/ASCII85Decode":d=n(d),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=t(d),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=s(d),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=r(d),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=i(d),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[l]+'" is not implemented')}return{data:d,reverseChain:u.reverse().join(" ")}}}(tn.API),function(e){e.loadFile=function(t,n,r){return function(s,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var c=void 0;try{c=function(l,d,u){var h=new XMLHttpRequest,A=0,f=function(m){var g=m.length,b=[],y=String.fromCharCode;for(A=0;A<g;A+=1)b.push(y(255&m.charCodeAt(A)));return b.join("")};if(h.open("GET",l,!d),h.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(h.onload=function(){h.status===200?u(f(this.responseText)):u(void 0)}),h.send(null),d&&h.status===200)return f(h.responseText)}(s,i,o)}catch{}return c}(t,n,r)},e.loadImageFile=e.loadFile}(tn.API),function(e){function t(){return(yn.html2canvas?Promise.resolve(yn.html2canvas):Td(()=>Promise.resolve().then(()=>Aze),void 0)).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function n(){return(yn.DOMPurify?Promise.resolve(yn.DOMPurify):Td(()=>import("./purify.es-sOfw8HaZ.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var r=function(c){var l=Sr(c);return l==="undefined"?"undefined":l==="string"||c instanceof String?"string":l==="number"||c instanceof Number?"number":l==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":l==="object"?"object":"unknown"},s=function(c,l){var d=document.createElement(c);for(var u in l.className&&(d.className=l.className),l.innerHTML&&l.dompurify&&(d.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)d.style[u]=l.style[u];return d},i=function c(l,d){for(var u=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),h=l.firstChild;h;h=h.nextSibling)d!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||u.appendChild(c(h,d));return l.nodeType===1&&(l.nodeName==="CANVAS"?(u.width=l.width,u.height=l.height,u.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(u.value=l.value),u.addEventListener("load",function(){u.scrollTop=l.scrollTop,u.scrollLeft=l.scrollLeft},!0)),u},o=function c(l){var d=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),u=c.convert(Promise.resolve(),d);return(u=u.setProgress(1,c,1,[c])).set(l)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(c,l){return c.__proto__=l||o.prototype,c},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(c,l){return this.then(function(){switch(l=l||function(d){switch(r(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(c),l){case"string":return this.then(n).then(function(d){return this.set({src:s("div",{innerHTML:c,dompurify:d})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},o.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(t).then(function(l){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,l(this.prop.container,d)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(t).then(function(l){var d=this.opt.jsPDF,u=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,A=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete A.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=u,u)for(var f=0;f<u.length;++f){var m=u[f],g=m.src.find(function(b){return b.format==="truetype"});g&&d.addFont(g.url,m.ref.name,m.ref.style)}return A.windowHeight=A.windowHeight||0,A.windowHeight=A.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):A.windowHeight,d.context2d.save(!0),l(this.prop.container,A)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(c,l,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(c,l):this.outputPdf(c,l)},o.prototype.outputPdf=function(c,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,l)})},o.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},o.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(c){if(r(c)!=="object")return this;var l=Object.keys(c||{}).map(function(d){if(d in o.template.prop)return function(){this.prop[d]=c[d]};switch(d){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[d]=c[d]}}},this);return this.then(function(){return this.thenList(l)})},o.prototype.get=function(c,l){return this.then(function(){var d=c in o.template.prop?this.prop[c]:this.opt[c];return l?l(d):d})},o.prototype.setMargin=function(c){return this.then(function(){switch(r(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},o.prototype.setPageSize=function(c){function l(d,u){return Math.floor(d*u/72*96)}return this.then(function(){(c=c||tn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:l(c.inner.width,c.k),height:l(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},o.prototype.setProgress=function(c,l,d,u){return c!=null&&(this.progress.val=c),l!=null&&(this.progress.state=l),d!=null&&(this.progress.n=d),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(c,l,d,u){return this.setProgress(c?this.progress.val+c:null,l||null,d?this.progress.n+d:null,u?this.progress.stack.concat(u):null)},o.prototype.then=function(c,l){var d=this;return this.thenCore(c,l,function(u,h){return d.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(A){return d.updateProgress(null,u),A}).then(u,h).then(function(A){return d.updateProgress(1),A})})},o.prototype.thenCore=function(c,l,d){d=d||Promise.prototype.then;var u=this;c&&(c=c.bind(u)),l&&(l=l.bind(u));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:o.convert(Object.assign({},u),Promise.prototype),A=d.call(h,c,l);return o.convert(A,u.__proto__)},o.prototype.thenExternal=function(c,l){return Promise.prototype.then.call(this,c,l)},o.prototype.thenList=function(c){var l=this;return c.forEach(function(d){l=l.thenCore(d)}),l},o.prototype.catch=function(c){c&&(c=c.bind(this));var l=Promise.prototype.catch.call(this,c);return o.convert(l,this)},o.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},o.prototype.error=function(c){return this.then(function(){throw new Error(c)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,tn.getPageSize=function(c,l,d){if(Sr(c)==="object"){var u=c;c=u.orientation,l=u.unit||l,d=u.format||d}l=l||"mm",d=d||"a4",c=(""+(c||"P")).toLowerCase();var h,A=(""+d).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+l}var m,g=0,b=0;if(f.hasOwnProperty(A))g=f[A][1]/h,b=f[A][0]/h;else try{g=d[1],b=d[0]}catch{throw new Error("Invalid format: "+d)}if(c==="p"||c==="portrait")c="p",b>g&&(m=b,b=g,g=m);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",g>b&&(m=b,b=g,g=m)}return{width:b,height:g,unit:l,k:h,orientation:c}},e.html=function(c,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(hE):null;var d=new o(l);return l.worker?d:d.from(c).doCallback()}}(tn.API),tn.API.addJS=function(e){return K6=e,this.internal.events.subscribe("postPutResources",function(){M1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(M1+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),q6=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+K6+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){M1!==void 0&&q6!==void 0&&this.internal.out("/Names <</JavaScript "+M1+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=n.outline.render().split(/\r\n/),i=0;i<s.length;i++){var o=s[i],c=r.exec(o);if(c!=null){var l=c[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(i=0;i<d;i++){var h=n.internal.newObject();u.push(h);var A=n.internal.getPageInfo(i+1);n.internal.write("<< /D["+A.objId+" 0 R /XYZ null null null]>> endobj")}var f=n.internal.newObject();for(n.internal.write("<< /Names [ "),i=0;i<u.length;i++)n.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+f+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,s,i){var o={title:s,options:i,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var s=0;s<r.children.length;s++)this.genIds_r(r.children[s])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<r.children.length;i++){var o=r.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),i>0&&this.line("/Prev "+this.makeRef(r.children[i-1])),i<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var c=this.count=this.count_r({count:0},o);if(c>0&&this.line("/Count "+c),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,s){for(var i=0;i<s.children.length;i++)r.count++,this.count_r(r,s.children[i]);return r.count}}])}(tn.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,s,i,o,c){var l,d=this.decode.DCT_DECODE,u=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,l=function(h){for(var A,f=256*h.charCodeAt(4)+h.charCodeAt(5),m=h.length,g={width:0,height:0,numcomponents:1},b=4;b<m;b+=2){if(b+=f,t.indexOf(h.charCodeAt(b+1))!==-1){A=256*h.charCodeAt(b+5)+h.charCodeAt(b+6),g={width:256*h.charCodeAt(b+7)+h.charCodeAt(b+8),height:A,numcomponents:h.charCodeAt(b+9)};break}f=256*h.charCodeAt(b+2)+h.charCodeAt(b+3)}return g}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),l.numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}u={data:n,width:l.width,height:l.height,colorSpace:c,bitsPerComponent:8,filter:d,index:r,alias:s}}return u}}(tn.API),tn.API.processPNG=function(e,t,n,r){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var s,i=a6e(e,{checkCrc:!0}),o=i.width,c=i.height,l=i.channels,d=i.palette,u=i.depth;s=d&&l===1?function(L){for(var P=L.width,F=L.height,I=L.data,T=L.palette,Q=L.depth,D=!1,M=[],U=[],H=void 0,$=!1,R=0,Y=0;Y<T.length;Y++){var X=QO(T[Y],4),q=X[0],K=X[1],J=X[2],W=X[3];M.push(q,K,J),W!=null&&(W===0?(R++,U.length<1&&U.push(Y)):W<255&&($=!0))}if($||R>1){D=!0,U=void 0;var ne=P*F;H=new Uint8Array(ne);for(var ae=new DataView(I.buffer),ce=0;ce<ne;ce++){var Ae=fE(ae,ce,Q),pe=QO(T[Ae],4)[3];H[ce]=pe}}else R===0&&(U=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:D?8:void 0,colorBytes:I,alphaBytes:H,needSMask:D,palette:M,mask:U}}(i):l===2||l===4?function(L){for(var P=L.data,F=L.width,I=L.height,T=L.channels,Q=L.depth,D=T===2?"DeviceGray":"DeviceRGB",M=T-1,U=F*I,H=M,$=U*H,R=1*U,Y=Math.ceil($*Q/8),X=Math.ceil(R*Q/8),q=new Uint8Array(Y),K=new Uint8Array(X),J=new DataView(P.buffer),W=new DataView(q.buffer),ne=new DataView(K.buffer),ae=!1,ce=0;ce<U;ce++){for(var Ae=ce*T,pe=0;pe<H;pe++)nQ(W,fE(J,Ae+pe,Q),ce*H+pe,Q);var be=fE(J,Ae+H,Q);be<(1<<Q)-1&&(ae=!0),nQ(ne,be,1*ce,Q)}return{colorSpace:D,colorsPerPixel:M,sMaskBitsPerComponent:ae?Q:void 0,colorBytes:q,alphaBytes:K,needSMask:ae}}(i):function(L){var P=L.data,F=L.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:F,colorsPerPixel:F==="DeviceGray"?1:3,colorBytes:P instanceof Uint16Array?function(I){for(var T=I.length,Q=new Uint8Array(2*T),D=new DataView(Q.buffer,Q.byteOffset,Q.byteLength),M=0;M<T;M++)D.setUint16(2*M,I[M],!1);return Q}(P):P,needSMask:!1}}(i);var h,A,f,m=s,g=m.colorSpace,b=m.colorsPerPixel,y=m.sMaskBitsPerComponent,j=m.colorBytes,x=m.alphaBytes,C=m.needSMask,S=m.palette,_=m.mask,N=null;return r!==tn.API.image_compression.NONE&&typeof dI=="function"?(N=function(L){var P;switch(L){case tn.API.image_compression.FAST:P=11;break;case tn.API.image_compression.MEDIUM:P=13;break;case tn.API.image_compression.SLOW:P=14;break;default:P=12}return P}(r),h=this.decode.FLATE_DECODE,A="/Predictor ".concat(N," /Colors ").concat(b," /BitsPerComponent ").concat(u," /Columns ").concat(o),e=X6(j,Math.ceil(o*b*u/8),b,u,r),C&&(f=X6(x,Math.ceil(o*y/8),1,y,r))):(h=void 0,A=void 0,e=j,C&&(f=x)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:n,data:e,index:t,filter:h,decodeParameters:A,transparency:_,palette:S,sMask:f,predictor:N,width:o,height:c,bitsPerComponent:u,sMaskBitsPerComponent:y,colorSpace:g}}},function(e){e.processGIF89A=function(t,n,r,s){var i=new N6e(t),o=i.width,c=i.height,l=[];i.decodeAndBlitFrameRGBA(0,l);var d={data:l,width:o,height:c},u=new pE(100).encode(d,100);return e.processJPEG.call(this,u,n,r,s)},e.processGIF87A=e.processGIF89A}(tn.API),sl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:r,blue:n,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},sl.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){Ur.log("bit decode error:"+n)}},sl.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*s*4,c=0;c<8&&8*s+c<this.width;c++){var l=this.palette[i>>7-c&1];this.data[o+4*c]=l.blue,this.data[o+4*c+1]=l.green,this.data[o+4*c+2]=l.red,this.data[o+4*c+3]=255}n!==0&&(this.pos+=4-n)}},sl.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<e;s++){var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*s*4,c=i>>4,l=15&i,d=this.palette[c];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*s+1>=this.width)break;d=this.palette[l],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},sl.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+4*r;if(s<this.palette.length){var o=this.palette[s];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},sl.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,c=(i>>5&t)/t*255|0,l=(i>>10&t)/t*255|0,d=i>>15?255:0,u=r*this.width*4+4*s;this.data[u]=l,this.data[u+1]=c,this.data[u+2]=o,this.data[u+3]=d}this.pos+=e}},sl.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(o&t)/t*255|0,l=(o>>5&n)/n*255|0,d=(o>>11)/t*255|0,u=s*this.width*4+4*i;this.data[u]=d,this.data[u+1]=l,this.data[u+2]=c,this.data[u+3]=255}this.pos+=e}},sl.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},sl.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=t*this.width*4+4*n;this.data[c]=i,this.data[c+1]=s,this.data[c+2]=r,this.data[c+3]=o}},sl.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,s){var i=new sl(t,!1),o=i.width,c=i.height,l={data:i.getData(),width:o,height:c},d=new pE(100).encode(l,100);return e.processJPEG.call(this,d,n,r,s)}}(tn.API),sQ.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,s){var i=new sQ(t),o=i.width,c=i.height,l={data:i.getData(),width:o,height:c},d=new pE(100).encode(l,100);return e.processJPEG.call(this,d,n,r,s)}}(tn.API),tn.API.processRGBA=function(e,t,n){for(var r=e.data,s=r.length,i=new Uint8Array(s/4*3),o=new Uint8Array(s/4),c=0,l=0,d=0;d<s;d+=4){var u=r[d],h=r[d+1],A=r[d+2],f=r[d+3];i[c++]=u,i[c++]=h,i[c++]=A,o[l++]=f}var m=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:m,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},tn.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ym=tn.API,R1=Ym.getCharWidthsArray=function(e,t){var n,r,s=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),c=t.widths?t.widths:s.metadata.Unicode.widths,l=c.fof?c.fof:1,d=t.kerning?t.kerning:s.metadata.Unicode.kerning,u=d.fof?d.fof:1,h=t.doKerning!==!1,A=0,f=e.length,m=0,g=c[0]||l,b=[];for(n=0;n<f;n++)r=e.charCodeAt(n),typeof s.metadata.widthOfString=="function"?b.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+o*(1e3/i)||0)/1e3):(A=h&&Sr(d[r])==="object"&&!isNaN(parseInt(d[r][m],10))?d[r][m]/u:0,b.push((c[r]||g)/l+A)),m=r;return b},W6=Ym.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return Ym.processArabic&&(e=Ym.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,s)/n:R1.apply(this,arguments).reduce(function(i,o){return i+o},0)},G6=function(e,t,n,r){for(var s=[],i=0,o=e.length,c=0;i!==o&&c+t[i]<n;)c+=t[i],i++;s.push(e.slice(0,i));var l=i;for(c=0;i!==o;)c+t[i]>r&&(s.push(e.slice(l,i)),c=0,l=i),c+=t[i],i++;return l!==i&&s.push(e.slice(l,i)),s},Y6=function(e,t,n){n||(n={});var r,s,i,o,c,l,d,u=[],h=[u],A=n.textIndent||0,f=0,m=0,g=e.split(" "),b=R1.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?g[0].length+2:n.lineIndent||0){var y=Array(l).join(" "),j=[];g.map(function(C){(C=C.split(/\s*\n/)).length>1?j=j.concat(C.map(function(S,_){return(_&&S.length?`
`:"")+S})):j.push(C[0])}),g=j,l=W6.apply(this,[y,n])}for(i=0,o=g.length;i<o;i++){var x=0;if(r=g[i],l&&r[0]==`
`&&(r=r.substr(1),x=1),A+f+(m=(s=R1.apply(this,[r,n])).reduce(function(C,S){return C+S},0))>t||x){if(m>t){for(c=G6.apply(this,[r,s,t-(A+f),t]),u.push(c.shift()),u=[c.pop()];c.length;)h.push([c.shift()]);m=s.slice(r.length-(u[0]?u[0].length:0)).reduce(function(C,S){return C+S},0)}else u=[r];h.push(u),A=m+l,f=b}else u.push(r),A+=f+m,f=b}return d=l?function(C,S){return(S?y:"")+C.join(" ")}:function(C){return C.join(" ")},h.map(d)},Ym.splitTextToSize=function(e,t,n){var r,s=(n=n||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle),A="Unicode";return h.metadata[A]?{widths:h.metadata[A].widths||{0:1},kerning:h.metadata[A].kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/s;i.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=n.lineIndent;var c,l,d=[];for(c=0,l=r.length;c<l;c++)d=d.concat(Y6.apply(this,[r[c],o,i]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",n="klmnopqrstuvwxyz",r={},s={},i=0;i<16;i++)r[n[i]]=t[i],s[t[i]]=n[i];var o=function(A){return"0x"+parseInt(A,10).toString(16)},c=e.__fontmetrics__.compress=function(A){var f,m,g,b,y=["{"];for(var j in A){if(f=A[j],isNaN(parseInt(j,10))?m="'"+j+"'":(j=parseInt(j,10),m=(m=o(j).slice(2)).slice(0,-1)+s[m.slice(-1)]),typeof f=="number")f<0?(g=o(f).slice(3),b="-"):(g=o(f).slice(2),b=""),g=b+g.slice(0,-1)+s[g.slice(-1)];else{if(Sr(f)!=="object")throw new Error("Don't know what to do with value type "+Sr(f)+".");g=c(f)}y.push(m+g)}return y.push("}"),y.join("")},l=e.__fontmetrics__.uncompress=function(A){if(typeof A!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,m,g,b,y={},j=1,x=y,C=[],S="",_="",N=A.length-1,L=1;L<N;L+=1)(b=A[L])=="'"?f?(g=f.join(""),f=void 0):f=[]:f?f.push(b):b=="{"?(C.push([x,g]),x={},g=void 0):b=="}"?((m=C.pop())[0][m[1]]=x,g=void 0,x=m[0]):b=="-"?j=-1:g===void 0?r.hasOwnProperty(b)?(S+=r[b],g=parseInt(S,16)*j,j=1,S=""):S+=b:r.hasOwnProperty(b)?(_+=r[b],x[g]=parseInt(_,16)*j,j=1,g=void 0,_=""):_+=b;return y},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},h={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(A){var f=A.font,m=h.Unicode[f.postScriptName];m&&(f.metadata.Unicode={},f.metadata.Unicode.widths=m.widths,f.metadata.Unicode.kerning=m.kerning);var g=u.Unicode[f.postScriptName];g&&(f.metadata.Unicode.encoding=g,f.encoding=g.codePages[0])}])}(tn.API),function(e){var t=function(n){for(var r=n.length,s=new Uint8Array(r),i=0;i<r;i++)s[i]=n.charCodeAt(i);return s};e.API.events.push(["addFont",function(n){var r=void 0,s=n.font,i=n.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(r=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(o,c){c=/^\x00\x01\x00\x00/.test(c)?t(c):t(q2(c)),o.metadata=e.API.TTFFont.open(c),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(s,r)}}])}(tn),tn.API.addSvgAsImage=function(e,t,n,r,s,i,o,c){if(isNaN(t)||isNaN(n))throw Ur.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(s))throw Ur.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=r,l.height=s;var d=l.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,l.width,l.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return(yn.canvg?Promise.resolve(yn.canvg):Td(()=>import("./index.es-CdN8Crpq.js"),[])).catch(function(A){return Promise.reject(new Error("Could not load canvg: "+A))}).then(function(A){return A.default?A.default:A}).then(function(A){return A.fromString(d,e,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(A){return A.render(u)}).then(function(){h.addImage(l.toDataURL("image/jpeg",1),t,n,r,s,o,c)})},tn.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(t,n);return this},tn.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,s,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(o),l=[],d=0,u=0,h=0;function A(m,g){var b,y=!1;for(b=0;b<m.length;b+=1)m[b]===g&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var f=c.length;for(h=0;h<f;h+=1)n[c[h]].value=n[c[h]].defaultValue,n[c[h]].explicitSet=!1}if(Sr(e)==="object"){for(s in e)if(i=e[s],A(c,s)&&i!==void 0){if(n[s].type==="boolean"&&typeof i=="boolean")n[s].value=i;else if(n[s].type==="name"&&A(n[s].valueSet,i))n[s].value=i;else if(n[s].type==="integer"&&Number.isInteger(i))n[s].value=i;else if(n[s].type==="array"){for(d=0;d<i.length;d+=1)if(r=!0,i[d].length===1&&typeof i[d][0]=="number")l.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)typeof i[d][u]!="number"&&(r=!1);r===!0&&l.push([i[d][0]-1,i[d][1]-1].join(" "))}n[s].value="["+l.join(" ")+"]"}else n[s].value=n[s].defaultValue;n[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,g=[];for(m in n)n[m].explicitSet===!0&&(n[m].type==="name"?g.push("/"+m+" /"+n[m].value):g.push("/"+m+" "+n[m].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+c.length+s.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(s+i+o+c+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(tn.API),function(e){var t=e.API,n=t.pdfEscape16=function(i,o){for(var c,l=o.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],h=0,A=i.length;h<A;++h){if(c=o.metadata.characterToGlyph(i.charCodeAt(h)),o.metadata.glyIdsUsed.push(c),o.metadata.toUnicode[c]=i.charCodeAt(h),l.indexOf(c)==-1&&(l.push(c),l.push([parseInt(o.metadata.widthOfGlyph(c),10)])),c=="0")return u.join("");c=c.toString(16),u.push(d[4-c.length],c)}return u.join("")},r=function(i){var o,c,l,d,u,h,A;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,A=(c=Object.keys(i).sort(function(f,m){return f-m})).length;h<A;h++)o=c[h],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+d+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var c=o.font,l=o.out,d=o.newObject,u=o.putStream;if(c.metadata instanceof e.API.TTFFont&&c.encoding==="Identity-H"){for(var h=c.metadata.Unicode.widths,A=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),f="",m=0;m<A.length;m++)f+=String.fromCharCode(A[m]);var g=d();u({data:f,addLength1:!0,objectId:g}),l("endobj");var b=d();u({data:r(c.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var y=d();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+cg(c.fontName)),l("/FontFile2 "+g+" 0 R"),l("/FontBBox "+e.API.PDFObject.convert(c.metadata.bbox)),l("/Flags "+c.metadata.flags),l("/StemV "+c.metadata.stemV),l("/ItalicAngle "+c.metadata.italicAngle),l("/Ascent "+c.metadata.ascender),l("/Descent "+c.metadata.decender),l("/CapHeight "+c.metadata.capHeight),l(">>"),l("endobj");var j=d();l("<<"),l("/Type /Font"),l("/BaseFont /"+cg(c.fontName)),l("/FontDescriptor "+y+" 0 R"),l("/W "+e.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+c.encoding+")"),l(">>"),l(">>"),l("endobj"),c.objectNumber=d(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+b+" 0 R"),l("/BaseFont /"+cg(c.fontName)),l("/Encoding /"+c.encoding),l("/DescendantFonts ["+j+" 0 R]"),l(">>"),l("endobj"),c.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var c=o.font,l=o.out,d=o.newObject,u=o.putStream;if(c.metadata instanceof e.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var h=c.metadata.rawData,A="",f=0;f<h.length;f++)A+=String.fromCharCode(h[f]);var m=d();u({data:A,addLength1:!0,objectId:m}),l("endobj");var g=d();u({data:r(c.metadata.toUnicode),addLength1:!0,objectId:g}),l("endobj");var b=d();l("<<"),l("/Descent "+c.metadata.decender),l("/CapHeight "+c.metadata.capHeight),l("/StemV "+c.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+m+" 0 R"),l("/Flags 96"),l("/FontBBox "+e.API.PDFObject.convert(c.metadata.bbox)),l("/FontName /"+cg(c.fontName)),l("/ItalicAngle "+c.metadata.italicAngle),l("/Ascent "+c.metadata.ascender),l(">>"),l("endobj"),c.objectNumber=d();for(var y=0;y<c.metadata.hmtx.widths.length;y++)c.metadata.hmtx.widths[y]=parseInt(c.metadata.hmtx.widths[y]*(1e3/c.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+cg(c.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),l("endobj"),c.isAlreadyPutted=!0}})(i)}]);var s=function(i){var o,c=i.text||"",l=i.x,d=i.y,u=i.options||{},h=i.mutex||{},A=h.pdfEscape,f=h.activeFontKey,m=h.fonts,g=f,b="",y=0,j="",x=m[g].encoding;if(m[g].encoding!=="Identity-H")return{text:c,x:l,y:d,options:u,mutex:h};for(j=c,g=f,Array.isArray(c)&&(j=c[0]),y=0;y<j.length;y+=1)m[g].metadata.hasOwnProperty("cmap")&&(o=m[g].metadata.cmap.unicode.codeMap[j[y].charCodeAt(0)]),o||j[y].charCodeAt(0)<256&&m[g].metadata.hasOwnProperty("Unicode")?b+=j[y]:b+="";var C="";return parseInt(g.slice(1))<14||x==="WinAnsiEncoding"?C=A(b,g).split("").map(function(S){return S.charCodeAt(0).toString(16)}).join(""):x==="Identity-H"&&(C=n(b,m[g])),h.isHex=!0,{text:C,x:l,y:d,options:u,mutex:h}};t.events.push(["postProcessText",function(i){var o=i.text||"",c=[],l={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?c.push([s(Object.assign({},l,{text:o[d][0]})).text,o[d][1],o[d][2]]):c.push(s(Object.assign({},l,{text:o[d]})).text);i.text=c}else i.text=s(Object.assign({},l,{text:o})).text}])}(tn),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(tn.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var s,i,o,c,l,d,u,h=t,A=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),j=!1,x=0;this.__bidiEngine__={};var C=function(I){var T=I.charCodeAt(),Q=T>>8,D=g[Q];return D!==void 0?h[256*D+(255&T)]:Q===252||Q===253?"AL":y.test(Q)?"L":Q===8?"R":"N"},S=function(I){for(var T,Q=0;Q<I.length;Q++){if((T=C(I.charAt(Q)))==="L")return!1;if(T==="R")return!0}return!1},_=function(I,T,Q,D){var M,U,H,$,R=T[D];switch(R){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":j=!1;break;case"N":case"AN":break;case"EN":j&&(R="AN");break;case"AL":j=!0,R="R";break;case"WS":case"BN":R="N";break;case"CS":D<1||D+1>=T.length||(M=Q[D-1])!=="EN"&&M!=="AN"||(U=T[D+1])!=="EN"&&U!=="AN"?R="N":j&&(U="AN"),R=U===M?U:"N";break;case"ES":R=(M=D>0?Q[D-1]:"B")==="EN"&&D+1<T.length&&T[D+1]==="EN"?"EN":"N";break;case"ET":if(D>0&&Q[D-1]==="EN"){R="EN";break}if(j){R="N";break}for(H=D+1,$=T.length;H<$&&T[H]==="ET";)H++;R=H<$&&T[H]==="EN"?"EN":"N";break;case"NSM":if(o&&!c){for($=T.length,H=D+1;H<$&&T[H]==="NSM";)H++;if(H<$){var Y=I[D],X=Y>=1425&&Y<=2303||Y===64286;if(M=T[H],X&&(M==="R"||M==="AL")){R="R";break}}}R=D<1||(M=T[D-1])==="B"?"N":Q[D-1];break;case"B":j=!1,s=!0,R=x;break;case"S":i=!0,R="N"}return R},N=function(I,T,Q){var D=I.split("");return Q&&L(D,Q,{hiLevel:x}),D.reverse(),T&&T.reverse(),D.join("")},L=function(I,T,Q){var D,M,U,H,$,R=-1,Y=I.length,X=0,q=[],K=x?f:A,J=[];for(j=!1,s=!1,i=!1,M=0;M<Y;M++)J[M]=C(I[M]);for(U=0;U<Y;U++){if($=X,q[U]=_(I,J,q,U),D=240&(X=K[$][m[q[U]]]),X&=15,T[U]=H=K[X][5],D>0)if(D===16){for(M=R;M<U;M++)T[M]=1;R=-1}else R=-1;if(K[X][6])R===-1&&(R=U);else if(R>-1){for(M=R;M<U;M++)T[M]=H;R=-1}J[U]==="B"&&(T[U]=0),Q.hiLevel|=H}i&&function(W,ne,ae){for(var ce=0;ce<ae;ce++)if(W[ce]==="S"){ne[ce]=x;for(var Ae=ce-1;Ae>=0&&W[Ae]==="WS";Ae--)ne[Ae]=x}}(J,T,Y)},P=function(I,T,Q,D,M){if(!(M.hiLevel<I)){if(I===1&&x===1&&!s)return T.reverse(),void(Q&&Q.reverse());for(var U,H,$,R,Y=T.length,X=0;X<Y;){if(D[X]>=I){for($=X+1;$<Y&&D[$]>=I;)$++;for(R=X,H=$-1;R<H;R++,H--)U=T[R],T[R]=T[H],T[H]=U,Q&&(U=Q[R],Q[R]=Q[H],Q[H]=U);X=$}X++}}},F=function(I,T,Q){var D=I.split(""),M={hiLevel:x};return Q||(Q=[]),L(D,Q,M),function(U,H,$){if($.hiLevel!==0&&u)for(var R,Y=0;Y<U.length;Y++)H[Y]===1&&(R=b.indexOf(U[Y]))>=0&&(U[Y]=b[R+1])}(D,Q,M),P(2,D,T,Q,M),P(1,D,T,Q,M),D.join("")};return this.__bidiEngine__.doBidiReorder=function(I,T,Q){if(function(M,U){if(U)for(var H=0;H<M.length;H++)U[H]=H;c===void 0&&(c=S(M)),d===void 0&&(d=S(M))}(I,T),o||!l||d)if(o&&l&&c^d)x=c?1:0,I=N(I,T,Q);else if(!o&&l&&d)x=c?1:0,I=F(I,T,Q),I=N(I,T);else if(!o||c||l||d){if(o&&!l&&c^d)I=N(I,T),c?(x=0,I=F(I,T,Q)):(x=1,I=F(I,T,Q),I=N(I,T));else if(o&&c&&!l&&d)x=1,I=F(I,T,Q),I=N(I,T);else if(!o&&!l&&c^d){var D=u;c?(x=1,I=F(I,T,Q),x=0,u=!1,I=F(I,T,Q),u=D):(x=0,I=F(I,T,Q),I=N(I,T),x=1,u=!1,I=F(I,T,Q),u=D,I=N(I,T))}}else x=0,I=F(I,T,Q);else x=c?1:0,I=F(I,T,Q);return I},this.__bidiEngine__.setOptions=function(I){I&&(o=I.isInputVisual,l=I.isOutputVisual,c=I.isInputRtl,d=I.isOutputRtl,u=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var s=r.text;r.x,r.y;var i=r.options||{};r.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,n.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var c=0;for(o=[],c=0;c<s.length;c+=1)Object.prototype.toString.call(s[c])==="[object Array]"?o.push([n.doBidiReorder(s[c][0]),s[c][1],s[c][2]]):o.push([n.doBidiReorder(s[c])]);r.text=o}else r.text=n.doBidiReorder(s);n.setOptions({isInputVisual:!0})}])}(tn),tn.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new tf(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new H6e(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new B6e(this.contents),this.head=new _6e(this),this.name=new D6e(this),this.cmap=new UZ(this),this.toUnicode={},this.hhea=new I6e(this),this.maxp=new U6e(this),this.hmtx=new L6e(this),this.post=new T6e(this),this.os2=new P6e(this),this.loca=new Q6e(this),this.glyf=new M6e(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,c,l,d;for(d=[],o=0,c=(l=this.bbox).length;o<c;o++)t=l[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(s=this.post.italic_angle),32768&(n=s>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var s,i,o,c;for(o=0,i=0,c=(t=""+t).length;0<=c?i<c:i>c;i=0<=c?++i:--i)s=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(s))+r*(1e3/n)||0;return o*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var Ol,tf=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,s;for(s=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)s.push(this.writeByte(t.charCodeAt(n)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,s,i,o,c,l;return t=this.readByte(),n=this.readByte(),r=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),c=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^s)+16777216*(255^i)+65536*(255^o)+256*(255^c)+(255^l)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*s+16777216*i+65536*o+256*c+l},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,s,i;for(i=[],r=0,s=t.length;r<s;r++)n=t[r],i.push(this.writeByte(n));return i},e}(),B6e=function(){var e;function t(n){var r,s,i;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,s,i,o,c,l,d,u,h,A,f,m,g;for(g in f=Object.keys(n).length,l=Math.log(2),h=16*Math.floor(Math.log(f)/l),o=Math.floor(h/l),u=16*f-h,(s=new tf).writeInt(this.scalarType),s.writeShort(f),s.writeShort(h),s.writeShort(o),s.writeShort(u),i=16*f,d=s.pos+i,c=null,m=[],n)for(A=n[g],s.writeString(g),s.writeInt(e(A)),s.writeInt(d),s.writeInt(A.length),m=m.concat(A),g==="head"&&(c=d),d+=A.length;d%4;)m.push(0),d++;return s.write(m),r=2981146554-e(s.data),s.pos=c+8,s.writeUInt32(r),s.data},e=function(n){var r,s,i,o;for(n=LZ.call(n);n.length%4;)n.push(0);for(i=new tf(n),s=0,r=0,o=n.length;r<o;r=r+=4)s+=i.readUInt32();return 4294967295&s},t}(),E6e={}.hasOwnProperty,Xd=function(e,t){for(var n in t)E6e.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};Ol=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var _6e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xd(e,Ol),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var n;return(n=new tf).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(t),n.writeShort(this.glyphDataFormat),n.data},e}(),iQ=function(){function e(t,n){var r,s,i,o,c,l,d,u,h,A,f,m,g,b,y,j,x;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),h=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(f=t.readUInt16(),A=f/2,t.pos+=6,i=function(){var C,S;for(S=[],l=C=0;0<=A?C<A:C>A;l=0<=A?++C:--C)S.push(t.readUInt16());return S}(),t.pos+=2,g=function(){var C,S;for(S=[],l=C=0;0<=A?C<A:C>A;l=0<=A?++C:--C)S.push(t.readUInt16());return S}(),d=function(){var C,S;for(S=[],l=C=0;0<=A?C<A:C>A;l=0<=A?++C:--C)S.push(t.readUInt16());return S}(),u=function(){var C,S;for(S=[],l=C=0;0<=A?C<A:C>A;l=0<=A?++C:--C)S.push(t.readUInt16());return S}(),s=(this.length-t.pos+this.offset)/2,c=function(){var C,S;for(S=[],l=C=0;0<=s?C<s:C>s;l=0<=s?++C:--C)S.push(t.readUInt16());return S}(),l=y=0,x=i.length;y<x;l=++y)for(b=i[l],r=j=m=g[l];m<=b?j<=b:j>=b;r=m<=b?++j:--j)u[l]===0?o=r+d[l]:(o=c[u[l]/2+(r-m)-(A-l)]||0)!==0&&(o+=d[l]),this.codeMap[r]=65535&o}t.pos=h}return e.encode=function(t,n){var r,s,i,o,c,l,d,u,h,A,f,m,g,b,y,j,x,C,S,_,N,L,P,F,I,T,Q,D,M,U,H,$,R,Y,X,q,K,J,W,ne,ae,ce,Ae,pe,be,Ne;switch(D=new tf,o=Object.keys(t).sort(function(Pe,xe){return Pe-xe}),n){case"macroman":for(g=0,b=function(){var Pe=[];for(m=0;m<256;++m)Pe.push(0);return Pe}(),j={0:0},i={},M=0,R=o.length;M<R;M++)j[Ae=t[s=o[M]]]==null&&(j[Ae]=++g),i[s]={old:t[s],new:j[t[s]]},b[s]=j[t[s]];return D.writeUInt16(1),D.writeUInt16(0),D.writeUInt32(12),D.writeUInt16(0),D.writeUInt16(262),D.writeUInt16(0),D.write(b),{charMap:i,subtable:D.data,maxGlyphID:g+1};case"unicode":for(T=[],h=[],x=0,j={},r={},y=d=null,U=0,Y=o.length;U<Y;U++)j[S=t[s=o[U]]]==null&&(j[S]=++x),r[s]={old:S,new:j[S]},c=j[S]-s,y!=null&&c===d||(y&&h.push(y),T.push(s),d=c),y=s;for(y&&h.push(y),h.push(65535),T.push(65535),F=2*(P=T.length),L=2*Math.pow(Math.log(P)/Math.LN2,2),A=Math.log(L/2)/Math.LN2,N=2*P-L,l=[],_=[],f=[],m=H=0,X=T.length;H<X;m=++H){if(I=T[m],u=h[m],I===65535){l.push(0),_.push(0);break}if(I-(Q=r[I].new)>=32768)for(l.push(0),_.push(2*(f.length+P-m)),s=$=I;I<=u?$<=u:$>=u;s=I<=u?++$:--$)f.push(r[s].new);else l.push(Q-I),_.push(0)}for(D.writeUInt16(3),D.writeUInt16(1),D.writeUInt32(12),D.writeUInt16(4),D.writeUInt16(16+8*P+2*f.length),D.writeUInt16(0),D.writeUInt16(F),D.writeUInt16(L),D.writeUInt16(A),D.writeUInt16(N),ae=0,q=h.length;ae<q;ae++)s=h[ae],D.writeUInt16(s);for(D.writeUInt16(0),ce=0,K=T.length;ce<K;ce++)s=T[ce],D.writeUInt16(s);for(pe=0,J=l.length;pe<J;pe++)c=l[pe],D.writeUInt16(c);for(be=0,W=_.length;be<W;be++)C=_[be],D.writeUInt16(C);for(Ne=0,ne=f.length;Ne<ne;Ne++)g=f[Ne],D.writeUInt16(g);return{charMap:r,subtable:D.data,maxGlyphID:x+1}}},e}(),UZ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xd(e,Ol),e.prototype.tag="cmap",e.prototype.parse=function(t){var n,r,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)n=new iQ(t,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(t,n){var r,s;return n==null&&(n="macroman"),r=iQ.encode(t,n),(s=new tf).writeUInt16(0),s.writeUInt16(1),r.table=s.data.concat(r.subtable),r},e}(),I6e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xd(e,Ol),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),P6e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xd(e,Ol),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var n,r;for(r=[],n=0;n<10;++n)r.push(t.readByte());return r}(),this.charRange=function(){var n,r;for(r=[],n=0;n<4;++n)r.push(t.readInt());return r}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(t.readInt());return r}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),T6e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xd(e,Ol),e.prototype.tag="post",e.prototype.parse=function(t){var n,r,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(r=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)n=t.readByte(),s.push(this.names.push(t.readString(n)));return s;case 151552:return r=t.readUInt16(),this.offsets=t.read(r);case 262144:return this.map=(function(){var o,c,l;for(l=[],i=o=0,c=this.file.maxp.numGlyphs;0<=c?o<c:o>c;i=0<=c?++o:--o)l.push(t.readUInt32());return l}).call(this)}},e}(),F6e=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},D6e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xd(e,Ol),e.prototype.tag="name",e.prototype.parse=function(t){var n,r,s,i,o,c,l,d,u,h,A;for(t.pos=this.offset,t.readShort(),n=t.readShort(),c=t.readShort(),r=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)r.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+c+t.readShort()});for(l={},i=u=0,h=r.length;u<h;i=++u)s=r[i],t.pos=s.offset,d=t.readString(s.length),o=new F6e(d,s),l[A=s.nameID]==null&&(l[A]=[]),l[s.nameID].push(o);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},e}(),U6e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xd(e,Ol),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),L6e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xd(e,Ol),e.prototype.tag="hmtx",e.prototype.parse=function(t){var n,r,s,i,o,c,l;for(t.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,u;for(u=[],n=d=0;0<=s?d<s:d>s;n=0<=s?++d:--d)u.push(t.readInt16());return u}(),this.widths=(function(){var d,u,h,A;for(A=[],d=0,u=(h=this.metrics).length;d<u;d++)i=h[d],A.push(i.advance);return A}).call(this),r=this.widths[this.widths.length-1],l=[],n=o=0;0<=s?o<s:o>s;n=0<=s?++o:--o)l.push(this.widths.push(r));return l},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),LZ=[].slice,M6e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xd(e,Ol),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var n,r,s,i,o,c,l,d,u,h;return t in this.cache?this.cache[t]:(i=this.file.loca,n=this.file.contents,r=i.indexOf(t),(s=i.lengthOf(t))===0?this.cache[t]=null:(n.pos=this.offset+r,o=(c=new tf(n.read(s))).readShort(),d=c.readShort(),h=c.readShort(),l=c.readShort(),u=c.readShort(),this.cache[t]=o===-1?new O6e(c,d,h,l,u):new R6e(c,o,d,h,l,u),this.cache[t]))},e.prototype.encode=function(t,n,r){var s,i,o,c,l;for(o=[],i=[],c=0,l=n.length;c<l;c++)s=t[n[c]],i.push(o.length),s&&(o=o.concat(s.encode(r)));return i.push(o.length),{table:o,offsets:i}},e}(),R6e=function(){function e(t,n,r,s,i,o){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=s,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),O6e=function(){function e(t,n,r,s,i){var o,c;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;c=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&c;)o.pos+=1&c?4:2,128&c?o.pos+=8:64&c?o.pos+=4:8&c&&(o.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new tf(LZ.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),Q6e=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xd(e,Ol),e.prototype.tag="loca",e.prototype.parse=function(t){var n,r;return t.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,i;for(i=[],r=0,s=this.length;r<s;r+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],r=0,s=this.length;r<s;r+=4)i.push(t.readUInt32());return i}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,n){for(var r=new Uint32Array(this.offsets.length),s=0,i=0,o=0;o<r.length;++o)if(r[o]=s,i<n.length&&n[i]==o){++i,r[o]=s;var c=this.offsets[o],l=this.offsets[o+1]-c;l>0&&(s+=l)}for(var d=new Array(4*r.length),u=0;u<r.length;++u)d[4*u+3]=255&r[u],d[4*u+2]=(65280&r[u])>>8,d[4*u+1]=(16711680&r[u])>>16,d[4*u]=(4278190080&r[u])>>24;return d},e}(),H6e=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,s,i;for(n in s=this.font.cmap.tables[0].codeMap,t={},i=this.subset)r=i[n],t[n]=s[r];return t},e.prototype.glyphsFor=function(t){var n,r,s,i,o,c,l;for(s={},o=0,c=t.length;o<c;o++)s[i=t[o]]=this.font.glyf.glyphFor(i);for(i in n=[],s)(r=s[i])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(i in l=this.glyphsFor(n))r=l[i],s[i]=r;return s},e.prototype.encode=function(t,n){var r,s,i,o,c,l,d,u,h,A,f,m,g,b,y;for(s in r=UZ.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),f={0:0},y=r.charMap)f[(l=y[s]).old]=l.new;for(m in A=r.maxGlyphID,o)m in f||(f[m]=A++);return u=function(j){var x,C;for(x in C={},j)C[j[x]]=x;return C}(f),h=Object.keys(u).sort(function(j,x){return j-x}),g=function(){var j,x,C;for(C=[],j=0,x=h.length;j<x;j++)c=h[j],C.push(u[c]);return C}(),i=this.font.glyf.encode(o,g,f),d=this.font.loca.encode(i.offsets,g),b={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},e}();tn.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,s,i,o;if(Array.isArray(n))return"["+function(){var c,l,d;for(d=[],c=0,l=n.length;c<l;c++)r=n[c],d.push(t.convert(r));return d}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(s in i=["<<"],n)o=n[s],i.push("/"+s+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+n},t}();/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var jI=function(e,t){return jI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},jI(e,t)};function Ql(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");jI(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var kI=function(){return kI=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},kI.apply(this,arguments)};function Da(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function c(u){try{d(r.next(u))}catch(h){o(h)}}function l(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):s(u.value).then(c,l)}d((r=r.apply(e,[])).next())})}function oa(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(d){return function(u){return l([d,u])}}function l(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=d[0]&2?s.return:d[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,d[1])).done)return i;switch(s=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,s=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){n.label=d[1];break}if(d[0]===6&&n.label<i[1]){n.label=i[1],i=d;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(d);break}i[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(u){d=[6,u],s=0}finally{r=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function O1(e,t,n){if(arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||t)}var rh=function(){function e(t,n,r,s){this.left=t,this.top=n,this.width=r,this.height=s}return e.prototype.add=function(t,n,r,s){return new e(this.left+t,this.top+n,this.width+r,this.height+s)},e.fromClientRect=function(t,n){return new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height)},e.fromDOMRectList=function(t,n){var r=Array.from(n).find(function(s){return s.width!==0});return r?new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),aS=function(e,t){return rh.fromClientRect(e,t.getBoundingClientRect())},$6e=function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),s=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new rh(0,0,r,s)},oS=function(e){for(var t=[],n=0,r=e.length;n<r;){var s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var i=e.charCodeAt(n++);(i&64512)===56320?t.push(((s&1023)<<10)+(i&1023)+65536):(t.push(s),n--)}else t.push(s)}return t},zs=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],s=-1,i="";++s<n;){var o=e[s];o<=65535?r.push(o):(o-=65536,r.push((o>>10)+55296,o%1024+56320)),(s+1===n||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},aQ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",z6e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Q1=0;Q1<aQ.length;Q1++)z6e[aQ.charCodeAt(Q1)]=Q1;var oQ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m0=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var H1=0;H1<oQ.length;H1++)m0[oQ.charCodeAt(H1)]=H1;var V6e=function(e){var t=e.length*.75,n=e.length,r,s=0,i,o,c,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var d=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),u=Array.isArray(d)?d:new Uint8Array(d);for(r=0;r<n;r+=4)i=m0[e.charCodeAt(r)],o=m0[e.charCodeAt(r+1)],c=m0[e.charCodeAt(r+2)],l=m0[e.charCodeAt(r+3)],u[s++]=i<<2|o>>4,u[s++]=(o&15)<<4|c>>2,u[s++]=(c&3)<<6|l&63;return d},q6e=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},K6e=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},Lp=5,RF=11,mE=2,W6e=RF-Lp,MZ=65536>>Lp,G6e=1<<Lp,gE=G6e-1,Y6e=1024>>Lp,X6e=MZ+Y6e,J6e=X6e,Z6e=32,eQe=J6e+Z6e,tQe=65536>>RF,nQe=1<<W6e,rQe=nQe-1,cQ=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},sQe=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},iQe=function(e,t){var n=V6e(e),r=Array.isArray(n)?K6e(n):new Uint32Array(n),s=Array.isArray(n)?q6e(n):new Uint16Array(n),i=24,o=cQ(s,i/2,r[4]/2),c=r[5]===2?cQ(s,(i+r[4])/2):sQe(r,Math.ceil((i+r[4])/4));return new aQe(r[0],r[1],r[2],r[3],o,c)},aQe=function(){function e(t,n,r,s,i,o){this.initialValue=t,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=i,this.data=o}return e.prototype.get=function(t){var n;if(t>=0){if(t<55296||t>56319&&t<=65535)return n=this.index[t>>Lp],n=(n<<mE)+(t&gE),this.data[n];if(t<=65535)return n=this.index[MZ+(t-55296>>Lp)],n=(n<<mE)+(t&gE),this.data[n];if(t<this.highStart)return n=eQe-tQe+(t>>RF),n=this.index[n],n+=t>>Lp&rQe,n=this.index[n],n=(n<<mE)+(t&gE),this.data[n];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),lQ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oQe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var $1=0;$1<lQ.length;$1++)oQe[lQ.charCodeAt($1)]=$1;var cQe="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",dQ=50,lQe=1,RZ=2,OZ=3,dQe=4,uQe=5,uQ=7,QZ=8,hQ=9,BA=10,SI=11,AQ=12,NI=13,hQe=14,g0=15,BI=16,z1=17,Yy=18,AQe=19,fQ=20,EI=21,Xy=22,vE=23,Xm=24,Ro=25,v0=26,y0=27,Jm=28,fQe=29,ap=30,pQe=31,V1=32,q1=33,_I=34,II=35,PI=36,rw=37,TI=38,X2=39,J2=40,yE=41,HZ=42,mQe=43,gQe=[9001,65288],$Z="!",Jn="",K1="",FI=iQe(cQe),ku=[ap,PI],DI=[lQe,RZ,OZ,uQe],zZ=[BA,QZ],pQ=[y0,v0],vQe=DI.concat(zZ),mQ=[TI,X2,J2,_I,II],yQe=[g0,NI],xQe=function(e,t){t===void 0&&(t="strict");var n=[],r=[],s=[];return e.forEach(function(i,o){var c=FI.get(i);if(c>dQ?(s.push(!0),c-=dQ):s.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return r.push(o),n.push(BI);if(c===dQe||c===SI){if(o===0)return r.push(o),n.push(ap);var l=n[o-1];return vQe.indexOf(l)===-1?(r.push(r[o-1]),n.push(l)):(r.push(o),n.push(ap))}if(r.push(o),c===pQe)return n.push(t==="strict"?EI:rw);if(c===HZ||c===fQe)return n.push(ap);if(c===mQe)return i>=131072&&i<=196605||i>=196608&&i<=262141?n.push(rw):n.push(ap);n.push(c)}),[r,n,s]},xE=function(e,t,n,r){var s=r[n];if(Array.isArray(e)?e.indexOf(s)!==-1:e===s)for(var i=n;i<=r.length;){i++;var o=r[i];if(o===t)return!0;if(o!==BA)break}if(s===BA)for(var i=n;i>0;){i--;var c=r[i];if(Array.isArray(e)?e.indexOf(c)!==-1:e===c)for(var l=n;l<=r.length;){l++;var o=r[l];if(o===t)return!0;if(o!==BA)break}if(c!==BA)break}return!1},gQ=function(e,t){for(var n=e;n>=0;){var r=t[n];if(r===BA)n--;else return r}return 0},wQe=function(e,t,n,r,s){if(n[r]===0)return Jn;var i=r-1;if(Array.isArray(s)&&s[i]===!0)return Jn;var o=i-1,c=i+1,l=t[i],d=o>=0?t[o]:0,u=t[c];if(l===RZ&&u===OZ)return Jn;if(DI.indexOf(l)!==-1)return $Z;if(DI.indexOf(u)!==-1||zZ.indexOf(u)!==-1)return Jn;if(gQ(i,t)===QZ)return K1;if(FI.get(e[i])===SI||(l===V1||l===q1)&&FI.get(e[c])===SI||l===uQ||u===uQ||l===hQ||[BA,NI,g0].indexOf(l)===-1&&u===hQ||[z1,Yy,AQe,Xm,Jm].indexOf(u)!==-1||gQ(i,t)===Xy||xE(vE,Xy,i,t)||xE([z1,Yy],EI,i,t)||xE(AQ,AQ,i,t))return Jn;if(l===BA)return K1;if(l===vE||u===vE)return Jn;if(u===BI||l===BI)return K1;if([NI,g0,EI].indexOf(u)!==-1||l===hQe||d===PI&&yQe.indexOf(l)!==-1||l===Jm&&u===PI||u===fQ||ku.indexOf(u)!==-1&&l===Ro||ku.indexOf(l)!==-1&&u===Ro||l===y0&&[rw,V1,q1].indexOf(u)!==-1||[rw,V1,q1].indexOf(l)!==-1&&u===v0||ku.indexOf(l)!==-1&&pQ.indexOf(u)!==-1||pQ.indexOf(l)!==-1&&ku.indexOf(u)!==-1||[y0,v0].indexOf(l)!==-1&&(u===Ro||[Xy,g0].indexOf(u)!==-1&&t[c+1]===Ro)||[Xy,g0].indexOf(l)!==-1&&u===Ro||l===Ro&&[Ro,Jm,Xm].indexOf(u)!==-1)return Jn;if([Ro,Jm,Xm,z1,Yy].indexOf(u)!==-1)for(var h=i;h>=0;){var A=t[h];if(A===Ro)return Jn;if([Jm,Xm].indexOf(A)!==-1)h--;else break}if([y0,v0].indexOf(u)!==-1)for(var h=[z1,Yy].indexOf(l)!==-1?o:i;h>=0;){var A=t[h];if(A===Ro)return Jn;if([Jm,Xm].indexOf(A)!==-1)h--;else break}if(TI===l&&[TI,X2,_I,II].indexOf(u)!==-1||[X2,_I].indexOf(l)!==-1&&[X2,J2].indexOf(u)!==-1||[J2,II].indexOf(l)!==-1&&u===J2||mQ.indexOf(l)!==-1&&[fQ,v0].indexOf(u)!==-1||mQ.indexOf(u)!==-1&&l===y0||ku.indexOf(l)!==-1&&ku.indexOf(u)!==-1||l===Xm&&ku.indexOf(u)!==-1||ku.concat(Ro).indexOf(l)!==-1&&u===Xy&&gQe.indexOf(e[c])===-1||ku.concat(Ro).indexOf(u)!==-1&&l===Yy)return Jn;if(l===yE&&u===yE){for(var f=n[i],m=1;f>0&&(f--,t[f]===yE);)m++;if(m%2!==0)return Jn}return l===V1&&u===q1?Jn:K1},bQe=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var n=xQe(e,t.lineBreak),r=n[0],s=n[1],i=n[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(s=s.map(function(c){return[Ro,ap,HZ].indexOf(c)!==-1?rw:c}));var o=t.wordBreak==="keep-all"?i.map(function(c,l){return c&&e[l]>=19968&&e[l]<=40959}):void 0;return[r,s,o]},CQe=function(){function e(t,n,r,s){this.codePoints=t,this.required=n===$Z,this.start=r,this.end=s}return e.prototype.slice=function(){return zs.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),jQe=function(e,t){var n=oS(e),r=bQe(n,t),s=r[0],i=r[1],o=r[2],c=n.length,l=0,d=0;return{next:function(){if(d>=c)return{done:!0,value:null};for(var u=Jn;d<c&&(u=wQe(n,i,s,++d,o))===Jn;);if(u!==Jn||d===c){var h=new CQe(n,u,l,d);return l=d,{value:h,done:!1}}return{done:!0,value:null}}}},kQe=1,SQe=2,zw=4,vQ=8,xj=10,yQ=47,X0=92,NQe=9,BQe=32,W1=34,Jy=61,EQe=35,_Qe=36,IQe=37,G1=39,Y1=40,Zy=41,PQe=95,oo=45,TQe=33,FQe=60,DQe=62,UQe=64,LQe=91,MQe=93,RQe=61,OQe=123,X1=63,QQe=125,xQ=124,HQe=126,$Qe=128,wQ=65533,wE=42,xp=43,zQe=44,VQe=58,qQe=59,sw=46,KQe=0,WQe=8,GQe=11,YQe=14,XQe=31,JQe=127,Ad=-1,VZ=48,qZ=97,KZ=101,ZQe=102,e8e=117,t8e=122,WZ=65,GZ=69,YZ=70,n8e=85,r8e=90,ca=function(e){return e>=VZ&&e<=57},s8e=function(e){return e>=55296&&e<=57343},Zm=function(e){return ca(e)||e>=WZ&&e<=YZ||e>=qZ&&e<=ZQe},i8e=function(e){return e>=qZ&&e<=t8e},a8e=function(e){return e>=WZ&&e<=r8e},o8e=function(e){return i8e(e)||a8e(e)},c8e=function(e){return e>=$Qe},J1=function(e){return e===xj||e===NQe||e===BQe},wj=function(e){return o8e(e)||c8e(e)||e===PQe},bQ=function(e){return wj(e)||ca(e)||e===oo},l8e=function(e){return e>=KQe&&e<=WQe||e===GQe||e>=YQe&&e<=XQe||e===JQe},dA=function(e,t){return e!==X0?!1:t!==xj},Z1=function(e,t,n){return e===oo?wj(t)||dA(t,n):wj(e)?!0:!!(e===X0&&dA(e,t))},bE=function(e,t,n){return e===xp||e===oo?ca(t)?!0:t===sw&&ca(n):ca(e===sw?t:e)},d8e=function(e){var t=0,n=1;(e[t]===xp||e[t]===oo)&&(e[t]===oo&&(n=-1),t++);for(var r=[];ca(e[t]);)r.push(e[t++]);var s=r.length?parseInt(zs.apply(void 0,r),10):0;e[t]===sw&&t++;for(var i=[];ca(e[t]);)i.push(e[t++]);var o=i.length,c=o?parseInt(zs.apply(void 0,i),10):0;(e[t]===GZ||e[t]===KZ)&&t++;var l=1;(e[t]===xp||e[t]===oo)&&(e[t]===oo&&(l=-1),t++);for(var d=[];ca(e[t]);)d.push(e[t++]);var u=d.length?parseInt(zs.apply(void 0,d),10):0;return n*(s+c*Math.pow(10,-o))*Math.pow(10,l*u)},u8e={type:2},h8e={type:3},A8e={type:4},f8e={type:13},p8e={type:8},m8e={type:21},g8e={type:9},v8e={type:10},y8e={type:11},x8e={type:12},w8e={type:14},e2={type:23},b8e={type:1},C8e={type:25},j8e={type:24},k8e={type:26},S8e={type:27},N8e={type:28},B8e={type:29},E8e={type:31},UI={type:32},XZ=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(oS(t))},e.prototype.read=function(){for(var t=[],n=this.consumeToken();n!==UI;)t.push(n),n=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case W1:return this.consumeStringToken(W1);case EQe:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),s=this.peekCodePoint(2);if(bQ(n)||dA(r,s)){var i=Z1(n,r,s)?SQe:kQe,o=this.consumeName();return{type:5,value:o,flags:i}}break;case _Qe:if(this.peekCodePoint(0)===Jy)return this.consumeCodePoint(),f8e;break;case G1:return this.consumeStringToken(G1);case Y1:return u8e;case Zy:return h8e;case wE:if(this.peekCodePoint(0)===Jy)return this.consumeCodePoint(),w8e;break;case xp:if(bE(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case zQe:return A8e;case oo:var c=t,l=this.peekCodePoint(0),d=this.peekCodePoint(1);if(bE(c,l,d))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(Z1(c,l,d))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(l===oo&&d===DQe)return this.consumeCodePoint(),this.consumeCodePoint(),j8e;break;case sw:if(bE(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case yQ:if(this.peekCodePoint(0)===wE)for(this.consumeCodePoint();;){var u=this.consumeCodePoint();if(u===wE&&(u=this.consumeCodePoint(),u===yQ))return this.consumeToken();if(u===Ad)return this.consumeToken()}break;case VQe:return k8e;case qQe:return S8e;case FQe:if(this.peekCodePoint(0)===TQe&&this.peekCodePoint(1)===oo&&this.peekCodePoint(2)===oo)return this.consumeCodePoint(),this.consumeCodePoint(),C8e;break;case UQe:var h=this.peekCodePoint(0),A=this.peekCodePoint(1),f=this.peekCodePoint(2);if(Z1(h,A,f)){var o=this.consumeName();return{type:7,value:o}}break;case LQe:return N8e;case X0:if(dA(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case MQe:return B8e;case RQe:if(this.peekCodePoint(0)===Jy)return this.consumeCodePoint(),p8e;break;case OQe:return y8e;case QQe:return x8e;case e8e:case n8e:var m=this.peekCodePoint(0),g=this.peekCodePoint(1);return m===xp&&(Zm(g)||g===X1)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case xQ:if(this.peekCodePoint(0)===Jy)return this.consumeCodePoint(),g8e;if(this.peekCodePoint(0)===xQ)return this.consumeCodePoint(),m8e;break;case HQe:if(this.peekCodePoint(0)===Jy)return this.consumeCodePoint(),v8e;break;case Ad:return UI}return J1(t)?(this.consumeWhiteSpace(),E8e):ca(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):wj(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:zs(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],n=this.consumeCodePoint();Zm(n)&&t.length<6;)t.push(n),n=this.consumeCodePoint();for(var r=!1;n===X1&&t.length<6;)t.push(n),n=this.consumeCodePoint(),r=!0;if(r){var s=parseInt(zs.apply(void 0,t.map(function(l){return l===X1?VZ:l})),16),i=parseInt(zs.apply(void 0,t.map(function(l){return l===X1?YZ:l})),16);return{type:30,start:s,end:i}}var o=parseInt(zs.apply(void 0,t),16);if(this.peekCodePoint(0)===oo&&Zm(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var c=[];Zm(n)&&c.length<6;)c.push(n),n=this.consumeCodePoint();var i=parseInt(zs.apply(void 0,c),16);return{type:30,start:o,end:i}}else return{type:30,start:o,end:o}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===Y1?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Y1?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ad)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===G1||n===W1){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ad||this.peekCodePoint(0)===Zy)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),e2)}for(;;){var s=this.consumeCodePoint();if(s===Ad||s===Zy)return{type:22,value:zs.apply(void 0,t)};if(J1(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Ad||this.peekCodePoint(0)===Zy?(this.consumeCodePoint(),{type:22,value:zs.apply(void 0,t)}):(this.consumeBadUrlRemnants(),e2);if(s===W1||s===G1||s===Y1||l8e(s))return this.consumeBadUrlRemnants(),e2;if(s===X0)if(dA(s,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),e2;else t.push(s)}},e.prototype.consumeWhiteSpace=function(){for(;J1(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===Zy||t===Ad)return;dA(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var n=5e4,r="";t>0;){var s=Math.min(n,t);r+=zs.apply(void 0,this._value.splice(0,s)),t-=s}return this._value.shift(),r},e.prototype.consumeStringToken=function(t){var n="",r=0;do{var s=this._value[r];if(s===Ad||s===void 0||s===t)return n+=this.consumeStringSlice(r),{type:0,value:n};if(s===xj)return this._value.splice(0,r),b8e;if(s===X0){var i=this._value[r+1];i!==Ad&&i!==void 0&&(i===xj?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):dA(s,i)&&(n+=this.consumeStringSlice(r),n+=zs(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},e.prototype.consumeNumber=function(){var t=[],n=zw,r=this.peekCodePoint(0);for((r===xp||r===oo)&&t.push(this.consumeCodePoint());ca(this.peekCodePoint(0));)t.push(this.consumeCodePoint());r=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(r===sw&&ca(s))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),n=vQ;ca(this.peekCodePoint(0));)t.push(this.consumeCodePoint());r=this.peekCodePoint(0),s=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((r===GZ||r===KZ)&&((s===xp||s===oo)&&ca(i)||ca(s)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),n=vQ;ca(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[d8e(t),n]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),n=t[0],r=t[1],s=this.peekCodePoint(0),i=this.peekCodePoint(1),o=this.peekCodePoint(2);if(Z1(s,i,o)){var c=this.consumeName();return{type:15,number:n,flags:r,unit:c}}return s===IQe?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(Zm(t)){for(var n=zs(t);Zm(this.peekCodePoint(0))&&n.length<6;)n+=zs(this.consumeCodePoint());J1(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||s8e(r)||r>1114111?wQ:r}return t===Ad?wQ:t},e.prototype.consumeName=function(){for(var t="";;){var n=this.consumeCodePoint();if(bQ(n))t+=zs(n);else if(dA(n,this.peekCodePoint(0)))t+=zs(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),t}},e}(),JZ=function(){function e(t){this._tokens=t}return e.create=function(t){var n=new XZ;return n.write(t),new e(n.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var n=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var n=this.consumeComponentValue();if(n.type===32)return t;t.push(n),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var n={type:t,values:[]},r=this.consumeToken();;){if(r.type===32||I8e(r,t))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var n={name:t.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?UI:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),Vw=function(e){return e.type===15},sy=function(e){return e.type===17},Ir=function(e){return e.type===20},_8e=function(e){return e.type===0},LI=function(e,t){return Ir(e)&&e.value===t},ZZ=function(e){return e.type!==31},Tv=function(e){return e.type!==31&&e.type!==4},Jd=function(e){var t=[],n=[];return e.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&t.push(n),t},I8e=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},nf=function(e){return e.type===17||e.type===15},ni=function(e){return e.type===16||nf(e)},eee=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Hi={type:17,number:0,flags:zw},OF={type:16,number:50,flags:zw},EA={type:16,number:100,flags:zw},x0=function(e,t,n){var r=e[0],s=e[1];return[Hr(r,t),Hr(typeof s<"u"?s:r,n)]},Hr=function(e,t){if(e.type===16)return e.number/100*t;if(Vw(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},tee="deg",nee="grad",ree="rad",see="turn",cS={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case tee:return Math.PI*t.number/180;case nee:return Math.PI/200*t.number;case ree:return t.number;case see:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},iee=function(e){return e.type===15&&(e.unit===tee||e.unit===nee||e.unit===ree||e.unit===see)},aee=function(e){var t=e.filter(Ir).map(function(n){return n.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Hi,Hi];case"to top":case"bottom":return jc(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Hi,EA];case"to right":case"left":return jc(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[EA,EA];case"to bottom":case"top":return jc(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[EA,Hi];case"to left":case"right":return jc(270)}return 0},jc=function(e){return Math.PI*e/180},zA={name:"color",parse:function(e,t){if(t.type===18){var n=P8e[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return n(e,t.values)}if(t.type===5){if(t.value.length===3){var r=t.value.substring(0,1),s=t.value.substring(1,2),i=t.value.substring(2,3);return _A(parseInt(r+r,16),parseInt(s+s,16),parseInt(i+i,16),1)}if(t.value.length===4){var r=t.value.substring(0,1),s=t.value.substring(1,2),i=t.value.substring(2,3),o=t.value.substring(3,4);return _A(parseInt(r+r,16),parseInt(s+s,16),parseInt(i+i,16),parseInt(o+o,16)/255)}if(t.value.length===6){var r=t.value.substring(0,2),s=t.value.substring(2,4),i=t.value.substring(4,6);return _A(parseInt(r,16),parseInt(s,16),parseInt(i,16),1)}if(t.value.length===8){var r=t.value.substring(0,2),s=t.value.substring(2,4),i=t.value.substring(4,6),o=t.value.substring(6,8);return _A(parseInt(r,16),parseInt(s,16),parseInt(i,16),parseInt(o,16)/255)}}if(t.type===20){var c=zu[t.value.toUpperCase()];if(typeof c<"u")return c}return zu.TRANSPARENT}},VA=function(e){return(255&e)===0},ki=function(e){var t=255&e,n=255&e>>8,r=255&e>>16,s=255&e>>24;return t<255?"rgba("+s+","+r+","+n+","+t/255+")":"rgb("+s+","+r+","+n+")"},_A=function(e,t,n,r){return(e<<24|t<<16|n<<8|Math.round(r*255)<<0)>>>0},CQ=function(e,t){if(e.type===17)return e.number;if(e.type===16){var n=t===3?1:255;return t===3?e.number/100*n:Math.round(e.number/100*n)}return 0},jQ=function(e,t){var n=t.filter(Tv);if(n.length===3){var r=n.map(CQ),s=r[0],i=r[1],o=r[2];return _A(s,i,o,1)}if(n.length===4){var c=n.map(CQ),s=c[0],i=c[1],o=c[2],l=c[3];return _A(s,i,o,l)}return 0};function CE(e,t,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(t-e)*n*6+e:n<1/2?t:n<2/3?(t-e)*6*(2/3-n)+e:e}var kQ=function(e,t){var n=t.filter(Tv),r=n[0],s=n[1],i=n[2],o=n[3],c=(r.type===17?jc(r.number):cS.parse(e,r))/(Math.PI*2),l=ni(s)?s.number/100:0,d=ni(i)?i.number/100:0,u=typeof o<"u"&&ni(o)?Hr(o,1):1;if(l===0)return _A(d*255,d*255,d*255,1);var h=d<=.5?d*(l+1):d+l-d*l,A=d*2-h,f=CE(A,h,c+1/3),m=CE(A,h,c),g=CE(A,h,c-1/3);return _A(f*255,m*255,g*255,u)},P8e={hsl:kQ,hsla:kQ,rgb:jQ,rgba:jQ},J0=function(e,t){return zA.parse(e,JZ.create(t).parseComponentValue())},zu={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},T8e={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(n){if(Ir(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},F8e={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},lS=function(e,t){var n=zA.parse(e,t[0]),r=t[1];return r&&ni(r)?{color:n,stop:r}:{color:n,stop:null}},SQ=function(e,t){var n=e[0],r=e[e.length-1];n.stop===null&&(n.stop=Hi),r.stop===null&&(r.stop=EA);for(var s=[],i=0,o=0;o<e.length;o++){var c=e[o].stop;if(c!==null){var l=Hr(c,t);l>i?s.push(l):s.push(i),i=l}else s.push(null)}for(var d=null,o=0;o<s.length;o++){var u=s[o];if(u===null)d===null&&(d=o);else if(d!==null){for(var h=o-d,A=s[d-1],f=(u-A)/(h+1),m=1;m<=h;m++)s[d+m-1]=f*m;d=null}}return e.map(function(g,b){var y=g.color;return{color:y,stop:Math.max(Math.min(1,s[b]/t),0)}})},D8e=function(e,t,n){var r=t/2,s=n/2,i=Hr(e[0],t)-r,o=s-Hr(e[1],n);return(Math.atan2(o,i)+Math.PI*2)%(Math.PI*2)},U8e=function(e,t,n){var r=typeof e=="number"?e:D8e(e,t,n),s=Math.abs(t*Math.sin(r))+Math.abs(n*Math.cos(r)),i=t/2,o=n/2,c=s/2,l=Math.sin(r-Math.PI/2)*c,d=Math.cos(r-Math.PI/2)*c;return[s,i-d,i+d,o-l,o+l]},al=function(e,t){return Math.sqrt(e*e+t*t)},NQ=function(e,t,n,r,s){var i=[[0,0],[0,t],[e,0],[e,t]];return i.reduce(function(o,c){var l=c[0],d=c[1],u=al(n-l,r-d);return(s?u<o.optimumDistance:u>o.optimumDistance)?{optimumCorner:c,optimumDistance:u}:o},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},L8e=function(e,t,n,r,s){var i=0,o=0;switch(e.size){case 0:e.shape===0?i=o=Math.min(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-s)):e.shape===1&&(i=Math.min(Math.abs(t),Math.abs(t-r)),o=Math.min(Math.abs(n),Math.abs(n-s)));break;case 2:if(e.shape===0)i=o=Math.min(al(t,n),al(t,n-s),al(t-r,n),al(t-r,n-s));else if(e.shape===1){var c=Math.min(Math.abs(n),Math.abs(n-s))/Math.min(Math.abs(t),Math.abs(t-r)),l=NQ(r,s,t,n,!0),d=l[0],u=l[1];i=al(d-t,(u-n)/c),o=c*i}break;case 1:e.shape===0?i=o=Math.max(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-s)):e.shape===1&&(i=Math.max(Math.abs(t),Math.abs(t-r)),o=Math.max(Math.abs(n),Math.abs(n-s)));break;case 3:if(e.shape===0)i=o=Math.max(al(t,n),al(t,n-s),al(t-r,n),al(t-r,n-s));else if(e.shape===1){var c=Math.max(Math.abs(n),Math.abs(n-s))/Math.max(Math.abs(t),Math.abs(t-r)),h=NQ(r,s,t,n,!1),d=h[0],u=h[1];i=al(d-t,(u-n)/c),o=c*i}break}return Array.isArray(e.size)&&(i=Hr(e.size[0],r),o=e.size.length===2?Hr(e.size[1],s):i),[i,o]},M8e=function(e,t){var n=jc(180),r=[];return Jd(t).forEach(function(s,i){if(i===0){var o=s[0];if(o.type===20&&o.value==="to"){n=aee(s);return}else if(iee(o)){n=cS.parse(e,o);return}}var c=lS(e,s);r.push(c)}),{angle:n,stops:r,type:1}},t2=function(e,t){var n=jc(180),r=[];return Jd(t).forEach(function(s,i){if(i===0){var o=s[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){n=aee(s);return}else if(iee(o)){n=(cS.parse(e,o)+jc(270))%jc(360);return}}var c=lS(e,s);r.push(c)}),{angle:n,stops:r,type:1}},R8e=function(e,t){var n=jc(180),r=[],s=1,i=0,o=3,c=[];return Jd(t).forEach(function(l,d){var u=l[0];if(d===0){if(Ir(u)&&u.value==="linear"){s=1;return}else if(Ir(u)&&u.value==="radial"){s=2;return}}if(u.type===18){if(u.name==="from"){var h=zA.parse(e,u.values[0]);r.push({stop:Hi,color:h})}else if(u.name==="to"){var h=zA.parse(e,u.values[0]);r.push({stop:EA,color:h})}else if(u.name==="color-stop"){var A=u.values.filter(Tv);if(A.length===2){var h=zA.parse(e,A[1]),f=A[0];sy(f)&&r.push({stop:{type:16,number:f.number*100,flags:f.flags},color:h})}}}}),s===1?{angle:(n+jc(180))%jc(360),stops:r,type:s}:{size:o,shape:i,stops:r,position:c,type:s}},oee="closest-side",cee="farthest-side",lee="closest-corner",dee="farthest-corner",uee="circle",hee="ellipse",Aee="cover",fee="contain",O8e=function(e,t){var n=0,r=3,s=[],i=[];return Jd(t).forEach(function(o,c){var l=!0;if(c===0){var d=!1;l=o.reduce(function(h,A){if(d)if(Ir(A))switch(A.value){case"center":return i.push(OF),h;case"top":case"left":return i.push(Hi),h;case"right":case"bottom":return i.push(EA),h}else(ni(A)||nf(A))&&i.push(A);else if(Ir(A))switch(A.value){case uee:return n=0,!1;case hee:return n=1,!1;case"at":return d=!0,!1;case oee:return r=0,!1;case Aee:case cee:return r=1,!1;case fee:case lee:return r=2,!1;case dee:return r=3,!1}else if(nf(A)||ni(A))return Array.isArray(r)||(r=[]),r.push(A),!1;return h},l)}if(l){var u=lS(e,o);s.push(u)}}),{size:r,shape:n,stops:s,position:i,type:2}},n2=function(e,t){var n=0,r=3,s=[],i=[];return Jd(t).forEach(function(o,c){var l=!0;if(c===0?l=o.reduce(function(u,h){if(Ir(h))switch(h.value){case"center":return i.push(OF),!1;case"top":case"left":return i.push(Hi),!1;case"right":case"bottom":return i.push(EA),!1}else if(ni(h)||nf(h))return i.push(h),!1;return u},l):c===1&&(l=o.reduce(function(u,h){if(Ir(h))switch(h.value){case uee:return n=0,!1;case hee:return n=1,!1;case fee:case oee:return r=0,!1;case cee:return r=1,!1;case lee:return r=2,!1;case Aee:case dee:return r=3,!1}else if(nf(h)||ni(h))return Array.isArray(r)||(r=[]),r.push(h),!1;return u},l)),l){var d=lS(e,o);s.push(d)}}),{size:r,shape:n,stops:s,position:i,type:2}},Q8e=function(e){return e.type===1},H8e=function(e){return e.type===2},QF={name:"image",parse:function(e,t){if(t.type===22){var n={url:t.value,type:0};return e.cache.addImage(t.value),n}if(t.type===18){var r=pee[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return r(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function $8e(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!pee[e.name])}var pee={"linear-gradient":M8e,"-moz-linear-gradient":t2,"-ms-linear-gradient":t2,"-o-linear-gradient":t2,"-webkit-linear-gradient":t2,"radial-gradient":O8e,"-moz-radial-gradient":n2,"-ms-radial-gradient":n2,"-o-radial-gradient":n2,"-webkit-radial-gradient":n2,"-webkit-gradient":R8e},z8e={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var n=t[0];return n.type===20&&n.value==="none"?[]:t.filter(function(r){return Tv(r)&&$8e(r)}).map(function(r){return QF.parse(e,r)})}},V8e={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(n){if(Ir(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},q8e={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return Jd(t).map(function(n){return n.filter(ni)}).map(eee)}},K8e={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return Jd(t).map(function(n){return n.filter(Ir).map(function(r){return r.value}).join(" ")}).map(W8e)}},W8e=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Xg;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(Xg||(Xg={}));var G8e={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return Jd(t).map(function(n){return n.filter(Y8e)})}},Y8e=function(e){return Ir(e)||ni(e)},dS=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},X8e=dS("top"),J8e=dS("right"),Z8e=dS("bottom"),eHe=dS("left"),uS=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,n){return eee(n.filter(ni))}}},tHe=uS("top-left"),nHe=uS("top-right"),rHe=uS("bottom-right"),sHe=uS("bottom-left"),hS=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},iHe=hS("top"),aHe=hS("right"),oHe=hS("bottom"),cHe=hS("left"),AS=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,n){return Vw(n)?n.number:0}}},lHe=AS("top"),dHe=AS("right"),uHe=AS("bottom"),hHe=AS("left"),AHe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},fHe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},pHe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(Ir).reduce(function(n,r){return n|mHe(r.value)},0)}},mHe=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},gHe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},vHe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},bj;(function(e){e.NORMAL="normal",e.STRICT="strict"})(bj||(bj={}));var yHe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return bj.STRICT;case"normal":default:return bj.NORMAL}}},xHe={name:"line-height",initialValue:"normal",prefix:!1,type:4},BQ=function(e,t){return Ir(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:ni(e)?Hr(e,t):t},wHe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:QF.parse(e,t)}},bHe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},MI={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},fS=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},CHe=fS("top"),jHe=fS("right"),kHe=fS("bottom"),SHe=fS("left"),NHe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(Ir).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},BHe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},pS=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},EHe=pS("top"),_He=pS("right"),IHe=pS("bottom"),PHe=pS("left"),THe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},FHe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},DHe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&LI(t[0],"none")?[]:Jd(t).map(function(n){for(var r={color:zu.TRANSPARENT,offsetX:Hi,offsetY:Hi,blur:Hi},s=0,i=0;i<n.length;i++){var o=n[i];nf(o)?(s===0?r.offsetX=o:s===1?r.offsetY=o:r.blur=o,s++):r.color=zA.parse(e,o)}return r})}},UHe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},LHe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var n=OHe[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return n(t.values)}return null}},MHe=function(e){var t=e.filter(function(n){return n.type===17}).map(function(n){return n.number});return t.length===6?t:null},RHe=function(e){var t=e.filter(function(l){return l.type===17}).map(function(l){return l.number}),n=t[0],r=t[1];t[2],t[3];var s=t[4],i=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var o=t[12],c=t[13];return t[14],t[15],t.length===16?[n,r,s,i,o,c]:null},OHe={matrix:MHe,matrix3d:RHe},EQ={type:16,number:50,flags:zw},QHe=[EQ,EQ],HHe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var n=t.filter(ni);return n.length!==2?QHe:[n[0],n[1]]}},$He={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Z0;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(Z0||(Z0={}));var zHe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return Z0.BREAK_ALL;case"keep-all":return Z0.KEEP_ALL;case"normal":default:return Z0.NORMAL}}},VHe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(sy(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},mee={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},qHe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return sy(t)?t.number:1}},KHe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},WHe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(Ir).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},GHe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var n=[],r=[];return t.forEach(function(s){switch(s.type){case 20:case 0:n.push(s.value);break;case 17:n.push(s.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},YHe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},XHe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(sy(t))return t.number;if(Ir(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},JHe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(Ir).map(function(n){return n.value})}},ZHe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},gi=function(e,t){return(e&t)!==0},e$e={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var n=t[0];return n.type===20&&n.value==="none"?[]:t}},t$e={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var n=t[0];if(n.type===20&&n.value==="none")return null;for(var r=[],s=t.filter(ZZ),i=0;i<s.length;i++){var o=s[i],c=s[i+1];if(o.type===20){var l=c&&sy(c)?c.number:1;r.push({counter:o.value,increment:l})}}return r}},n$e={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var n=[],r=t.filter(ZZ),s=0;s<r.length;s++){var i=r[s],o=r[s+1];if(Ir(i)&&i.value!=="none"){var c=o&&sy(o)?o.number:0;n.push({counter:i.value,reset:c})}}return n}},r$e={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(Vw).map(function(n){return mee.parse(e,n)})}},s$e={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var n=t[0];if(n.type===20&&n.value==="none")return null;var r=[],s=t.filter(_8e);if(s.length%2!==0)return null;for(var i=0;i<s.length;i+=2){var o=s[i].value,c=s[i+1].value;r.push({open:o,close:c})}return r}},_Q=function(e,t,n){if(!e)return"";var r=e[Math.min(t,e.length-1)];return r?n?r.open:r.close:""},i$e={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&LI(t[0],"none")?[]:Jd(t).map(function(n){for(var r={color:255,offsetX:Hi,offsetY:Hi,blur:Hi,spread:Hi,inset:!1},s=0,i=0;i<n.length;i++){var o=n[i];LI(o,"inset")?r.inset=!0:nf(o)?(s===0?r.offsetX=o:s===1?r.offsetY=o:s===2?r.blur=o:r.spread=o,s++):r.color=zA.parse(e,o)}return r})}},a$e={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var n=[0,1,2],r=[];return t.filter(Ir).forEach(function(s){switch(s.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(s){r.indexOf(s)===-1&&r.push(s)}),r}},o$e={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},c$e={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Vw(t)?t.number:0}},l$e=function(){function e(t,n){var r,s;this.animationDuration=Mt(t,r$e,n.animationDuration),this.backgroundClip=Mt(t,T8e,n.backgroundClip),this.backgroundColor=Mt(t,F8e,n.backgroundColor),this.backgroundImage=Mt(t,z8e,n.backgroundImage),this.backgroundOrigin=Mt(t,V8e,n.backgroundOrigin),this.backgroundPosition=Mt(t,q8e,n.backgroundPosition),this.backgroundRepeat=Mt(t,K8e,n.backgroundRepeat),this.backgroundSize=Mt(t,G8e,n.backgroundSize),this.borderTopColor=Mt(t,X8e,n.borderTopColor),this.borderRightColor=Mt(t,J8e,n.borderRightColor),this.borderBottomColor=Mt(t,Z8e,n.borderBottomColor),this.borderLeftColor=Mt(t,eHe,n.borderLeftColor),this.borderTopLeftRadius=Mt(t,tHe,n.borderTopLeftRadius),this.borderTopRightRadius=Mt(t,nHe,n.borderTopRightRadius),this.borderBottomRightRadius=Mt(t,rHe,n.borderBottomRightRadius),this.borderBottomLeftRadius=Mt(t,sHe,n.borderBottomLeftRadius),this.borderTopStyle=Mt(t,iHe,n.borderTopStyle),this.borderRightStyle=Mt(t,aHe,n.borderRightStyle),this.borderBottomStyle=Mt(t,oHe,n.borderBottomStyle),this.borderLeftStyle=Mt(t,cHe,n.borderLeftStyle),this.borderTopWidth=Mt(t,lHe,n.borderTopWidth),this.borderRightWidth=Mt(t,dHe,n.borderRightWidth),this.borderBottomWidth=Mt(t,uHe,n.borderBottomWidth),this.borderLeftWidth=Mt(t,hHe,n.borderLeftWidth),this.boxShadow=Mt(t,i$e,n.boxShadow),this.color=Mt(t,AHe,n.color),this.direction=Mt(t,fHe,n.direction),this.display=Mt(t,pHe,n.display),this.float=Mt(t,gHe,n.cssFloat),this.fontFamily=Mt(t,GHe,n.fontFamily),this.fontSize=Mt(t,YHe,n.fontSize),this.fontStyle=Mt(t,ZHe,n.fontStyle),this.fontVariant=Mt(t,JHe,n.fontVariant),this.fontWeight=Mt(t,XHe,n.fontWeight),this.letterSpacing=Mt(t,vHe,n.letterSpacing),this.lineBreak=Mt(t,yHe,n.lineBreak),this.lineHeight=Mt(t,xHe,n.lineHeight),this.listStyleImage=Mt(t,wHe,n.listStyleImage),this.listStylePosition=Mt(t,bHe,n.listStylePosition),this.listStyleType=Mt(t,MI,n.listStyleType),this.marginTop=Mt(t,CHe,n.marginTop),this.marginRight=Mt(t,jHe,n.marginRight),this.marginBottom=Mt(t,kHe,n.marginBottom),this.marginLeft=Mt(t,SHe,n.marginLeft),this.opacity=Mt(t,qHe,n.opacity);var i=Mt(t,NHe,n.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=Mt(t,BHe,n.overflowWrap),this.paddingTop=Mt(t,EHe,n.paddingTop),this.paddingRight=Mt(t,_He,n.paddingRight),this.paddingBottom=Mt(t,IHe,n.paddingBottom),this.paddingLeft=Mt(t,PHe,n.paddingLeft),this.paintOrder=Mt(t,a$e,n.paintOrder),this.position=Mt(t,FHe,n.position),this.textAlign=Mt(t,THe,n.textAlign),this.textDecorationColor=Mt(t,KHe,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=Mt(t,WHe,(s=n.textDecorationLine)!==null&&s!==void 0?s:n.textDecoration),this.textShadow=Mt(t,DHe,n.textShadow),this.textTransform=Mt(t,UHe,n.textTransform),this.transform=Mt(t,LHe,n.transform),this.transformOrigin=Mt(t,HHe,n.transformOrigin),this.visibility=Mt(t,$He,n.visibility),this.webkitTextStrokeColor=Mt(t,o$e,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=Mt(t,c$e,n.webkitTextStrokeWidth),this.wordBreak=Mt(t,zHe,n.wordBreak),this.zIndex=Mt(t,VHe,n.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return VA(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return gi(this.display,4)||gi(this.display,33554432)||gi(this.display,268435456)||gi(this.display,536870912)||gi(this.display,67108864)||gi(this.display,134217728)},e}(),d$e=function(){function e(t,n){this.content=Mt(t,e$e,n.content),this.quotes=Mt(t,s$e,n.quotes)}return e}(),IQ=function(){function e(t,n){this.counterIncrement=Mt(t,t$e,n.counterIncrement),this.counterReset=Mt(t,n$e,n.counterReset)}return e}(),Mt=function(e,t,n){var r=new XZ,s=n!==null&&typeof n<"u"?n.toString():t.initialValue;r.write(s);var i=new JZ(r.read());switch(t.type){case 2:var o=i.parseComponentValue();return t.parse(e,Ir(o)?o.value:t.initialValue);case 0:return t.parse(e,i.parseComponentValue());case 1:return t.parse(e,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(t.format){case"angle":return cS.parse(e,i.parseComponentValue());case"color":return zA.parse(e,i.parseComponentValue());case"image":return QF.parse(e,i.parseComponentValue());case"length":var c=i.parseComponentValue();return nf(c)?c:Hi;case"length-percentage":var l=i.parseComponentValue();return ni(l)?l:Hi;case"time":return mee.parse(e,i.parseComponentValue())}break}},u$e="data-html2canvas-debug",h$e=function(e){var t=e.getAttribute(u$e);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},RI=function(e,t){var n=h$e(e);return n===1||t===n},Zd=function(){function e(t,n){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,RI(n,3))debugger;this.styles=new l$e(t,window.getComputedStyle(n,null)),HI(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=aS(this.context,n),RI(n,4)&&(this.flags|=16)}return e}(),A$e="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",PQ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w0=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var r2=0;r2<PQ.length;r2++)w0[PQ.charCodeAt(r2)]=r2;var f$e=function(e){var t=e.length*.75,n=e.length,r,s=0,i,o,c,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var d=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),u=Array.isArray(d)?d:new Uint8Array(d);for(r=0;r<n;r+=4)i=w0[e.charCodeAt(r)],o=w0[e.charCodeAt(r+1)],c=w0[e.charCodeAt(r+2)],l=w0[e.charCodeAt(r+3)],u[s++]=i<<2|o>>4,u[s++]=(o&15)<<4|c>>2,u[s++]=(c&3)<<6|l&63;return d},p$e=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},m$e=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},Mp=5,HF=11,jE=2,g$e=HF-Mp,gee=65536>>Mp,v$e=1<<Mp,kE=v$e-1,y$e=1024>>Mp,x$e=gee+y$e,w$e=x$e,b$e=32,C$e=w$e+b$e,j$e=65536>>HF,k$e=1<<g$e,S$e=k$e-1,TQ=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},N$e=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},B$e=function(e,t){var n=f$e(e),r=Array.isArray(n)?m$e(n):new Uint32Array(n),s=Array.isArray(n)?p$e(n):new Uint16Array(n),i=24,o=TQ(s,i/2,r[4]/2),c=r[5]===2?TQ(s,(i+r[4])/2):N$e(r,Math.ceil((i+r[4])/4));return new E$e(r[0],r[1],r[2],r[3],o,c)},E$e=function(){function e(t,n,r,s,i,o){this.initialValue=t,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=i,this.data=o}return e.prototype.get=function(t){var n;if(t>=0){if(t<55296||t>56319&&t<=65535)return n=this.index[t>>Mp],n=(n<<jE)+(t&kE),this.data[n];if(t<=65535)return n=this.index[gee+(t-55296>>Mp)],n=(n<<jE)+(t&kE),this.data[n];if(t<this.highStart)return n=C$e-j$e+(t>>HF),n=this.index[n],n+=t>>Mp&S$e,n=this.index[n],n=(n<<jE)+(t&kE),this.data[n];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),FQ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_$e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var s2=0;s2<FQ.length;s2++)_$e[FQ.charCodeAt(s2)]=s2;var I$e=1,SE=2,NE=3,DQ=4,UQ=5,P$e=7,LQ=8,BE=9,EE=10,MQ=11,RQ=12,OQ=13,QQ=14,_E=15,T$e=function(e){for(var t=[],n=0,r=e.length;n<r;){var s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var i=e.charCodeAt(n++);(i&64512)===56320?t.push(((s&1023)<<10)+(i&1023)+65536):(t.push(s),n--)}else t.push(s)}return t},F$e=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],s=-1,i="";++s<n;){var o=e[s];o<=65535?r.push(o):(o-=65536,r.push((o>>10)+55296,o%1024+56320)),(s+1===n||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},D$e=B$e(A$e),mc="",IE="",U$e=function(e){return D$e.get(e)},L$e=function(e,t,n){var r=n-2,s=t[r],i=t[n-1],o=t[n];if(i===SE&&o===NE)return mc;if(i===SE||i===NE||i===DQ||o===SE||o===NE||o===DQ)return IE;if(i===LQ&&[LQ,BE,MQ,RQ].indexOf(o)!==-1||(i===MQ||i===BE)&&(o===BE||o===EE)||(i===RQ||i===EE)&&o===EE||o===OQ||o===UQ||o===P$e||i===I$e)return mc;if(i===OQ&&o===QQ){for(;s===UQ;)s=t[--r];if(s===QQ)return mc}if(i===_E&&o===_E){for(var c=0;s===_E;)c++,s=t[--r];if(c%2===0)return mc}return IE},M$e=function(e){var t=T$e(e),n=t.length,r=0,s=0,i=t.map(U$e);return{next:function(){if(r>=n)return{done:!0,value:null};for(var o=mc;r<n&&(o=L$e(t,i,++r))===mc;);if(o!==mc||r===n){var c=F$e.apply(null,t.slice(s,r));return s=r,{value:c,done:!1}}return{done:!0,value:null}}}},R$e=function(e){for(var t=M$e(e),n=[],r;!(r=t.next()).done;)r.value&&n.push(r.value.slice());return n},O$e=function(e){var t=123;if(e.createRange){var n=e.createRange();if(n.getBoundingClientRect){var r=e.createElement("boundtest");r.style.height=t+"px",r.style.display="block",e.body.appendChild(r),n.selectNode(r);var s=n.getBoundingClientRect(),i=Math.round(s.height);if(e.body.removeChild(r),i===t)return!0}}return!1},Q$e=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var n=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=t.firstChild,s=oS(r.data).map(function(l){return zs(l)}),i=0,o={},c=s.every(function(l,d){n.setStart(r,i),n.setEnd(r,i+l.length);var u=n.getBoundingClientRect();i+=l.length;var h=u.x>o.x||u.y>o.y;return o=u,d===0?!0:h});return e.body.removeChild(t),c},H$e=function(){return typeof new Image().crossOrigin<"u"},$$e=function(){return typeof new XMLHttpRequest().responseType=="string"},z$e=function(e){var t=new Image,n=e.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(t,0,0),n.toDataURL()}catch{return!1}return!0},HQ=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},V$e=function(e){var t=e.createElement("canvas"),n=100;t.width=n,t.height=n;var r=t.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var s=new Image,i=t.toDataURL();s.src=i;var o=OI(n,n,0,0,s);return r.fillStyle="red",r.fillRect(0,0,n,n),$Q(o).then(function(c){r.drawImage(c,0,0);var l=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var d=e.createElement("div");return d.style.backgroundImage="url("+i+")",d.style.height=n+"px",HQ(l)?$Q(OI(n,n,0,0,d)):Promise.reject(!1)}).then(function(c){return r.drawImage(c,0,0),HQ(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},OI=function(e,t,n,r,s){var i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"svg"),c=document.createElementNS(i,"foreignObject");return o.setAttributeNS(null,"width",e.toString()),o.setAttributeNS(null,"height",t.toString()),c.setAttributeNS(null,"width","100%"),c.setAttributeNS(null,"height","100%"),c.setAttributeNS(null,"x",n.toString()),c.setAttributeNS(null,"y",r.toString()),c.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(c),c.appendChild(s),o},$Q=function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},Ri={get SUPPORT_RANGE_BOUNDS(){var e=O$e(document);return Object.defineProperty(Ri,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=Ri.SUPPORT_RANGE_BOUNDS&&Q$e(document);return Object.defineProperty(Ri,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=z$e(document);return Object.defineProperty(Ri,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?V$e(document):Promise.resolve(!1);return Object.defineProperty(Ri,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=H$e();return Object.defineProperty(Ri,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=$$e();return Object.defineProperty(Ri,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ri,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Ri,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},ex=function(){function e(t,n){this.text=t,this.bounds=n}return e}(),q$e=function(e,t,n,r){var s=G$e(t,n),i=[],o=0;return s.forEach(function(c){if(n.textDecorationLine.length||c.trim().length>0)if(Ri.SUPPORT_RANGE_BOUNDS){var l=zQ(r,o,c.length).getClientRects();if(l.length>1){var d=$F(c),u=0;d.forEach(function(A){i.push(new ex(A,rh.fromDOMRectList(e,zQ(r,u+o,A.length).getClientRects()))),u+=A.length})}else i.push(new ex(c,rh.fromDOMRectList(e,l)))}else{var h=r.splitText(c.length);i.push(new ex(c,K$e(e,r))),r=h}else Ri.SUPPORT_RANGE_BOUNDS||(r=r.splitText(c.length));o+=c.length}),i},K$e=function(e,t){var n=t.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(t.cloneNode(!0));var s=t.parentNode;if(s){s.replaceChild(r,t);var i=aS(e,r);return r.firstChild&&s.replaceChild(r.firstChild,r),i}}return rh.EMPTY},zQ=function(e,t,n){var r=e.ownerDocument;if(!r)throw new Error("Node has no owner document");var s=r.createRange();return s.setStart(e,t),s.setEnd(e,t+n),s},$F=function(e){if(Ri.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(n){return n.segment})}return R$e(e)},W$e=function(e,t){if(Ri.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(e)).map(function(r){return r.segment})}return X$e(e,t)},G$e=function(e,t){return t.letterSpacing!==0?$F(e):W$e(e,t)},Y$e=[32,160,4961,65792,65793,4153,4241],X$e=function(e,t){for(var n=jQe(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),r=[],s,i=function(){if(s.value){var o=s.value.slice(),c=oS(o),l="";c.forEach(function(d){Y$e.indexOf(d)===-1?l+=zs(d):(l.length&&r.push(l),r.push(zs(d)),l="")}),l.length&&r.push(l)}};!(s=n.next()).done;)i();return r},J$e=function(){function e(t,n,r){this.text=Z$e(n.data,r.textTransform),this.textBounds=q$e(t,this.text,r,n)}return e}(),Z$e=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(e7e,t7e);case 2:return e.toUpperCase();default:return e}},e7e=/(^|\s|:|-|\(|\))([a-z])/g,t7e=function(e,t,n){return e.length>0?t+n.toUpperCase():e},vee=function(e){Ql(t,e);function t(n,r){var s=e.call(this,n,r)||this;return s.src=r.currentSrc||r.src,s.intrinsicWidth=r.naturalWidth,s.intrinsicHeight=r.naturalHeight,s.context.cache.addImage(s.src),s}return t}(Zd),yee=function(e){Ql(t,e);function t(n,r){var s=e.call(this,n,r)||this;return s.canvas=r,s.intrinsicWidth=r.width,s.intrinsicHeight=r.height,s}return t}(Zd),xee=function(e){Ql(t,e);function t(n,r){var s=e.call(this,n,r)||this,i=new XMLSerializer,o=aS(n,r);return r.setAttribute("width",o.width+"px"),r.setAttribute("height",o.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(r)),s.intrinsicWidth=r.width.baseVal.value,s.intrinsicHeight=r.height.baseVal.value,s.context.cache.addImage(s.svg),s}return t}(Zd),wee=function(e){Ql(t,e);function t(n,r){var s=e.call(this,n,r)||this;return s.value=r.value,s}return t}(Zd),QI=function(e){Ql(t,e);function t(n,r){var s=e.call(this,n,r)||this;return s.start=r.start,s.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,s}return t}(Zd),n7e=[{type:15,flags:0,unit:"px",number:3}],r7e=[{type:16,flags:0,number:50}],s7e=function(e){return e.width>e.height?new rh(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new rh(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},i7e=function(e){var t=e.type===a7e?new Array(e.value.length+1).join(""):e.value;return t.length===0?e.placeholder||"":t},Cj="checkbox",jj="radio",a7e="password",VQ=707406591,zF=function(e){Ql(t,e);function t(n,r){var s=e.call(this,n,r)||this;switch(s.type=r.type.toLowerCase(),s.checked=r.checked,s.value=i7e(r),(s.type===Cj||s.type===jj)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=s7e(s.bounds)),s.type){case Cj:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=n7e;break;case jj:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=r7e;break}return s}return t}(Zd),bee=function(e){Ql(t,e);function t(n,r){var s=e.call(this,n,r)||this,i=r.options[r.selectedIndex||0];return s.value=i&&i.text||"",s}return t}(Zd),Cee=function(e){Ql(t,e);function t(n,r){var s=e.call(this,n,r)||this;return s.value=r.value,s}return t}(Zd),jee=function(e){Ql(t,e);function t(n,r){var s=e.call(this,n,r)||this;s.src=r.src,s.width=parseInt(r.width,10)||0,s.height=parseInt(r.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){s.tree=See(n,r.contentWindow.document.documentElement);var i=r.contentWindow.document.documentElement?J0(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):zu.TRANSPARENT,o=r.contentWindow.document.body?J0(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):zu.TRANSPARENT;s.backgroundColor=VA(i)?VA(o)?s.styles.backgroundColor:o:i}}catch{}return s}return t}(Zd),o7e=["OL","UL","MENU"],Z2=function(e,t,n,r){for(var s=t.firstChild,i=void 0;s;s=i)if(i=s.nextSibling,Nee(s)&&s.data.trim().length>0)n.textNodes.push(new J$e(e,s,n.styles));else if(Pg(s))if(Iee(s)&&s.assignedNodes)s.assignedNodes().forEach(function(c){return Z2(e,c,n,r)});else{var o=kee(e,s);o.styles.isVisible()&&(c7e(s,o,r)?o.flags|=4:l7e(o.styles)&&(o.flags|=2),o7e.indexOf(s.tagName)!==-1&&(o.flags|=8),n.elements.push(o),s.slot,s.shadowRoot?Z2(e,s.shadowRoot,o,r):!kj(s)&&!Bee(s)&&!Sj(s)&&Z2(e,s,o,r))}},kee=function(e,t){return $I(t)?new vee(e,t):Eee(t)?new yee(e,t):Bee(t)?new xee(e,t):d7e(t)?new wee(e,t):u7e(t)?new QI(e,t):h7e(t)?new zF(e,t):Sj(t)?new bee(e,t):kj(t)?new Cee(e,t):_ee(t)?new jee(e,t):new Zd(e,t)},See=function(e,t){var n=kee(e,t);return n.flags|=4,Z2(e,t,n,n),n},c7e=function(e,t,n){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||VF(e)&&n.styles.isTransparent()},l7e=function(e){return e.isPositioned()||e.isFloating()},Nee=function(e){return e.nodeType===Node.TEXT_NODE},Pg=function(e){return e.nodeType===Node.ELEMENT_NODE},HI=function(e){return Pg(e)&&typeof e.style<"u"&&!eC(e)},eC=function(e){return typeof e.className=="object"},d7e=function(e){return e.tagName==="LI"},u7e=function(e){return e.tagName==="OL"},h7e=function(e){return e.tagName==="INPUT"},A7e=function(e){return e.tagName==="HTML"},Bee=function(e){return e.tagName==="svg"},VF=function(e){return e.tagName==="BODY"},Eee=function(e){return e.tagName==="CANVAS"},qQ=function(e){return e.tagName==="VIDEO"},$I=function(e){return e.tagName==="IMG"},_ee=function(e){return e.tagName==="IFRAME"},KQ=function(e){return e.tagName==="STYLE"},f7e=function(e){return e.tagName==="SCRIPT"},kj=function(e){return e.tagName==="TEXTAREA"},Sj=function(e){return e.tagName==="SELECT"},Iee=function(e){return e.tagName==="SLOT"},WQ=function(e){return e.tagName.indexOf("-")>0},p7e=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var n=this.counters[t];return n&&n.length?n[n.length-1]:1},e.prototype.getCounterValues=function(t){var n=this.counters[t];return n||[]},e.prototype.pop=function(t){var n=this;t.forEach(function(r){return n.counters[r].pop()})},e.prototype.parse=function(t){var n=this,r=t.counterIncrement,s=t.counterReset,i=!0;r!==null&&r.forEach(function(c){var l=n.counters[c.counter];l&&c.increment!==0&&(i=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=c.increment)});var o=[];return i&&s.forEach(function(c){var l=n.counters[c.counter];o.push(c.counter),l||(l=n.counters[c.counter]=[]),l.push(c.reset)}),o},e}(),GQ={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},YQ={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},m7e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},g7e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},eg=function(e,t,n,r,s,i){return e<t||e>n?iw(e,s,i.length>0):r.integers.reduce(function(o,c,l){for(;e>=c;)e-=c,o+=r.values[l];return o},"")+i},Pee=function(e,t,n,r){var s="";do n||e--,s=r(e)+s,e/=t;while(e*t>=t);return s},Qs=function(e,t,n,r,s){var i=n-t+1;return(e<0?"-":"")+(Pee(Math.abs(e),i,r,function(o){return zs(Math.floor(o%i)+t)})+s)},Xf=function(e,t,n){n===void 0&&(n=". ");var r=t.length;return Pee(Math.abs(e),r,!1,function(s){return t[Math.floor(s%r)]})+n},lg=1,iA=2,aA=4,b0=8,Su=function(e,t,n,r,s,i){if(e<-9999||e>9999)return iw(e,4,s.length>0);var o=Math.abs(e),c=s;if(o===0)return t[0]+c;for(var l=0;o>0&&l<=4;l++){var d=o%10;d===0&&gi(i,lg)&&c!==""?c=t[d]+c:d>1||d===1&&l===0||d===1&&l===1&&gi(i,iA)||d===1&&l===1&&gi(i,aA)&&e>100||d===1&&l>1&&gi(i,b0)?c=t[d]+(l>0?n[l-1]:"")+c:d===1&&l>0&&(c=n[l-1]+c),o=Math.floor(o/10)}return(e<0?r:"")+c},XQ="",JQ="",ZQ="",PE="",iw=function(e,t,n){var r=n?". ":"",s=n?"":"",i=n?", ":"",o=n?" ":"";switch(t){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var c=Qs(e,48,57,!0,r);return c.length<4?"0"+c:c;case 4:return Xf(e,"",s);case 6:return eg(e,1,3999,GQ,3,r).toLowerCase();case 7:return eg(e,1,3999,GQ,3,r);case 8:return Qs(e,945,969,!1,r);case 9:return Qs(e,97,122,!1,r);case 10:return Qs(e,65,90,!1,r);case 11:return Qs(e,1632,1641,!0,r);case 12:case 49:return eg(e,1,9999,YQ,3,r);case 35:return eg(e,1,9999,YQ,3,r).toLowerCase();case 13:return Qs(e,2534,2543,!0,r);case 14:case 30:return Qs(e,6112,6121,!0,r);case 15:return Xf(e,"",s);case 16:return Xf(e,"",s);case 17:case 48:return Su(e,"",XQ,"",s,iA|aA|b0);case 47:return Su(e,"",JQ,"",s,lg|iA|aA|b0);case 42:return Su(e,"",XQ,"",s,iA|aA|b0);case 41:return Su(e,"",JQ,"",s,lg|iA|aA|b0);case 26:return Su(e,"","",ZQ,s,0);case 25:return Su(e,"","",ZQ,s,lg|iA|aA);case 31:return Su(e,"","",PE,i,lg|iA|aA);case 33:return Su(e,"","",PE,i,0);case 32:return Su(e,"","",PE,i,lg|iA|aA);case 18:return Qs(e,2406,2415,!0,r);case 20:return eg(e,1,19999,g7e,3,r);case 21:return Qs(e,2790,2799,!0,r);case 22:return Qs(e,2662,2671,!0,r);case 22:return eg(e,1,10999,m7e,3,r);case 23:return Xf(e,"");case 24:return Xf(e,"");case 27:return Qs(e,3302,3311,!0,r);case 28:return Xf(e,"",s);case 29:return Xf(e,"",s);case 34:return Qs(e,3792,3801,!0,r);case 37:return Qs(e,6160,6169,!0,r);case 38:return Qs(e,4160,4169,!0,r);case 39:return Qs(e,2918,2927,!0,r);case 40:return Qs(e,1776,1785,!0,r);case 43:return Qs(e,3046,3055,!0,r);case 44:return Qs(e,3174,3183,!0,r);case 45:return Qs(e,3664,3673,!0,r);case 46:return Qs(e,3872,3881,!0,r);case 3:default:return Qs(e,48,57,!0,r)}},Tee="data-html2canvas-ignore",e8=function(){function e(t,n,r){if(this.context=t,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new p7e,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,n){var r=this,s=v7e(t,n);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var i=t.defaultView.pageXOffset,o=t.defaultView.pageYOffset,c=s.contentWindow,l=c.document,d=w7e(s).then(function(){return Da(r,void 0,void 0,function(){var u,h;return oa(this,function(A){switch(A.label){case 0:return this.scrolledElements.forEach(k7e),c&&(c.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(c.scrollY!==n.top||c.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(c.scrollX-n.left,c.scrollY-n.top,0,0))),u=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:A.sent(),A.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,x7e(l)]:[3,4];case 3:A.sent(),A.label=4;case 4:return typeof u=="function"?[2,Promise.resolve().then(function(){return u(l,h)}).then(function(){return s})]:[2,s]}})})});return l.open(),l.write(C7e(document.doctype)+"<html></html>"),j7e(this.referenceElement.ownerDocument,i,o),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),d},e.prototype.createElementClone=function(t){if(RI(t,2))debugger;if(Eee(t))return this.createCanvasClone(t);if(qQ(t))return this.createVideoClone(t);if(KQ(t))return this.createStyleClone(t);var n=t.cloneNode(!1);return $I(n)&&($I(t)&&t.currentSrc&&t.currentSrc!==t.src&&(n.src=t.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),WQ(n)?this.createCustomElementClone(n):n},e.prototype.createCustomElementClone=function(t){var n=document.createElement("html2canvascustomelement");return TE(t.style,n),n},e.prototype.createStyleClone=function(t){try{var n=t.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(i,o){return o&&typeof o.cssText=="string"?i+o.cssText:i},""),s=t.cloneNode(!1);return s.textContent=r,s}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var n;if(this.options.inlineImages&&t.ownerDocument){var r=t.ownerDocument.createElement("img");try{return r.src=t.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var s=t.cloneNode(!1);try{s.width=t.width,s.height=t.height;var i=t.getContext("2d"),o=s.getContext("2d");if(o)if(!this.options.allowTaint&&i)o.putImageData(i.getImageData(0,0,t.width,t.height),0,0);else{var c=(n=t.getContext("webgl2"))!==null&&n!==void 0?n:t.getContext("webgl");if(c){var l=c.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}o.drawImage(t,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return s},e.prototype.createVideoClone=function(t){var n=t.ownerDocument.createElement("canvas");n.width=t.offsetWidth,n.height=t.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(t,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var s=t.ownerDocument.createElement("canvas");return s.width=t.offsetWidth,s.height=t.offsetHeight,s},e.prototype.appendChildNode=function(t,n,r){(!Pg(n)||!f7e(n)&&!n.hasAttribute(Tee)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!Pg(n)||!KQ(n))&&t.appendChild(this.cloneNode(n,r))},e.prototype.cloneChildNodes=function(t,n,r){for(var s=this,i=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;i;i=i.nextSibling)if(Pg(i)&&Iee(i)&&typeof i.assignedNodes=="function"){var o=i.assignedNodes();o.length&&o.forEach(function(c){return s.appendChildNode(n,c,r)})}else this.appendChildNode(n,i,r)},e.prototype.cloneNode=function(t,n){if(Nee(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var r=t.ownerDocument.defaultView;if(r&&Pg(t)&&(HI(t)||eC(t))){var s=this.createElementClone(t);s.style.transitionProperty="none";var i=r.getComputedStyle(t),o=r.getComputedStyle(t,":before"),c=r.getComputedStyle(t,":after");this.referenceElement===t&&HI(s)&&(this.clonedReferenceElement=s),VF(s)&&B7e(s);var l=this.counters.parse(new IQ(this.context,i)),d=this.resolvePseudoContent(t,s,o,tx.BEFORE);WQ(t)&&(n=!0),qQ(t)||this.cloneChildNodes(t,s,n),d&&s.insertBefore(d,s.firstChild);var u=this.resolvePseudoContent(t,s,c,tx.AFTER);return u&&s.appendChild(u),this.counters.pop(l),(i&&(this.options.copyStyles||eC(t))&&!_ee(t)||n)&&TE(i,s),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([s,t.scrollLeft,t.scrollTop]),(kj(t)||Sj(t))&&(kj(s)||Sj(s))&&(s.value=t.value),s}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,n,r,s){var i=this;if(r){var o=r.content,c=n.ownerDocument;if(!(!c||!o||o==="none"||o==="-moz-alt-content"||r.display==="none")){this.counters.parse(new IQ(this.context,r));var l=new d$e(this.context,r),d=c.createElement("html2canvaspseudoelement");TE(r,d),l.content.forEach(function(h){if(h.type===0)d.appendChild(c.createTextNode(h.value));else if(h.type===22){var A=c.createElement("img");A.src=h.value,A.style.opacity="1",d.appendChild(A)}else if(h.type===18){if(h.name==="attr"){var f=h.values.filter(Ir);f.length&&d.appendChild(c.createTextNode(t.getAttribute(f[0].value)||""))}else if(h.name==="counter"){var m=h.values.filter(Tv),g=m[0],b=m[1];if(g&&Ir(g)){var y=i.counters.getCounterValue(g.value),j=b&&Ir(b)?MI.parse(i.context,b.value):3;d.appendChild(c.createTextNode(iw(y,j,!1)))}}else if(h.name==="counters"){var x=h.values.filter(Tv),g=x[0],C=x[1],b=x[2];if(g&&Ir(g)){var S=i.counters.getCounterValues(g.value),_=b&&Ir(b)?MI.parse(i.context,b.value):3,N=C&&C.type===0?C.value:"",L=S.map(function(I){return iw(I,_,!1)}).join(N);d.appendChild(c.createTextNode(L))}}}else if(h.type===20)switch(h.value){case"open-quote":d.appendChild(c.createTextNode(_Q(l.quotes,i.quoteDepth++,!0)));break;case"close-quote":d.appendChild(c.createTextNode(_Q(l.quotes,--i.quoteDepth,!1)));break;default:d.appendChild(c.createTextNode(h.value))}}),d.className=zI+" "+VI;var u=s===tx.BEFORE?" "+zI:" "+VI;return eC(n)?n.className.baseValue+=u:n.className+=u,d}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),tx;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(tx||(tx={}));var v7e=function(e,t){var n=e.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute(Tee,"true"),e.body.appendChild(n),n},y7e=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},x7e=function(e){return Promise.all([].slice.call(e.images,0).map(y7e))},w7e=function(e){return new Promise(function(t,n){var r=e.contentWindow;if(!r)return n("No window assigned for iframe");var s=r.document;r.onload=e.onload=function(){r.onload=e.onload=null;var i=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(i),t(e))},50)}})},b7e=["all","d","content"],TE=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e.item(n);b7e.indexOf(r)===-1&&t.style.setProperty(r,e.getPropertyValue(r))}return t},C7e=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},j7e=function(e,t,n){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||n!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,n)},k7e=function(e){var t=e[0],n=e[1],r=e[2];t.scrollLeft=n,t.scrollTop=r},S7e=":before",N7e=":after",zI="___html2canvas___pseudoelement_before",VI="___html2canvas___pseudoelement_after",t8=`{
    content: "" !important;
    display: none !important;
}`,B7e=function(e){E7e(e,"."+zI+S7e+t8+`
         .`+VI+N7e+t8)},E7e=function(e,t){var n=e.ownerDocument;if(n){var r=n.createElement("style");r.textContent=t,e.appendChild(r)}},Fee=function(){function e(){}return e.getOrigin=function(t){var n=e._link;return n?(n.href=t,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),_7e=function(){function e(t,n){this.context=t,this._options=n,this._cache={}}return e.prototype.addImage=function(t){var n=Promise.resolve();return this.has(t)||(DE(t)||F7e(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),n},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return Da(this,void 0,void 0,function(){var n,r,s,i,o=this;return oa(this,function(c){switch(c.label){case 0:return n=Fee.isSameOrigin(t),r=!FE(t)&&this._options.useCORS===!0&&Ri.SUPPORT_CORS_IMAGES&&!n,s=!FE(t)&&!n&&!DE(t)&&typeof this._options.proxy=="string"&&Ri.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!FE(t)&&!DE(t)&&!s&&!r?[2]:(i=t,s?[4,this.proxy(i)]:[3,2]);case 1:i=c.sent(),c.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(l,d){var u=new Image;u.onload=function(){return l(u)},u.onerror=d,(D7e(i)||r)&&(u.crossOrigin="anonymous"),u.src=i,u.complete===!0&&setTimeout(function(){return l(u)},500),o._options.imageTimeout>0&&setTimeout(function(){return d("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,c.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var s=t.substring(0,256);return new Promise(function(i,o){var c=Ri.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(c==="text")i(l.response);else{var h=new FileReader;h.addEventListener("load",function(){return i(h.result)},!1),h.addEventListener("error",function(A){return o(A)},!1),h.readAsDataURL(l.response)}else o("Failed to proxy resource "+s+" with status code "+l.status)},l.onerror=o;var d=r.indexOf("?")>-1?"&":"?";if(l.open("GET",""+r+d+"url="+encodeURIComponent(t)+"&responseType="+c),c!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=c),n._options.imageTimeout){var u=n._options.imageTimeout;l.timeout=u,l.ontimeout=function(){return o("Timed out ("+u+"ms) proxying "+s)}}l.send()})},e}(),I7e=/^data:image\/svg\+xml/i,P7e=/^data:image\/.*;base64,/i,T7e=/^data:image\/.*/i,F7e=function(e){return Ri.SUPPORT_SVG_DRAWING||!U7e(e)},FE=function(e){return T7e.test(e)},D7e=function(e){return P7e.test(e)},DE=function(e){return e.substr(0,4)==="blob"},U7e=function(e){return e.substr(-3).toLowerCase()==="svg"||I7e.test(e)},Ft=function(){function e(t,n){this.type=0,this.x=t,this.y=n}return e.prototype.add=function(t,n){return new e(this.x+t,this.y+n)},e}(),tg=function(e,t,n){return new Ft(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)},i2=function(){function e(t,n,r,s){this.type=1,this.start=t,this.startControl=n,this.endControl=r,this.end=s}return e.prototype.subdivide=function(t,n){var r=tg(this.start,this.startControl,t),s=tg(this.startControl,this.endControl,t),i=tg(this.endControl,this.end,t),o=tg(r,s,t),c=tg(s,i,t),l=tg(o,c,t);return n?new e(this.start,r,o,l):new e(l,c,i,this.end)},e.prototype.add=function(t,n){return new e(this.start.add(t,n),this.startControl.add(t,n),this.endControl.add(t,n),this.end.add(t,n))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),xc=function(e){return e.type===1},L7e=function(){function e(t){var n=t.styles,r=t.bounds,s=x0(n.borderTopLeftRadius,r.width,r.height),i=s[0],o=s[1],c=x0(n.borderTopRightRadius,r.width,r.height),l=c[0],d=c[1],u=x0(n.borderBottomRightRadius,r.width,r.height),h=u[0],A=u[1],f=x0(n.borderBottomLeftRadius,r.width,r.height),m=f[0],g=f[1],b=[];b.push((i+l)/r.width),b.push((m+h)/r.width),b.push((o+g)/r.height),b.push((d+A)/r.height);var y=Math.max.apply(Math,b);y>1&&(i/=y,o/=y,l/=y,d/=y,h/=y,A/=y,m/=y,g/=y);var j=r.width-l,x=r.height-A,C=r.width-h,S=r.height-g,_=n.borderTopWidth,N=n.borderRightWidth,L=n.borderBottomWidth,P=n.borderLeftWidth,F=Hr(n.paddingTop,t.bounds.width),I=Hr(n.paddingRight,t.bounds.width),T=Hr(n.paddingBottom,t.bounds.width),Q=Hr(n.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||o>0?os(r.left+P/3,r.top+_/3,i-P/3,o-_/3,wr.TOP_LEFT):new Ft(r.left+P/3,r.top+_/3),this.topRightBorderDoubleOuterBox=i>0||o>0?os(r.left+j,r.top+_/3,l-N/3,d-_/3,wr.TOP_RIGHT):new Ft(r.left+r.width-N/3,r.top+_/3),this.bottomRightBorderDoubleOuterBox=h>0||A>0?os(r.left+C,r.top+x,h-N/3,A-L/3,wr.BOTTOM_RIGHT):new Ft(r.left+r.width-N/3,r.top+r.height-L/3),this.bottomLeftBorderDoubleOuterBox=m>0||g>0?os(r.left+P/3,r.top+S,m-P/3,g-L/3,wr.BOTTOM_LEFT):new Ft(r.left+P/3,r.top+r.height-L/3),this.topLeftBorderDoubleInnerBox=i>0||o>0?os(r.left+P*2/3,r.top+_*2/3,i-P*2/3,o-_*2/3,wr.TOP_LEFT):new Ft(r.left+P*2/3,r.top+_*2/3),this.topRightBorderDoubleInnerBox=i>0||o>0?os(r.left+j,r.top+_*2/3,l-N*2/3,d-_*2/3,wr.TOP_RIGHT):new Ft(r.left+r.width-N*2/3,r.top+_*2/3),this.bottomRightBorderDoubleInnerBox=h>0||A>0?os(r.left+C,r.top+x,h-N*2/3,A-L*2/3,wr.BOTTOM_RIGHT):new Ft(r.left+r.width-N*2/3,r.top+r.height-L*2/3),this.bottomLeftBorderDoubleInnerBox=m>0||g>0?os(r.left+P*2/3,r.top+S,m-P*2/3,g-L*2/3,wr.BOTTOM_LEFT):new Ft(r.left+P*2/3,r.top+r.height-L*2/3),this.topLeftBorderStroke=i>0||o>0?os(r.left+P/2,r.top+_/2,i-P/2,o-_/2,wr.TOP_LEFT):new Ft(r.left+P/2,r.top+_/2),this.topRightBorderStroke=i>0||o>0?os(r.left+j,r.top+_/2,l-N/2,d-_/2,wr.TOP_RIGHT):new Ft(r.left+r.width-N/2,r.top+_/2),this.bottomRightBorderStroke=h>0||A>0?os(r.left+C,r.top+x,h-N/2,A-L/2,wr.BOTTOM_RIGHT):new Ft(r.left+r.width-N/2,r.top+r.height-L/2),this.bottomLeftBorderStroke=m>0||g>0?os(r.left+P/2,r.top+S,m-P/2,g-L/2,wr.BOTTOM_LEFT):new Ft(r.left+P/2,r.top+r.height-L/2),this.topLeftBorderBox=i>0||o>0?os(r.left,r.top,i,o,wr.TOP_LEFT):new Ft(r.left,r.top),this.topRightBorderBox=l>0||d>0?os(r.left+j,r.top,l,d,wr.TOP_RIGHT):new Ft(r.left+r.width,r.top),this.bottomRightBorderBox=h>0||A>0?os(r.left+C,r.top+x,h,A,wr.BOTTOM_RIGHT):new Ft(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=m>0||g>0?os(r.left,r.top+S,m,g,wr.BOTTOM_LEFT):new Ft(r.left,r.top+r.height),this.topLeftPaddingBox=i>0||o>0?os(r.left+P,r.top+_,Math.max(0,i-P),Math.max(0,o-_),wr.TOP_LEFT):new Ft(r.left+P,r.top+_),this.topRightPaddingBox=l>0||d>0?os(r.left+Math.min(j,r.width-N),r.top+_,j>r.width+N?0:Math.max(0,l-N),Math.max(0,d-_),wr.TOP_RIGHT):new Ft(r.left+r.width-N,r.top+_),this.bottomRightPaddingBox=h>0||A>0?os(r.left+Math.min(C,r.width-P),r.top+Math.min(x,r.height-L),Math.max(0,h-N),Math.max(0,A-L),wr.BOTTOM_RIGHT):new Ft(r.left+r.width-N,r.top+r.height-L),this.bottomLeftPaddingBox=m>0||g>0?os(r.left+P,r.top+Math.min(S,r.height-L),Math.max(0,m-P),Math.max(0,g-L),wr.BOTTOM_LEFT):new Ft(r.left+P,r.top+r.height-L),this.topLeftContentBox=i>0||o>0?os(r.left+P+Q,r.top+_+F,Math.max(0,i-(P+Q)),Math.max(0,o-(_+F)),wr.TOP_LEFT):new Ft(r.left+P+Q,r.top+_+F),this.topRightContentBox=l>0||d>0?os(r.left+Math.min(j,r.width+P+Q),r.top+_+F,j>r.width+P+Q?0:l-P+Q,d-(_+F),wr.TOP_RIGHT):new Ft(r.left+r.width-(N+I),r.top+_+F),this.bottomRightContentBox=h>0||A>0?os(r.left+Math.min(C,r.width-(P+Q)),r.top+Math.min(x,r.height+_+F),Math.max(0,h-(N+I)),A-(L+T),wr.BOTTOM_RIGHT):new Ft(r.left+r.width-(N+I),r.top+r.height-(L+T)),this.bottomLeftContentBox=m>0||g>0?os(r.left+P+Q,r.top+S,Math.max(0,m-(P+Q)),g-(L+T),wr.BOTTOM_LEFT):new Ft(r.left+P+Q,r.top+r.height-(L+T))}return e}(),wr;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(wr||(wr={}));var os=function(e,t,n,r,s){var i=4*((Math.sqrt(2)-1)/3),o=n*i,c=r*i,l=e+n,d=t+r;switch(s){case wr.TOP_LEFT:return new i2(new Ft(e,d),new Ft(e,d-c),new Ft(l-o,t),new Ft(l,t));case wr.TOP_RIGHT:return new i2(new Ft(e,t),new Ft(e+o,t),new Ft(l,d-c),new Ft(l,d));case wr.BOTTOM_RIGHT:return new i2(new Ft(l,t),new Ft(l,t+c),new Ft(e+o,d),new Ft(e,d));case wr.BOTTOM_LEFT:default:return new i2(new Ft(l,d),new Ft(l-o,d),new Ft(e,t+c),new Ft(e,t))}},Nj=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},M7e=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},Bj=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},R7e=function(){function e(t,n,r){this.offsetX=t,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return e}(),a2=function(){function e(t,n){this.path=t,this.target=n,this.type=1}return e}(),O7e=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),Q7e=function(e){return e.type===0},Dee=function(e){return e.type===1},H7e=function(e){return e.type===2},n8=function(e,t){return e.length===t.length?e.some(function(n,r){return n===t[r]}):!1},$7e=function(e,t,n,r,s){return e.map(function(i,o){switch(o){case 0:return i.add(t,n);case 1:return i.add(t+r,n);case 2:return i.add(t+r,n+s);case 3:return i.add(t,n+s)}return i})},Uee=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),Lee=function(){function e(t,n){if(this.container=t,this.parent=n,this.effects=[],this.curves=new L7e(this.container),this.container.styles.opacity<1&&this.effects.push(new O7e(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new R7e(r,s,i))}if(this.container.styles.overflowX!==0){var o=Nj(this.curves),c=Bj(this.curves);n8(o,c)?this.effects.push(new a2(o,6)):(this.effects.push(new a2(o,2)),this.effects.push(new a2(c,4)))}}return e.prototype.getEffects=function(t){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,s=this.effects.slice(0);r;){var i=r.effects.filter(function(l){return!Dee(l)});if(n||r.container.styles.position!==0||!r.parent){if(s.unshift.apply(s,i),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var o=Nj(r.curves),c=Bj(r.curves);n8(o,c)||s.unshift(new a2(c,6))}}else s.unshift.apply(s,i);r=r.parent}return s.filter(function(l){return gi(l.target,t)})},e}(),qI=function(e,t,n,r){e.container.elements.forEach(function(s){var i=gi(s.flags,4),o=gi(s.flags,2),c=new Lee(s,e);gi(s.styles.display,2048)&&r.push(c);var l=gi(s.flags,8)?[]:r;if(i||o){var d=i||s.styles.isPositioned()?n:t,u=new Uee(c);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var h=s.styles.zIndex.order;if(h<0){var A=0;d.negativeZIndex.some(function(m,g){return h>m.element.container.styles.zIndex.order?(A=g,!1):A>0}),d.negativeZIndex.splice(A,0,u)}else if(h>0){var f=0;d.positiveZIndex.some(function(m,g){return h>=m.element.container.styles.zIndex.order?(f=g+1,!1):f>0}),d.positiveZIndex.splice(f,0,u)}else d.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else s.styles.isFloating()?d.nonPositionedFloats.push(u):d.nonPositionedInlineLevel.push(u);qI(c,u,i?u:n,l)}else s.styles.isInlineLevel()?t.inlineLevel.push(c):t.nonInlineLevel.push(c),qI(c,t,n,l);gi(s.flags,8)&&Mee(s,l)})},Mee=function(e,t){for(var n=e instanceof QI?e.start:1,r=e instanceof QI?e.reversed:!1,s=0;s<t.length;s++){var i=t[s];i.container instanceof wee&&typeof i.container.value=="number"&&i.container.value!==0&&(n=i.container.value),i.listValue=iw(n,i.container.styles.listStyleType,!0),n+=r?-1:1}},z7e=function(e){var t=new Lee(e,null),n=new Uee(t),r=[];return qI(t,n,n,r),Mee(t.container,r),n},r8=function(e,t){switch(t){case 0:return kc(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return kc(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return kc(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return kc(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},V7e=function(e,t){switch(t){case 0:return kc(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return kc(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return kc(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return kc(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},q7e=function(e,t){switch(t){case 0:return kc(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return kc(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return kc(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return kc(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},K7e=function(e,t){switch(t){case 0:return o2(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return o2(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return o2(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return o2(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},o2=function(e,t){var n=[];return xc(e)?n.push(e.subdivide(.5,!1)):n.push(e),xc(t)?n.push(t.subdivide(.5,!0)):n.push(t),n},kc=function(e,t,n,r){var s=[];return xc(e)?s.push(e.subdivide(.5,!1)):s.push(e),xc(n)?s.push(n.subdivide(.5,!0)):s.push(n),xc(r)?s.push(r.subdivide(.5,!0).reverse()):s.push(r),xc(t)?s.push(t.subdivide(.5,!1).reverse()):s.push(t),s},Ree=function(e){var t=e.bounds,n=e.styles;return t.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},Ej=function(e){var t=e.styles,n=e.bounds,r=Hr(t.paddingLeft,n.width),s=Hr(t.paddingRight,n.width),i=Hr(t.paddingTop,n.width),o=Hr(t.paddingBottom,n.width);return n.add(r+t.borderLeftWidth,i+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+r+s),-(t.borderTopWidth+t.borderBottomWidth+i+o))},W7e=function(e,t){return e===0?t.bounds:e===2?Ej(t):Ree(t)},G7e=function(e,t){return e===0?t.bounds:e===2?Ej(t):Ree(t)},UE=function(e,t,n){var r=W7e(dg(e.styles.backgroundOrigin,t),e),s=G7e(dg(e.styles.backgroundClip,t),e),i=Y7e(dg(e.styles.backgroundSize,t),n,r),o=i[0],c=i[1],l=x0(dg(e.styles.backgroundPosition,t),r.width-o,r.height-c),d=X7e(dg(e.styles.backgroundRepeat,t),l,i,r,s),u=Math.round(r.left+l[0]),h=Math.round(r.top+l[1]);return[d,u,h,o,c]},ng=function(e){return Ir(e)&&e.value===Xg.AUTO},c2=function(e){return typeof e=="number"},Y7e=function(e,t,n){var r=t[0],s=t[1],i=t[2],o=e[0],c=e[1];if(!o)return[0,0];if(ni(o)&&c&&ni(c))return[Hr(o,n.width),Hr(c,n.height)];var l=c2(i);if(Ir(o)&&(o.value===Xg.CONTAIN||o.value===Xg.COVER)){if(c2(i)){var d=n.width/n.height;return d<i!=(o.value===Xg.COVER)?[n.width,n.width/i]:[n.height*i,n.height]}return[n.width,n.height]}var u=c2(r),h=c2(s),A=u||h;if(ng(o)&&(!c||ng(c))){if(u&&h)return[r,s];if(!l&&!A)return[n.width,n.height];if(A&&l){var f=u?r:s*i,m=h?s:r/i;return[f,m]}var g=u?r:n.width,b=h?s:n.height;return[g,b]}if(l){var y=0,j=0;return ni(o)?y=Hr(o,n.width):ni(c)&&(j=Hr(c,n.height)),ng(o)?y=j*i:(!c||ng(c))&&(j=y/i),[y,j]}var x=null,C=null;if(ni(o)?x=Hr(o,n.width):c&&ni(c)&&(C=Hr(c,n.height)),x!==null&&(!c||ng(c))&&(C=u&&h?x/r*s:n.height),C!==null&&ng(o)&&(x=u&&h?C/s*r:n.width),x!==null&&C!==null)return[x,C];throw new Error("Unable to calculate background-size for element")},dg=function(e,t){var n=e[t];return typeof n>"u"?e[0]:n},X7e=function(e,t,n,r,s){var i=t[0],o=t[1],c=n[0],l=n[1];switch(e){case 2:return[new Ft(Math.round(r.left),Math.round(r.top+o)),new Ft(Math.round(r.left+r.width),Math.round(r.top+o)),new Ft(Math.round(r.left+r.width),Math.round(l+r.top+o)),new Ft(Math.round(r.left),Math.round(l+r.top+o))];case 3:return[new Ft(Math.round(r.left+i),Math.round(r.top)),new Ft(Math.round(r.left+i+c),Math.round(r.top)),new Ft(Math.round(r.left+i+c),Math.round(r.height+r.top)),new Ft(Math.round(r.left+i),Math.round(r.height+r.top))];case 1:return[new Ft(Math.round(r.left+i),Math.round(r.top+o)),new Ft(Math.round(r.left+i+c),Math.round(r.top+o)),new Ft(Math.round(r.left+i+c),Math.round(r.top+o+l)),new Ft(Math.round(r.left+i),Math.round(r.top+o+l))];default:return[new Ft(Math.round(s.left),Math.round(s.top)),new Ft(Math.round(s.left+s.width),Math.round(s.top)),new Ft(Math.round(s.left+s.width),Math.round(s.height+s.top)),new Ft(Math.round(s.left),Math.round(s.height+s.top))]}},J7e="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",s8="Hidden Text",Z7e=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,n){var r=this._document.createElement("div"),s=this._document.createElement("img"),i=this._document.createElement("span"),o=this._document.body;r.style.visibility="hidden",r.style.fontFamily=t,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",o.appendChild(r),s.src=J7e,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",i.style.fontFamily=t,i.style.fontSize=n,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(s8)),r.appendChild(i),r.appendChild(s);var c=s.offsetTop-i.offsetTop+2;r.removeChild(i),r.appendChild(this._document.createTextNode(s8)),r.style.lineHeight="normal",s.style.verticalAlign="super";var l=s.offsetTop-r.offsetTop+2;return o.removeChild(r),{baseline:c,middle:l}},e.prototype.getMetrics=function(t,n){var r=t+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(t,n)),this._data[r]},e}(),Oee=function(){function e(t,n){this.context=t,this.options=n}return e}(),eze=1e4,tze=function(e){Ql(t,e);function t(n,r){var s=e.call(this,n,r)||this;return s._activeEffects=[],s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),r.canvas||(s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px"),s.fontMetrics=new Z7e(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),s}return t.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(s){return r.applyEffect(s)})},t.prototype.applyEffect=function(n){this.ctx.save(),H7e(n)&&(this.ctx.globalAlpha=n.opacity),Q7e(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),Dee(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(n){return Da(this,void 0,void 0,function(){var r;return oa(this,function(s){switch(s.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(n){return Da(this,void 0,void 0,function(){return oa(this,function(r){switch(r.label){case 0:if(gi(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(n,r,s){var i=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+s);else{var o=$F(n.text);o.reduce(function(c,l){return i.ctx.fillText(l,c,n.bounds.top+s),c+i.ctx.measureText(l).width},n.bounds.left)}},t.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),s=aze(n.fontFamily).join(", "),i=Vw(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,i,s].join(" "),s,i]},t.prototype.renderTextNode=function(n,r){return Da(this,void 0,void 0,function(){var s,i,o,c,l,d,u,h,A=this;return oa(this,function(f){return s=this.createFontStyle(r),i=s[0],o=s[1],c=s[2],this.ctx.font=i,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(o,c),d=l.baseline,u=l.middle,h=r.paintOrder,n.textBounds.forEach(function(m){h.forEach(function(g){switch(g){case 0:A.ctx.fillStyle=ki(r.color),A.renderTextWithLetterSpacing(m,r.letterSpacing,d);var b=r.textShadow;b.length&&m.text.trim().length&&(b.slice(0).reverse().forEach(function(y){A.ctx.shadowColor=ki(y.color),A.ctx.shadowOffsetX=y.offsetX.number*A.options.scale,A.ctx.shadowOffsetY=y.offsetY.number*A.options.scale,A.ctx.shadowBlur=y.blur.number,A.renderTextWithLetterSpacing(m,r.letterSpacing,d)}),A.ctx.shadowColor="",A.ctx.shadowOffsetX=0,A.ctx.shadowOffsetY=0,A.ctx.shadowBlur=0),r.textDecorationLine.length&&(A.ctx.fillStyle=ki(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(y){switch(y){case 1:A.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top+d),m.bounds.width,1);break;case 2:A.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top),m.bounds.width,1);break;case 3:A.ctx.fillRect(m.bounds.left,Math.ceil(m.bounds.top+u),m.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&m.text.trim().length&&(A.ctx.strokeStyle=ki(r.webkitTextStrokeColor),A.ctx.lineWidth=r.webkitTextStrokeWidth,A.ctx.lineJoin=window.chrome?"miter":"round",A.ctx.strokeText(m.text,m.bounds.left,m.bounds.top+d)),A.ctx.strokeStyle="",A.ctx.lineWidth=0,A.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(n,r,s){if(s&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var i=Ej(n),o=Bj(r);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,n.intrinsicWidth,n.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(n){return Da(this,void 0,void 0,function(){var r,s,i,o,c,l,j,j,d,u,h,A,C,f,m,S,g,b,y,j,x,C,S;return oa(this,function(_){switch(_.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,s=n.curves,i=r.styles,o=0,c=r.textNodes,_.label=1;case 1:return o<c.length?(l=c[o],[4,this.renderTextNode(l,i)]):[3,4];case 2:_.sent(),_.label=3;case 3:return o++,[3,1];case 4:if(!(r instanceof vee))return[3,8];_.label=5;case 5:return _.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return j=_.sent(),this.renderReplacedElement(r,s,j),[3,8];case 7:return _.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof yee&&this.renderReplacedElement(r,s,r.canvas),!(r instanceof xee))return[3,12];_.label=9;case 9:return _.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return j=_.sent(),this.renderReplacedElement(r,s,j),[3,12];case 11:return _.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof jee&&r.tree?(d=new t(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,d.render(r.tree)]):[3,14];case 13:u=_.sent(),r.width&&r.height&&this.ctx.drawImage(u,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),_.label=14;case 14:if(r instanceof zF&&(h=Math.min(r.bounds.width,r.bounds.height),r.type===Cj?r.checked&&(this.ctx.save(),this.path([new Ft(r.bounds.left+h*.39363,r.bounds.top+h*.79),new Ft(r.bounds.left+h*.16,r.bounds.top+h*.5549),new Ft(r.bounds.left+h*.27347,r.bounds.top+h*.44071),new Ft(r.bounds.left+h*.39694,r.bounds.top+h*.5649),new Ft(r.bounds.left+h*.72983,r.bounds.top+h*.23),new Ft(r.bounds.left+h*.84,r.bounds.top+h*.34085),new Ft(r.bounds.left+h*.39363,r.bounds.top+h*.79)]),this.ctx.fillStyle=ki(VQ),this.ctx.fill(),this.ctx.restore()):r.type===jj&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+h/2,r.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=ki(VQ),this.ctx.fill(),this.ctx.restore())),nze(r)&&r.value.length){switch(A=this.createFontStyle(i),C=A[0],f=A[1],m=this.fontMetrics.getMetrics(C,f).baseline,this.ctx.font=C,this.ctx.fillStyle=ki(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=sze(r.styles.textAlign),S=Ej(r),g=0,r.styles.textAlign){case 1:g+=S.width/2;break;case 2:g+=S.width;break}b=S.add(g,0,0,-S.height/2+1),this.ctx.save(),this.path([new Ft(S.left,S.top),new Ft(S.left+S.width,S.top),new Ft(S.left+S.width,S.top+S.height),new Ft(S.left,S.top+S.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new ex(r.value,b),i.letterSpacing,m),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!gi(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(y=r.styles.listStyleImage,y.type!==0)return[3,18];j=void 0,x=y.url,_.label=15;case 15:return _.trys.push([15,17,,18]),[4,this.context.cache.match(x)];case 16:return j=_.sent(),this.ctx.drawImage(j,r.bounds.left-(j.width+10),r.bounds.top),[3,18];case 17:return _.sent(),this.context.logger.error("Error loading list-style-image "+x),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(C=this.createFontStyle(i)[0],this.ctx.font=C,this.ctx.fillStyle=ki(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",S=new rh(r.bounds.left,r.bounds.top+Hr(r.styles.paddingTop,r.bounds.width),r.bounds.width,BQ(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new ex(n.listValue,S),i.letterSpacing,BQ(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),_.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(n){return Da(this,void 0,void 0,function(){var r,s,y,i,o,y,c,l,y,d,u,y,h,A,y,f,m,y,g,b,y;return oa(this,function(j){switch(j.label){case 0:if(gi(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:j.sent(),r=0,s=n.negativeZIndex,j.label=2;case 2:return r<s.length?(y=s[r],[4,this.renderStack(y)]):[3,5];case 3:j.sent(),j.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:j.sent(),i=0,o=n.nonInlineLevel,j.label=7;case 7:return i<o.length?(y=o[i],[4,this.renderNode(y)]):[3,10];case 8:j.sent(),j.label=9;case 9:return i++,[3,7];case 10:c=0,l=n.nonPositionedFloats,j.label=11;case 11:return c<l.length?(y=l[c],[4,this.renderStack(y)]):[3,14];case 12:j.sent(),j.label=13;case 13:return c++,[3,11];case 14:d=0,u=n.nonPositionedInlineLevel,j.label=15;case 15:return d<u.length?(y=u[d],[4,this.renderStack(y)]):[3,18];case 16:j.sent(),j.label=17;case 17:return d++,[3,15];case 18:h=0,A=n.inlineLevel,j.label=19;case 19:return h<A.length?(y=A[h],[4,this.renderNode(y)]):[3,22];case 20:j.sent(),j.label=21;case 21:return h++,[3,19];case 22:f=0,m=n.zeroOrAutoZIndexOrTransformedOrOpacity,j.label=23;case 23:return f<m.length?(y=m[f],[4,this.renderStack(y)]):[3,26];case 24:j.sent(),j.label=25;case 25:return f++,[3,23];case 26:g=0,b=n.positiveZIndex,j.label=27;case 27:return g<b.length?(y=b[g],[4,this.renderStack(y)]):[3,30];case 28:j.sent(),j.label=29;case 29:return g++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},t.prototype.formatPath=function(n){var r=this;n.forEach(function(s,i){var o=xc(s)?s.start:s;i===0?r.ctx.moveTo(o.x,o.y):r.ctx.lineTo(o.x,o.y),xc(s)&&r.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},t.prototype.renderRepeat=function(n,r,s,i){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(s,i),this.ctx.fill(),this.ctx.translate(-s,-i)},t.prototype.resizeImage=function(n,r,s){var i;if(n.width===r&&n.height===s)return n;var o=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,c=o.createElement("canvas");c.width=Math.max(1,r),c.height=Math.max(1,s);var l=c.getContext("2d");return l.drawImage(n,0,0,n.width,n.height,0,0,r,s),c},t.prototype.renderBackgroundImage=function(n){return Da(this,void 0,void 0,function(){var r,s,i,o,c,l;return oa(this,function(d){switch(d.label){case 0:r=n.styles.backgroundImage.length-1,s=function(u){var h,A,f,F,U,H,Q,D,L,m,F,U,H,Q,D,g,b,y,j,x,C,S,_,N,L,P,F,I,T,Q,D,M,U,H,$,R,Y,X,q,K,J,W;return oa(this,function(ne){switch(ne.label){case 0:if(u.type!==0)return[3,5];h=void 0,A=u.url,ne.label=1;case 1:return ne.trys.push([1,3,,4]),[4,i.context.cache.match(A)];case 2:return h=ne.sent(),[3,4];case 3:return ne.sent(),i.context.logger.error("Error loading background-image "+A),[3,4];case 4:return h&&(f=UE(n,r,[h.width,h.height,h.width/h.height]),F=f[0],U=f[1],H=f[2],Q=f[3],D=f[4],L=i.ctx.createPattern(i.resizeImage(h,Q,D),"repeat"),i.renderRepeat(F,L,U,H)),[3,6];case 5:Q8e(u)?(m=UE(n,r,[null,null,null]),F=m[0],U=m[1],H=m[2],Q=m[3],D=m[4],g=U8e(u.angle,Q,D),b=g[0],y=g[1],j=g[2],x=g[3],C=g[4],S=document.createElement("canvas"),S.width=Q,S.height=D,_=S.getContext("2d"),N=_.createLinearGradient(y,x,j,C),SQ(u.stops,b).forEach(function(ae){return N.addColorStop(ae.stop,ki(ae.color))}),_.fillStyle=N,_.fillRect(0,0,Q,D),Q>0&&D>0&&(L=i.ctx.createPattern(S,"repeat"),i.renderRepeat(F,L,U,H))):H8e(u)&&(P=UE(n,r,[null,null,null]),F=P[0],I=P[1],T=P[2],Q=P[3],D=P[4],M=u.position.length===0?[OF]:u.position,U=Hr(M[0],Q),H=Hr(M[M.length-1],D),$=L8e(u,U,H,Q,D),R=$[0],Y=$[1],R>0&&Y>0&&(X=i.ctx.createRadialGradient(I+U,T+H,0,I+U,T+H,R),SQ(u.stops,R*2).forEach(function(ae){return X.addColorStop(ae.stop,ki(ae.color))}),i.path(F),i.ctx.fillStyle=X,R!==Y?(q=n.bounds.left+.5*n.bounds.width,K=n.bounds.top+.5*n.bounds.height,J=Y/R,W=1/J,i.ctx.save(),i.ctx.translate(q,K),i.ctx.transform(1,0,0,J,0,0),i.ctx.translate(-q,-K),i.ctx.fillRect(I,W*(T-K)+K,Q,D*W),i.ctx.restore()):i.ctx.fill())),ne.label=6;case 6:return r--,[2]}})},i=this,o=0,c=n.styles.backgroundImage.slice(0).reverse(),d.label=1;case 1:return o<c.length?(l=c[o],[5,s(l)]):[3,4];case 2:d.sent(),d.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(n,r,s){return Da(this,void 0,void 0,function(){return oa(this,function(i){return this.path(r8(s,r)),this.ctx.fillStyle=ki(n),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(n,r,s,i){return Da(this,void 0,void 0,function(){var o,c;return oa(this,function(l){switch(l.label){case 0:return r<3?[4,this.renderSolidBorder(n,s,i)]:[3,2];case 1:return l.sent(),[2];case 2:return o=V7e(i,s),this.path(o),this.ctx.fillStyle=ki(n),this.ctx.fill(),c=q7e(i,s),this.path(c),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(n){return Da(this,void 0,void 0,function(){var r,s,i,o,c,l,d,u,h=this;return oa(this,function(A){switch(A.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,s=!VA(r.backgroundColor)||r.backgroundImage.length,i=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],o=rze(dg(r.backgroundClip,0),n.curves),s||r.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),VA(r.backgroundColor)||(this.ctx.fillStyle=ki(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:A.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(f){h.ctx.save();var m=Nj(n.curves),g=f.inset?0:eze,b=$7e(m,-g+(f.inset?1:-1)*f.spread.number,(f.inset?1:-1)*f.spread.number,f.spread.number*(f.inset?-2:2),f.spread.number*(f.inset?-2:2));f.inset?(h.path(m),h.ctx.clip(),h.mask(b)):(h.mask(m),h.ctx.clip(),h.path(b)),h.ctx.shadowOffsetX=f.offsetX.number+g,h.ctx.shadowOffsetY=f.offsetY.number,h.ctx.shadowColor=ki(f.color),h.ctx.shadowBlur=f.blur.number,h.ctx.fillStyle=f.inset?ki(f.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),A.label=2;case 2:c=0,l=0,d=i,A.label=3;case 3:return l<d.length?(u=d[l],u.style!==0&&!VA(u.color)&&u.width>0?u.style!==2?[3,5]:[4,this.renderDashedDottedBorder(u.color,u.width,c,n.curves,2)]:[3,11]):[3,13];case 4:return A.sent(),[3,11];case 5:return u.style!==3?[3,7]:[4,this.renderDashedDottedBorder(u.color,u.width,c,n.curves,3)];case 6:return A.sent(),[3,11];case 7:return u.style!==4?[3,9]:[4,this.renderDoubleBorder(u.color,u.width,c,n.curves)];case 8:return A.sent(),[3,11];case 9:return[4,this.renderSolidBorder(u.color,c,n.curves)];case 10:A.sent(),A.label=11;case 11:c++,A.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(n,r,s,i,o){return Da(this,void 0,void 0,function(){var c,l,d,u,h,A,f,m,g,b,y,j,x,C,S,_,S,_;return oa(this,function(N){return this.ctx.save(),c=K7e(i,s),l=r8(i,s),o===2&&(this.path(l),this.ctx.clip()),xc(l[0])?(d=l[0].start.x,u=l[0].start.y):(d=l[0].x,u=l[0].y),xc(l[1])?(h=l[1].end.x,A=l[1].end.y):(h=l[1].x,A=l[1].y),s===0||s===2?f=Math.abs(d-h):f=Math.abs(u-A),this.ctx.beginPath(),o===3?this.formatPath(c):this.formatPath(l.slice(0,2)),m=r<3?r*3:r*2,g=r<3?r*2:r,o===3&&(m=r,g=r),b=!0,f<=m*2?b=!1:f<=m*2+g?(y=f/(2*m+g),m*=y,g*=y):(j=Math.floor((f+g)/(m+g)),x=(f-j*m)/(j-1),C=(f-(j+1)*m)/j,g=C<=0||Math.abs(g-x)<Math.abs(g-C)?x:C),b&&(o===3?this.ctx.setLineDash([0,m+g]):this.ctx.setLineDash([m,g])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=ki(n),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(xc(l[0])&&(S=l[3],_=l[0],this.ctx.beginPath(),this.formatPath([new Ft(S.end.x,S.end.y),new Ft(_.start.x,_.start.y)]),this.ctx.stroke()),xc(l[1])&&(S=l[1],_=l[2],this.ctx.beginPath(),this.formatPath([new Ft(S.end.x,S.end.y),new Ft(_.start.x,_.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(n){return Da(this,void 0,void 0,function(){var r;return oa(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ki(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=z7e(n),[4,this.renderStack(r)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(Oee),nze=function(e){return e instanceof Cee||e instanceof bee?!0:e instanceof zF&&e.type!==jj&&e.type!==Cj},rze=function(e,t){switch(e){case 0:return Nj(t);case 2:return M7e(t);case 1:default:return Bj(t)}},sze=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},ize=["-apple-system","system-ui"],aze=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return ize.indexOf(t)===-1}):e},oze=function(e){Ql(t,e);function t(n,r){var s=e.call(this,n,r)||this;return s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=r,s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),s}return t.prototype.render=function(n){return Da(this,void 0,void 0,function(){var r,s;return oa(this,function(i){switch(i.label){case 0:return r=OI(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,cze(r)];case 1:return s=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ki(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(Oee),cze=function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},lze=function(){function e(t){var n=t.id,r=t.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,O1([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,O1([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,O1([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,O1([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),dze=function(){function e(t,n){var r;this.windowBounds=n,this.instanceName="#"+e.instanceCount++,this.logger=new lze({id:this.instanceName,enabled:t.logging}),this.cache=(r=t.cache)!==null&&r!==void 0?r:new _7e(this,t)}return e.instanceCount=1,e}(),Qee=function(e,t){return t===void 0&&(t={}),uze(e,t)};typeof window<"u"&&Fee.setContext(window);var uze=function(e,t){return Da(void 0,void 0,void 0,function(){var n,r,s,i,o,c,l,d,u,h,A,f,m,g,b,y,j,x,C,S,N,_,N,L,P,F,I,T,Q,D,M,U,H,$,R,Y,X,q,K,J;return oa(this,function(W){switch(W.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=e.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return s={allowTaint:(L=t.allowTaint)!==null&&L!==void 0?L:!1,imageTimeout:(P=t.imageTimeout)!==null&&P!==void 0?P:15e3,proxy:t.proxy,useCORS:(F=t.useCORS)!==null&&F!==void 0?F:!1},i=kI({logging:(I=t.logging)!==null&&I!==void 0?I:!0,cache:t.cache},s),o={windowWidth:(T=t.windowWidth)!==null&&T!==void 0?T:r.innerWidth,windowHeight:(Q=t.windowHeight)!==null&&Q!==void 0?Q:r.innerHeight,scrollX:(D=t.scrollX)!==null&&D!==void 0?D:r.pageXOffset,scrollY:(M=t.scrollY)!==null&&M!==void 0?M:r.pageYOffset},c=new rh(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),l=new dze(i,c),d=(U=t.foreignObjectRendering)!==null&&U!==void 0?U:!1,u={allowTaint:(H=t.allowTaint)!==null&&H!==void 0?H:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:d,copyStyles:d},l.logger.debug("Starting document clone with size "+c.width+"x"+c.height+" scrolled to "+-c.left+","+-c.top),h=new e8(l,e,u),A=h.clonedReferenceElement,A?[4,h.toIFrame(n,c)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return f=W.sent(),m=VF(A)||A7e(A)?$6e(A.ownerDocument):aS(l,A),g=m.width,b=m.height,y=m.left,j=m.top,x=hze(l,A,t.backgroundColor),C={canvas:t.canvas,backgroundColor:x,scale:(R=($=t.scale)!==null&&$!==void 0?$:r.devicePixelRatio)!==null&&R!==void 0?R:1,x:((Y=t.x)!==null&&Y!==void 0?Y:0)+y,y:((X=t.y)!==null&&X!==void 0?X:0)+j,width:(q=t.width)!==null&&q!==void 0?q:Math.ceil(g),height:(K=t.height)!==null&&K!==void 0?K:Math.ceil(b)},d?(l.logger.debug("Document cloned, using foreign object rendering"),N=new oze(l,C),[4,N.render(A)]):[3,3];case 2:return S=W.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+y+","+j+" with size "+g+"x"+b+" using computed rendering"),l.logger.debug("Starting DOM parsing"),_=See(l,A),x===_.styles.backgroundColor&&(_.styles.backgroundColor=zu.TRANSPARENT),l.logger.debug("Starting renderer for element at "+C.x+","+C.y+" with size "+C.width+"x"+C.height),N=new tze(l,C),[4,N.render(_)];case 4:S=W.sent(),W.label=5;case 5:return(!((J=t.removeContainer)!==null&&J!==void 0)||J)&&(e8.destroy(f)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,S]}})})},hze=function(e,t,n){var r=t.ownerDocument,s=r.documentElement?J0(e,getComputedStyle(r.documentElement).backgroundColor):zu.TRANSPARENT,i=r.body?J0(e,getComputedStyle(r.body).backgroundColor):zu.TRANSPARENT,o=typeof n=="string"?J0(e,n):n===null?zu.TRANSPARENT:4294967295;return t===r.documentElement?VA(s)?VA(i)?o:i:s:o};const Aze=Object.freeze(Object.defineProperty({__proto__:null,default:Qee},Symbol.toStringTag,{value:"Module"})),fze=({initialContent:e,placeholder:t,onContentChange:n,onTextSelection:r,className:s,style:i})=>{const o=w.useRef(null),c=w.useRef("");w.useEffect(()=>{var u;if(o.current&&e!==c.current){const h=window.getSelection(),A=h!=null&&h.rangeCount?h.getRangeAt(0):null,f=A?A.startOffset:0;if(o.current.innerHTML=e||"",c.current=e||"",A&&o.current.firstChild)try{const m=document.createRange(),g=o.current.firstChild,b=((u=g.textContent)==null?void 0:u.length)||0;m.setStart(g,Math.min(f,b)),m.setEnd(g,Math.min(f,b)),h==null||h.removeAllRanges(),h==null||h.addRange(m)}catch{}}},[e]);const l=w.useCallback(u=>{const h=u.currentTarget.innerHTML||"";h!==c.current&&(c.current=h,n(h))},[n]),d=w.useCallback(u=>{u.preventDefault();const h=u.clipboardData;let A=h.getData("text/html");if(A){const f=document.createElement("div");f.innerHTML=A;const m=["b","strong","i","em","u","br","p","div","span","h1","h2","h3","h4","h5","h6","ul","ol","li"],g=["font-weight","font-style","text-decoration","color","background-color","font-size","font-family"],b=j=>{if(j.nodeType===Node.TEXT_NODE)return j.cloneNode(!0);if(j.nodeType===Node.ELEMENT_NODE){const x=j,C=x.tagName.toLowerCase();if(!m.includes(C)){const N=document.createDocumentFragment();return Array.from(x.childNodes).forEach(L=>{const P=b(L);P&&N.appendChild(P)}),N}const S=document.createElement(C),_=x.getAttribute("style");if(_){const N={};_.split(";").forEach(P=>{const[F,I]=P.split(":").map(T=>T.trim());F&&I&&g.includes(F)&&(N[F]=I)});const L=Object.entries(N).map(([P,F])=>`${P}: ${F}`).join("; ");L&&S.setAttribute("style",L)}return Array.from(x.childNodes).forEach(N=>{const L=b(N);L&&S.appendChild(L)}),S}return null},y=b(f);if(y){const j=window.getSelection();if(j&&j.rangeCount>0){const x=j.getRangeAt(0);x.deleteContents(),y instanceof DocumentFragment,x.insertNode(y),x.collapse(!1),j.removeAllRanges(),j.addRange(x)}}}else{const f=h.getData("text/plain"),m=window.getSelection();if(m&&m.rangeCount>0){const g=m.getRangeAt(0);g.deleteContents(),g.insertNode(document.createTextNode(f)),g.collapse(!1),m.removeAllRanges(),m.addRange(g)}}if(o.current){const f=new Event("input",{bubbles:!0});o.current.dispatchEvent(f)}},[]);return a.jsx("div",{ref:o,contentEditable:!0,suppressContentEditableWarning:!0,dir:"ltr",onInput:l,onPaste:d,onMouseUp:r,onKeyUp:r,className:s,style:{...i,textAlign:"left",direction:"ltr",unicodeBidi:"plaintext"},placeholder:t})},pze=({projectId:e,entries:t,selectedDocumentId:n,onDocumentSaved:r})=>{const{toast:s}=ii(),{addTextEntry:i,updateEntry:o,deleteEntry:c,uploadFile:l}=pa(),d=w.useRef(null),[u,h]=w.useState(""),[A,f]=w.useState(null),[m,g]=w.useState(!1),[b,y]=w.useState(!1),[j,x]=w.useState(!1),[C,S]=w.useState([]);w.useEffect(()=>{const M=t.map(U=>({id:U.id,title:U.title,content:_(U.content),type:U.type,originalEntryId:U.id,isModified:!1,isEnhancing:!1}));M.length===0&&(M.push({id:"new-1",title:"Project Knowledge Base",content:"Start writing your project knowledge here...",type:"text",isModified:!0,isEnhancing:!1}),x(!0)),S(M)},[t]);const _=M=>M?M.replace(/[%&<>{}\\[\]@#$^*+=|~`]/g," ").replace(/[^\w\s.,!?()-]/g," ").replace(/\s+/g," ").replace(/^\s*[\d\s]*obj\s*/gi,"").replace(/endstream|endobj|stream/gi,"").trim():"",N=()=>{const M=window.getSelection();if(M&&M.toString().trim().length>0){h(M.toString().trim());const U=M.getRangeAt(0);f(U)}else h(""),f(null)},L=(M,U,H)=>{S($=>$.map(R=>R.id===M?{...R,[U]:H,isModified:!0}:R)),x(!0)},P=()=>{const M={id:`new-${Date.now()}`,title:"New Section",content:"Enter your content here...",type:"text",isModified:!0,isEnhancing:!1};S(U=>[...U,M]),x(!0)},F=async M=>{const U=C.find(H=>H.id===M);if(U)try{U.originalEntryId&&await c(U.originalEntryId),S(H=>H.filter($=>$.id!==M)),x(!0),s({title:"Section Deleted",description:"Section has been removed from the knowledge base"})}catch{s({title:"Error",description:"Failed to delete section",variant:"destructive"})}},I=async(M="clarity")=>{var U;if(!u||!A){s({title:"No Text Selected",description:"Please select some text to enhance",variant:"destructive"});return}y(!0);try{const H=await ULe({selectedText:u,enhancementType:M,projectContext:{industry:"general",targetAudience:"UX professionals",projectGoals:["Improve user experience","Create comprehensive documentation"]}});if(A){A.deleteContents(),A.insertNode(document.createTextNode(H.enhancedText));const $=(U=A.commonAncestorContainer.parentElement)==null?void 0:U.closest("[data-section-id]");if($){const R=$.getAttribute("data-section-id");if(R){const Y=$.textContent||"";L(R,"content",Y)}}}s({title:"Text Enhanced",description:`Applied ${M} enhancement with ${Math.round(H.confidence*100)}% confidence`}),h(""),f(null)}catch{s({title:"Enhancement Failed",description:"Failed to enhance the selected text",variant:"destructive"})}finally{y(!1)}},T=async()=>{g(!0);try{const M=C.filter(H=>H.isModified),{fetchEntries:U}=pa.getState();for(const H of M)H.originalEntryId&&!H.id.startsWith("new-")?await o(H.originalEntryId,{title:H.title,content:H.content}):await i(e,H.title,H.content);await U(e),x(!1),s({title:"Changes Saved",description:`Successfully saved ${M.length} sections`}),r&&setTimeout(r,500)}catch(M){console.error("Save error:",M),s({title:"Save Failed",description:"Failed to save changes to the knowledge base",variant:"destructive"})}finally{g(!1)}},Q=async M=>{var H;const U=(H=M.target.files)==null?void 0:H[0];if(U)try{await l(e,U,U.name),s({title:"File Uploaded",description:"File has been processed and added to the knowledge base"})}catch{s({title:"Upload Failed",description:"Failed to upload and process the file",variant:"destructive"})}},D=async()=>{if(d.current)try{s({title:"Generating PDF",description:"Please wait while we create your PDF document..."});const M=d.current,U=await Qee(M,{scale:2,useCORS:!0,logging:!1,backgroundColor:"#ffffff"}),H=U.toDataURL("image/png"),$=new tn({orientation:"portrait",unit:"mm",format:"a4"}),R=$.internal.pageSize.getWidth(),Y=$.internal.pageSize.getHeight(),X=U.width,q=U.height,K=Math.min(R/X,Y/q),J=(R-X*K)/2,W=10,ne=Y-20,ae=q*K,ce=Math.ceil(ae/ne);for(let pe=0;pe<ce;pe++){pe>0&&$.addPage();const be=W-pe*ne;$.addImage(H,"PNG",J,be,X*K,q*K)}const Ae=C.length>0?`${C[0].title.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.pdf`:"knowledge_base_document.pdf";$.save(Ae),s({title:"PDF Downloaded",description:"Your document has been saved as a PDF"})}catch(M){console.error("PDF generation error:",M),s({title:"Download Failed",description:"Failed to generate PDF. Please try again.",variant:"destructive"})}};return a.jsxs("div",{className:"min-h-full flex flex-col",children:[a.jsxs("div",{className:"border-b bg-white p-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Knowledge Base Document"}),j&&a.jsxs(_e,{variant:"outline",className:"bg-orange-50 text-orange-700 border-orange-200",children:[a.jsx(ts,{className:"w-3 h-3 mr-1"}),"Unsaved Changes"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[u&&a.jsxs(fe,{onClick:I,disabled:b,className:"bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600",children:[b?a.jsx(Cr,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(L5,{className:"w-4 h-4 mr-2"}),b?"Enhancing...":"Enhance with AI"]}),a.jsx("input",{type:"file",id:"file-upload",className:"hidden",accept:".pdf,.docx,.txt,.md,.jpg,.jpeg,.png",onChange:Q}),a.jsx(fe,{variant:"outline",className:"cursor-pointer",asChild:!0,children:a.jsxs("label",{htmlFor:"file-upload",children:[a.jsx(xx,{className:"w-4 h-4 mr-2"}),"Upload File"]})}),a.jsxs(fe,{onClick:P,variant:"outline",children:[a.jsx(ha,{className:"w-4 h-4 mr-2"}),"Add Section"]}),a.jsxs(fe,{onClick:D,variant:"outline",className:"border-blue-200 text-blue-700 hover:bg-blue-50",children:[a.jsx(Vp,{className:"w-4 h-4 mr-2"}),"Download PDF"]}),a.jsxs(fe,{onClick:T,disabled:m||!j,className:"bg-green-600 hover:bg-green-700",children:[m?a.jsx(Cr,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(Od,{className:"w-4 h-4 mr-2"}),m?"Saving...":"Save All Changes"]})]})]}),a.jsx("div",{className:"bg-gray-50 p-6 pb-12",children:a.jsx(ot.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-4xl mx-auto",children:a.jsx(De,{className:"bg-white shadow-lg mb-8",children:a.jsxs(et,{className:"p-16 py-12",ref:d,style:{maxWidth:"8.5in",margin:"0 auto",minHeight:"800px",background:"white"},children:[C.map((M,U)=>a.jsxs(ot.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:U*.1},className:"mb-8 group","data-section-id":M.id,children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex items-center justify-between group",children:[a.jsx("input",{value:M.title,onChange:H=>L(M.id,"title",H.target.value),className:"font-bold text-xl border-none p-0 bg-transparent focus:outline-none focus:bg-transparent w-full mr-4",dir:"ltr",placeholder:"Section title...",style:{fontFamily:'"Times New Roman", serif',fontSize:"20px",fontWeight:"bold",lineHeight:"1.3",color:"#1f2937",marginBottom:"8px",direction:"ltr !important",textAlign:"left !important",unicodeBidi:"embed",writingMode:"horizontal-tb"}}),a.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[M.isModified&&a.jsx(_e,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200 text-xs",children:"Modified"}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>F(M.id),className:"text-red-500 hover:text-red-700 h-6 w-6 p-0",children:a.jsx(Pc,{className:"w-3 h-3"})})]})]})}),a.jsx(fze,{initialContent:M.content||"",placeholder:"Start writing...",onContentChange:H=>L(M.id,"content",H),onTextSelection:N,className:"min-h-[120px] p-0 focus:outline-none bg-transparent text-gray-900 leading-relaxed",style:{fontFamily:'"Times New Roman", serif',fontSize:"16px",lineHeight:"1.8",textAlign:"left",direction:"ltr",unicodeBidi:"embed",writingMode:"horizontal-tb",marginBottom:"24px"}},M.id),U<C.length-1&&a.jsx("div",{className:"mt-12 mb-8",children:a.jsx("hr",{className:"border-gray-300",style:{borderWidth:"0.5px"}})})]},M.id)),C.length===0&&a.jsxs("div",{className:"text-center py-16 text-gray-500",children:[a.jsx(In,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),a.jsx("h3",{className:"text-lg font-medium mb-2",children:"Start Your Knowledge Base"}),a.jsx("p",{className:"mb-4",children:"Add sections to build your project knowledge base"}),a.jsxs(fe,{onClick:P,children:[a.jsx(ha,{className:"w-4 h-4 mr-2"}),"Add First Section"]})]})]})})})}),u&&a.jsx(ot.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"fixed bottom-4 right-4 bg-white border border-gray-200 rounded-lg shadow-lg p-4 max-w-sm",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(gr,{className:"w-5 h-5 text-purple-500 mt-1"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-sm",children:"Text Selected"}),a.jsxs("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:['"',u.substring(0,80),u.length>80?"...":"",'"']})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Enhancement Options:"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx(fe,{size:"sm",variant:"outline",onClick:()=>I("clarity"),disabled:b,className:"text-xs h-8",children:" Clarity"}),a.jsx(fe,{size:"sm",variant:"outline",onClick:()=>I("detail"),disabled:b,className:"text-xs h-8",children:" Detail"}),a.jsx(fe,{size:"sm",variant:"outline",onClick:()=>I("professional"),disabled:b,className:"text-xs h-8",children:" Professional"}),a.jsx(fe,{size:"sm",variant:"outline",onClick:()=>I("structure"),disabled:b,className:"text-xs h-8",children:" Structure"})]}),a.jsxs(fe,{size:"sm",onClick:()=>I("comprehensive"),disabled:b,className:"w-full bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 text-xs h-8",children:[b?a.jsx(Cr,{className:"w-3 h-3 mr-2 animate-spin"}):a.jsx(L5,{className:"w-3 h-3 mr-2"}),b?"Enhancing...":" Comprehensive"]})]})]})})]})};function mze(){const{projectId:e,documentId:t}=vw(),[n]=qv(),r=Vi(),{toast:s}=ii(),{projects:i,fetchProjects:o,getEnhancedSettings:c}=js(),{entries:l,fetchEntries:d,addTextEntry:u}=pa(),[h,A]=w.useState(i.find(j=>j.id===e)),[f,m]=w.useState(null),[g]=w.useState(n.get("new")==="true"||t&&t.startsWith("new-"));w.useEffect(()=>{i.length||o()},[o,i.length]),w.useEffect(()=>{if(i.length&&e){const j=i.find(x=>x.id===e);A(j),j&&(d(j.id),c(j.id))}},[i,e,d,c]),w.useEffect(()=>{if(l.length&&t&&!g){const j=l.find(x=>x.id===t);m(j)}else if(g){const j=n.get("title")||"Untitled Document";m({id:t,title:j,content:"",type:"text",created_at:new Date().toISOString(),updated_at:new Date().toISOString()})}},[l,t,g]);const b=()=>{r(`/knowledge/${e}`)},y=()=>{s({title:"Document Saved",description:"Your document has been saved successfully"})};return h?f?a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:[a.jsx(Lr,{}),a.jsxs(ot.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-b border-gray-100 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsxs(fe,{variant:"ghost",onClick:b,className:"text-gray-600 hover:text-gray-800",children:[a.jsx(yo,{className:"w-4 h-4 mr-2"}),"Back to Knowledge Base"]}),a.jsx("div",{className:"h-6 w-px bg-gray-300"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(yl,{className:"w-4 h-4 text-gray-600"}),a.jsx("span",{className:"text-sm text-gray-600",children:h.name}),a.jsx("span",{className:"text-sm text-gray-400",children:"/"}),a.jsx(xo,{className:"w-4 h-4 text-blue-600"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Knowledge Base"})]})]}),a.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[a.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-100 rounded-xl",children:a.jsx(In,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:f.title}),a.jsxs("p",{className:"text-gray-600 mt-1",children:[g?"Create new document":"Edit document"," with AI-enhanced editing"]})]})]})]})}),a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsx("div",{className:"bg-white rounded-lg border shadow-sm",children:a.jsx(pze,{projectId:h.id,entries:f?[f]:[],selectedDocumentId:f==null?void 0:f.id,onDocumentSaved:y})})})})]})]}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:[a.jsx(Lr,{}),a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Document Not Found"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"The requested document could not be found."}),a.jsxs(fe,{onClick:b,children:[a.jsx(yo,{className:"w-4 h-4 mr-2"}),"Back to Knowledge Base"]})]})})]}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:[a.jsx(Lr,{}),a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Project Not Found"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"The requested project could not be found."}),a.jsxs(fe,{onClick:()=>r("/projects"),children:[a.jsx(yo,{className:"w-4 h-4 mr-2"}),"Back to Projects"]})]})})]})}var mS="Switch",[gze,vqe]=Cs(mS),[vze,yze]=gze(mS),Hee=w.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:c,value:l="on",onCheckedChange:d,form:u,...h}=e,[A,f]=w.useState(null),m=Wt(t,x=>f(x)),g=w.useRef(!1),b=A?u||!!A.closest("form"):!0,[y,j]=fa({prop:s,defaultProp:i??!1,onChange:d,caller:mS});return a.jsxs(vze,{scope:n,checked:y,disabled:c,children:[a.jsx(gt.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":qee(y),"data-disabled":c?"":void 0,disabled:c,value:l,...h,ref:m,onClick:nn(e.onClick,x=>{j(C=>!C),b&&(g.current=x.isPropagationStopped(),g.current||x.stopPropagation())})}),b&&a.jsx(Vee,{control:A,bubbles:!g.current,name:r,value:l,checked:y,required:o,disabled:c,form:u,style:{transform:"translateX(-100%)"}})]})});Hee.displayName=mS;var $ee="SwitchThumb",zee=w.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=yze($ee,n);return a.jsx(gt.span,{"data-state":qee(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});zee.displayName=$ee;var xze="SwitchBubbleInput",Vee=w.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...s},i)=>{const o=w.useRef(null),c=Wt(o,i),l=Vk(n),d=$v(t);return w.useEffect(()=>{const u=o.current;if(!u)return;const h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&f){const m=new Event("click",{bubbles:r});f.call(u,n),u.dispatchEvent(m)}},[l,n,r]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:c,style:{...s.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Vee.displayName=xze;function qee(e){return e?"checked":"unchecked"}var Kee=Hee,wze=zee;const qA=w.forwardRef(({className:e,...t},n)=>a.jsx(Kee,{className:$e("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:a.jsx(wze,{className:$e("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));qA.displayName=Kee.displayName;var Wee=["PageUp","PageDown"],Gee=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Yee={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},iy="Slider",[KI,bze,Cze]=hm(iy),[Xee,yqe]=Cs(iy,[Cze]),[jze,gS]=Xee(iy),Jee=w.forwardRef((e,t)=>{const{name:n,min:r=0,max:s=100,step:i=1,orientation:o="horizontal",disabled:c=!1,minStepsBetweenThumbs:l=0,defaultValue:d=[r],value:u,onValueChange:h=()=>{},onValueCommit:A=()=>{},inverted:f=!1,form:m,...g}=e,b=w.useRef(new Set),y=w.useRef(0),x=o==="horizontal"?kze:Sze,[C=[],S]=fa({prop:u,defaultProp:d,onChange:I=>{var Q;(Q=[...b.current][y.current])==null||Q.focus(),h(I)}}),_=w.useRef(C);function N(I){const T=Ize(C,I);F(I,T)}function L(I){F(I,y.current)}function P(){const I=_.current[y.current];C[y.current]!==I&&A(C)}function F(I,T,{commit:Q}={commit:!1}){const D=Dze(i),M=Uze(Math.round((I-r)/i)*i+r,D),U=Kx(M,[r,s]);S((H=[])=>{const $=Eze(H,U,T);if(Fze($,l*i)){y.current=$.indexOf(U);const R=String($)!==String(H);return R&&Q&&A($),R?$:H}else return H})}return a.jsx(jze,{scope:e.__scopeSlider,name:n,disabled:c,min:r,max:s,valueIndexToChangeRef:y,thumbs:b.current,values:C,orientation:o,form:m,children:a.jsx(KI.Provider,{scope:e.__scopeSlider,children:a.jsx(KI.Slot,{scope:e.__scopeSlider,children:a.jsx(x,{"aria-disabled":c,"data-disabled":c?"":void 0,...g,ref:t,onPointerDown:nn(g.onPointerDown,()=>{c||(_.current=C)}),min:r,max:s,inverted:f,onSlideStart:c?void 0:N,onSlideMove:c?void 0:L,onSlideEnd:c?void 0:P,onHomeKeyDown:()=>!c&&F(r,0,{commit:!0}),onEndKeyDown:()=>!c&&F(s,C.length-1,{commit:!0}),onStepKeyDown:({event:I,direction:T})=>{if(!c){const M=Wee.includes(I.key)||I.shiftKey&&Gee.includes(I.key)?10:1,U=y.current,H=C[U],$=i*M*T;F(H+$,U,{commit:!0})}}})})})})});Jee.displayName=iy;var[Zee,ete]=Xee(iy,{startEdge:"left",endEdge:"right",size:"width",direction:1}),kze=w.forwardRef((e,t)=>{const{min:n,max:r,dir:s,inverted:i,onSlideStart:o,onSlideMove:c,onSlideEnd:l,onStepKeyDown:d,...u}=e,[h,A]=w.useState(null),f=Wt(t,x=>A(x)),m=w.useRef(void 0),g=uf(s),b=g==="ltr",y=b&&!i||!b&&i;function j(x){const C=m.current||h.getBoundingClientRect(),S=[0,C.width],N=qF(S,y?[n,r]:[r,n]);return m.current=C,N(x-C.left)}return a.jsx(Zee,{scope:e.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:a.jsx(tte,{dir:g,"data-orientation":"horizontal",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:x=>{const C=j(x.clientX);o==null||o(C)},onSlideMove:x=>{const C=j(x.clientX);c==null||c(C)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:x=>{const S=Yee[y?"from-left":"from-right"].includes(x.key);d==null||d({event:x,direction:S?-1:1})}})})}),Sze=w.forwardRef((e,t)=>{const{min:n,max:r,inverted:s,onSlideStart:i,onSlideMove:o,onSlideEnd:c,onStepKeyDown:l,...d}=e,u=w.useRef(null),h=Wt(t,u),A=w.useRef(void 0),f=!s;function m(g){const b=A.current||u.current.getBoundingClientRect(),y=[0,b.height],x=qF(y,f?[r,n]:[n,r]);return A.current=b,x(g-b.top)}return a.jsx(Zee,{scope:e.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:a.jsx(tte,{"data-orientation":"vertical",...d,ref:h,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const b=m(g.clientY);i==null||i(b)},onSlideMove:g=>{const b=m(g.clientY);o==null||o(b)},onSlideEnd:()=>{A.current=void 0,c==null||c()},onStepKeyDown:g=>{const y=Yee[f?"from-bottom":"from-top"].includes(g.key);l==null||l({event:g,direction:y?-1:1})}})})}),tte=w.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:c,onStepKeyDown:l,...d}=e,u=gS(iy,n);return a.jsx(gt.span,{...d,ref:t,onKeyDown:nn(e.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(c(h),h.preventDefault()):Wee.concat(Gee).includes(h.key)&&(l(h),h.preventDefault())}),onPointerDown:nn(e.onPointerDown,h=>{const A=h.target;A.setPointerCapture(h.pointerId),h.preventDefault(),u.thumbs.has(A)?A.focus():r(h)}),onPointerMove:nn(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&s(h)}),onPointerUp:nn(e.onPointerUp,h=>{const A=h.target;A.hasPointerCapture(h.pointerId)&&(A.releasePointerCapture(h.pointerId),i(h))})})}),nte="SliderTrack",rte=w.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=gS(nte,n);return a.jsx(gt.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:t})});rte.displayName=nte;var WI="SliderRange",ste=w.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=gS(WI,n),i=ete(WI,n),o=w.useRef(null),c=Wt(t,o),l=s.values.length,d=s.values.map(A=>ote(A,s.min,s.max)),u=l>1?Math.min(...d):0,h=100-Math.max(...d);return a.jsx(gt.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:c,style:{...e.style,[i.startEdge]:u+"%",[i.endEdge]:h+"%"}})});ste.displayName=WI;var GI="SliderThumb",ite=w.forwardRef((e,t)=>{const n=bze(e.__scopeSlider),[r,s]=w.useState(null),i=Wt(t,c=>s(c)),o=w.useMemo(()=>r?n().findIndex(c=>c.ref.current===r):-1,[n,r]);return a.jsx(Nze,{...e,ref:i,index:o})}),Nze=w.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:s,...i}=e,o=gS(GI,n),c=ete(GI,n),[l,d]=w.useState(null),u=Wt(t,j=>d(j)),h=l?o.form||!!l.closest("form"):!0,A=$v(l),f=o.values[r],m=f===void 0?0:ote(f,o.min,o.max),g=_ze(r,o.values.length),b=A==null?void 0:A[c.size],y=b?Pze(b,m,c.direction):0;return w.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),a.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${m}% + ${y}px)`},children:[a.jsx(KI.ItemSlot,{scope:e.__scopeSlider,children:a.jsx(gt.span,{role:"slider","aria-label":e["aria-label"]||g,"aria-valuemin":o.min,"aria-valuenow":f,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:u,style:f===void 0?{display:"none"}:e.style,onFocus:nn(e.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),h&&a.jsx(ate,{name:s??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:f},r)]})});ite.displayName=GI;var Bze="RadioBubbleInput",ate=w.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const s=w.useRef(null),i=Wt(s,r),o=Vk(t);return w.useEffect(()=>{const c=s.current;if(!c)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==t&&u){const h=new Event("input",{bubbles:!0});u.call(c,t),c.dispatchEvent(h)}},[o,t]),a.jsx(gt.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});ate.displayName=Bze;function Eze(e=[],t,n){const r=[...e];return r[n]=t,r.sort((s,i)=>s-i)}function ote(e,t,n){const i=100/(n-t)*(e-t);return Kx(i,[0,100])}function _ze(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Ize(e,t){if(e.length===1)return 0;const n=e.map(s=>Math.abs(s-t)),r=Math.min(...n);return n.indexOf(r)}function Pze(e,t,n){const r=e/2,i=qF([0,50],[0,r]);return(r-i(t)*n)*n}function Tze(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function Fze(e,t){if(t>0){const n=Tze(e);return Math.min(...n)>=t}return!0}function qF(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Dze(e){return(String(e).split(".")[1]||"").length}function Uze(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var cte=Jee,Lze=rte,Mze=ste,Rze=ite;const Rp=w.forwardRef(({className:e,...t},n)=>a.jsxs(cte,{ref:n,className:$e("relative flex w-full touch-none select-none items-center",e),...t,children:[a.jsx(Lze,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:a.jsx(Mze,{className:"absolute h-full bg-primary"})}),a.jsx(Rze,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Rp.displayName=cte.displayName;function Oze({projectId:e,projectName:t}){const{toast:n}=ii(),[r,s]=w.useState([]),[i,o]=w.useState([]),[c,l]=w.useState(!0),[d,u]=w.useState(!1),[h,A]=w.useState(""),[f,m]=w.useState("viewer");w.useEffect(()=>{g()},[e]);const g=async()=>{l(!0);try{const{data:N,error:L}=await rt.rpc("get_project_members_with_users",{project_uuid:e});let P=N;if(N&&!L&&(P=N.map(T=>({id:T.id,project_id:T.project_id,user_id:T.user_id,role:T.role,joined_at:T.joined_at,added_by:T.added_by,created_at:T.created_at,updated_at:T.updated_at,users:{id:T.user_id,email:T.user_email||"Unknown User"}}))),L)throw L;const{data:F,error:I}=await rt.rpc("get_project_invitations",{project_uuid:e});if(I)throw I;s(P||[]),o(F||[])}catch(N){console.error("Error loading team data:",N),n({title:"Error loading team data",description:"Could not load project members and invitations",variant:"destructive"})}finally{l(!1)}},b=async()=>{var F;if(!h.trim()){n({title:"Email required",description:"Please enter an email address",variant:"destructive"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h)){n({title:"Invalid email",description:"Please enter a valid email address",variant:"destructive"});return}if(r.some(I=>{var T,Q;return((Q=(T=I.users)==null?void 0:T.email)==null?void 0:Q.toLowerCase())===h.toLowerCase()})){n({title:"Already a member",description:"This user is already a member of this project",variant:"destructive"});return}if(i.find(I=>I.invited_email.toLowerCase()===h.toLowerCase()&&I.status==="pending")){n({title:"Invitation already sent",description:"A pending invitation already exists for this email",variant:"destructive"});return}u(!0);try{const I={projectId:e,projectName:t,invitedEmail:h.trim(),role:f};console.log("Sending invitation request:",I);const T=await rt.functions.invoke("send-project-invitation-simple",{body:I});if(console.log(" Full response:",T),T.error){if(console.log(" Response error:",T.error),T.response)try{const M=await T.response.text();console.log(" Response body:",M);try{const U=JSON.parse(M);console.log(" Parsed error data:",U)}catch{console.log(" Could not parse response as JSON")}}catch{console.log(" Could not read response text")}throw T.error}const{data:Q,error:D}=T;if(D)throw D;if(Q.success)n({title:"Invitation sent!",description:`Invitation sent to ${h}`}),A(""),m("viewer"),await g();else throw new Error(Q.error||"Failed to send invitation")}catch(I){if(console.error("Error sending invitation:",I),console.error("Error details:",JSON.stringify(I,null,2)),(F=I.context)!=null&&F.res)try{const T=await I.context.res.text();console.error("Function error response:",T)}catch{console.error("Could not read error response")}n({title:"Failed to send invitation",description:I.message||"Please try again. Check console for details.",variant:"destructive"})}finally{u(!1)}},y=N=>{const P=`${window.location.origin}/invitation?token=${N}`;navigator.clipboard.writeText(P),n({title:"Link copied",description:"Invitation link copied to clipboard"})},j=async N=>{try{const{data:L,error:P}=await rt.rpc("delete_project_invitation",{invitation_id:N});if(P)throw P;if(!L)throw new Error("Permission denied or invitation not found");n({title:"Invitation cancelled",description:"The invitation has been cancelled"}),await g()}catch(L){console.error("Error deleting invitation:",L),n({title:"Failed to cancel invitation",description:"Please try again",variant:"destructive"})}},x=async(N,L)=>{try{const{error:P}=await rt.from("project_members").delete().eq("id",N);if(P)throw P;n({title:"Member removed",description:`${L} has been removed from the project`}),await g()}catch(P){console.error("Error removing member:",P),n({title:"Failed to remove member",description:"Please try again",variant:"destructive"})}},C=N=>{switch(N){case"owner":return a.jsx(NC,{className:"w-4 h-4"});case"editor":return a.jsx(Sd,{className:"w-4 h-4"});case"viewer":return a.jsx(zr,{className:"w-4 h-4"});default:return a.jsx(qa,{className:"w-4 h-4"})}},S=N=>{switch(N){case"owner":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"editor":return"bg-blue-100 text-blue-800 border-blue-300";case"viewer":return"bg-gray-100 text-gray-800 border-gray-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},_=N=>{switch(N){case"pending":return a.jsx(Jo,{className:"w-4 h-4 text-yellow-600"});case"accepted":return a.jsx(br,{className:"w-4 h-4 text-green-600"});case"declined":return a.jsx(_i,{className:"w-4 h-4 text-red-600"});case"expired":return a.jsx(_i,{className:"w-4 h-4 text-gray-600"});default:return a.jsx(Jo,{className:"w-4 h-4"})}};return c?a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"}),a.jsx("span",{className:"ml-3",children:"Loading team data..."})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(ZP,{className:"w-5 h-5"}),"Invite Team Member"]}),a.jsx(Kt,{children:"Invite someone to collaborate on this project"})]}),a.jsx(et,{className:"space-y-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{htmlFor:"invite-email",children:"Email Address"}),a.jsx(ln,{id:"invite-email",type:"email",placeholder:"colleague@company.com",value:h,onChange:N=>A(N.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{htmlFor:"invite-role",children:"Role"}),a.jsxs(Vn,{value:f,onValueChange:N=>m(N),children:[a.jsx(Qn,{children:a.jsx(qn,{})}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"viewer",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zr,{className:"w-4 h-4"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Viewer"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Can view project content"})]})]})}),a.jsx(qe,{value:"editor",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Sd,{className:"w-4 h-4"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Editor"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Can edit and collaborate"})]})]})})]})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs(fe,{onClick:b,disabled:d,className:"w-full",children:[a.jsx(hp,{className:"w-4 h-4 mr-2"}),d?"Sending...":"Send Invite"]})})]})})]}),a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(qa,{className:"w-5 h-5"}),"Project Members (",r.length,")"]}),a.jsx(Kt,{children:"People with access to this project"})]}),a.jsx(et,{children:a.jsx("div",{className:"space-y-3",children:a.jsx(Pr,{children:r.map(N=>{var L;return a.jsxs(ot.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center justify-between p-3 border rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:C(N.role)}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:((L=N.users)==null?void 0:L.email)||"Unknown User"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Joined ",new Date(N.joined_at).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_e,{className:S(N.role),children:N.role}),N.role!=="owner"&&a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>{var P;return x(N.id,((P=N.users)==null?void 0:P.email)||"user")},className:"text-destructive hover:text-destructive",children:a.jsx(Pc,{className:"w-4 h-4"})})]})]},N.id)})})})})]}),i.length>0&&a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(Rv,{className:"w-5 h-5"}),"Pending Invitations (",i.filter(N=>N.status==="pending").length,")"]}),a.jsx(Kt,{children:"Invitations waiting for response"})]}),a.jsx(et,{children:a.jsx("div",{className:"space-y-3",children:a.jsx(Pr,{children:i.map(N=>a.jsxs(ot.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center justify-between p-3 border rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-100 flex items-center justify-center",children:_(N.status)}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:N.invited_email}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Invited ",new Date(N.created_at).toLocaleDateString(),"  Expires ",new Date(N.expires_at).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_e,{variant:N.status==="pending"?"secondary":"outline",children:N.status}),a.jsx(_e,{className:S(N.role),children:N.role}),N.status==="pending"&&a.jsxs(a.Fragment,{children:[a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>y(N.invitation_token),children:a.jsx(Ii,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>j(N.id),className:"text-destructive hover:text-destructive",children:a.jsx(Pc,{className:"w-4 h-4"})})]})]})]},N.id))})})})]}),a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsx(ft,{children:"Role Permissions"}),a.jsx(Kt,{children:"What each role can do in this project"})]}),a.jsx(et,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(NC,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Owner"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Full access: manage project settings, invite/remove members, delete project"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Sd,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Editor"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Can edit workflows, create prompts, manage knowledge base, and collaborate on content"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(zr,{className:"w-5 h-5 text-gray-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Viewer"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Read-only access: view workflows, browse frameworks, and access documentation"})]})]})]})})]})]})}function Qze(){const{projectId:e}=vw(),t=Vi(),[n,r]=qv(),{toast:s}=ii(),{projects:i,fetchProjects:o,saveEnhancedSettings:c,getEnhancedSettings:l}=js(),[d,u]=w.useState(i.find(F=>F.id===e)),[h,A]=w.useState(n.get("tab")||"context"),[f,m]=w.useState("general"),[g,b]=w.useState({primaryGoals:"",targetAudience:"",keyConstraints:"",successMetrics:"",teamComposition:"",timeline:""}),[y,j]=w.useState({methodologyDepth:"intermediate",outputDetail:"moderate",timeConstraints:"standard",industryCompliance:!1,accessibilityFocus:!1}),[x,C]=w.useState({promptStructure:"framework-guided",creativityLevel:"balanced",reasoning:"step-by-step",adaptability:"context-aware",validation:"built-in",personalization:"user-preferences",temperature:.7,topP:.9,topK:50});w.useEffect(()=>{i.length||o();const F=i.find(I=>I.id===e);F&&(u(F),S())},[e,i,o]),w.useEffect(()=>{const F=()=>{const I=window.location.hash;I&&setTimeout(()=>{const T=document.querySelector(I);T&&T.scrollIntoView({behavior:"smooth",block:"start"})},100)};return F(),window.addEventListener("hashchange",F),()=>{window.removeEventListener("hashchange",F)}},[h]);const S=async()=>{if(e)try{const F=await l(e);F&&(m(F.industry||"general"),b(F.projectContext||{primaryGoals:"",targetAudience:"",keyConstraints:"",successMetrics:"",teamComposition:"",timeline:""}),j(F.qualitySettings||{methodologyDepth:"intermediate",outputDetail:"moderate",timeConstraints:"standard",industryCompliance:!1,accessibilityFocus:!1}),C(F.aiMethodSettings||{promptStructure:"framework-guided",creativityLevel:"balanced",reasoning:"step-by-step",adaptability:"context-aware",validation:"built-in",personalization:"user-preferences",temperature:.7,topP:.9,topK:50}))}catch(F){console.error("Failed to load enhanced settings:",F)}},N=(()=>{const{creativityLevel:F,adaptability:I,validation:T,personalization:Q}=x;let D={min:.1,max:2,recommended:{min:.3,max:1}},M={min:.1,max:1,recommended:{min:.7,max:.95}},U={min:1,max:100,recommended:{min:20,max:80}};switch(F){case"conservative":D={min:.6,max:.9,recommended:{min:.7,max:.8}},M={min:.8,max:.95,recommended:{min:.85,max:.9}},U={min:40,max:80,recommended:{min:50,max:65}};break;case"balanced":D={min:.3,max:.8,recommended:{min:.5,max:.7}},M={min:.6,max:.9,recommended:{min:.7,max:.85}},U={min:25,max:60,recommended:{min:35,max:50}};break;case"creative":D={min:.5,max:1,recommended:{min:.6,max:.8}},M={min:.7,max:.95,recommended:{min:.8,max:.9}},U={min:40,max:70,recommended:{min:45,max:60}};break;case"experimental":D={min:.1,max:.5,recommended:{min:.2,max:.4}},M={min:.3,max:.7,recommended:{min:.5,max:.6}},U={min:10,max:30,recommended:{min:15,max:25}};break}return I==="static"?(D.recommended.max=Math.min(D.recommended.max,.7),M.recommended.max=Math.min(M.recommended.max,.8)):I==="dynamic-learning"&&(D.recommended.min=Math.max(D.recommended.min,.6),M.recommended.min=Math.max(M.recommended.min,.8)),T==="comprehensive"?(D.max=Math.max(D.max,1.5),U.max=Math.max(U.max,90)):T==="none"&&(D.recommended.max=Math.min(D.recommended.max,.8),M.recommended.max=Math.min(M.recommended.max,.85)),Q==="adaptive-learning"&&(D.recommended.min=Math.max(D.recommended.min,.6),U.recommended.min=Math.max(U.recommended.min,40)),{tempRange:D,topPRange:M,topKRange:U}})(),L=async()=>{if(!d)return;const F={industry:f,projectContext:g,qualitySettings:y,aiMethodSettings:x};try{await c(d.id,F),s({title:"Settings Saved",description:"Project settings have been saved successfully"})}catch{s({title:"Error",description:"Failed to save project settings",variant:"destructive"})}},P=()=>{t("/projects")};return d?a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Lr,{}),a.jsxs(ot.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-b border-gray-100 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsx("div",{className:"flex items-center gap-4 mb-4",children:a.jsxs(fe,{variant:"ghost",onClick:P,className:"text-gray-600 hover:text-gray-800",children:[a.jsx(yo,{className:"w-4 h-4 mr-2"}),"Back to Projects"]})}),a.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[a.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-100 rounded-xl",children:a.jsx(us,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:[d.name," Settings"]}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Configure AI context, quality settings, and methods for this project"})]})]})]})}),a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs(Ka,{value:h,onValueChange:F=>{A(F),r(I=>{const T=new URLSearchParams(I);return T.set("tab",F),T})},className:"w-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs(ga,{className:"grid w-fit grid-cols-4 bg-gray-100 p-1 rounded-lg",children:[a.jsxs(xn,{value:"context",className:"data-[state=active]:bg-white data-[state=active]:shadow-sm font-medium py-2.5 px-3 rounded-md transition-all",children:[a.jsx(Mr,{className:"w-4 h-4 mr-2"}),"Context"]}),a.jsxs(xn,{value:"quality",className:"data-[state=active]:bg-white data-[state=active]:shadow-sm font-medium py-2.5 px-3 rounded-md transition-all",children:[a.jsx(br,{className:"w-4 h-4 mr-2"}),"Quality"]}),a.jsxs(xn,{value:"ai-methods",className:"data-[state=active]:bg-white data-[state=active]:shadow-sm font-medium py-2.5 px-3 rounded-md transition-all",children:[a.jsx(Gs,{className:"w-4 h-4 mr-2"}),"AI Methods"]}),a.jsxs(xn,{value:"team",className:"data-[state=active]:bg-white data-[state=active]:shadow-sm font-medium py-2.5 px-3 rounded-md transition-all",children:[a.jsx(qa,{className:"w-4 h-4 mr-2"}),"Team"]})]}),a.jsxs(fe,{onClick:L,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold shadow-lg hover:shadow-xl transition-all",children:[a.jsx(Od,{className:"w-4 h-4 mr-2"}),"Save Settings"]})]}),a.jsx(jn,{value:"context",className:"mt-0",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(Mr,{className:"w-5 h-5 text-blue-600"}),"Industry Context"]}),a.jsx(Kt,{children:"Select your industry to get specialized adaptations and domain-specific considerations"})]}),a.jsx(et,{children:a.jsxs(Vn,{value:f,onValueChange:m,children:[a.jsx(Qn,{children:a.jsx(qn,{placeholder:"Choose your industry context"})}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"general",children:"General (no industry specific)"}),a.jsx(qe,{value:"fintech",children:"Financial Services"}),a.jsx(qe,{value:"healthcare",children:"Healthcare"}),a.jsx(qe,{value:"ecommerce",children:"E-commerce"}),a.jsx(qe,{value:"saas",children:"SaaS/Software"}),a.jsx(qe,{value:"education",children:"Education"}),a.jsx(qe,{value:"government",children:"Government/Public Sector"}),a.jsx(qe,{value:"nonprofit",children:"Non-profit"})]})]})})]}),a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsx(ft,{children:"Project Context"}),a.jsx(Kt,{children:"Provide context about your project to improve AI recommendations"})]}),a.jsxs(et,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(at,{htmlFor:"primaryGoals",children:"Primary Goals"}),a.jsx(Qr,{id:"primaryGoals",value:g.primaryGoals,onChange:F=>b(I=>({...I,primaryGoals:F.target.value})),placeholder:"What are the main objectives of this project?",className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx(at,{htmlFor:"targetAudience",children:"Target Audience"}),a.jsx(ln,{id:"targetAudience",value:g.targetAudience,onChange:F=>b(I=>({...I,targetAudience:F.target.value})),placeholder:"Who is your primary target audience?",className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx(at,{htmlFor:"keyConstraints",children:"Key Constraints"}),a.jsx(Qr,{id:"keyConstraints",value:g.keyConstraints,onChange:F=>b(I=>({...I,keyConstraints:F.target.value})),placeholder:"What are the main limitations or constraints?",className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx(at,{htmlFor:"successMetrics",children:"Success Metrics"}),a.jsx(ln,{id:"successMetrics",value:g.successMetrics,onChange:F=>b(I=>({...I,successMetrics:F.target.value})),placeholder:"How will you measure success?",className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx(at,{htmlFor:"teamComposition",children:"Team Composition"}),a.jsx(ln,{id:"teamComposition",value:g.teamComposition,onChange:F=>b(I=>({...I,teamComposition:F.target.value})),placeholder:"Who is on your team?",className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx(at,{htmlFor:"timeline",children:"Timeline"}),a.jsx(ln,{id:"timeline",value:g.timeline,onChange:F=>b(I=>({...I,timeline:F.target.value})),placeholder:"What's your project timeline?",className:"mt-1"})]})]})]})]})}),a.jsx(jn,{value:"quality",className:"mt-0",children:a.jsx("div",{className:"space-y-6",children:a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(br,{className:"w-5 h-5 text-green-600"}),"Quality Preferences"]}),a.jsx(Kt,{children:"Configure how detailed and comprehensive you want the AI outputs to be"})]}),a.jsxs(et,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{children:"Methodology Depth"}),a.jsxs(Vn,{value:y.methodologyDepth,onValueChange:F=>j(I=>({...I,methodologyDepth:F})),children:[a.jsx(Qn,{children:a.jsx(qn,{})}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"basic",children:"Basic - Simple explanations"}),a.jsx(qe,{value:"intermediate",children:"Intermediate - Balanced detail"}),a.jsx(qe,{value:"advanced",children:"Advanced - Comprehensive analysis"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{children:"Output Detail Level"}),a.jsxs(Vn,{value:y.outputDetail,onValueChange:F=>j(I=>({...I,outputDetail:F})),children:[a.jsx(Qn,{children:a.jsx(qn,{})}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"brief",children:"Brief - Concise recommendations"}),a.jsx(qe,{value:"moderate",children:"Moderate - Balanced explanations"}),a.jsx(qe,{value:"comprehensive",children:"Comprehensive - Detailed analysis"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{children:"Time Constraints"}),a.jsxs(Vn,{value:y.timeConstraints,onValueChange:F=>j(I=>({...I,timeConstraints:F})),children:[a.jsx(Qn,{children:a.jsx(qn,{})}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"urgent",children:"Urgent - Quick solutions"}),a.jsx(qe,{value:"standard",children:"Standard - Balanced approach"}),a.jsx(qe,{value:"extended",children:"Extended - Thorough exploration"})]})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx(at,{children:"Industry Compliance"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Include industry-specific compliance considerations"})]}),a.jsx(qA,{checked:y.industryCompliance,onCheckedChange:F=>j(I=>({...I,industryCompliance:F}))})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx(at,{children:"Accessibility Focus"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Emphasize accessibility in recommendations"})]}),a.jsx(qA,{checked:y.accessibilityFocus,onCheckedChange:F=>j(I=>({...I,accessibilityFocus:F}))})]})]})]})})}),a.jsx(jn,{value:"ai-methods",className:"mt-0",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(Gs,{className:"w-5 h-5 text-purple-600"}),"Prompt Structure Method"]}),a.jsx(Kt,{children:"Choose how AI structures and organizes prompts for your UX tools"})]}),a.jsx(et,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:`
                            relative p-4 border-2 rounded-lg cursor-pointer transition-all duration-200 hover:shadow-md
                            ${x.promptStructure==="framework-guided"?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-gray-300"}
                          `,onClick:()=>C(F=>({...F,promptStructure:"framework-guided"})),children:[x.promptStructure==="framework-guided"&&a.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Framework-Guided"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Follows UX methodology structure with stage-based organization and systematic progression through design thinking processes."})]}),a.jsxs("div",{className:`
                            relative p-4 border-2 rounded-lg cursor-pointer transition-all duration-200 hover:shadow-md
                            ${x.promptStructure==="open-ended"?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-gray-300"}
                          `,onClick:()=>C(F=>({...F,promptStructure:"open-ended"})),children:[x.promptStructure==="open-ended"&&a.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Open-Ended"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Flexible, exploratory prompts that encourage creative thinking and allow for diverse approaches to problem-solving."})]}),a.jsxs("div",{className:`
                            relative p-4 border-2 rounded-lg cursor-pointer transition-all duration-200 hover:shadow-md
                            ${x.promptStructure==="structured-templates"?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-gray-300"}
                          `,onClick:()=>C(F=>({...F,promptStructure:"structured-templates"})),children:[x.promptStructure==="structured-templates"&&a.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Structured Templates"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Consistent format patterns with predefined sections and standardized layouts for predictable, professional outputs."})]})]})})]}),a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsx(ft,{children:"AI Creativity Level"}),a.jsx(Kt,{children:"Control how creative and experimental the AI suggestions should be"})]}),a.jsx(et,{children:a.jsxs(Vn,{value:x.creativityLevel,onValueChange:F=>C(I=>({...I,creativityLevel:F})),children:[a.jsx(Qn,{children:a.jsx(qn,{})}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"conservative",children:"Conservative - Safe, proven approaches"}),a.jsx(qe,{value:"balanced",children:"Balanced - Mix of proven and innovative ideas"}),a.jsx(qe,{value:"creative",children:"Creative - Novel and innovative suggestions"}),a.jsx(qe,{value:"experimental",children:"Experimental - Cutting-edge, untested approaches"})]})]})})]}),a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsx(ft,{children:"Reasoning Approach"}),a.jsx(Kt,{children:"How AI should structure its reasoning and explanation process"})]}),a.jsx(et,{children:a.jsxs(Vn,{value:x.reasoning,onValueChange:F=>C(I=>({...I,reasoning:F})),children:[a.jsx(Qn,{children:a.jsx(qn,{})}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"step-by-step",children:"Step-by-Step - Detailed logical progression"}),a.jsx(qe,{value:"direct",children:"Direct - Concise, straight to the point"}),a.jsx(qe,{value:"exploratory",children:"Exploratory - Multiple perspectives and options"})]})]})})]}),a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsx(ft,{children:"Adaptability Method"}),a.jsx(Kt,{children:"How AI adapts to your context and learns from interactions"})]}),a.jsx(et,{children:a.jsxs(Vn,{value:x.adaptability,onValueChange:F=>C(I=>({...I,adaptability:F})),children:[a.jsx(Qn,{children:a.jsx(qn,{})}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"static",children:"Static - Fixed responses regardless of context"}),a.jsx(qe,{value:"context-aware",children:"Context-Aware - Adapts to project and industry context"}),a.jsx(qe,{value:"dynamic-learning",children:"Dynamic Learning - Learns from your preferences over time"})]})]})})]}),a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsx(ft,{children:"Validation & Quality Control"}),a.jsx(Kt,{children:"How AI validates and ensures quality of generated prompts"})]}),a.jsx(et,{children:a.jsxs(Vn,{value:x.validation,onValueChange:F=>C(I=>({...I,validation:F})),children:[a.jsx(Qn,{children:a.jsx(qn,{})}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"none",children:"None - No validation checks"}),a.jsx(qe,{value:"basic",children:"Basic - Simple relevance checks"}),a.jsx(qe,{value:"built-in",children:"Built-in - Standard quality validation"}),a.jsx(qe,{value:"comprehensive",children:"Comprehensive - Extensive quality analysis"})]})]})})]}),a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsx(ft,{children:"Personalization Level"}),a.jsx(Kt,{children:"How much AI personalizes responses to your specific style and preferences"})]}),a.jsx(et,{children:a.jsxs(Vn,{value:x.personalization,onValueChange:F=>C(I=>({...I,personalization:F})),children:[a.jsx(Qn,{children:a.jsx(qn,{})}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"none",children:"None - Generic responses for all users"}),a.jsx(qe,{value:"basic-profile",children:"Basic Profile - Uses industry and role information"}),a.jsx(qe,{value:"user-preferences",children:"User Preferences - Adapts to your stated preferences"}),a.jsx(qe,{value:"adaptive-learning",children:"Adaptive Learning - Learns your style from interactions"})]})]})})]}),a.jsxs(De,{id:"advanced-generation-parameters",children:[a.jsxs(dt,{children:[a.jsx(ft,{children:"Advanced Generation Parameters"}),a.jsx(Kt,{children:"Fine-tune AI text generation behavior with advanced sampling parameters"})]}),a.jsxs(et,{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(at,{className:"text-base font-medium",children:"Temperature"}),a.jsx("span",{className:"text-sm font-mono bg-muted px-2 py-1 rounded",children:x.temperature.toFixed(2)})]}),a.jsxs("div",{className:"px-3 relative",children:[a.jsx(Rp,{value:[x.temperature],onValueChange:([F])=>C(I=>({...I,temperature:F})),max:N.tempRange.max,min:N.tempRange.min,step:.1,className:"w-full"}),a.jsx("div",{className:"absolute top-1/2 transform -translate-y-1/2 bg-blue-200/50 h-2 rounded pointer-events-none",style:{left:`${(N.tempRange.recommended.min-N.tempRange.min)/(N.tempRange.max-N.tempRange.min)*100}%`,width:`${(N.tempRange.recommended.max-N.tempRange.recommended.min)/(N.tempRange.max-N.tempRange.min)*100}%`}})]}),a.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[a.jsxs("span",{children:[N.tempRange.min," (Very focused)"]}),a.jsxs("span",{className:"text-blue-600 font-medium",children:["Recommended: ",N.tempRange.recommended.min,"-",N.tempRange.recommended.max]}),a.jsxs("span",{children:[N.tempRange.max," (Very creative)"]})]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Controls randomness in text generation. Recent research (2024-2025) shows:",a.jsx("strong",{children:" Lower values (0.2-0.5)"})," = focused, factual responses ideal for technical tasks.",a.jsx("strong",{children:" Moderate values (0.6-0.8)"})," = balanced creativity and coherence.",a.jsx("strong",{children:" Higher values (0.8-1.2)"})," = creative outputs for storytelling and ideation."]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(at,{className:"text-base font-medium",children:"Top-p (Nucleus Sampling)"}),a.jsx("span",{className:"text-sm font-mono bg-muted px-2 py-1 rounded",children:x.topP.toFixed(2)})]}),a.jsxs("div",{className:"px-3 relative",children:[a.jsx(Rp,{value:[x.topP],onValueChange:([F])=>C(I=>({...I,topP:F})),max:N.topPRange.max,min:N.topPRange.min,step:.05,className:"w-full"}),a.jsx("div",{className:"absolute top-1/2 transform -translate-y-1/2 bg-blue-200/50 h-2 rounded pointer-events-none",style:{left:`${(N.topPRange.recommended.min-N.topPRange.min)/(N.topPRange.max-N.topPRange.min)*100}%`,width:`${(N.topPRange.recommended.max-N.topPRange.recommended.min)/(N.topPRange.max-N.topPRange.min)*100}%`}})]}),a.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[a.jsxs("span",{children:[N.topPRange.min," (Very focused)"]}),a.jsxs("span",{className:"text-blue-600 font-medium",children:["Recommended: ",N.topPRange.recommended.min.toFixed(2),"-",N.topPRange.recommended.max.toFixed(2)]}),a.jsxs("span",{children:[N.topPRange.max," (Very diverse)"]})]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Controls diversity by limiting tokens to cumulative probability  p (nucleus sampling).",a.jsx("strong",{children:" Lower values (0.3-0.7)"})," = restrictive, predictable outputs for precision tasks.",a.jsx("strong",{children:" Standard range (0.85-0.95)"})," = optimal balance of diversity and coherence.",a.jsx("strong",{children:" Higher values (0.95+)"})," = maximum diversity, may reduce coherence."]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(at,{className:"text-base font-medium",children:"Top-k (Token Limit)"}),a.jsx("span",{className:"text-sm font-mono bg-muted px-2 py-1 rounded",children:x.topK})]}),a.jsxs("div",{className:"px-3 relative",children:[a.jsx(Rp,{value:[x.topK],onValueChange:([F])=>C(I=>({...I,topK:F})),max:N.topKRange.max,min:N.topKRange.min,step:1,className:"w-full"}),a.jsx("div",{className:"absolute top-1/2 transform -translate-y-1/2 bg-blue-200/50 h-2 rounded pointer-events-none",style:{left:`${(N.topKRange.recommended.min-N.topKRange.min)/(N.topKRange.max-N.topKRange.min)*100}%`,width:`${(N.topKRange.recommended.max-N.topKRange.recommended.min)/(N.topKRange.max-N.topKRange.min)*100}%`}})]}),a.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[a.jsxs("span",{children:[N.topKRange.min," (Most focused)"]}),a.jsxs("span",{className:"text-blue-600 font-medium",children:["Recommended: ",N.topKRange.recommended.min,"-",N.topKRange.recommended.max]}),a.jsxs("span",{children:[N.topKRange.max," (Most diverse)"]})]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Limits token selection to the k most probable options at each step.",a.jsx("strong",{children:" Lower values (5-20)"})," = focused, consistent outputs for technical tasks.",a.jsx("strong",{children:" Moderate values (40-60)"})," = balanced vocabulary diversity.",a.jsx("strong",{children:" Higher values (70-100)"})," = maximum vocabulary variety for creative tasks."]})]}),a.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 rounded-r-lg",children:a.jsx("div",{className:"flex",children:a.jsx("div",{className:"ml-3",children:a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Dynamic Recommendation:"})," Based on your current settings (",x.creativityLevel,", ",x.adaptability,", ",x.validation,"), the optimal ranges are: Temperature ",N.tempRange.recommended.min,"-",N.tempRange.recommended.max,", Top-p ",N.topPRange.recommended.min.toFixed(2),"-",N.topPRange.recommended.max.toFixed(2),", and Top-k ",N.topKRange.recommended.min,"-",N.topKRange.recommended.max,". These ranges will update automatically as you change your AI method preferences above."]})})})})]})]})]})}),a.jsx(jn,{value:"team",className:"mt-0",children:a.jsx(Oze,{projectId:e||"",projectName:(d==null?void 0:d.name)||"Project"})})]})})})]})]}):a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Lr,{}),a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Project Not Found"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"The requested project could not be found."}),a.jsxs(fe,{onClick:P,children:[a.jsx(yo,{className:"w-4 h-4 mr-2"}),"Back to Projects"]})]})})]})}function Hze(){const[e,t]=w.useState([]),[n,r]=w.useState([]),[s,i]=w.useState(!0),[o,c]=w.useState(""),[l,d]=w.useState("all"),[u,h]=w.useState("all"),[A,f]=w.useState(!1),[m,g]=w.useState(null),b=async()=>{try{i(!0);const{data:{user:F}}=await rt.auth.getUser();if(!F)throw new Error("User not authenticated");const{data:I,error:T}=await rt.from("prompts").select("*, ai_response").eq("user_id",F.id).order("created_at",{ascending:!1});if(T)throw T;console.log("All prompts loaded:",(I==null?void 0:I.length)||0);const Q=(I||[]).filter(D=>{const M=D.variables,U=M&&M._isLibraryPrompt===!0,H=M&&M._isPromptVersion===!0;return(U||H)&&console.log("Found library prompt or version:",D.tool_name,M),U||H}).map(D=>{const M=D.variables,U=M&&M._isPromptVersion===!0;return{id:D.id,title:U?M._versionTitle||`Version - ${D.tool_name}`:M._libraryTitle||`${D.tool_name} - ${D.stage_name}`,description:U?M._versionDescription||`Prompt version for ${D.tool_name}`:M._libraryDescription||`Generated prompt for ${D.tool_name}`,content:D.prompt_content,framework:D.framework_name,stage:D.stage_name,tool:D.tool_name,variables:Object.keys(M).filter(H=>!H.startsWith("_")),created_at:D.created_at,updated_at:D.updated_at,ai_response:D.ai_response,isVersion:U,versionTitle:M._versionTitle,originalPromptId:M._originalPromptId}});console.log("Library prompts found:",Q.length),t(Q),r(Q)}catch(F){console.error("Error loading library prompts:",F),Ue.error("Failed to load library prompts")}finally{i(!1)}};w.useEffect(()=>{b()},[]),w.useEffect(()=>{let F=e;o&&(F=F.filter(I=>I.title.toLowerCase().includes(o.toLowerCase())||I.description.toLowerCase().includes(o.toLowerCase())||I.tool.toLowerCase().includes(o.toLowerCase())||I.framework.toLowerCase().includes(o.toLowerCase()))),l!=="all"&&(F=F.filter(I=>I.framework===l)),u!=="all"&&(F=F.filter(I=>I.stage===u)),A&&(F=F.filter(I=>I.isVersion===!0)),r(F)},[o,l,u,A,e]);const y=F=>{navigator.clipboard.writeText(F.content),Ue.success("Prompt copied to clipboard")},j=async F=>{if(confirm("Are you sure you want to delete this prompt from your library?"))try{const{error:I}=await rt.from("prompts").delete().eq("id",F);if(I)throw I;Ue.success("Prompt deleted from library"),b()}catch(I){console.error("Error deleting prompt:",I),Ue.error("Failed to delete prompt")}},x=[...new Set(e.map(F=>F.framework))],C=[...new Set(e.map(F=>F.stage))],S=F=>{var Q;let I=[],T;if(F.ai_response){console.log("Raw AI response from library:",{type:typeof F.ai_response,sample:F.ai_response.substring(0,200)+"...",isJSON:F.ai_response.trim().startsWith("{")||F.ai_response.trim().startsWith("[")});try{const D=JSON.parse(F.ai_response);console.log("Parsed AI response structure:",{type:typeof D,hasType:"type"in D,hasMessages:"messages"in D,keys:typeof D=="object"?Object.keys(D):[],isArray:Array.isArray(D)}),D.type==="conversation"&&Array.isArray(D.messages)?(I=D.messages.map(M=>({id:M.id||`msg-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:M.type||"ai",content:M.content||"",timestamp:M.timestamp?new Date(M.timestamp):new Date})),console.log("Converted conversation messages:",I.length)):Array.isArray(D)?(I=D.map((M,U)=>({id:M.id||`msg-${Date.now()}-${U}`,type:M.type||(U%2===0?"user":"ai"),content:M.content||(typeof M=="string"?M:JSON.stringify(M)),timestamp:M.timestamp?new Date(M.timestamp):new Date(Date.now()-(D.length-U)*1e3)})),console.log("Converted array to conversation:",I.length)):typeof D=="string"?(T=D,console.log("Using parsed string as output")):D&&typeof D=="object"&&(D.content?T=D.content:D.response?T=D.response:D.text?T=D.text:T=JSON.stringify(D,null,2),console.log("Using object content as output"))}catch(D){T=F.ai_response,console.log("Using AI response as plain text output (parse error):",D)}}if(console.log("Converting library prompt to generated prompt:",{hasAiResponse:!!F.ai_response,hasConversation:I.length>0,hasOutput:!!T,responseLength:((Q=F.ai_response)==null?void 0:Q.length)||0,conversationSample:I.length>0?I[0]:null}),I.length>0)if(I.some(M=>M.type==="user"&&(M.content===F.content||M.content.includes(F.content.substring(0,Math.min(50,F.content.length)))||F.content.includes(M.content.substring(0,Math.min(50,M.content.length))))))console.log("Original prompt already found in conversation");else{const M={id:"library-user-msg",type:"user",content:F.content,timestamp:new Date(F.created_at)};I.unshift(M),console.log("Added original prompt as user message to conversation")}return I.length===0&&T&&(I=[{id:"library-user-msg",type:"user",content:F.content,timestamp:new Date(F.created_at)},{id:"library-ai-msg",type:"ai",content:T,timestamp:new Date(F.updated_at||F.created_at)}],T=void 0,console.log("Created conversation from output")),{id:F.id,workflowId:"library-prompt",projectId:"library",content:F.content,context:{framework:{id:F.framework.toLowerCase().replace(/\s+/g,"-"),name:F.framework},stage:{id:F.stage.toLowerCase().replace(/\s+/g,"-"),name:F.stage},tool:{id:F.tool.toLowerCase().replace(/\s+/g,"-"),name:F.tool}},variables:F.variables.reduce((D,M)=>(D[M]="",D),{}),timestamp:new Date(F.created_at).getTime(),conversation:I.length>0?I:void 0,output:T}},_=F=>{const I=S(F);g(I)},N=()=>{g(null)},L=()=>{m&&(navigator.clipboard.writeText(m.content),Ue.success("Prompt copied to clipboard"))},P=()=>{Ue.info("View details functionality")};return a.jsxs("div",{className:"h-screen bg-gradient-to-br from-gray-50 to-white flex flex-col",children:[a.jsx(Lr,{}),a.jsxs(ot.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5},className:"flex-1 flex flex-col",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border-b border-gray-100 p-6",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-purple-100 rounded-xl",children:a.jsx(F5,{className:"w-6 h-6 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Prompt Library"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage and reuse your saved prompts across different projects and workflows"})]})]}),a.jsxs(fe,{variant:"outline",size:"sm",onClick:b,disabled:s,className:"flex items-center gap-2",children:[a.jsx(kl,{className:`w-4 h-4 ${s?"animate-spin":""}`}),"Refresh"]})]})})}),a.jsx("div",{className:"flex-1 p-6 overflow-hidden",children:a.jsxs("div",{className:"max-w-6xl mx-auto h-full flex flex-col",children:[a.jsx(De,{className:"p-4 mb-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(mw,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"}),a.jsx(ln,{placeholder:"Search prompts...",value:o,onChange:F=>c(F.target.value),className:"pl-10"})]})}),a.jsxs(Vn,{value:l,onValueChange:d,children:[a.jsx(Qn,{className:"w-full md:w-48",children:a.jsx(qn,{placeholder:"All Frameworks"})}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"all",children:"All Frameworks"}),x.map(F=>a.jsx(qe,{value:F,children:F},F))]})]}),a.jsxs(Vn,{value:u,onValueChange:h,children:[a.jsx(Qn,{className:"w-full md:w-48",children:a.jsx(qn,{placeholder:"All Stages"})}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"all",children:"All Stages"}),C.map(F=>a.jsx(qe,{value:F,children:F},F))]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Wx,{id:"show-versions",checked:A,onCheckedChange:F=>f(F)}),a.jsx("label",{htmlFor:"show-versions",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Show versions only"})]})]})}),a.jsx("div",{className:"flex-1 overflow-hidden",children:s?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading your prompt library..."})]})}):n.length===0?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsxs("div",{className:"text-center",children:[a.jsx(F5,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No prompts found"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:o||l!=="all"||u!=="all"?"Try adjusting your search criteria":"Save prompts from the workflow builder to see them here"})]})}):a.jsxs(De,{className:"flex-1 overflow-hidden",children:[a.jsx("div",{className:"border-b bg-muted/50 px-6 py-3",children:a.jsxs("div",{className:"grid grid-cols-12 gap-4 text-sm font-medium text-muted-foreground",children:[a.jsx("div",{className:"col-span-4",children:"Title & Description"}),a.jsx("div",{className:"col-span-2",children:"Framework"}),a.jsx("div",{className:"col-span-2",children:"Stage"}),a.jsx("div",{className:"col-span-2",children:"Tool"}),a.jsx("div",{className:"col-span-1",children:"Created"}),a.jsx("div",{className:"col-span-1 text-right",children:"Actions"})]})}),a.jsxs(ns,{className:"flex-1",children:[a.jsx("div",{className:"divide-y",children:n.map(F=>a.jsx(ot.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"px-6 py-4 hover:bg-muted/30 cursor-pointer group transition-colors",onClick:()=>_(F),children:a.jsxs("div",{className:"grid grid-cols-12 gap-4 items-start",children:[a.jsxs("div",{className:"col-span-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(gr,{className:"w-4 h-4 text-primary flex-shrink-0"}),a.jsx("h3",{className:"font-semibold text-sm truncate",children:F.title}),F.isVersion&&a.jsx(_e,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-700 border-blue-200",children:"Version"})]}),a.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 ml-6",children:F.description}),a.jsx("div",{className:"mt-2 ml-6",children:a.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1 font-mono bg-muted/50 px-2 py-1 rounded",children:F.content})}),F.variables.length>0&&a.jsx("div",{className:"mt-2 ml-6",children:a.jsxs("div",{className:"flex flex-wrap gap-1",children:[F.variables.slice(0,2).map(I=>a.jsx(_e,{variant:"outline",className:"text-xs",children:I},I)),F.variables.length>2&&a.jsxs(_e,{variant:"outline",className:"text-xs",children:["+",F.variables.length-2," more"]})]})})]}),a.jsx("div",{className:"col-span-2",children:a.jsx(_e,{variant:"outline",className:"text-xs",children:F.framework})}),a.jsx("div",{className:"col-span-2",children:a.jsx(_e,{variant:"secondary",className:"text-xs",children:F.stage})}),a.jsx("div",{className:"col-span-2",children:a.jsx(_e,{variant:"default",className:"text-xs",children:F.tool})}),a.jsx("div",{className:"col-span-1",children:a.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(F.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"})})}),a.jsx("div",{className:"col-span-1 flex justify-end",children:a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx(fe,{size:"sm",variant:"ghost",onClick:I=>{I.stopPropagation(),y(F)},className:"h-8 w-8 p-0",title:"Copy prompt",children:a.jsx(Ii,{className:"w-3 h-3"})}),a.jsx(fe,{size:"sm",variant:"ghost",onClick:I=>{I.stopPropagation(),j(F.id)},className:"h-8 w-8 p-0 text-destructive hover:text-destructive",title:"Delete prompt",children:a.jsx(Pc,{className:"w-3 h-3"})})]})})]})},F.id))}),a.jsx($k,{orientation:"vertical",className:"w-3 border-l border-l-transparent p-[2px]"})]})]})})]})})]}),a.jsx(Pr,{children:m&&a.jsx(NX,{prompt:m,sourceToolName:m.context.tool.name,onContract:N,onCopy:L,onView:P})})]})}const Nu=[{id:"info",title:"Basic Info",icon:gr},{id:"role",title:"AI Role",icon:Gs},{id:"context",title:"Context",icon:Qd},{id:"task",title:"Task",icon:Mr},{id:"constraints",title:"Quality",icon:us},{id:"format",title:"Format",icon:In},{id:"review",title:"Review",icon:YA}],$ze=["User Personas","User Journey Maps","Empathy Maps","Wireframes","Affinity Mapping","Problem Statements","User Interviews","Usability Tests","Custom"];function zze({open:e,onOpenChange:t,projectId:n}){const r=Vi(),{createPrompt:s}=Mw(),[i,o]=w.useState("info"),[c,l]=w.useState(!1),[d,u]=w.useState({title:"",description:"",tool_name:"",framework_name:"",stage_name:"",role_content:"",context_content:"",task_content:"",constraints_content:"",format_content:""}),h=Nu.findIndex(x=>x.id===i),A=(h+1)/Nu.length*100,f=()=>{const x=Nu.findIndex(C=>C.id===i);x<Nu.length-1&&o(Nu[x+1].id)},m=()=>{const x=Nu.findIndex(C=>C.id===i);x>0&&o(Nu[x-1].id)},g=x=>{if(u(C=>({...C,tool_name:x})),x!=="Custom"){const C=TTe(x);u(S=>({...S,role_content:C.role_section.content,context_content:C.context_section.content,task_content:C.task_section.content,constraints_content:C.constraints_section.content,format_content:C.format_section.content})),Ue.success(`Loaded ${x} template`)}},b=async()=>{try{l(!0);const x={project_id:n,title:d.title,description:d.description||void 0,tool_name:d.tool_name||void 0,framework_name:d.framework_name||void 0,stage_name:d.stage_name||void 0,role_section:{content:d.role_content},context_section:{content:d.context_content},task_section:{content:d.task_content},constraints_section:{content:d.constraints_content},format_section:{content:d.format_content}},C=await s(x);Ue.success("Prompt created successfully"),t(!1),r(`/library/${C}`)}catch(x){console.error("Error creating prompt:",x),Ue.error("Failed to create prompt")}finally{l(!1)}},y=()=>{switch(i){case"info":return d.title.trim()!==""&&d.tool_name!=="";case"role":return d.role_content.trim()!=="";case"context":return d.context_content.trim()!=="";case"task":return d.task_content.trim()!=="";case"constraints":return d.constraints_content.trim()!=="";case"format":return d.format_content.trim()!=="";default:return!0}},j=()=>{switch(i){case"info":return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{children:"Prompt Title *"}),a.jsx(ln,{value:d.title,onChange:x=>u({...d,title:x.target.value}),placeholder:"e.g., User Personas - Mobile App",autoFocus:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{children:"Tool Type *"}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:$ze.map(x=>a.jsx(fe,{type:"button",variant:d.tool_name===x?"default":"outline",size:"sm",onClick:()=>g(x),className:"justify-start",children:x},x))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{children:"Description (Optional)"}),a.jsx(Qr,{value:d.description,onChange:x=>u({...d,description:x.target.value}),placeholder:"Brief description of this prompt's purpose...",rows:3})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{children:"Framework (Optional)"}),a.jsx(ln,{value:d.framework_name,onChange:x=>u({...d,framework_name:x.target.value}),placeholder:"e.g., Design Thinking"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{children:"Stage (Optional)"}),a.jsx(ln,{value:d.stage_name,onChange:x=>u({...d,stage_name:x.target.value}),placeholder:"e.g., Empathize"})]})]})]});case"role":return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[a.jsx(Gs,{className:"w-5 h-5 text-purple-600 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-sm text-purple-900 mb-1",children:"AI Role & Expertise"}),a.jsx("p",{className:"text-xs text-purple-700",children:"Define the AI's role, expertise level, and specialization for this task."})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{children:"Role Content *"}),a.jsx(Qr,{value:d.role_content,onChange:x=>u({...d,role_content:x.target.value}),placeholder:"You are a senior UX researcher with 15+ years of experience...",rows:8,className:"font-mono text-sm"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[d.role_content.split(/\s+/).filter(Boolean).length," words"]})]})]});case"context":return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsx(Qd,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-sm text-blue-900 mb-1",children:"Project Context"}),a.jsx("p",{className:"text-xs text-blue-700",children:"Provide project background, constraints, and contextual information."})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{children:"Context Content *"}),a.jsx(Qr,{value:d.context_content,onChange:x=>u({...d,context_content:x.target.value}),placeholder:`## Project Context:
{{knowledgeBase}}

Working on a project with the following specifics...`,rows:10,className:"font-mono text-sm"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[d.context_content.split(/\s+/).filter(Boolean).length," words"]})]})]});case"task":return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:[a.jsx(Mr,{className:"w-5 h-5 text-green-600 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-sm text-green-900 mb-1",children:"Specific Task"}),a.jsx("p",{className:"text-xs text-green-700",children:"Describe exactly what the AI should create or accomplish."})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{children:"Task Content *"}),a.jsx(Qr,{value:d.task_content,onChange:x=>u({...d,task_content:x.target.value}),placeholder:"Create a comprehensive user persona that addresses...",rows:8,className:"font-mono text-sm"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[d.task_content.split(/\s+/).filter(Boolean).length," words"]})]})]});case"constraints":return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-orange-50 border border-orange-200 rounded-lg",children:[a.jsx(us,{className:"w-5 h-5 text-orange-600 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-sm text-orange-900 mb-1",children:"Quality Standards & Constraints"}),a.jsx("p",{className:"text-xs text-orange-700",children:"Set quality expectations, methodology requirements, and constraints."})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{children:"Quality Standards *"}),a.jsx(Qr,{value:d.constraints_content,onChange:x=>u({...d,constraints_content:x.target.value}),placeholder:`## Quality Standards:
- **Evidence-Based**: Every element must...`,rows:8,className:"font-mono text-sm"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[d.constraints_content.split(/\s+/).filter(Boolean).length," words"]})]})]});case"format":return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:[a.jsx(In,{className:"w-5 h-5 text-red-600 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-sm text-red-900 mb-1",children:"Output Format"}),a.jsx("p",{className:"text-xs text-red-700",children:"Specify the desired structure and format of the AI's output."})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{children:"Format Instructions *"}),a.jsx(Qr,{value:d.format_content,onChange:x=>u({...d,format_content:x.target.value}),placeholder:`## Output Format:
Structure your response following...`,rows:8,className:"font-mono text-sm"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[d.format_content.split(/\s+/).filter(Boolean).length," words"]})]})]});case"review":return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(YA,{className:"w-5 h-5 text-green-600"}),a.jsx("h4",{className:"font-medium text-green-900",children:"Ready to Create"})]}),a.jsx("p",{className:"text-sm text-green-700",children:"Review your prompt configuration before creating."})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx(at,{className:"text-xs text-muted-foreground",children:"Title"}),a.jsx("p",{className:"font-medium",children:d.title})]}),d.description&&a.jsxs("div",{children:[a.jsx(at,{className:"text-xs text-muted-foreground",children:"Description"}),a.jsx("p",{className:"text-sm",children:d.description})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(_e,{children:d.tool_name}),d.framework_name&&a.jsx(_e,{variant:"secondary",children:d.framework_name}),d.stage_name&&a.jsx(_e,{variant:"secondary",children:d.stage_name})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-3 border-t",children:[a.jsxs("div",{children:[a.jsx(at,{className:"text-xs text-muted-foreground",children:"Role Section"}),a.jsxs("p",{className:"text-sm",children:[d.role_content.split(/\s+/).filter(Boolean).length," words"]})]}),a.jsxs("div",{children:[a.jsx(at,{className:"text-xs text-muted-foreground",children:"Context Section"}),a.jsxs("p",{className:"text-sm",children:[d.context_content.split(/\s+/).filter(Boolean).length," words"]})]}),a.jsxs("div",{children:[a.jsx(at,{className:"text-xs text-muted-foreground",children:"Task Section"}),a.jsxs("p",{className:"text-sm",children:[d.task_content.split(/\s+/).filter(Boolean).length," words"]})]}),a.jsxs("div",{children:[a.jsx(at,{className:"text-xs text-muted-foreground",children:"Quality Section"}),a.jsxs("p",{className:"text-sm",children:[d.constraints_content.split(/\s+/).filter(Boolean).length," words"]})]}),a.jsxs("div",{children:[a.jsx(at,{className:"text-xs text-muted-foreground",children:"Format Section"}),a.jsxs("p",{className:"text-sm",children:[d.format_content.split(/\s+/).filter(Boolean).length," words"]})]})]})]})]});default:return null}};return a.jsx(zd,{open:e,onOpenChange:t,children:a.jsxs(_l,{className:"max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs(Il,{children:[a.jsx(Pl,{children:"Create New Prompt"}),a.jsx(Vd,{children:"Build a structured prompt with card-based sections"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[a.jsxs("span",{children:["Step ",h+1," of ",Nu.length]}),a.jsxs("span",{children:[Math.round(A),"% Complete"]})]}),a.jsx(bl,{value:A,className:"h-2"})]}),a.jsx("div",{className:"flex items-center gap-2 overflow-x-auto py-2",children:Nu.map((x,C)=>{const S=x.icon,_=x.id===i,N=C<h;return a.jsxs("div",{className:$e("flex items-center gap-2 px-3 py-2 rounded-lg border-2 transition-colors whitespace-nowrap",_&&"border-primary bg-primary/5",N&&"border-green-500 bg-green-50",!_&&!N&&"border-gray-200"),children:[a.jsx(S,{className:$e("w-4 h-4",_&&"text-primary",N&&"text-green-600",!_&&!N&&"text-gray-400")}),a.jsx("span",{className:$e("text-sm font-medium",_&&"text-primary"),children:x.title})]},x.id)})}),a.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:a.jsx(Pr,{mode:"wait",children:a.jsx(ot.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:j()},i)})}),a.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[a.jsxs(fe,{variant:"outline",onClick:m,disabled:h===0,children:[a.jsx(Dde,{className:"w-4 h-4 mr-2"}),"Back"]}),a.jsx("div",{className:"flex items-center gap-2",children:i==="review"?a.jsx(fe,{onClick:b,disabled:c,children:c?a.jsx(a.Fragment,{children:"Creating..."}):a.jsxs(a.Fragment,{children:[a.jsx(YA,{className:"w-4 h-4 mr-2"}),"Create Prompt"]})}):a.jsxs(fe,{onClick:f,disabled:!y(),children:["Next",a.jsx(_r,{className:"w-4 h-4 ml-2"})]})})]})]})})}var lte="AlertDialog",[Vze,xqe]=Cs(lte,[KW]),ch=KW(),dte=e=>{const{__scopeAlertDialog:t,...n}=e,r=ch(t);return a.jsx(lG,{...r,...n,modal:!0})};dte.displayName=lte;var qze="AlertDialogTrigger",Kze=w.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ch(n);return a.jsx(dG,{...s,...r,ref:t})});Kze.displayName=qze;var Wze="AlertDialogPortal",ute=e=>{const{__scopeAlertDialog:t,...n}=e,r=ch(t);return a.jsx(uG,{...r,...n})};ute.displayName=Wze;var Gze="AlertDialogOverlay",hte=w.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ch(n);return a.jsx(zT,{...s,...r,ref:t})});hte.displayName=Gze;var Jg="AlertDialogContent",[Yze,Xze]=Vze(Jg),Jze=M$("AlertDialogContent"),Ate=w.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...s}=e,i=ch(n),o=w.useRef(null),c=Wt(t,o),l=w.useRef(null);return a.jsx(rIe,{contentName:Jg,titleName:fte,docsSlug:"alert-dialog",children:a.jsx(Yze,{scope:n,cancelRef:l,children:a.jsxs(VT,{role:"alertdialog",...i,...s,ref:c,onOpenAutoFocus:nn(s.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=l.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[a.jsx(Jze,{children:r}),a.jsx(eVe,{contentRef:o})]})})})});Ate.displayName=Jg;var fte="AlertDialogTitle",pte=w.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ch(n);return a.jsx(qT,{...s,...r,ref:t})});pte.displayName=fte;var mte="AlertDialogDescription",gte=w.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ch(n);return a.jsx(KT,{...s,...r,ref:t})});gte.displayName=mte;var Zze="AlertDialogAction",vte=w.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ch(n);return a.jsx(WT,{...s,...r,ref:t})});vte.displayName=Zze;var yte="AlertDialogCancel",xte=w.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:s}=Xze(yte,n),i=ch(n),o=Wt(t,s);return a.jsx(WT,{...i,...r,ref:o})});xte.displayName=yte;var eVe=({contentRef:e})=>{const t=`\`${Jg}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Jg}\` by passing a \`${mte}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Jg}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return w.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},tVe=dte,nVe=ute,wte=hte,bte=Ate,Cte=vte,jte=xte,kte=pte,Ste=gte;const rVe=tVe,sVe=nVe,Nte=w.forwardRef(({className:e,...t},n)=>a.jsx(wte,{className:$e("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));Nte.displayName=wte.displayName;const Bte=w.forwardRef(({className:e,...t},n)=>a.jsxs(sVe,{children:[a.jsx(Nte,{}),a.jsx(bte,{ref:n,className:$e("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Bte.displayName=bte.displayName;const Ete=({className:e,...t})=>a.jsx("div",{className:$e("flex flex-col space-y-2 text-center sm:text-left",e),...t});Ete.displayName="AlertDialogHeader";const _te=({className:e,...t})=>a.jsx("div",{className:$e("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});_te.displayName="AlertDialogFooter";const Ite=w.forwardRef(({className:e,...t},n)=>a.jsx(kte,{ref:n,className:$e("text-lg font-semibold",e),...t}));Ite.displayName=kte.displayName;const Pte=w.forwardRef(({className:e,...t},n)=>a.jsx(Ste,{ref:n,className:$e("text-sm text-muted-foreground",e),...t}));Pte.displayName=Ste.displayName;const Tte=w.forwardRef(({className:e,...t},n)=>a.jsx(Cte,{ref:n,className:$e(F4(),e),...t}));Tte.displayName=Cte.displayName;const Fte=w.forwardRef(({className:e,...t},n)=>a.jsx(jte,{ref:n,className:$e(F4({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Fte.displayName=jte.displayName;const iVe={Brain:Gs,User:Qd,Target:Mr,Settings:us,FileText:In,Lightbulb:_p},i8={purple:{card:"border-purple-300 bg-purple-50 hover:border-purple-400",header:"bg-purple-100 border-purple-200",icon:"text-purple-600",badge:"bg-purple-200 text-purple-800",button:"text-purple-600 hover:bg-purple-100"},blue:{card:"border-blue-300 bg-blue-50 hover:border-blue-400",header:"bg-blue-100 border-blue-200",icon:"text-blue-600",badge:"bg-blue-200 text-blue-800",button:"text-blue-600 hover:bg-blue-100"},green:{card:"border-green-300 bg-green-50 hover:border-green-400",header:"bg-green-100 border-green-200",icon:"text-green-600",badge:"bg-green-200 text-green-800",button:"text-green-600 hover:bg-green-100"},orange:{card:"border-orange-300 bg-orange-50 hover:border-orange-400",header:"bg-orange-100 border-orange-200",icon:"text-orange-600",badge:"bg-orange-200 text-orange-800",button:"text-orange-600 hover:bg-orange-100"},red:{card:"border-red-300 bg-red-50 hover:border-red-400",header:"bg-red-100 border-red-200",icon:"text-red-600",badge:"bg-red-200 text-red-800",button:"text-red-600 hover:bg-red-100"},yellow:{card:"border-yellow-300 bg-yellow-50 hover:border-yellow-400",header:"bg-yellow-100 border-yellow-200",icon:"text-yellow-600",badge:"bg-yellow-200 text-yellow-800",button:"text-yellow-600 hover:bg-yellow-100"}};function aVe({section:e,onUpdate:t,onToggleExpand:n,isEditing:r,onEditStart:s,onEditEnd:i,className:o}){const[c,l]=w.useState(!1),[d,u]=w.useState(e.content),[h,A]=w.useState(!1),f=r??c;w.useEffect(()=>{u(e.content),A(!1)},[e.content]);const m=iVe[e.icon]||Gs,g=i8[e.color]||i8.purple,b=dj(e.content),y=()=>{r===void 0&&l(!0),s==null||s()},j=()=>{u(e.content),A(!1),r===void 0&&l(!1),i==null||i()},x=()=>{h&&t&&(t(d),Ue.success(`${e.title} updated`)),r===void 0&&l(!1),i==null||i()},C=_=>{u(_),A(_!==e.content)},S=()=>{navigator.clipboard.writeText(e.content),Ue.success("Section content copied to clipboard")};return a.jsx(ot.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:o,children:a.jsxs(De,{className:$e("border-2 transition-all duration-200",g.card),children:[a.jsxs(dt,{className:$e("flex flex-row items-center justify-between space-y-0 py-3 px-4 border-b-2 cursor-pointer",g.header),onClick:n,children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:$e("p-2 rounded-lg bg-white",g.icon),children:a.jsx(m,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("h3",{className:"font-semibold text-sm",children:e.title}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_e,{variant:"secondary",className:$e("text-xs",g.badge),children:e.type}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:[b," words"]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[e.isEditable&&!f&&a.jsx(fe,{size:"sm",variant:"ghost",onClick:_=>{_.stopPropagation(),y()},className:g.button,children:a.jsx(Xu,{className:"w-4 h-4"})}),!f&&a.jsx(fe,{size:"sm",variant:"ghost",onClick:_=>{_.stopPropagation(),S()},className:g.button,children:a.jsx(Ii,{className:"w-4 h-4"})}),n&&a.jsx(fe,{size:"sm",variant:"ghost",className:g.button,children:e.isExpanded?a.jsx(Zj,{className:"w-4 h-4"}):a.jsx(Ic,{className:"w-4 h-4"})})]})]}),a.jsx(Pr,{children:e.isExpanded&&a.jsx(ot.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},children:a.jsx(et,{className:"p-4",children:f?a.jsxs("div",{className:"space-y-3",children:[a.jsx(Qr,{value:d,onChange:_=>C(_.target.value),placeholder:`Enter ${e.title.toLowerCase()} content...`,className:"min-h-[200px] font-mono text-sm",autoFocus:!0}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsxs("span",{children:[dj(d)," words"]}),a.jsx("span",{children:""}),a.jsxs("span",{children:[d.length," characters"]}),h&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsx("span",{className:"text-orange-600 font-medium",children:"Unsaved changes"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(fe,{size:"sm",variant:"outline",onClick:j,children:[a.jsx(_i,{className:"w-4 h-4 mr-1"}),"Cancel"]}),a.jsxs(fe,{size:"sm",onClick:x,disabled:!h,className:$e("bg-green-600 hover:bg-green-700 text-white",!h&&"opacity-50 cursor-not-allowed"),children:[a.jsx(YA,{className:"w-4 h-4 mr-1"}),"Save"]})]})]})]}):a.jsx("div",{className:"prose prose-sm max-w-none",children:a.jsx("pre",{className:"whitespace-pre-wrap font-sans text-sm text-gray-700 bg-white p-3 rounded border",children:e.content})})})})})]})})}function oVe({prompt:e,compiledPrompt:t,onExecute:n,className:r,showMetadata:s=!0}){const[i,o]=w.useState("formatted");if(!e&&!t)return a.jsx(De,{className:$e("border-2 border-dashed",r),children:a.jsxs(et,{className:"flex flex-col items-center justify-center py-12",children:[a.jsx(zr,{className:"w-12 h-12 text-muted-foreground mb-4"}),a.jsx("p",{className:"text-muted-foreground text-center",children:"No prompt to preview"})]})});const c=t||(e?FTe({role_section:e.role_section,context_section:e.context_section,task_section:e.task_section,constraints_section:e.constraints_section,format_section:e.format_section,examples_section:e.examples_section}):""),l=dj(c),d=BX(c),u=c.length,h=()=>{navigator.clipboard.writeText(c),Ue.success("Prompt copied to clipboard")},A=()=>{n?n():Ue.info("Execution not configured")};return a.jsx(ot.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:r,children:a.jsxs(De,{className:"border-2",children:[a.jsxs(dt,{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-purple-100 text-purple-600",children:a.jsx(zr,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx(ft,{children:"Compiled Prompt Preview"}),a.jsx(Kt,{children:"Full prompt text ready for execution"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(fe,{size:"sm",variant:"outline",onClick:()=>o(i==="formatted"?"raw":"formatted"),children:i==="formatted"?a.jsxs(a.Fragment,{children:[a.jsx(qde,{className:"w-4 h-4 mr-2"}),"Raw"]}):a.jsxs(a.Fragment,{children:[a.jsx(In,{className:"w-4 h-4 mr-2"}),"Formatted"]})}),a.jsxs(fe,{size:"sm",variant:"outline",onClick:h,children:[a.jsx(Ii,{className:"w-4 h-4 mr-2"}),"Copy"]}),n&&a.jsxs(fe,{size:"sm",onClick:A,className:"bg-green-600 hover:bg-green-700 text-white",children:[a.jsx(Kd,{className:"w-4 h-4 mr-2"}),"Run Prompt"]})]})]}),s&&a.jsxs("div",{className:"flex items-center gap-4 mt-4 pt-4 border-t",children:[a.jsxs(_e,{variant:"secondary",className:"text-xs",children:[l," words"]}),a.jsxs(_e,{variant:"secondary",className:"text-xs",children:[u," characters"]}),a.jsxs(_e,{variant:"secondary",className:"text-xs",children:["~",d," min read"]}),(e==null?void 0:e.run_count)&&e.run_count>0&&a.jsxs(_e,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800",children:["Executed ",e.run_count,"x"]})]})]}),a.jsx(et,{children:a.jsx(ns,{className:"h-[500px] w-full rounded-md border bg-slate-50",children:a.jsx("div",{className:"p-4",children:i==="formatted"?a.jsx("div",{className:"prose prose-sm max-w-none",children:c.split(`

---

`).map((f,m)=>{const g=f.split(`
`),b=g[0],y=b.startsWith("# "),j=b.startsWith("## ");if(y||j){const x=b.replace(/^#+\s+/,""),C=g.slice(1).join(`
`);return a.jsxs("div",{className:"mb-6 pb-6 border-b last:border-b-0",children:[a.jsx("h3",{className:$e("font-semibold mb-3",y?"text-lg text-purple-700":"text-md text-blue-700"),children:x}),a.jsx("pre",{className:"whitespace-pre-wrap font-sans text-sm text-gray-700 bg-white p-3 rounded border",children:C.trim()})]},m)}return a.jsx("div",{className:"mb-6 pb-6 border-b last:border-b-0",children:a.jsx("pre",{className:"whitespace-pre-wrap font-sans text-sm text-gray-700 bg-white p-3 rounded border",children:f.trim()})},m)})}):a.jsx("pre",{className:"font-mono text-xs text-gray-700 whitespace-pre-wrap",children:c})})})})]})})}function cVe({promptId:e,onClose:t}){const n=Vi(),{currentPrompt:r,fetchPromptById:s,updatePrompt:i,updateSection:o,deletePrompt:c,duplicatePrompt:l,setCurrentPrompt:d}=Mw(),[u,h]=w.useState(!0),[A,f]=w.useState(!1),[m,g]=w.useState(!1),[b,y]=w.useState(!1),[j,x]=w.useState({title:"",description:"",framework_name:"",stage_name:"",tool_name:""}),[C,S]=w.useState(new Set(["role","context","task","constraints","format"]));w.useEffect(()=>{_()},[e]),w.useEffect(()=>{r&&x({title:r.title,description:r.description||"",framework_name:r.framework_name||"",stage_name:r.stage_name||"",tool_name:r.tool_name||""})},[r]);const _=async()=>{try{h(!0);const M=await s(e);M?d(M):(Ue.error("Prompt not found"),N())}catch(M){console.error("Error loading prompt:",M),Ue.error("Failed to load prompt")}finally{h(!1)}},N=()=>{d(null),t?t():n("/library")},L=M=>{S(U=>{const H=new Set(U);return H.has(M)?H.delete(M):H.add(M),H})},P=async(M,U)=>{try{await o(e,M,U)}catch(H){console.error("Error updating section:",H)}},F=async()=>{try{f(!0),await i(e,j),y(!1),Ue.success("Metadata updated")}catch(M){console.error("Error saving metadata:",M),Ue.error("Failed to save metadata")}finally{f(!1)}},I=async()=>{try{await c(e),Ue.success("Prompt deleted"),N()}catch(M){console.error("Error deleting prompt:",M)}},T=async()=>{try{const M=await l(e);Ue.success("Prompt duplicated"),n(`/library/${M}`)}catch(M){console.error("Error duplicating prompt:",M)}},Q=async()=>{if(r)try{await i(e,{is_template:!r.is_template}),Ue.success(r.is_template?"Removed from templates":"Added to templates")}catch(M){console.error("Error toggling template:",M)}};if(u)return a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading prompt..."})]})});if(!r)return null;const D=[{type:"role",data:r.role_section},{type:"context",data:r.context_section},{type:"task",data:r.task_section},{type:"constraints",data:r.constraints_section},{type:"format",data:r.format_section},...r.examples_section?[{type:"examples",data:r.examples_section}]:[]];return a.jsxs("div",{className:"h-full flex flex-col bg-background",children:[a.jsxs("div",{className:"border-b bg-card px-6 py-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(fe,{variant:"ghost",size:"sm",onClick:N,className:"gap-2",children:[a.jsx(yo,{className:"w-4 h-4"}),"Back to Library"]}),a.jsx(qd,{orientation:"vertical",className:"h-6"}),a.jsxs("div",{className:"flex flex-col gap-1",children:[b?a.jsx(ln,{value:j.title,onChange:M=>x({...j,title:M.target.value}),className:"font-semibold text-lg h-8 max-w-md",autoFocus:!0}):a.jsx("h1",{className:"font-semibold text-lg",children:r.title}),a.jsxs("div",{className:"flex items-center gap-2",children:[r.tool_name&&a.jsx(_e,{variant:"secondary",className:"text-xs",children:r.tool_name}),r.is_template&&a.jsx(_e,{variant:"secondary",className:"text-xs bg-purple-100 text-purple-800",children:"Template"}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:["Version ",r.version]})]})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:b?a.jsxs(a.Fragment,{children:[a.jsx(fe,{variant:"outline",size:"sm",onClick:()=>y(!1),children:"Cancel"}),a.jsxs(fe,{size:"sm",onClick:F,disabled:A,children:[a.jsx(Od,{className:"w-4 h-4 mr-2"}),"Save"]})]}):a.jsxs(a.Fragment,{children:[a.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>y(!0),children:[a.jsx(us,{className:"w-4 h-4 mr-2"}),"Edit Info"]}),a.jsxs(xv,{children:[a.jsx(wv,{asChild:!0,children:a.jsx(fe,{variant:"outline",size:"sm",children:a.jsx(yx,{className:"w-4 h-4"})})}),a.jsxs(Wp,{align:"end",className:"w-48",children:[a.jsxs(Or,{onClick:T,children:[a.jsx(Ii,{className:"w-4 h-4 mr-2"}),"Duplicate"]}),a.jsxs(Or,{onClick:Q,children:[a.jsx(In,{className:"w-4 h-4 mr-2"}),r.is_template?"Remove from Templates":"Save as Template"]}),a.jsx(Gp,{}),a.jsxs(Or,{onClick:()=>g(!0),className:"text-red-600",children:[a.jsx(Pc,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]})})]}),b&&a.jsx(ot.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"mt-4 pt-4 border-t space-y-3",children:a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{children:"Description"}),a.jsx(Qr,{value:j.description,onChange:M=>x({...j,description:M.target.value}),placeholder:"Brief description of this prompt...",className:"h-20"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx(at,{children:"Framework"}),a.jsx(ln,{value:j.framework_name,onChange:M=>x({...j,framework_name:M.target.value}),placeholder:"e.g., Design Thinking"})]}),a.jsxs("div",{children:[a.jsx(at,{children:"Stage"}),a.jsx(ln,{value:j.stage_name,onChange:M=>x({...j,stage_name:M.target.value}),placeholder:"e.g., Empathize"})]})]}),a.jsxs("div",{children:[a.jsx(at,{children:"Tool"}),a.jsx(ln,{value:j.tool_name,onChange:M=>x({...j,tool_name:M.target.value}),placeholder:"e.g., User Personas"})]})]})]})})]}),a.jsx("div",{className:"flex-1 overflow-hidden",children:a.jsxs("div",{className:"h-full grid grid-cols-2 gap-6 p-6",children:[a.jsxs("div",{className:"space-y-4 overflow-y-auto pr-2",children:[a.jsx("h2",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Prompt Sections"}),D.map(({type:M,data:U})=>a.jsx(aVe,{section:{...U,isExpanded:C.has(M)},onUpdate:H=>P(M,H),onToggleExpand:()=>L(M)},M))]}),a.jsxs("div",{className:"overflow-y-auto pl-2",children:[a.jsx("h2",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide mb-4",children:"Compiled Preview"}),a.jsx(oVe,{prompt:r,showMetadata:!0})]})]})}),a.jsx(rVe,{open:m,onOpenChange:g,children:a.jsxs(Bte,{children:[a.jsxs(Ete,{children:[a.jsx(Ite,{children:"Delete Prompt?"}),a.jsxs(Pte,{children:['Are you sure you want to delete "',r.title,'"? This action cannot be undone.']})]}),a.jsxs(_te,{children:[a.jsx(Fte,{children:"Cancel"}),a.jsx(Tte,{onClick:I,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})}function a8(){const e=Vi(),{promptId:t}=vw(),{projects:n,currentProject:r}=js(),{prompts:s,loading:i,fetchLibraryPrompts:o}=Mw(),[c,l]=w.useState(!1),[d,u]=w.useState(""),[h,A]=w.useState("all"),[f,m]=w.useState("updated_at_desc"),[g,b]=w.useState("grid");w.useEffect(()=>{y()},[]),w.useEffect(()=>{b(t?"editor":"grid")},[t]);const y=()=>{o({filters:{searchQuery:d||void 0,tool:h!=="all"?h:void 0,projectId:r==null?void 0:r.id},sortBy:f})};w.useEffect(()=>{const S=setTimeout(()=>{y()},300);return()=>clearTimeout(S)},[d,h,f]);const j=Array.from(new Set(s.map(S=>S.tool_name).filter(Boolean))).sort(),x=S=>{e(`/library/${S.id}`)},C=()=>{e("/library")};return g==="editor"&&t?a.jsx(cVe,{promptId:t,onClose:C}):a.jsxs("div",{className:"h-full flex flex-col bg-background",children:[a.jsx(Lr,{}),a.jsx("div",{className:"flex-1 overflow-hidden",children:a.jsxs("div",{className:"h-full flex flex-col p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Prompt Library"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage and edit your structured AI prompts"})]}),a.jsxs(fe,{onClick:()=>l(!0),size:"lg",children:[a.jsx(ha,{className:"w-5 h-5 mr-2"}),"New Prompt"]})]}),a.jsx(De,{className:"mb-6",children:a.jsx(et,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(mw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),a.jsx(ln,{placeholder:"Search prompts...",value:d,onChange:S=>u(S.target.value),className:"pl-10"})]}),a.jsxs(Vn,{value:h,onValueChange:A,children:[a.jsxs(Qn,{className:"w-48",children:[a.jsx(cue,{className:"w-4 h-4 mr-2"}),a.jsx(qn,{placeholder:"All Tools"})]}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"all",children:"All Tools"}),j.map(S=>a.jsx(qe,{value:S,children:S},S))]})]}),a.jsxs(Vn,{value:f,onValueChange:S=>m(S),children:[a.jsxs(Qn,{className:"w-48",children:[a.jsx(ude,{className:"w-4 h-4 mr-2"}),a.jsx(qn,{})]}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"updated_at_desc",children:"Recently Updated"}),a.jsx(qe,{value:"created_at_desc",children:"Recently Created"}),a.jsx(qe,{value:"title_asc",children:"Title (A-Z)"}),a.jsx(qe,{value:"run_count_desc",children:"Most Used"})]})]})]})})}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:i?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading prompts..."})]})}):s.length===0?a.jsx(De,{className:"border-2 border-dashed",children:a.jsxs(et,{className:"flex flex-col items-center justify-center py-16",children:[a.jsx("div",{className:"p-4 rounded-full bg-primary/10 mb-4",children:a.jsx(gr,{className:"w-8 h-8 text-primary"})}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No prompts yet"}),a.jsx("p",{className:"text-muted-foreground text-center mb-4 max-w-md",children:"Create your first structured prompt with card-based editing for better organization and reusability."}),a.jsxs(fe,{onClick:()=>l(!0),children:[a.jsx(ha,{className:"w-4 h-4 mr-2"}),"Create First Prompt"]})]})}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 pb-6",children:a.jsx(Pr,{children:s.map((S,_)=>a.jsx(lVe,{prompt:S,index:_,onClick:()=>x(S)},S.id))})})})]})}),a.jsx(zze,{open:c,onOpenChange:l,projectId:r==null?void 0:r.id})]})}function lVe({prompt:e,index:t,onClick:n}){const r=BX(e.compiled_prompt);return a.jsx(ot.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},transition:{delay:t*.05},children:a.jsxs(De,{className:"group cursor-pointer hover:shadow-lg transition-all duration-200 hover:border-primary/50",onClick:n,children:[a.jsxs(dt,{children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx(ft,{className:"text-lg line-clamp-2 group-hover:text-primary transition-colors",children:e.title}),e.description&&a.jsx(Kt,{className:"mt-2 line-clamp-2",children:e.description})]}),e.is_template&&a.jsx(_e,{variant:"secondary",className:"bg-purple-100 text-purple-800 shrink-0",children:"Template"})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-3",children:[e.framework_name&&a.jsxs(_e,{variant:"outline",className:"text-xs bg-blue-50 border-blue-200 text-blue-700",children:[a.jsx(j7,{className:"w-3 h-3 mr-1"}),"From Canvas: ",e.framework_name]}),e.tool_name&&a.jsxs(_e,{variant:"outline",className:"text-xs",children:[a.jsx(In,{className:"w-3 h-3 mr-1"}),e.tool_name]}),e.run_count>0&&a.jsxs(_e,{variant:"outline",className:"text-xs",children:[a.jsx(Kd,{className:"w-3 h-3 mr-1"}),e.run_count,"x"]}),a.jsxs(_e,{variant:"outline",className:"text-xs",children:[a.jsx(zr,{className:"w-3 h-3 mr-1"}),r," min"]})]})]}),a.jsx(et,{children:a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"flex flex-wrap gap-1",children:[{type:"role",color:"bg-purple-500"},{type:"context",color:"bg-blue-500"},{type:"task",color:"bg-green-500"},{type:"constraints",color:"bg-orange-500"},{type:"format",color:"bg-red-500"},...e.examples_section?[{type:"examples",color:"bg-yellow-500"}]:[]].map(({type:s,color:i})=>a.jsx("div",{className:$e("h-1.5 flex-1 rounded-full",i),title:`${s} section`},s))}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(kd,{className:"w-3 h-3"}),a.jsxs("span",{children:["Updated ",new Date(e.updated_at).toLocaleDateString()]})]}),a.jsxs("span",{children:["v",e.version]})]})]})})]})})}function dVe(){const e=Vi(),{toast:t}=ii(),{user:n,signUp:r,signIn:s,signInWithGoogle:i,loading:o}=Dc(),[c]=qv(),[l,d]=w.useState(!1),u=c.get("invitation"),h=c.get("email"),A=c.get("mode"),[f,m]=w.useState({email:h||"",password:""}),[g,b]=w.useState({email:h||"",password:"",displayName:""});w.useEffect(()=>{n&&!o&&e("/projects")},[n,o,e]);const y=async C=>{C.preventDefault(),d(!0);try{const{error:S}=await s(f.email,f.password);S?t({title:"Sign in failed",description:S.message,variant:"destructive"}):(t({title:"Welcome back!",description:u?"You have been signed in successfully. Check your pending invitations.":"You have been signed in successfully."}),e("/projects"))}catch{t({title:"An error occurred",description:"Please try again.",variant:"destructive"})}finally{d(!1)}},j=async C=>{C.preventDefault(),d(!0);try{const{error:S}=await r(g.email,g.password,g.displayName);S?t({title:"Sign up failed",description:S.message,variant:"destructive"}):(t({title:"Account created!",description:u?"Account created! Please check your email to verify, then you can accept your project invitation.":"Please check your email to verify your account."}),u&&e("/projects"))}catch{t({title:"An error occurred",description:"Please try again.",variant:"destructive"})}finally{d(!1)}},x=async()=>{d(!0);try{const{error:C}=await i();C&&t({title:"Google sign in failed",description:C.message,variant:"destructive"})}catch{t({title:"An error occurred",description:"Please try again.",variant:"destructive"})}finally{d(!1)}};return o?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(Cr,{className:"h-8 w-8 animate-spin"})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-white p-4",children:a.jsxs(De,{className:"w-full max-w-md",children:[a.jsxs(dt,{className:"text-center",children:[a.jsx(ft,{className:"text-2xl",children:"FramePromptly"}),a.jsx(Kt,{children:"Sign in to your account or create a new one"})]}),a.jsxs(et,{children:[u&&a.jsxs(za,{className:"mb-4",children:[a.jsx(qa,{className:"h-4 w-4"}),a.jsxs(Va,{children:["You've been invited to join a project!",h&&a.jsxs("span",{className:"block text-sm mt-1 opacity-75",children:[a.jsx(Rv,{className:"w-3 h-3 inline mr-1"}),"Invited: ",h]})]})]}),a.jsxs(Ka,{defaultValue:A==="signin"?"signin":"signup",className:"w-full",children:[a.jsxs(ga,{className:"grid w-full grid-cols-2",children:[a.jsx(xn,{value:"signin",children:"Sign In"}),a.jsx(xn,{value:"signup",children:"Sign Up"})]}),a.jsx(jn,{value:"signin",className:"space-y-4",children:a.jsxs("form",{onSubmit:y,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{htmlFor:"signin-email",children:"Email"}),a.jsx(ln,{id:"signin-email",type:"email",placeholder:"Enter your email",value:f.email,onChange:C=>m({...f,email:C.target.value}),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{htmlFor:"signin-password",children:"Password"}),a.jsx(ln,{id:"signin-password",type:"password",placeholder:"Enter your password",value:f.password,onChange:C=>m({...f,password:C.target.value}),required:!0})]}),a.jsx(fe,{type:"submit",className:"w-full",disabled:l,children:l?a.jsxs(a.Fragment,{children:[a.jsx(Cr,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})}),a.jsx(jn,{value:"signup",className:"space-y-4",children:a.jsxs("form",{onSubmit:j,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{htmlFor:"signup-name",children:"Display Name"}),a.jsx(ln,{id:"signup-name",type:"text",placeholder:"Enter your name",value:g.displayName,onChange:C=>b({...g,displayName:C.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{htmlFor:"signup-email",children:"Email"}),a.jsx(ln,{id:"signup-email",type:"email",placeholder:"Enter your email",value:g.email,onChange:C=>b({...g,email:C.target.value}),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{htmlFor:"signup-password",children:"Password"}),a.jsx(ln,{id:"signup-password",type:"password",placeholder:"Create a password",value:g.password,onChange:C=>b({...g,password:C.target.value}),required:!0})]}),a.jsx(fe,{type:"submit",className:"w-full",disabled:l,children:l?a.jsxs(a.Fragment,{children:[a.jsx(Cr,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating account..."]}):"Sign Up"})]})})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("span",{className:"w-full border-t"})}),a.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:a.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),a.jsx(fe,{variant:"outline",className:"w-full mt-4",onClick:x,disabled:l,children:l?a.jsx(Cr,{className:"mr-2 h-4 w-4 animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[a.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),a.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]})})]})]})]})})}var Dte=(e=>(e.PAGE_VIEW="page_view",e.PROJECT_CREATE="project_create",e.PROJECT_OPEN="project_open",e.WORKFLOW_CREATE="workflow_create",e.FRAMEWORK_SELECT="framework_select",e.STAGE_ADD="stage_add",e.TOOL_ADD="tool_add",e.AI_PROMPT_GENERATE="ai_prompt_generate",e.AI_PROMPT_EXECUTE="ai_prompt_execute",e.CONVERSATION_START="conversation_start",e.KNOWLEDGE_ADD="knowledge_add",e.EXPORT_DATA="export_data",e.SEARCH="search",e.ERROR_OCCURRED="error_occurred",e.FEATURE_USED="feature_used",e))(Dte||{}),Ute=(e=>(e.NAVIGATION="navigation",e.WORKFLOW="workflow",e.AI_INTERACTION="ai_interaction",e.PROJECT_MANAGEMENT="project_management",e.KNOWLEDGE_MANAGEMENT="knowledge_management",e.SYSTEM="system",e.ERROR="error",e))(Ute||{});class uVe{constructor(){Je(this,"currentSession",null);Je(this,"actionBuffer",[]);Je(this,"flushInterval",null);Je(this,"sessionTimeout",null);Je(this,"pageStartTime",new Date);Je(this,"listeners",new Map);this.initializeSession(),this.setupPeriodicFlush(),this.setupPageLifecycleHandlers()}initializeSession(){const t=this.generateSessionId(),n=this.getCurrentUserId();n&&(this.currentSession={id:t,userId:n,startTime:new Date,pageViews:0,actionsCount:0,deviceInfo:{userAgent:navigator.userAgent,screenResolution:`${screen.width}x${screen.height}`,browserName:this.getBrowserName(),osName:this.getOSName()},lastActivity:new Date,isActive:!0},this.trackAction("page_view","navigation",{page:window.location.pathname,referrer:document.referrer,sessionStart:!0}))}trackAction(t,n,r={},s){if(!this.currentSession)return;const i={id:this.generateActionId(),userId:this.currentSession.userId,sessionId:this.currentSession.id,timestamp:new Date,action:t,category:n,data:{...r,url:window.location.href,pathname:window.location.pathname},page:window.location.pathname,userAgent:navigator.userAgent,duration:s};this.actionBuffer.push(i),this.currentSession.actionsCount++,this.currentSession.lastActivity=new Date,this.emit("action",i),this.actionBuffer.length>=10&&this.flushActions()}trackPageView(t){var s;const n=t||window.location.pathname,r=Date.now()-this.pageStartTime.getTime();r>1e3&&((s=this.currentSession)==null?void 0:s.pageViews)>0&&this.trackAction("page_view","navigation",{page:n,duration:r,previousPage:!0},r),this.trackAction("page_view","navigation",{page:n,referrer:document.referrer,timestamp:new Date().toISOString()}),this.currentSession&&this.currentSession.pageViews++,this.pageStartTime=new Date}trackWorkflowCreate(t,n){this.trackAction("workflow_create","workflow",{frameworkId:t,projectId:n,timestamp:new Date().toISOString()})}trackAIPromptGenerate(t,n,r){this.trackAction("ai_prompt_generate","ai_interaction",{toolId:t,frameworkId:n,promptLength:r,timestamp:new Date().toISOString()})}trackAIPromptExecute(t,n,r){this.trackAction("ai_prompt_execute","ai_interaction",{promptId:t,responseTime:n,success:r,timestamp:new Date().toISOString()},n)}trackProjectCreate(t){this.trackAction("project_create","project_management",{projectName:t,timestamp:new Date().toISOString()})}trackKnowledgeAdd(t,n){this.trackAction("knowledge_add","knowledge_management",{documentType:t,size:n,timestamp:new Date().toISOString()})}trackError(t,n,r){this.trackAction("error_occurred","error",{error:t,context:n,stack:r,timestamp:new Date().toISOString()})}trackFeatureUsage(t,n){this.trackAction("feature_used","system",{featureName:t,context:n,timestamp:new Date().toISOString()})}async getRealTimeMetrics(){try{await this.flushActions();const t=new Date,n=new Date(t.getTime()-24*60*60*1e3),{data:r,error:s}=await rt.from("user_actions").select("*").gte("timestamp",n.toISOString()).order("timestamp",{ascending:!1});return s?(console.error("Error fetching user actions:",s),this.getDefaultMetrics()):this.calculateMetrics(r||[])}catch(t){return console.error("Error getting real-time metrics:",t),this.getDefaultMetrics()}}calculateMetrics(t){const n=new Set(t.map(C=>C.session_id)),r=new Set(t.map(C=>C.user_id)),s=t.filter(C=>C.action==="page_view").length,i=t.filter(C=>C.action==="workflow_create").length,o=t.filter(C=>C.action==="ai_prompt_generate").length,c=t.filter(C=>C.action==="ai_prompt_execute").length,l=t.filter(C=>C.action==="project_create").length,d=t.filter(C=>C.action==="knowledge_add").length,u=t.filter(C=>C.action==="error_occurred").length,h={};t.filter(C=>C.action==="page_view").forEach(C=>{const S=C.data.page||C.page||"unknown";h[S]||(h[S]={views:0,durations:[]}),h[S].views++,C.duration&&h[S].durations.push(C.duration)});const A=Object.entries(h).map(([C,S])=>({page:C,views:S.views,avgDuration:S.durations.length>0?S.durations.reduce((_,N)=>_+N,0)/S.durations.length:0})).sort((C,S)=>S.views-C.views).slice(0,10),f={};t.filter(C=>C.action==="framework_select"||C.action==="workflow_create").forEach(C=>{const S=C.data.frameworkId||"unknown";f[S]=(f[S]||0)+1});const m=Object.entries(f).map(([C,S])=>({framework:C,usage:S})).sort((C,S)=>S.usage-C.usage).slice(0,10),g={};t.filter(C=>C.action==="tool_add"||C.action==="ai_prompt_generate").forEach(C=>{const S=C.data.toolId||"unknown";g[S]=(g[S]||0)+1});const b=Object.entries(g).map(([C,S])=>({tool:C,usage:S})).sort((C,S)=>S.usage-C.usage).slice(0,10),y={};t.forEach(C=>{const S=new Date(C.timestamp).getHours();y[S]=(y[S]||0)+1});const j=Array.from({length:24},(C,S)=>({hour:S,actions:y[S]||0})),x=[];return{activeUsers:r.size,totalSessions:n.size,avgSessionDuration:x.length>0?x.reduce((C,S)=>C+S,0)/x.length:0,pageViews:s,workflowsCreated:i,aiPromptsGenerated:o,aiPromptsExecuted:c,projectsCreated:l,knowledgeItemsAdded:d,errorRate:t.length>0?u/t.length*100:0,topPages:A,topFrameworks:m,topTools:b,hourlyActivity:j,userFlow:[]}}async flushActions(){if(this.actionBuffer.length!==0)try{const t=[...this.actionBuffer];this.actionBuffer=[];const n=t.map(s=>({id:s.id,user_id:s.userId,session_id:s.sessionId,timestamp:s.timestamp.toISOString(),action:s.action,category:s.category,data:s.data,page:s.page,user_agent:s.userAgent,duration:s.duration})),{error:r}=await rt.from("user_actions").insert(n);r&&(console.error("Error saving user actions:",r),this.actionBuffer.unshift(...t))}catch(t){console.error("Error flushing actions:",t)}}setupPeriodicFlush(){this.flushInterval=setInterval(()=>{this.flushActions()},3e4)}setupPageLifecycleHandlers(){window.addEventListener("beforeunload",()=>{this.endSession(),this.flushActions()}),document.addEventListener("visibilitychange",()=>{document.hidden?this.trackAction("page_view","navigation",{visibility:"hidden",timestamp:new Date().toISOString()}):this.trackAction("page_view","navigation",{visibility:"visible",timestamp:new Date().toISOString()})})}endSession(){this.currentSession&&(this.currentSession.endTime=new Date,this.currentSession.duration=this.currentSession.endTime.getTime()-this.currentSession.startTime.getTime(),this.currentSession.isActive=!1,this.trackAction("page_view","navigation",{sessionEnd:!0,duration:this.currentSession.duration,actionsCount:this.currentSession.actionsCount,pageViews:this.currentSession.pageViews}))}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateActionId(){return`action_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}getCurrentUserId(){return localStorage.getItem("supabase.auth.token")?"current_user":null}getBrowserName(){const t=navigator.userAgent;return t.includes("Chrome")?"Chrome":t.includes("Firefox")?"Firefox":t.includes("Safari")?"Safari":t.includes("Edge")?"Edge":"Unknown"}getOSName(){const t=navigator.userAgent;return t.includes("Windows")?"Windows":t.includes("Mac")?"macOS":t.includes("Linux")?"Linux":t.includes("Android")?"Android":t.includes("iOS")?"iOS":"Unknown"}getDefaultMetrics(){return{activeUsers:0,totalSessions:0,avgSessionDuration:0,pageViews:0,workflowsCreated:0,aiPromptsGenerated:0,aiPromptsExecuted:0,projectsCreated:0,knowledgeItemsAdded:0,errorRate:0,topPages:[],topFrameworks:[],topTools:[],hourlyActivity:Array.from({length:24},(t,n)=>({hour:n,actions:0})),userFlow:[]}}on(t,n){this.listeners.has(t)||this.listeners.set(t,[]),this.listeners.get(t).push(n)}emit(t,n){const r=this.listeners.get(t);r&&r.forEach(s=>{try{s(n)}catch(i){console.error("Event callback error:",i)}})}destroy(){this.flushInterval&&clearInterval(this.flushInterval),this.sessionTimeout&&clearTimeout(this.sessionTimeout),this.endSession(),this.flushActions()}}const Mo=new uVe,hVe=(e=!1,t=3e4)=>{const{user:n}=Dc(),r=ah(),[s,i]=w.useState(null),[o,c]=w.useState(!1),[l,d]=w.useState(null),u=w.useRef(null),h=w.useRef("");w.useEffect(()=>{const P=r.pathname,F=h.current;P!==F&&F!==""&&Mo.trackPageView(P),h.current=P},[r.pathname]),w.useEffect(()=>{Mo.trackPageView(r.pathname)},[]),w.useEffect(()=>(e?f(t):m(),()=>{m()}),[e,t]);const A=w.useCallback(async()=>{c(!0);try{const P=await Mo.getRealTimeMetrics();i(P),d(new Date)}catch(P){console.error("Failed to refresh metrics:",P),Mo.trackError("Failed to refresh metrics","useRealTimeAnalytics",P instanceof Error?P.stack:void 0)}finally{c(!1)}},[]),f=w.useCallback((P=3e4)=>{m(),A(),u.current=setInterval(A,P)},[A]),m=w.useCallback(()=>{u.current&&(clearInterval(u.current),u.current=null)},[]),g=w.useCallback((P,F,I={},T)=>{try{Mo.trackAction(P,F,{...I,userId:(n==null?void 0:n.id)||null,userEmail:(n==null?void 0:n.email)||null},T)}catch(Q){console.error("Failed to track action:",Q)}},[n]),b=w.useCallback(P=>{try{Mo.trackPageView(P)}catch(F){console.error("Failed to track page view:",F)}},[]),y=w.useCallback((P,F)=>{try{Mo.trackWorkflowCreate(P,F)}catch(I){console.error("Failed to track workflow creation:",I)}},[]),j=w.useCallback((P,F,I)=>{try{Mo.trackAIPromptGenerate(P,F,I)}catch(T){console.error("Failed to track AI prompt generation:",T)}},[]),x=w.useCallback((P,F,I)=>{try{Mo.trackAIPromptExecute(P,F,I)}catch(T){console.error("Failed to track AI prompt execution:",T)}},[]),C=w.useCallback(P=>{try{Mo.trackProjectCreate(P)}catch(F){console.error("Failed to track project creation:",F)}},[]),S=w.useCallback((P,F)=>{try{Mo.trackKnowledgeAdd(P,F)}catch(I){console.error("Failed to track knowledge addition:",I)}},[]),_=w.useCallback((P,F,I)=>{try{Mo.trackError(P,F,I)}catch(T){console.error("Failed to track error:",T)}},[]),N=w.useCallback((P,F)=>{try{Mo.trackFeatureUsage(P,F)}catch(I){console.error("Failed to track feature usage:",I)}},[]),L=w.useCallback(()=>{if("performance"in window&&"getEntriesByType"in performance){const P=performance.getEntriesByType("navigation");if(P.length>0){const F=P[0];g(Dte.PAGE_VIEW,Ute.SYSTEM,{performanceMetrics:{domContentLoaded:F.domContentLoadedEventEnd-F.domContentLoadedEventStart,loadComplete:F.loadEventEnd-F.loadEventStart,firstPaint:F.responseEnd-F.requestStart,transferSize:F.transferSize,page:r.pathname}})}}},[g,r.pathname]);return w.useEffect(()=>{const P=setTimeout(L,1e3);return()=>clearTimeout(P)},[L]),w.useEffect(()=>{const P=I=>{var T;_(I.message,"Global Error Handler",(T=I.error)==null?void 0:T.stack)},F=I=>{var T,Q;_(((T=I.reason)==null?void 0:T.message)||"Unhandled Promise Rejection","Promise Rejection Handler",(Q=I.reason)==null?void 0:Q.stack)};return window.addEventListener("error",P),window.addEventListener("unhandledrejection",F),()=>{window.removeEventListener("error",P),window.removeEventListener("unhandledrejection",F)}},[_]),{metrics:s,isLoading:o,lastUpdated:l,trackAction:g,trackPageView:b,trackWorkflowCreate:y,trackAIPromptGenerate:j,trackAIPromptExecute:x,trackProjectCreate:C,trackKnowledgeAdd:S,trackError:_,trackFeatureUsage:N,refreshMetrics:A,enableAutoRefresh:f,disableAutoRefresh:m}};var C0=(e=>(e.VALIDATION="validation",e.AUTHENTICATION="authentication",e.AUTHORIZATION="authorization",e.NETWORK="network",e.DATABASE="database",e.CONTEXT_PROCESSING="context_processing",e.TEMPLATE_PROCESSING="template_processing",e.VARIABLE_PROCESSING="variable_processing",e.WORKFLOW_CONTINUITY="workflow_continuity",e.PROMPT_GENERATION="prompt_generation",e.KNOWLEDGE_BASE="knowledge_base",e.ACCESSIBILITY="accessibility",e.SYSTEM="system",e.EXTERNAL_SERVICE="external_service",e))(C0||{}),ol=(e=>(e.LOW="low",e.MEDIUM="medium",e.HIGH="high",e.CRITICAL="critical",e))(ol||{});class vS extends Error{constructor(n,r,s){super(n);Je(this,"metadata");Je(this,"originalError");Je(this,"stackTrace");this.name=this.constructor.name,this.metadata=r,this.originalError=s,this.stackTrace=this.stack||"",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}toJSON(){var n;return{name:this.name,message:this.message,metadata:this.metadata,stackTrace:this.stackTrace,originalError:(n=this.originalError)==null?void 0:n.message}}getUserFriendlyMessage(){return this.metadata.userFriendly?this.message:this.getGenericMessage()}}class AVe extends vS{constructor(t,n,r,s){super(t,{category:"validation",severity:"medium",code:"VALIDATION_FAILED",context:n,recoverable:!0,retryable:!1,userFriendly:!0,telemetryData:{fieldName:r}},s)}getGenericMessage(){return"Please check your input and try again."}}class o8 extends AVe{constructor(t,n,r,s){super(`Template '${t}': ${n}`,r,t,s),this.metadata.code="TEMPLATE_VALIDATION_FAILED"}}class fVe extends vS{constructor(t,n,r,s){super(t,{category:"template_processing",severity:"high",code:"TEMPLATE_PROCESSING_FAILED",context:n,recoverable:!0,retryable:!0,userFriendly:!1,telemetryData:{templateId:r}},s)}getGenericMessage(){return"We encountered an issue processing the template. Please try again."}}class c8 extends vS{constructor(t,n,r,s){super(t,{category:"system",severity:"critical",code:"SYSTEM_ERROR",context:n,recoverable:!1,retryable:!0,userFriendly:!1,telemetryData:{component:r}},s)}getGenericMessage(){return"A system error occurred. Our team has been notified. Please try again later."}}const gd=e=>e instanceof vS,pVe=e=>gd(e)&&e.metadata.retryable,mVe=e=>gd(e)&&e.metadata.severity==="critical";class gVe{constructor(t={}){Je(this,"config");Je(this,"errorLog",new Map);Je(this,"recoveryStrategies",new Map);Je(this,"telemetryBuffer",[]);Je(this,"telemetryFlushInterval");this.config={enableLogging:!0,enableTelemetry:!0,enableUserNotifications:!0,enableRetryMechanism:!0,maxRetryAttempts:3,retryDelayMs:1e3,logLevel:"error",...t},this.initializeRecoveryStrategies(),this.initializeTelemetry()}async handleError(t,n={},r={}){const s={timestamp:new Date,...n},i=this.normalizeError(t,s),o=this.createLogEntry(i,s);try{this.config.enableLogging&&this.logError(i,s),this.errorLog.set(o.id,o),this.config.enableTelemetry&&!r.skipTelemetry&&this.sendTelemetryAsync(o);let c=!1,l;if(!r.skipRecovery&&i.metadata.recoverable){const u=await this.attemptRecovery(i,s);c=u.success,l=u.value,o.recovered=c}let d;return this.config.enableUserNotifications&&!r.silent&&(d=await this.notifyUser(i,c),o.userNotified=!0),o.handled=!0,{handled:!0,recovered:c,recoveredValue:l,userMessage:d}}catch(c){return console.error("Error handler failed:",c),r.silent||Ue.error("An unexpected error occurred. Please try again."),{handled:!1,recovered:!1}}}async executeWithErrorHandling(t,n,r={}){const s={maxAttempts:this.config.maxRetryAttempts,delayMs:this.config.retryDelayMs,backoffMultiplier:2,shouldRetry:(c,l)=>pVe(c)&&l<(s.maxAttempts||3),...r};let i,o=0;for(;o<s.maxAttempts;)try{return o++,await t()}catch(c){if(i=c,await this.handleError(i,{...n,additionalData:{attemptCount:o,maxAttempts:s.maxAttempts}}),o<s.maxAttempts&&s.shouldRetry(i,o)){const l=s.delayMs*Math.pow(s.backoffMultiplier,o-1);await this.delay(l);continue}break}throw i}registerRecoveryStrategy(t){this.recoveryStrategies.set(t.category,t)}getErrorStatistics(){const t=Array.from(this.errorLog.values()),n=t.reduce((o,c)=>{if(gd(c.error)){const l=c.error.metadata.category;o[l]=(o[l]||0)+1}return o},{}),r=t.reduce((o,c)=>{if(gd(c.error)){const l=c.error.metadata.severity;o[l]=(o[l]||0)+1}return o},{}),s=t.filter(o=>o.recovered).length,i=t.filter(o=>gd(o.error)&&o.error.metadata.severity===ol.CRITICAL).length;return{totalErrors:t.length,errorsByCategory:n,errorsBySeverity:r,recoveryRate:t.length>0?s/t.length:0,criticalErrors:i}}clearErrorLog(){this.errorLog.clear(),this.telemetryBuffer=[]}getRecentErrors(t=50){return Array.from(this.errorLog.values()).sort((n,r)=>r.timestamp.getTime()-n.timestamp.getTime()).slice(0,t)}normalizeError(t,n){if(gd(t))return t;if(!t)return new c8("Unknown error occurred",n,"unknown",new Error("Null or undefined error"));const r=t.message||t.toString()||"Unknown error occurred";return new c8(r,n,"unknown",t)}createLogEntry(t,n){return{id:this.generateErrorId(),timestamp:new Date,error:t,context:n,handled:!1,recovered:!1,retryAttempts:0,telemetrySent:!1,userNotified:!1}}generateErrorId(){return`error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}logError(t,n){var c;if((c=n.additionalData)==null?void 0:c.isGenericScriptError)return;const s=this.getLogLevelForSeverity(t.metadata.severity),i=`[${t.metadata.category}:${t.metadata.code}] ${t.message}`,o={category:t.metadata.category,severity:t.metadata.severity,code:t.metadata.code,context:n,stack:t.stackTrace};switch(s){case"error":console.error(i,o);break;case"warn":console.warn(i,o);break;case"info":console.info(i,o);break;case"debug":console.debug(i,o);break}}getLogLevelForSeverity(t){switch(t){case ol.CRITICAL:return"error";case ol.HIGH:return"error";case ol.MEDIUM:return"warn";case ol.LOW:return"info";default:return"error"}}async sendTelemetryAsync(t){if(this.config.enableTelemetry)try{this.telemetryBuffer.push(t),t.telemetrySent=!0,gd(t.error)&&mVe(t.error)&&await this.flushTelemetry()}catch(n){console.error("Failed to send telemetry:",n)}}async flushTelemetry(){if(!(!this.config.telemetryEndpoint||this.telemetryBuffer.length===0))try{const t=this.telemetryBuffer.map(n=>({id:n.id,timestamp:n.timestamp.toISOString(),error:{name:n.error.name,message:n.error.message,category:gd(n.error)?n.error.metadata.category:"unknown",severity:gd(n.error)?n.error.metadata.severity:ol.MEDIUM,code:gd(n.error)?n.error.metadata.code:"UNKNOWN_ERROR"},context:n.context,handled:n.handled,recovered:n.recovered}));await fetch(this.config.telemetryEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({errors:t,timestamp:new Date().toISOString()})}),this.telemetryBuffer=[]}catch(t){console.error("Failed to flush telemetry:",t)}}async attemptRecovery(t,n){const r=this.recoveryStrategies.get(t.metadata.category);if(!r)return{success:!1};try{return{success:!0,value:await r.handler(t,n)}}catch(s){if(console.warn("Primary recovery failed, attempting fallback:",s),r.fallback)try{return{success:!0,value:await r.fallback(t,n)}}catch(i){console.error("Fallback recovery failed:",i)}return{success:!1}}}async notifyUser(t,n){const r=n?"Issue resolved automatically":t.getUserFriendlyMessage();switch(t.metadata.severity){case ol.CRITICAL:Ue.error(r,{duration:1e4,action:{label:"Report Issue",onClick:()=>this.reportIssue(t)}});break;case ol.HIGH:Ue.error(r,{duration:5e3});break;case ol.MEDIUM:Ue.warning(r,{duration:3e3});break;case ol.LOW:Ue.info(r,{duration:2e3});break}return r}reportIssue(t){console.log("Issue reporting for error:",t.metadata.code)}delay(t){return new Promise(n=>setTimeout(n,t))}initializeRecoveryStrategies(){this.registerRecoveryStrategy({category:C0.CONTEXT_PROCESSING,handler:async(t,n)=>(console.log("Attempting context processing recovery"),{fallbackContext:"Basic context without advanced processing"}),fallback:async(t,n)=>({fallbackContext:"Minimal context"})}),this.registerRecoveryStrategy({category:C0.TEMPLATE_PROCESSING,handler:async(t,n)=>(console.log("Attempting template processing recovery"),{fallbackTemplate:"Generate a basic prompt for the selected UX tool."})}),this.registerRecoveryStrategy({category:C0.DATABASE,handler:async(t,n)=>(console.log("Attempting database recovery"),{cached:!0,data:null})}),this.registerRecoveryStrategy({category:C0.NETWORK,handler:async(t,n)=>(console.log("Attempting network recovery"),{offline:!0,cached:!0})})}initializeTelemetry(){this.config.enableTelemetry&&(this.telemetryFlushInterval=setInterval(()=>{this.flushTelemetry()},3e4),typeof window<"u"&&window.addEventListener("beforeunload",()=>{this.flushTelemetry()}))}destroy(){this.telemetryFlushInterval&&clearInterval(this.telemetryFlushInterval)}}const cs=new gVe({enableLogging:!1,enableTelemetry:!0,enableUserNotifications:!0,enableRetryMechanism:!0,maxRetryAttempts:3,retryDelayMs:1e3,logLevel:"error"});typeof window<"u"&&(window.addEventListener("error",e=>{var r,s;const t=e.message==="Script error."||e.message===""||e.lineno===0&&e.colno===0&&!e.error,n=((r=e.message)==null?void 0:r.includes("SES_UNCAUGHT_EXCEPTION"))||e.filename&&e.filename.includes("lockdown-install.js")||e.error===null&&((s=e.message)==null?void 0:s.includes("SES"));cs.handleError(e.error||new Error(`Script error at ${e.filename}:${e.lineno}:${e.colno}`),{timestamp:new Date,additionalData:{filename:e.filename,lineno:e.lineno,colno:e.colno,message:e.message,isGenericScriptError:t,isSESError:n}},{silent:t||n})}),window.addEventListener("unhandledrejection",e=>{const t=e.reason instanceof Error?e.reason:new Error(e.reason?String(e.reason):"Unhandled promise rejection");cs.handleError(t,{timestamp:new Date,additionalData:{type:"unhandledPromiseRejection",reason:e.reason}})}));class vVe{constructor(){Je(this,"listeners",new Map)}on(t,n){this.listeners.has(t)||this.listeners.set(t,[]),this.listeners.get(t).push(n)}emit(t,...n){const r=this.listeners.get(t);r&&r.forEach(s=>{try{s(...n)}catch(i){console.error("Event listener error:",i)}})}removeAllListeners(t){t?this.listeners.delete(t):this.listeners.clear()}}class yVe extends vVe{constructor(n={}){super();Je(this,"config");Je(this,"metrics",new Map);Je(this,"aggregatedMetrics",new Map);Je(this,"flushInterval");Je(this,"qualityAnalysisCache",new Map);Je(this,"performanceBuffer",[]);Je(this,"isCollecting",!0);this.config={enableCollection:!0,enableAggregation:!0,enableExport:!1,retentionDays:30,samplingRate:1,batchSize:100,flushInterval:3e4,enableRealTimeAnalytics:!0,qualityThresholds:{excellent:90,good:70,fair:50,poor:0},...n},this.initializeService()}async recordMetric(n,r,s,i,o={},c=[]){if(!(!this.isCollecting||!this.config.enableCollection))try{if(Math.random()>this.config.samplingRate)return;const l={id:this.generateEventId(),timestamp:new Date,type:r,category:s,value:i,metadata:o,tags:c,sessionId:o.sessionId,userId:o.userId,projectId:o.projectId};this.metrics.has(n)||this.metrics.set(n,[]);const d=this.metrics.get(n);d.push(l),this.enforceRetentionPolicy(d),this.config.enableRealTimeAnalytics&&s==="performance"&&this.performanceBuffer.push(l),this.emit("metric",l),d.length%this.config.batchSize===0&&await this.aggregateMetrics(n)}catch(l){await cs.handleError(l,{metricName:n,metricType:r,category:s,additionalData:{value:i,metadata:o,tags:c}})}}async recordTemplateGeneration(n,r,s,i,o,c,l=!1){const d={templateId:n,frameworkId:r,stageId:s,toolId:i,fromCache:l};await Promise.all([this.recordMetric("template.generation.count","counter","template",1,d),this.recordMetric("template.generation.time","timer","performance",o,d),this.recordMetric("template.quality.score","gauge","quality",c,d),this.recordMetric(`framework.${r}.usage`,"counter","usage",1,d),this.recordMetric(`stage.${s}.usage`,"counter","usage",1,d),this.recordMetric(`tool.${i}.usage`,"counter","usage",1,d)]),l?await this.recordMetric("cache.hit","counter","cache",1,d):await this.recordMetric("cache.miss","counter","cache",1,d)}async recordAccessibilityMetrics(n,r,s,i,o){const c={componentId:n,wcagLevel:r};await Promise.all([this.recordMetric("accessibility.compliance.score","gauge","accessibility",s,c),this.recordMetric("accessibility.violations","counter","accessibility",i,c),this.recordMetric("accessibility.warnings","counter","accessibility",o,c)])}async recordUserExperienceMetrics(n,r,s,i,o,c){const l={sessionId:n,userId:r,projectId:s};await Promise.all([this.recordMetric("ux.time_to_first_interaction","timer","user_experience",i,l),this.recordMetric("ux.completion_rate","gauge","user_experience",o,l),this.recordMetric("ux.satisfaction_score","gauge","user_experience",c,l)])}async analyzeQualityMetrics(n){try{const r=n?`quality_${n.start.getTime()}_${n.end.getTime()}`:"quality_current";if(this.qualityAnalysisCache.has(r)){const m=this.qualityAnalysisCache.get(r);if(Date.now()-m.trends.changeRate<5*60*1e3)return m}const s=await this.calculateAverageMetric("template.quality.score",n),i=await this.calculateAverageMetric("context.richness",n),o=await this.calculateAverageMetric("accessibility.compliance.score",n),c=await this.calculateAverageMetric("ux.satisfaction_score",n),l=await this.calculatePerformanceScore(n),d=await this.calculateReliabilityScore(n),u=s*.2+i*.15+o*.2+c*.2+l*.15+d*.1,h=await this.calculateTrends("quality.overall",u),A=await this.generateQualityRecommendations({templateQuality:s,contextRichness:i,accessibilityCompliance:o,userExperience:c,performance:l,reliability:d}),f={overall:u,components:{templateQuality:s,contextRichness:i,accessibilityCompliance:o,userExperience:c,performance:l,reliability:d},trends:h,recommendations:A};return this.qualityAnalysisCache.set(r,f),f}catch(r){return await cs.handleError(r,{additionalData:{operation:"quality_analysis",timeRange:n}}),{overall:50,components:{templateQuality:50,contextRichness:50,accessibilityCompliance:50,userExperience:50,performance:50,reliability:50},trends:{direction:"stable",changeRate:0,confidence:.1},recommendations:[]}}}async generateReport(n,r=!0){try{const s=this.generateReportId(),[i,o,c,l]=await Promise.all([this.analyzeQualityMetrics(n),this.calculatePerformanceMetrics(n),this.calculateUsageMetrics(n),this.calculateAccessibilityMetrics(n)]),d=r?await this.generateInsights(i,o,c,l):[],u=await this.generateAlerts(i,o,c,l),h={id:s,generatedAt:new Date,period:n,summary:{quality:i,performance:o,usage:c,accessibility:l},insights:d,alerts:u};return this.emit("report:generated",h),h}catch(s){throw await cs.handleError(s,{additionalData:{operation:"report_generation",period:n}}),s}}async getDashboardData(){const n={start:new Date(Date.now()-864e5),end:new Date},[r,s,i]=await Promise.all([this.analyzeQualityMetrics(n),this.calculatePerformanceMetrics(n),this.getRecentActivity(50)]);return{quality:{score:r.overall,trend:r.trends.direction,components:r.components},performance:{avgResponseTime:s.responseTime.avg,throughput:s.throughput.requestsPerSecond,errorRate:s.errorRate,cacheHitRate:s.resourceUsage.cacheHitRate},activity:i,alerts:r.recommendations.filter(o=>o.priority==="high"||o.priority==="critical").slice(0,5)}}async exportMetrics(n,r){try{const s=r?this.filterMetricsByTimeRange(r):this.metrics;switch(n){case"json":return JSON.stringify(Array.from(s.entries()),null,2);case"csv":return this.convertToCSV(s);case"prometheus":return this.convertToPrometheusFormat(s);default:throw new Error(`Unsupported export format: ${n}`)}}catch(s){throw await cs.handleError(s,{additionalData:{operation:"metrics_export",format:n,timeRange:r}}),s}}async cleanup(){try{const n=new Date(Date.now()-this.config.retentionDays*24*60*60*1e3);let r=0;for(const[s,i]of this.metrics.entries()){const o=i.length;this.metrics.set(s,i.filter(c=>c.timestamp>n)),r+=o-i.length}this.qualityAnalysisCache.clear(),this.performanceBuffer=this.performanceBuffer.filter(s=>s.timestamp>n),console.log(`Metrics cleanup completed. Removed ${r} old events.`)}catch(n){await cs.handleError(n,{additionalData:{operation:"metrics_cleanup"}})}}startCollection(){this.isCollecting=!0,this.emit("collection:started")}stopCollection(){this.isCollecting=!1,this.emit("collection:stopped")}destroy(){this.flushInterval&&clearInterval(this.flushInterval),this.metrics.clear(),this.aggregatedMetrics.clear(),this.qualityAnalysisCache.clear(),this.performanceBuffer=[],this.removeAllListeners()}initializeService(){this.config.enableAggregation&&this.config.flushInterval>0&&(this.flushInterval=setInterval(()=>{this.aggregateAllMetrics()},this.config.flushInterval)),console.log("Metrics Service initialized with config:",this.config)}generateEventId(){return`metric_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateReportId(){return`report_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}enforceRetentionPolicy(n){const r=new Date(Date.now()-this.config.retentionDays*24*60*60*1e3),s=n.filter(i=>i.timestamp>r);s.length!==n.length&&n.splice(0,n.length,...s)}async aggregateMetrics(n){try{const r=this.metrics.get(n);if(!r||r.length===0)return;const s={count:r.length,sum:r.reduce((i,o)=>i+o.value,0),avg:r.reduce((i,o)=>i+o.value,0)/r.length,min:Math.min(...r.map(i=>i.value)),max:Math.max(...r.map(i=>i.value)),lastUpdated:new Date};this.aggregatedMetrics.set(n,s)}catch(r){await cs.handleError(r,{additionalData:{operation:"metric_aggregation",metricName:n}})}}async aggregateAllMetrics(){for(const n of this.metrics.keys())await this.aggregateMetrics(n)}async calculateAverageMetric(n,r){const s=this.metrics.get(n)||[],i=r?s.filter(c=>c.timestamp>=r.start&&c.timestamp<=r.end):s;return i.length===0?50:i.reduce((c,l)=>c+l.value,0)/i.length}async calculatePerformanceScore(n){const r=await this.calculateAverageMetric("template.generation.time",n),s=await this.calculateAverageMetric("error.rate",n),i=await this.calculateAverageMetric("cache.hit_rate",n),o=Math.max(0,100-r/10),c=Math.max(0,100-s*10),l=i;return(o+c+l)/3}async calculateReliabilityScore(n){const r=await this.calculateAverageMetric("error.count",n),s=await this.calculateAverageMetric("requests.total",n);return s===0?100:Math.max(0,100-r/s*100)}async calculateTrends(n,r){const s=await this.calculateAverageMetric(n,{start:new Date(Date.now()-6048e5),end:new Date(Date.now()-864e5)}),i=s>0?(r-s)/s*100:0;let o="stable";return Math.abs(i)>5&&(o=i>0?"improving":"declining"),{direction:o,changeRate:Math.abs(i),confidence:Math.min(1,Math.max(.1,1-Math.abs(i)/100))}}async generateQualityRecommendations(n){const r=[];return n.templateQuality<this.config.qualityThresholds.good&&r.push({id:"template-quality-improvement",priority:"high",category:"Template Quality",title:"Improve Template Quality",description:"Template quality scores are below acceptable thresholds",impact:"Better templates lead to more accurate and useful outputs",effort:"medium",actionItems:["Review and update template validation rules","Implement template optimization suggestions","Enhance variable processing logic"],estimatedImprovement:15}),n.accessibilityCompliance<this.config.qualityThresholds.good&&r.push({id:"accessibility-compliance",priority:"critical",category:"Accessibility",title:"Improve Accessibility Compliance",description:"Accessibility scores need immediate attention",impact:"Ensures the application is usable by all users",effort:"high",actionItems:["Conduct accessibility audit","Fix WCAG violations","Implement screen reader optimizations"],estimatedImprovement:25}),n.performance<this.config.qualityThresholds.good&&r.push({id:"performance-optimization",priority:"medium",category:"Performance",title:"Optimize Performance",description:"System performance could be improved",impact:"Faster response times improve user experience",effort:"medium",actionItems:["Optimize cache configuration","Review slow queries","Implement request batching"],estimatedImprovement:10}),r}async calculatePerformanceMetrics(n){const s=this.getEventsInRange("template.generation.time",n).map(i=>i.value).sort((i,o)=>i-o);return{responseTime:{avg:s.length>0?s.reduce((i,o)=>i+o,0)/s.length:0,p50:s.length>0?s[Math.floor(s.length*.5)]:0,p95:s.length>0?s[Math.floor(s.length*.95)]:0,p99:s.length>0?s[Math.floor(s.length*.99)]:0},throughput:{requestsPerSecond:await this.calculateThroughput("requests.total",n),templatesProcessedPerMinute:await this.calculateThroughput("template.generation.count",n)*60},resourceUsage:{memoryUsage:await this.calculateAverageMetric("system.memory.usage",n),cpuUsage:await this.calculateAverageMetric("system.cpu.usage",n),cacheHitRate:await this.calculateCacheHitRate(n)},errorRate:await this.calculateErrorRate(n),availability:await this.calculateAvailability(n)}}async calculateUsageMetrics(n){const r=this.getEventsInRange("session.count",n),s=this.getEventsInRange("template.generation.count",n),i={},o={},c={};for(const l of s){const{frameworkId:d,stageId:u,toolId:h}=l.metadata;i[d]=(i[d]||0)+1,o[u]=(o[u]||0)+1,c[h]=(c[h]||0)+1}return{totalSessions:r.length,activeUsers:new Set(r.map(l=>l.metadata.userId)).size,templatesGenerated:s.length,frameworkUsage:i,stageUsage:o,toolUsage:c,averageSessionDuration:await this.calculateAverageMetric("session.duration",n),bounceRate:await this.calculateBounceRate(n),conversionRate:await this.calculateConversionRate(n)}}async calculateAccessibilityMetrics(n){return{wcagCompliance:{level:"AA",score:await this.calculateAverageMetric("accessibility.compliance.score",n),violations:await this.calculateAverageMetric("accessibility.violations",n),warnings:await this.calculateAverageMetric("accessibility.warnings",n)},screenReaderCompatibility:await this.calculateAverageMetric("accessibility.screen_reader",n),keyboardNavigation:await this.calculateAverageMetric("accessibility.keyboard_nav",n),colorContrast:await this.calculateAverageMetric("accessibility.color_contrast",n),alternativeText:await this.calculateAverageMetric("accessibility.alt_text",n),semanticStructure:await this.calculateAverageMetric("accessibility.semantic_structure",n)}}getEventsInRange(n,r){return(this.metrics.get(n)||[]).filter(i=>i.timestamp>=r.start&&i.timestamp<=r.end)}async calculateThroughput(n,r){const s=this.getEventsInRange(n,r),i=(r.end.getTime()-r.start.getTime())/1e3;return i>0?s.length/i:0}async calculateCacheHitRate(n){const r=this.getEventsInRange("cache.hit",n).length,s=this.getEventsInRange("cache.miss",n).length,i=r+s;return i>0?r/i*100:0}async calculateErrorRate(n){const r=this.getEventsInRange("error.count",n).length,s=this.getEventsInRange("requests.total",n).length;return s>0?r/s*100:0}async calculateAvailability(n){const r=await this.calculateErrorRate(n);return Math.max(0,100-r)}async calculateBounceRate(n){return 25}async calculateConversionRate(n){const r=this.getEventsInRange("workflow.completion",n).length,s=this.getEventsInRange("session.count",n).length;return s>0?r/s*100:0}async generateInsights(n,r,s,i){const o=[];n.trends.direction==="improving"&&o.push("Overall quality is improving, indicating successful optimization efforts"),r.responseTime.avg<100&&o.push("Excellent response times are contributing to positive user experience"),s.conversionRate>80&&o.push("High conversion rate suggests users are successfully completing their workflows"),i.wcagCompliance.score>90&&o.push("Strong accessibility compliance ensures inclusive user experience");const c=Object.entries(s.frameworkUsage).sort(([,l],[,d])=>d-l)[0];return c&&o.push(`${c[0]} is the most popular framework with ${c[1]} uses`),o}async generateAlerts(n,r,s,i){const o=[];return n.overall<this.config.qualityThresholds.fair&&o.push({severity:"critical",message:"Overall quality score is critically low",recommendation:"Immediate attention required to improve template quality and user experience"}),r.responseTime.avg>2e3&&o.push({severity:"warning",message:"Response times are above acceptable thresholds",recommendation:"Consider optimizing templates and improving cache hit rates"}),i.wcagCompliance.score<60&&o.push({severity:"critical",message:"Accessibility compliance is below minimum standards",recommendation:"Conduct immediate accessibility audit and remediation"}),r.errorRate>5&&o.push({severity:"warning",message:"Error rate is higher than expected",recommendation:"Investigate recent errors and implement additional error handling"}),o}async getRecentActivity(n){const r=[];for(const s of this.metrics.values())r.push(...s);return r.sort((s,i)=>i.timestamp.getTime()-s.timestamp.getTime()).slice(0,n).map(s=>({timestamp:s.timestamp,type:s.type,category:s.category,value:s.value,metadata:s.metadata}))}filterMetricsByTimeRange(n){const r=new Map;for(const[s,i]of this.metrics.entries()){const o=i.filter(c=>c.timestamp>=n.start&&c.timestamp<=n.end);o.length>0&&r.set(s,o)}return r}convertToCSV(n){const s=[["metric_name","timestamp","type","category","value","tags","metadata"].join(",")];for(const[i,o]of n.entries())for(const c of o){const l=[i,c.timestamp.toISOString(),c.type,c.category,c.value.toString(),c.tags.join(";"),JSON.stringify(c.metadata).replace(/"/g,'""')];s.push(l.join(","))}return s.join(`
`)}convertToPrometheusFormat(n){const r=[];for(const[s,i]of n.entries()){const o=s.replace(/[^a-zA-Z0-9_]/g,"_");for(const c of i){const l=Object.entries(c.metadata).map(([u,h])=>`${u}="${h}"`).join(","),d=l?`{${l}}`:"";r.push(`${o}${d} ${c.value} ${c.timestamp.getTime()}`)}}return r.join(`
`)}}const l8=new yVe({enableCollection:!0,enableAggregation:!0,enableExport:!1,retentionDays:30,samplingRate:1,batchSize:100,flushInterval:3e4,enableRealTimeAnalytics:!0,qualityThresholds:{excellent:90,good:70,fair:50,poor:0}});class d8{constructor(t){Je(this,"cache",new Map);Je(this,"options");this.options=t}get(t){const n=this.cache.get(t);if(n){if(Date.now()-n.timestamp>this.options.ttl){this.delete(t);return}return this.cache.delete(t),this.cache.set(t,n),n.value}}set(t,n){const r=this.options.sizeCalculation?this.options.sizeCalculation(n):1,s={value:n,timestamp:Date.now(),size:r};for(this.cache.has(t)&&this.cache.delete(t);this.cache.size>=this.options.max;){const i=this.cache.keys().next().value,o=this.cache.get(i);this.cache.delete(i),this.options.dispose&&o&&this.options.dispose(o.value,i)}this.cache.set(t,s)}delete(t){return this.cache.delete(t)}clear(){this.cache.clear()}get size(){return this.cache.size}keys(){return this.cache.keys()}values(){return this.cache.values()}entries(){return this.cache.entries()}purgeStale(){const t=Date.now();for(const[n,r]of this.cache.entries())t-r.timestamp>this.options.ttl&&this.delete(n)}}class xVe{constructor(t={}){Je(this,"cache");Je(this,"processedCache");Je(this,"config");Je(this,"statistics");Je(this,"validationInterval");Je(this,"compressionEnabled",!1);this.config={maxEntries:500,maxAge:24*60*60*1e3,maxSize:50*1024*1024,enableCompression:!0,enablePreprocessing:!0,enableValidation:!0,validationInterval:60*60*1e3,optimizationLevel:"basic",persistToDisk:!1,metricsEnabled:!0,...t},this.cache=new d8({max:this.config.maxEntries,ttl:this.config.maxAge,maxSize:this.config.maxSize,sizeCalculation:n=>this.calculateEntrySize(n),dispose:(n,r)=>this.onCacheEntryDisposed(n,r)}),this.processedCache=new d8({max:this.config.maxEntries*5,ttl:this.config.maxAge/2,dispose:(n,r)=>this.onProcessedEntryDisposed(n,r)}),this.statistics=this.initializeStatistics(),this.initializeService()}async getTemplate(t,n,r,s){const i=this.generateCacheKey(t,n.id,r.id,s.id);try{const o=this.cache.get(i);return o?(o.metadata.lastAccessed=new Date,o.metadata.hitCount++,this.updateHitStatistics(!0),this.shouldRevalidate(o)&&await this.validateTemplate(o),o.template):(this.updateHitStatistics(!1),null)}catch(o){return await cs.handleError(o,{templateId:t,frameworkId:n.id,stageId:r.id,toolId:s.id}),null}}async storeTemplate(t,n,r,s,i){const o=this.generateCacheKey(t,r.id,s.id,i.id);try{const c=performance.now(),l=await this.validateTemplate({template:n});if(!l.isValid&&l.errors.some(h=>h.severity==="error"))throw new o8(t,`Template validation failed: ${l.errors.map(h=>h.message).join(", ")}`,{templateId:t});const d=await this.analyzeAndOptimizeTemplate(n),u={template:this.config.enablePreprocessing?await this.preprocessTemplate(n):n,metadata:{id:t,version:this.generateVersion(n),createdAt:new Date,lastModified:new Date,lastAccessed:new Date,hitCount:0,size:this.calculateTemplateSize(n),preprocessingTime:performance.now()-c,validationTime:l.lastValidated.getTime()-c,dependencies:this.extractDependencies(n)},processedVersions:new Map,validationResult:l,optimizations:d};return this.cache.set(o,u),this.updateStatistics(),!0}catch(c){return await cs.handleError(c,{templateId:t,frameworkId:r.id,stageId:s.id,toolId:i.id}),!1}}async getProcessedTemplate(t,n,r,s,i){const o=this.generateCacheKey(t,n.id,r.id,s.id),c=this.hashInputs(i),l=`${o}:${c}`;try{const d=this.processedCache.get(l);return d?(d.hitCount++,d.lastAccessed=new Date,d.processedTemplate):null}catch(d){return await cs.handleError(d,{templateId:t,inputHash:c}),null}}async storeProcessedTemplate(t,n,r,s,i,o){const c=this.generateCacheKey(t,n.id,r.id,s.id),l=this.hashInputs(i),d=`${c}:${l}`;try{const u={processedTemplate:o,inputHash:l,timestamp:new Date,hitCount:0,lastAccessed:new Date};this.processedCache.set(d,u);const h=this.cache.get(c);return h&&h.processedVersions.set(l,u),!0}catch(u){return await cs.handleError(u,{templateId:t,inputHash:l}),!1}}async invalidate(t,n,r,s){try{if(!t&&!n&&!r&&!s){this.cache.clear(),this.processedCache.clear(),this.statistics=this.initializeStatistics();return}const i=[],o=[];for(const c of this.cache.keys())this.matchesCriteria(c,t,n,r,s)&&i.push(c);for(const c of this.processedCache.keys())this.matchesCriteria(c,t,n,r,s)&&o.push(c);i.forEach(c=>this.cache.delete(c)),o.forEach(c=>this.processedCache.delete(c)),this.updateStatistics()}catch(i){await cs.handleError(i,{templateId:t,frameworkId:n,stageId:r,toolId:s})}}getStatistics(){return{...this.statistics}}async optimizeCache(){try{const t=performance.now();this.cache.purgeStale(),this.processedCache.purgeStale();const n=[];for(const[i,o]of this.cache.entries())this.shouldRevalidate(o.value)&&n.push([i,o.value]);const r=10;for(let i=0;i<n.length;i+=r){const o=n.slice(i,i+r);await Promise.all(o.map(([c,l])=>this.validateTemplate(l)))}this.updateStatistics();const s=performance.now()-t;console.log(`Cache optimization completed in ${s.toFixed(2)}ms`)}catch(t){await cs.handleError(t,{additionalData:{operation:"cache_optimization"}})}}async preloadTemplates(t){try{console.log(`Preloading ${t.length} templates...`)}catch(n){await cs.handleError(n,{additionalData:{operation:"template_preloading",templateCount:t.length}})}}exportCacheData(){return{templates:Array.from(this.cache.entries()).map(([n,r])=>[n,r.value]),processedTemplates:Array.from(this.processedCache.entries()).map(([n,r])=>[n,r.value]),statistics:this.statistics,timestamp:new Date().toISOString()}}async importCacheData(t){try{if(!t||!Array.isArray(t.templates))throw new Error("Invalid cache data format");this.cache.clear(),this.processedCache.clear();for(const[n,r]of t.templates)this.cache.set(n,r);if(Array.isArray(t.processedTemplates))for(const[n,r]of t.processedTemplates)this.processedCache.set(n,r);return t.statistics&&(this.statistics={...this.statistics,...t.statistics}),console.log(`Imported cache data with ${t.templates.length} templates`),!0}catch(n){return await cs.handleError(n,{additionalData:{operation:"cache_import"}}),!1}}destroy(){this.validationInterval&&clearInterval(this.validationInterval),this.cache.clear(),this.processedCache.clear()}initializeService(){this.config.enableValidation&&this.config.validationInterval>0&&(this.validationInterval=setInterval(()=>{this.performPeriodicValidation()},this.config.validationInterval)),console.log("Template Cache Service initialized with config:",this.config)}initializeStatistics(){return{totalEntries:0,totalSize:0,hitRate:0,missRate:0,averageProcessingTime:0,compressionRatio:0,validationSuccessRate:0,mostAccessedTemplates:[],leastAccessedTemplates:[],memoryUsage:{templates:0,processedVersions:0,metadata:0,total:0}}}async validateTemplate(t){const n=performance.now(),r=[],s=[];try{const{template:i}=t;(!i.template||typeof i.template!="string")&&r.push({type:"syntax",message:"Template content is missing or invalid",severity:"error"}),i.variables&&i.variables.forEach((A,f)=>{(!A.id||!A.name)&&r.push({type:"variable",message:`Variable at index ${f} is missing required fields`,severity:"error"}),A.required&&!A.defaultValue&&!A.validation&&s.push({type:"variable",message:`Required variable '${A.id}' has no validation or default value`,severity:"warning"})}),i.accessibilityInstructions&&i.accessibilityInstructions.length===0&&s.push({type:"accessibility",message:"No accessibility instructions provided",severity:"warning"});const o=i.template.toLowerCase();["accessible","screen reader","keyboard","aria","wcag"].some(A=>o.includes(A))||s.push({type:"semantic",message:"Template may lack accessibility considerations",severity:"info"});const d=performance.now()-n,u=Math.max(0,100-r.length*20-s.length*5),h={isValid:r.length===0,errors:r,warnings:s,score:u,lastValidated:new Date};return t.validationResult=h,t.metadata.validationTime=d,h}catch(i){throw new o8(t.metadata.id,`Template validation failed: ${i instanceof Error?i.message:"Unknown error"}`,{templateId:t.metadata.id})}}async analyzeAndOptimizeTemplate(t){const n=t.template,r=n.match(/[^{]*(?=\{|$)/g)||[];n.match(/\{[^}]+\}/g);const s=r.join("").length,i=n.length,o=i>0?s/i:0,c=this.assessVariableComplexity(t.variables||[]),l=this.estimateProcessingTime(t);let d="standard";return o>.8&&c==="low"?d="aggressive":(o<.3||c==="high")&&(d="minimal"),{hasStaticContent:o>.1,staticContentRatio:o,variableComplexity:c,estimatedProcessingTime:l,recommendedCacheStrategy:d}}async preprocessTemplate(t){const n=JSON.parse(JSON.stringify(t));return n.template=n.template.replace(/\r\n/g,`
`).replace(/\s+$/gm,"").trim(),n.variables&&(n.variables=n.variables.map(r=>{var s,i;return{...r,description:(s=r.description)==null?void 0:s.trim(),placeholder:(i=r.placeholder)==null?void 0:i.trim()}})),n}assessVariableComplexity(t){if(t.length===0)return"low";if(t.length>10)return"high";const n=t.some(s=>s.validation&&(s.validation.pattern||s.validation.customValidator)),r=t.some(s=>s.dependencies&&s.dependencies.length>0);return n||r?"high":t.length>5?"medium":"low"}estimateProcessingTime(t){var i;const r=(((i=t.variables)==null?void 0:i.length)||0)*2,s=Math.floor(t.template.length/100);return 10+r+s}generateCacheKey(t,n,r,s){return`${t}:${n}:${r}:${s}`}generateVersion(t){const n=JSON.stringify(t);let r=0;for(let s=0;s<n.length;s++){const i=n.charCodeAt(s);r=(r<<5)-r+i,r=r&r}return Math.abs(r).toString(36)}hashInputs(t){const n=JSON.stringify(t,Object.keys(t).sort());let r=0;for(let s=0;s<n.length;s++){const i=n.charCodeAt(s);r=(r<<5)-r+i,r=r&r}return Math.abs(r).toString(36)}calculateEntrySize(t){return JSON.stringify(t).length*2}calculateTemplateSize(t){return JSON.stringify(t).length*2}extractDependencies(t){var r;const n=[];return(r=t.variables)==null||r.forEach(s=>{s.dependencies&&n.push(...s.dependencies)}),[...new Set(n)]}shouldRevalidate(t){return this.config.enableValidation?Date.now()-t.validationResult.lastValidated.getTime()>this.config.validationInterval:!1}matchesCriteria(t,n,r,s,i){const o=t.split(":");return!(n&&o[0]!==n||r&&o[1]!==r||s&&o[2]!==s||i&&o[3]!==i)}updateHitStatistics(t){if(!this.config.metricsEnabled)return;const n=this.statistics.hitRate+this.statistics.missRate;t?this.statistics.hitRate=(this.statistics.hitRate*n+1)/(n+1):this.statistics.missRate=(this.statistics.missRate*n+1)/(n+1)}updateStatistics(){this.config.metricsEnabled&&(this.statistics.totalEntries=this.cache.size,this.statistics.totalSize=Array.from(this.cache.values()).reduce((t,n)=>t+n.value.metadata.size,0),this.statistics.memoryUsage.templates=this.cache.size,this.statistics.memoryUsage.processedVersions=this.processedCache.size,this.statistics.memoryUsage.total=this.statistics.memoryUsage.templates+this.statistics.memoryUsage.processedVersions)}onCacheEntryDisposed(t,n){for(const[r,s]of this.processedCache.entries())r.startsWith(n)&&this.processedCache.delete(r)}onProcessedEntryDisposed(t,n){}async performPeriodicValidation(){try{const t=Array.from(this.cache.values()).filter(n=>this.shouldRevalidate(n.value)).slice(0,50);for(const n of t)await this.validateTemplate(n.value);console.log(`Periodic validation completed for ${t.length} entries`)}catch(t){await cs.handleError(t,{additionalData:{operation:"periodic_validation"}})}}}const Oo=new xVe({maxEntries:1e3,maxAge:24*60*60*1e3,maxSize:100*1024*1024,enableCompression:!0,enablePreprocessing:!0,enableValidation:!0,validationInterval:2*60*60*1e3,optimizationLevel:"basic",persistToDisk:!1,metricsEnabled:!0}),op=class op{constructor(){Je(this,"performanceMonitor",new Map);Je(this,"healthCheckInterval");this.initializeHealthMonitoring()}static getInstance(){return op.instance||(op.instance=new op),op.instance}async processTemplateWithCaching(t,n,r,s,i,o={}){const c=performance.now(),l={enableCaching:!0,forceCacheRefresh:!1,cacheProcessedResults:!0,optimizationLevel:"basic",...o};try{let d=null,u=!1,h=!1;const A=this.generateCacheKey(t,n.id,r.id,s.id);if(l.enableCaching&&!l.forceCacheRefresh&&(d=await Oo.getTemplate(t,n,r,s),d&&(u=!0,h=!0)),d||(d=await this.fetchTemplateFromService(t,n,r,s),d&&l.enableCaching&&await Oo.storeTemplate(t,d,n,r,s)),!d)throw new fVe("Template not found",{templateId:t,frameworkId:n.id,stageId:r.id,toolId:s.id},t);const f=performance.now()-c;this.recordPerformanceMetric(A,f);const m=l.enableCaching?await Oo.getTemplate(t,n,r,s):null;return{template:d,fromCache:u,cacheHit:h,processingTime:f,cacheKey:A,statistics:m?{validationScore:0,optimizationApplied:!0,compressionRatio:.8}:void 0}}catch(d){const u=performance.now()-c;throw await cs.handleError(d,{templateId:t,frameworkId:n.id,stageId:r.id,toolId:s.id,processingTime:u,additionalData:{cachingEnabled:l.enableCaching}}),d}}async processTemplateVariablesWithCaching(t,n,r,s,i,o={}){const c={enableCaching:!0,forceCacheRefresh:!1,cacheProcessedResults:!0,optimizationLevel:"basic",...o};try{if(c.enableCaching&&c.cacheProcessedResults&&!c.forceCacheRefresh){const h=await Oo.getProcessedTemplate(t,n,r,s,i);if(h)return{...h,fromCache:!0}}const l=await this.processTemplateWithCaching(t,n,r,s,i,c),d={framework:n,stage:r,tool:s,projectContext:{domain:"general",targetAudience:[],constraints:[],goals:[]},knowledgeBase:[],previousOutputs:[],userPreferences:{accessibilityLevel:"basic",outputDetailLevel:"moderate",includeResearchBacking:!1,includeExamples:!0,communicationStyle:"conversational"}},u=await S2.processTemplate(l.template.template,i,[],d);return c.enableCaching&&c.cacheProcessedResults&&await Oo.storeProcessedTemplate(t,n,r,s,i,u),{...u,fromCache:!1,originalFromCache:l.fromCache}}catch(l){throw await cs.handleError(l,{templateId:t,frameworkId:n.id,stageId:r.id,toolId:s.id,additionalData:{operation:"variable_processing"}}),l}}async batchProcessTemplates(t,n={}){try{const r=await Promise.allSettled(t.map(o=>this.processTemplateWithCaching(o.templateId,o.framework,o.stage,o.tool,o.userInputs,n))),s=[],i=[];return r.forEach((o,c)=>{o.status==="fulfilled"?s.push(o.value):i.push(new Error(`Batch processing failed for request ${c}: ${o.reason}`))}),i.length>0&&console.warn(`Batch processing completed with ${i.length} errors:`,i),s}catch(r){throw await cs.handleError(r,{additionalData:{operation:"batch_processing",requestCount:t.length}}),r}}async warmUpCache(t,n,r,s){try{console.log("Starting cache warm-up...");const i=[];for(const c of t)for(const l of n)for(const d of l.stages.filter(u=>r.some(h=>h.id===u.id)))for(const u of d.tools.filter(h=>s.some(A=>A.id===h.id)))i.push({templateId:c,framework:l,stage:d,tool:u,userInputs:{}});const o=10;for(let c=0;c<i.length;c+=o){const l=i.slice(c,c+o);await this.batchProcessTemplates(l,{enableCaching:!0,forceCacheRefresh:!1,cacheProcessedResults:!1,optimizationLevel:"basic"}),await new Promise(d=>setTimeout(d,100))}console.log(`Cache warm-up completed for ${i.length} template combinations`)}catch(i){await cs.handleError(i,{additionalData:{operation:"cache_warmup",templateCount:t.length}})}}async getCacheHealthReport(){try{const t=Oo.getStatistics(),n=[],r=[];t.hitRate<.3?(r.push({severity:"high",message:"Low cache hit rate detected",suggestion:"Consider preloading frequently used templates or adjusting cache size"}),n.push("Implement cache warm-up strategy for frequently accessed templates")):t.hitRate<.6&&r.push({severity:"medium",message:"Moderate cache hit rate",suggestion:"Review template access patterns and consider cache optimization"});const s=t.memoryUsage.total/(100*1024*1024);let i="low",o;s>.9?(i="high",o="Increase cache size or implement more aggressive eviction policies",r.push({severity:"high",message:"High memory pressure detected",suggestion:o})):s>.7&&(i="medium",o="Monitor memory usage and consider optimization",r.push({severity:"medium",message:"Moderate memory usage",suggestion:o})),t.validationSuccessRate<.8&&(r.push({severity:"high",message:"Low template validation success rate",suggestion:"Review template quality and validation rules"}),n.push("Implement stricter template validation during storage"));const c=r.filter(u=>u.severity==="high").length,l=r.filter(u=>u.severity==="medium").length;let d="healthy";return c>0?d="critical":l>2&&(d="warning"),t.totalEntries===0&&n.push("Cache appears to be empty - consider implementing cache warm-up"),t.averageProcessingTime>100&&n.push("High processing times detected - consider template optimization"),{overall:d,statistics:t,recommendations:n,issues:r,memoryPressure:{level:i,recommendedAction:o}}}catch(t){return await cs.handleError(t,{additionalData:{operation:"cache_health_check"}}),{overall:"critical",statistics:Oo.getStatistics(),recommendations:["Unable to perform complete health check - investigate cache service"],issues:[{severity:"high",message:"Cache health check failed",suggestion:"Check cache service logs and restart if necessary"}],memoryPressure:{level:"high",recommendedAction:"Restart cache service"}}}}async optimizeCachePerformance(){try{const t=performance.now(),n=[];await Oo.optimizeCache(),n.push("Cache optimization and cleanup completed");const s=Array.from(this.performanceMonitor.entries()).filter(([l,d])=>d.reduce((h,A)=>h+A,0)/d.length>100);s.length>0&&n.push(`Identified ${s.length} slow operations for optimization`);const i=Date.now()-24*60*60*1e3;for(const[l,d]of this.performanceMonitor.entries()){const u=d.filter(h=>h>i);u.length===0?this.performanceMonitor.delete(l):this.performanceMonitor.set(l,u)}n.push("Performance monitoring data cleanup completed");const o=performance.now()-t,c=Math.max(0,100-o);return{optimizationsApplied:n,performanceImprovement:c}}catch(t){return await cs.handleError(t,{additionalData:{operation:"cache_performance_optimization"}}),{optimizationsApplied:["Optimization failed - check error logs"],performanceImprovement:0}}}exportCacheData(){return Oo.exportCacheData()}async importCacheData(t){return await Oo.importCacheData(t)}async clearCache(t={}){try{await Oo.invalidate(t.templateId,t.frameworkId,t.stageId,t.toolId),t.clearPerformanceData&&this.performanceMonitor.clear(),console.log("Cache cleared successfully",t)}catch(n){throw await cs.handleError(n,{additionalData:{operation:"cache_clear",options:t}}),n}}destroy(){this.healthCheckInterval&&clearInterval(this.healthCheckInterval),this.performanceMonitor.clear(),Oo.destroy()}async fetchTemplateFromService(t,n,r,s){return{id:t,name:`${s.name} Template`,description:`Enhanced template for ${s.name} in ${r.name} stage`,template:`Generate a ${s.name.toLowerCase()} for the ${r.name.toLowerCase()} stage.

{prompt}`,variables:[{id:"prompt",name:"Prompt",description:"Main prompt content",type:"textarea",required:!0,placeholder:"Enter your prompt here..."}],version:"1.0.0",category:"ux-methodology",accessibility:{wcagLevel:"AA",screenReaderOptimized:!0,keyboardNavigable:!0,colorContrastCompliant:!0},researchBacking:{sources:[],methodology:n.name,evidenceLevel:"moderate"},qualityMetrics:{completeness:.8,clarity:.9,actionability:.85,accessibility:.9},accessibilityInstructions:["Ensure all outputs include proper heading structure","Provide alternative text for any visual elements","Use clear, concise language"],enhancedInstructions:{contextAwareness:"Consider the user's previous inputs and project context",adaptiveGuidance:"Adjust recommendations based on user expertise level",qualityAssurance:"Include validation checkpoints in your response"}}}generateCacheKey(t,n,r,s){return`${t}:${n}:${r}:${s}`}recordPerformanceMetric(t,n){this.performanceMonitor.has(t)||this.performanceMonitor.set(t,[]);const r=this.performanceMonitor.get(t);r.push(n),r.length>100&&r.splice(0,r.length-100)}initializeHealthMonitoring(){this.healthCheckInterval=setInterval(async()=>{try{const t=await this.getCacheHealthReport(),n=t.issues.filter(r=>r.severity==="high");n.length>2&&console.warn("Critical cache health issues detected:",n),t.overall==="critical"&&n.length>2&&await this.optimizeCachePerformance()}catch(t){console.debug("Health monitoring check completed with minor issues:",t.message)}},30*60*1e3)}};Je(op,"instance");let YI=op;const wVe=YI.getInstance(),bVe=()=>{var N;const[e,t]=w.useState(null),[n,r]=w.useState(null),[s,i]=w.useState(null),[o,c]=w.useState(!0),[l,d]=w.useState(!0),[u,h]=w.useState(new Date),{metrics:A,isLoading:f,lastUpdated:m,refreshMetrics:g,enableAutoRefresh:b,disableAutoRefresh:y,trackFeatureUsage:j}=hVe(l,15e3);w.useEffect(()=>{x(),j("metrics_dashboard_view")},[j]),w.useEffect(()=>{l?b():y()},[l,b,y]);const x=async()=>{try{c(!0);const[L,P,F]=await Promise.all([l8.getDashboardData(),Oo.getStatistics(),wVe.getCacheHealthReport()]);t(L),r(P),i(F),h(new Date),await g()}catch(L){console.error("Failed to load dashboard data:",L)}finally{c(!1)}},C=async L=>{try{j("metrics_export",{format:L});const[P,F]=await Promise.all([l8.exportMetrics(L,{start:new Date(Date.now()-24*60*60*1e3),end:new Date}),A?Promise.resolve(JSON.stringify(A,null,2)):Promise.resolve("{}")]);let I="";if(L==="json"){const M={traditional:JSON.parse(P),realTime:JSON.parse(F),exportedAt:new Date().toISOString()};I=JSON.stringify(M,null,2)}const T=new Blob([I],{type:"text/plain"}),Q=URL.createObjectURL(T),D=document.createElement("a");D.href=Q,D.download=`framepromptly_metrics_${new Date().toISOString().split("T")[0]}.${L}`,document.body.appendChild(D),D.click(),document.body.removeChild(D),URL.revokeObjectURL(Q)}catch(P){console.error("Export failed:",P),j("metrics_export_failed",{format:L,error:P.message})}},S=(L,P)=>{const F=P||0;switch(L){case"improving":return a.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-100 text-green-800",children:[a.jsx(gde,{className:"w-3 h-3"}),a.jsxs("span",{className:"text-xs font-medium",children:["+",F.toFixed(1),"%"]})]});case"declining":return a.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-red-100 text-red-800",children:[a.jsx(lde,{className:"w-3 h-3"}),a.jsxs("span",{className:"text-xs font-medium",children:["-",F.toFixed(1),"%"]})]});default:return a.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-gray-100 text-gray-800",children:[a.jsx(Que,{className:"w-3 h-3"}),a.jsx("span",{className:"text-xs font-medium",children:"0%"})]})}},_=({title:L,value:P,trend:F,changeRate:I,icon:T,description:Q,color:D="default"})=>{const M={default:"text-gray-600",green:"text-green-600",red:"text-red-600",blue:"text-blue-600",yellow:"text-yellow-600",purple:"text-purple-600"};return a.jsx(De,{className:"p-6",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`p-3 rounded-lg bg-gray-50 ${M[D]}`,children:T}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:L}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("p",{className:"text-2xl font-bold",children:P}),F&&S(F,I)]}),Q&&a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Q})]})]})})})};return o||f?a.jsxs("div",{className:"space-y-6 animate-pulse",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded w-64"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-96"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("div",{className:"h-9 w-24 bg-gray-200 rounded"}),a.jsx("div",{className:"h-9 w-20 bg-gray-200 rounded"})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((L,P)=>a.jsx("div",{className:"h-32 bg-gray-200 rounded-lg"},P))}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[...Array(3)].map((L,P)=>a.jsx("div",{className:"h-64 bg-gray-200 rounded-lg"},P))})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{children:"Live"})]}),a.jsx("div",{className:"w-1 h-1 bg-gray-300 rounded-full"}),a.jsx(Jo,{className:"w-4 h-4"}),a.jsxs("span",{children:["Updated ",u.toLocaleTimeString()]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(fe,{variant:l?"default":"outline",size:"sm",onClick:()=>d(!l),className:"gap-2",children:[a.jsx(kl,{className:`w-4 h-4 ${l?"animate-spin":""}`}),"Auto-refresh"]}),a.jsxs(fe,{variant:"outline",size:"sm",onClick:x,disabled:o,className:"gap-2",children:[a.jsx(kl,{className:`w-4 h-4 ${o?"animate-spin":""}`}),"Refresh"]}),a.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>C("json"),className:"gap-2",children:[a.jsx(Vp,{className:"w-4 h-4"}),"Export JSON"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(_,{title:"Quality Score",value:`${Math.round((e==null?void 0:e.quality.score)||0)}%`,trend:(e==null?void 0:e.quality.trend)||"stable",changeRate:5.2,icon:a.jsx(f7,{className:"w-5 h-5"}),color:"blue",description:"Overall system quality"}),a.jsx(_,{title:"Response Time",value:`${(e==null?void 0:e.performance.avgResponseTime.toFixed(0))||0}ms`,trend:"improving",changeRate:12.3,icon:a.jsx(C7,{className:"w-5 h-5"}),color:"green",description:"Average processing time"}),a.jsx(_,{title:"Cache Hit Rate",value:`${(e==null?void 0:e.performance.cacheHitRate.toFixed(1))||0}%`,trend:"improving",changeRate:8.1,icon:a.jsx(Cc,{className:"w-5 h-5"}),color:"yellow",description:"Template cache efficiency"}),a.jsx(_,{title:"Error Rate",value:`${(e==null?void 0:e.performance.errorRate.toFixed(2))||0}%`,trend:(e==null?void 0:e.performance.errorRate)>2?"declining":"stable",changeRate:2.1,icon:a.jsx(BC,{className:"w-5 h-5"}),color:(e==null?void 0:e.performance.errorRate)>2?"red":"green",description:"System reliability"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Real-Time User Analytics"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Live user activity and engagement metrics"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:["Updated ",(m==null?void 0:m.toLocaleTimeString())||"Never"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[a.jsx(_,{title:"Active Users",value:(A==null?void 0:A.activeUsers)||0,icon:a.jsx(qa,{className:"w-5 h-5"}),color:"blue",description:"Currently online"}),a.jsx(_,{title:"Workflows Created",value:(A==null?void 0:A.workflowsCreated)||0,icon:a.jsx(Mr,{className:"w-5 h-5"}),color:"green",description:"Last 24 hours"}),a.jsx(_,{title:"AI Prompts Generated",value:(A==null?void 0:A.aiPromptsGenerated)||0,icon:a.jsx(Gs,{className:"w-5 h-5"}),color:"purple",description:"AI interactions today"}),a.jsx(_,{title:"Projects Created",value:(A==null?void 0:A.projectsCreated)||0,icon:a.jsx(h7,{className:"w-5 h-5"}),color:"yellow",description:"New projects today"}),a.jsx(_,{title:"Page Views",value:(A==null?void 0:A.pageViews)||0,icon:a.jsx(zr,{className:"w-5 h-5"}),color:"red",description:"Total page views"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[a.jsxs(De,{className:"lg:col-span-8",children:[a.jsxs(dt,{children:[a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(Gs,{className:"w-5 h-5 text-blue-600"}),"Quality Components"]}),a.jsx(Kt,{children:"Breakdown of quality metrics across different system components"})]}),a.jsx(et,{className:"space-y-4",children:(e==null?void 0:e.quality.components)&&Object.entries(e.quality.components).map(([L,P])=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-medium capitalize",children:L.replace(/([A-Z])/g," $1").trim()}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-sm text-muted-foreground",children:[Math.round(P),"%"]}),a.jsx("div",{className:`w-2 h-2 rounded-full ${P>=90?"bg-green-500":P>=70?"bg-blue-500":P>=50?"bg-yellow-500":"bg-red-500"}`})]})]}),a.jsx(bl,{value:P,className:"h-2"})]},L))})]}),a.jsxs(De,{className:"lg:col-span-4",children:[a.jsxs(dt,{children:[a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(qp,{className:`w-5 h-5 ${(s==null?void 0:s.overall)==="healthy"?"text-green-600":(s==null?void 0:s.overall)==="warning"?"text-yellow-600":"text-red-600"}`}),"System Health"]}),a.jsx(Kt,{children:"Current system status and alerts"})]}),a.jsxs(et,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Overall Status"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"System operational"})]}),a.jsx(_e,{variant:(s==null?void 0:s.overall)==="healthy"?"default":"destructive",className:"capitalize",children:(s==null?void 0:s.overall)||"Unknown"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:"Cache Entries"}),a.jsx("span",{className:"text-sm font-medium",children:(s==null?void 0:s.statistics.totalEntries)||0})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:"Memory Usage"}),a.jsxs("span",{className:"text-sm font-medium",children:[(((s==null?void 0:s.statistics.totalSize)||0)/1024/1024).toFixed(1),"MB"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:"Active Sessions"}),a.jsx("span",{className:"text-sm font-medium",children:((N=e==null?void 0:e.activity)==null?void 0:N.length)||0})]})]}),(e==null?void 0:e.alerts)&&e.alerts.length>0&&a.jsxs("div",{className:"pt-3 border-t",children:[a.jsx("h4",{className:"text-sm font-medium mb-2",children:"Active Alerts"}),a.jsx("div",{className:"space-y-2",children:e.alerts.slice(0,3).map((L,P)=>a.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[a.jsx(BC,{className:`w-3 h-3 mt-0.5 ${L.priority==="critical"?"text-red-500":L.priority==="high"?"text-orange-500":"text-yellow-500"}`}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium",children:L.title}),a.jsx("p",{className:"text-muted-foreground",children:L.description})]})]},P))})]})]})]}),a.jsxs(De,{className:"lg:col-span-6",children:[a.jsxs(dt,{children:[a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(zr,{className:"w-5 h-5 text-green-600"}),"Most Visited Pages"]}),a.jsx(Kt,{children:"Popular pages and average engagement time"})]}),a.jsx(et,{children:A!=null&&A.topPages&&A.topPages.length>0?a.jsx("div",{className:"space-y-3",children:A.topPages.slice(0,8).map((L,P)=>a.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-muted last:border-0",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-muted text-xs font-medium",children:P+1}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:L.page==="/"?"Home":L.page.replace(/^\//,"").replace(/[-_]/g," ").replace(/\b\w/g,F=>F.toUpperCase())||"Unknown"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:L.avgDuration>0?`${(L.avgDuration/1e3).toFixed(1)}s avg`:"Quick visits"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm font-medium",children:L.views}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"views"})]})]},P))}):a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(zr,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No page data available"}),a.jsx("p",{className:"text-xs",children:"Visit pages to see analytics"})]})})]}),a.jsxs(De,{className:"lg:col-span-6",children:[a.jsxs(dt,{children:[a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(Mr,{className:"w-5 h-5 text-blue-600"}),"Popular Frameworks"]}),a.jsx(Kt,{children:"Most used UX frameworks and methodologies"})]}),a.jsx(et,{children:A!=null&&A.topFrameworks&&A.topFrameworks.length>0?a.jsx("div",{className:"space-y-3",children:A.topFrameworks.slice(0,8).map((L,P)=>a.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-muted last:border-0",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-muted text-xs font-medium",children:P+1}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:L.framework.replace(/[-_]/g," ").replace(/\b\w/g,F=>F.toUpperCase())}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Framework usage"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm font-medium",children:L.usage}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"times"})]})]},P))}):a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(Mr,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No framework data"}),a.jsx("p",{className:"text-xs",children:"Create workflows to see popular frameworks"})]})})]}),a.jsxs(De,{className:"lg:col-span-12",children:[a.jsxs(dt,{children:[a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(Ede,{className:"w-5 h-5 text-purple-600"}),"Activity Timeline (24h)"]}),a.jsx(Kt,{children:"User activity throughout the day"})]}),a.jsx(et,{children:(A==null?void 0:A.hourlyActivity)&&a.jsx("div",{className:"flex items-end gap-1 h-32",children:A.hourlyActivity.map((L,P)=>{const F=Math.max(...A.hourlyActivity.map(Q=>Q.actions),1),I=Math.max(L.actions/F*100,2),T=new Date().getHours()===L.hour;return a.jsxs("div",{className:"flex-1 flex flex-col items-center group",children:[a.jsx("div",{className:`w-full rounded-t transition-colors ${T?"bg-blue-500":L.actions>0?"bg-gray-300 group-hover:bg-gray-400":"bg-gray-100"}`,style:{height:`${I}%`},title:`${L.hour}:00 - ${L.actions} actions`}),a.jsx("div",{className:"text-xs text-muted-foreground mt-1 text-center",children:L.hour===0?"12A":L.hour===12?"12P":L.hour<12?`${L.hour}A`:`${L.hour-12}P`})]},P)})})})]}),a.jsxs(De,{className:"lg:col-span-12",children:[a.jsxs(dt,{children:[a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(T5,{className:"w-5 h-5 text-purple-600"}),"Recent Activity"]}),a.jsx(Kt,{children:"Latest system events and template generations"})]}),a.jsx(et,{children:e!=null&&e.activity&&e.activity.length>0?a.jsx("div",{className:"space-y-3",children:e.activity.slice(0,8).map((L,P)=>{var F;return a.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-muted last:border-0",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-medium capitalize",children:[L.type.replace("_"," "),"  ",L.category]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:(F=L.metadata)!=null&&F.templateId?`Template: ${L.metadata.templateId}`:"System event"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm font-medium",children:L.value}),a.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(L.timestamp).toLocaleTimeString()})]})]},P)})}):a.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[a.jsx(T5,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No recent activity"}),a.jsx("p",{className:"text-xs",children:"Activity will appear as you use the system"})]})})]})]})]})},CVe=()=>{const{user:e,loading:t}=Dc();return t?a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:[a.jsx(Lr,{}),a.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-80px)]",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading..."})]})})]}):e?a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:[a.jsx(Lr,{}),a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-b border-gray-100 p-6",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[a.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-100 rounded-xl",children:a.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Analytics Dashboard"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Real-time insights into your FramePromptly performance and quality metrics"})]})]})})}),a.jsx("main",{className:"container mx-auto px-4 py-8",children:a.jsx(bVe,{})})]}):a.jsx(Ez,{to:"/auth",replace:!0})},jVe=()=>{const{user:e,loading:t}=Dc(),{frameworks:n}=Us(),{enhancedTemplates:r}=ma(),[s,i]=w.useState(""),[o,c]=w.useState(null),[l,d]=w.useState(null);w.useState(null);const[u,h]=w.useState(null),[A,f]=w.useState(""),[m,g]=w.useState(new Map),[b,y]=w.useState("overview");if(w.useEffect(()=>{const P=localStorage.getItem("framepromptly_custom_instructions");if(P)try{const F=JSON.parse(P);g(new Map(F))}catch(F){console.error("Error loading custom instructions:",F)}},[]),t)return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:[a.jsx(Lr,{}),a.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-80px)]",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading..."})]})})]});if(!e)return a.jsx(Ez,{to:"/auth",replace:!0});const j=(P,F,I,T,Q)=>{const D=`${I}_${F}_${P}`,M={id:D,toolId:P,stageId:F,frameworkId:I,instruction:T,variables:x(T),isCustom:!0,projectId:Q==="project"?"current-project":void 0,lastModified:new Date,modifiedBy:e.email||"Unknown"},U=new Map(m);U.set(D,M),g(U),localStorage.setItem("framepromptly_custom_instructions",JSON.stringify(Array.from(U.entries()))),Ue.success(`Instruction ${Q==="global"?"updated globally":"customized for project"}`),h(null)},x=P=>{const F=P.match(/\{([^}]+)\}/g);return F?F.map(I=>I.slice(1,-1)):[]},C=(P,F,I)=>{const T=`${I}_${F}_${P}`,Q=m.get(T);if(Q)return Q.instruction;try{const M=n.find($=>$.id===I),U=M==null?void 0:M.stages.find($=>$.id===F),H=U==null?void 0:U.tools.find($=>$.id===P);if(M&&U&&H){const R=Ex({framework:M,stage:U,tool:H});return`# ${H.name} - Contextual AI Prompt Instructions

## Framework: ${M.name} | Stage: ${U.name}

${R.promptTemplate}

### Contextual Guidance:
${R.contextualGuidance.map(Y=>` ${Y}`).join(`
`)}

### Framework-Specific Notes:
${R.frameworkSpecificNotes.map(Y=>` ${Y}`).join(`
`)}

### Stage-Specific Focus:
${R.stageSpecificFocus.map(Y=>` ${Y}`).join(`
`)}

### Knowledge Integration Requirements:
${R.knowledgeIntegrationInstructions.map(Y=>` ${Y}`).join(`
`)}

### Quality Assurance:
${R.qualityChecks.map(Y=>` ${Y}`).join(`
`)}

### Expected Output:
${R.expectedOutputFormat}

---
*These instructions are specifically tailored for ${H.name} in the ${U.name} stage of ${M.name} methodology.*`}}catch(M){console.warn("Failed to generate tool-specific instructions, falling back to enhanced instructions:",M)}try{const M=Ip(P);if(M&&M.length>0)return`# AI Prompt Instructions for ${P.replace("-"," ").replace(/\b\w/g,U=>U.toUpperCase())}

## Core Instructions:
${M.slice(0,7).map(U=>` ${U}`).join(`
`)}

## Methodology Guidelines:
${M.slice(7,14).map(U=>` ${U}`).join(`
`)}

## Quality Assurance:
${M.slice(14,18).map(U=>` ${U}`).join(`
`)}

## AI Optimization:
${M.slice(18,22).map(U=>` ${U}`).join(`
`)}

## Knowledge Integration (CRITICAL):
${M.slice(22).map(U=>` ${U}`).join(`
`)}

---
*Instructions are research-backed and include knowledge base integration for contextual relevance.*`}catch{console.warn("Could not load enhanced instructions for tool:",P)}const D=r.find(M=>M.id===P);return(D==null?void 0:D.template)||"No instruction template found for this tool."},S=(P,F,I)=>{const T=`${I}_${F}_${P}`;return m.has(T)},_=n.filter(P=>P.name.toLowerCase().includes(s.toLowerCase())||P.description.toLowerCase().includes(s.toLowerCase())),N=()=>a.jsx("div",{className:"space-y-6",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(P=>{const F=d0(P.id,"framework"),I=rm(P.id);return a.jsxs(De,{className:`group hover:shadow-xl hover:-translate-y-1 transition-all duration-200 ${F[0]} border-2`,style:{backgroundColor:I.background.tertiary,borderColor:I.border.secondary,borderLeftWidth:"6px",borderLeftColor:I.border.primary},children:[a.jsxs(dt,{className:"border-b",style:{backgroundColor:I.background.secondary,borderBottomColor:I.border.secondary},children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(ft,{className:"text-lg font-bold leading-tight text-black",children:P.name}),a.jsxs(_e,{className:"font-medium",style:{backgroundColor:I.background.secondary,color:I.text.secondary,borderColor:I.border.secondary},children:[P.stages.length," stages"]})]}),a.jsx(Kt,{className:"text-sm leading-relaxed",style:{color:I.text.secondary},children:P.description})]}),a.jsx(et,{className:"p-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",style:{color:I.text.secondary},children:[a.jsx(Mr,{className:"w-4 h-4"}),a.jsxs("span",{children:["Focus: ",P.characteristics.focus]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm",style:{color:I.text.secondary},children:[a.jsx(Xo,{className:"w-4 h-4"}),a.jsxs("span",{children:["Timeline: ",P.characteristics.timeline]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-3",children:[a.jsxs(_e,{className:"text-xs font-medium",style:{backgroundColor:I.background.secondary,color:I.text.secondary,borderColor:I.border.secondary},children:[P.stages.reduce((T,Q)=>T+Q.tools.length,0)," total tools"]}),a.jsxs(fe,{variant:"outline",size:"sm",className:"font-medium transition-colors duration-200",style:{borderColor:I.border.secondary,color:I.text.secondary},onMouseEnter:T=>{T.currentTarget.style.backgroundColor=I.background.hover,T.currentTarget.style.color=I.text.hover,T.currentTarget.style.borderColor=I.border.primary},onMouseLeave:T=>{T.currentTarget.style.backgroundColor="transparent",T.currentTarget.style.color=I.text.secondary,T.currentTarget.style.borderColor=I.border.secondary},onClick:()=>{c(P.id),y("instructions")},children:[a.jsx(us,{className:"w-4 h-4 mr-1"}),"Manage"]})]})]})})]},P.id)})})}),L=()=>a.jsx("div",{className:"space-y-4",children:_.map(P=>{d0(P.id,"framework");const F=rm(P.id);return a.jsxs(De,{className:"overflow-hidden border-2 shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-200",style:{backgroundColor:F.background.tertiary,borderColor:F.border.secondary,borderLeftWidth:"6px",borderLeftColor:F.border.primary},children:[a.jsx(dt,{className:"cursor-pointer border-b transition-colors duration-200",style:{backgroundColor:F.background.secondary,borderBottomColor:F.border.secondary},onMouseEnter:I=>{I.currentTarget.style.backgroundColor=F.background.hover},onMouseLeave:I=>{I.currentTarget.style.backgroundColor=F.background.secondary},onClick:()=>c(o===P.id?null:P.id),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[o===P.id?a.jsx(Ic,{className:"w-5 h-5",style:{color:F.text.secondary}}):a.jsx(_r,{className:"w-5 h-5",style:{color:F.text.secondary}}),a.jsxs("div",{children:[a.jsx(ft,{"data-title":!0,className:"text-xl font-bold leading-tight text-black",children:P.name}),a.jsx(Kt,{"data-description":!0,className:"text-sm leading-relaxed",style:{color:F.text.secondary},children:P.description})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(_e,{className:"font-medium",style:{backgroundColor:F.background.primary,color:F.text.primary,borderColor:F.border.primary},children:[P.stages.length," stages"]}),a.jsxs(_e,{className:"font-medium",style:{backgroundColor:F.background.primary,color:F.text.primary,borderColor:F.border.primary},children:[P.stages.reduce((I,T)=>I+T.tools.length,0)," tools"]})]})]})}),o===P.id&&a.jsx(et,{className:"space-y-4 p-6",children:P.stages.map(I=>(d0(P.id,"stage"),a.jsxs("div",{className:"ml-4 border rounded-lg p-5 transition-all duration-200",style:{backgroundColor:F.background.secondary,borderColor:F.border.tertiary,borderLeftWidth:"4px",borderLeftColor:F.border.secondary},onMouseEnter:T=>{T.currentTarget.style.backgroundColor=F.background.hover},onMouseLeave:T=>{T.currentTarget.style.backgroundColor=F.background.secondary},children:[a.jsxs("div",{className:"flex items-center justify-between cursor-pointer -m-1 p-3 rounded-md transition-colors duration-200",style:{backgroundColor:`${F.background.secondary}80`},onMouseEnter:T=>{T.currentTarget.style.backgroundColor=`${F.background.hover}80`},onMouseLeave:T=>{T.currentTarget.style.backgroundColor=`${F.background.secondary}80`},onClick:()=>d(l===I.id?null:I.id),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[l===I.id?a.jsx(Ic,{className:"w-4 h-4",style:{color:F.text.secondary}}):a.jsx(_r,{className:"w-4 h-4",style:{color:F.text.secondary}}),a.jsxs("div",{children:[a.jsx("h3",{"data-stage-title":!0,className:"font-semibold text-lg leading-tight text-black",children:I.name}),a.jsx("p",{"data-stage-description":!0,className:"text-sm leading-relaxed",style:{color:F.text.light},children:I.description})]})]}),a.jsxs(_e,{className:"font-medium",style:{backgroundColor:F.background.primary,color:F.text.primary,borderColor:F.border.primary},children:[I.tools.length," tools"]})]}),l===I.id&&a.jsx("div",{className:"mt-4 space-y-3",children:I.tools.map(T=>{var Q,D,M;return d0(P.id,"tool"),a.jsxs("div",{className:"ml-8 border rounded-lg p-4 transition-all duration-200",style:{backgroundColor:F.background.tertiary,borderColor:F.border.tertiary,borderLeftWidth:"3px",borderLeftColor:F.border.tertiary},onMouseEnter:U=>{U.currentTarget.style.backgroundColor=F.background.hover,U.currentTarget.style.borderLeftColor=F.border.secondary},onMouseLeave:U=>{U.currentTarget.style.backgroundColor=F.background.tertiary,U.currentTarget.style.borderLeftColor=F.border.tertiary},children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(CA,{className:"w-4 h-4",style:{color:F.text.secondary}}),a.jsxs("div",{children:[a.jsx("h4",{"data-tool-title":!0,className:"font-medium leading-tight text-black",children:T.name}),a.jsx("p",{"data-tool-description":!0,className:"text-xs leading-relaxed",style:{color:F.text.light},children:T.description})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[S(T.id,I.id,P.id)&&a.jsx(_e,{className:"bg-orange-200 text-orange-800 border-orange-300 font-medium text-xs",children:"Custom"}),a.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>{window.open(`/tool-prompt-demo?framework=${P.id}&stage=${I.id}&tool=${T.id}`,"_blank")},className:"text-xs transition-colors duration-200",style:{color:F.text.secondary},onMouseEnter:U=>{U.currentTarget.style.backgroundColor=F.background.secondary,U.currentTarget.style.color=F.text.hover},onMouseLeave:U=>{U.currentTarget.style.backgroundColor="transparent",U.currentTarget.style.color=F.text.secondary},children:[a.jsx(Mr,{className:"w-3 h-3 mr-1"}),"Compare"]}),a.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>{h(`${P.id}_${I.id}_${T.id}`),f(C(T.id,I.id,P.id))},className:"transition-colors duration-200",style:{borderColor:F.border.tertiary,color:F.text.secondary},onMouseEnter:U=>{U.currentTarget.style.backgroundColor=F.background.secondary,U.currentTarget.style.color=F.text.hover},onMouseLeave:U=>{U.currentTarget.style.backgroundColor="transparent",U.currentTarget.style.color=F.text.secondary},children:[a.jsx(Xu,{className:"w-3 h-3 mr-1"}),"Edit"]})]})]}),a.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4 mt-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yu,{className:"w-4 h-4 text-slate-600"}),a.jsx("span",{className:"text-sm font-medium text-slate-800",children:"AI Prompt Instruction:"})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx(_e,{className:"bg-yellow-200 text-yellow-800 border-yellow-300 font-semibold text-xs",children:"Context-Specific"}),a.jsx(_e,{className:"bg-violet-200 text-violet-800 border-violet-300 text-xs",children:P.name}),a.jsx(_e,{className:"bg-blue-200 text-blue-800 border-blue-300 text-xs",children:I.name})]})]}),u===`${P.id}_${I.id}_${T.id}`?a.jsxs("div",{className:"space-y-3",children:[a.jsx(Qr,{value:A,onChange:U=>f(U.target.value),className:"min-h-32 text-sm font-mono",placeholder:"Enter the AI prompt instruction..."}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(fe,{size:"sm",onClick:()=>j(T.id,I.id,P.id,A,"global"),children:[a.jsx(p7,{className:"w-3 h-3 mr-1"}),"Save Globally"]}),a.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>j(T.id,I.id,P.id,A,"project"),children:[a.jsx(Qd,{className:"w-3 h-3 mr-1"}),"Save for Project"]}),a.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>h(null),children:[a.jsx(_i,{className:"w-3 h-3 mr-1"}),"Cancel"]})]}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[a.jsx("strong",{children:"Variables found:"})," ",x(A).join(", ")||"None"]})]}):a.jsxs("div",{className:"space-y-3",children:[a.jsx("pre",{className:"text-sm font-mono bg-white p-4 rounded-md border border-slate-300 whitespace-pre-wrap max-h-96 overflow-y-auto text-slate-700 leading-relaxed shadow-sm",children:C(T.id,I.id,P.id)}),!S(T.id,I.id,P.id)&&a.jsxs("div",{className:"bg-violet-50 border border-violet-200 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-violet-800 font-semibold mb-1",children:" Enhanced Tool-Specific Instructions"}),a.jsxs("div",{className:"text-xs text-violet-700 leading-relaxed",children:["This prompt is automatically generated based on the ",T.name," tool's specific purpose within the ",I.name," stage of ",P.name," methodology, including knowledge base integration."]})]}),S(T.id,I.id,P.id)&&a.jsxs("div",{className:"text-xs text-muted-foreground",children:[a.jsx("strong",{children:"Last modified:"})," ",(Q=m.get(`${P.id}_${I.id}_${T.id}`))==null?void 0:Q.lastModified.toLocaleString(),((D=m.get(`${P.id}_${I.id}_${T.id}`))==null?void 0:D.modifiedBy)&&a.jsxs("span",{children:[" by ",(M=m.get(`${P.id}_${I.id}_${T.id}`))==null?void 0:M.modifiedBy]})]})]})]})]},T.id)})})]},I.id)))})]},P.id)})});return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:[a.jsx(Lr,{}),a.jsx("main",{className:"container mx-auto px-4 py-8",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"UX Frameworks"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage UX methodologies, stages, tools, and AI prompt instructions"})]}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("div",{className:"relative",children:[a.jsx(mw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx(ln,{placeholder:"Search frameworks...",value:s,onChange:P=>i(P.target.value),className:"pl-10 w-64"})]})})]}),a.jsxs("div",{className:"w-full bg-gradient-to-r from-blue-50 to-green-50 border border-blue-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Enhanced Tool-Specific AI Prompts"})]}),a.jsx("p",{className:"text-xs text-blue-800",children:"Each tool now generates unique, contextual AI prompt instructions based on framework methodology, stage objectives, and tool-specific best practices with knowledge base integration."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx(De,{className:"p-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 rounded-lg bg-blue-50 text-blue-600",children:a.jsx(Xo,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Frameworks"}),a.jsx("p",{className:"text-2xl font-bold",children:n.length})]})]})}),a.jsx(De,{className:"p-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 rounded-lg bg-green-50 text-green-600",children:a.jsx(Mr,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Stages"}),a.jsx("p",{className:"text-2xl font-bold",children:n.reduce((P,F)=>P+F.stages.length,0)})]})]})}),a.jsx(De,{className:"p-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 rounded-lg bg-purple-50 text-purple-600",children:a.jsx(CA,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Tools"}),a.jsx("p",{className:"text-2xl font-bold",children:n.reduce((P,F)=>P+F.stages.reduce((I,T)=>I+T.tools.length,0),0)})]})]})}),a.jsx(De,{className:"p-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 rounded-lg bg-orange-50 text-orange-600",children:a.jsx(us,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Custom Instructions"}),a.jsx("p",{className:"text-2xl font-bold",children:m.size})]})]})})]}),a.jsxs(Ka,{value:b,onValueChange:y,children:[a.jsxs(ga,{className:"grid w-full grid-cols-2",children:[a.jsx(xn,{value:"overview",children:"Framework Overview"}),a.jsx(xn,{value:"instructions",children:"Manage Instructions"})]}),a.jsx(jn,{value:"overview",className:"space-y-6",children:a.jsx(N,{})}),a.jsx(jn,{value:"instructions",className:"space-y-6",children:a.jsx(L,{})})]})]})})]})},kVe=()=>{const[e,t]=w.useState(null),n=[{id:"user-interviews",name:"User Interviews",description:"Conduct in-depth user interviews"},{id:"observations",name:"Observations",description:"Observe users in their environment"},{id:"affinity-mapping",name:"Affinity Mapping",description:"Group insights to find patterns"},{id:"how-might-we",name:"How Might We",description:"Frame problems as opportunities"},{id:"stakeholder-interviews",name:"Stakeholder Interviews",description:"Understand business context"},{id:"contextual-inquiry",name:"Contextual Inquiry",description:"Observe users in context"},{id:"synthesis-workshops",name:"Synthesis Workshops",description:"Collaborative insight analysis"},{id:"expert-interviews",name:"Expert Interviews",description:"Learn from domain experts"},{id:"job-steps",name:"Job Steps",description:"Break down customer job process"},{id:"hypothesis-canvas",name:"Hypothesis Canvas",description:"Structure testable assumptions"},{id:"user-story-mapping",name:"User Story Mapping",description:"Map user journey to features"},{id:"notification-strategy",name:"Notification Strategy",description:"Design trigger notifications"}],r=s=>{try{const i=Ip(s);if(i&&i.length>0)return`# AI Prompt Instructions for ${s.replace("-"," ").replace(/\b\w/g,o=>o.toUpperCase())}

## Core Instructions:
${i.slice(0,7).map(o=>` ${o}`).join(`
`)}

## Methodology Guidelines:
${i.slice(7,14).map(o=>` ${o}`).join(`
`)}

## Quality Assurance:
${i.slice(14,18).map(o=>` ${o}`).join(`
`)}

## AI Optimization:
${i.slice(18,22).map(o=>` ${o}`).join(`
`)}

## Knowledge Integration (CRITICAL):
${i.slice(22).map(o=>` ${o}`).join(`
`)}

---
*Instructions are research-backed and include knowledge base integration for contextual relevance.*`}catch{console.warn("Could not load enhanced instructions for tool:",s)}return"No enhanced instructions found for this tool."};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Enhanced AI Prompt Instructions Demo"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Demonstrating research-backed UX tool instructions with knowledge integration"})]}),a.jsx("div",{className:"grid gap-6",children:n.map(s=>a.jsxs(De,{className:"overflow-hidden",children:[a.jsx(dt,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>t(e===s.id?null:s.id),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(CA,{className:"w-5 h-5 text-muted-foreground"}),a.jsxs("div",{children:[a.jsx(ft,{className:"text-lg",children:s.name}),a.jsx(Kt,{children:s.description})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_e,{variant:"default",className:"text-xs",children:"Enhanced"}),a.jsx(Ic,{className:`w-5 h-5 text-muted-foreground transition-transform ${e===s.id?"rotate-180":""}`})]})]})}),e===s.id&&a.jsx(et,{className:"pt-0",children:a.jsxs("div",{className:"bg-white rounded border p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Yu,{className:"w-4 h-4 text-blue-600"}),a.jsx("span",{className:"text-sm font-medium",children:"AI Prompt Instructions:"})]}),a.jsx("pre",{className:"text-sm font-mono bg-gray-50 p-4 rounded whitespace-pre-wrap border overflow-x-auto",children:r(s.id)}),a.jsxs("div",{className:"mt-3 text-xs text-muted-foreground",children:[a.jsx("strong",{children:"Features:"}),a.jsxs("ul",{className:"mt-1 ml-4 list-disc",children:[a.jsx("li",{children:"Research-backed methodology from 2024 best practices"}),a.jsx("li",{children:"Industry-specific adaptations (fintech, healthcare, etc.)"}),a.jsx("li",{children:"Knowledge base integration for contextual relevance"}),a.jsx("li",{children:"Quality assurance and validation criteria"}),a.jsx("li",{children:"AI optimization for maximum prompt effectiveness"})]})]})]})})]},s.id))}),a.jsxs(De,{className:"bg-blue-50 border-blue-200",children:[a.jsx(dt,{children:a.jsx(ft,{className:"text-blue-900",children:" Enhanced AI Prompt System Summary"})}),a.jsx(et,{className:"text-blue-800",children:a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:" What's Been Implemented:"}),a.jsxs("ul",{className:"space-y-1 text-sm",children:[a.jsx("li",{children:" Research-backed instructions for all 35+ UX tools"}),a.jsx("li",{children:" Knowledge base integration (CRITICAL feature)"}),a.jsx("li",{children:" Industry-specific adaptations"}),a.jsx("li",{children:" Quality assurance frameworks"}),a.jsx("li",{children:" AI optimization techniques"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:" Key Benefits:"}),a.jsxs("ul",{className:"space-y-1 text-sm",children:[a.jsx("li",{children:" Context-aware prompts using project knowledge"}),a.jsx("li",{children:" 2024 best practices from industry leaders"}),a.jsx("li",{children:" Automatic customization for different domains"}),a.jsx("li",{children:" Built-in quality validation"}),a.jsx("li",{children:" Systematic instruction generation"})]})]})]})})]})]})})})},SVe=()=>{const[e,t]=w.useState(""),[n,r]=w.useState(""),[s,i]=w.useState(""),[o,c]=w.useState(""),[l,d]=w.useState(!1),[u,h]=w.useState([]),{frameworks:A}=Us(),{toast:f}=ii(),m=A.find(C=>C.id===e),g=m==null?void 0:m.stages.find(C=>C.id===n),b=g==null?void 0:g.tools.find(C=>C.id===s),y=()=>{if(!(!m||!g||!b)){d(!0);try{const S=Ex({framework:m,stage:g,tool:b}),_=`# ${b.name} - Contextual AI Prompt Instructions

## Framework: ${m.name} | Stage: ${g.name}

${S.promptTemplate}

### Contextual Guidance:
${S.contextualGuidance.map(N=>` ${N}`).join(`
`)}

### Framework-Specific Notes:
${S.frameworkSpecificNotes.map(N=>` ${N}`).join(`
`)}

### Stage-Specific Focus:
${S.stageSpecificFocus.map(N=>` ${N}`).join(`
`)}

### Knowledge Integration Requirements:
${S.knowledgeIntegrationInstructions.map(N=>` ${N}`).join(`
`)}

### Quality Assurance:
${S.qualityChecks.map(N=>` ${N}`).join(`
`)}

### Expected Output:
${S.expectedOutputFormat}

---
*These instructions are specifically tailored for ${b.name} in the ${g.name} stage of ${m.name} methodology.*`;c(_)}catch(C){console.error("Error generating prompt:",C),f({title:"Error",description:"Failed to generate tool-specific prompt instructions.",variant:"destructive"})}finally{d(!1)}}},j=()=>{if(!b)return;d(!0);const C=[];try{[{frameworkId:"design-thinking",stageId:"empathize",label:"Design Thinking - Empathize"},{frameworkId:"design-thinking",stageId:"test",label:"Design Thinking - Test"},{frameworkId:"google-design-sprint",stageId:"understand",label:"Google Sprint - Understand"},{frameworkId:"lean-ux",stageId:"experiment",label:"Lean UX - Experiment"}].forEach(_=>{const N=A.find(F=>F.id===_.frameworkId),L=N==null?void 0:N.stages.find(F=>F.id===_.stageId),P=L==null?void 0:L.tools.find(F=>F.id===s);if(N&&L&&P){const I=Ex({framework:N,stage:L,tool:P});C.push({context:_.label,prompt:I.promptTemplate})}}),h(C)}catch(S){console.error("Error generating comparisons:",S)}finally{d(!1)}},x=async C=>{try{await navigator.clipboard.writeText(C),f({title:"Copied!",description:"Prompt instructions copied to clipboard."})}catch(S){console.error("Failed to copy:",S)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white p-4",children:a.jsxs("div",{className:"container mx-auto max-w-7xl space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Tool-Specific Prompt Instructions Demo"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"Each UX tool now generates unique, contextual AI prompts based on framework and stage"})]}),a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(Mr,{className:"w-5 h-5"}),"Select Context"]}),a.jsx(Kt,{children:"Choose a framework, stage, and tool to see context-specific AI prompt instructions"})]}),a.jsx(et,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Framework"}),a.jsxs(Vn,{value:e,onValueChange:t,children:[a.jsx(Qn,{children:a.jsx(qn,{placeholder:"Select framework"})}),a.jsx(Hn,{children:A.map(C=>a.jsx(qe,{value:C.id,children:C.name},C.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Stage"}),a.jsxs(Vn,{value:n,onValueChange:r,disabled:!m,children:[a.jsx(Qn,{children:a.jsx(qn,{placeholder:"Select stage"})}),a.jsx(Hn,{children:m==null?void 0:m.stages.map(C=>a.jsx(qe,{value:C.id,children:C.name},C.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Tool"}),a.jsxs(Vn,{value:s,onValueChange:i,disabled:!g,children:[a.jsx(Qn,{children:a.jsx(qn,{placeholder:"Select tool"})}),a.jsx(Hn,{children:g==null?void 0:g.tools.map(C=>a.jsx(qe,{value:C.id,children:C.name},C.id))})]})]}),a.jsx("div",{className:"space-y-2 flex flex-col justify-end",children:a.jsxs(fe,{onClick:y,disabled:!s||l,className:"w-full",children:[a.jsx(_p,{className:"w-4 h-4 mr-2"}),"Generate Prompt"]})})]})})]}),o&&a.jsxs(Ka,{defaultValue:"full-prompt",className:"w-full",children:[a.jsxs(ga,{className:"grid w-full grid-cols-2",children:[a.jsx(xn,{value:"full-prompt",children:"Full Prompt Instructions"}),a.jsx(xn,{value:"comparison",children:"Context Comparison"})]}),a.jsx(jn,{value:"full-prompt",children:a.jsxs(De,{children:[a.jsx(dt,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(CA,{className:"w-5 h-5"}),"Generated Instructions"]}),a.jsxs(Kt,{children:["Context-specific AI prompt instructions for ",b==null?void 0:b.name]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(_e,{variant:"outline",children:m==null?void 0:m.name}),a.jsx(_e,{variant:"outline",children:g==null?void 0:g.name}),a.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>x(o),children:[a.jsx(Ii,{className:"w-4 h-4 mr-2"}),"Copy"]})]})]})}),a.jsx(et,{children:a.jsx(ns,{className:"h-96 w-full",children:a.jsx("pre",{className:"text-sm whitespace-pre-wrap font-mono bg-gray-50 p-4 rounded border",children:o})})})]})}),a.jsx(jn,{value:"comparison",children:a.jsxs(De,{children:[a.jsx(dt,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(ft,{children:"Context Comparison"}),a.jsx(Kt,{children:"See how the same tool generates different prompts in different contexts"})]}),a.jsxs(fe,{variant:"outline",onClick:j,disabled:!s||l,children:[a.jsx(Mr,{className:"w-4 h-4 mr-2"}),"Generate Comparison"]})]})}),a.jsx(et,{children:u.length>0?a.jsxs("div",{className:"space-y-4",children:[u.map((C,S)=>a.jsxs(De,{className:"bg-gray-50",children:[a.jsx(dt,{className:"pb-3",children:a.jsxs(ft,{className:"text-base flex items-center gap-2",children:[a.jsx(br,{className:"w-4 h-4"}),C.context]})}),a.jsx(et,{className:"pt-0",children:a.jsx("pre",{className:"text-sm whitespace-pre-wrap font-mono bg-white p-3 rounded border",children:C.prompt})})]},S)),a.jsx(De,{className:"bg-green-50 border-green-200",children:a.jsxs(et,{className:"pt-6",children:[a.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[a.jsx(br,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:"Success!"})]}),a.jsxs("p",{className:"text-green-700 mt-1",children:["Each context generates unique, tailored prompt instructions. Notice how the same tool (",b==null?void 0:b.name,") produces different guidance based on the framework and stage context."]})]})})]}):a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'Click "Generate Comparison" to see how the same tool produces different prompts in different contexts'})})]})})]}),a.jsxs(De,{className:"bg-blue-50 border-blue-200",children:[a.jsx(dt,{children:a.jsx(ft,{className:"text-blue-900",children:" Tool-Specific Prompt System Benefits"})}),a.jsx(et,{className:"text-blue-800",children:a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:" What's Been Fixed:"}),a.jsxs("ul",{className:"space-y-1 text-sm",children:[a.jsx("li",{children:" Each tool now has unique, context-specific prompts"}),a.jsx("li",{children:" Framework context influences prompt generation"}),a.jsx("li",{children:" Stage context determines focus areas"}),a.jsx("li",{children:" Knowledge base integration is tool-specific"}),a.jsx("li",{children:" No more generic prompts across different tools"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:" Key Improvements:"}),a.jsxs("ul",{className:"space-y-1 text-sm",children:[a.jsx("li",{children:" 67 unique tools with contextual instructions"}),a.jsx("li",{children:" Framework-specific customizations"}),a.jsx("li",{children:" Stage-specific focus areas"}),a.jsx("li",{children:" Quality assurance guidelines"}),a.jsx("li",{children:" Expected output specifications"})]})]})]})})]})]})})},u8=cX,h8=uF,A8=AF,NVe=()=>{var M,U;const[e,t]=w.useState(!1),[n,r]=w.useState(""),[s,i]=w.useState(0),[o,c]=w.useState(null),[l,d]=w.useState([]),[u,h]=w.useState([]),[A,f]=w.useState(null),[m,g]=w.useState(!0),[b,y]=w.useState(2e3),[j,x]=w.useState(!1),{frameworks:C,initializeFrameworks:S}=Us();ma();const{createProject:_}=js(),{toast:N}=ii();w.useEffect(()=>{S()},[S]);const L=w.useCallback(async()=>{if(!C||C.length===0){N({title:"No frameworks loaded",description:"Please refresh the page and try again.",variant:"destructive"});return}t(!0),i(0),r("Initializing comprehensive stress test...");try{try{const ne=await _("AI Stress Test Project","Comprehensive testing of all UX frameworks, stages, and tools");console.log(" Test project created:",ne==null?void 0:ne.id)}catch{console.log(" Could not create project (not authenticated), continuing with test...")}const $=(await Td(()=>import("./ai-stress-test-runner-B_dRwcw8.js"),[])).default,R=async ne=>{var ae,ce;if(!m)return null;try{await new Promise(Pe=>setTimeout(Pe,b)),console.log(" Calling AI with real OpenAI API...");const pe=await fetch("https://drfaomantrtmtydbelxe.supabase.co/functions/v1/generate-ai-prompt",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRyZmFvbWFudHJ0bXR5ZGJlbHhlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1NTczNTAsImV4cCI6MjA3MTEzMzM1MH0.6oQtHv6OcLkdHvmBPkTnTHEIuF0_GudFxhebVg9atq0",apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRyZmFvbWFudHJ0bXR5ZGJlbHhlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1NTczNTAsImV4cCI6MjA3MTEzMzM1MH0.6oQtHv6OcLkdHvmBPkTnTHEIuF0_GudFxhebVg9atq0"},body:JSON.stringify({promptContent:ne.prompt,variables:ne.variables||{},projectId:"ai-stress-test-"+Date.now(),frameworkName:"AI Stress Test",stageName:"Validation",toolName:((ae=ne.variables)==null?void 0:ae.toolName)||"Unknown Tool",knowledgeContext:null})}),be=await pe.json(),Ne=pe.ok?null:{message:be.error||`HTTP ${pe.status}`};return Ne?(console.error(" AI Executor Error:",Ne),{success:!1,error:Ne.message}):be!=null&&be.success?(console.log(" Real AI Response received:",((ce=be.aiResponse)==null?void 0:ce.substring(0,100))+"..."),{success:!0,response:be.aiResponse||"No response content"}):(console.error(" AI Result Error:",be),{success:!1,error:(be==null?void 0:be.error)||"Unknown error"})}catch(Ae){return console.error(" AI Executor Exception:",Ae),{success:!1,error:Ae instanceof Error?Ae.message:"Unknown error"}}},Y=new $({useRealAI:m,aiDelayMs:b,simulateFailures:!0,aiExecutor:R});let X=C;j&&(X=C.slice(0,2),console.log(` Limited test mode: Testing ${X.length} frameworks`)),Y.setFrameworks(X);let q=0;const K=C.reduce((ne,ae)=>ne+ae.stages.reduce((ce,Ae)=>{var pe;return ce+(((pe=Ae.tools)==null?void 0:pe.length)||0)},0),0),J=Y.testTool.bind(Y);Y.testTool=async function(ne,ae,ce){r(`Testing ${ne.name}  ${ae.name}  ${ce.name}`);const Ae=await J(ne,ae,ce);q++;const pe=Math.floor(q/K*100);return i(pe),Ae};const W=await Y.runComprehensiveTest();c(W),r("Test completed successfully!"),i(100),N({title:"Stress test completed!",description:`Tested ${W.testedTools} tools across ${W.frameworks.length} frameworks`})}catch(H){console.error("Stress test failed:",H),r(`Test failed: ${H instanceof Error?H.message:"Unknown error"}`),N({title:"Test failed",description:H instanceof Error?H.message:"Unknown error occurred",variant:"destructive"})}finally{t(!1)}},[C,_,N]),P=H=>{d($=>$.includes(H)?$.filter(R=>R!==H):[...$,H])},F=H=>{h($=>$.includes(H)?$.filter(R=>R!==H):[...$,H])},I=()=>{if(!o)return;const H=JSON.stringify(o,null,2),$=new Blob([H],{type:"application/json"}),R=URL.createObjectURL($),Y=document.createElement("a");Y.href=R,Y.download=`ai-stress-test-results-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.json`,document.body.appendChild(Y),Y.click(),document.body.removeChild(Y),URL.revokeObjectURL(R)},T=async H=>{try{await navigator.clipboard.writeText(H),N({title:"Copied to clipboard",description:"Content copied successfully"})}catch{N({title:"Copy failed",description:"Unable to copy to clipboard",variant:"destructive"})}},Q=(H,$)=>$===0?0:(H/$*100).toFixed(1),D=H=>H>=90?"text-green-600":H>=70?"text-yellow-600":"text-red-600";return a.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"AI Stress Test"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"Comprehensive testing of all UX frameworks, stages, and tools with AI prompt generation"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs(fe,{onClick:L,disabled:e,size:"lg",children:[a.jsx(Kd,{className:"w-4 h-4 mr-2"}),e?"Running Test...":"Start Stress Test"]}),o&&a.jsxs(fe,{onClick:I,variant:"outline",size:"lg",children:[a.jsx(Vp,{className:"w-4 h-4 mr-2"}),"Export Results"]})]})]}),!e&&!o&&a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsx(ft,{children:"Test Configuration"}),a.jsx(Kt,{children:"Configure how the AI stress test should run"})]}),a.jsxs(et,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"useRealAI",checked:m,onChange:H=>g(H.target.checked),className:"rounded border-gray-300"}),a.jsx("label",{htmlFor:"useRealAI",className:"text-sm font-medium",children:"Use Real AI (vs Simulated)"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"testLimited",checked:j,onChange:H=>x(H.target.checked),className:"rounded border-gray-300"}),a.jsx("label",{htmlFor:"testLimited",className:"text-sm font-medium",children:"Limited Test (2 frameworks only)"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{htmlFor:"aiDelay",className:"text-sm font-medium whitespace-nowrap",children:"AI Delay (ms):"}),a.jsxs("select",{id:"aiDelay",value:b,onChange:H=>y(Number(H.target.value)),className:"flex h-8 rounded-md border border-input bg-gradient-to-br from-gray-50 to-white px-2 py-1 text-xs",children:[a.jsx("option",{value:"0",children:"No delay"}),a.jsx("option",{value:"1000",children:"1 second"}),a.jsx("option",{value:"2000",children:"2 seconds"}),a.jsx("option",{value:"3000",children:"3 seconds"}),a.jsx("option",{value:"5000",children:"5 seconds"})]})]})]}),m&&a.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:a.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",a.jsx("strong",{children:"Real AI Mode:"})," This will make actual API calls to generate responses for all ",j?"~30":"152"," tools.",b>0&&` With ${b/1e3}s delay, this will take approximately ${Math.ceil((j?30:152)*b/6e4)} minutes.`]})}),!m&&a.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md",children:a.jsxs("p",{className:"text-sm text-blue-800",children:[" ",a.jsx("strong",{children:"Simulation Mode:"})," This will generate prompts but use simulated AI responses for testing the UI and workflow."]})})]})]}),e&&a.jsxs(De,{children:[a.jsx(dt,{children:a.jsxs(ft,{className:"flex items-center",children:[a.jsx(Cc,{className:"w-5 h-5 mr-2"}),"Test in Progress"]})}),a.jsxs(et,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium",children:"Overall Progress"}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:[s,"%"]})]}),a.jsx(bl,{value:s,className:"w-full"})]}),a.jsx("div",{className:"text-sm text-muted-foreground",children:n})]})]}),o&&a.jsxs(Ka,{defaultValue:"overview",className:"w-full",children:[a.jsxs(ga,{className:"grid w-full grid-cols-4",children:[a.jsx(xn,{value:"overview",children:"Overview"}),a.jsx(xn,{value:"frameworks",children:"Frameworks"}),a.jsx(xn,{value:"prompts",children:"Prompts"}),a.jsx(xn,{value:"errors",children:"Errors"})]}),a.jsxs(jn,{value:"overview",className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs(De,{children:[a.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ft,{className:"text-sm font-medium",children:"Total Tools"}),a.jsx(Mr,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(et,{children:[a.jsx("div",{className:"text-2xl font-bold",children:o.totalTools}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Across ",o.frameworks.length," frameworks"]})]})]}),a.jsxs(De,{children:[a.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ft,{className:"text-sm font-medium",children:"Success Rate"}),a.jsx(h7,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(et,{children:[a.jsxs("div",{className:`text-2xl font-bold ${D(Number(Q(o.successfulPrompts,o.testedTools)))}`,children:[Q(o.successfulPrompts,o.testedTools),"%"]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[o.successfulPrompts,"/",o.testedTools," prompts generated"]})]})]}),a.jsxs(De,{children:[a.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ft,{className:"text-sm font-medium",children:"AI Executions"}),a.jsx(Cc,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(et,{children:[a.jsx("div",{className:`text-2xl font-bold ${D(Number(Q(o.successfulExecutions,o.successfulPrompts)))}`,children:o.successfulExecutions}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[Q(o.successfulExecutions,o.successfulPrompts),"% execution rate"]})]})]}),a.jsxs(De,{children:[a.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ft,{className:"text-sm font-medium",children:"Execution Time"}),a.jsx(Jo,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(et,{children:[a.jsxs("div",{className:"text-2xl font-bold",children:[(o.executionTime/1e3).toFixed(1),"s"]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Total test duration"})]})]})]}),a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsx(ft,{children:"Framework Summary"}),a.jsx(Kt,{children:"Performance breakdown by UX framework"})]}),a.jsx(et,{children:a.jsx("div",{className:"space-y-4",children:o.frameworks.map(H=>a.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium",children:H.name}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[H.stages.length," stages, ",H.totalTools," tools"]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:`font-semibold ${D(Number(Q(H.successfulPrompts,H.testedTools)))}`,children:[Q(H.successfulPrompts,H.testedTools),"%"]}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[H.successfulPrompts,"/",H.testedTools]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(_e,{variant:"outline",children:[a.jsx(br,{className:"w-3 h-3 mr-1"}),H.successfulPrompts]}),H.failedPrompts>0&&a.jsxs(_e,{variant:"destructive",children:[a.jsx(up,{className:"w-3 h-3 mr-1"}),H.failedPrompts]})]})]})]},H.id))})})]})]}),a.jsx(jn,{value:"frameworks",className:"space-y-4",children:a.jsx(ns,{className:"h-[800px]",children:o.frameworks.map(H=>a.jsx(De,{className:"mb-4",children:a.jsxs(u8,{children:[a.jsx(h8,{className:"w-full",onClick:()=>P(H.id),children:a.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2 hover:bg-muted/50",children:[a.jsxs("div",{className:"text-left",children:[a.jsxs(ft,{className:"flex items-center",children:[l.includes(H.id)?a.jsx(Ic,{className:"w-4 h-4 mr-2"}):a.jsx(_r,{className:"w-4 h-4 mr-2"}),H.name]}),a.jsx(Kt,{children:H.description})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(_e,{variant:"outline",children:[H.stages.length," stages"]}),a.jsxs(_e,{variant:"outline",children:[H.totalTools," tools"]}),a.jsxs(_e,{className:Q(H.successfulPrompts,H.testedTools)==="100.0"?"bg-green-500":"bg-yellow-500",children:[Q(H.successfulPrompts,H.testedTools),"%"]})]})]})}),a.jsx(A8,{children:a.jsx(et,{className:"pt-0",children:a.jsx("div",{className:"space-y-3",children:H.stages.map($=>a.jsx(De,{className:"border-l-4 border-l-blue-500",children:a.jsxs(u8,{children:[a.jsx(h8,{className:"w-full",onClick:()=>F(`${H.id}-${$.id}`),children:a.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2 hover:bg-muted/50",children:[a.jsx("div",{className:"text-left",children:a.jsxs(ft,{className:"text-lg flex items-center",children:[u.includes(`${H.id}-${$.id}`)?a.jsx(Ic,{className:"w-4 h-4 mr-2"}):a.jsx(_r,{className:"w-4 h-4 mr-2"}),$.name]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(_e,{variant:"secondary",children:[$.totalTools," tools"]}),a.jsxs(_e,{className:Q($.successfulPrompts,$.testedTools)==="100.0"?"bg-green-500":"bg-yellow-500",children:[Q($.successfulPrompts,$.testedTools),"%"]})]})]})}),a.jsx(A8,{children:a.jsx(et,{className:"pt-0",children:a.jsx("div",{className:"grid gap-3",children:$.tools.map(R=>{var Y;return a.jsxs("div",{className:"flex items-center justify-between p-3 border rounded cursor-pointer hover:bg-muted/50",onClick:()=>f(R),children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h5",{className:"font-medium",children:R.name}),a.jsx("p",{className:"text-sm text-muted-foreground",children:R.description}),a.jsxs("div",{className:"flex gap-2 mt-1",children:[a.jsx(_e,{variant:"outline",className:"text-xs",children:R.category}),a.jsx(_e,{variant:"outline",className:"text-xs",children:((Y=R.characteristics)==null?void 0:Y.effort)||"N/A"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[R.promptGenerated?a.jsx(br,{className:"w-5 h-5 text-green-500"}):a.jsx(up,{className:"w-5 h-5 text-red-500"}),R.aiExecuted&&a.jsx(Cc,{className:"w-5 h-5 text-blue-500"}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:[R.executionTime,"ms"]})]})]},R.id)})})})})]})},$.id))})})})]})},H.id))})}),a.jsx(jn,{value:"prompts",className:"space-y-4",children:A?a.jsxs(De,{children:[a.jsx(dt,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs(ft,{className:"flex items-center",children:[a.jsx(In,{className:"w-5 h-5 mr-2"}),A.name]}),a.jsx(Kt,{children:A.description})]}),a.jsx(fe,{variant:"outline",onClick:()=>f(null),children:"Close"})]})}),a.jsx(et,{children:a.jsxs(Ka,{defaultValue:"prompt",children:[a.jsxs(ga,{children:[a.jsx(xn,{value:"prompt",children:"Generated Prompt"}),a.jsx(xn,{value:"response",children:"AI Response"}),a.jsx(xn,{value:"details",children:"Details"})]}),a.jsxs(jn,{value:"prompt",children:[a.jsx(ns,{className:"h-96 w-full rounded border p-4",children:a.jsx("pre",{className:"text-sm whitespace-pre-wrap",children:A.generatedPrompt||"No prompt generated"})}),a.jsx("div",{className:"mt-2",children:a.jsxs(fe,{size:"sm",variant:"outline",onClick:()=>A.generatedPrompt&&T(A.generatedPrompt),disabled:!A.generatedPrompt,children:[a.jsx(Ii,{className:"w-4 h-4 mr-2"}),"Copy Prompt"]})})]}),a.jsx(jn,{value:"response",children:a.jsx(ns,{className:"h-96 w-full rounded border p-4",children:a.jsx("div",{className:"text-sm whitespace-pre-wrap",children:A.aiResponse||"No AI response available"})})}),a.jsx(jn,{value:"details",children:a.jsxs("div",{className:"grid gap-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-2",children:"Tool Characteristics"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium",children:"Effort:"}),a.jsx("span",{className:"text-sm ml-2",children:((M=A.characteristics)==null?void 0:M.effort)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium",children:"Expertise:"}),a.jsx("span",{className:"text-sm ml-2",children:((U=A.characteristics)==null?void 0:U.expertise)||"N/A"})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-2",children:"Test Results"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium",children:"Prompt Generated:"}),A.promptGenerated?a.jsx(br,{className:"w-4 h-4 text-green-500"}):a.jsx(up,{className:"w-4 h-4 text-red-500"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium",children:"AI Executed:"}),A.aiExecuted?a.jsx(br,{className:"w-4 h-4 text-green-500"}):a.jsx(up,{className:"w-4 h-4 text-red-500"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium",children:"Execution Time:"}),a.jsxs("span",{className:"text-sm ml-2",children:[A.executionTime,"ms"]})]})]})]}),A.errors&&A.errors.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-2 text-red-600",children:"Errors"}),a.jsx("div",{className:"space-y-2",children:A.errors.map((H,$)=>a.jsxs("div",{className:"p-2 bg-red-50 border border-red-200 rounded text-sm",children:[a.jsx("div",{className:"font-medium",children:H.type}),a.jsx("div",{children:H.message}),a.jsx("div",{className:"text-xs text-muted-foreground",children:H.timestamp})]},$))})]})]})})]})})]}):a.jsx(De,{children:a.jsxs(et,{className:"text-center p-8",children:[a.jsx(In,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium mb-2",children:"Select a Tool"}),a.jsx("p",{className:"text-muted-foreground",children:"Click on any tool in the Frameworks tab to view its generated prompt and AI response."})]})})}),a.jsx(jn,{value:"errors",className:"space-y-4",children:o.errors&&o.errors.length>0?a.jsx(ns,{className:"h-96",children:a.jsx("div",{className:"space-y-3",children:o.errors.map((H,$)=>a.jsxs(De,{className:"border-l-4 border-l-red-500",children:[a.jsx(dt,{className:"pb-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(BC,{className:"w-4 h-4 text-red-500"}),a.jsx(_e,{variant:"destructive",children:H.type}),H.framework&&a.jsx(_e,{variant:"outline",children:H.framework}),H.stage&&a.jsx(_e,{variant:"outline",children:H.stage}),H.tool&&a.jsx(_e,{variant:"outline",children:H.tool})]})}),a.jsxs(et,{children:[a.jsx("p",{className:"text-sm",children:H.message}),a.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:H.timestamp})]})]},$))})}):a.jsx(De,{children:a.jsxs(et,{className:"text-center p-8",children:[a.jsx(br,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Errors Found"}),a.jsx("p",{className:"text-muted-foreground",children:"All tests completed successfully without any errors."})]})})})]}),!o&&!e&&a.jsx(De,{children:a.jsx(et,{className:"text-center p-12",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto",children:a.jsx(Cc,{className:"w-8 h-8 text-primary"})}),a.jsx("h3",{className:"text-xl font-medium",children:"Ready to Start AI Stress Test"}),a.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:"This comprehensive test will evaluate all UX frameworks, stages, and tools by generating AI prompts and executing them to validate the complete system functionality."}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-md mx-auto mt-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-primary",children:(C==null?void 0:C.length)||0}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Frameworks"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-primary",children:(C==null?void 0:C.reduce((H,$)=>H+$.stages.reduce((R,Y)=>{var X;return R+(((X=Y.tools)==null?void 0:X.length)||0)},0),0))||0}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Tools"})]})]})]})})})]})};function BVe(){const{user:e}=Dc(),t=Vi(),[n,r]=qv(),[s,i]=w.useState(n.get("id")||""),[o,c]=w.useState(!1),[l,d]=w.useState(!1);w.useEffect(()=>{if(!e){t("/auth");return}},[e,t]),w.useEffect(()=>{const m=n.get("id");m&&!o&&(i(m),u(m))},[n]);const u=async m=>{const g=m||s;if(!g.trim()){Ue.error("Please enter a Miro board ID");return}d(!0);try{r({id:g.trim()}),c(!0),i(g.trim()),Ue.success("Connecting to Miro board...",{description:"Board will appear below once validated"})}catch(b){console.error("Board connection error:",b),Ue.error("Failed to connect to board"),c(!1)}finally{d(!1)}},h=()=>{c(!1),i(""),r({}),Ue.success("Disconnected from Miro board")},A=()=>{t("/")},f=()=>{t("/",{state:{openDeliveryDashboard:!0}})};return e?a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:[a.jsx("header",{className:"border-b bg-card/50 backdrop-blur-sm sticky top-0 z-40",children:a.jsx("div",{className:"container mx-auto px-4 py-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(fe,{variant:"ghost",size:"sm",onClick:A,className:"flex items-center gap-2",children:[a.jsx(yo,{className:"w-4 h-4"}),"Back to Workflow"]}),a.jsx("div",{className:"h-6 w-px bg-border"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-[#FFD02F] rounded-lg flex items-center justify-center text-black font-bold text-sm",children:"M"}),a.jsxs("div",{children:[a.jsx("h1",{className:"font-semibold text-lg",children:"Miro Board Workspace"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:o&&s?`Board: ${s}`:"Connect to a Miro board"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(fe,{variant:"outline",size:"sm",onClick:f,className:"flex items-center gap-2",children:[a.jsx(U5,{className:"w-4 h-4"}),"Delivery Dashboard"]}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>t("/"),children:a.jsx(vue,{className:"w-4 h-4"})})]})]})})}),a.jsx("div",{className:"container mx-auto p-6 max-w-7xl",children:o?a.jsxs(ot.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Board Workspace"}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx("span",{children:"Connected to:"}),a.jsx("code",{className:"bg-muted px-2 py-1 rounded text-xs font-mono",children:s})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>{window.open(`https://miro.com/app/board/${s}/`,"_blank")},children:[a.jsx(Hu,{className:"w-4 h-4 mr-2"}),"Open in Miro"]}),a.jsx(fe,{variant:"outline",size:"sm",onClick:h,children:"Disconnect"})]})]}),a.jsx("div",{className:"rounded-lg border-2 border-primary/10 overflow-hidden",children:a.jsx(SX,{boardId:s,projectId:e==null?void 0:e.id,isVisible:!0,showControls:!0,autoResize:!1,className:"min-h-[80vh]"})})]}):a.jsx(ot.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-2xl mx-auto",children:a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsxs(ft,{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-[#FFD02F] rounded-full flex items-center justify-center text-black font-bold",children:"M"}),"Connect to Miro Board"]}),a.jsx("p",{className:"text-muted-foreground",children:"Enter your Miro board ID to embed and interact with your board directly in FramePromptly"})]}),a.jsxs(et,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(at,{htmlFor:"board-id",children:"Miro Board ID"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(ln,{id:"board-id",placeholder:"Enter board ID (e.g., uXjVKMeWJv4=)",value:s,onChange:m=>i(m.target.value),onKeyDown:m=>{m.key==="Enter"&&!l&&u()},className:"flex-1"}),a.jsx(fe,{onClick:()=>u(),disabled:l||!s.trim(),className:"flex items-center gap-2",children:l?a.jsxs(a.Fragment,{children:[a.jsx(Cr,{className:"w-4 h-4 animate-spin"}),"Connecting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(zr,{className:"w-4 h-4"}),"Connect"]})})]}),a.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[a.jsx("p",{children:"Find the board ID in your Miro board URL:"}),a.jsxs("p",{className:"font-mono bg-muted px-3 py-2 rounded border",children:["miro.com/app/board/",a.jsx("span",{className:"text-primary font-bold",children:"uXjVKMeWJv4="}),"/"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Note:"})," You need edit permissions on the board to deliver content. View-only access will allow board previewing but not content delivery."]})]})]}),a.jsxs(za,{children:[a.jsx(ts,{className:"h-4 w-4"}),a.jsxs(Va,{children:[a.jsx("strong",{children:"First time connecting?"})," Make sure you've connected your Miro account in the Delivery Dashboard connection settings."]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs(fe,{variant:"outline",onClick:f,className:"flex items-center gap-2 flex-1",children:[a.jsx(us,{className:"w-4 h-4"}),"Connection Settings"]}),a.jsxs(fe,{variant:"outline",onClick:A,className:"flex items-center gap-2 flex-1",children:[a.jsx(yo,{className:"w-4 h-4"}),"Back to Workflow"]})]})]})]})})})]}):a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(Cr,{className:"w-8 h-8 animate-spin"})})}function EVe(){return lW.useSyncExternalStore(_Ve,()=>!0,()=>!1)}function _Ve(){return()=>{}}var KF="Avatar",[IVe,wqe]=Cs(KF),[PVe,Lte]=IVe(KF),Mte=w.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[s,i]=w.useState("idle");return a.jsx(PVe,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:a.jsx(gt.span,{...r,ref:t})})});Mte.displayName=KF;var Rte="AvatarImage",Ote=w.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=e,o=Lte(Rte,n),c=TVe(r,i),l=Nr(d=>{s(d),o.onImageLoadingStatusChange(d)});return Tr(()=>{c!=="idle"&&l(c)},[c,l]),c==="loaded"?a.jsx(gt.img,{...i,ref:t,src:r}):null});Ote.displayName=Rte;var Qte="AvatarFallback",Hte=w.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...s}=e,i=Lte(Qte,n),[o,c]=w.useState(r===void 0);return w.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(l)}},[r]),o&&i.imageLoadingStatus!=="loaded"?a.jsx(gt.span,{...s,ref:t}):null});Hte.displayName=Qte;function f8(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function TVe(e,{referrerPolicy:t,crossOrigin:n}){const r=EVe(),s=w.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[o,c]=w.useState(()=>f8(i,e));return Tr(()=>{c(f8(i,e))},[i,e]),Tr(()=>{const l=h=>()=>{c(h)};if(!i)return;const d=l("loaded"),u=l("error");return i.addEventListener("load",d),i.addEventListener("error",u),t&&(i.referrerPolicy=t),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",d),i.removeEventListener("error",u)}},[i,n,t]),o}var $te=Mte,zte=Ote,Vte=Hte;const tC=w.forwardRef(({className:e,...t},n)=>a.jsx($te,{ref:n,className:$e("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));tC.displayName=$te.displayName;const XI=w.forwardRef(({className:e,...t},n)=>a.jsx(zte,{ref:n,className:$e("aspect-square h-full w-full",e),...t}));XI.displayName=zte.displayName;const nC=w.forwardRef(({className:e,...t},n)=>a.jsx(Vte,{ref:n,className:$e("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));nC.displayName=Vte.displayName;function FVe(){const{toast:e}=ii(),{shares:t,fetchAllUserShares:n}=NJ(),[r,s]=w.useState(null),[i,o]=w.useState({notifications:!0,theme:"system",language:"en",timezone:"UTC",auto_save:!0,collaboration_notifications:!0}),[c,l]=w.useState(!0),[d,u]=w.useState(!1),[h,A]=w.useState("profile"),[f,m]=w.useState(""),[g,b]=w.useState(""),[y,j]=w.useState(""),[x,C]=w.useState(!1),[S,_]=w.useState(!1),[N,L]=w.useState(!1),[P,F]=w.useState(""),[I,T]=w.useState(null),[Q,D]=w.useState(null);w.useEffect(()=>{M(),n()},[]);const M=async()=>{var K,J;try{l(!0);const{data:{user:W}}=await rt.auth.getUser();if(W){const ne={id:W.id,email:W.email||"",full_name:((K=W.user_metadata)==null?void 0:K.full_name)||"",avatar_url:((J=W.user_metadata)==null?void 0:J.avatar_url)||"",created_at:W.created_at||"",user_type:"premium"};s(ne),F(ne.full_name||""),D(ne.avatar_url||null);const ae=localStorage.getItem("user-settings");ae&&o(JSON.parse(ae))}}catch(W){console.error("Error loading profile:",W),e({title:"Error",description:"Failed to load profile information",variant:"destructive"})}finally{l(!1)}},U=K=>{var W;const J=(W=K.target.files)==null?void 0:W[0];if(J){if(J.size>5*1024*1024){e({title:"File too large",description:"Please select an image smaller than 5MB",variant:"destructive"});return}if(!J.type.startsWith("image/")){e({title:"Invalid file type",description:"Please select an image file",variant:"destructive"});return}T(J);const ne=new FileReader;ne.onload=ae=>{var ce;D((ce=ae.target)==null?void 0:ce.result)},ne.readAsDataURL(J)}},H=async K=>{var J;try{const{data:{user:W}}=await rt.auth.getUser();if(!W)return null;const ne=K.name.split(".").pop(),ce=`avatars/${`${W.id}-${Date.now()}.${ne}`}`,{error:Ae}=await rt.storage.from("avatars").upload(ce,K);if(Ae){if((J=Ae.message)!=null&&J.includes("Bucket not found"))return console.warn("Avatars bucket not configured yet. Skipping profile picture upload."),null;throw Ae}const{data:{publicUrl:pe}}=rt.storage.from("avatars").getPublicUrl(ce);return pe}catch(W){throw console.error("Error uploading profile picture:",W),W}},$=async()=>{try{u(!0);const{data:{user:K}}=await rt.auth.getUser();if(!K)return;let J=r==null?void 0:r.avatar_url;if(I){const ne=await H(I);ne&&(J=ne)}const{error:W}=await rt.auth.updateUser({data:{full_name:P,avatar_url:J}});if(W)throw W;s(ne=>ne?{...ne,full_name:P,avatar_url:J||ne.avatar_url}:null),T(null),e({title:"Profile Updated",description:"Your profile has been successfully updated"})}catch(K){console.error("Error saving profile:",K),e({title:"Error",description:"Failed to update profile",variant:"destructive"})}finally{u(!1)}},R=async()=>{if(g!==y){e({title:"Password Mismatch",description:"New password and confirmation don't match",variant:"destructive"});return}if(g.length<6){e({title:"Password Too Short",description:"Password must be at least 6 characters long",variant:"destructive"});return}try{u(!0);const{error:K}=await rt.auth.updateUser({password:g});if(K)throw K;m(""),b(""),j(""),e({title:"Password Changed",description:"Your password has been successfully updated"})}catch(K){console.error("Error changing password:",K),e({title:"Error",description:"Failed to change password",variant:"destructive"})}finally{u(!1)}},Y=async()=>{try{localStorage.setItem("user-settings",JSON.stringify(i)),e({title:"Settings Saved",description:"Your preferences have been saved"})}catch{e({title:"Error",description:"Failed to save settings",variant:"destructive"})}},X=K=>K.split(" ").map(J=>J[0]).join("").toUpperCase().slice(0,2),q=K=>new Date(K).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return c?a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:[a.jsx(Lr,{}),a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading profile..."})]})})]}):r?a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:[a.jsx(Lr,{}),a.jsxs(ot.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border-b border-gray-100 p-6",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[a.jsxs(tC,{className:"w-16 h-16",children:[a.jsx(XI,{src:Q||r.avatar_url}),a.jsx(nC,{className:"text-lg font-semibold",children:X(r.full_name||r.email)})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:r.full_name||"User Profile"}),a.jsx("p",{className:"text-gray-600 mt-1",children:r.email}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsxs(_e,{variant:"default",className:"bg-gradient-to-r from-purple-500 to-blue-500 text-white",children:[a.jsx(NC,{className:"w-3 h-3 mr-1"}),"Premium"]}),a.jsxs("span",{className:"text-sm text-gray-600",children:["Member since ",q(r.created_at)]})]})]})]})})}),a.jsx("main",{className:"container mx-auto px-4 py-8",children:a.jsxs(Ka,{value:h,onValueChange:A,className:"w-full",children:[a.jsxs(ga,{className:"grid w-full grid-cols-4",children:[a.jsxs(xn,{value:"profile",className:"flex items-center gap-2",children:[a.jsx(Qd,{className:"w-4 h-4"}),"Profile"]}),a.jsxs(xn,{value:"security",className:"flex items-center gap-2",children:[a.jsx(xU,{className:"w-4 h-4"}),"Security"]}),a.jsxs(xn,{value:"settings",className:"flex items-center gap-2",children:[a.jsx(us,{className:"w-4 h-4"}),"Settings"]}),a.jsxs(xn,{value:"sharing",className:"flex items-center gap-2",children:[a.jsx(uhe,{className:"w-4 h-4"}),"Sharing"]})]}),a.jsx(jn,{value:"profile",className:"mt-6",children:a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(Qd,{className:"w-5 h-5"}),"Profile Information"]}),a.jsx(Kt,{children:"Update your profile information and profile picture"})]}),a.jsxs(et,{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(tC,{className:"w-20 h-20",children:[a.jsx(XI,{src:Q||r.avatar_url}),a.jsx(nC,{className:"text-xl font-semibold",children:X(r.full_name||r.email)})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-medium text-sm mb-2",children:"Profile Picture"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(fe,{variant:"outline",size:"sm",className:"relative overflow-hidden",children:[a.jsx(Sde,{className:"w-4 h-4 mr-2"}),"Choose Image",a.jsx("input",{type:"file",accept:"image/*",onChange:U,className:"absolute inset-0 opacity-0 cursor-pointer"})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"JPG, PNG up to 5MB"})]})]})]}),a.jsx(qd,{}),a.jsxs("div",{className:"grid gap-4",children:[a.jsxs("div",{children:[a.jsx(at,{htmlFor:"fullName",children:"Full Name"}),a.jsx(ln,{id:"fullName",value:P,onChange:K=>F(K.target.value),placeholder:"Enter your full name",className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx(at,{htmlFor:"email",children:"Email Address"}),a.jsx(ln,{id:"email",value:r.email,disabled:!0,className:"mt-1 bg-muted"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Email cannot be changed from this page"})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs(fe,{onClick:$,disabled:d,children:[a.jsx(Od,{className:"w-4 h-4 mr-2"}),d?"Saving...":"Save Changes"]})})]})]})}),a.jsx(jn,{value:"security",className:"mt-6",children:a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(qp,{className:"w-5 h-5"}),"Password & Security"]}),a.jsx(Kt,{children:"Manage your password and security settings"})]}),a.jsxs(et,{className:"space-y-6",children:[a.jsxs("div",{className:"grid gap-4",children:[a.jsxs("div",{children:[a.jsx(at,{htmlFor:"currentPassword",children:"Current Password"}),a.jsxs("div",{className:"relative mt-1",children:[a.jsx(ln,{id:"currentPassword",type:x?"text":"password",value:f,onChange:K=>m(K.target.value),placeholder:"Enter current password"}),a.jsx(fe,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>C(!x),children:x?a.jsx(F0,{className:"h-4 w-4"}):a.jsx(zr,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{children:[a.jsx(at,{htmlFor:"newPassword",children:"New Password"}),a.jsxs("div",{className:"relative mt-1",children:[a.jsx(ln,{id:"newPassword",type:S?"text":"password",value:g,onChange:K=>b(K.target.value),placeholder:"Enter new password"}),a.jsx(fe,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>_(!S),children:S?a.jsx(F0,{className:"h-4 w-4"}):a.jsx(zr,{className:"h-4 w-4"})})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Must be at least 6 characters long"})]}),a.jsxs("div",{children:[a.jsx(at,{htmlFor:"confirmPassword",children:"Confirm New Password"}),a.jsxs("div",{className:"relative mt-1",children:[a.jsx(ln,{id:"confirmPassword",type:N?"text":"password",value:y,onChange:K=>j(K.target.value),placeholder:"Confirm new password"}),a.jsx(fe,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>L(!N),children:N?a.jsx(F0,{className:"h-4 w-4"}):a.jsx(zr,{className:"h-4 w-4"})})]})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs(fe,{onClick:R,disabled:d||!g||!y,children:[a.jsx(xU,{className:"w-4 h-4 mr-2"}),d?"Updating...":"Change Password"]})})]})]})}),a.jsx(jn,{value:"settings",className:"mt-6",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(yde,{className:"w-5 h-5"}),"Notifications"]}),a.jsx(Kt,{children:"Manage your notification preferences"})]}),a.jsxs(et,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(at,{htmlFor:"notifications",children:"Push Notifications"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications about important updates"})]}),a.jsx(qA,{id:"notifications",checked:i.notifications,onCheckedChange:K=>o(J=>({...J,notifications:K}))})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(at,{htmlFor:"collaboration",children:"Collaboration Notifications"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified when someone shares a project with you"})]}),a.jsx(qA,{id:"collaboration",checked:i.collaboration_notifications,onCheckedChange:K=>o(J=>({...J,collaboration_notifications:K}))})]})]})]}),a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(w7,{className:"w-5 h-5"}),"Appearance"]}),a.jsx(Kt,{children:"Customize the look and feel of the application"})]}),a.jsx(et,{className:"space-y-4",children:a.jsxs("div",{children:[a.jsx(at,{htmlFor:"theme",children:"Theme"}),a.jsxs(Vn,{value:i.theme,onValueChange:K=>o(J=>({...J,theme:K})),children:[a.jsx(Qn,{className:"mt-1",children:a.jsx(qn,{})}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"light",children:"Light"}),a.jsx(qe,{value:"dark",children:"Dark"}),a.jsx(qe,{value:"system",children:"System"})]})]})]})})]}),a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(p7,{className:"w-5 h-5"}),"Preferences"]}),a.jsx(Kt,{children:"Configure your application preferences"})]}),a.jsxs(et,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(at,{htmlFor:"language",children:"Language"}),a.jsxs(Vn,{value:i.language,onValueChange:K=>o(J=>({...J,language:K})),children:[a.jsx(Qn,{className:"mt-1",children:a.jsx(qn,{})}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"en",children:"English"}),a.jsx(qe,{value:"es",children:"Espaol"}),a.jsx(qe,{value:"fr",children:"Franais"}),a.jsx(qe,{value:"de",children:"Deutsch"})]})]})]}),a.jsxs("div",{children:[a.jsx(at,{htmlFor:"timezone",children:"Timezone"}),a.jsxs(Vn,{value:i.timezone,onValueChange:K=>o(J=>({...J,timezone:K})),children:[a.jsx(Qn,{className:"mt-1",children:a.jsx(qn,{})}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"UTC",children:"UTC"}),a.jsx(qe,{value:"America/New_York",children:"Eastern Time"}),a.jsx(qe,{value:"America/Chicago",children:"Central Time"}),a.jsx(qe,{value:"America/Denver",children:"Mountain Time"}),a.jsx(qe,{value:"America/Los_Angeles",children:"Pacific Time"}),a.jsx(qe,{value:"Europe/London",children:"London"}),a.jsx(qe,{value:"Europe/Paris",children:"Paris"}),a.jsx(qe,{value:"Asia/Tokyo",children:"Tokyo"})]})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(at,{htmlFor:"auto_save",children:"Auto-save"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically save your work as you type"})]}),a.jsx(qA,{id:"auto_save",checked:i.auto_save,onCheckedChange:K=>o(J=>({...J,auto_save:K}))})]})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs(fe,{onClick:Y,children:[a.jsx(Od,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})]})}),a.jsx(jn,{value:"sharing",className:"mt-6",children:a.jsxs(De,{children:[a.jsxs(dt,{children:[a.jsxs(ft,{className:"flex items-center gap-2",children:[a.jsx(qa,{className:"w-5 h-5"}),"Shared Projects"]}),a.jsx(Kt,{children:"View and manage projects you've shared with others"})]}),a.jsx(et,{children:t.length>0?a.jsx("div",{className:"space-y-4",children:t.map(K=>a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(tC,{className:"w-10 h-10",children:a.jsx(nC,{children:X(K.shared_with_email)})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:K.shared_with_email}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Shared ",q(K.shared_at),"  ",K.status]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_e,{variant:K.role==="editor"?"default":"secondary",children:K.role}),a.jsx(fe,{variant:"ghost",size:"sm",children:a.jsx(Rv,{className:"w-4 h-4"})})]})]},K.id))}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(qa,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),a.jsx("h3",{className:"font-medium text-lg mb-2",children:"No shared projects"}),a.jsx("p",{className:"text-muted-foreground",children:"Projects you share with others will appear here"})]})})]})})]})})]})]}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:[a.jsx(Lr,{}),a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Profile Not Found"}),a.jsx("p",{className:"text-muted-foreground",children:"Unable to load your profile information."})]})})]})}function DVe(){const[e]=qv(),t=Vi(),{user:n,loading:r}=Dc(),{toast:s}=ii(),{setCurrentProject:i,fetchProjects:o}=js(),[c,l]=w.useState(null),[d,u]=w.useState(!0);w.useState(!1);const[h,A]=w.useState(null),[f,m]=w.useState(!1),g=e.get("token");w.useEffect(()=>{if(!g){A("No invitation token provided"),u(!1);return}r||(n?(s({title:"Check your invitations",description:"View your pending project invitation in the Projects page"}),t("/projects")):t(`/auth?invitation=${g}`))},[g,r,n,t,s]);const b=async()=>{if(c!=null&&c.projectId){const x=await o(),C=x==null?void 0:x.find(S=>S.id===c.projectId);C?(i(C),t("/workflow")):s({title:"Error",description:"Could not find the project. Please try refreshing the page.",variant:"destructive"})}},y=x=>{switch(x){case"editor":return a.jsx(Sd,{className:"w-4 h-4"});case"viewer":return a.jsx(zr,{className:"w-4 h-4"});case"owner":return a.jsx(NC,{className:"w-4 h-4"});default:return a.jsx(qp,{className:"w-4 h-4"})}},j=x=>{switch(x){case"editor":return"Edit workflows, create prompts, and collaborate on project content";case"viewer":return"View project content, workflows, and documentation";default:return"Access project resources"}};return d||r?a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:[a.jsx(Lr,{}),a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx(De,{className:"w-full max-w-md",children:a.jsx(et,{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto"}),a.jsx("p",{className:"text-muted-foreground",children:"Checking invitation..."})]})})})})]}):h?a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:[a.jsx(Lr,{}),a.jsx("div",{className:"container mx-auto py-20 px-4",children:a.jsx(ot.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-md mx-auto",children:a.jsxs(De,{children:[a.jsxs(dt,{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-destructive/10 flex items-center justify-center mx-auto mb-4",children:a.jsx(ts,{className:"w-8 h-8 text-destructive"})}),a.jsx(ft,{className:"text-destructive",children:"Invitation Error"})]}),a.jsxs(et,{className:"text-center space-y-4",children:[a.jsx("p",{className:"text-muted-foreground",children:h}),a.jsx(fe,{asChild:!0,children:a.jsx(Fa,{to:"/projects",children:"Go to Projects"})})]})]})})})]}):f?a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:[a.jsx(Lr,{}),a.jsx("div",{className:"container mx-auto py-20 px-4",children:a.jsx(ot.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-md mx-auto",children:a.jsxs(De,{children:[a.jsxs(dt,{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-4",children:a.jsx(br,{className:"w-8 h-8 text-green-600"})}),a.jsx(ft,{className:"text-green-600",children:"Welcome to the project!"})]}),a.jsxs(et,{className:"text-center space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"font-semibold",children:c==null?void 0:c.projectName}),a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[y((c==null?void 0:c.role)||"viewer"),a.jsx(_e,{variant:(c==null?void 0:c.role)==="editor"?"default":"secondary",children:c==null?void 0:c.role})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:j((c==null?void 0:c.role)||"viewer")})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs(fe,{onClick:b,className:"w-full",children:[a.jsx(u7,{className:"w-4 h-4 mr-2"}),"Open Project"]}),a.jsx(fe,{variant:"outline",asChild:!0,className:"w-full",children:a.jsx(Fa,{to:"/projects",children:"View All Projects"})})]})]})]})})})]}):c!=null&&c.requiresRegistration?a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:[a.jsx(Lr,{}),a.jsx("div",{className:"container mx-auto py-20 px-4",children:a.jsx(ot.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-md mx-auto",children:a.jsxs(De,{children:[a.jsxs(dt,{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center mx-auto mb-4",children:a.jsx(ZP,{className:"w-8 h-8 text-blue-600"})}),a.jsx(ft,{children:"Join FramePromptly"})]}),a.jsxs(et,{className:"space-y-6",children:[a.jsxs(za,{children:[a.jsx(qa,{className:"h-4 w-4"}),a.jsxs(Va,{children:["You've been invited to collaborate on ",a.jsxs("strong",{children:['"',c.projectName,'"']})," as a ",a.jsx("strong",{children:c.role}),"."]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(Rv,{className:"w-4 h-4"}),a.jsxs("span",{children:["Invited: ",c.invitedEmail]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[y(c.role),a.jsxs("span",{children:["Role: ",c.role]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"To view and accept this invitation, you need to sign in or create an account. After signing in, you'll see the invitation in your Projects page where you can accept or decline it."}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(fe,{asChild:!0,className:"w-full",children:a.jsx(Fa,{to:`/auth?invitation=${g}&email=${encodeURIComponent(c.invitedEmail)}`,children:"Create Account"})}),a.jsx(fe,{variant:"outline",asChild:!0,className:"w-full",children:a.jsx(Fa,{to:`/auth?mode=signin&invitation=${g}&email=${encodeURIComponent(c.invitedEmail)}`,children:"Sign In"})})]})]})]})]})})})]}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:[a.jsx(Lr,{}),a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx(De,{className:"w-full max-w-md",children:a.jsx(et,{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx(Loader2,{className:"w-8 h-8 animate-spin text-primary mx-auto"}),a.jsx("p",{className:"text-muted-foreground",children:"Redirecting to Projects..."})]})})})})]})}function UVe({tool:e="User Interviews",projectContext:t={},qualitySettings:n={},aiMethodSettings:r={},knowledgeContext:s=null,onPromptGenerated:i}){const[o,c]=w.useState(["role","context"]),[l,d]=w.useState(""),[u,h]=w.useState(!1),[A,f]=w.useState([]),[m,g]=w.useState({}),[b,y]=w.useState(""),[j,x]=w.useState(!1),{toast:C}=ii(),S=()=>{const Y=[],X=e.toLowerCase().includes("interview")||e.toLowerCase().includes("survey")||e.toLowerCase().includes("study")||e.toLowerCase().includes("research")||e.toLowerCase().includes("testing")||e.toLowerCase().includes("evaluation");Y.push({id:"role",type:"role",title:"AI Role & Expertise",content:`You are an expert UX ${X?"researcher":"designer"} with extensive experience in ${e} methodology. You have deep knowledge of user-centered design principles and best practices.`,source:`Tool: ${e}`,icon:a.jsx(Gs,{className:"w-4 h-4"}),color:"bg-purple-100 border-purple-300 text-purple-800",editable:!0}),Y.push({id:"context",type:"context",title:"Project Context",content:`Working on a project with the following context:

Target Audience: [target_audience]
Project Goals: [project_goals] 
Key Constraints: [constraints]
Success Metrics: [success_metrics]
Team Composition: [team_composition]
Timeline: [timeline]

Please tailor your response specifically for [target_audience] while keeping [constraints] in mind.`,source:"Project Settings  Context Tab (with variable replacement)",icon:a.jsx(Mr,{className:"w-4 h-4"}),color:"bg-blue-100 border-blue-300 text-blue-800",editable:!0});const K=_(e);Y.push({id:"task",type:"task",title:"Specific Task",content:K,source:`Tool: ${e}`,icon:a.jsx(_p,{className:"w-4 h-4"}),color:"bg-green-100 border-green-300 text-green-800",editable:!0});const J=[];n.methodologyDepth&&J.push(`Methodology Depth: ${n.methodologyDepth}`),n.outputDetail&&J.push(`Output Detail Level: ${n.outputDetail}`),n.timeConstraints&&J.push(`Time Constraints: ${n.timeConstraints}`),Y.push({id:"constraints",type:"constraints",title:"Quality & Constraints",content:J.length>0?`Please ensure your response meets these quality standards:
${J.join(`
`)}`:"Apply standard UX methodology practices.",source:"Project Settings  Quality Tab",icon:a.jsx(us,{className:"w-4 h-4"}),color:"bg-orange-100 border-orange-300 text-orange-800",editable:!0});const W=N(r);Y.push({id:"format",type:"format",title:"Output Format",content:W,source:"AI Method Settings  Prompt Structure",icon:a.jsx(In,{className:"w-4 h-4"}),color:"bg-indigo-100 border-indigo-300 text-indigo-800",editable:!0}),s&&Y.push({id:"knowledge",type:"context",title:"Knowledge Context",content:`Additional project knowledge has been provided:

${s}

Please integrate this information into your recommendations and ensure your response is aligned with this context.`,source:"Knowledge Base / Uploaded Document / Manual Input",icon:a.jsx(In,{className:"w-4 h-4"}),color:"bg-violet-100 border-violet-300 text-violet-800",editable:!0});const ne=L(e);return ne&&Y.push({id:"examples",type:"examples",title:"Examples & Guidance",content:ne,source:`${e} Best Practices`,icon:a.jsx(zr,{className:"w-4 h-4"}),color:"bg-teal-100 border-teal-300 text-teal-800",editable:!0}),Y},_=Y=>{const X=Y.toLowerCase().replace(/\s+/g,"-").replace("user-interview","user-interviews").replace("persona-creation","personas").replace("journey-mapping","journey-maps"),q=Ip(X,(t==null?void 0:t.industry)||"general");if(q&&q.length>0){const J=q.slice(0,3).join(" ");return`${Y} methodology: ${J}

Focus on [target_audience] and ensure your recommendations align with [project_goals]. Consider [constraints] when making suggestions.`}return{"User Interviews":"Generate a comprehensive user interview guide for [target_audience]. Include opening questions, main inquiry areas, and follow-up prompts that will help gather deep insights about user needs, behaviors, and pain points related to [project_goals]. Consider [constraints] when designing the interview approach.",Surveys:"Design comprehensive user surveys using validated question formats for [target_audience]. Include appropriate scales, skip logic, and clear instructions to gather insights about [project_goals].","Field Studies":"Plan and conduct field studies to observe [target_audience] in their natural environment. Focus on understanding context, behaviors, and pain points related to [project_goals].","Competitive Analysis":"Conduct systematic competitive analysis to understand the market landscape and identify opportunities for [project_goals]. Compare features, user experience, and positioning.","Heuristic Evaluation":"Perform heuristic evaluation using established UX principles to identify usability issues and improvement opportunities for [target_audience].","Affinity Mapping":"Apply systematic thematic analysis to organize qualitative research data into meaningful clusters and themes related to [project_goals].",Personas:"Create detailed user personas for [target_audience] based on research findings. Include demographic information, goals, frustrations, behaviors, and key quotes.","Journey Maps":"Develop comprehensive user journey maps that capture [target_audience] experience across all touchpoints. Focus on emotions, pain points, and opportunities for improvement.","Empathy Maps":"Create empathy maps that capture what [target_audience] thinks, feels, sees, says, hears, and does. Focus on emotional insights and user motivations.","User Stories":"Write clear, actionable user stories from the perspective of [target_audience] that support [project_goals]. Include acceptance criteria and priority levels.","How Might We":'Frame problems as innovation opportunities using structured "How might we..." questions that address [target_audience] needs and [project_goals].',Brainstorming:"Conduct structured ideation sessions using proven creative techniques to generate solutions for [target_audience] that align with [project_goals].",Sketching:"Create rapid sketches and wireframes to explore design solutions for [target_audience]. Focus on key user flows and interface concepts.",Prototyping:"Develop interactive prototypes to test design concepts with [target_audience]. Create realistic scenarios that demonstrate key functionality.",Storyboarding:"Create visual narratives that illustrate [target_audience] interactions and experiences. Show key moments in the user journey.","Usability Testing":"Design and conduct usability tests with [target_audience] to validate design decisions. Include measurable success criteria and clear testing protocols.","A/B Testing":"Plan A/B tests to compare design alternatives for [target_audience]. Define success metrics and statistical significance requirements.","Prototype Testing":"Test interactive prototypes with [target_audience] to validate design concepts and identify improvement opportunities.","Design Principles":"Establish design principles that guide decision-making for [target_audience] and support [project_goals]. Include rationale and application examples.","Content Strategy":"Develop content strategy that serves [target_audience] needs and supports [project_goals]. Include content types, voice, and governance.","Information Architecture":"Design information architecture that makes sense to [target_audience] and supports [project_goals]. Include navigation, categorization, and labeling."}[Y]||`Apply ${Y} methodology following UX best practices and established frameworks. Focus on [target_audience] needs and ensure alignment with [project_goals]. Consider [constraints] in your recommendations.`},N=Y=>{const X=(Y==null?void 0:Y.promptStructure)||"framework-guided",q=(Y==null?void 0:Y.creativityLevel)||"balanced";let J={"framework-guided":"Structure your response following established UX methodology frameworks. Use clear sections, actionable insights, and professional formatting.","open-ended":"Provide a flexible, exploratory response that encourages creative thinking and multiple perspectives.","structured-templates":"Use a consistent template format with predefined sections and standardized layouts."}[X];return(q==="creative"||q==="experimental")&&(J+=" Feel free to include innovative approaches and creative suggestions."),J},L=Y=>{const X=Y.toLowerCase().replace(/\s+/g,"-").replace("user-interview","user-interviews").replace("persona-creation","personas").replace("journey-mapping","journey-maps"),q=Ip(X,(t==null?void 0:t.industry)||"general");if(q&&q.length>3){const J=q.filter(W=>W.includes("Use")||W.includes("Include")||W.includes("Apply")||W.includes("Example")).slice(0,3).map((W,ne)=>`${ne+1}. ${W}`).join(`
`);if(J)return`Best Practices:
${J}`}return{"User Interview":`Example questions:
 "Can you walk me through your typical day?"
 "What's the most frustrating part of [current process]?"
 "If you had a magic wand, what would you change?"`,"Persona Creation":"Include: Name, Age, Job Title, Goals (3-4), Pain Points (3-4), Quote, Technology Comfort Level, Preferred Communication Channels","Journey Mapping":"Include: Phases, Actions, Emotions, Pain Points, Opportunities, Touchpoints, Success Metrics","Empathy Mapping":"Quadrants: Think (thoughts), Feel (emotions), See (environment), Say/Do (actions and words)","Affinity Mapping":"Process: Individual notes  Grouping  Theme labeling  Insight prioritization","How Might We":'Format: "How might we..." questions that are specific enough to guide solutions but broad enough to allow innovation',Brainstorming:"Rules: Build on ideas, defer judgment, encourage wild ideas, aim for quantity over quality","Problem Statement":'Format: "[User name] is a/an [characteristics] who needs [need] because [insight]"',"Usability Testing":"Include: Task scenarios, Success criteria, Metrics to measure, Error recovery testing",Surveys:"Include: Appropriate scales, Skip logic, Pilot testing, Clear instructions"}[Y]||null},[P,F]=w.useState([]);w.useEffect(()=>{const Y=S();F(Y),I(Y)},[e,t,n,r,s]);const I=Y=>{h(!0),setTimeout(()=>{let X=Y.map(q=>q.content).join(`

`);X=T(X),d(X),h(!1),i&&i(X)},1500)},T=Y=>{let X=Y;const q={"[target_audience]":(t==null?void 0:t.targetAudience)||"general users","[audience]":(t==null?void 0:t.targetAudience)||"general users","[project_goals]":(t==null?void 0:t.primaryGoals)||"improve user experience","[goals]":(t==null?void 0:t.primaryGoals)||"improve user experience","[constraints]":(t==null?void 0:t.keyConstraints)||"standard UX best practices","[limitations]":(t==null?void 0:t.keyConstraints)||"standard UX best practices","[success_metrics]":(t==null?void 0:t.successMetrics)||"user satisfaction and task completion","[metrics]":(t==null?void 0:t.successMetrics)||"user satisfaction and task completion","[team]":(t==null?void 0:t.teamComposition)||"UX team","[team_composition]":(t==null?void 0:t.teamComposition)||"UX team","[timeline]":(t==null?void 0:t.timeline)||"standard project timeline","[timeframe]":(t==null?void 0:t.timeline)||"standard project timeline"};return Object.entries(q).forEach(([K,J])=>{const W=new RegExp(Q(K),"gi");X=X.replace(W,J)}),X},Q=Y=>Y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),D=Y=>{c(X=>X.includes(Y)?X.filter(q=>q!==Y):[...X,Y])},M=()=>{navigator.clipboard.writeText(l),C({title:"Copied!",description:"Prompt copied to clipboard"})},U=async()=>{if(!l.trim()){C({title:"No prompt to run",description:"Please wait for the prompt to be generated first",variant:"destructive"});return}x(!0),y("");try{console.log("Calling generate-ai-prompt with:",{promptContent:l.substring(0,100)+"...",toolName:e});const Y=s?[{title:"Additional Context",content:s}]:null,{data:X,error:q}=await rt.functions.invoke("generate-ai-prompt",{body:{promptContent:l,variables:{},projectId:"ai-stress-test-prompt-builder",frameworkName:"Custom",stageName:"Analysis",toolName:e,knowledgeContext:Y}});if(console.log("Function response:",{aiResult:X,aiError:q}),q)throw console.error("Function error details:",q),new Error(q.message||`Function error: ${JSON.stringify(q)}`);console.log("aiResult structure:",{keys:Object.keys(X||{}),aiResponse:X==null?void 0:X.aiResponse,response:X==null?void 0:X.response,result:X==null?void 0:X.result,fullResult:X});const K=(X==null?void 0:X.aiResponse)||(X==null?void 0:X.response)||(X==null?void 0:X.result);K?y(K):(console.error("No response text found in any expected fields:",X),y("No AI response received. Check console for debugging information.")),C({title:"Prompt executed successfully",description:"AI response generated below"})}catch(Y){console.error("Error running prompt:",Y);let X="Failed to generate AI response",q=` **How to fix this:**

1. **For Development**: Add your OpenAI API key to the Supabase environment:
   - Go to your Supabase project dashboard
   - Navigate to Settings  Edge Functions
   - Add environment variable: \`OPENAI_API_KEY=your_key_here\`

2. **Alternative**: Copy the generated prompt above and test it directly in:
   - ChatGPT (https://chat.openai.com)
   - Claude (https://claude.ai)
   - Any other AI assistant

3. **For Production**: Ensure all environment variables are configured in your deployment environment.`;Y instanceof Error&&(X=Y.message,Y.message.includes("OpenAI API key not configured")?X="OpenAI API key is not configured on the server.":Y.message.includes("Edge Function returned a non-2xx status code")?X="Server configuration issue - likely missing OpenAI API key.":Y.message.includes("Invalid authentication")&&(X="Authentication failed. Please try logging in again.",q="Please refresh the page and log in again.")),y(` **Error**: ${X}

${q}

 **Technical Details**: 
- Error type: ${Y instanceof Error?Y.constructor.name:"Unknown"}
- Timestamp: ${new Date().toISOString()}

 **The generated prompt above is ready to use** - you can copy it and paste it into any AI assistant to get your UX methodology guidance!`),C({title:"Error running prompt",description:"See response area for troubleshooting steps",variant:"destructive"})}finally{x(!1)}},H=(Y,X)=>{f(q=>[...q,Y]),g(q=>({...q,[Y]:X}))},$=Y=>{f(X=>X.filter(q=>q!==Y)),g(X=>{const q={...X};return delete q[Y],q})},R=Y=>{const X=m[Y];if(X!==void 0){F(K=>K.map(J=>J.id===Y?{...J,content:X}:J));const q=P.map(K=>K.id===Y?{...K,content:X}:K);I(q),f(K=>K.filter(J=>J!==Y)),g(K=>{const J={...K};return delete J[Y],J}),C({title:"Section Updated",description:"Prompt section has been updated successfully"})}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"AI Prompt Builder"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Watch how your settings combine to create the perfect AI prompt"})]}),a.jsx("div",{className:"space-y-4",children:a.jsx(Pr,{children:P.map((Y,X)=>a.jsx(ot.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:X*.1},children:a.jsxs(De,{className:$e("border-2",Y.color.split(" ")[1]),children:[a.jsx(dt,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:$e("p-2 rounded-lg",Y.color),children:Y.icon}),a.jsxs("div",{children:[a.jsx(ft,{className:"text-base",children:Y.title}),a.jsxs(Kt,{className:"text-xs",children:["Source: ",Y.source]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[Y.editable&&a.jsx(fe,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0",onClick:()=>H(Y.id,Y.content),disabled:A.includes(Y.id),children:a.jsx(Xu,{className:"w-3 h-3"})}),a.jsx(fe,{size:"sm",variant:"ghost",onClick:()=>D(Y.id),className:"h-8 w-8 p-0",children:o.includes(Y.id)?a.jsx(Zj,{className:"w-4 h-4"}):a.jsx(Ic,{className:"w-4 h-4"})})]})]})}),a.jsx(Pr,{children:o.includes(Y.id)&&a.jsx(ot.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:a.jsx(et,{className:"pt-0",children:A.includes(Y.id)?a.jsxs("div",{className:"space-y-3",children:[a.jsx(Qr,{value:m[Y.id]||Y.content,onChange:q=>g(K=>({...K,[Y.id]:q.target.value})),className:"min-h-[120px] font-mono text-sm",placeholder:"Edit the prompt section content..."}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(fe,{size:"sm",onClick:()=>R(Y.id),className:"h-8",children:[a.jsx(Od,{className:"w-3 h-3 mr-1"}),"Save"]}),a.jsxs(fe,{size:"sm",variant:"outline",onClick:()=>$(Y.id),className:"h-8",children:[a.jsx(_i,{className:"w-3 h-3 mr-1"}),"Cancel"]})]})]}):a.jsx("div",{className:"bg-muted/50 p-3 rounded-md",children:a.jsx("pre",{className:"text-sm whitespace-pre-wrap font-mono",children:Y.content})})})})})]})},Y.id))})}),a.jsx("div",{className:"flex justify-center",children:a.jsx(ot.div,{animate:{y:[0,10,0]},transition:{repeat:1/0,duration:2},className:"text-muted-foreground",children:""})}),a.jsxs(De,{className:"border-2 border-primary",children:[a.jsx(dt,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:a.jsx(Gs,{className:"w-5 h-5 text-primary"})}),a.jsxs("div",{children:[a.jsx(ft,{className:"text-lg",children:"Generated AI Prompt"}),a.jsx(Kt,{children:"Ready to use with any AI model"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(_e,{variant:"secondary",children:[l.length," characters"]}),a.jsxs(fe,{size:"sm",variant:"outline",onClick:M,children:[a.jsx(Ii,{className:"w-4 h-4 mr-2"}),"Copy"]}),a.jsxs(fe,{size:"sm",onClick:U,disabled:j||u,children:[a.jsx(Kd,{className:"w-4 h-4 mr-2"}),j?"Running...":"Run"]})]})]})}),a.jsx(et,{children:a.jsx("div",{className:"relative",children:u?a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx(ot.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1},className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full"}),a.jsx("span",{className:"ml-3 text-sm text-muted-foreground",children:"Building your prompt..."})]}):a.jsx("div",{className:"bg-muted/50 p-4 rounded-lg",children:a.jsx("pre",{className:"text-sm whitespace-pre-wrap font-mono max-h-64 overflow-y-auto",children:l})})})})]}),(b||j)&&a.jsxs(De,{className:"border-2 border-green-200",children:[a.jsx(dt,{children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:a.jsx(Gs,{className:"w-5 h-5 text-green-600"})}),a.jsxs("div",{children:[a.jsx(ft,{className:"text-lg",children:"AI Response"}),a.jsx(Kt,{children:"Generated using your configured prompt and settings"})]})]})}),a.jsx(et,{children:a.jsx("div",{className:"relative",children:j?a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx(ot.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1},className:"w-6 h-6 border-2 border-green-600 border-t-transparent rounded-full"}),a.jsx("span",{className:"ml-3 text-sm text-muted-foreground",children:"Generating AI response..."})]}):a.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:a.jsx("pre",{className:"text-sm whitespace-pre-wrap font-sans max-h-96 overflow-y-auto",children:b})})})})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[a.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[a.jsx("div",{className:"text-lg font-semibold",children:P.length}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Sections"})]}),a.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[a.jsx("div",{className:"text-lg font-semibold",children:l.split(" ").length}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Words"})]}),a.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[a.jsx("div",{className:"text-lg font-semibold",children:(r==null?void 0:r.creativityLevel)||"Balanced"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Creativity"})]})]})]})}function LVe(){var q,K,J;const[e]=qv(),{projects:t,getEnhancedSettings:n}=js(),{entries:r,fetchEntries:s}=pa(),[i,o]=w.useState(e.get("tool")||"User Interviews"),[c,l]=w.useState(e.get("projectId")||((q=t==null?void 0:t[0])==null?void 0:q.id)||""),[d,u]=w.useState("general"),[h,A]=w.useState({primaryGoals:"",targetAudience:"",keyConstraints:"",successMetrics:"",teamComposition:"",timeline:""}),[f,m]=w.useState({methodologyDepth:"intermediate",outputDetail:"moderate",timeConstraints:"standard",industryCompliance:!1,accessibilityFocus:!1}),[g,b]=w.useState({promptStructure:"framework-guided",creativityLevel:"balanced",reasoning:"step-by-step",adaptability:"context-aware",validation:"built-in",personalization:"user-preferences",temperature:.7,topP:.9,topK:50}),[y,j]=w.useState(""),[x,C]=w.useState("none"),[S,_]=w.useState(""),[N,L]=w.useState(null),[P,F]=w.useState(""),[I,T]=w.useState(""),[Q,D]=w.useState(!1),[M,U]=w.useState([]);w.useEffect(()=>{c&&($(),H())},[c]);const H=async()=>{if(c){console.log("Loading knowledge documents for project:",c);try{await s(c),console.log("Knowledge documents loaded:",(r==null?void 0:r.length)||0,"entries")}catch(W){console.error("Error loading knowledge documents:",W)}}};w.useEffect(()=>{U(r||[])},[r]),w.useEffect(()=>{t&&t.length>0&&!c&&l(t[0].id)},[t,c]);const $=async()=>{try{const W=await n(c);W&&(u(W.industry||"general"),A(W.projectContext||{primaryGoals:"",targetAudience:"",keyConstraints:"",successMetrics:"",teamComposition:"",timeline:""}),m(W.qualitySettings||{methodologyDepth:"intermediate",outputDetail:"moderate",timeConstraints:"standard",industryCompliance:!1,accessibilityFocus:!1}),b(W.aiMethodSettings||{promptStructure:"framework-guided",creativityLevel:"balanced",reasoning:"step-by-step",adaptability:"context-aware",validation:"built-in",personalization:"user-preferences",temperature:.7,topP:.9,topK:50}))}catch(W){console.error("Failed to load project settings:",W)}},R=async W=>{if(W){D(!0),L(W);try{const ne=new FormData;ne.append("file",W),ne.append("projectId",c);const{data:ae,error:ce}=await rt.functions.invoke("process-document",{body:ne});if(ce)throw new Error(ce.message);F(ae.content||"No content extracted")}catch(ne){console.error("Error processing file:",ne),F(`Error processing file: ${ne instanceof Error?ne.message:"Unknown error"}`)}finally{D(!1)}}},Y=()=>{switch(x){case"knowledge":if(!r||!S)return null;const W=r.find(ne=>ne.id===S);return W?`**${W.title}**

${W.content}`:null;case"upload":return N&&P?`**${N.name}**

${P}`:null;case"manual":return I.trim()||null;default:return null}},X=["User Interviews","Surveys","Field Studies","Diary Studies","Focus Groups","Card Sorting","Tree Testing","First Click Testing","Five Second Test","Competitive Analysis","Heuristic Evaluation","Expert Review","Affinity Mapping","Personas","User Stories","Jobs to be Done","Journey Maps","Service Blueprints","Empathy Maps","Experience Maps","System Maps","Stakeholder Maps","How Might We","Brainstorming","Crazy 8s","Sketching","Storyboarding","Wireframing","Prototyping","Design Studio","Co-design Workshops","Usability Testing","A/B Testing","Prototype Testing","Guerrilla Testing","Remote Testing","Accessibility Testing","Performance Testing","Moderated Testing","Unmoderated Testing","Design Principles","Problem Framing","Opportunity Mapping","Feature Prioritization","Design System Planning","Content Strategy","Information Architecture"];return t?a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:[a.jsx(Lr,{}),a.jsxs(ot.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border-b border-gray-100 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsx("div",{className:"flex items-center gap-4 mb-4",children:a.jsxs(fe,{variant:"ghost",onClick:()=>window.history.back(),className:"text-gray-600 hover:text-gray-800",children:[a.jsx(yo,{className:"w-4 h-4 mr-2"}),"Back"]})}),a.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[a.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-purple-100 rounded-xl",children:a.jsx(Gs,{className:"w-6 h-6 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"AI Prompt Builder"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Visualize and understand how your AI prompts are constructed"})]})]})]})}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs(De,{className:"mb-6",children:[a.jsxs(dt,{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(us,{className:"w-5 h-5 text-blue-600"}),a.jsx(ft,{children:"Prompt Configuration"})]}),a.jsx(Kt,{children:"Select your project and tool to see how the AI prompt is built"})]}),a.jsxs(et,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Project"}),a.jsxs(Vn,{value:c,onValueChange:l,children:[a.jsx(Qn,{children:a.jsx(qn,{placeholder:"Select project"})}),a.jsx(Hn,{children:t&&t.length>0?t.map(W=>a.jsx(qe,{value:W.id,children:W.name},W.id)):a.jsx(qe,{value:"demo",disabled:!0,children:t===void 0?"Loading projects...":"No projects found"})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Tool"}),a.jsxs(Vn,{value:i,onValueChange:o,children:[a.jsx(Qn,{children:a.jsx(qn,{placeholder:"Select tool"})}),a.jsxs(Hn,{className:"max-h-80",children:[a.jsx("div",{className:"px-2 py-1 text-xs font-semibold text-muted-foreground",children:"Research & Discovery"}),X.slice(0,12).map(W=>a.jsx(qe,{value:W,children:W},W)),a.jsx("div",{className:"px-2 py-1 text-xs font-semibold text-muted-foreground border-t mt-1",children:"Analysis & Synthesis"}),X.slice(12,22).map(W=>a.jsx(qe,{value:W,children:W},W)),a.jsx("div",{className:"px-2 py-1 text-xs font-semibold text-muted-foreground border-t mt-1",children:"Ideation & Design"}),X.slice(22,31).map(W=>a.jsx(qe,{value:W,children:W},W)),a.jsx("div",{className:"px-2 py-1 text-xs font-semibold text-muted-foreground border-t mt-1",children:"Validation & Testing"}),X.slice(31,40).map(W=>a.jsx(qe,{value:W,children:W},W)),a.jsx("div",{className:"px-2 py-1 text-xs font-semibold text-muted-foreground border-t mt-1",children:"Strategy & Planning"}),X.slice(40).map(W=>a.jsx(qe,{value:W,children:W},W))]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t",children:[a.jsx(L5,{className:"w-4 h-4 text-muted-foreground"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:"Change the project or tool above to see how it affects the AI prompt construction"})]})]})]}),a.jsxs(De,{className:"mb-6",children:[a.jsxs(dt,{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(phe,{className:"w-5 h-5 text-purple-600"}),a.jsx(ft,{children:"AI Configuration Settings"})]}),a.jsx(Kt,{children:"Configure AI context, quality, and method settings to see their impact on prompt generation"})]}),a.jsx(et,{children:a.jsxs(Ka,{defaultValue:"context",className:"w-full",children:[a.jsxs(ga,{className:"grid w-full grid-cols-3",children:[a.jsxs(xn,{value:"context",className:"flex items-center gap-2",children:[a.jsx(Mr,{className:"w-4 h-4"}),"Context"]}),a.jsxs(xn,{value:"quality",className:"flex items-center gap-2",children:[a.jsx(br,{className:"w-4 h-4"}),"Quality"]}),a.jsxs(xn,{value:"ai-methods",className:"flex items-center gap-2",children:[a.jsx(Gs,{className:"w-4 h-4"}),"AI Methods"]})]}),a.jsxs(jn,{value:"context",className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{children:"Industry Context"}),a.jsxs(Vn,{value:d,onValueChange:u,children:[a.jsx(Qn,{children:a.jsx(qn,{})}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"general",children:"General (no specific industry)"}),a.jsx(qe,{value:"fintech",children:"Financial Services"}),a.jsx(qe,{value:"healthcare",children:"Healthcare"}),a.jsx(qe,{value:"ecommerce",children:"E-commerce"}),a.jsx(qe,{value:"saas",children:"SaaS/Software"}),a.jsx(qe,{value:"education",children:"Education"}),a.jsx(qe,{value:"government",children:"Government/Public Sector"}),a.jsx(qe,{value:"nonprofit",children:"Non-profit"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{htmlFor:"targetAudience",children:"Target Audience"}),a.jsx(ln,{id:"targetAudience",value:h.targetAudience,onChange:W=>A(ne=>({...ne,targetAudience:W.target.value})),placeholder:"Who is your primary target audience?"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{htmlFor:"primaryGoals",children:"Primary Goals"}),a.jsx(Qr,{id:"primaryGoals",value:h.primaryGoals,onChange:W=>A(ne=>({...ne,primaryGoals:W.target.value})),placeholder:"What are the main objectives of this project?",rows:2})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{htmlFor:"keyConstraints",children:"Key Constraints"}),a.jsx(Qr,{id:"keyConstraints",value:h.keyConstraints,onChange:W=>A(ne=>({...ne,keyConstraints:W.target.value})),placeholder:"What are the main limitations or constraints?",rows:2})]})]})]}),a.jsxs(jn,{value:"quality",className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{children:"Methodology Depth"}),a.jsxs(Vn,{value:f.methodologyDepth,onValueChange:W=>m(ne=>({...ne,methodologyDepth:W})),children:[a.jsx(Qn,{children:a.jsx(qn,{})}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"basic",children:"Basic - Simple explanations"}),a.jsx(qe,{value:"intermediate",children:"Intermediate - Balanced detail"}),a.jsx(qe,{value:"advanced",children:"Advanced - Comprehensive analysis"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{children:"Output Detail Level"}),a.jsxs(Vn,{value:f.outputDetail,onValueChange:W=>m(ne=>({...ne,outputDetail:W})),children:[a.jsx(Qn,{children:a.jsx(qn,{})}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"brief",children:"Brief - Concise recommendations"}),a.jsx(qe,{value:"moderate",children:"Moderate - Balanced explanations"}),a.jsx(qe,{value:"comprehensive",children:"Comprehensive - Detailed analysis"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{children:"Time Constraints"}),a.jsxs(Vn,{value:f.timeConstraints,onValueChange:W=>m(ne=>({...ne,timeConstraints:W})),children:[a.jsx(Qn,{children:a.jsx(qn,{})}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"urgent",children:"Urgent - Quick solutions"}),a.jsx(qe,{value:"standard",children:"Standard - Balanced approach"}),a.jsx(qe,{value:"extended",children:"Extended - Thorough exploration"})]})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx(at,{children:"Industry Compliance"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Include industry-specific compliance considerations"})]}),a.jsx(qA,{checked:f.industryCompliance,onCheckedChange:W=>m(ne=>({...ne,industryCompliance:W}))})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx(at,{children:"Accessibility Focus"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Emphasize accessibility in recommendations"})]}),a.jsx(qA,{checked:f.accessibilityFocus,onCheckedChange:W=>m(ne=>({...ne,accessibilityFocus:W}))})]})]})]}),a.jsxs(jn,{value:"ai-methods",className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{children:"AI Creativity Level"}),a.jsxs(Vn,{value:g.creativityLevel,onValueChange:W=>b(ne=>({...ne,creativityLevel:W})),children:[a.jsx(Qn,{children:a.jsx(qn,{})}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"conservative",children:"Conservative - Safe, proven approaches"}),a.jsx(qe,{value:"balanced",children:"Balanced - Mix of proven and innovative ideas"}),a.jsx(qe,{value:"creative",children:"Creative - Novel and innovative suggestions"}),a.jsx(qe,{value:"experimental",children:"Experimental - Cutting-edge approaches"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{children:"Reasoning Approach"}),a.jsxs(Vn,{value:g.reasoning,onValueChange:W=>b(ne=>({...ne,reasoning:W})),children:[a.jsx(Qn,{children:a.jsx(qn,{})}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"step-by-step",children:"Step-by-Step - Detailed logical progression"}),a.jsx(qe,{value:"direct",children:"Direct - Concise, straight to the point"}),a.jsx(qe,{value:"exploratory",children:"Exploratory - Multiple perspectives"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{children:"Adaptability Method"}),a.jsxs(Vn,{value:g.adaptability,onValueChange:W=>b(ne=>({...ne,adaptability:W})),children:[a.jsx(Qn,{children:a.jsx(qn,{})}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"static",children:"Static - Fixed responses"}),a.jsx(qe,{value:"context-aware",children:"Context-Aware - Adapts to project context"}),a.jsx(qe,{value:"dynamic-learning",children:"Dynamic Learning - Learns from preferences"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{children:"Validation & Quality Control"}),a.jsxs(Vn,{value:g.validation,onValueChange:W=>b(ne=>({...ne,validation:W})),children:[a.jsx(Qn,{children:a.jsx(qn,{})}),a.jsxs(Hn,{children:[a.jsx(qe,{value:"none",children:"None - No validation checks"}),a.jsx(qe,{value:"basic",children:"Basic - Simple relevance checks"}),a.jsx(qe,{value:"built-in",children:"Built-in - Standard quality validation"}),a.jsx(qe,{value:"comprehensive",children:"Comprehensive - Extensive analysis"})]})]})]})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[a.jsx("h4",{className:"font-medium",children:"Advanced Parameters"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx(at,{children:"Temperature"}),a.jsx("span",{className:"text-sm font-mono",children:g.temperature.toFixed(1)})]}),a.jsx(Rp,{value:[g.temperature],onValueChange:([W])=>b(ne=>({...ne,temperature:W})),max:1,min:.1,step:.1}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Controls randomness and creativity"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx(at,{children:"Top-p"}),a.jsx("span",{className:"text-sm font-mono",children:g.topP.toFixed(2)})]}),a.jsx(Rp,{value:[g.topP],onValueChange:([W])=>b(ne=>({...ne,topP:W})),max:1,min:.1,step:.05}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Controls diversity through nucleus sampling"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx(at,{children:"Top-k"}),a.jsx("span",{className:"text-sm font-mono",children:g.topK})]}),a.jsx(Rp,{value:[g.topK],onValueChange:([W])=>b(ne=>({...ne,topK:W})),max:100,min:10,step:5}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Limits vocabulary consideration"})]})]})]})]})]})})]}),a.jsxs(De,{className:"mb-6",children:[a.jsxs(dt,{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(xo,{className:"w-5 h-5 text-indigo-600"}),a.jsx(ft,{children:"Knowledge Context (Optional)"})]}),a.jsx(Kt,{children:"Add additional context to enhance the AI prompt with specific project knowledge"})]}),a.jsxs(et,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(at,{children:"Context Source"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[a.jsxs(fe,{variant:x==="none"?"default":"outline",size:"sm",onClick:()=>C("none"),className:"justify-start",children:[a.jsx(_i,{className:"w-4 h-4 mr-2"}),"None"]}),a.jsxs(fe,{variant:x==="knowledge"?"default":"outline",size:"sm",onClick:()=>C("knowledge"),className:"justify-start",children:[a.jsx(In,{className:"w-4 h-4 mr-2"}),"Knowledge Base"]}),a.jsxs(fe,{variant:x==="upload"?"default":"outline",size:"sm",onClick:()=>C("upload"),className:"justify-start",children:[a.jsx(xx,{className:"w-4 h-4 mr-2"}),"Upload PDF"]}),a.jsxs(fe,{variant:x==="manual"?"default":"outline",size:"sm",onClick:()=>C("manual"),className:"justify-start",children:[a.jsx(Sd,{className:"w-4 h-4 mr-2"}),"Manual Input"]})]})]}),x==="knowledge"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{children:"Select Knowledge Document"}),a.jsxs(Vn,{value:S,onValueChange:_,children:[a.jsx(Qn,{children:a.jsx(qn,{placeholder:"Choose a document from your knowledge base"})}),a.jsx(Hn,{children:r&&r.length>0?r.map(W=>a.jsx(qe,{value:W.id,children:W.title},W.id)):a.jsx(qe,{value:"none",disabled:!0,children:r===void 0?"Loading documents...":"No documents found in knowledge base"})})]}),S&&r&&a.jsxs("div",{className:"p-3 bg-muted/50 rounded-md",children:[a.jsx("p",{className:"text-sm font-medium mb-1",children:"Preview:"}),a.jsxs("p",{className:"text-xs text-muted-foreground line-clamp-3",children:[((J=(K=r.find(W=>W.id===S))==null?void 0:K.content)==null?void 0:J.substring(0,200))||"No content preview available","..."]})]})]}),x==="upload"&&a.jsxs("div",{className:"space-y-3",children:[a.jsx(at,{children:"Upload PDF Document"}),a.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-6",children:[a.jsx("input",{type:"file",accept:".pdf",onChange:W=>{var ae;const ne=(ae=W.target.files)==null?void 0:ae[0];ne&&R(ne)},className:"hidden",id:"pdf-upload"}),a.jsxs("label",{htmlFor:"pdf-upload",className:"cursor-pointer flex flex-col items-center gap-2",children:[a.jsx(xx,{className:"w-8 h-8 text-muted-foreground"}),a.jsx("p",{className:"text-sm font-medium",children:"Click to upload PDF"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"PDF files only"})]})]}),Q&&a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 rounded-md",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),a.jsx("span",{className:"text-sm",children:"Processing PDF..."})]}),N&&P&&a.jsxs("div",{className:"p-3 bg-muted/50 rounded-md",children:[a.jsxs("p",{className:"text-sm font-medium mb-1",children:["Extracted from: ",N.name]}),a.jsxs("p",{className:"text-xs text-muted-foreground line-clamp-4",children:[P.substring(0,300),"..."]})]})]}),x==="manual"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{htmlFor:"manual-context",children:"Manual Context Input"}),a.jsx(Qr,{id:"manual-context",value:I,onChange:W=>T(W.target.value),placeholder:"Enter additional context, requirements, or background information that should influence the AI response...",className:"min-h-[120px]"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[I.length,"/2000 characters"]})]}),x!=="none"&&a.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[a.jsx(Mr,{className:"w-4 h-4 text-muted-foreground"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:"This context will be added to your AI prompt to provide more specific guidance"})]})]})]}),a.jsx(UVe,{tool:i,projectContext:h,qualitySettings:f,aiMethodSettings:g,knowledgeContext:Y(),onPromptGenerated:j})]})})]})]}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:[a.jsx(Lr,{}),a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading AI Prompt Builder..."})]})})]})}const MVe=()=>{const e=ah();return w.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),a.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),a.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},RVe=new eme,OVe=()=>(w.useEffect(()=>{const{initializeEnhancedTemplates:e,initializeTemplates:t}=ma.getState(),{initializeFrameworks:n}=Us.getState();e(),t(),n(),console.log("Enhanced template system initialized")},[]),a.jsx(nme,{client:RVe,children:a.jsxs(Sl,{children:[a.jsx(jAe,{}),a.jsx(nfe,{}),a.jsx(Zme,{basename:"/framepromptly-v4",future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:a.jsxs(Vme,{children:[a.jsx(Hs,{path:"/",element:a.jsx(Ije,{})}),a.jsx(Hs,{path:"/workflow",element:a.jsx(ILe,{})}),a.jsx(Hs,{path:"/projects",element:a.jsx(TLe,{})}),a.jsx(Hs,{path:"/knowledge/:projectId",element:a.jsx(DLe,{})}),a.jsx(Hs,{path:"/knowledge/:projectId/document/:documentId",element:a.jsx(mze,{})}),a.jsx(Hs,{path:"/project/:projectId/settings",element:a.jsx(Qze,{})}),a.jsx(Hs,{path:"/library-old",element:a.jsx(Hze,{})}),a.jsx(Hs,{path:"/library",element:a.jsx(a8,{})}),a.jsx(Hs,{path:"/library/:promptId",element:a.jsx(a8,{})}),a.jsx(Hs,{path:"/auth",element:a.jsx(dVe,{})}),a.jsx(Hs,{path:"/metrics",element:a.jsx(CVe,{})}),a.jsx(Hs,{path:"/frameworks",element:a.jsx(jVe,{})}),a.jsx(Hs,{path:"/test-instructions",element:a.jsx(kVe,{})}),a.jsx(Hs,{path:"/tool-prompt-demo",element:a.jsx(SVe,{})}),a.jsx(Hs,{path:"/aistresstest",element:a.jsx(NVe,{})}),a.jsx(Hs,{path:"/board",element:a.jsx(BVe,{})}),a.jsx(Hs,{path:"/profile",element:a.jsx(FVe,{})}),a.jsx(Hs,{path:"/invitation",element:a.jsx(DVe,{})}),a.jsx(Hs,{path:"/prompt-builder",element:a.jsx(LVe,{})}),a.jsx(Hs,{path:"*",element:a.jsx(MVe,{})})]})})]})}));U$(document.getElementById("root")).render(a.jsx(OVe,{}));export{Sr as _,Oi as c,Tj as g};
